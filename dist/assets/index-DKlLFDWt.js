function OC(e,t){for(var s=0;s<t.length;s++){const a=t[s];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in e)){const c=Object.getOwnPropertyDescriptor(a,l);c&&Object.defineProperty(e,l,c.get?c:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function s(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=s(l);fetch(l.href,c)}})();function Zd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function PC(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var s=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var l=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(s,a,l.get?l:{enumerable:!0,get:function(){return e[a]}})}),s}var Hm={exports:{}},tc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function LC(){if(h0)return tc;h0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(a,l,c){var u=null;if(c!==void 0&&(u=""+c),l.key!==void 0&&(u=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:e,type:a,key:u,ref:l!==void 0?l:null,props:c}}return tc.Fragment=t,tc.jsx=s,tc.jsxs=s,tc}var m0;function IC(){return m0||(m0=1,Hm.exports=LC()),Hm.exports}var n=IC(),qm={exports:{}},ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function zC(){if(p0)return ut;p0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.iterator;function b(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,N={};function _(k,L,Y){this.props=k,this.context=L,this.refs=N,this.updater=Y||w}_.prototype.isReactComponent={},_.prototype.setState=function(k,L){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,L,"setState")},_.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function R(){}R.prototype=_.prototype;function E(k,L,Y){this.props=k,this.context=L,this.refs=N,this.updater=Y||w}var C=E.prototype=new R;C.constructor=E,j(C,_.prototype),C.isPureReactComponent=!0;var M=Array.isArray,T={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function q(k,L,Y,H,D,I){return Y=I.ref,{$$typeof:e,type:k,key:L,ref:Y!==void 0?Y:null,props:I}}function F(k,L){return q(k.type,L,void 0,void 0,void 0,k.props)}function U(k){return typeof k=="object"&&k!==null&&k.$$typeof===e}function G(k){var L={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(Y){return L[Y]})}var ce=/\/+/g;function re(k,L){return typeof k=="object"&&k!==null&&k.key!=null?G(""+k.key):L.toString(36)}function O(){}function ie(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(O,O):(k.status="pending",k.then(function(L){k.status==="pending"&&(k.status="fulfilled",k.value=L)},function(L){k.status==="pending"&&(k.status="rejected",k.reason=L)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function ue(k,L,Y,H,D){var I=typeof k;(I==="undefined"||I==="boolean")&&(k=null);var $=!1;if(k===null)$=!0;else switch(I){case"bigint":case"string":case"number":$=!0;break;case"object":switch(k.$$typeof){case e:case t:$=!0;break;case x:return $=k._init,ue($(k._payload),L,Y,H,D)}}if($)return D=D(k),$=H===""?"."+re(k,0):H,M(D)?(Y="",$!=null&&(Y=$.replace(ce,"$&/")+"/"),ue(D,L,Y,"",function(ge){return ge})):D!=null&&(U(D)&&(D=F(D,Y+(D.key==null||k&&k.key===D.key?"":(""+D.key).replace(ce,"$&/")+"/")+$)),L.push(D)),1;$=0;var K=H===""?".":H+":";if(M(k))for(var ae=0;ae<k.length;ae++)H=k[ae],I=K+re(H,ae),$+=ue(H,L,Y,I,D);else if(ae=b(k),typeof ae=="function")for(k=ae.call(k),ae=0;!(H=k.next()).done;)H=H.value,I=K+re(H,ae++),$+=ue(H,L,Y,I,D);else if(I==="object"){if(typeof k.then=="function")return ue(ie(k),L,Y,H,D);throw L=String(k),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return $}function P(k,L,Y){if(k==null)return k;var H=[],D=0;return ue(k,H,"","",function(I){return L.call(Y,I,D++)}),H}function X(k){if(k._status===-1){var L=k._result;L=L(),L.then(function(Y){(k._status===0||k._status===-1)&&(k._status=1,k._result=Y)},function(Y){(k._status===0||k._status===-1)&&(k._status=2,k._result=Y)}),k._status===-1&&(k._status=0,k._result=L)}if(k._status===1)return k._result.default;throw k._result}var V=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function te(){}return ut.Children={map:P,forEach:function(k,L,Y){P(k,function(){L.apply(this,arguments)},Y)},count:function(k){var L=0;return P(k,function(){L++}),L},toArray:function(k){return P(k,function(L){return L})||[]},only:function(k){if(!U(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},ut.Component=_,ut.Fragment=s,ut.Profiler=l,ut.PureComponent=E,ut.StrictMode=a,ut.Suspense=h,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,ut.act=function(){throw Error("act(...) is not supported in production builds of React.")},ut.cache=function(k){return function(){return k.apply(null,arguments)}},ut.cloneElement=function(k,L,Y){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var H=j({},k.props),D=k.key,I=void 0;if(L!=null)for($ in L.ref!==void 0&&(I=void 0),L.key!==void 0&&(D=""+L.key),L)!z.call(L,$)||$==="key"||$==="__self"||$==="__source"||$==="ref"&&L.ref===void 0||(H[$]=L[$]);var $=arguments.length-2;if($===1)H.children=Y;else if(1<$){for(var K=Array($),ae=0;ae<$;ae++)K[ae]=arguments[ae+2];H.children=K}return q(k.type,D,void 0,void 0,I,H)},ut.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:c,_context:k},k},ut.createElement=function(k,L,Y){var H,D={},I=null;if(L!=null)for(H in L.key!==void 0&&(I=""+L.key),L)z.call(L,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(D[H]=L[H]);var $=arguments.length-2;if($===1)D.children=Y;else if(1<$){for(var K=Array($),ae=0;ae<$;ae++)K[ae]=arguments[ae+2];D.children=K}if(k&&k.defaultProps)for(H in $=k.defaultProps,$)D[H]===void 0&&(D[H]=$[H]);return q(k,I,void 0,void 0,null,D)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(k){return{$$typeof:f,render:k}},ut.isValidElement=U,ut.lazy=function(k){return{$$typeof:x,_payload:{_status:-1,_result:k},_init:X}},ut.memo=function(k,L){return{$$typeof:p,type:k,compare:L===void 0?null:L}},ut.startTransition=function(k){var L=T.T,Y={};T.T=Y;try{var H=k(),D=T.S;D!==null&&D(Y,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(te,V)}catch(I){V(I)}finally{T.T=L}},ut.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},ut.use=function(k){return T.H.use(k)},ut.useActionState=function(k,L,Y){return T.H.useActionState(k,L,Y)},ut.useCallback=function(k,L){return T.H.useCallback(k,L)},ut.useContext=function(k){return T.H.useContext(k)},ut.useDebugValue=function(){},ut.useDeferredValue=function(k,L){return T.H.useDeferredValue(k,L)},ut.useEffect=function(k,L){return T.H.useEffect(k,L)},ut.useId=function(){return T.H.useId()},ut.useImperativeHandle=function(k,L,Y){return T.H.useImperativeHandle(k,L,Y)},ut.useInsertionEffect=function(k,L){return T.H.useInsertionEffect(k,L)},ut.useLayoutEffect=function(k,L){return T.H.useLayoutEffect(k,L)},ut.useMemo=function(k,L){return T.H.useMemo(k,L)},ut.useOptimistic=function(k,L){return T.H.useOptimistic(k,L)},ut.useReducer=function(k,L,Y){return T.H.useReducer(k,L,Y)},ut.useRef=function(k){return T.H.useRef(k)},ut.useState=function(k){return T.H.useState(k)},ut.useSyncExternalStore=function(k,L,Y){return T.H.useSyncExternalStore(k,L,Y)},ut.useTransition=function(){return T.H.useTransition()},ut.version="19.0.0",ut}var g0;function hg(){return g0||(g0=1,qm.exports=zC()),qm.exports}var m=hg();const we=Zd(m),UC=OC({__proto__:null,default:we},[m]);var Fm={exports:{}},nc={},Vm={exports:{}},Ym={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0;function $C(){return x0||(x0=1,function(e){function t(P,X){var V=P.length;P.push(X);e:for(;0<V;){var te=V-1>>>1,k=P[te];if(0<l(k,X))P[te]=X,P[V]=k,V=te;else break e}}function s(P){return P.length===0?null:P[0]}function a(P){if(P.length===0)return null;var X=P[0],V=P.pop();if(V!==X){P[0]=V;e:for(var te=0,k=P.length,L=k>>>1;te<L;){var Y=2*(te+1)-1,H=P[Y],D=Y+1,I=P[D];if(0>l(H,V))D<k&&0>l(I,H)?(P[te]=I,P[D]=V,te=D):(P[te]=H,P[Y]=V,te=Y);else if(D<k&&0>l(I,V))P[te]=I,P[D]=V,te=D;else break e}}return X}function l(P,X){var V=P.sortIndex-X.sortIndex;return V!==0?V:P.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var h=[],p=[],x=1,v=null,b=3,w=!1,j=!1,N=!1,_=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(P){for(var X=s(p);X!==null;){if(X.callback===null)a(p);else if(X.startTime<=P)a(p),X.sortIndex=X.expirationTime,t(h,X);else break;X=s(p)}}function M(P){if(N=!1,C(P),!j)if(s(h)!==null)j=!0,ie();else{var X=s(p);X!==null&&ue(M,X.startTime-P)}}var T=!1,z=-1,q=5,F=-1;function U(){return!(e.unstable_now()-F<q)}function G(){if(T){var P=e.unstable_now();F=P;var X=!0;try{e:{j=!1,N&&(N=!1,R(z),z=-1),w=!0;var V=b;try{t:{for(C(P),v=s(h);v!==null&&!(v.expirationTime>P&&U());){var te=v.callback;if(typeof te=="function"){v.callback=null,b=v.priorityLevel;var k=te(v.expirationTime<=P);if(P=e.unstable_now(),typeof k=="function"){v.callback=k,C(P),X=!0;break t}v===s(h)&&a(h),C(P)}else a(h);v=s(h)}if(v!==null)X=!0;else{var L=s(p);L!==null&&ue(M,L.startTime-P),X=!1}}break e}finally{v=null,b=V,w=!1}X=void 0}}finally{X?ce():T=!1}}}var ce;if(typeof E=="function")ce=function(){E(G)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,O=re.port2;re.port1.onmessage=G,ce=function(){O.postMessage(null)}}else ce=function(){_(G,0)};function ie(){T||(T=!0,ce())}function ue(P,X){z=_(function(){P(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){j||w||(j=!0,ie())},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return s(h)},e.unstable_next=function(P){switch(b){case 1:case 2:case 3:var X=3;break;default:X=b}var V=b;b=X;try{return P()}finally{b=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,X){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var V=b;b=P;try{return X()}finally{b=V}},e.unstable_scheduleCallback=function(P,X,V){var te=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?te+V:te):V=te,P){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=V+k,P={id:x++,callback:X,priorityLevel:P,startTime:V,expirationTime:k,sortIndex:-1},V>te?(P.sortIndex=V,t(p,P),s(h)===null&&P===s(p)&&(N?(R(z),z=-1):N=!0,ue(M,V-te))):(P.sortIndex=k,t(h,P),j||w||(j=!0,ie())),P},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(P){var X=b;return function(){var V=b;b=X;try{return P.apply(this,arguments)}finally{b=V}}}}(Ym)),Ym}var v0;function BC(){return v0||(v0=1,Vm.exports=$C()),Vm.exports}var Gm={exports:{}},nr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function HC(){if(y0)return nr;y0=1;var e=hg();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(h,p,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:h,containerInfo:p,implementation:x}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return nr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,nr.createPortal=function(h,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return c(h,p,null,x)},nr.flushSync=function(h){var p=u.T,x=a.p;try{if(u.T=null,a.p=2,h)return h()}finally{u.T=p,a.p=x,a.d.f()}},nr.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(h,p))},nr.prefetchDNS=function(h){typeof h=="string"&&a.d.D(h)},nr.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var x=p.as,v=f(x,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?a.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:w}):x==="script"&&a.d.X(h,{crossOrigin:v,integrity:b,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},nr.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=f(p.as,p.crossOrigin);a.d.M(h,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(h)},nr.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,v=f(x,p.crossOrigin);a.d.L(h,x,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},nr.preloadModule=function(h,p){if(typeof h=="string")if(p){var x=f(p.as,p.crossOrigin);a.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(h)},nr.requestFormReset=function(h){a.d.r(h)},nr.unstable_batchedUpdates=function(h,p){return h(p)},nr.useFormState=function(h,p,x){return u.H.useFormState(h,p,x)},nr.useFormStatus=function(){return u.H.useHostTransitionStatus()},nr.version="19.0.0",nr}var b0;function fj(){if(b0)return Gm.exports;b0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Gm.exports=HC(),Gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0;function qC(){if(w0)return nc;w0=1;var e=BC(),t=hg(),s=fj();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var c=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),M=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=T&&r[T]||r["@@iterator"],typeof r=="function"?r:null)}var q=Symbol.for("react.client.reference");function F(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===q?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case h:return"Fragment";case f:return"Portal";case x:return"Profiler";case p:return"StrictMode";case N:return"Suspense";case _:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case w:return(r.displayName||"Context")+".Provider";case b:return(r._context.displayName||"Context")+".Consumer";case j:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case R:return i=r.displayName||null,i!==null?i:F(r.type)||"Memo";case E:i=r._payload,r=r._init;try{return F(r(i))}catch{}}return null}var U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=Object.assign,ce,re;function O(r){if(ce===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);ce=i&&i[1]||"",re=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+r+re}var ie=!1;function ue(r,i){if(!r||ie)return"";ie=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(he){var oe=he}Reflect.construct(r,[],je)}else{try{je.call()}catch(he){oe=he}r.call(je.prototype)}}else{try{throw Error()}catch(he){oe=he}(je=r())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(he){if(he&&oe&&typeof he.stack=="string")return[he.stack,oe.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),S=y[0],A=y[1];if(S&&A){var B=S.split(`
`),Z=A.split(`
`);for(g=d=0;d<B.length&&!B[d].includes("DetermineComponentFrameRoot");)d++;for(;g<Z.length&&!Z[g].includes("DetermineComponentFrameRoot");)g++;if(d===B.length||g===Z.length)for(d=B.length-1,g=Z.length-1;1<=d&&0<=g&&B[d]!==Z[g];)g--;for(;1<=d&&0<=g;d--,g--)if(B[d]!==Z[g]){if(d!==1||g!==1)do if(d--,g--,0>g||B[d]!==Z[g]){var me=`
`+B[d].replace(" at new "," at ");return r.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",r.displayName)),me}while(1<=d&&0<=g);break}}}finally{ie=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?O(o):""}function P(r){switch(r.tag){case 26:case 27:case 5:return O(r.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 15:return r=ue(r.type,!1),r;case 11:return r=ue(r.type.render,!1),r;case 1:return r=ue(r.type,!0),r;default:return""}}function X(r){try{var i="";do i+=P(r),r=r.return;while(r);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function V(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function te(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function k(r){if(V(r)!==r)throw Error(a(188))}function L(r){var i=r.alternate;if(!i){if(i=V(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,d=i;;){var g=o.return;if(g===null)break;var y=g.alternate;if(y===null){if(d=g.return,d!==null){o=d;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===o)return k(g),r;if(y===d)return k(g),i;y=y.sibling}throw Error(a(188))}if(o.return!==d.return)o=g,d=y;else{for(var S=!1,A=g.child;A;){if(A===o){S=!0,o=g,d=y;break}if(A===d){S=!0,d=g,o=y;break}A=A.sibling}if(!S){for(A=y.child;A;){if(A===o){S=!0,o=y,d=g;break}if(A===d){S=!0,d=y,o=g;break}A=A.sibling}if(!S)throw Error(a(189))}}if(o.alternate!==d)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function Y(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=Y(r),i!==null)return i;r=r.sibling}return null}var H=Array.isArray,D=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},$=[],K=-1;function ae(r){return{current:r}}function ge(r){0>K||(r.current=$[K],$[K]=null,K--)}function de(r,i){K++,$[K]=r.current,r.current=i}var Se=ae(null),Ae=ae(null),it=ae(null),rt=ae(null);function xe(r,i){switch(de(it,i),de(Ae,r),de(Se,null),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?Hb(i):0;break;default:if(r=r===8?i.parentNode:i,i=r.tagName,r=r.namespaceURI)r=Hb(r),i=qb(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ge(Se),de(Se,i)}function pe(){ge(Se),ge(Ae),ge(it)}function Pe(r){r.memoizedState!==null&&de(rt,r);var i=Se.current,o=qb(i,r.type);i!==o&&(de(Ae,r),de(Se,o))}function be(r){Ae.current===r&&(ge(Se),ge(Ae)),rt.current===r&&(ge(rt),Ko._currentValue=I)}var Ne=Object.prototype.hasOwnProperty,Oe=e.unstable_scheduleCallback,Xe=e.unstable_cancelCallback,Fe=e.unstable_shouldYield,wt=e.unstable_requestPaint,St=e.unstable_now,Vt=e.unstable_getCurrentPriorityLevel,Be=e.unstable_ImmediatePriority,nt=e.unstable_UserBlockingPriority,en=e.unstable_NormalPriority,On=e.unstable_LowPriority,Tn=e.unstable_IdlePriority,pn=e.log,cn=e.unstable_setDisableYieldValue,tn=null,Yt=null;function sr(r){if(Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(tn,r,void 0,(r.current.flags&128)===128)}catch{}}function Mn(r){if(typeof pn=="function"&&cn(r),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(tn,r)}catch{}}var gn=Math.clz32?Math.clz32:Os,wr=Math.log,jn=Math.LN2;function Os(r){return r>>>=0,r===0?32:31-(wr(r)/jn|0)|0}var Or=128,Xt=4194304;function lt(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function J(r,i){var o=r.pendingLanes;if(o===0)return 0;var d=0,g=r.suspendedLanes,y=r.pingedLanes,S=r.warmLanes;r=r.finishedLanes!==0;var A=o&134217727;return A!==0?(o=A&~g,o!==0?d=lt(o):(y&=A,y!==0?d=lt(y):r||(S=A&~S,S!==0&&(d=lt(S))))):(A=o&~g,A!==0?d=lt(A):y!==0?d=lt(y):r||(S=o&~S,S!==0&&(d=lt(S)))),d===0?0:i!==0&&i!==d&&(i&g)===0&&(g=d&-d,S=i&-i,g>=S||g===32&&(S&4194176)!==0)?i:d}function ve(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function _e(r,i){switch(r){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ke(){var r=Or;return Or<<=1,(Or&4194176)===0&&(Or=128),r}function He(){var r=Xt;return Xt<<=1,(Xt&62914560)===0&&(Xt=4194304),r}function ot(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Ge(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function mt(r,i,o,d,g,y){var S=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var A=r.entanglements,B=r.expirationTimes,Z=r.hiddenUpdates;for(o=S&~o;0<o;){var me=31-gn(o),je=1<<me;A[me]=0,B[me]=-1;var oe=Z[me];if(oe!==null)for(Z[me]=null,me=0;me<oe.length;me++){var he=oe[me];he!==null&&(he.lane&=-536870913)}o&=~je}d!==0&&ct(r,d,0),y!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=y&~(S&~i))}function ct(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var d=31-gn(i);r.entangledLanes|=i,r.entanglements[d]=r.entanglements[d]|1073741824|o&4194218}function xt(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var d=31-gn(o),g=1<<d;g&i|r[d]&i&&(r[d]|=i),o&=~g}}function Ot(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ut(){var r=D.p;return r!==0?r:(r=window.event,r===void 0?32:l0(r.type))}function Zt(r,i){var o=D.p;try{return D.p=r,i()}finally{D.p=o}}var Nn=Math.random().toString(36).slice(2),un="__reactFiber$"+Nn,_n="__reactProps$"+Nn,fe="__reactContainer$"+Nn,Ee="__reactEvents$"+Nn,Le="__reactListeners$"+Nn,Rt="__reactHandles$"+Nn,dn="__reactResources$"+Nn,Fn="__reactMarker$"+Nn;function fr(r){delete r[un],delete r[_n],delete r[Ee],delete r[Le],delete r[Rt]}function Pn(r){var i=r[un];if(i)return i;for(var o=r.parentNode;o;){if(i=o[fe]||o[un]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=Yb(r);r!==null;){if(o=r[un])return o;r=Yb(r)}return i}r=o,o=r.parentNode}return null}function Pt(r){if(r=r[un]||r[fe]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function pa(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function Ps(r){var i=r[dn];return i||(i=r[dn]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Sn(r){r[Fn]=!0}var Bx=new Set,Hx={};function ri(r,i){$i(r,i),$i(r+"Capture",i)}function $i(r,i){for(Hx[r]=i,r=0;r<i.length;r++)Bx.add(i[r])}var Ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),CE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qx={},Fx={};function RE(r){return Ne.call(Fx,r)?!0:Ne.call(qx,r)?!1:CE.test(r)?Fx[r]=!0:(qx[r]=!0,!1)}function nu(r,i,o){if(RE(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function ru(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function Is(r,i,o,d){if(d===null)r.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+d)}}function Pr(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Vx(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function TE(r){var i=Vx(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),d=""+r[i];if(!r.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,y=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return g.call(this)},set:function(S){d=""+S,y.call(this,S)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function su(r){r._valueTracker||(r._valueTracker=TE(r))}function Yx(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),d="";return r&&(d=Vx(r)?r.checked?"true":"false":r.value),r=d,r!==o?(i.setValue(r),!0):!1}function au(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ME=/[\n"\\]/g;function Lr(r){return r.replace(ME,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function $f(r,i,o,d,g,y,S,A){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),i!=null?S==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Pr(i)):r.value!==""+Pr(i)&&(r.value=""+Pr(i)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),i!=null?Bf(r,S,Pr(i)):o!=null?Bf(r,S,Pr(o)):d!=null&&r.removeAttribute("value"),g==null&&y!=null&&(r.defaultChecked=!!y),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+Pr(A):r.removeAttribute("name")}function Gx(r,i,o,d,g,y,S,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null))return;o=o!=null?""+Pr(o):"",i=i!=null?""+Pr(i):o,A||i===r.value||(r.value=i),r.defaultValue=i}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=A?r.checked:!!d,r.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S)}function Bf(r,i,o){i==="number"&&au(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Bi(r,i,o,d){if(r=r.options,i){i={};for(var g=0;g<o.length;g++)i["$"+o[g]]=!0;for(o=0;o<r.length;o++)g=i.hasOwnProperty("$"+r[o].value),r[o].selected!==g&&(r[o].selected=g),g&&d&&(r[o].defaultSelected=!0)}else{for(o=""+Pr(o),i=null,g=0;g<r.length;g++){if(r[g].value===o){r[g].selected=!0,d&&(r[g].defaultSelected=!0);return}i!==null||r[g].disabled||(i=r[g])}i!==null&&(i.selected=!0)}}function Wx(r,i,o){if(i!=null&&(i=""+Pr(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+Pr(o):""}function Xx(r,i,o,d){if(i==null){if(d!=null){if(o!=null)throw Error(a(92));if(H(d)){if(1<d.length)throw Error(a(93));d=d[0]}o=d}o==null&&(o=""),i=o}o=Pr(i),r.defaultValue=o,d=r.textContent,d===o&&d!==""&&d!==null&&(r.value=d)}function Hi(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var AE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kx(r,i,o){var d=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?d?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":d?r.setProperty(i,o):typeof o!="number"||o===0||AE.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function Qx(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var d in o)!o.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var g in i)d=i[g],i.hasOwnProperty(g)&&o[g]!==d&&Kx(r,g,d)}else for(var y in i)i.hasOwnProperty(y)&&Kx(r,y,i[y])}function Hf(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),DE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function iu(r){return DE.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var qf=null;function Ff(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var qi=null,Fi=null;function Zx(r){var i=Pt(r);if(i&&(r=i.stateNode)){var o=r[_n]||null;e:switch(r=i.stateNode,i.type){case"input":if($f(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Lr(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var d=o[i];if(d!==r&&d.form===r.form){var g=d[_n]||null;if(!g)throw Error(a(90));$f(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<o.length;i++)d=o[i],d.form===r.form&&Yx(d)}break e;case"textarea":Wx(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Bi(r,!!o.multiple,i,!1)}}}var Vf=!1;function Jx(r,i,o){if(Vf)return r(i,o);Vf=!0;try{var d=r(i);return d}finally{if(Vf=!1,(qi!==null||Fi!==null)&&(qu(),qi&&(i=qi,r=Fi,Fi=qi=null,Zx(i),r)))for(i=0;i<r.length;i++)Zx(r[i])}}function co(r,i){var o=r.stateNode;if(o===null)return null;var d=o[_n]||null;if(d===null)return null;o=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var Yf=!1;if(Ls)try{var uo={};Object.defineProperty(uo,"passive",{get:function(){Yf=!0}}),window.addEventListener("test",uo,uo),window.removeEventListener("test",uo,uo)}catch{Yf=!1}var ga=null,Gf=null,lu=null;function ev(){if(lu)return lu;var r,i=Gf,o=i.length,d,g="value"in ga?ga.value:ga.textContent,y=g.length;for(r=0;r<o&&i[r]===g[r];r++);var S=o-r;for(d=1;d<=S&&i[o-d]===g[y-d];d++);return lu=g.slice(r,1<d?1-d:void 0)}function ou(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function cu(){return!0}function tv(){return!1}function hr(r){function i(o,d,g,y,S){this._reactName=o,this._targetInst=g,this.type=d,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(o=r[A],this[A]=o?o(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?cu:tv,this.isPropagationStopped=tv,this}return G(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=cu)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=cu)},persist:function(){},isPersistent:cu}),i}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uu=hr(si),fo=G({},si,{view:0,detail:0}),OE=hr(fo),Wf,Xf,ho,du=G({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qf,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ho&&(ho&&r.type==="mousemove"?(Wf=r.screenX-ho.screenX,Xf=r.screenY-ho.screenY):Xf=Wf=0,ho=r),Wf)},movementY:function(r){return"movementY"in r?r.movementY:Xf}}),nv=hr(du),PE=G({},du,{dataTransfer:0}),LE=hr(PE),IE=G({},fo,{relatedTarget:0}),Kf=hr(IE),zE=G({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),UE=hr(zE),$E=G({},si,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),BE=hr($E),HE=G({},si,{data:0}),rv=hr(HE),qE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YE(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=VE[r])?!!i[r]:!1}function Qf(){return YE}var GE=G({},fo,{key:function(r){if(r.key){var i=qE[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=ou(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?FE[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qf,charCode:function(r){return r.type==="keypress"?ou(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ou(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),WE=hr(GE),XE=G({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sv=hr(XE),KE=G({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qf}),QE=hr(KE),ZE=G({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),JE=hr(ZE),e2=G({},du,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),t2=hr(e2),n2=G({},si,{newState:0,oldState:0}),r2=hr(n2),s2=[9,13,27,32],Zf=Ls&&"CompositionEvent"in window,mo=null;Ls&&"documentMode"in document&&(mo=document.documentMode);var a2=Ls&&"TextEvent"in window&&!mo,av=Ls&&(!Zf||mo&&8<mo&&11>=mo),iv=" ",lv=!1;function ov(r,i){switch(r){case"keyup":return s2.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cv(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Vi=!1;function i2(r,i){switch(r){case"compositionend":return cv(i);case"keypress":return i.which!==32?null:(lv=!0,iv);case"textInput":return r=i.data,r===iv&&lv?null:r;default:return null}}function l2(r,i){if(Vi)return r==="compositionend"||!Zf&&ov(r,i)?(r=ev(),lu=Gf=ga=null,Vi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return av&&i.locale!=="ko"?null:i.data;default:return null}}var o2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uv(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!o2[r.type]:i==="textarea"}function dv(r,i,o,d){qi?Fi?Fi.push(d):Fi=[d]:qi=d,i=Wu(i,"onChange"),0<i.length&&(o=new uu("onChange","change",null,o,d),r.push({event:o,listeners:i}))}var po=null,go=null;function c2(r){Ib(r,0)}function fu(r){var i=pa(r);if(Yx(i))return r}function fv(r,i){if(r==="change")return i}var hv=!1;if(Ls){var Jf;if(Ls){var eh="oninput"in document;if(!eh){var mv=document.createElement("div");mv.setAttribute("oninput","return;"),eh=typeof mv.oninput=="function"}Jf=eh}else Jf=!1;hv=Jf&&(!document.documentMode||9<document.documentMode)}function pv(){po&&(po.detachEvent("onpropertychange",gv),go=po=null)}function gv(r){if(r.propertyName==="value"&&fu(go)){var i=[];dv(i,go,r,Ff(r)),Jx(c2,i)}}function u2(r,i,o){r==="focusin"?(pv(),po=i,go=o,po.attachEvent("onpropertychange",gv)):r==="focusout"&&pv()}function d2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return fu(go)}function f2(r,i){if(r==="click")return fu(i)}function h2(r,i){if(r==="input"||r==="change")return fu(i)}function m2(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var jr=typeof Object.is=="function"?Object.is:m2;function xo(r,i){if(jr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),d=Object.keys(i);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var g=o[d];if(!Ne.call(i,g)||!jr(r[g],i[g]))return!1}return!0}function xv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function vv(r,i){var o=xv(r);r=0;for(var d;o;){if(o.nodeType===3){if(d=r+o.textContent.length,r<=i&&d>=i)return{node:o,offset:i-r};r=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=xv(o)}}function yv(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?yv(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function bv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=au(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=au(r.document)}return i}function th(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function p2(r,i){var o=bv(i);i=r.focusedElem;var d=r.selectionRange;if(o!==i&&i&&i.ownerDocument&&yv(i.ownerDocument.documentElement,i)){if(d!==null&&th(i)){if(r=d.start,o=d.end,o===void 0&&(o=r),"selectionStart"in i)i.selectionStart=r,i.selectionEnd=Math.min(o,i.value.length);else if(o=(r=i.ownerDocument||document)&&r.defaultView||window,o.getSelection){o=o.getSelection();var g=i.textContent.length,y=Math.min(d.start,g);d=d.end===void 0?y:Math.min(d.end,g),!o.extend&&y>d&&(g=d,d=y,y=g),g=vv(i,y);var S=vv(i,d);g&&S&&(o.rangeCount!==1||o.anchorNode!==g.node||o.anchorOffset!==g.offset||o.focusNode!==S.node||o.focusOffset!==S.offset)&&(r=r.createRange(),r.setStart(g.node,g.offset),o.removeAllRanges(),y>d?(o.addRange(r),o.extend(S.node,S.offset)):(r.setEnd(S.node,S.offset),o.addRange(r)))}}for(r=[],o=i;o=o.parentNode;)o.nodeType===1&&r.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<r.length;i++)o=r[i],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var g2=Ls&&"documentMode"in document&&11>=document.documentMode,Yi=null,nh=null,vo=null,rh=!1;function wv(r,i,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;rh||Yi==null||Yi!==au(d)||(d=Yi,"selectionStart"in d&&th(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),vo&&xo(vo,d)||(vo=d,d=Wu(nh,"onSelect"),0<d.length&&(i=new uu("onSelect","select",null,i,o),r.push({event:i,listeners:d}),i.target=Yi)))}function ai(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Gi={animationend:ai("Animation","AnimationEnd"),animationiteration:ai("Animation","AnimationIteration"),animationstart:ai("Animation","AnimationStart"),transitionrun:ai("Transition","TransitionRun"),transitionstart:ai("Transition","TransitionStart"),transitioncancel:ai("Transition","TransitionCancel"),transitionend:ai("Transition","TransitionEnd")},sh={},jv={};Ls&&(jv=document.createElement("div").style,"AnimationEvent"in window||(delete Gi.animationend.animation,delete Gi.animationiteration.animation,delete Gi.animationstart.animation),"TransitionEvent"in window||delete Gi.transitionend.transition);function ii(r){if(sh[r])return sh[r];if(!Gi[r])return r;var i=Gi[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in jv)return sh[r]=i[o];return r}var Nv=ii("animationend"),_v=ii("animationiteration"),Sv=ii("animationstart"),x2=ii("transitionrun"),v2=ii("transitionstart"),y2=ii("transitioncancel"),Ev=ii("transitionend"),Cv=new Map,Rv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function es(r,i){Cv.set(r,i),ri(i,[r])}var Ir=[],Wi=0,ah=0;function hu(){for(var r=Wi,i=ah=Wi=0;i<r;){var o=Ir[i];Ir[i++]=null;var d=Ir[i];Ir[i++]=null;var g=Ir[i];Ir[i++]=null;var y=Ir[i];if(Ir[i++]=null,d!==null&&g!==null){var S=d.pending;S===null?g.next=g:(g.next=S.next,S.next=g),d.pending=g}y!==0&&Tv(o,g,y)}}function mu(r,i,o,d){Ir[Wi++]=r,Ir[Wi++]=i,Ir[Wi++]=o,Ir[Wi++]=d,ah|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function ih(r,i,o,d){return mu(r,i,o,d),pu(r)}function xa(r,i){return mu(r,null,null,i),pu(r)}function Tv(r,i,o){r.lanes|=o;var d=r.alternate;d!==null&&(d.lanes|=o);for(var g=!1,y=r.return;y!==null;)y.childLanes|=o,d=y.alternate,d!==null&&(d.childLanes|=o),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(g=!0)),r=y,y=y.return;g&&i!==null&&r.tag===3&&(y=r.stateNode,g=31-gn(o),y=y.hiddenUpdates,r=y[g],r===null?y[g]=[i]:r.push(i),i.lane=o|536870912)}function pu(r){if(50<qo)throw qo=0,fm=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Xi={},Mv=new WeakMap;function zr(r,i){if(typeof r=="object"&&r!==null){var o=Mv.get(r);return o!==void 0?o:(i={value:r,source:i,stack:X(i)},Mv.set(r,i),i)}return{value:r,source:i,stack:X(i)}}var Ki=[],Qi=0,gu=null,xu=0,Ur=[],$r=0,li=null,zs=1,Us="";function oi(r,i){Ki[Qi++]=xu,Ki[Qi++]=gu,gu=r,xu=i}function Av(r,i,o){Ur[$r++]=zs,Ur[$r++]=Us,Ur[$r++]=li,li=r;var d=zs;r=Us;var g=32-gn(d)-1;d&=~(1<<g),o+=1;var y=32-gn(i)+g;if(30<y){var S=g-g%5;y=(d&(1<<S)-1).toString(32),d>>=S,g-=S,zs=1<<32-gn(i)+g|o<<g|d,Us=y+r}else zs=1<<y|o<<g|d,Us=r}function lh(r){r.return!==null&&(oi(r,1),Av(r,1,0))}function oh(r){for(;r===gu;)gu=Ki[--Qi],Ki[Qi]=null,xu=Ki[--Qi],Ki[Qi]=null;for(;r===li;)li=Ur[--$r],Ur[$r]=null,Us=Ur[--$r],Ur[$r]=null,zs=Ur[--$r],Ur[$r]=null}var ar=null,Vn=null,$t=!1,ts=null,ps=!1,ch=Error(a(519));function ci(r){var i=Error(a(418,""));throw wo(zr(i,r)),ch}function kv(r){var i=r.stateNode,o=r.type,d=r.memoizedProps;switch(i[un]=r,i[_n]=d,o){case"dialog":Et("cancel",i),Et("close",i);break;case"iframe":case"object":case"embed":Et("load",i);break;case"video":case"audio":for(o=0;o<Vo.length;o++)Et(Vo[o],i);break;case"source":Et("error",i);break;case"img":case"image":case"link":Et("error",i),Et("load",i);break;case"details":Et("toggle",i);break;case"input":Et("invalid",i),Gx(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),su(i);break;case"select":Et("invalid",i);break;case"textarea":Et("invalid",i),Xx(i,d.value,d.defaultValue,d.children),su(i)}o=d.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||d.suppressHydrationWarning===!0||Bb(i.textContent,o)?(d.popover!=null&&(Et("beforetoggle",i),Et("toggle",i)),d.onScroll!=null&&Et("scroll",i),d.onScrollEnd!=null&&Et("scrollend",i),d.onClick!=null&&(i.onclick=Xu),i=!0):i=!1,i||ci(r)}function Dv(r){for(ar=r.return;ar;)switch(ar.tag){case 3:case 27:ps=!0;return;case 5:case 13:ps=!1;return;default:ar=ar.return}}function yo(r){if(r!==ar)return!1;if(!$t)return Dv(r),$t=!0,!1;var i=!1,o;if((o=r.tag!==3&&r.tag!==27)&&((o=r.tag===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Tm(r.type,r.memoizedProps)),o=!o),o&&(i=!0),i&&Vn&&ci(r),Dv(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(i===0){Vn=rs(r.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;r=r.nextSibling}Vn=null}}else Vn=ar?rs(r.stateNode.nextSibling):null;return!0}function bo(){Vn=ar=null,$t=!1}function wo(r){ts===null?ts=[r]:ts.push(r)}var jo=Error(a(460)),Ov=Error(a(474)),uh={then:function(){}};function Pv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function vu(){}function Lv(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(vu,vu),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,r===jo?Error(a(483)):r;default:if(typeof i.status=="string")i.then(vu,vu);else{if(r=nn,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(d){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=d}},function(d){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,r===jo?Error(a(483)):r}throw No=i,jo}}var No=null;function Iv(){if(No===null)throw Error(a(459));var r=No;return No=null,r}var Zi=null,_o=0;function yu(r){var i=_o;return _o+=1,Zi===null&&(Zi=[]),Lv(Zi,r,i)}function So(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function bu(r,i){throw i.$$typeof===c?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function zv(r){var i=r._init;return i(r._payload)}function Uv(r){function i(se,Q){if(r){var le=se.deletions;le===null?(se.deletions=[Q],se.flags|=16):le.push(Q)}}function o(se,Q){if(!r)return null;for(;Q!==null;)i(se,Q),Q=Q.sibling;return null}function d(se){for(var Q=new Map;se!==null;)se.key!==null?Q.set(se.key,se):Q.set(se.index,se),se=se.sibling;return Q}function g(se,Q){return se=Ta(se,Q),se.index=0,se.sibling=null,se}function y(se,Q,le){return se.index=le,r?(le=se.alternate,le!==null?(le=le.index,le<Q?(se.flags|=33554434,Q):le):(se.flags|=33554434,Q)):(se.flags|=1048576,Q)}function S(se){return r&&se.alternate===null&&(se.flags|=33554434),se}function A(se,Q,le,ye){return Q===null||Q.tag!==6?(Q=sm(le,se.mode,ye),Q.return=se,Q):(Q=g(Q,le),Q.return=se,Q)}function B(se,Q,le,ye){var ze=le.type;return ze===h?me(se,Q,le.props.children,ye,le.key):Q!==null&&(Q.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===E&&zv(ze)===Q.type)?(Q=g(Q,le.props),So(Q,le),Q.return=se,Q):(Q=zu(le.type,le.key,le.props,null,se.mode,ye),So(Q,le),Q.return=se,Q)}function Z(se,Q,le,ye){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==le.containerInfo||Q.stateNode.implementation!==le.implementation?(Q=am(le,se.mode,ye),Q.return=se,Q):(Q=g(Q,le.children||[]),Q.return=se,Q)}function me(se,Q,le,ye,ze){return Q===null||Q.tag!==7?(Q=yi(le,se.mode,ye,ze),Q.return=se,Q):(Q=g(Q,le),Q.return=se,Q)}function je(se,Q,le){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=sm(""+Q,se.mode,le),Q.return=se,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case u:return le=zu(Q.type,Q.key,Q.props,null,se.mode,le),So(le,Q),le.return=se,le;case f:return Q=am(Q,se.mode,le),Q.return=se,Q;case E:var ye=Q._init;return Q=ye(Q._payload),je(se,Q,le)}if(H(Q)||z(Q))return Q=yi(Q,se.mode,le,null),Q.return=se,Q;if(typeof Q.then=="function")return je(se,yu(Q),le);if(Q.$$typeof===w)return je(se,Pu(se,Q),le);bu(se,Q)}return null}function oe(se,Q,le,ye){var ze=Q!==null?Q.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return ze!==null?null:A(se,Q,""+le,ye);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case u:return le.key===ze?B(se,Q,le,ye):null;case f:return le.key===ze?Z(se,Q,le,ye):null;case E:return ze=le._init,le=ze(le._payload),oe(se,Q,le,ye)}if(H(le)||z(le))return ze!==null?null:me(se,Q,le,ye,null);if(typeof le.then=="function")return oe(se,Q,yu(le),ye);if(le.$$typeof===w)return oe(se,Q,Pu(se,le),ye);bu(se,le)}return null}function he(se,Q,le,ye,ze){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return se=se.get(le)||null,A(Q,se,""+ye,ze);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case u:return se=se.get(ye.key===null?le:ye.key)||null,B(Q,se,ye,ze);case f:return se=se.get(ye.key===null?le:ye.key)||null,Z(Q,se,ye,ze);case E:var vt=ye._init;return ye=vt(ye._payload),he(se,Q,le,ye,ze)}if(H(ye)||z(ye))return se=se.get(le)||null,me(Q,se,ye,ze,null);if(typeof ye.then=="function")return he(se,Q,le,yu(ye),ze);if(ye.$$typeof===w)return he(se,Q,le,Pu(Q,ye),ze);bu(Q,ye)}return null}function qe(se,Q,le,ye){for(var ze=null,vt=null,Ve=Q,Ke=Q=0,zn=null;Ve!==null&&Ke<le.length;Ke++){Ve.index>Ke?(zn=Ve,Ve=null):zn=Ve.sibling;var Bt=oe(se,Ve,le[Ke],ye);if(Bt===null){Ve===null&&(Ve=zn);break}r&&Ve&&Bt.alternate===null&&i(se,Ve),Q=y(Bt,Q,Ke),vt===null?ze=Bt:vt.sibling=Bt,vt=Bt,Ve=zn}if(Ke===le.length)return o(se,Ve),$t&&oi(se,Ke),ze;if(Ve===null){for(;Ke<le.length;Ke++)Ve=je(se,le[Ke],ye),Ve!==null&&(Q=y(Ve,Q,Ke),vt===null?ze=Ve:vt.sibling=Ve,vt=Ve);return $t&&oi(se,Ke),ze}for(Ve=d(Ve);Ke<le.length;Ke++)zn=he(Ve,se,Ke,le[Ke],ye),zn!==null&&(r&&zn.alternate!==null&&Ve.delete(zn.key===null?Ke:zn.key),Q=y(zn,Q,Ke),vt===null?ze=zn:vt.sibling=zn,vt=zn);return r&&Ve.forEach(function(La){return i(se,La)}),$t&&oi(se,Ke),ze}function st(se,Q,le,ye){if(le==null)throw Error(a(151));for(var ze=null,vt=null,Ve=Q,Ke=Q=0,zn=null,Bt=le.next();Ve!==null&&!Bt.done;Ke++,Bt=le.next()){Ve.index>Ke?(zn=Ve,Ve=null):zn=Ve.sibling;var La=oe(se,Ve,Bt.value,ye);if(La===null){Ve===null&&(Ve=zn);break}r&&Ve&&La.alternate===null&&i(se,Ve),Q=y(La,Q,Ke),vt===null?ze=La:vt.sibling=La,vt=La,Ve=zn}if(Bt.done)return o(se,Ve),$t&&oi(se,Ke),ze;if(Ve===null){for(;!Bt.done;Ke++,Bt=le.next())Bt=je(se,Bt.value,ye),Bt!==null&&(Q=y(Bt,Q,Ke),vt===null?ze=Bt:vt.sibling=Bt,vt=Bt);return $t&&oi(se,Ke),ze}for(Ve=d(Ve);!Bt.done;Ke++,Bt=le.next())Bt=he(Ve,se,Ke,Bt.value,ye),Bt!==null&&(r&&Bt.alternate!==null&&Ve.delete(Bt.key===null?Ke:Bt.key),Q=y(Bt,Q,Ke),vt===null?ze=Bt:vt.sibling=Bt,vt=Bt);return r&&Ve.forEach(function(DC){return i(se,DC)}),$t&&oi(se,Ke),ze}function yn(se,Q,le,ye){if(typeof le=="object"&&le!==null&&le.type===h&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case u:e:{for(var ze=le.key;Q!==null;){if(Q.key===ze){if(ze=le.type,ze===h){if(Q.tag===7){o(se,Q.sibling),ye=g(Q,le.props.children),ye.return=se,se=ye;break e}}else if(Q.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===E&&zv(ze)===Q.type){o(se,Q.sibling),ye=g(Q,le.props),So(ye,le),ye.return=se,se=ye;break e}o(se,Q);break}else i(se,Q);Q=Q.sibling}le.type===h?(ye=yi(le.props.children,se.mode,ye,le.key),ye.return=se,se=ye):(ye=zu(le.type,le.key,le.props,null,se.mode,ye),So(ye,le),ye.return=se,se=ye)}return S(se);case f:e:{for(ze=le.key;Q!==null;){if(Q.key===ze)if(Q.tag===4&&Q.stateNode.containerInfo===le.containerInfo&&Q.stateNode.implementation===le.implementation){o(se,Q.sibling),ye=g(Q,le.children||[]),ye.return=se,se=ye;break e}else{o(se,Q);break}else i(se,Q);Q=Q.sibling}ye=am(le,se.mode,ye),ye.return=se,se=ye}return S(se);case E:return ze=le._init,le=ze(le._payload),yn(se,Q,le,ye)}if(H(le))return qe(se,Q,le,ye);if(z(le)){if(ze=z(le),typeof ze!="function")throw Error(a(150));return le=ze.call(le),st(se,Q,le,ye)}if(typeof le.then=="function")return yn(se,Q,yu(le),ye);if(le.$$typeof===w)return yn(se,Q,Pu(se,le),ye);bu(se,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,Q!==null&&Q.tag===6?(o(se,Q.sibling),ye=g(Q,le),ye.return=se,se=ye):(o(se,Q),ye=sm(le,se.mode,ye),ye.return=se,se=ye),S(se)):o(se,Q)}return function(se,Q,le,ye){try{_o=0;var ze=yn(se,Q,le,ye);return Zi=null,ze}catch(Ve){if(Ve===jo)throw Ve;var vt=Fr(29,Ve,null,se.mode);return vt.lanes=ye,vt.return=se,vt}finally{}}}var ui=Uv(!0),$v=Uv(!1),Ji=ae(null),wu=ae(0);function Bv(r,i){r=Ks,de(wu,r),de(Ji,i),Ks=r|i.baseLanes}function dh(){de(wu,Ks),de(Ji,Ji.current)}function fh(){Ks=wu.current,ge(Ji),ge(wu)}var Br=ae(null),gs=null;function va(r){var i=r.alternate;de(An,An.current&1),de(Br,r),gs===null&&(i===null||Ji.current!==null||i.memoizedState!==null)&&(gs=r)}function Hv(r){if(r.tag===22){if(de(An,An.current),de(Br,r),gs===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(gs=r)}}else ya()}function ya(){de(An,An.current),de(Br,Br.current)}function $s(r){ge(Br),gs===r&&(gs=null),ge(An)}var An=ae(0);function ju(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var b2=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,d){r.push(d)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},w2=e.unstable_scheduleCallback,j2=e.unstable_NormalPriority,kn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hh(){return{controller:new b2,data:new Map,refCount:0}}function Eo(r){r.refCount--,r.refCount===0&&w2(j2,function(){r.controller.abort()})}var Co=null,mh=0,el=0,tl=null;function N2(r,i){if(Co===null){var o=Co=[];mh=0,el=bm(),tl={status:"pending",value:void 0,then:function(d){o.push(d)}}}return mh++,i.then(qv,qv),i}function qv(){if(--mh===0&&Co!==null){tl!==null&&(tl.status="fulfilled");var r=Co;Co=null,el=0,tl=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function _2(r,i){var o=[],d={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return r.then(function(){d.status="fulfilled",d.value=i;for(var g=0;g<o.length;g++)(0,o[g])(i)},function(g){for(d.status="rejected",d.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),d}var Fv=U.S;U.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&N2(r,i),Fv!==null&&Fv(r,i)};var di=ae(null);function ph(){var r=di.current;return r!==null?r:nn.pooledCache}function Nu(r,i){i===null?de(di,di.current):de(di,i.pool)}function Vv(){var r=ph();return r===null?null:{parent:kn._currentValue,pool:r}}var ba=0,pt=null,Kt=null,En=null,_u=!1,nl=!1,fi=!1,Su=0,Ro=0,rl=null,S2=0;function wn(){throw Error(a(321))}function gh(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!jr(r[o],i[o]))return!1;return!0}function xh(r,i,o,d,g,y){return ba=y,pt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,U.H=r===null||r.memoizedState===null?hi:wa,fi=!1,y=o(d,g),fi=!1,nl&&(y=Gv(i,o,d,g)),Yv(r),y}function Yv(r){U.H=xs;var i=Kt!==null&&Kt.next!==null;if(ba=0,En=Kt=pt=null,_u=!1,Ro=0,rl=null,i)throw Error(a(300));r===null||Ln||(r=r.dependencies,r!==null&&Ou(r)&&(Ln=!0))}function Gv(r,i,o,d){pt=r;var g=0;do{if(nl&&(rl=null),Ro=0,nl=!1,25<=g)throw Error(a(301));if(g+=1,En=Kt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}U.H=mi,y=i(o,d)}while(nl);return y}function E2(){var r=U.H,i=r.useState()[0];return i=typeof i.then=="function"?To(i):i,r=r.useState()[0],(Kt!==null?Kt.memoizedState:null)!==r&&(pt.flags|=1024),i}function vh(){var r=Su!==0;return Su=0,r}function yh(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function bh(r){if(_u){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}_u=!1}ba=0,En=Kt=pt=null,nl=!1,Ro=Su=0,rl=null}function mr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?pt.memoizedState=En=r:En=En.next=r,En}function Cn(){if(Kt===null){var r=pt.alternate;r=r!==null?r.memoizedState:null}else r=Kt.next;var i=En===null?pt.memoizedState:En.next;if(i!==null)En=i,Kt=r;else{if(r===null)throw pt.alternate===null?Error(a(467)):Error(a(310));Kt=r,r={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},En===null?pt.memoizedState=En=r:En=En.next=r}return En}var Eu;Eu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function To(r){var i=Ro;return Ro+=1,rl===null&&(rl=[]),r=Lv(rl,r,i),i=pt,(En===null?i.memoizedState:En.next)===null&&(i=i.alternate,U.H=i===null||i.memoizedState===null?hi:wa),r}function Cu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return To(r);if(r.$$typeof===w)return tr(r)}throw Error(a(438,String(r)))}function wh(r){var i=null,o=pt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var d=pt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Eu(),pt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),d=0;d<r;d++)o[d]=M;return i.index++,o}function Bs(r,i){return typeof i=="function"?i(r):i}function Ru(r){var i=Cn();return jh(i,Kt,r)}function jh(r,i,o){var d=r.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=o;var g=r.baseQueue,y=d.pending;if(y!==null){if(g!==null){var S=g.next;g.next=y.next,y.next=S}i.baseQueue=g=y,d.pending=null}if(y=r.baseState,g===null)r.memoizedState=y;else{i=g.next;var A=S=null,B=null,Z=i,me=!1;do{var je=Z.lane&-536870913;if(je!==Z.lane?(Tt&je)===je:(ba&je)===je){var oe=Z.revertLane;if(oe===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),je===el&&(me=!0);else if((ba&oe)===oe){Z=Z.next,oe===el&&(me=!0);continue}else je={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},B===null?(A=B=je,S=y):B=B.next=je,pt.lanes|=oe,Ma|=oe;je=Z.action,fi&&o(y,je),y=Z.hasEagerState?Z.eagerState:o(y,je)}else oe={lane:je,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},B===null?(A=B=oe,S=y):B=B.next=oe,pt.lanes|=je,Ma|=je;Z=Z.next}while(Z!==null&&Z!==i);if(B===null?S=y:B.next=A,!jr(y,r.memoizedState)&&(Ln=!0,me&&(o=tl,o!==null)))throw o;r.memoizedState=y,r.baseState=S,r.baseQueue=B,d.lastRenderedState=y}return g===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function Nh(r){var i=Cn(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var d=o.dispatch,g=o.pending,y=i.memoizedState;if(g!==null){o.pending=null;var S=g=g.next;do y=r(y,S.action),S=S.next;while(S!==g);jr(y,i.memoizedState)||(Ln=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,d]}function Wv(r,i,o){var d=pt,g=Cn(),y=$t;if(y){if(o===void 0)throw Error(a(407));o=o()}else o=i();var S=!jr((Kt||g).memoizedState,o);if(S&&(g.memoizedState=o,Ln=!0),g=g.queue,Eh(Qv.bind(null,d,g,r),[r]),g.getSnapshot!==i||S||En!==null&&En.memoizedState.tag&1){if(d.flags|=2048,sl(9,Kv.bind(null,d,g,o,i),{destroy:void 0},null),nn===null)throw Error(a(349));y||(ba&60)!==0||Xv(d,i,o)}return o}function Xv(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=pt.updateQueue,i===null?(i=Eu(),pt.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function Kv(r,i,o,d){i.value=o,i.getSnapshot=d,Zv(i)&&Jv(r)}function Qv(r,i,o){return o(function(){Zv(i)&&Jv(r)})}function Zv(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!jr(r,o)}catch{return!0}}function Jv(r){var i=xa(r,2);i!==null&&ir(i,r,2)}function _h(r){var i=mr();if(typeof r=="function"){var o=r;if(r=o(),fi){Mn(!0);try{o()}finally{Mn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:r},i}function ey(r,i,o,d){return r.baseState=o,jh(r,Kt,typeof d=="function"?d:Bs)}function C2(r,i,o,d,g){if(Au(r))throw Error(a(485));if(r=i.action,r!==null){var y={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};U.T!==null?o(!0):y.isTransition=!1,d(y),o=i.pending,o===null?(y.next=i.pending=y,ty(i,y)):(y.next=o.next,i.pending=o.next=y)}}function ty(r,i){var o=i.action,d=i.payload,g=r.state;if(i.isTransition){var y=U.T,S={};U.T=S;try{var A=o(g,d),B=U.S;B!==null&&B(S,A),ny(r,i,A)}catch(Z){Sh(r,i,Z)}finally{U.T=y}}else try{y=o(g,d),ny(r,i,y)}catch(Z){Sh(r,i,Z)}}function ny(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(d){ry(r,i,d)},function(d){return Sh(r,i,d)}):ry(r,i,o)}function ry(r,i,o){i.status="fulfilled",i.value=o,sy(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,ty(r,o)))}function Sh(r,i,o){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=o,sy(i),i=i.next;while(i!==d)}r.action=null}function sy(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function ay(r,i){return i}function iy(r,i){if($t){var o=nn.formState;if(o!==null){e:{var d=pt;if($t){if(Vn){t:{for(var g=Vn,y=ps;g.nodeType!==8;){if(!y){g=null;break t}if(g=rs(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Vn=rs(g.nextSibling),d=g.data==="F!";break e}}ci(d)}d=!1}d&&(i=o[0])}}return o=mr(),o.memoizedState=o.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ay,lastRenderedState:i},o.queue=d,o=_y.bind(null,pt,d),d.dispatch=o,d=_h(!1),y=Ah.bind(null,pt,!1,d.queue),d=mr(),g={state:i,dispatch:null,action:r,pending:null},d.queue=g,o=C2.bind(null,pt,g,y,o),g.dispatch=o,d.memoizedState=r,[i,o,!1]}function ly(r){var i=Cn();return oy(i,Kt,r)}function oy(r,i,o){i=jh(r,i,ay)[0],r=Ru(Bs)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?To(i):i;var d=Cn(),g=d.queue,y=g.dispatch;return o!==d.memoizedState&&(pt.flags|=2048,sl(9,R2.bind(null,g,o),{destroy:void 0},null)),[i,y,r]}function R2(r,i){r.action=i}function cy(r){var i=Cn(),o=Kt;if(o!==null)return oy(i,o,r);Cn(),i=i.memoizedState,o=Cn();var d=o.queue.dispatch;return o.memoizedState=r,[i,d,!1]}function sl(r,i,o,d){return r={tag:r,create:i,inst:o,deps:d,next:null},i=pt.updateQueue,i===null&&(i=Eu(),pt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(d=o.next,o.next=r,r.next=d,i.lastEffect=r),r}function uy(){return Cn().memoizedState}function Tu(r,i,o,d){var g=mr();pt.flags|=r,g.memoizedState=sl(1|i,o,{destroy:void 0},d===void 0?null:d)}function Mu(r,i,o,d){var g=Cn();d=d===void 0?null:d;var y=g.memoizedState.inst;Kt!==null&&d!==null&&gh(d,Kt.memoizedState.deps)?g.memoizedState=sl(i,o,y,d):(pt.flags|=r,g.memoizedState=sl(1|i,o,y,d))}function dy(r,i){Tu(8390656,8,r,i)}function Eh(r,i){Mu(2048,8,r,i)}function fy(r,i){return Mu(4,2,r,i)}function hy(r,i){return Mu(4,4,r,i)}function my(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function py(r,i,o){o=o!=null?o.concat([r]):null,Mu(4,4,my.bind(null,i,r),o)}function Ch(){}function gy(r,i){var o=Cn();i=i===void 0?null:i;var d=o.memoizedState;return i!==null&&gh(i,d[1])?d[0]:(o.memoizedState=[r,i],r)}function xy(r,i){var o=Cn();i=i===void 0?null:i;var d=o.memoizedState;if(i!==null&&gh(i,d[1]))return d[0];if(d=r(),fi){Mn(!0);try{r()}finally{Mn(!1)}}return o.memoizedState=[d,i],d}function Rh(r,i,o){return o===void 0||(ba&1073741824)!==0?r.memoizedState=i:(r.memoizedState=o,r=yb(),pt.lanes|=r,Ma|=r,o)}function vy(r,i,o,d){return jr(o,i)?o:Ji.current!==null?(r=Rh(r,o,d),jr(r,i)||(Ln=!0),r):(ba&42)===0?(Ln=!0,r.memoizedState=o):(r=yb(),pt.lanes|=r,Ma|=r,i)}function yy(r,i,o,d,g){var y=D.p;D.p=y!==0&&8>y?y:8;var S=U.T,A={};U.T=A,Ah(r,!1,i,o);try{var B=g(),Z=U.S;if(Z!==null&&Z(A,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var me=_2(B,d);Mo(r,i,me,Er(r))}else Mo(r,i,d,Er(r))}catch(je){Mo(r,i,{then:function(){},status:"rejected",reason:je},Er())}finally{D.p=y,U.T=S}}function T2(){}function Th(r,i,o,d){if(r.tag!==5)throw Error(a(476));var g=by(r).queue;yy(r,g,i,I,o===null?T2:function(){return wy(r),o(d)})}function by(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:I},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function wy(r){var i=by(r).next.queue;Mo(r,i,{},Er())}function Mh(){return tr(Ko)}function jy(){return Cn().memoizedState}function Ny(){return Cn().memoizedState}function M2(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Er();r=_a(o);var d=Sa(i,r,o);d!==null&&(ir(d,i,o),Do(d,i,o)),i={cache:hh()},r.payload=i;return}i=i.return}}function A2(r,i,o){var d=Er();o={lane:d,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Au(r)?Sy(i,o):(o=ih(r,i,o,d),o!==null&&(ir(o,r,d),Ey(o,i,d)))}function _y(r,i,o){var d=Er();Mo(r,i,o,d)}function Mo(r,i,o,d){var g={lane:d,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Au(r))Sy(i,g);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var S=i.lastRenderedState,A=y(S,o);if(g.hasEagerState=!0,g.eagerState=A,jr(A,S))return mu(r,i,g,0),nn===null&&hu(),!1}catch{}finally{}if(o=ih(r,i,g,d),o!==null)return ir(o,r,d),Ey(o,i,d),!0}return!1}function Ah(r,i,o,d){if(d={lane:2,revertLane:bm(),action:d,hasEagerState:!1,eagerState:null,next:null},Au(r)){if(i)throw Error(a(479))}else i=ih(r,o,d,2),i!==null&&ir(i,r,2)}function Au(r){var i=r.alternate;return r===pt||i!==null&&i===pt}function Sy(r,i){nl=_u=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function Ey(r,i,o){if((o&4194176)!==0){var d=i.lanes;d&=r.pendingLanes,o|=d,i.lanes=o,xt(r,o)}}var xs={readContext:tr,use:Cu,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useLayoutEffect:wn,useInsertionEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useSyncExternalStore:wn,useId:wn};xs.useCacheRefresh=wn,xs.useMemoCache=wn,xs.useHostTransitionStatus=wn,xs.useFormState=wn,xs.useActionState=wn,xs.useOptimistic=wn;var hi={readContext:tr,use:Cu,useCallback:function(r,i){return mr().memoizedState=[r,i===void 0?null:i],r},useContext:tr,useEffect:dy,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Tu(4194308,4,my.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Tu(4194308,4,r,i)},useInsertionEffect:function(r,i){Tu(4,2,r,i)},useMemo:function(r,i){var o=mr();i=i===void 0?null:i;var d=r();if(fi){Mn(!0);try{r()}finally{Mn(!1)}}return o.memoizedState=[d,i],d},useReducer:function(r,i,o){var d=mr();if(o!==void 0){var g=o(i);if(fi){Mn(!0);try{o(i)}finally{Mn(!1)}}}else g=i;return d.memoizedState=d.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},d.queue=r,r=r.dispatch=A2.bind(null,pt,r),[d.memoizedState,r]},useRef:function(r){var i=mr();return r={current:r},i.memoizedState=r},useState:function(r){r=_h(r);var i=r.queue,o=_y.bind(null,pt,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Ch,useDeferredValue:function(r,i){var o=mr();return Rh(o,r,i)},useTransition:function(){var r=_h(!1);return r=yy.bind(null,pt,r.queue,!0,!1),mr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var d=pt,g=mr();if($t){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),nn===null)throw Error(a(349));(Tt&60)!==0||Xv(d,i,o)}g.memoizedState=o;var y={value:o,getSnapshot:i};return g.queue=y,dy(Qv.bind(null,d,y,r),[r]),d.flags|=2048,sl(9,Kv.bind(null,d,y,o,i),{destroy:void 0},null),o},useId:function(){var r=mr(),i=nn.identifierPrefix;if($t){var o=Us,d=zs;o=(d&~(1<<32-gn(d)-1)).toString(32)+o,i=":"+i+"R"+o,o=Su++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=S2++,i=":"+i+"r"+o.toString(32)+":";return r.memoizedState=i},useCacheRefresh:function(){return mr().memoizedState=M2.bind(null,pt)}};hi.useMemoCache=wh,hi.useHostTransitionStatus=Mh,hi.useFormState=iy,hi.useActionState=iy,hi.useOptimistic=function(r){var i=mr();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Ah.bind(null,pt,!0,o),o.dispatch=i,[r,i]};var wa={readContext:tr,use:Cu,useCallback:gy,useContext:tr,useEffect:Eh,useImperativeHandle:py,useInsertionEffect:fy,useLayoutEffect:hy,useMemo:xy,useReducer:Ru,useRef:uy,useState:function(){return Ru(Bs)},useDebugValue:Ch,useDeferredValue:function(r,i){var o=Cn();return vy(o,Kt.memoizedState,r,i)},useTransition:function(){var r=Ru(Bs)[0],i=Cn().memoizedState;return[typeof r=="boolean"?r:To(r),i]},useSyncExternalStore:Wv,useId:jy};wa.useCacheRefresh=Ny,wa.useMemoCache=wh,wa.useHostTransitionStatus=Mh,wa.useFormState=ly,wa.useActionState=ly,wa.useOptimistic=function(r,i){var o=Cn();return ey(o,Kt,r,i)};var mi={readContext:tr,use:Cu,useCallback:gy,useContext:tr,useEffect:Eh,useImperativeHandle:py,useInsertionEffect:fy,useLayoutEffect:hy,useMemo:xy,useReducer:Nh,useRef:uy,useState:function(){return Nh(Bs)},useDebugValue:Ch,useDeferredValue:function(r,i){var o=Cn();return Kt===null?Rh(o,r,i):vy(o,Kt.memoizedState,r,i)},useTransition:function(){var r=Nh(Bs)[0],i=Cn().memoizedState;return[typeof r=="boolean"?r:To(r),i]},useSyncExternalStore:Wv,useId:jy};mi.useCacheRefresh=Ny,mi.useMemoCache=wh,mi.useHostTransitionStatus=Mh,mi.useFormState=cy,mi.useActionState=cy,mi.useOptimistic=function(r,i){var o=Cn();return Kt!==null?ey(o,Kt,r,i):(o.baseState=r,[r,o.queue.dispatch])};function kh(r,i,o,d){i=r.memoizedState,o=o(d,i),o=o==null?i:G({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Dh={isMounted:function(r){return(r=r._reactInternals)?V(r)===r:!1},enqueueSetState:function(r,i,o){r=r._reactInternals;var d=Er(),g=_a(d);g.payload=i,o!=null&&(g.callback=o),i=Sa(r,g,d),i!==null&&(ir(i,r,d),Do(i,r,d))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var d=Er(),g=_a(d);g.tag=1,g.payload=i,o!=null&&(g.callback=o),i=Sa(r,g,d),i!==null&&(ir(i,r,d),Do(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Er(),d=_a(o);d.tag=2,i!=null&&(d.callback=i),i=Sa(r,d,o),i!==null&&(ir(i,r,o),Do(i,r,o))}};function Cy(r,i,o,d,g,y,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,y,S):i.prototype&&i.prototype.isPureReactComponent?!xo(o,d)||!xo(g,y):!0}function Ry(r,i,o,d){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,d),i.state!==r&&Dh.enqueueReplaceState(i,i.state,null)}function pi(r,i){var o=i;if("ref"in i){o={};for(var d in i)d!=="ref"&&(o[d]=i[d])}if(r=r.defaultProps){o===i&&(o=G({},o));for(var g in r)o[g]===void 0&&(o[g]=r[g])}return o}var ku=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Ty(r){ku(r)}function My(r){console.error(r)}function Ay(r){ku(r)}function Du(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function ky(r,i,o){try{var d=r.onCaughtError;d(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Oh(r,i,o){return o=_a(o),o.tag=3,o.payload={element:null},o.callback=function(){Du(r,i)},o}function Dy(r){return r=_a(r),r.tag=3,r}function Oy(r,i,o,d){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var y=d.value;r.payload=function(){return g(y)},r.callback=function(){ky(i,o,d)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){ky(i,o,d),typeof g!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var A=d.stack;this.componentDidCatch(d.value,{componentStack:A!==null?A:""})})}function k2(r,i,o,d,g){if(o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=o.alternate,i!==null&&ko(i,o,g,!0),o=Br.current,o!==null){switch(o.tag){case 13:return gs===null?pm():o.alternate===null&&vn===0&&(vn=3),o.flags&=-257,o.flags|=65536,o.lanes=g,d===uh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([d]):i.add(d),xm(r,d,g)),!1;case 22:return o.flags|=65536,d===uh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([d]):o.add(d)),xm(r,d,g)),!1}throw Error(a(435,o.tag))}return xm(r,d,g),pm(),!1}if($t)return i=Br.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,d!==ch&&(r=Error(a(422),{cause:d}),wo(zr(r,o)))):(d!==ch&&(i=Error(a(423),{cause:d}),wo(zr(i,o))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,d=zr(d,o),g=Oh(r.stateNode,d,g),Xh(r,g),vn!==4&&(vn=2)),!1;var y=Error(a(520),{cause:d});if(y=zr(y,o),Bo===null?Bo=[y]:Bo.push(y),vn!==4&&(vn=2),i===null)return!0;d=zr(d,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=g&-g,o.lanes|=r,r=Oh(o.stateNode,d,r),Xh(o,r),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Aa===null||!Aa.has(y))))return o.flags|=65536,g&=-g,o.lanes|=g,g=Dy(g),Oy(g,r,o,d),Xh(o,g),!1}o=o.return}while(o!==null);return!1}var Py=Error(a(461)),Ln=!1;function Yn(r,i,o,d){i.child=r===null?$v(i,null,o,d):ui(i,r.child,o,d)}function Ly(r,i,o,d,g){o=o.render;var y=i.ref;if("ref"in d){var S={};for(var A in d)A!=="ref"&&(S[A]=d[A])}else S=d;return xi(i),d=xh(r,i,o,S,y,g),A=vh(),r!==null&&!Ln?(yh(r,i,g),Hs(r,i,g)):($t&&A&&lh(i),i.flags|=1,Yn(r,i,d,g),i.child)}function Iy(r,i,o,d,g){if(r===null){var y=o.type;return typeof y=="function"&&!rm(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,zy(r,i,y,d,g)):(r=zu(o.type,null,d,i,i.mode,g),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,!qh(r,g)){var S=y.memoizedProps;if(o=o.compare,o=o!==null?o:xo,o(S,d)&&r.ref===i.ref)return Hs(r,i,g)}return i.flags|=1,r=Ta(y,d),r.ref=i.ref,r.return=i,i.child=r}function zy(r,i,o,d,g){if(r!==null){var y=r.memoizedProps;if(xo(y,d)&&r.ref===i.ref)if(Ln=!1,i.pendingProps=d=y,qh(r,g))(r.flags&131072)!==0&&(Ln=!0);else return i.lanes=r.lanes,Hs(r,i,g)}return Ph(r,i,o,d,g)}function Uy(r,i,o){var d=i.pendingProps,g=d.children,y=(i.stateNode._pendingVisibility&2)!==0,S=r!==null?r.memoizedState:null;if(Ao(r,i),d.mode==="hidden"||y){if((i.flags&128)!==0){if(d=S!==null?S.baseLanes|o:o,r!==null){for(g=i.child=r.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;i.childLanes=y&~d}else i.childLanes=0,i.child=null;return $y(r,i,d,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Nu(i,S!==null?S.cachePool:null),S!==null?Bv(i,S):dh(),Hv(i);else return i.lanes=i.childLanes=536870912,$y(r,i,S!==null?S.baseLanes|o:o,o)}else S!==null?(Nu(i,S.cachePool),Bv(i,S),ya(),i.memoizedState=null):(r!==null&&Nu(i,null),dh(),ya());return Yn(r,i,g,o),i.child}function $y(r,i,o,d){var g=ph();return g=g===null?null:{parent:kn._currentValue,pool:g},i.memoizedState={baseLanes:o,cachePool:g},r!==null&&Nu(i,null),dh(),Hv(i),r!==null&&ko(r,i,d,!0),null}function Ao(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=2097664)}}function Ph(r,i,o,d,g){return xi(i),o=xh(r,i,o,d,void 0,g),d=vh(),r!==null&&!Ln?(yh(r,i,g),Hs(r,i,g)):($t&&d&&lh(i),i.flags|=1,Yn(r,i,o,g),i.child)}function By(r,i,o,d,g,y){return xi(i),i.updateQueue=null,o=Gv(i,d,o,g),Yv(r),d=vh(),r!==null&&!Ln?(yh(r,i,y),Hs(r,i,y)):($t&&d&&lh(i),i.flags|=1,Yn(r,i,o,y),i.child)}function Hy(r,i,o,d,g){if(xi(i),i.stateNode===null){var y=Xi,S=o.contextType;typeof S=="object"&&S!==null&&(y=tr(S)),y=new o(d,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Dh,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=d,y.state=i.memoizedState,y.refs={},Gh(i),S=o.contextType,y.context=typeof S=="object"&&S!==null?tr(S):Xi,y.state=i.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(kh(i,o,S,d),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&Dh.enqueueReplaceState(y,y.state,null),Po(i,d,y,g),Oo(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(r===null){y=i.stateNode;var A=i.memoizedProps,B=pi(o,A);y.props=B;var Z=y.context,me=o.contextType;S=Xi,typeof me=="object"&&me!==null&&(S=tr(me));var je=o.getDerivedStateFromProps;me=typeof je=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,me||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||Z!==S)&&Ry(i,y,d,S),Na=!1;var oe=i.memoizedState;y.state=oe,Po(i,d,y,g),Oo(),Z=i.memoizedState,A||oe!==Z||Na?(typeof je=="function"&&(kh(i,o,je,d),Z=i.memoizedState),(B=Na||Cy(i,o,B,d,oe,Z,S))?(me||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=Z),y.props=d,y.state=Z,y.context=S,d=B):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{y=i.stateNode,Wh(r,i),S=i.memoizedProps,me=pi(o,S),y.props=me,je=i.pendingProps,oe=y.context,Z=o.contextType,B=Xi,typeof Z=="object"&&Z!==null&&(B=tr(Z)),A=o.getDerivedStateFromProps,(Z=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==je||oe!==B)&&Ry(i,y,d,B),Na=!1,oe=i.memoizedState,y.state=oe,Po(i,d,y,g),Oo();var he=i.memoizedState;S!==je||oe!==he||Na||r!==null&&r.dependencies!==null&&Ou(r.dependencies)?(typeof A=="function"&&(kh(i,o,A,d),he=i.memoizedState),(me=Na||Cy(i,o,me,d,oe,he,B)||r!==null&&r.dependencies!==null&&Ou(r.dependencies))?(Z||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,he,B),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,he,B)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===r.memoizedProps&&oe===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&oe===r.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=he),y.props=d,y.state=he,y.context=B,d=me):(typeof y.componentDidUpdate!="function"||S===r.memoizedProps&&oe===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&oe===r.memoizedState||(i.flags|=1024),d=!1)}return y=d,Ao(r,i),d=(i.flags&128)!==0,y||d?(y=i.stateNode,o=d&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,r!==null&&d?(i.child=ui(i,r.child,null,g),i.child=ui(i,null,o,g)):Yn(r,i,o,g),i.memoizedState=y.state,r=i.child):r=Hs(r,i,g),r}function qy(r,i,o,d){return bo(),i.flags|=256,Yn(r,i,o,d),i.child}var Lh={dehydrated:null,treeContext:null,retryLane:0};function Ih(r){return{baseLanes:r,cachePool:Vv()}}function zh(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=Vr),r}function Fy(r,i,o){var d=i.pendingProps,g=!1,y=(i.flags&128)!==0,S;if((S=y)||(S=r!==null&&r.memoizedState===null?!1:(An.current&2)!==0),S&&(g=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,r===null){if($t){if(g?va(i):ya(),$t){var A=Vn,B;if(B=A){e:{for(B=A,A=ps;B.nodeType!==8;){if(!A){A=null;break e}if(B=rs(B.nextSibling),B===null){A=null;break e}}A=B}A!==null?(i.memoizedState={dehydrated:A,treeContext:li!==null?{id:zs,overflow:Us}:null,retryLane:536870912},B=Fr(18,null,null,0),B.stateNode=A,B.return=i,i.child=B,ar=i,Vn=null,B=!0):B=!1}B||ci(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return A.data==="$!"?i.lanes=16:i.lanes=536870912,null;$s(i)}return A=d.children,d=d.fallback,g?(ya(),g=i.mode,A=$h({mode:"hidden",children:A},g),d=yi(d,g,o,null),A.return=i,d.return=i,A.sibling=d,i.child=A,g=i.child,g.memoizedState=Ih(o),g.childLanes=zh(r,S,o),i.memoizedState=Lh,d):(va(i),Uh(i,A))}if(B=r.memoizedState,B!==null&&(A=B.dehydrated,A!==null)){if(y)i.flags&256?(va(i),i.flags&=-257,i=Bh(r,i,o)):i.memoizedState!==null?(ya(),i.child=r.child,i.flags|=128,i=null):(ya(),g=d.fallback,A=i.mode,d=$h({mode:"visible",children:d.children},A),g=yi(g,A,o,null),g.flags|=2,d.return=i,g.return=i,d.sibling=g,i.child=d,ui(i,r.child,null,o),d=i.child,d.memoizedState=Ih(o),d.childLanes=zh(r,S,o),i.memoizedState=Lh,i=g);else if(va(i),A.data==="$!"){if(S=A.nextSibling&&A.nextSibling.dataset,S)var Z=S.dgst;S=Z,d=Error(a(419)),d.stack="",d.digest=S,wo({value:d,source:null,stack:null}),i=Bh(r,i,o)}else if(Ln||ko(r,i,o,!1),S=(o&r.childLanes)!==0,Ln||S){if(S=nn,S!==null){if(d=o&-o,(d&42)!==0)d=1;else switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=64;break;case 268435456:d=134217728;break;default:d=0}if(d=(d&(S.suspendedLanes|o))!==0?0:d,d!==0&&d!==B.retryLane)throw B.retryLane=d,xa(r,d),ir(S,r,d),Py}A.data==="$?"||pm(),i=Bh(r,i,o)}else A.data==="$?"?(i.flags|=128,i.child=r.child,i=G2.bind(null,r),A._reactRetry=i,i=null):(r=B.treeContext,Vn=rs(A.nextSibling),ar=i,$t=!0,ts=null,ps=!1,r!==null&&(Ur[$r++]=zs,Ur[$r++]=Us,Ur[$r++]=li,zs=r.id,Us=r.overflow,li=i),i=Uh(i,d.children),i.flags|=4096);return i}return g?(ya(),g=d.fallback,A=i.mode,B=r.child,Z=B.sibling,d=Ta(B,{mode:"hidden",children:d.children}),d.subtreeFlags=B.subtreeFlags&31457280,Z!==null?g=Ta(Z,g):(g=yi(g,A,o,null),g.flags|=2),g.return=i,d.return=i,d.sibling=g,i.child=d,d=g,g=i.child,A=r.child.memoizedState,A===null?A=Ih(o):(B=A.cachePool,B!==null?(Z=kn._currentValue,B=B.parent!==Z?{parent:Z,pool:Z}:B):B=Vv(),A={baseLanes:A.baseLanes|o,cachePool:B}),g.memoizedState=A,g.childLanes=zh(r,S,o),i.memoizedState=Lh,d):(va(i),o=r.child,r=o.sibling,o=Ta(o,{mode:"visible",children:d.children}),o.return=i,o.sibling=null,r!==null&&(S=i.deletions,S===null?(i.deletions=[r],i.flags|=16):S.push(r)),i.child=o,i.memoizedState=null,o)}function Uh(r,i){return i=$h({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function $h(r,i){return gb(r,i,0,null)}function Bh(r,i,o){return ui(i,r.child,null,o),r=Uh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Vy(r,i,o){r.lanes|=i;var d=r.alternate;d!==null&&(d.lanes|=i),Vh(r.return,i,o)}function Hh(r,i,o,d,g){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:g}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=o,y.tailMode=g)}function Yy(r,i,o){var d=i.pendingProps,g=d.revealOrder,y=d.tail;if(Yn(r,i,d.children,o),d=An.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Vy(r,o,i);else if(r.tag===19)Vy(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}switch(de(An,d),g){case"forwards":for(o=i.child,g=null;o!==null;)r=o.alternate,r!==null&&ju(r)===null&&(g=o),o=o.sibling;o=g,o===null?(g=i.child,i.child=null):(g=o.sibling,o.sibling=null),Hh(i,!1,g,o,y);break;case"backwards":for(o=null,g=i.child,i.child=null;g!==null;){if(r=g.alternate,r!==null&&ju(r)===null){i.child=g;break}r=g.sibling,g.sibling=o,o=g,g=r}Hh(i,!0,o,null,y);break;case"together":Hh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Hs(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Ma|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(ko(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=Ta(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Ta(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function qh(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Ou(r)))}function D2(r,i,o){switch(i.tag){case 3:xe(i,i.stateNode.containerInfo),ja(i,kn,r.memoizedState.cache),bo();break;case 27:case 5:Pe(i);break;case 4:xe(i,i.stateNode.containerInfo);break;case 10:ja(i,i.type,i.memoizedProps.value);break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(va(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Fy(r,i,o):(va(i),r=Hs(r,i,o),r!==null?r.sibling:null);va(i);break;case 19:var g=(r.flags&128)!==0;if(d=(o&i.childLanes)!==0,d||(ko(r,i,o,!1),d=(o&i.childLanes)!==0),g){if(d)return Yy(r,i,o);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),de(An,An.current),d)break;return null;case 22:case 23:return i.lanes=0,Uy(r,i,o);case 24:ja(i,kn,r.memoizedState.cache)}return Hs(r,i,o)}function Gy(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)Ln=!0;else{if(!qh(r,o)&&(i.flags&128)===0)return Ln=!1,D2(r,i,o);Ln=(r.flags&131072)!==0}else Ln=!1,$t&&(i.flags&1048576)!==0&&Av(i,xu,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var d=i.elementType,g=d._init;if(d=g(d._payload),i.type=d,typeof d=="function")rm(d)?(r=pi(d,r),i.tag=1,i=Hy(null,i,d,r,o)):(i.tag=0,i=Ph(null,i,d,r,o));else{if(d!=null){if(g=d.$$typeof,g===j){i.tag=11,i=Ly(null,i,d,r,o);break e}else if(g===R){i.tag=14,i=Iy(null,i,d,r,o);break e}}throw i=F(d)||d,Error(a(306,i,""))}}return i;case 0:return Ph(r,i,i.type,i.pendingProps,o);case 1:return d=i.type,g=pi(d,i.pendingProps),Hy(r,i,d,g,o);case 3:e:{if(xe(i,i.stateNode.containerInfo),r===null)throw Error(a(387));var y=i.pendingProps;g=i.memoizedState,d=g.element,Wh(r,i),Po(i,y,null,o);var S=i.memoizedState;if(y=S.cache,ja(i,kn,y),y!==g.cache&&Yh(i,[kn],o,!0),Oo(),y=S.element,g.isDehydrated)if(g={element:y,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=qy(r,i,y,o);break e}else if(y!==d){d=zr(Error(a(424)),i),wo(d),i=qy(r,i,y,o);break e}else for(Vn=rs(i.stateNode.containerInfo.firstChild),ar=i,$t=!0,ts=null,ps=!0,o=$v(i,null,y,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(bo(),y===d){i=Hs(r,i,o);break e}Yn(r,i,y,o)}i=i.child}return i;case 26:return Ao(r,i),r===null?(o=Kb(i.type,null,i.pendingProps,null))?i.memoizedState=o:$t||(o=i.type,r=i.pendingProps,d=Ku(it.current).createElement(o),d[un]=i,d[_n]=r,Gn(d,o,r),Sn(d),i.stateNode=d):i.memoizedState=Kb(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Pe(i),r===null&&$t&&(d=i.stateNode=Gb(i.type,i.pendingProps,it.current),ar=i,ps=!0,Vn=rs(d.firstChild)),d=i.pendingProps.children,r!==null||$t?Yn(r,i,d,o):i.child=ui(i,null,d,o),Ao(r,i),i.child;case 5:return r===null&&$t&&((g=d=Vn)&&(d=cC(d,i.type,i.pendingProps,ps),d!==null?(i.stateNode=d,ar=i,Vn=rs(d.firstChild),ps=!1,g=!0):g=!1),g||ci(i)),Pe(i),g=i.type,y=i.pendingProps,S=r!==null?r.memoizedProps:null,d=y.children,Tm(g,y)?d=null:S!==null&&Tm(g,S)&&(i.flags|=32),i.memoizedState!==null&&(g=xh(r,i,E2,null,null,o),Ko._currentValue=g),Ao(r,i),Yn(r,i,d,o),i.child;case 6:return r===null&&$t&&((r=o=Vn)&&(o=uC(o,i.pendingProps,ps),o!==null?(i.stateNode=o,ar=i,Vn=null,r=!0):r=!1),r||ci(i)),null;case 13:return Fy(r,i,o);case 4:return xe(i,i.stateNode.containerInfo),d=i.pendingProps,r===null?i.child=ui(i,null,d,o):Yn(r,i,d,o),i.child;case 11:return Ly(r,i,i.type,i.pendingProps,o);case 7:return Yn(r,i,i.pendingProps,o),i.child;case 8:return Yn(r,i,i.pendingProps.children,o),i.child;case 12:return Yn(r,i,i.pendingProps.children,o),i.child;case 10:return d=i.pendingProps,ja(i,i.type,d.value),Yn(r,i,d.children,o),i.child;case 9:return g=i.type._context,d=i.pendingProps.children,xi(i),g=tr(g),d=d(g),i.flags|=1,Yn(r,i,d,o),i.child;case 14:return Iy(r,i,i.type,i.pendingProps,o);case 15:return zy(r,i,i.type,i.pendingProps,o);case 19:return Yy(r,i,o);case 22:return Uy(r,i,o);case 24:return xi(i),d=tr(kn),r===null?(g=ph(),g===null&&(g=nn,y=hh(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=o),g=y),i.memoizedState={parent:d,cache:g},Gh(i),ja(i,kn,g)):((r.lanes&o)!==0&&(Wh(r,i),Po(i,null,null,o),Oo()),g=r.memoizedState,y=i.memoizedState,g.parent!==d?(g={parent:d,cache:d},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),ja(i,kn,d)):(d=y.cache,ja(i,kn,d),d!==g.cache&&Yh(i,[kn],o,!0))),Yn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}var Fh=ae(null),gi=null,qs=null;function ja(r,i,o){de(Fh,i._currentValue),i._currentValue=o}function Fs(r){r._currentValue=Fh.current,ge(Fh)}function Vh(r,i,o){for(;r!==null;){var d=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),r===o)break;r=r.return}}function Yh(r,i,o,d){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var y=g.dependencies;if(y!==null){var S=g.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=g;for(var B=0;B<i.length;B++)if(A.context===i[B]){y.lanes|=o,A=y.alternate,A!==null&&(A.lanes|=o),Vh(y.return,o,r),d||(S=null);break e}y=A.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(a(341));S.lanes|=o,y=S.alternate,y!==null&&(y.lanes|=o),Vh(S,o,r),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===r){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function ko(r,i,o,d){r=null;for(var g=i,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(a(387));if(S=S.memoizedProps,S!==null){var A=g.type;jr(g.pendingProps.value,S.value)||(r!==null?r.push(A):r=[A])}}else if(g===rt.current){if(S=g.alternate,S===null)throw Error(a(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(Ko):r=[Ko])}g=g.return}r!==null&&Yh(i,r,o,d),i.flags|=262144}function Ou(r){for(r=r.firstContext;r!==null;){if(!jr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function xi(r){gi=r,qs=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function tr(r){return Wy(gi,r)}function Pu(r,i){return gi===null&&xi(r),Wy(r,i)}function Wy(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},qs===null){if(r===null)throw Error(a(308));qs=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else qs=qs.next=i;return o}var Na=!1;function Gh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wh(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function _a(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Sa(r,i,o){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(hn&2)!==0){var g=d.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),d.pending=i,i=pu(r),Tv(r,null,o),i}return mu(r,d,i,o),pu(r)}function Do(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194176)!==0)){var d=i.lanes;d&=r.pendingLanes,o|=d,i.lanes=o,xt(r,o)}}function Xh(r,i){var o=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var g=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?g=y=S:y=y.next=S,o=o.next}while(o!==null);y===null?g=y=i:y=y.next=i}else g=y=i;o={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var Kh=!1;function Oo(){if(Kh){var r=tl;if(r!==null)throw r}}function Po(r,i,o,d){Kh=!1;var g=r.updateQueue;Na=!1;var y=g.firstBaseUpdate,S=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var B=A,Z=B.next;B.next=null,S===null?y=Z:S.next=Z,S=B;var me=r.alternate;me!==null&&(me=me.updateQueue,A=me.lastBaseUpdate,A!==S&&(A===null?me.firstBaseUpdate=Z:A.next=Z,me.lastBaseUpdate=B))}if(y!==null){var je=g.baseState;S=0,me=Z=B=null,A=y;do{var oe=A.lane&-536870913,he=oe!==A.lane;if(he?(Tt&oe)===oe:(d&oe)===oe){oe!==0&&oe===el&&(Kh=!0),me!==null&&(me=me.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var qe=r,st=A;oe=i;var yn=o;switch(st.tag){case 1:if(qe=st.payload,typeof qe=="function"){je=qe.call(yn,je,oe);break e}je=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=st.payload,oe=typeof qe=="function"?qe.call(yn,je,oe):qe,oe==null)break e;je=G({},je,oe);break e;case 2:Na=!0}}oe=A.callback,oe!==null&&(r.flags|=64,he&&(r.flags|=8192),he=g.callbacks,he===null?g.callbacks=[oe]:he.push(oe))}else he={lane:oe,tag:A.tag,payload:A.payload,callback:A.callback,next:null},me===null?(Z=me=he,B=je):me=me.next=he,S|=oe;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;he=A,A=he.next,he.next=null,g.lastBaseUpdate=he,g.shared.pending=null}}while(!0);me===null&&(B=je),g.baseState=B,g.firstBaseUpdate=Z,g.lastBaseUpdate=me,y===null&&(g.shared.lanes=0),Ma|=S,r.lanes=S,r.memoizedState=je}}function Xy(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function Ky(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Xy(o[r],i)}function Lo(r,i){try{var o=i.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var g=d.next;o=g;do{if((o.tag&r)===r){d=void 0;var y=o.create,S=o.inst;d=y(),S.destroy=d}o=o.next}while(o!==g)}}catch(A){Jt(i,i.return,A)}}function Ea(r,i,o){try{var d=i.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&r)===r){var S=d.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,g=i;var B=o;try{A()}catch(Z){Jt(g,B,Z)}}}d=d.next}while(d!==y)}}catch(Z){Jt(i,i.return,Z)}}function Qy(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{Ky(i,o)}catch(d){Jt(r,r.return,d)}}}function Zy(r,i,o){o.props=pi(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(d){Jt(r,i,d)}}function vi(r,i){try{var o=r.ref;if(o!==null){var d=r.stateNode;switch(r.tag){case 26:case 27:case 5:var g=d;break;default:g=d}typeof o=="function"?r.refCleanup=o(g):o.current=g}}catch(y){Jt(r,i,y)}}function Nr(r,i){var o=r.ref,d=r.refCleanup;if(o!==null)if(typeof d=="function")try{d()}catch(g){Jt(r,i,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){Jt(r,i,g)}else o.current=null}function Jy(r){var i=r.type,o=r.memoizedProps,d=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&d.focus();break e;case"img":o.src?d.src=o.src:o.srcSet&&(d.srcset=o.srcSet)}}catch(g){Jt(r,r.return,g)}}function eb(r,i,o){try{var d=r.stateNode;sC(d,r.type,o,i),d[_n]=i}catch(g){Jt(r,r.return,g)}}function tb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function Qh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||tb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Zh(r,i,o){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(r,i):o.insertBefore(r,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(r,o)):(i=o,i.appendChild(r)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Xu));else if(d!==4&&d!==27&&(r=r.child,r!==null))for(Zh(r,i,o),r=r.sibling;r!==null;)Zh(r,i,o),r=r.sibling}function Lu(r,i,o){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(d!==4&&d!==27&&(r=r.child,r!==null))for(Lu(r,i,o),r=r.sibling;r!==null;)Lu(r,i,o),r=r.sibling}var Vs=!1,xn=!1,Jh=!1,nb=typeof WeakSet=="function"?WeakSet:Set,In=null,rb=!1;function O2(r,i){if(r=r.containerInfo,Cm=nd,r=bv(r),th(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var g=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var S=0,A=-1,B=-1,Z=0,me=0,je=r,oe=null;t:for(;;){for(var he;je!==o||g!==0&&je.nodeType!==3||(A=S+g),je!==y||d!==0&&je.nodeType!==3||(B=S+d),je.nodeType===3&&(S+=je.nodeValue.length),(he=je.firstChild)!==null;)oe=je,je=he;for(;;){if(je===r)break t;if(oe===o&&++Z===g&&(A=S),oe===y&&++me===d&&(B=S),(he=je.nextSibling)!==null)break;je=oe,oe=je.parentNode}je=he}o=A===-1||B===-1?null:{start:A,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(Rm={focusedElem:r,selectionRange:o},nd=!1,In=i;In!==null;)if(i=In,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,In=r;else for(;In!==null;){switch(i=In,y=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,o=i,g=y.memoizedProps,y=y.memoizedState,d=o.stateNode;try{var qe=pi(o.type,g,o.elementType===o.type);r=d.getSnapshotBeforeUpdate(qe,y),d.__reactInternalSnapshotBeforeUpdate=r}catch(st){Jt(o,o.return,st)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)km(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":km(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,In=r;break}In=i.return}return qe=rb,rb=!1,qe}function sb(r,i,o){var d=o.flags;switch(o.tag){case 0:case 11:case 15:Gs(r,o),d&4&&Lo(5,o);break;case 1:if(Gs(r,o),d&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(A){Jt(o,o.return,A)}else{var g=pi(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(g,i,r.__reactInternalSnapshotBeforeUpdate)}catch(A){Jt(o,o.return,A)}}d&64&&Qy(o),d&512&&vi(o,o.return);break;case 3:if(Gs(r,o),d&64&&(d=o.updateQueue,d!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Ky(d,r)}catch(A){Jt(o,o.return,A)}}break;case 26:Gs(r,o),d&512&&vi(o,o.return);break;case 27:case 5:Gs(r,o),i===null&&d&4&&Jy(o),d&512&&vi(o,o.return);break;case 12:Gs(r,o);break;case 13:Gs(r,o),d&4&&lb(r,o);break;case 22:if(g=o.memoizedState!==null||Vs,!g){i=i!==null&&i.memoizedState!==null||xn;var y=Vs,S=xn;Vs=g,(xn=i)&&!S?Ca(r,o,(o.subtreeFlags&8772)!==0):Gs(r,o),Vs=y,xn=S}d&512&&(o.memoizedProps.mode==="manual"?vi(o,o.return):Nr(o,o.return));break;default:Gs(r,o)}}function ab(r){var i=r.alternate;i!==null&&(r.alternate=null,ab(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&fr(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Rn=null,_r=!1;function Ys(r,i,o){for(o=o.child;o!==null;)ib(r,i,o),o=o.sibling}function ib(r,i,o){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(tn,o)}catch{}switch(o.tag){case 26:xn||Nr(o,i),Ys(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:xn||Nr(o,i);var d=Rn,g=_r;for(Rn=o.stateNode,Ys(r,i,o),o=o.stateNode,i=o.attributes;i.length;)o.removeAttributeNode(i[0]);fr(o),Rn=d,_r=g;break;case 5:xn||Nr(o,i);case 6:g=Rn;var y=_r;if(Rn=null,Ys(r,i,o),Rn=g,_r=y,Rn!==null)if(_r)try{r=Rn,d=o.stateNode,r.nodeType===8?r.parentNode.removeChild(d):r.removeChild(d)}catch(S){Jt(o,i,S)}else try{Rn.removeChild(o.stateNode)}catch(S){Jt(o,i,S)}break;case 18:Rn!==null&&(_r?(i=Rn,o=o.stateNode,i.nodeType===8?Am(i.parentNode,o):i.nodeType===1&&Am(i,o),ec(i)):Am(Rn,o.stateNode));break;case 4:d=Rn,g=_r,Rn=o.stateNode.containerInfo,_r=!0,Ys(r,i,o),Rn=d,_r=g;break;case 0:case 11:case 14:case 15:xn||Ea(2,o,i),xn||Ea(4,o,i),Ys(r,i,o);break;case 1:xn||(Nr(o,i),d=o.stateNode,typeof d.componentWillUnmount=="function"&&Zy(o,i,d)),Ys(r,i,o);break;case 21:Ys(r,i,o);break;case 22:xn||Nr(o,i),xn=(d=xn)||o.memoizedState!==null,Ys(r,i,o),xn=d;break;default:Ys(r,i,o)}}function lb(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ec(r)}catch(o){Jt(i,i.return,o)}}function P2(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new nb),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new nb),i;default:throw Error(a(435,r.tag))}}function em(r,i){var o=P2(r);i.forEach(function(d){var g=W2.bind(null,r,d);o.has(d)||(o.add(d),d.then(g,g))})}function Hr(r,i){var o=i.deletions;if(o!==null)for(var d=0;d<o.length;d++){var g=o[d],y=r,S=i,A=S;e:for(;A!==null;){switch(A.tag){case 27:case 5:Rn=A.stateNode,_r=!1;break e;case 3:Rn=A.stateNode.containerInfo,_r=!0;break e;case 4:Rn=A.stateNode.containerInfo,_r=!0;break e}A=A.return}if(Rn===null)throw Error(a(160));ib(y,S,g),Rn=null,_r=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)ob(i,r),i=i.sibling}var ns=null;function ob(r,i){var o=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Hr(i,r),qr(r),d&4&&(Ea(3,r,r.return),Lo(3,r),Ea(5,r,r.return));break;case 1:Hr(i,r),qr(r),d&512&&(xn||o===null||Nr(o,o.return)),d&64&&Vs&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?d:o.concat(d))));break;case 26:var g=ns;if(Hr(i,r),qr(r),d&512&&(xn||o===null||Nr(o,o.return)),d&4){var y=o!==null?o.memoizedState:null;if(d=r.memoizedState,o===null)if(d===null)if(r.stateNode===null){e:{d=r.type,o=r.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Fn]||y[un]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(d),g.head.insertBefore(y,g.querySelector("head > title"))),Gn(y,d,o),y[un]=r,Sn(y),d=y;break e;case"link":var S=Jb("link","href",g).get(d+(o.href||""));if(S){for(var A=0;A<S.length;A++)if(y=S[A],y.getAttribute("href")===(o.href==null?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(A,1);break t}}y=g.createElement(d),Gn(y,d,o),g.head.appendChild(y);break;case"meta":if(S=Jb("meta","content",g).get(d+(o.content||""))){for(A=0;A<S.length;A++)if(y=S[A],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(A,1);break t}}y=g.createElement(d),Gn(y,d,o),g.head.appendChild(y);break;default:throw Error(a(468,d))}y[un]=r,Sn(y),d=y}r.stateNode=d}else e0(g,r.type,r.stateNode);else r.stateNode=Zb(g,d,r.memoizedProps);else y!==d?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,d===null?e0(g,r.type,r.stateNode):Zb(g,d,r.memoizedProps)):d===null&&r.stateNode!==null&&eb(r,r.memoizedProps,o.memoizedProps)}break;case 27:if(d&4&&r.alternate===null){g=r.stateNode,y=r.memoizedProps;try{for(var B=g.firstChild;B;){var Z=B.nextSibling,me=B.nodeName;B[Fn]||me==="HEAD"||me==="BODY"||me==="SCRIPT"||me==="STYLE"||me==="LINK"&&B.rel.toLowerCase()==="stylesheet"||g.removeChild(B),B=Z}for(var je=r.type,oe=g.attributes;oe.length;)g.removeAttributeNode(oe[0]);Gn(g,je,y),g[un]=r,g[_n]=y}catch(qe){Jt(r,r.return,qe)}}case 5:if(Hr(i,r),qr(r),d&512&&(xn||o===null||Nr(o,o.return)),r.flags&32){g=r.stateNode;try{Hi(g,"")}catch(qe){Jt(r,r.return,qe)}}d&4&&r.stateNode!=null&&(g=r.memoizedProps,eb(r,g,o!==null?o.memoizedProps:g)),d&1024&&(Jh=!0);break;case 6:if(Hr(i,r),qr(r),d&4){if(r.stateNode===null)throw Error(a(162));d=r.memoizedProps,o=r.stateNode;try{o.nodeValue=d}catch(qe){Jt(r,r.return,qe)}}break;case 3:if(Ju=null,g=ns,ns=Qu(i.containerInfo),Hr(i,r),ns=g,qr(r),d&4&&o!==null&&o.memoizedState.isDehydrated)try{ec(i.containerInfo)}catch(qe){Jt(r,r.return,qe)}Jh&&(Jh=!1,cb(r));break;case 4:d=ns,ns=Qu(r.stateNode.containerInfo),Hr(i,r),qr(r),ns=d;break;case 12:Hr(i,r),qr(r);break;case 13:Hr(i,r),qr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(cm=St()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,em(r,d)));break;case 22:if(d&512&&(xn||o===null||Nr(o,o.return)),B=r.memoizedState!==null,Z=o!==null&&o.memoizedState!==null,me=Vs,je=xn,Vs=me||B,xn=je||Z,Hr(i,r),xn=je,Vs=me,qr(r),i=r.stateNode,i._current=r,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,d&8192&&(i._visibility=B?i._visibility&-2:i._visibility|1,B&&(i=Vs||xn,o===null||Z||i||al(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(o=null,i=r;;){if(i.tag===5||i.tag===26||i.tag===27){if(o===null){Z=o=i;try{if(g=Z.stateNode,B)y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=Z.stateNode,A=Z.memoizedProps.style;var he=A!=null&&A.hasOwnProperty("display")?A.display:null;S.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(qe){Jt(Z,Z.return,qe)}}}else if(i.tag===6){if(o===null){Z=i;try{Z.stateNode.nodeValue=B?"":Z.memoizedProps}catch(qe){Jt(Z,Z.return,qe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=r.updateQueue,d!==null&&(o=d.retryQueue,o!==null&&(d.retryQueue=null,em(r,o))));break;case 19:Hr(i,r),qr(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,em(r,d)));break;case 21:break;default:Hr(i,r),qr(r)}}function qr(r){var i=r.flags;if(i&2){try{if(r.tag!==27){e:{for(var o=r.return;o!==null;){if(tb(o)){var d=o;break e}o=o.return}throw Error(a(160))}switch(d.tag){case 27:var g=d.stateNode,y=Qh(r);Lu(r,y,g);break;case 5:var S=d.stateNode;d.flags&32&&(Hi(S,""),d.flags&=-33);var A=Qh(r);Lu(r,A,S);break;case 3:case 4:var B=d.stateNode.containerInfo,Z=Qh(r);Zh(r,Z,B);break;default:throw Error(a(161))}}}catch(me){Jt(r,r.return,me)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function cb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;cb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Gs(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)sb(r,i.alternate,i),i=i.sibling}function al(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ea(4,i,i.return),al(i);break;case 1:Nr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Zy(i,i.return,o),al(i);break;case 26:case 27:case 5:Nr(i,i.return),al(i);break;case 22:Nr(i,i.return),i.memoizedState===null&&al(i);break;default:al(i)}r=r.sibling}}function Ca(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,g=r,y=i,S=y.flags;switch(y.tag){case 0:case 11:case 15:Ca(g,y,o),Lo(4,y);break;case 1:if(Ca(g,y,o),d=y,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Z){Jt(d,d.return,Z)}if(d=y,g=d.updateQueue,g!==null){var A=d.stateNode;try{var B=g.shared.hiddenCallbacks;if(B!==null)for(g.shared.hiddenCallbacks=null,g=0;g<B.length;g++)Xy(B[g],A)}catch(Z){Jt(d,d.return,Z)}}o&&S&64&&Qy(y),vi(y,y.return);break;case 26:case 27:case 5:Ca(g,y,o),o&&d===null&&S&4&&Jy(y),vi(y,y.return);break;case 12:Ca(g,y,o);break;case 13:Ca(g,y,o),o&&S&4&&lb(g,y);break;case 22:y.memoizedState===null&&Ca(g,y,o),vi(y,y.return);break;default:Ca(g,y,o)}i=i.sibling}}function tm(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Eo(o))}function nm(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Eo(r))}function Ra(r,i,o,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ub(r,i,o,d),i=i.sibling}function ub(r,i,o,d){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Ra(r,i,o,d),g&2048&&Lo(9,i);break;case 3:Ra(r,i,o,d),g&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Eo(r)));break;case 12:if(g&2048){Ra(r,i,o,d),r=i.stateNode;try{var y=i.memoizedProps,S=y.id,A=y.onPostCommit;typeof A=="function"&&A(S,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){Jt(i,i.return,B)}}else Ra(r,i,o,d);break;case 23:break;case 22:y=i.stateNode,i.memoizedState!==null?y._visibility&4?Ra(r,i,o,d):Io(r,i):y._visibility&4?Ra(r,i,o,d):(y._visibility|=4,il(r,i,o,d,(i.subtreeFlags&10256)!==0)),g&2048&&tm(i.alternate,i);break;case 24:Ra(r,i,o,d),g&2048&&nm(i.alternate,i);break;default:Ra(r,i,o,d)}}function il(r,i,o,d,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var y=r,S=i,A=o,B=d,Z=S.flags;switch(S.tag){case 0:case 11:case 15:il(y,S,A,B,g),Lo(8,S);break;case 23:break;case 22:var me=S.stateNode;S.memoizedState!==null?me._visibility&4?il(y,S,A,B,g):Io(y,S):(me._visibility|=4,il(y,S,A,B,g)),g&&Z&2048&&tm(S.alternate,S);break;case 24:il(y,S,A,B,g),g&&Z&2048&&nm(S.alternate,S);break;default:il(y,S,A,B,g)}i=i.sibling}}function Io(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,d=i,g=d.flags;switch(d.tag){case 22:Io(o,d),g&2048&&tm(d.alternate,d);break;case 24:Io(o,d),g&2048&&nm(d.alternate,d);break;default:Io(o,d)}i=i.sibling}}var zo=8192;function ll(r){if(r.subtreeFlags&zo)for(r=r.child;r!==null;)db(r),r=r.sibling}function db(r){switch(r.tag){case 26:ll(r),r.flags&zo&&r.memoizedState!==null&&NC(ns,r.memoizedState,r.memoizedProps);break;case 5:ll(r);break;case 3:case 4:var i=ns;ns=Qu(r.stateNode.containerInfo),ll(r),ns=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=zo,zo=16777216,ll(r),zo=i):ll(r));break;default:ll(r)}}function fb(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Uo(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var d=i[o];In=d,mb(d,r)}fb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)hb(r),r=r.sibling}function hb(r){switch(r.tag){case 0:case 11:case 15:Uo(r),r.flags&2048&&Ea(9,r,r.return);break;case 3:Uo(r);break;case 12:Uo(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&4&&(r.return===null||r.return.tag!==13)?(i._visibility&=-5,Iu(r)):Uo(r);break;default:Uo(r)}}function Iu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var d=i[o];In=d,mb(d,r)}fb(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ea(8,i,i.return),Iu(i);break;case 22:o=i.stateNode,o._visibility&4&&(o._visibility&=-5,Iu(i));break;default:Iu(i)}r=r.sibling}}function mb(r,i){for(;In!==null;){var o=In;switch(o.tag){case 0:case 11:case 15:Ea(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var d=o.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Eo(o.memoizedState.cache)}if(d=o.child,d!==null)d.return=o,In=d;else e:for(o=r;In!==null;){d=In;var g=d.sibling,y=d.return;if(ab(d),d===o){In=null;break e}if(g!==null){g.return=y,In=g;break e}In=y}}}function L2(r,i,o,d){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(r,i,o,d){return new L2(r,i,o,d)}function rm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ta(r,i){var o=r.alternate;return o===null?(o=Fr(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&31457280,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function pb(r,i){r.flags&=31457282;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function zu(r,i,o,d,g,y){var S=0;if(d=r,typeof r=="function")rm(r)&&(S=1);else if(typeof r=="string")S=wC(r,o,Se.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case h:return yi(o.children,g,y,i);case p:S=8,g|=24;break;case x:return r=Fr(12,o,i,g|2),r.elementType=x,r.lanes=y,r;case N:return r=Fr(13,o,i,g),r.elementType=N,r.lanes=y,r;case _:return r=Fr(19,o,i,g),r.elementType=_,r.lanes=y,r;case C:return gb(o,g,y,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case v:case w:S=10;break e;case b:S=9;break e;case j:S=11;break e;case R:S=14;break e;case E:S=16,d=null;break e}S=29,o=Error(a(130,r===null?"null":typeof r,"")),d=null}return i=Fr(S,o,i,g),i.elementType=r,i.type=d,i.lanes=y,i}function yi(r,i,o,d){return r=Fr(7,r,d,i),r.lanes=o,r}function gb(r,i,o,d){r=Fr(22,r,d,i),r.elementType=C,r.lanes=o;var g={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=g._current;if(y===null)throw Error(a(456));if((g._pendingVisibility&2)===0){var S=xa(y,2);S!==null&&(g._pendingVisibility|=2,ir(S,y,2))}},attach:function(){var y=g._current;if(y===null)throw Error(a(456));if((g._pendingVisibility&2)!==0){var S=xa(y,2);S!==null&&(g._pendingVisibility&=-3,ir(S,y,2))}}};return r.stateNode=g,r}function sm(r,i,o){return r=Fr(6,r,null,i),r.lanes=o,r}function am(r,i,o){return i=Fr(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function Ws(r){r.flags|=4}function xb(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!t0(i)){if(i=Br.current,i!==null&&((Tt&4194176)===Tt?gs!==null:(Tt&62914560)!==Tt&&(Tt&536870912)===0||i!==gs))throw No=uh,Ov;r.flags|=8192}}function Uu(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?He():536870912,r.lanes|=i,cl|=i)}function $o(r,i){if(!$t)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function fn(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,d=0;if(i)for(var g=r.child;g!==null;)o|=g.lanes|g.childLanes,d|=g.subtreeFlags&31457280,d|=g.flags&31457280,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)o|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=d,r.childLanes=o,i}function I2(r,i,o){var d=i.pendingProps;switch(oh(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(i),null;case 1:return fn(i),null;case 3:return o=i.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),Fs(kn),pe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(yo(i)?Ws(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ts!==null&&(hm(ts),ts=null))),fn(i),null;case 26:return o=i.memoizedState,r===null?(Ws(i),o!==null?(fn(i),xb(i,o)):(fn(i),i.flags&=-16777217)):o?o!==r.memoizedState?(Ws(i),fn(i),xb(i,o)):(fn(i),i.flags&=-16777217):(r.memoizedProps!==d&&Ws(i),fn(i),i.flags&=-16777217),null;case 27:be(i),o=it.current;var g=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==d&&Ws(i);else{if(!d){if(i.stateNode===null)throw Error(a(166));return fn(i),null}r=Se.current,yo(i)?kv(i):(r=Gb(g,d,o),i.stateNode=r,Ws(i))}return fn(i),null;case 5:if(be(i),o=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&Ws(i);else{if(!d){if(i.stateNode===null)throw Error(a(166));return fn(i),null}if(r=Se.current,yo(i))kv(i);else{switch(g=Ku(it.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?r.multiple=!0:d.size&&(r.size=d.size);break;default:r=typeof d.is=="string"?g.createElement(o,{is:d.is}):g.createElement(o)}}r[un]=i,r[_n]=d;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=r;e:switch(Gn(r,o,d),o){case"button":case"input":case"select":case"textarea":r=!!d.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Ws(i)}}return fn(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==d&&Ws(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(a(166));if(r=it.current,yo(i)){if(r=i.stateNode,o=i.memoizedProps,d=null,g=ar,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}r[un]=i,r=!!(r.nodeValue===o||d!==null&&d.suppressHydrationWarning===!0||Bb(r.nodeValue,o)),r||ci(i)}else r=Ku(r).createTextNode(d),r[un]=i,i.stateNode=r}return fn(i),null;case 13:if(d=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=yo(i),d!==null&&d.dehydrated!==null){if(r===null){if(!g)throw Error(a(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(a(317));g[un]=i}else bo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;fn(i),g=!1}else ts!==null&&(hm(ts),ts=null),g=!0;if(!g)return i.flags&256?($s(i),i):($s(i),null)}if($s(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=d!==null,r=r!==null&&r.memoizedState!==null,o){d=i.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var y=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==g&&(d.flags|=2048)}return o!==r&&o&&(i.child.flags|=8192),Uu(i,i.updateQueue),fn(i),null;case 4:return pe(),r===null&&_m(i.stateNode.containerInfo),fn(i),null;case 10:return Fs(i.type),fn(i),null;case 19:if(ge(An),g=i.memoizedState,g===null)return fn(i),null;if(d=(i.flags&128)!==0,y=g.rendering,y===null)if(d)$o(g,!1);else{if(vn!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(y=ju(r),y!==null){for(i.flags|=128,$o(g,!1),r=y.updateQueue,i.updateQueue=r,Uu(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)pb(o,r),o=o.sibling;return de(An,An.current&1|2),i.child}r=r.sibling}g.tail!==null&&St()>$u&&(i.flags|=128,d=!0,$o(g,!1),i.lanes=4194304)}else{if(!d)if(r=ju(y),r!==null){if(i.flags|=128,d=!0,r=r.updateQueue,i.updateQueue=r,Uu(i,r),$o(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!$t)return fn(i),null}else 2*St()-g.renderingStartTime>$u&&o!==536870912&&(i.flags|=128,d=!0,$o(g,!1),i.lanes=4194304);g.isBackwards?(y.sibling=i.child,i.child=y):(r=g.last,r!==null?r.sibling=y:i.child=y,g.last=y)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=St(),i.sibling=null,r=An.current,de(An,d?r&1|2:r&1),i):(fn(i),null);case 22:case 23:return $s(i),fh(),d=i.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(o&536870912)!==0&&(i.flags&128)===0&&(fn(i),i.subtreeFlags&6&&(i.flags|=8192)):fn(i),o=i.updateQueue,o!==null&&Uu(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==o&&(i.flags|=2048),r!==null&&ge(di),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Fs(kn),fn(i),null;case 25:return null}throw Error(a(156,i.tag))}function z2(r,i){switch(oh(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Fs(kn),pe(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return be(i),null;case 13:if($s(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));bo()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ge(An),null;case 4:return pe(),null;case 10:return Fs(i.type),null;case 22:case 23:return $s(i),fh(),r!==null&&ge(di),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Fs(kn),null;case 25:return null;default:return null}}function vb(r,i){switch(oh(i),i.tag){case 3:Fs(kn),pe();break;case 26:case 27:case 5:be(i);break;case 4:pe();break;case 13:$s(i);break;case 19:ge(An);break;case 10:Fs(i.type);break;case 22:case 23:$s(i),fh(),r!==null&&ge(di);break;case 24:Fs(kn)}}var U2={getCacheForType:function(r){var i=tr(kn),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o}},$2=typeof WeakMap=="function"?WeakMap:Map,hn=0,nn=null,bt=null,Tt=0,rn=0,Sr=null,Xs=!1,ol=!1,im=!1,Ks=0,vn=0,Ma=0,bi=0,lm=0,Vr=0,cl=0,Bo=null,vs=null,om=!1,cm=0,$u=1/0,Bu=null,Aa=null,Hu=!1,wi=null,Ho=0,um=0,dm=null,qo=0,fm=null;function Er(){if((hn&2)!==0&&Tt!==0)return Tt&-Tt;if(U.T!==null){var r=el;return r!==0?r:bm()}return Ut()}function yb(){Vr===0&&(Vr=(Tt&536870912)===0||$t?ke():536870912);var r=Br.current;return r!==null&&(r.flags|=32),Vr}function ir(r,i,o){(r===nn&&rn===2||r.cancelPendingCommit!==null)&&(ul(r,0),Qs(r,Tt,Vr,!1)),Ge(r,o),((hn&2)===0||r!==nn)&&(r===nn&&((hn&2)===0&&(bi|=o),vn===4&&Qs(r,Tt,Vr,!1)),ys(r))}function bb(r,i,o){if((hn&6)!==0)throw Error(a(327));var d=!o&&(i&60)===0&&(i&r.expiredLanes)===0||ve(r,i),g=d?q2(r,i):gm(r,i,!0),y=d;do{if(g===0){ol&&!d&&Qs(r,i,0,!1);break}else if(g===6)Qs(r,i,0,!Xs);else{if(o=r.current.alternate,y&&!B2(o)){g=gm(r,i,!1),y=!1;continue}if(g===2){if(y=i,r.errorRecoveryDisabledLanes&y)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var A=r;g=Bo;var B=A.current.memoizedState.isDehydrated;if(B&&(ul(A,S).flags|=256),S=gm(A,S,!1),S!==2){if(im&&!B){A.errorRecoveryDisabledLanes|=y,bi|=y,g=4;break e}y=vs,vs=g,y!==null&&hm(y)}g=S}if(y=!1,g!==2)continue}}if(g===1){ul(r,0),Qs(r,i,0,!0);break}e:{switch(d=r,g){case 0:case 1:throw Error(a(345));case 4:if((i&4194176)===i){Qs(d,i,Vr,!Xs);break e}break;case 2:vs=null;break;case 3:case 5:break;default:throw Error(a(329))}if(d.finishedWork=o,d.finishedLanes=i,(i&62914560)===i&&(y=cm+300-St(),10<y)){if(Qs(d,i,Vr,!Xs),J(d,0)!==0)break e;d.timeoutHandle=Fb(wb.bind(null,d,o,vs,Bu,om,i,Vr,bi,cl,Xs,2,-0,0),y);break e}wb(d,o,vs,Bu,om,i,Vr,bi,cl,Xs,0,-0,0)}}break}while(!0);ys(r)}function hm(r){vs===null?vs=r:vs.push.apply(vs,r)}function wb(r,i,o,d,g,y,S,A,B,Z,me,je,oe){var he=i.subtreeFlags;if((he&8192||(he&16785408)===16785408)&&(Xo={stylesheets:null,count:0,unsuspend:jC},db(i),i=_C(),i!==null)){r.cancelPendingCommit=i(Rb.bind(null,r,o,d,g,S,A,B,1,je,oe)),Qs(r,y,S,!Z);return}Rb(r,o,d,g,S,A,B,me,je,oe)}function B2(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var d=0;d<o.length;d++){var g=o[d],y=g.getSnapshot;g=g.value;try{if(!jr(y(),g))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qs(r,i,o,d){i&=~lm,i&=~bi,r.suspendedLanes|=i,r.pingedLanes&=~i,d&&(r.warmLanes|=i),d=r.expirationTimes;for(var g=i;0<g;){var y=31-gn(g),S=1<<y;d[y]=-1,g&=~S}o!==0&&ct(r,o,i)}function qu(){return(hn&6)===0?(Fo(0),!1):!0}function mm(){if(bt!==null){if(rn===0)var r=bt.return;else r=bt,qs=gi=null,bh(r),Zi=null,_o=0,r=bt;for(;r!==null;)vb(r.alternate,r),r=r.return;bt=null}}function ul(r,i){r.finishedWork=null,r.finishedLanes=0;var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,iC(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),mm(),nn=r,bt=o=Ta(r.current,null),Tt=i,rn=0,Sr=null,Xs=!1,ol=ve(r,i),im=!1,cl=Vr=lm=bi=Ma=vn=0,vs=Bo=null,om=!1,(i&8)!==0&&(i|=i&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=i;0<d;){var g=31-gn(d),y=1<<g;i|=r[g],d&=~y}return Ks=i,hu(),o}function jb(r,i){pt=null,U.H=xs,i===jo?(i=Iv(),rn=3):i===Ov?(i=Iv(),rn=4):rn=i===Py?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Sr=i,bt===null&&(vn=1,Du(r,zr(i,r.current)))}function Nb(){var r=U.H;return U.H=xs,r===null?xs:r}function _b(){var r=U.A;return U.A=U2,r}function pm(){vn=4,Xs||(Tt&4194176)!==Tt&&Br.current!==null||(ol=!0),(Ma&134217727)===0&&(bi&134217727)===0||nn===null||Qs(nn,Tt,Vr,!1)}function gm(r,i,o){var d=hn;hn|=2;var g=Nb(),y=_b();(nn!==r||Tt!==i)&&(Bu=null,ul(r,i)),i=!1;var S=vn;e:do try{if(rn!==0&&bt!==null){var A=bt,B=Sr;switch(rn){case 8:mm(),S=6;break e;case 3:case 2:case 6:Br.current===null&&(i=!0);var Z=rn;if(rn=0,Sr=null,dl(r,A,B,Z),o&&ol){S=0;break e}break;default:Z=rn,rn=0,Sr=null,dl(r,A,B,Z)}}H2(),S=vn;break}catch(me){jb(r,me)}while(!0);return i&&r.shellSuspendCounter++,qs=gi=null,hn=d,U.H=g,U.A=y,bt===null&&(nn=null,Tt=0,hu()),S}function H2(){for(;bt!==null;)Sb(bt)}function q2(r,i){var o=hn;hn|=2;var d=Nb(),g=_b();nn!==r||Tt!==i?(Bu=null,$u=St()+500,ul(r,i)):ol=ve(r,i);e:do try{if(rn!==0&&bt!==null){i=bt;var y=Sr;t:switch(rn){case 1:rn=0,Sr=null,dl(r,i,y,1);break;case 2:if(Pv(y)){rn=0,Sr=null,Eb(i);break}i=function(){rn===2&&nn===r&&(rn=7),ys(r)},y.then(i,i);break e;case 3:rn=7;break e;case 4:rn=5;break e;case 7:Pv(y)?(rn=0,Sr=null,Eb(i)):(rn=0,Sr=null,dl(r,i,y,7));break;case 5:var S=null;switch(bt.tag){case 26:S=bt.memoizedState;case 5:case 27:var A=bt;if(!S||t0(S)){rn=0,Sr=null;var B=A.sibling;if(B!==null)bt=B;else{var Z=A.return;Z!==null?(bt=Z,Fu(Z)):bt=null}break t}}rn=0,Sr=null,dl(r,i,y,5);break;case 6:rn=0,Sr=null,dl(r,i,y,6);break;case 8:mm(),vn=6;break e;default:throw Error(a(462))}}F2();break}catch(me){jb(r,me)}while(!0);return qs=gi=null,U.H=d,U.A=g,hn=o,bt!==null?0:(nn=null,Tt=0,hu(),vn)}function F2(){for(;bt!==null&&!Fe();)Sb(bt)}function Sb(r){var i=Gy(r.alternate,r,Ks);r.memoizedProps=r.pendingProps,i===null?Fu(r):bt=i}function Eb(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=By(o,i,i.pendingProps,i.type,void 0,Tt);break;case 11:i=By(o,i,i.pendingProps,i.type.render,i.ref,Tt);break;case 5:bh(i);default:vb(o,i),i=bt=pb(i,Ks),i=Gy(o,i,Ks)}r.memoizedProps=r.pendingProps,i===null?Fu(r):bt=i}function dl(r,i,o,d){qs=gi=null,bh(i),Zi=null,_o=0;var g=i.return;try{if(k2(r,g,i,o,Tt)){vn=1,Du(r,zr(o,r.current)),bt=null;return}}catch(y){if(g!==null)throw bt=g,y;vn=1,Du(r,zr(o,r.current)),bt=null;return}i.flags&32768?($t||d===1?r=!0:ol||(Tt&536870912)!==0?r=!1:(Xs=r=!0,(d===2||d===3||d===6)&&(d=Br.current,d!==null&&d.tag===13&&(d.flags|=16384))),Cb(i,r)):Fu(i)}function Fu(r){var i=r;do{if((i.flags&32768)!==0){Cb(i,Xs);return}r=i.return;var o=I2(i.alternate,i,Ks);if(o!==null){bt=o;return}if(i=i.sibling,i!==null){bt=i;return}bt=i=r}while(i!==null);vn===0&&(vn=5)}function Cb(r,i){do{var o=z2(r.alternate,r);if(o!==null){o.flags&=32767,bt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){bt=r;return}bt=r=o}while(r!==null);vn=6,bt=null}function Rb(r,i,o,d,g,y,S,A,B,Z){var me=U.T,je=D.p;try{D.p=2,U.T=null,V2(r,i,o,d,je,g,y,S,A,B,Z)}finally{U.T=me,D.p=je}}function V2(r,i,o,d,g,y,S,A){do fl();while(wi!==null);if((hn&6)!==0)throw Error(a(327));var B=r.finishedWork;if(d=r.finishedLanes,B===null)return null;if(r.finishedWork=null,r.finishedLanes=0,B===r.current)throw Error(a(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var Z=B.lanes|B.childLanes;if(Z|=ah,mt(r,d,Z,y,S,A),r===nn&&(bt=nn=null,Tt=0),(B.subtreeFlags&10256)===0&&(B.flags&10256)===0||Hu||(Hu=!0,um=Z,dm=o,X2(en,function(){return fl(),null})),o=(B.flags&15990)!==0,(B.subtreeFlags&15990)!==0||o?(o=U.T,U.T=null,y=D.p,D.p=2,S=hn,hn|=4,O2(r,B),ob(B,r),p2(Rm,r.containerInfo),nd=!!Cm,Rm=Cm=null,r.current=B,sb(r,B.alternate,B),wt(),hn=S,D.p=y,U.T=o):r.current=B,Hu?(Hu=!1,wi=r,Ho=d):Tb(r,Z),Z=r.pendingLanes,Z===0&&(Aa=null),sr(B.stateNode),ys(r),i!==null)for(g=r.onRecoverableError,B=0;B<i.length;B++)Z=i[B],g(Z.value,{componentStack:Z.stack});return(Ho&3)!==0&&fl(),Z=r.pendingLanes,(d&4194218)!==0&&(Z&42)!==0?r===fm?qo++:(qo=0,fm=r):qo=0,Fo(0),null}function Tb(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Eo(i)))}function fl(){if(wi!==null){var r=wi,i=um;um=0;var o=Ot(Ho),d=U.T,g=D.p;try{if(D.p=32>o?32:o,U.T=null,wi===null)var y=!1;else{o=dm,dm=null;var S=wi,A=Ho;if(wi=null,Ho=0,(hn&6)!==0)throw Error(a(331));var B=hn;if(hn|=4,hb(S.current),ub(S,S.current,A,o),hn=B,Fo(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(tn,S)}catch{}y=!0}return y}finally{D.p=g,U.T=d,Tb(r,i)}}return!1}function Mb(r,i,o){i=zr(o,i),i=Oh(r.stateNode,i,2),r=Sa(r,i,2),r!==null&&(Ge(r,2),ys(r))}function Jt(r,i,o){if(r.tag===3)Mb(r,r,o);else for(;i!==null;){if(i.tag===3){Mb(i,r,o);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Aa===null||!Aa.has(d))){r=zr(o,r),o=Dy(2),d=Sa(i,o,2),d!==null&&(Oy(o,d,i,r),Ge(d,2),ys(d));break}}i=i.return}}function xm(r,i,o){var d=r.pingCache;if(d===null){d=r.pingCache=new $2;var g=new Set;d.set(i,g)}else g=d.get(i),g===void 0&&(g=new Set,d.set(i,g));g.has(o)||(im=!0,g.add(o),r=Y2.bind(null,r,i,o),i.then(r,r))}function Y2(r,i,o){var d=r.pingCache;d!==null&&d.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,nn===r&&(Tt&o)===o&&(vn===4||vn===3&&(Tt&62914560)===Tt&&300>St()-cm?(hn&2)===0&&ul(r,0):lm|=o,cl===Tt&&(cl=0)),ys(r)}function Ab(r,i){i===0&&(i=He()),r=xa(r,i),r!==null&&(Ge(r,i),ys(r))}function G2(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),Ab(r,o)}function W2(r,i){var o=0;switch(r.tag){case 13:var d=r.stateNode,g=r.memoizedState;g!==null&&(o=g.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(a(314))}d!==null&&d.delete(i),Ab(r,o)}function X2(r,i){return Oe(r,i)}var Vu=null,hl=null,vm=!1,Yu=!1,ym=!1,ji=0;function ys(r){r!==hl&&r.next===null&&(hl===null?Vu=hl=r:hl=hl.next=r),Yu=!0,vm||(vm=!0,Q2(K2))}function Fo(r,i){if(!ym&&Yu){ym=!0;do for(var o=!1,d=Vu;d!==null;){if(r!==0){var g=d.pendingLanes;if(g===0)var y=0;else{var S=d.suspendedLanes,A=d.pingedLanes;y=(1<<31-gn(42|r)+1)-1,y&=g&~(S&~A),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(o=!0,Ob(d,y))}else y=Tt,y=J(d,d===nn?y:0),(y&3)===0||ve(d,y)||(o=!0,Ob(d,y));d=d.next}while(o);ym=!1}}function K2(){Yu=vm=!1;var r=0;ji!==0&&(aC()&&(r=ji),ji=0);for(var i=St(),o=null,d=Vu;d!==null;){var g=d.next,y=kb(d,i);y===0?(d.next=null,o===null?Vu=g:o.next=g,g===null&&(hl=o)):(o=d,(r!==0||(y&3)!==0)&&(Yu=!0)),d=g}Fo(r)}function kb(r,i){for(var o=r.suspendedLanes,d=r.pingedLanes,g=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var S=31-gn(y),A=1<<S,B=g[S];B===-1?((A&o)===0||(A&d)!==0)&&(g[S]=_e(A,i)):B<=i&&(r.expiredLanes|=A),y&=~A}if(i=nn,o=Tt,o=J(r,r===i?o:0),d=r.callbackNode,o===0||r===i&&rn===2||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Xe(d),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||ve(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(d!==null&&Xe(d),Ot(o)){case 2:case 8:o=nt;break;case 32:o=en;break;case 268435456:o=Tn;break;default:o=en}return d=Db.bind(null,r),o=Oe(o,d),r.callbackPriority=i,r.callbackNode=o,i}return d!==null&&d!==null&&Xe(d),r.callbackPriority=2,r.callbackNode=null,2}function Db(r,i){var o=r.callbackNode;if(fl()&&r.callbackNode!==o)return null;var d=Tt;return d=J(r,r===nn?d:0),d===0?null:(bb(r,d,i),kb(r,St()),r.callbackNode!=null&&r.callbackNode===o?Db.bind(null,r):null)}function Ob(r,i){if(fl())return null;bb(r,i,!0)}function Q2(r){lC(function(){(hn&6)!==0?Oe(Be,r):r()})}function bm(){return ji===0&&(ji=ke()),ji}function Pb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:iu(""+r)}function Lb(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function Z2(r,i,o,d,g){if(i==="submit"&&o&&o.stateNode===g){var y=Pb((g[_n]||null).action),S=d.submitter;S&&(i=(i=S[_n]||null)?Pb(i.formAction):S.getAttribute("formAction"),i!==null&&(y=i,S=null));var A=new uu("action","action",null,d,g);r.push({event:A,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ji!==0){var B=S?Lb(g,S):new FormData(g);Th(o,{pending:!0,data:B,method:g.method,action:y},null,B)}}else typeof y=="function"&&(A.preventDefault(),B=S?Lb(g,S):new FormData(g),Th(o,{pending:!0,data:B,method:g.method,action:y},y,B))},currentTarget:g}]})}}for(var wm=0;wm<Rv.length;wm++){var jm=Rv[wm],J2=jm.toLowerCase(),eC=jm[0].toUpperCase()+jm.slice(1);es(J2,"on"+eC)}es(Nv,"onAnimationEnd"),es(_v,"onAnimationIteration"),es(Sv,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(x2,"onTransitionRun"),es(v2,"onTransitionStart"),es(y2,"onTransitionCancel"),es(Ev,"onTransitionEnd"),$i("onMouseEnter",["mouseout","mouseover"]),$i("onMouseLeave",["mouseout","mouseover"]),$i("onPointerEnter",["pointerout","pointerover"]),$i("onPointerLeave",["pointerout","pointerover"]),ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vo));function Ib(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var d=r[o],g=d.event;d=d.listeners;e:{var y=void 0;if(i)for(var S=d.length-1;0<=S;S--){var A=d[S],B=A.instance,Z=A.currentTarget;if(A=A.listener,B!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=Z;try{y(g)}catch(me){ku(me)}g.currentTarget=null,y=B}else for(S=0;S<d.length;S++){if(A=d[S],B=A.instance,Z=A.currentTarget,A=A.listener,B!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=Z;try{y(g)}catch(me){ku(me)}g.currentTarget=null,y=B}}}}function Et(r,i){var o=i[Ee];o===void 0&&(o=i[Ee]=new Set);var d=r+"__bubble";o.has(d)||(zb(i,r,2,!1),o.add(d))}function Nm(r,i,o){var d=0;i&&(d|=4),zb(o,r,d,i)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function _m(r){if(!r[Gu]){r[Gu]=!0,Bx.forEach(function(o){o!=="selectionchange"&&(tC.has(o)||Nm(o,!1,r),Nm(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Gu]||(i[Gu]=!0,Nm("selectionchange",!1,i))}}function zb(r,i,o,d){switch(l0(i)){case 2:var g=CC;break;case 8:g=RC;break;default:g=Im}o=g.bind(null,i,o,r),g=void 0,!Yf||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),d?g!==void 0?r.addEventListener(i,o,{capture:!0,passive:g}):r.addEventListener(i,o,!0):g!==void 0?r.addEventListener(i,o,{passive:g}):r.addEventListener(i,o,!1)}function Sm(r,i,o,d,g){var y=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var A=d.stateNode.containerInfo;if(A===g||A.nodeType===8&&A.parentNode===g)break;if(S===4)for(S=d.return;S!==null;){var B=S.tag;if((B===3||B===4)&&(B=S.stateNode.containerInfo,B===g||B.nodeType===8&&B.parentNode===g))return;S=S.return}for(;A!==null;){if(S=Pn(A),S===null)return;if(B=S.tag,B===5||B===6||B===26||B===27){d=y=S;continue e}A=A.parentNode}}d=d.return}Jx(function(){var Z=y,me=Ff(o),je=[];e:{var oe=Cv.get(r);if(oe!==void 0){var he=uu,qe=r;switch(r){case"keypress":if(ou(o)===0)break e;case"keydown":case"keyup":he=WE;break;case"focusin":qe="focus",he=Kf;break;case"focusout":qe="blur",he=Kf;break;case"beforeblur":case"afterblur":he=Kf;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=nv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=LE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=QE;break;case Nv:case _v:case Sv:he=UE;break;case Ev:he=JE;break;case"scroll":case"scrollend":he=OE;break;case"wheel":he=t2;break;case"copy":case"cut":case"paste":he=BE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=sv;break;case"toggle":case"beforetoggle":he=r2}var st=(i&4)!==0,yn=!st&&(r==="scroll"||r==="scrollend"),se=st?oe!==null?oe+"Capture":null:oe;st=[];for(var Q=Z,le;Q!==null;){var ye=Q;if(le=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||le===null||se===null||(ye=co(Q,se),ye!=null&&st.push(Yo(Q,ye,le))),yn)break;Q=Q.return}0<st.length&&(oe=new he(oe,qe,null,o,me),je.push({event:oe,listeners:st}))}}if((i&7)===0){e:{if(oe=r==="mouseover"||r==="pointerover",he=r==="mouseout"||r==="pointerout",oe&&o!==qf&&(qe=o.relatedTarget||o.fromElement)&&(Pn(qe)||qe[fe]))break e;if((he||oe)&&(oe=me.window===me?me:(oe=me.ownerDocument)?oe.defaultView||oe.parentWindow:window,he?(qe=o.relatedTarget||o.toElement,he=Z,qe=qe?Pn(qe):null,qe!==null&&(yn=V(qe),st=qe.tag,qe!==yn||st!==5&&st!==27&&st!==6)&&(qe=null)):(he=null,qe=Z),he!==qe)){if(st=nv,ye="onMouseLeave",se="onMouseEnter",Q="mouse",(r==="pointerout"||r==="pointerover")&&(st=sv,ye="onPointerLeave",se="onPointerEnter",Q="pointer"),yn=he==null?oe:pa(he),le=qe==null?oe:pa(qe),oe=new st(ye,Q+"leave",he,o,me),oe.target=yn,oe.relatedTarget=le,ye=null,Pn(me)===Z&&(st=new st(se,Q+"enter",qe,o,me),st.target=le,st.relatedTarget=yn,ye=st),yn=ye,he&&qe)t:{for(st=he,se=qe,Q=0,le=st;le;le=ml(le))Q++;for(le=0,ye=se;ye;ye=ml(ye))le++;for(;0<Q-le;)st=ml(st),Q--;for(;0<le-Q;)se=ml(se),le--;for(;Q--;){if(st===se||se!==null&&st===se.alternate)break t;st=ml(st),se=ml(se)}st=null}else st=null;he!==null&&Ub(je,oe,he,st,!1),qe!==null&&yn!==null&&Ub(je,yn,qe,st,!0)}}e:{if(oe=Z?pa(Z):window,he=oe.nodeName&&oe.nodeName.toLowerCase(),he==="select"||he==="input"&&oe.type==="file")var ze=fv;else if(uv(oe))if(hv)ze=h2;else{ze=d2;var vt=u2}else he=oe.nodeName,!he||he.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?Z&&Hf(Z.elementType)&&(ze=fv):ze=f2;if(ze&&(ze=ze(r,Z))){dv(je,ze,o,me);break e}vt&&vt(r,oe,Z),r==="focusout"&&Z&&oe.type==="number"&&Z.memoizedProps.value!=null&&Bf(oe,"number",oe.value)}switch(vt=Z?pa(Z):window,r){case"focusin":(uv(vt)||vt.contentEditable==="true")&&(Yi=vt,nh=Z,vo=null);break;case"focusout":vo=nh=Yi=null;break;case"mousedown":rh=!0;break;case"contextmenu":case"mouseup":case"dragend":rh=!1,wv(je,o,me);break;case"selectionchange":if(g2)break;case"keydown":case"keyup":wv(je,o,me)}var Ve;if(Zf)e:{switch(r){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Vi?ov(r,o)&&(Ke="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Ke="onCompositionStart");Ke&&(av&&o.locale!=="ko"&&(Vi||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Vi&&(Ve=ev()):(ga=me,Gf="value"in ga?ga.value:ga.textContent,Vi=!0)),vt=Wu(Z,Ke),0<vt.length&&(Ke=new rv(Ke,r,null,o,me),je.push({event:Ke,listeners:vt}),Ve?Ke.data=Ve:(Ve=cv(o),Ve!==null&&(Ke.data=Ve)))),(Ve=a2?i2(r,o):l2(r,o))&&(Ke=Wu(Z,"onBeforeInput"),0<Ke.length&&(vt=new rv("onBeforeInput","beforeinput",null,o,me),je.push({event:vt,listeners:Ke}),vt.data=Ve)),Z2(je,r,Z,o,me)}Ib(je,i)})}function Yo(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Wu(r,i){for(var o=i+"Capture",d=[];r!==null;){var g=r,y=g.stateNode;g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=co(r,o),g!=null&&d.unshift(Yo(r,g,y)),g=co(r,i),g!=null&&d.push(Yo(r,g,y))),r=r.return}return d}function ml(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Ub(r,i,o,d,g){for(var y=i._reactName,S=[];o!==null&&o!==d;){var A=o,B=A.alternate,Z=A.stateNode;if(A=A.tag,B!==null&&B===d)break;A!==5&&A!==26&&A!==27||Z===null||(B=Z,g?(Z=co(o,y),Z!=null&&S.unshift(Yo(o,Z,B))):g||(Z=co(o,y),Z!=null&&S.push(Yo(o,Z,B)))),o=o.return}S.length!==0&&r.push({event:i,listeners:S})}var nC=/\r\n?/g,rC=/\u0000|\uFFFD/g;function $b(r){return(typeof r=="string"?r:""+r).replace(nC,`
`).replace(rC,"")}function Bb(r,i){return i=$b(i),$b(r)===i}function Xu(){}function Qt(r,i,o,d,g,y){switch(o){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||Hi(r,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&Hi(r,""+d);break;case"className":ru(r,"class",d);break;case"tabIndex":ru(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ru(r,o,d);break;case"style":Qx(r,d,y);break;case"data":if(i!=="object"){ru(r,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(o);break}d=iu(""+d),r.setAttribute(o,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&Qt(r,i,"name",g.name,g,null),Qt(r,i,"formEncType",g.formEncType,g,null),Qt(r,i,"formMethod",g.formMethod,g,null),Qt(r,i,"formTarget",g.formTarget,g,null)):(Qt(r,i,"encType",g.encType,g,null),Qt(r,i,"method",g.method,g,null),Qt(r,i,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(o);break}d=iu(""+d),r.setAttribute(o,d);break;case"onClick":d!=null&&(r.onclick=Xu);break;case"onScroll":d!=null&&Et("scroll",r);break;case"onScrollEnd":d!=null&&Et("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(o=d.__html,o!=null){if(g.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}o=iu(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(o,""+d):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":d===!0?r.setAttribute(o,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(o,d):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(o,d):r.removeAttribute(o);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(o):r.setAttribute(o,d);break;case"popover":Et("beforetoggle",r),Et("toggle",r),nu(r,"popover",d);break;case"xlinkActuate":Is(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Is(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Is(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Is(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Is(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Is(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Is(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Is(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Is(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":nu(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=kE.get(o)||o,nu(r,o,d))}}function Em(r,i,o,d,g,y){switch(o){case"style":Qx(r,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(o=d.__html,o!=null){if(g.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof d=="string"?Hi(r,d):(typeof d=="number"||typeof d=="bigint")&&Hi(r,""+d);break;case"onScroll":d!=null&&Et("scroll",r);break;case"onScrollEnd":d!=null&&Et("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hx.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),i=o.slice(2,g?o.length-7:void 0),y=r[_n]||null,y=y!=null?y[o]:null,typeof y=="function"&&r.removeEventListener(i,y,g),typeof d=="function")){typeof y!="function"&&y!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,d,g);break e}o in r?r[o]=d:d===!0?r.setAttribute(o,""):nu(r,o,d)}}}function Gn(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",r),Et("load",r);var d=!1,g=!1,y;for(y in o)if(o.hasOwnProperty(y)){var S=o[y];if(S!=null)switch(y){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Qt(r,i,y,S,o,null)}}g&&Qt(r,i,"srcSet",o.srcSet,o,null),d&&Qt(r,i,"src",o.src,o,null);return;case"input":Et("invalid",r);var A=y=S=g=null,B=null,Z=null;for(d in o)if(o.hasOwnProperty(d)){var me=o[d];if(me!=null)switch(d){case"name":g=me;break;case"type":S=me;break;case"checked":B=me;break;case"defaultChecked":Z=me;break;case"value":y=me;break;case"defaultValue":A=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(a(137,i));break;default:Qt(r,i,d,me,o,null)}}Gx(r,y,A,B,Z,S,g,!1),su(r);return;case"select":Et("invalid",r),d=S=y=null;for(g in o)if(o.hasOwnProperty(g)&&(A=o[g],A!=null))switch(g){case"value":y=A;break;case"defaultValue":S=A;break;case"multiple":d=A;default:Qt(r,i,g,A,o,null)}i=y,o=S,r.multiple=!!d,i!=null?Bi(r,!!d,i,!1):o!=null&&Bi(r,!!d,o,!0);return;case"textarea":Et("invalid",r),y=g=d=null;for(S in o)if(o.hasOwnProperty(S)&&(A=o[S],A!=null))switch(S){case"value":d=A;break;case"defaultValue":g=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:Qt(r,i,S,A,o,null)}Xx(r,d,g,y),su(r);return;case"option":for(B in o)if(o.hasOwnProperty(B)&&(d=o[B],d!=null))switch(B){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Qt(r,i,B,d,o,null)}return;case"dialog":Et("cancel",r),Et("close",r);break;case"iframe":case"object":Et("load",r);break;case"video":case"audio":for(d=0;d<Vo.length;d++)Et(Vo[d],r);break;case"image":Et("error",r),Et("load",r);break;case"details":Et("toggle",r);break;case"embed":case"source":case"link":Et("error",r),Et("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(d=o[Z],d!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Qt(r,i,Z,d,o,null)}return;default:if(Hf(i)){for(me in o)o.hasOwnProperty(me)&&(d=o[me],d!==void 0&&Em(r,i,me,d,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(d=o[A],d!=null&&Qt(r,i,A,d,o,null))}function sC(r,i,o,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,S=null,A=null,B=null,Z=null,me=null;for(he in o){var je=o[he];if(o.hasOwnProperty(he)&&je!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":B=je;default:d.hasOwnProperty(he)||Qt(r,i,he,null,d,je)}}for(var oe in d){var he=d[oe];if(je=o[oe],d.hasOwnProperty(oe)&&(he!=null||je!=null))switch(oe){case"type":y=he;break;case"name":g=he;break;case"checked":Z=he;break;case"defaultChecked":me=he;break;case"value":S=he;break;case"defaultValue":A=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(a(137,i));break;default:he!==je&&Qt(r,i,oe,he,d,je)}}$f(r,S,A,B,Z,me,y,g);return;case"select":he=S=A=oe=null;for(y in o)if(B=o[y],o.hasOwnProperty(y)&&B!=null)switch(y){case"value":break;case"multiple":he=B;default:d.hasOwnProperty(y)||Qt(r,i,y,null,d,B)}for(g in d)if(y=d[g],B=o[g],d.hasOwnProperty(g)&&(y!=null||B!=null))switch(g){case"value":oe=y;break;case"defaultValue":A=y;break;case"multiple":S=y;default:y!==B&&Qt(r,i,g,y,d,B)}i=A,o=S,d=he,oe!=null?Bi(r,!!o,oe,!1):!!d!=!!o&&(i!=null?Bi(r,!!o,i,!0):Bi(r,!!o,o?[]:"",!1));return;case"textarea":he=oe=null;for(A in o)if(g=o[A],o.hasOwnProperty(A)&&g!=null&&!d.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Qt(r,i,A,null,d,g)}for(S in d)if(g=d[S],y=o[S],d.hasOwnProperty(S)&&(g!=null||y!=null))switch(S){case"value":oe=g;break;case"defaultValue":he=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(a(91));break;default:g!==y&&Qt(r,i,S,g,d,y)}Wx(r,oe,he);return;case"option":for(var qe in o)if(oe=o[qe],o.hasOwnProperty(qe)&&oe!=null&&!d.hasOwnProperty(qe))switch(qe){case"selected":r.selected=!1;break;default:Qt(r,i,qe,null,d,oe)}for(B in d)if(oe=d[B],he=o[B],d.hasOwnProperty(B)&&oe!==he&&(oe!=null||he!=null))switch(B){case"selected":r.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:Qt(r,i,B,oe,d,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in o)oe=o[st],o.hasOwnProperty(st)&&oe!=null&&!d.hasOwnProperty(st)&&Qt(r,i,st,null,d,oe);for(Z in d)if(oe=d[Z],he=o[Z],d.hasOwnProperty(Z)&&oe!==he&&(oe!=null||he!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,i));break;default:Qt(r,i,Z,oe,d,he)}return;default:if(Hf(i)){for(var yn in o)oe=o[yn],o.hasOwnProperty(yn)&&oe!==void 0&&!d.hasOwnProperty(yn)&&Em(r,i,yn,void 0,d,oe);for(me in d)oe=d[me],he=o[me],!d.hasOwnProperty(me)||oe===he||oe===void 0&&he===void 0||Em(r,i,me,oe,d,he);return}}for(var se in o)oe=o[se],o.hasOwnProperty(se)&&oe!=null&&!d.hasOwnProperty(se)&&Qt(r,i,se,null,d,oe);for(je in d)oe=d[je],he=o[je],!d.hasOwnProperty(je)||oe===he||oe==null&&he==null||Qt(r,i,je,oe,d,he)}var Cm=null,Rm=null;function Ku(r){return r.nodeType===9?r:r.ownerDocument}function Hb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qb(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Tm(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Mm=null;function aC(){var r=window.event;return r&&r.type==="popstate"?r===Mm?!1:(Mm=r,!0):(Mm=null,!1)}var Fb=typeof setTimeout=="function"?setTimeout:void 0,iC=typeof clearTimeout=="function"?clearTimeout:void 0,Vb=typeof Promise=="function"?Promise:void 0,lC=typeof queueMicrotask=="function"?queueMicrotask:typeof Vb<"u"?function(r){return Vb.resolve(null).then(r).catch(oC)}:Fb;function oC(r){setTimeout(function(){throw r})}function Am(r,i){var o=i,d=0;do{var g=o.nextSibling;if(r.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(d===0){r.removeChild(g),ec(i);return}d--}else o!=="$"&&o!=="$?"&&o!=="$!"||d++;o=g}while(o);ec(i)}function km(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":km(o),fr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function cC(r,i,o,d){for(;r.nodeType===1;){var g=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[Fn])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==g.rel||r.getAttribute("href")!==(g.href==null?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=rs(r.nextSibling),r===null)break}return null}function uC(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=rs(r.nextSibling),r===null))return null;return r}function rs(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}function Yb(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}function Gb(r,i,o){switch(i=Ku(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}var Yr=new Map,Wb=new Set;function Qu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Zs=D.d;D.d={f:dC,r:fC,D:hC,C:mC,L:pC,m:gC,X:vC,S:xC,M:yC};function dC(){var r=Zs.f(),i=qu();return r||i}function fC(r){var i=Pt(r);i!==null&&i.tag===5&&i.type==="form"?wy(i):Zs.r(r)}var pl=typeof document>"u"?null:document;function Xb(r,i,o){var d=pl;if(d&&typeof i=="string"&&i){var g=Lr(i);g='link[rel="'+r+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),Wb.has(g)||(Wb.add(g),r={rel:r,crossOrigin:o,href:i},d.querySelector(g)===null&&(i=d.createElement("link"),Gn(i,"link",r),Sn(i),d.head.appendChild(i)))}}function hC(r){Zs.D(r),Xb("dns-prefetch",r,null)}function mC(r,i){Zs.C(r,i),Xb("preconnect",r,i)}function pC(r,i,o){Zs.L(r,i,o);var d=pl;if(d&&r&&i){var g='link[rel="preload"][as="'+Lr(i)+'"]';i==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Lr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Lr(o.imageSizes)+'"]')):g+='[href="'+Lr(r)+'"]';var y=g;switch(i){case"style":y=gl(r);break;case"script":y=xl(r)}Yr.has(y)||(r=G({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Yr.set(y,r),d.querySelector(g)!==null||i==="style"&&d.querySelector(Go(y))||i==="script"&&d.querySelector(Wo(y))||(i=d.createElement("link"),Gn(i,"link",r),Sn(i),d.head.appendChild(i)))}}function gC(r,i){Zs.m(r,i);var o=pl;if(o&&r){var d=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Lr(d)+'"][href="'+Lr(r)+'"]',y=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=xl(r)}if(!Yr.has(y)&&(r=G({rel:"modulepreload",href:r},i),Yr.set(y,r),o.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Wo(y)))return}d=o.createElement("link"),Gn(d,"link",r),Sn(d),o.head.appendChild(d)}}}function xC(r,i,o){Zs.S(r,i,o);var d=pl;if(d&&r){var g=Ps(d).hoistableStyles,y=gl(r);i=i||"default";var S=g.get(y);if(!S){var A={loading:0,preload:null};if(S=d.querySelector(Go(y)))A.loading=5;else{r=G({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Yr.get(y))&&Dm(r,o);var B=S=d.createElement("link");Sn(B),Gn(B,"link",r),B._p=new Promise(function(Z,me){B.onload=Z,B.onerror=me}),B.addEventListener("load",function(){A.loading|=1}),B.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Zu(S,i,d)}S={type:"stylesheet",instance:S,count:1,state:A},g.set(y,S)}}}function vC(r,i){Zs.X(r,i);var o=pl;if(o&&r){var d=Ps(o).hoistableScripts,g=xl(r),y=d.get(g);y||(y=o.querySelector(Wo(g)),y||(r=G({src:r,async:!0},i),(i=Yr.get(g))&&Om(r,i),y=o.createElement("script"),Sn(y),Gn(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function yC(r,i){Zs.M(r,i);var o=pl;if(o&&r){var d=Ps(o).hoistableScripts,g=xl(r),y=d.get(g);y||(y=o.querySelector(Wo(g)),y||(r=G({src:r,async:!0,type:"module"},i),(i=Yr.get(g))&&Om(r,i),y=o.createElement("script"),Sn(y),Gn(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function Kb(r,i,o,d){var g=(g=it.current)?Qu(g):null;if(!g)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=gl(o.href),o=Ps(g).hoistableStyles,d=o.get(i),d||(d={type:"style",instance:null,count:0,state:null},o.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=gl(o.href);var y=Ps(g).hoistableStyles,S=y.get(r);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,S),(y=g.querySelector(Go(r)))&&!y._p&&(S.instance=y,S.state.loading=5),Yr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Yr.set(r,o),y||bC(g,r,o,S.state))),i&&d===null)throw Error(a(528,""));return S}if(i&&d!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=xl(o),o=Ps(g).hoistableScripts,d=o.get(i),d||(d={type:"script",instance:null,count:0,state:null},o.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function gl(r){return'href="'+Lr(r)+'"'}function Go(r){return'link[rel="stylesheet"]['+r+"]"}function Qb(r){return G({},r,{"data-precedence":r.precedence,precedence:null})}function bC(r,i,o,d){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=r.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),Gn(i,"link",o),Sn(i),r.head.appendChild(i))}function xl(r){return'[src="'+Lr(r)+'"]'}function Wo(r){return"script[async]"+r}function Zb(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var d=r.querySelector('style[data-href~="'+Lr(o.href)+'"]');if(d)return i.instance=d,Sn(d),d;var g=G({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),Sn(d),Gn(d,"style",g),Zu(d,o.precedence,r),i.instance=d;case"stylesheet":g=gl(o.href);var y=r.querySelector(Go(g));if(y)return i.state.loading|=4,i.instance=y,Sn(y),y;d=Qb(o),(g=Yr.get(g))&&Dm(d,g),y=(r.ownerDocument||r).createElement("link"),Sn(y);var S=y;return S._p=new Promise(function(A,B){S.onload=A,S.onerror=B}),Gn(y,"link",d),i.state.loading|=4,Zu(y,o.precedence,r),i.instance=y;case"script":return y=xl(o.src),(g=r.querySelector(Wo(y)))?(i.instance=g,Sn(g),g):(d=o,(g=Yr.get(y))&&(d=G({},o),Om(d,g)),r=r.ownerDocument||r,g=r.createElement("script"),Sn(g),Gn(g,"link",d),r.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,Zu(d,o.precedence,r));return i.instance}function Zu(r,i,o){for(var d=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,y=g,S=0;S<d.length;S++){var A=d[S];if(A.dataset.precedence===i)y=A;else if(y!==g)break}y?y.parentNode.insertBefore(r,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Dm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Om(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Ju=null;function Jb(r,i,o){if(Ju===null){var d=new Map,g=Ju=new Map;g.set(o,d)}else g=Ju,d=g.get(o),d||(d=new Map,g.set(o,d));if(d.has(r))return d;for(d.set(r,null),o=o.getElementsByTagName(r),g=0;g<o.length;g++){var y=o[g];if(!(y[Fn]||y[un]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(i)||"";S=r+S;var A=d.get(S);A?A.push(y):d.set(S,[y])}}return d}function e0(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function wC(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function t0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Xo=null;function jC(){}function NC(r,i,o){if(Xo===null)throw Error(a(475));var d=Xo;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=gl(o.href),y=r.querySelector(Go(g));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(d.count++,d=ed.bind(d),r.then(d,d)),i.state.loading|=4,i.instance=y,Sn(y);return}y=r.ownerDocument||r,o=Qb(o),(g=Yr.get(g))&&Dm(o,g),y=y.createElement("link"),Sn(y);var S=y;S._p=new Promise(function(A,B){S.onload=A,S.onerror=B}),Gn(y,"link",o),i.instance=y}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(d.count++,i=ed.bind(d),r.addEventListener("load",i),r.addEventListener("error",i))}}function _C(){if(Xo===null)throw Error(a(475));var r=Xo;return r.stylesheets&&r.count===0&&Pm(r,r.stylesheets),0<r.count?function(i){var o=setTimeout(function(){if(r.stylesheets&&Pm(r,r.stylesheets),r.unsuspend){var d=r.unsuspend;r.unsuspend=null,d()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(o)}}:null}function ed(){if(this.count--,this.count===0){if(this.stylesheets)Pm(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var td=null;function Pm(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,td=new Map,i.forEach(SC,r),td=null,ed.call(r))}function SC(r,i){if(!(i.state.loading&4)){var o=td.get(r);if(o)var d=o.get(null);else{o=new Map,td.set(r,o);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var S=g[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),d=S)}d&&o.set(null,d)}g=i.instance,S=g.getAttribute("data-precedence"),y=o.get(S)||d,y===d&&o.set(null,g),o.set(S,g),this.count++,d=ed.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),y?y.parentNode.insertBefore(g,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),i.state.loading|=4}}var Ko={$$typeof:w,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function EC(r,i,o,d,g,y,S,A){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ot(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ot(0),this.hiddenUpdates=ot(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function n0(r,i,o,d,g,y,S,A,B,Z,me,je){return r=new EC(r,i,o,S,A,B,Z,je),i=1,y===!0&&(i|=24),y=Fr(3,null,null,i),r.current=y,y.stateNode=r,i=hh(),i.refCount++,r.pooledCache=i,i.refCount++,y.memoizedState={element:d,isDehydrated:o,cache:i},Gh(y),r}function r0(r){return r?(r=Xi,r):Xi}function s0(r,i,o,d,g,y){g=r0(g),d.context===null?d.context=g:d.pendingContext=g,d=_a(i),d.payload={element:o},y=y===void 0?null:y,y!==null&&(d.callback=y),o=Sa(r,d,i),o!==null&&(ir(o,r,i),Do(o,r,i))}function a0(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Lm(r,i){a0(r,i),(r=r.alternate)&&a0(r,i)}function i0(r){if(r.tag===13){var i=xa(r,67108864);i!==null&&ir(i,r,67108864),Lm(r,67108864)}}var nd=!0;function CC(r,i,o,d){var g=U.T;U.T=null;var y=D.p;try{D.p=2,Im(r,i,o,d)}finally{D.p=y,U.T=g}}function RC(r,i,o,d){var g=U.T;U.T=null;var y=D.p;try{D.p=8,Im(r,i,o,d)}finally{D.p=y,U.T=g}}function Im(r,i,o,d){if(nd){var g=zm(d);if(g===null)Sm(r,i,d,rd,o),o0(r,d);else if(MC(g,r,i,o,d))d.stopPropagation();else if(o0(r,d),i&4&&-1<TC.indexOf(r)){for(;g!==null;){var y=Pt(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=lt(y.pendingLanes);if(S!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var B=1<<31-gn(S);A.entanglements[1]|=B,S&=~B}ys(y),(hn&6)===0&&($u=St()+500,Fo(0))}}break;case 13:A=xa(y,2),A!==null&&ir(A,y,2),qu(),Lm(y,2)}if(y=zm(d),y===null&&Sm(r,i,d,rd,o),y===g)break;g=y}g!==null&&d.stopPropagation()}else Sm(r,i,d,null,o)}}function zm(r){return r=Ff(r),Um(r)}var rd=null;function Um(r){if(rd=null,r=Pn(r),r!==null){var i=V(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=te(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return rd=r,null}function l0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vt()){case Be:return 2;case nt:return 8;case en:case On:return 32;case Tn:return 268435456;default:return 32}default:return 32}}var $m=!1,ka=null,Da=null,Oa=null,Qo=new Map,Zo=new Map,Pa=[],TC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o0(r,i){switch(r){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":Da=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":Qo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zo.delete(i.pointerId)}}function Jo(r,i,o,d,g,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:o,eventSystemFlags:d,nativeEvent:y,targetContainers:[g]},i!==null&&(i=Pt(i),i!==null&&i0(i)),r):(r.eventSystemFlags|=d,i=r.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),r)}function MC(r,i,o,d,g){switch(i){case"focusin":return ka=Jo(ka,r,i,o,d,g),!0;case"dragenter":return Da=Jo(Da,r,i,o,d,g),!0;case"mouseover":return Oa=Jo(Oa,r,i,o,d,g),!0;case"pointerover":var y=g.pointerId;return Qo.set(y,Jo(Qo.get(y)||null,r,i,o,d,g)),!0;case"gotpointercapture":return y=g.pointerId,Zo.set(y,Jo(Zo.get(y)||null,r,i,o,d,g)),!0}return!1}function c0(r){var i=Pn(r.target);if(i!==null){var o=V(i);if(o!==null){if(i=o.tag,i===13){if(i=te(o),i!==null){r.blockedOn=i,Zt(r.priority,function(){if(o.tag===13){var d=Er(),g=xa(o,d);g!==null&&ir(g,o,d),Lm(o,d)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function sd(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=zm(r.nativeEvent);if(o===null){o=r.nativeEvent;var d=new o.constructor(o.type,o);qf=d,o.target.dispatchEvent(d),qf=null}else return i=Pt(o),i!==null&&i0(i),r.blockedOn=o,!1;i.shift()}return!0}function u0(r,i,o){sd(r)&&o.delete(i)}function AC(){$m=!1,ka!==null&&sd(ka)&&(ka=null),Da!==null&&sd(Da)&&(Da=null),Oa!==null&&sd(Oa)&&(Oa=null),Qo.forEach(u0),Zo.forEach(u0)}function ad(r,i){r.blockedOn===i&&(r.blockedOn=null,$m||($m=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,AC)))}var id=null;function d0(r){id!==r&&(id=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){id===r&&(id=null);for(var i=0;i<r.length;i+=3){var o=r[i],d=r[i+1],g=r[i+2];if(typeof d!="function"){if(Um(d||o)===null)continue;break}var y=Pt(o);y!==null&&(r.splice(i,3),i-=3,Th(y,{pending:!0,data:g,method:o.method,action:d},d,g))}}))}function ec(r){function i(B){return ad(B,r)}ka!==null&&ad(ka,r),Da!==null&&ad(Da,r),Oa!==null&&ad(Oa,r),Qo.forEach(i),Zo.forEach(i);for(var o=0;o<Pa.length;o++){var d=Pa[o];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Pa.length&&(o=Pa[0],o.blockedOn===null);)c0(o),o.blockedOn===null&&Pa.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(d=0;d<o.length;d+=3){var g=o[d],y=o[d+1],S=g[_n]||null;if(typeof y=="function")S||d0(o);else if(S){var A=null;if(y&&y.hasAttribute("formAction")){if(g=y,S=y[_n]||null)A=S.formAction;else if(Um(g)!==null)continue}else A=S.action;typeof A=="function"?o[d+1]=A:(o.splice(d,3),d-=3),d0(o)}}}function Bm(r){this._internalRoot=r}ld.prototype.render=Bm.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,d=Er();s0(o,d,r,i,null,null)},ld.prototype.unmount=Bm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;r.tag===0&&fl(),s0(r.current,2,null,r,null,null),qu(),i[fe]=null}};function ld(r){this._internalRoot=r}ld.prototype.unstable_scheduleHydration=function(r){if(r){var i=Ut();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Pa.length&&i!==0&&i<Pa[o].priority;o++);Pa.splice(o,0,r),o===0&&c0(r)}};var f0=t.version;if(f0!=="19.0.0")throw Error(a(527,f0,"19.0.0"));D.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=L(i),r=r!==null?Y(r):null,r=r===null?null:r.stateNode,r};var kC={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:U,findFiberByHostInstance:Pn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{tn=od.inject(kC),Yt=od}catch{}}return nc.createRoot=function(r,i){if(!l(r))throw Error(a(299));var o=!1,d="",g=Ty,y=My,S=Ay,A=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=n0(r,1,!1,null,null,o,d,g,y,S,A,null),r[fe]=i.current,_m(r.nodeType===8?r.parentNode:r),new Bm(i)},nc.hydrateRoot=function(r,i,o){if(!l(r))throw Error(a(299));var d=!1,g="",y=Ty,S=My,A=Ay,B=null,Z=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(B=o.unstable_transitionCallbacks),o.formState!==void 0&&(Z=o.formState)),i=n0(r,1,!0,i,o??null,d,g,y,S,A,B,Z),i.context=r0(null),o=i.current,d=Er(),g=_a(d),g.callback=null,Sa(o,g,d),i.current.lanes=d,Ge(i,d),ys(i),r[fe]=i.current,_m(r),new ld(i)},nc.version="19.0.0",nc}var j0;function FC(){if(j0)return Fm.exports;j0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Fm.exports=qC(),Fm.exports}var VC=FC();const YC=Zd(VC);var rc={},N0;function GC(){if(N0)return rc;N0=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.parse=u,rc.serialize=p;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,c=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function u(b,w){const j=new c,N=b.length;if(N<2)return j;const _=(w==null?void 0:w.decode)||x;let R=0;do{const E=b.indexOf("=",R);if(E===-1)break;const C=b.indexOf(";",R),M=C===-1?N:C;if(E>M){R=b.lastIndexOf(";",E-1)+1;continue}const T=f(b,R,E),z=h(b,E,T),q=b.slice(T,z);if(j[q]===void 0){let F=f(b,E+1,M),U=h(b,M,F);const G=_(b.slice(F,U));j[q]=G}R=M+1}while(R<N);return j}function f(b,w,j){do{const N=b.charCodeAt(w);if(N!==32&&N!==9)return w}while(++w<j);return j}function h(b,w,j){for(;w>j;){const N=b.charCodeAt(--w);if(N!==32&&N!==9)return w+1}return j}function p(b,w,j){const N=(j==null?void 0:j.encode)||encodeURIComponent;if(!e.test(b))throw new TypeError(`argument name is invalid: ${b}`);const _=N(w);if(!t.test(_))throw new TypeError(`argument val is invalid: ${w}`);let R=b+"="+_;if(!j)return R;if(j.maxAge!==void 0){if(!Number.isInteger(j.maxAge))throw new TypeError(`option maxAge is invalid: ${j.maxAge}`);R+="; Max-Age="+j.maxAge}if(j.domain){if(!s.test(j.domain))throw new TypeError(`option domain is invalid: ${j.domain}`);R+="; Domain="+j.domain}if(j.path){if(!a.test(j.path))throw new TypeError(`option path is invalid: ${j.path}`);R+="; Path="+j.path}if(j.expires){if(!v(j.expires)||!Number.isFinite(j.expires.valueOf()))throw new TypeError(`option expires is invalid: ${j.expires}`);R+="; Expires="+j.expires.toUTCString()}if(j.httpOnly&&(R+="; HttpOnly"),j.secure&&(R+="; Secure"),j.partitioned&&(R+="; Partitioned"),j.priority)switch(typeof j.priority=="string"?j.priority.toLowerCase():void 0){case"low":R+="; Priority=Low";break;case"medium":R+="; Priority=Medium";break;case"high":R+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${j.priority}`)}if(j.sameSite)switch(typeof j.sameSite=="string"?j.sameSite.toLowerCase():j.sameSite){case!0:case"strict":R+="; SameSite=Strict";break;case"lax":R+="; SameSite=Lax";break;case"none":R+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${j.sameSite}`)}return R}function x(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function v(b){return l.call(b)==="[object Date]"}return rc}GC();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _0="popstate";function WC(e={}){function t(a,l){let{pathname:c,search:u,hash:f}=a.location;return kp("",{pathname:c,search:u,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function s(a,l){return typeof l=="string"?l:vc(l)}return KC(t,s,null,e)}function on(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function is(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function XC(){return Math.random().toString(36).substring(2,10)}function S0(e,t){return{usr:e.state,key:e.key,idx:t}}function kp(e,t,s=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Xl(t):t,state:s,key:t&&t.key||a||XC()}}function vc({pathname:e="/",search:t="",hash:s=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Xl(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function KC(e,t,s,a={}){let{window:l=document.defaultView,v5Compat:c=!1}=a,u=l.history,f="POP",h=null,p=x();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function x(){return(u.state||{idx:null}).idx}function v(){f="POP";let _=x(),R=_==null?null:_-p;p=_,h&&h({action:f,location:N.location,delta:R})}function b(_,R){f="PUSH";let E=kp(N.location,_,R);p=x()+1;let C=S0(E,p),M=N.createHref(E);try{u.pushState(C,"",M)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;l.location.assign(M)}c&&h&&h({action:f,location:N.location,delta:1})}function w(_,R){f="REPLACE";let E=kp(N.location,_,R);p=x();let C=S0(E,p),M=N.createHref(E);u.replaceState(C,"",M),c&&h&&h({action:f,location:N.location,delta:0})}function j(_){let R=l.location.origin!=="null"?l.location.origin:l.location.href,E=typeof _=="string"?_:vc(_);return E=E.replace(/ $/,"%20"),on(R,`No window.location.(origin|href) available to create URL for href: ${E}`),new URL(E,R)}let N={get action(){return f},get location(){return e(l,u)},listen(_){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(_0,v),h=_,()=>{l.removeEventListener(_0,v),h=null}},createHref(_){return t(l,_)},createURL:j,encodeLocation(_){let R=j(_);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:b,replace:w,go(_){return u.go(_)}};return N}function hj(e,t,s="/"){return QC(e,t,s,!1)}function QC(e,t,s,a){let l=typeof t=="string"?Xl(t):t,c=ra(l.pathname||"/",s);if(c==null)return null;let u=mj(e);ZC(u);let f=null;for(let h=0;f==null&&h<u.length;++h){let p=cR(c);f=lR(u[h],p,a)}return f}function mj(e,t=[],s=[],a=""){let l=(c,u,f)=>{let h={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};h.relativePath.startsWith("/")&&(on(h.relativePath.startsWith(a),`Absolute route path "${h.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(a.length));let p=ta([a,h.relativePath]),x=s.concat(h);c.children&&c.children.length>0&&(on(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),mj(c.children,t,x,p)),!(c.path==null&&!c.index)&&t.push({path:p,score:aR(p,c.index),routesMeta:x})};return e.forEach((c,u)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))l(c,u);else for(let h of pj(c.path))l(c,u,h)}),t}function pj(e){let t=e.split("/");if(t.length===0)return[];let[s,...a]=t,l=s.endsWith("?"),c=s.replace(/\?$/,"");if(a.length===0)return l?[c,""]:[c];let u=pj(a.join("/")),f=[];return f.push(...u.map(h=>h===""?c:[c,h].join("/"))),l&&f.push(...u),f.map(h=>e.startsWith("/")&&h===""?"/":h)}function ZC(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:iR(t.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}var JC=/^:[\w-]+$/,eR=3,tR=2,nR=1,rR=10,sR=-2,E0=e=>e==="*";function aR(e,t){let s=e.split("/"),a=s.length;return s.some(E0)&&(a+=sR),t&&(a+=tR),s.filter(l=>!E0(l)).reduce((l,c)=>l+(JC.test(c)?eR:c===""?nR:rR),a)}function iR(e,t){return e.length===t.length&&e.slice(0,-1).every((a,l)=>a===t[l])?e[e.length-1]-t[t.length-1]:0}function lR(e,t,s=!1){let{routesMeta:a}=e,l={},c="/",u=[];for(let f=0;f<a.length;++f){let h=a[f],p=f===a.length-1,x=c==="/"?t:t.slice(c.length)||"/",v=Od({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},x),b=h.route;if(!v&&p&&s&&!a[a.length-1].route.index&&(v=Od({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},x)),!v)return null;Object.assign(l,v.params),u.push({params:l,pathname:ta([c,v.pathname]),pathnameBase:hR(ta([c,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(c=ta([c,v.pathnameBase]))}return u}function Od(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=oR(e.path,e.caseSensitive,e.end),l=t.match(s);if(!l)return null;let c=l[0],u=c.replace(/(.)\/+$/,"$1"),f=l.slice(1);return{params:a.reduce((p,{paramName:x,isOptional:v},b)=>{if(x==="*"){let j=f[b]||"";u=c.slice(0,c.length-j.length).replace(/(.)\/+$/,"$1")}const w=f[b];return v&&!w?p[x]=void 0:p[x]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:u,pattern:e}}function oR(e,t=!1,s=!0){is(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,h)=>(a.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),a]}function cR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return is(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ra(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&a!=="/"?null:e.slice(s)||"/"}function uR(e,t="/"){let{pathname:s,search:a="",hash:l=""}=typeof e=="string"?Xl(e):e;return{pathname:s?s.startsWith("/")?s:dR(s,t):t,search:mR(a),hash:pR(l)}}function dR(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?s.length>1&&s.pop():l!=="."&&s.push(l)}),s.length>1?s.join("/"):"/"}function Wm(e,t,s,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fR(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function mg(e){let t=fR(e);return t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase)}function pg(e,t,s,a=!1){let l;typeof e=="string"?l=Xl(e):(l={...e},on(!l.pathname||!l.pathname.includes("?"),Wm("?","pathname","search",l)),on(!l.pathname||!l.pathname.includes("#"),Wm("#","pathname","hash",l)),on(!l.search||!l.search.includes("#"),Wm("#","search","hash",l)));let c=e===""||l.pathname==="",u=c?"/":l.pathname,f;if(u==null)f=s;else{let v=t.length-1;if(!a&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),v-=1;l.pathname=b.join("/")}f=v>=0?t[v]:"/"}let h=uR(l,f),p=u&&u!=="/"&&u.endsWith("/"),x=(c||u===".")&&s.endsWith("/");return!h.pathname.endsWith("/")&&(p||x)&&(h.pathname+="/"),h}var ta=e=>e.join("/").replace(/\/\/+/g,"/"),hR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function gR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var gj=["POST","PUT","PATCH","DELETE"];new Set(gj);var xR=["GET",...gj];new Set(xR);var Kl=m.createContext(null);Kl.displayName="DataRouter";var Jd=m.createContext(null);Jd.displayName="DataRouterState";var xj=m.createContext({isTransitioning:!1});xj.displayName="ViewTransition";var vR=m.createContext(new Map);vR.displayName="Fetchers";var yR=m.createContext(null);yR.displayName="Await";var hs=m.createContext(null);hs.displayName="Navigation";var Ac=m.createContext(null);Ac.displayName="Location";var Jr=m.createContext({outlet:null,matches:[],isDataRoute:!1});Jr.displayName="Route";var gg=m.createContext(null);gg.displayName="RouteError";function bR(e,{relative:t}={}){on(Ql(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:a}=m.useContext(hs),{hash:l,pathname:c,search:u}=kc(e,{relative:t}),f=c;return s!=="/"&&(f=c==="/"?s:ta([s,c])),a.createHref({pathname:f,search:u,hash:l})}function Ql(){return m.useContext(Ac)!=null}function ia(){return on(Ql(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(Ac).location}var vj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yj(e){m.useContext(hs).static||m.useLayoutEffect(e)}function rr(){let{isDataRoute:e}=m.useContext(Jr);return e?PR():wR()}function wR(){on(Ql(),"useNavigate() may be used only in the context of a <Router> component.");let e=m.useContext(Kl),{basename:t,navigator:s}=m.useContext(hs),{matches:a}=m.useContext(Jr),{pathname:l}=ia(),c=JSON.stringify(mg(a)),u=m.useRef(!1);return yj(()=>{u.current=!0}),m.useCallback((h,p={})=>{if(is(u.current,vj),!u.current)return;if(typeof h=="number"){s.go(h);return}let x=pg(h,JSON.parse(c),l,p.relative==="path");e==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:ta([t,x.pathname])),(p.replace?s.replace:s.push)(x,p.state,p)},[t,s,c,l,e])}var jR=m.createContext(null);function NR(e){let t=m.useContext(Jr).outlet;return t&&m.createElement(jR.Provider,{value:e},t)}function cr(){let{matches:e}=m.useContext(Jr),t=e[e.length-1];return t?t.params:{}}function kc(e,{relative:t}={}){let{matches:s}=m.useContext(Jr),{pathname:a}=ia(),l=JSON.stringify(mg(s));return m.useMemo(()=>pg(e,JSON.parse(l),a,t==="path"),[e,l,a,t])}function _R(e,t){return bj(e,t)}function bj(e,t,s,a){var E;on(Ql(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l,static:c}=m.useContext(hs),{matches:u}=m.useContext(Jr),f=u[u.length-1],h=f?f.params:{},p=f?f.pathname:"/",x=f?f.pathnameBase:"/",v=f&&f.route;{let C=v&&v.path||"";wj(p,!v||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let b=ia(),w;if(t){let C=typeof t=="string"?Xl(t):t;on(x==="/"||((E=C.pathname)==null?void 0:E.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${C.pathname}" was given in the \`location\` prop.`),w=C}else w=b;let j=w.pathname||"/",N=j;if(x!=="/"){let C=x.replace(/^\//,"").split("/");N="/"+j.replace(/^\//,"").split("/").slice(C.length).join("/")}let _=!c&&s&&s.matches&&s.matches.length>0?s.matches:hj(e,{pathname:N});is(v||_!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),is(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=TR(_&&_.map(C=>Object.assign({},C,{params:Object.assign({},h,C.params),pathname:ta([x,l.encodeLocation?l.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?x:ta([x,l.encodeLocation?l.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),u,s,a);return t&&R?m.createElement(Ac.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},R):R}function SR(){let e=OR(),t=gR(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=m.createElement(m.Fragment,null,m.createElement("p",null,"💿 Hey developer 👋"),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:c},"ErrorBoundary")," or"," ",m.createElement("code",{style:c},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),s?m.createElement("pre",{style:l},s):null,u)}var ER=m.createElement(SR,null),CR=class extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?m.createElement(Jr.Provider,{value:this.props.routeContext},m.createElement(gg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RR({routeContext:e,match:t,children:s}){let a=m.useContext(Kl);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),m.createElement(Jr.Provider,{value:e},s)}function TR(e,t=[],s=null,a=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let l=e,c=s==null?void 0:s.errors;if(c!=null){let h=l.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);on(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let u=!1,f=-1;if(s)for(let h=0;h<l.length;h++){let p=l[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:x,errors:v}=s,b=p.route.loader&&!x.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||b){u=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,p,x)=>{let v,b=!1,w=null,j=null;s&&(v=c&&p.route.id?c[p.route.id]:void 0,w=p.route.errorElement||ER,u&&(f<0&&x===0?(wj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,j=null):f===x&&(b=!0,j=p.route.hydrateFallbackElement||null)));let N=t.concat(l.slice(0,x+1)),_=()=>{let R;return v?R=w:b?R=j:p.route.Component?R=m.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=h,m.createElement(RR,{match:p,routeContext:{outlet:h,matches:N,isDataRoute:s!=null},children:R})};return s&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?m.createElement(CR,{location:s.location,revalidation:s.revalidation,component:w,error:v,children:_(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):_()},null)}function xg(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MR(e){let t=m.useContext(Kl);return on(t,xg(e)),t}function AR(e){let t=m.useContext(Jd);return on(t,xg(e)),t}function kR(e){let t=m.useContext(Jr);return on(t,xg(e)),t}function vg(e){let t=kR(e),s=t.matches[t.matches.length-1];return on(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function DR(){return vg("useRouteId")}function OR(){var a;let e=m.useContext(gg),t=AR("useRouteError"),s=vg("useRouteError");return e!==void 0?e:(a=t.errors)==null?void 0:a[s]}function PR(){let{router:e}=MR("useNavigate"),t=vg("useNavigate"),s=m.useRef(!1);return yj(()=>{s.current=!0}),m.useCallback(async(l,c={})=>{is(s.current,vj),s.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...c}))},[e,t])}var C0={};function wj(e,t,s){!t&&!C0[e]&&(C0[e]=!0,is(!1,s))}m.memo(LR);function LR({routes:e,future:t,state:s}){return bj(e,void 0,s,t)}function jj({to:e,replace:t,state:s,relative:a}){on(Ql(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=m.useContext(hs);is(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=m.useContext(Jr),{pathname:u}=ia(),f=rr(),h=pg(e,mg(c),u,a==="path"),p=JSON.stringify(h);return m.useEffect(()=>{f(JSON.parse(p),{replace:t,state:s,relative:a})},[f,p,a,t,s]),null}function Nj(e){return NR(e.context)}function Mt(e){on(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IR({basename:e="/",children:t=null,location:s,navigationType:a="POP",navigator:l,static:c=!1}){on(!Ql(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),f=m.useMemo(()=>({basename:u,navigator:l,static:c,future:{}}),[u,l,c]);typeof s=="string"&&(s=Xl(s));let{pathname:h="/",search:p="",hash:x="",state:v=null,key:b="default"}=s,w=m.useMemo(()=>{let j=ra(h,u);return j==null?null:{location:{pathname:j,search:p,hash:x,state:v,key:b},navigationType:a}},[u,h,p,x,v,b,a]);return is(w!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${x}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:m.createElement(hs.Provider,{value:f},m.createElement(Ac.Provider,{children:t,value:w}))}function zR({children:e,location:t}){return _R(Dp(e),t)}function Dp(e,t=[]){let s=[];return m.Children.forEach(e,(a,l)=>{if(!m.isValidElement(a))return;let c=[...t,l];if(a.type===m.Fragment){s.push.apply(s,Dp(a.props.children,c));return}on(a.type===Mt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),on(!a.props.index||!a.props.children,"An index route cannot have child routes.");let u={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(u.children=Dp(a.props.children,c)),s.push(u)}),s}var Ed="get",Cd="application/x-www-form-urlencoded";function ef(e){return e!=null&&typeof e.tagName=="string"}function UR(e){return ef(e)&&e.tagName.toLowerCase()==="button"}function $R(e){return ef(e)&&e.tagName.toLowerCase()==="form"}function BR(e){return ef(e)&&e.tagName.toLowerCase()==="input"}function HR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function qR(e,t){return e.button===0&&(!t||t==="_self")&&!HR(e)}var cd=null;function FR(){if(cd===null)try{new FormData(document.createElement("form"),0),cd=!1}catch{cd=!0}return cd}var VR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xm(e){return e!=null&&!VR.has(e)?(is(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Cd}"`),null):e}function YR(e,t){let s,a,l,c,u;if($R(e)){let f=e.getAttribute("action");a=f?ra(f,t):null,s=e.getAttribute("method")||Ed,l=Xm(e.getAttribute("enctype"))||Cd,c=new FormData(e)}else if(UR(e)||BR(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||f.getAttribute("action");if(a=h?ra(h,t):null,s=e.getAttribute("formmethod")||f.getAttribute("method")||Ed,l=Xm(e.getAttribute("formenctype"))||Xm(f.getAttribute("enctype"))||Cd,c=new FormData(f,e),!FR()){let{name:p,type:x,value:v}=e;if(x==="image"){let b=p?`${p}.`:"";c.append(`${b}x`,"0"),c.append(`${b}y`,"0")}else p&&c.append(p,v)}}else{if(ef(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Ed,a=null,l=Cd,u=e}return c&&l==="text/plain"&&(u=c,c=void 0),{action:a,method:s.toLowerCase(),encType:l,formData:c,body:u}}function yg(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function GR(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WR(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function XR(e,t,s){let a=await Promise.all(e.map(async l=>{let c=t.routes[l.route.id];if(c){let u=await GR(c,s);return u.links?u.links():[]}return[]}));return JR(a.flat(1).filter(WR).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function R0(e,t,s,a,l,c){let u=(h,p)=>s[p]?h.route.id!==s[p].route.id:!0,f=(h,p)=>{var x;return s[p].pathname!==h.pathname||((x=s[p].route.path)==null?void 0:x.endsWith("*"))&&s[p].params["*"]!==h.params["*"]};return c==="assets"?t.filter((h,p)=>u(h,p)||f(h,p)):c==="data"?t.filter((h,p)=>{var v;let x=a.routes[h.route.id];if(!x||!x.hasLoader)return!1;if(u(h,p)||f(h,p))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((v=s[0])==null?void 0:v.params)||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function KR(e,t,{includeHydrateFallback:s}={}){return QR(e.map(a=>{let l=t.routes[a.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),s&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function QR(e){return[...new Set(e)]}function ZR(e){let t={},s=Object.keys(e).sort();for(let a of s)t[a]=e[a];return t}function JR(e,t){let s=new Set;return new Set(t),e.reduce((a,l)=>{let c=JSON.stringify(ZR(l));return s.has(c)||(s.add(c),a.push({key:c,link:l})),a},[])}function eT(e,t){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname="_root.data":t&&ra(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function _j(){let e=m.useContext(Kl);return yg(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function tT(){let e=m.useContext(Jd);return yg(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var bg=m.createContext(void 0);bg.displayName="FrameworkContext";function Sj(){let e=m.useContext(bg);return yg(e,"You must render this element inside a <HydratedRouter> element"),e}function nT(e,t){let s=m.useContext(bg),[a,l]=m.useState(!1),[c,u]=m.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:p,onMouseLeave:x,onTouchStart:v}=t,b=m.useRef(null);m.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let N=R=>{R.forEach(E=>{u(E.isIntersecting)})},_=new IntersectionObserver(N,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[e]),m.useEffect(()=>{if(a){let N=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(N)}}},[a]);let w=()=>{l(!0)},j=()=>{l(!1),u(!1)};return s?e!=="intent"?[c,b,{}]:[c,b,{onFocus:sc(f,w),onBlur:sc(h,j),onMouseEnter:sc(p,w),onMouseLeave:sc(x,j),onTouchStart:sc(v,w)}]:[!1,b,{}]}function sc(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function rT({page:e,...t}){let{router:s}=_j(),a=m.useMemo(()=>hj(s.routes,e,s.basename),[s.routes,e,s.basename]);return a?m.createElement(aT,{page:e,matches:a,...t}):null}function sT(e){let{manifest:t,routeModules:s}=Sj(),[a,l]=m.useState([]);return m.useEffect(()=>{let c=!1;return XR(e,t,s).then(u=>{c||l(u)}),()=>{c=!0}},[e,t,s]),a}function aT({page:e,matches:t,...s}){let a=ia(),{manifest:l,routeModules:c}=Sj(),{basename:u}=_j(),{loaderData:f,matches:h}=tT(),p=m.useMemo(()=>R0(e,t,h,l,a,"data"),[e,t,h,l,a]),x=m.useMemo(()=>R0(e,t,h,l,a,"assets"),[e,t,h,l,a]),v=m.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let j=new Set,N=!1;if(t.forEach(R=>{var C;let E=l.routes[R.route.id];!E||!E.hasLoader||(!p.some(M=>M.route.id===R.route.id)&&R.route.id in f&&((C=c[R.route.id])!=null&&C.shouldRevalidate)||E.hasClientLoader?N=!0:j.add(R.route.id))}),j.size===0)return[];let _=eT(e,u);return N&&j.size>0&&_.searchParams.set("_routes",t.filter(R=>j.has(R.route.id)).map(R=>R.route.id).join(",")),[_.pathname+_.search]},[u,f,a,l,p,t,e,c]),b=m.useMemo(()=>KR(x,l),[x,l]),w=sT(x);return m.createElement(m.Fragment,null,v.map(j=>m.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...s})),b.map(j=>m.createElement("link",{key:j,rel:"modulepreload",href:j,...s})),w.map(({key:j,link:N})=>m.createElement("link",{key:j,...N})))}function iT(...e){return t=>{e.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var Ej=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ej&&(window.__reactRouterVersion="7.4.0")}catch{}function lT({basename:e,children:t,window:s}){let a=m.useRef();a.current==null&&(a.current=WC({window:s,v5Compat:!0}));let l=a.current,[c,u]=m.useState({action:l.action,location:l.location}),f=m.useCallback(h=>{m.startTransition(()=>u(h))},[u]);return m.useLayoutEffect(()=>l.listen(f),[l,f]),m.createElement(IR,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l})}var Cj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,et=m.forwardRef(function({onClick:t,discover:s="render",prefetch:a="none",relative:l,reloadDocument:c,replace:u,state:f,target:h,to:p,preventScrollReset:x,viewTransition:v,...b},w){let{basename:j}=m.useContext(hs),N=typeof p=="string"&&Cj.test(p),_,R=!1;if(typeof p=="string"&&N&&(_=p,Ej))try{let U=new URL(window.location.href),G=p.startsWith("//")?new URL(U.protocol+p):new URL(p),ce=ra(G.pathname,j);G.origin===U.origin&&ce!=null?p=ce+G.search+G.hash:R=!0}catch{is(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=bR(p,{relative:l}),[C,M,T]=nT(a,b),z=uT(p,{replace:u,state:f,target:h,preventScrollReset:x,relative:l,viewTransition:v});function q(U){t&&t(U),U.defaultPrevented||z(U)}let F=m.createElement("a",{...b,...T,href:_||E,onClick:R||c?t:q,ref:iT(w,M),target:h,"data-discover":!N&&s==="render"?"true":void 0});return C&&!N?m.createElement(m.Fragment,null,F,m.createElement(rT,{page:E})):F});et.displayName="Link";var Rj=m.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:a="",end:l=!1,style:c,to:u,viewTransition:f,children:h,...p},x){let v=kc(u,{relative:p.relative}),b=ia(),w=m.useContext(Jd),{navigator:j,basename:N}=m.useContext(hs),_=w!=null&&pT(v)&&f===!0,R=j.encodeLocation?j.encodeLocation(v).pathname:v.pathname,E=b.pathname,C=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(E=E.toLowerCase(),C=C?C.toLowerCase():null,R=R.toLowerCase()),C&&N&&(C=ra(C,N)||C);const M=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let T=E===R||!l&&E.startsWith(R)&&E.charAt(M)==="/",z=C!=null&&(C===R||!l&&C.startsWith(R)&&C.charAt(R.length)==="/"),q={isActive:T,isPending:z,isTransitioning:_},F=T?t:void 0,U;typeof a=="function"?U=a(q):U=[a,T?"active":null,z?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let G=typeof c=="function"?c(q):c;return m.createElement(et,{...p,"aria-current":F,className:U,ref:x,style:G,to:u,viewTransition:f},typeof h=="function"?h(q):h)});Rj.displayName="NavLink";var oT=m.forwardRef(({discover:e="render",fetcherKey:t,navigate:s,reloadDocument:a,replace:l,state:c,method:u=Ed,action:f,onSubmit:h,relative:p,preventScrollReset:x,viewTransition:v,...b},w)=>{let j=hT(),N=mT(f,{relative:p}),_=u.toLowerCase()==="get"?"get":"post",R=typeof f=="string"&&Cj.test(f),E=C=>{if(h&&h(C),C.defaultPrevented)return;C.preventDefault();let M=C.nativeEvent.submitter,T=(M==null?void 0:M.getAttribute("formmethod"))||u;j(M||C.currentTarget,{fetcherKey:t,method:T,navigate:s,replace:l,state:c,relative:p,preventScrollReset:x,viewTransition:v})};return m.createElement("form",{ref:w,method:_,action:N,onSubmit:a?h:E,...b,"data-discover":!R&&e==="render"?"true":void 0})});oT.displayName="Form";function cT(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tj(e){let t=m.useContext(Kl);return on(t,cT(e)),t}function uT(e,{target:t,replace:s,state:a,preventScrollReset:l,relative:c,viewTransition:u}={}){let f=rr(),h=ia(),p=kc(e,{relative:c});return m.useCallback(x=>{if(qR(x,t)){x.preventDefault();let v=s!==void 0?s:vc(h)===vc(p);f(e,{replace:v,state:a,preventScrollReset:l,relative:c,viewTransition:u})}},[h,f,p,s,a,t,e,l,c,u])}var dT=0,fT=()=>`__${String(++dT)}__`;function hT(){let{router:e}=Tj("useSubmit"),{basename:t}=m.useContext(hs),s=DR();return m.useCallback(async(a,l={})=>{let{action:c,method:u,encType:f,formData:h,body:p}=YR(a,t);if(l.navigate===!1){let x=l.fetcherKey||fT();await e.fetch(x,s,l.action||c,{preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||u,formEncType:l.encType||f,flushSync:l.flushSync})}else await e.navigate(l.action||c,{preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||u,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:s,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,s])}function mT(e,{relative:t}={}){let{basename:s}=m.useContext(hs),a=m.useContext(Jr);on(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),c={...kc(e||".",{relative:t})},u=ia();if(e==null){c.search=u.search;let f=new URLSearchParams(c.search),h=f.getAll("index");if(h.some(x=>x==="")){f.delete("index"),h.filter(v=>v).forEach(v=>f.append("index",v));let x=f.toString();c.search=x?`?${x}`:""}}return(!e||e===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(c.pathname=c.pathname==="/"?s:ta([s,c.pathname])),vc(c)}function pT(e,t={}){let s=m.useContext(xj);on(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Tj("useViewTransitionState"),l=kc(e,{relative:t.relative});if(!s.isTransitioning)return!1;let c=ra(s.currentLocation.pathname,a)||s.currentLocation.pathname,u=ra(s.nextLocation.pathname,a)||s.nextLocation.pathname;return Od(l.pathname,u)!=null||Od(l.pathname,c)!=null}new TextEncoder;var Ss=fj();const Mj=Zd(Ss),gT="modulepreload",xT=function(e){return"/"+e},T0={},$l=function(t,s,a){let l=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));l=Promise.allSettled(s.map(h=>{if(h=xT(h),h in T0)return;T0[h]=!0;const p=h.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${x}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":gT,p||(v.as="script"),v.crossOrigin="",v.href=h,f&&v.setAttribute("nonce",f),document.head.appendChild(v),p)return new Promise((b,w)=>{v.addEventListener("load",b),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return l.then(u=>{for(const f of u||[])f.status==="rejected"&&c(f.reason);return t().catch(c)})},vT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>$l(async()=>{const{default:a}=await Promise.resolve().then(()=>Zl);return{default:a}},[]).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)};class wg extends Error{constructor(t,s="FunctionsError",a){super(t),this.name=s,this.context=a}}class yT extends wg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class bT extends wg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class wT extends wg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Op;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Op||(Op={}));var jT=function(e,t,s,a){function l(c){return c instanceof s?c:new s(function(u){u(c)})}return new(s||(s=Promise))(function(c,u){function f(x){try{p(a.next(x))}catch(v){u(v)}}function h(x){try{p(a.throw(x))}catch(v){u(v)}}function p(x){x.done?c(x.value):l(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class NT{constructor(t,{headers:s={},customFetch:a,region:l=Op.Any}={}){this.url=t,this.headers=s,this.region=l,this.fetch=vT(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var a;return jT(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:u}=s;let f={},{region:h}=s;h||(h=this.region),h&&h!=="any"&&(f["x-region"]=h);let p;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",p=u):typeof u=="string"?(f["Content-Type"]="text/plain",p=u):typeof FormData<"u"&&u instanceof FormData?p=u:(f["Content-Type"]="application/json",p=JSON.stringify(u)));const x=yield this.fetch(`${this.url}/${t}`,{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:p}).catch(j=>{throw new yT(j)}),v=x.headers.get("x-relay-error");if(v&&v==="true")throw new bT(x);if(!x.ok)throw new wT(x);let b=((a=x.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield x.json():b==="application/octet-stream"?w=yield x.blob():b==="text/event-stream"?w=x:b==="multipart/form-data"?w=yield x.formData():w=yield x.text(),{data:w,error:null}}catch(l){return{data:null,error:l}}})}}var Un={},vl={},yl={},bl={},wl={},jl={},_T=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Bl=_T();const ST=Bl.fetch,Aj=Bl.fetch.bind(Bl),kj=Bl.Headers,ET=Bl.Request,CT=Bl.Response,Zl=Object.freeze(Object.defineProperty({__proto__:null,Headers:kj,Request:ET,Response:CT,default:Aj,fetch:ST},Symbol.toStringTag,{value:"Module"})),RT=PC(Zl);var ud={},M0;function Dj(){if(M0)return ud;M0=1,Object.defineProperty(ud,"__esModule",{value:!0});class e extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return ud.default=e,ud}var A0;function Oj(){if(A0)return jl;A0=1;var e=jl&&jl.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(jl,"__esModule",{value:!0});const t=e(RT),s=e(Dj());class a{constructor(c){this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=c.headers,this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=c.shouldThrowOnError,this.signal=c.signal,this.isMaybeSingle=c.isMaybeSingle,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=Object.assign({},this.headers),this.headers[c]=u,this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const f=this.fetch;let h=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var x,v,b;let w=null,j=null,N=null,_=p.status,R=p.statusText;if(p.ok){if(this.method!=="HEAD"){const T=await p.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?j=T:j=JSON.parse(T))}const C=(x=this.headers.Prefer)===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),M=(v=p.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");C&&M&&M.length>1&&(N=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(w={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,N=null,_=406,R="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const C=await p.text();try{w=JSON.parse(C),Array.isArray(w)&&p.status===404&&(j=[],w=null,_=200,R="OK")}catch{p.status===404&&C===""?(_=204,R="No Content"):w={message:C}}if(w&&this.isMaybeSingle&&(!((b=w==null?void 0:w.details)===null||b===void 0)&&b.includes("0 rows"))&&(w=null,_=200,R="OK"),w&&this.shouldThrowOnError)throw new s.default(w)}return{error:w,data:j,count:N,status:_,statusText:R}});return this.shouldThrowOnError||(h=h.catch(p=>{var x,v,b;return{error:{message:`${(x=p==null?void 0:p.name)!==null&&x!==void 0?x:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(v=p==null?void 0:p.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(b=p==null?void 0:p.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),h.then(c,u)}returns(){return this}overrideTypes(){return this}}return jl.default=a,jl}var k0;function Pj(){if(k0)return wl;k0=1;var e=wl&&wl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(wl,"__esModule",{value:!0});const t=e(Oj());class s extends t.default{select(l){let c=!1;const u=(l??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",u),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(l,{ascending:c=!0,nullsFirst:u,foreignTable:f,referencedTable:h=f}={}){const p=h?`${h}.order`:"order",x=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${x?`${x},`:""}${l}.${c?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:u=c}={}){const f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${l}`),this}range(l,c,{foreignTable:u,referencedTable:f=u}={}){const h=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(h,`${l}`),this.url.searchParams.set(p,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:l=!1,verbose:c=!1,settings:u=!1,buffers:f=!1,wal:h=!1,format:p="text"}={}){var x;const v=[l?"analyze":null,c?"verbose":null,u?"settings":null,f?"buffers":null,h?"wal":null].filter(Boolean).join("|"),b=(x=this.headers.Accept)!==null&&x!==void 0?x:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${p}; for="${b}"; options=${v};`,p==="json"?this:this}rollback(){var l;return((l=this.headers.Prefer)!==null&&l!==void 0?l:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return wl.default=s,wl}var D0;function jg(){if(D0)return bl;D0=1;var e=bl&&bl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(bl,"__esModule",{value:!0});const t=e(Pj());class s extends t.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const u=Array.from(new Set(c)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(l,`in.(${u})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:u,type:f}={}){let h="";f==="plain"?h="pl":f==="phrase"?h="ph":f==="websearch"&&(h="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(l,`${h}fts${p}.${c}`),this}match(l){return Object.entries(l).forEach(([c,u])=>{this.url.searchParams.append(c,`eq.${u}`)}),this}not(l,c,u){return this.url.searchParams.append(l,`not.${c}.${u}`),this}or(l,{foreignTable:c,referencedTable:u=c}={}){const f=u?`${u}.or`:"or";return this.url.searchParams.append(f,`(${l})`),this}filter(l,c,u){return this.url.searchParams.append(l,`${c}.${u}`),this}}return bl.default=s,bl}var O0;function Lj(){if(O0)return yl;O0=1;var e=yl&&yl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(yl,"__esModule",{value:!0});const t=e(jg());class s{constructor(l,{headers:c={},schema:u,fetch:f}){this.url=l,this.headers=c,this.schema=u,this.fetch=f}select(l,{head:c=!1,count:u}={}){const f=c?"HEAD":"GET";let h=!1;const p=(l??"*").split("").map(x=>/\s/.test(x)&&!h?"":(x==='"'&&(h=!h),x)).join("");return this.url.searchParams.set("select",p),u&&(this.headers.Prefer=`count=${u}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(l,{count:c,defaultToNull:u=!0}={}){const f="POST",h=[];if(this.headers.Prefer&&h.push(this.headers.Prefer),c&&h.push(`count=${c}`),u||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(l)){const p=l.reduce((x,v)=>x.concat(Object.keys(v)),[]);if(p.length>0){const x=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}upsert(l,{onConflict:c,ignoreDuplicates:u=!1,count:f,defaultToNull:h=!0}={}){const p="POST",x=[`resolution=${u?"ignore":"merge"}-duplicates`];if(c!==void 0&&this.url.searchParams.set("on_conflict",c),this.headers.Prefer&&x.push(this.headers.Prefer),f&&x.push(`count=${f}`),h||x.push("missing=default"),this.headers.Prefer=x.join(","),Array.isArray(l)){const v=l.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(v.length>0){const b=[...new Set(v)].map(w=>`"${w}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}update(l,{count:c}={}){const u="PATCH",f=[];return this.headers.Prefer&&f.push(this.headers.Prefer),c&&f.push(`count=${c}`),this.headers.Prefer=f.join(","),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}delete({count:l}={}){const c="DELETE",u=[];return l&&u.push(`count=${l}`),this.headers.Prefer&&u.unshift(this.headers.Prefer),this.headers.Prefer=u.join(","),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return yl.default=s,yl}var ac={},ic={},P0;function TT(){return P0||(P0=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.version=void 0,ic.version="0.0.0-automated"),ic}var L0;function MT(){if(L0)return ac;L0=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.DEFAULT_HEADERS=void 0;const e=TT();return ac.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},ac}var I0;function AT(){if(I0)return vl;I0=1;var e=vl&&vl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(vl,"__esModule",{value:!0});const t=e(Lj()),s=e(jg()),a=MT();class l{constructor(u,{headers:f={},schema:h,fetch:p}={}){this.url=u,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),f),this.schemaName=h,this.fetch=p}from(u){const f=new URL(`${this.url}/${u}`);return new t.default(f,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new l(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,f={},{head:h=!1,get:p=!1,count:x}={}){let v;const b=new URL(`${this.url}/rpc/${u}`);let w;h||p?(v=h?"HEAD":"GET",Object.entries(f).filter(([N,_])=>_!==void 0).map(([N,_])=>[N,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([N,_])=>{b.searchParams.append(N,_)})):(v="POST",w=f);const j=Object.assign({},this.headers);return x&&(j.Prefer=`count=${x}`),new s.default({method:v,url:b,headers:j,schema:this.schemaName,body:w,fetch:this.fetch,allowEmpty:!1})}}return vl.default=l,vl}var z0;function kT(){if(z0)return Un;z0=1;var e=Un&&Un.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Un,"__esModule",{value:!0}),Un.PostgrestError=Un.PostgrestBuilder=Un.PostgrestTransformBuilder=Un.PostgrestFilterBuilder=Un.PostgrestQueryBuilder=Un.PostgrestClient=void 0;const t=e(AT());Un.PostgrestClient=t.default;const s=e(Lj());Un.PostgrestQueryBuilder=s.default;const a=e(jg());Un.PostgrestFilterBuilder=a.default;const l=e(Pj());Un.PostgrestTransformBuilder=l.default;const c=e(Oj());Un.PostgrestBuilder=c.default;const u=e(Dj());return Un.PostgrestError=u.default,Un.default={PostgrestClient:t.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:u.default},Un}var DT=kT();const OT=Zd(DT),{PostgrestClient:PT,PostgrestQueryBuilder:rH,PostgrestFilterBuilder:sH,PostgrestTransformBuilder:aH,PostgrestBuilder:iH,PostgrestError:lH}=OT,LT="2.11.2",IT={"X-Client-Info":`realtime-js/${LT}`},zT="1.0.0",Ij=1e4,UT=1e3;var Dl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Dl||(Dl={}));var Rr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Rr||(Rr={}));var as;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(as||(as={}));var Pp;(function(e){e.websocket="websocket"})(Pp||(Pp={}));var Ri;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ri||(Ri={}));class $T{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,s,a)}_decodeBroadcast(t,s,a){const l=s.getUint8(1),c=s.getUint8(2);let u=this.HEADER_LENGTH+2;const f=a.decode(t.slice(u,u+l));u=u+l;const h=a.decode(t.slice(u,u+c));u=u+c;const p=JSON.parse(a.decode(t.slice(u,t.byteLength)));return{ref:null,topic:f,event:h,payload:p}}}class zj{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var sn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(sn||(sn={}));const U0=(e,t,s={})=>{var a;const l=(a=s.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((c,u)=>(c[u]=BT(u,e,t,l),c),{})},BT=(e,t,s,a)=>{const l=t.find(f=>f.name===e),c=l==null?void 0:l.type,u=s[e];return c&&!a.includes(c)?Uj(c,u):Lp(u)},Uj=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return VT(t,s)}switch(e){case sn.bool:return HT(t);case sn.float4:case sn.float8:case sn.int2:case sn.int4:case sn.int8:case sn.numeric:case sn.oid:return qT(t);case sn.json:case sn.jsonb:return FT(t);case sn.timestamp:return YT(t);case sn.abstime:case sn.date:case sn.daterange:case sn.int4range:case sn.int8range:case sn.money:case sn.reltime:case sn.text:case sn.time:case sn.timestamptz:case sn.timetz:case sn.tsrange:case sn.tstzrange:return Lp(t);default:return Lp(t)}},Lp=e=>e,HT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},qT=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},FT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},VT=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,a=e[s];if(e[0]==="{"&&a==="}"){let c;const u=e.slice(1,s);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(f=>Uj(t,f))}return e},YT=e=>typeof e=="string"?e.replace(" ","T"):e,$j=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Km{constructor(t,s,a={},l=Ij){this.channel=t,this.event=s,this.payload=a,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var a;return this._hasReceived(t)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var $0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})($0||($0={}));class dc{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},l=>{const{onJoin:c,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=dc.syncState(this.state,l,c,u),this.pendingDiffs.forEach(h=>{this.state=dc.syncDiff(this.state,h,c,u)}),this.pendingDiffs=[],f()}),this.channel._on(a.diff,{},l=>{const{onJoin:c,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=dc.syncDiff(this.state,l,c,u),f())}),this.onJoin((l,c,u)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:u})}),this.onLeave((l,c,u)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,a,l){const c=this.cloneDeep(t),u=this.transformState(s),f={},h={};return this.map(c,(p,x)=>{u[p]||(h[p]=x)}),this.map(u,(p,x)=>{const v=c[p];if(v){const b=x.map(_=>_.presence_ref),w=v.map(_=>_.presence_ref),j=x.filter(_=>w.indexOf(_.presence_ref)<0),N=v.filter(_=>b.indexOf(_.presence_ref)<0);j.length>0&&(f[p]=j),N.length>0&&(h[p]=N)}else f[p]=x}),this.syncDiff(c,{joins:f,leaves:h},a,l)}static syncDiff(t,s,a,l){const{joins:c,leaves:u}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),l||(l=()=>{}),this.map(c,(f,h)=>{var p;const x=(p=t[f])!==null&&p!==void 0?p:[];if(t[f]=this.cloneDeep(h),x.length>0){const v=t[f].map(w=>w.presence_ref),b=x.filter(w=>v.indexOf(w.presence_ref)<0);t[f].unshift(...b)}a(f,x,h)}),this.map(u,(f,h)=>{let p=t[f];if(!p)return;const x=h.map(v=>v.presence_ref);p=p.filter(v=>x.indexOf(v.presence_ref)<0),t[f]=p,l(f,p,h),p.length===0&&delete t[f]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(a=>s(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,a)=>{const l=t[a];return"metas"in l?s[a]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[a]=l,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var B0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(B0||(B0={}));var H0;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(H0||(H0={}));var ea;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ea||(ea={}));class Ng{constructor(t,s={config:{}},a){this.topic=t,this.params=s,this.socket=a,this.bindings={},this.state=Rr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Km(this,as.join,this.params,this.timeout),this.rejoinTimer=new zj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Rr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Rr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Rr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(as.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new dc(this),this.broadcastEndpointURL=$j(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var a,l;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:c,presence:u,private:f}}=this.params;this._onError(x=>t==null?void 0:t(ea.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(ea.CLOSED));const h={},p={broadcast:c,presence:u,postgres_changes:(l=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(x=>x.filter))!==null&&l!==void 0?l:[],private:f};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:x})=>{var v;if(this.socket.setAuth(),x===void 0){t==null||t(ea.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,w=(v=b==null?void 0:b.length)!==null&&v!==void 0?v:0,j=[];for(let N=0;N<w;N++){const _=b[N],{filter:{event:R,schema:E,table:C,filter:M}}=_,T=x&&x[N];if(T&&T.event===R&&T.schema===E&&T.table===C&&T.filter===M)j.push(Object.assign(Object.assign({},_),{id:T.id}));else{this.unsubscribe(),t==null||t(ea.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(ea.SUBSCRIBED);return}}).receive("error",x=>{t==null||t(ea.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ea.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,a){return this._on(t,s,a)}async send(t,s={}){var a,l;if(!this._canPush()&&t.type==="broadcast"){const{event:c,payload:u}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((l=p.body)===null||l===void 0?void 0:l.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,f,h;const p=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||h===void 0)&&h.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("error",()=>c("error")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Rr.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(as.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(a=>{const l=new Km(this,as.leave,{},t);l.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),l.send(),this._canPush()||l.trigger("ok",{})})}async _fetchWithTimeout(t,s,a){const l=new AbortController,c=setTimeout(()=>l.abort(),a),u=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:l.signal}));return clearTimeout(c),u}_push(t,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Km(this,t,s,a);return this._canPush()?l.send():(l.startTimeout(),this.pushBuffer.push(l)),l}_onMessage(t,s,a){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,a){var l,c;const u=t.toLocaleLowerCase(),{close:f,error:h,leave:p,join:x}=as;if(a&&[f,h,p,x].indexOf(u)>=0&&a!==this._joinRef())return;let b=this._onMessage(u,s,a);if(s&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(w=>{var j,N,_;return((j=w.filter)===null||j===void 0?void 0:j.event)==="*"||((_=(N=w.filter)===null||N===void 0?void 0:N.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===u}).map(w=>w.callback(b,a)):(c=this.bindings[u])===null||c===void 0||c.filter(w=>{var j,N,_,R,E,C;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const M=w.id,T=(j=w.filter)===null||j===void 0?void 0:j.event;return M&&((N=s.ids)===null||N===void 0?void 0:N.includes(M))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((_=s.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const M=(E=(R=w==null?void 0:w.filter)===null||R===void 0?void 0:R.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return M==="*"||M===((C=s==null?void 0:s.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof b=="object"&&"ids"in b){const j=b.data,{schema:N,table:_,commit_timestamp:R,type:E,errors:C}=j;b=Object.assign(Object.assign({},{schema:N,table:_,commit_timestamp:R,eventType:E,new:{},old:{},errors:C}),this._getPayloadRecords(j))}w.callback(b,a)})}_isClosed(){return this.state===Rr.closed}_isJoined(){return this.state===Rr.joined}_isJoining(){return this.state===Rr.joining}_isLeaving(){return this.state===Rr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,a){const l=t.toLocaleLowerCase(),c={type:l,filter:s,callback:a};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(t,s){const a=t.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&Ng.isEqual(l.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const a in t)if(t[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(as.close,{},t)}_onError(t){this._on(as.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=U0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=U0(t.columns,t.old_record)),s}}const GT=()=>{},WT=typeof WebSocket<"u",XT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KT{constructor(t,s){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=IT,this.params={},this.timeout=Ij,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=GT,this.conn=null,this.sendBuffer=[],this.serializer=new $T,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=c=>{let u;return c?u=c:typeof fetch>"u"?u=(...f)=>$l(async()=>{const{default:h}=await Promise.resolve().then(()=>Zl);return{default:h}},void 0).then(({default:h})=>h(...f)):u=fetch,(...f)=>u(...f)},this.endPoint=`${t}/${Pp.websocket}`,this.httpEndpoint=$j(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const l=(a=s==null?void 0:s.params)===null||a===void 0?void 0:a.apikey;if(l&&(this.accessTokenValue=l,this.apiKey=l),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:c=>[1e3,2e3,5e3,1e4][c-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(c,u)=>u(JSON.stringify(c)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new zj(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(WT){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new QT(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),$l(async()=>{const{default:t}=await import("./browser-DF0-TKWN.js").then(s=>s.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zT}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),t}log(t,s,a){this.logger(t,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Dl.connecting:return Ri.Connecting;case Dl.open:return Ri.Open;case Dl.closing:return Ri.Closing;default:return Ri.Closed}}isConnected(){return this.connectionState()===Ri.Open}channel(t,s={config:{}}){const a=new Ng(`realtime:${t}`,s,this);return this.channels.push(a),a}push(t){const{topic:s,event:a,payload:l,ref:c}=t,u=()=>{this.encode(t,f=>{var h;(h=this.conn)===null||h===void 0||h.send(f)})};this.log("push",`${s} ${a} (${c})`,l),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let a=null;try{a=JSON.parse(atob(s.split(".")[1]))}catch{}if(a&&a.exp&&!(Math.floor(Date.now()/1e3)-a.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`);this.accessTokenValue=s,this.channels.forEach(l=>{s&&l.updateJoinPayload({access_token:s}),l.joinedOnce&&l._isJoined()&&l._push(as.access_token,{access_token:s})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(UT,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:a,event:l,payload:c,ref:u}=s;u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${c.status||""} ${a} ${l} ${u&&"("+u+")"||""}`,c),this.channels.filter(f=>f._isMember(a)).forEach(f=>f._trigger(l,c,u)),this.stateChangeCallbacks.message.forEach(f=>f(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(as.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const a=t.match(/\?/)?"&":"?",l=new URLSearchParams(s);return`${t}${a}${l}`}_workerObjectUrl(t){let s;if(t)s=t;else{const a=new Blob([XT],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}}class QT{constructor(t,s,a){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Dl.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=a.close}}class _g extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Bn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class ZT extends _g{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ip extends _g{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var JT=function(e,t,s,a){function l(c){return c instanceof s?c:new s(function(u){u(c)})}return new(s||(s=Promise))(function(c,u){function f(x){try{p(a.next(x))}catch(v){u(v)}}function h(x){try{p(a.throw(x))}catch(v){u(v)}}function p(x){x.done?c(x.value):l(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const Bj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>$l(async()=>{const{default:a}=await Promise.resolve().then(()=>Zl);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)},eM=()=>JT(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $l(()=>Promise.resolve().then(()=>Zl),void 0)).Response:Response}),zp=e=>{if(Array.isArray(e))return e.map(s=>zp(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,a])=>{const l=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));t[l]=zp(a)}),t};var Ii=function(e,t,s,a){function l(c){return c instanceof s?c:new s(function(u){u(c)})}return new(s||(s=Promise))(function(c,u){function f(x){try{p(a.next(x))}catch(v){u(v)}}function h(x){try{p(a.throw(x))}catch(v){u(v)}}function p(x){x.done?c(x.value):l(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const Qm=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tM=(e,t,s)=>Ii(void 0,void 0,void 0,function*(){const a=yield eM();e instanceof a&&!(s!=null&&s.noResolveJson)?e.json().then(l=>{t(new ZT(Qm(l),e.status||500))}).catch(l=>{t(new Ip(Qm(l),l))}):t(new Ip(Qm(e),e))}),nM=(e,t,s,a)=>{const l={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a&&(l.body=JSON.stringify(a)),Object.assign(Object.assign({},l),s))};function Dc(e,t,s,a,l,c){return Ii(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(s,nM(t,a,l,c)).then(h=>{if(!h.ok)throw h;return a!=null&&a.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>tM(h,f,a))})})}function Pd(e,t,s,a){return Ii(this,void 0,void 0,function*(){return Dc(e,"GET",t,s,a)})}function Ha(e,t,s,a,l){return Ii(this,void 0,void 0,function*(){return Dc(e,"POST",t,a,l,s)})}function rM(e,t,s,a,l){return Ii(this,void 0,void 0,function*(){return Dc(e,"PUT",t,a,l,s)})}function sM(e,t,s,a){return Ii(this,void 0,void 0,function*(){return Dc(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function Hj(e,t,s,a,l){return Ii(this,void 0,void 0,function*(){return Dc(e,"DELETE",t,a,l,s)})}var pr=function(e,t,s,a){function l(c){return c instanceof s?c:new s(function(u){u(c)})}return new(s||(s=Promise))(function(c,u){function f(x){try{p(a.next(x))}catch(v){u(v)}}function h(x){try{p(a.throw(x))}catch(v){u(v)}}function p(x){x.done?c(x.value):l(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const aM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},q0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class iM{constructor(t,s={},a,l){this.url=t,this.headers=s,this.bucketId=a,this.fetch=Bj(l)}uploadOrUpdate(t,s,a,l){return pr(this,void 0,void 0,function*(){try{let c;const u=Object.assign(Object.assign({},q0),l);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),h&&c.append("metadata",this.encodeMetadata(h)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",u.cacheControl),h&&c.append("metadata",this.encodeMetadata(h))):(c=a,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,h&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),l!=null&&l.headers&&(f=Object.assign(Object.assign({},f),l.headers));const p=this._removeEmptyFolders(s),x=this._getFinalPath(p),v=yield this.fetch(`${this.url}/object/${x}`,Object.assign({method:t,body:c,headers:f},u!=null&&u.duplex?{duplex:u.duplex}:{})),b=yield v.json();return v.ok?{data:{path:p,id:b.Id,fullPath:b.Key},error:null}:{data:null,error:b}}catch(c){if(Bn(c))return{data:null,error:c};throw c}})}upload(t,s,a){return pr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,a)})}uploadToSignedUrl(t,s,a,l){return pr(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",s);try{let h;const p=Object.assign({upsert:q0.upsert},l),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&a instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",a)):typeof FormData<"u"&&a instanceof FormData?(h=a,h.append("cacheControl",p.cacheControl)):(h=a,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType);const v=yield this.fetch(f.toString(),{method:"PUT",body:h,headers:x}),b=yield v.json();return v.ok?{data:{path:c,fullPath:b.Key},error:null}:{data:null,error:b}}catch(h){if(Bn(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,s){return pr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const l=Object.assign({},this.headers);s!=null&&s.upsert&&(l["x-upsert"]="true");const c=yield Ha(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:l}),u=new URL(this.url+c.url),f=u.searchParams.get("token");if(!f)throw new _g("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:f},error:null}}catch(a){if(Bn(a))return{data:null,error:a};throw a}})}update(t,s,a){return pr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,a)})}move(t,s,a){return pr(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(Bn(l))return{data:null,error:l};throw l}})}copy(t,s,a){return pr(this,void 0,void 0,function*(){try{return{data:{path:(yield Ha(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(Bn(l))return{data:null,error:l};throw l}})}createSignedUrl(t,s,a){return pr(this,void 0,void 0,function*(){try{let l=this._getFinalPath(t),c=yield Ha(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:s},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const u=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(l){if(Bn(l))return{data:null,error:l};throw l}})}createSignedUrls(t,s,a){return pr(this,void 0,void 0,function*(){try{const l=yield Ha(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),c=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:l.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${c}`):null})),error:null}}catch(l){if(Bn(l))return{data:null,error:l};throw l}})}download(t,s){return pr(this,void 0,void 0,function*(){const l=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),u=c?`?${c}`:"";try{const f=this._getFinalPath(t);return{data:yield(yield Pd(this.fetch,`${this.url}/${l}/${f}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(Bn(f))return{data:null,error:f};throw f}})}info(t){return pr(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const a=yield Pd(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:zp(a),error:null}}catch(a){if(Bn(a))return{data:null,error:a};throw a}})}exists(t){return pr(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield sM(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(Bn(a)&&a instanceof Ip){const l=a.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,s){const a=this._getFinalPath(t),l=[],c=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";c!==""&&l.push(c);const f=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});h!==""&&l.push(h);let p=l.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${a}${p}`)}}}remove(t){return pr(this,void 0,void 0,function*(){try{return{data:yield Hj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(Bn(s))return{data:null,error:s};throw s}})}list(t,s,a){return pr(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},aM),s),{prefix:t||""});return{data:yield Ha(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},a),error:null}}catch(l){if(Bn(l))return{data:null,error:l};throw l}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const lM="2.7.1",oM={"X-Client-Info":`storage-js/${lM}`};var Nl=function(e,t,s,a){function l(c){return c instanceof s?c:new s(function(u){u(c)})}return new(s||(s=Promise))(function(c,u){function f(x){try{p(a.next(x))}catch(v){u(v)}}function h(x){try{p(a.throw(x))}catch(v){u(v)}}function p(x){x.done?c(x.value):l(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class cM{constructor(t,s={},a){this.url=t,this.headers=Object.assign(Object.assign({},oM),s),this.fetch=Bj(a)}listBuckets(){return Nl(this,void 0,void 0,function*(){try{return{data:yield Pd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Bn(t))return{data:null,error:t};throw t}})}getBucket(t){return Nl(this,void 0,void 0,function*(){try{return{data:yield Pd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(Bn(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Nl(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(Bn(a))return{data:null,error:a};throw a}})}updateBucket(t,s){return Nl(this,void 0,void 0,function*(){try{return{data:yield rM(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(Bn(a))return{data:null,error:a};throw a}})}emptyBucket(t){return Nl(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Bn(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Nl(this,void 0,void 0,function*(){try{return{data:yield Hj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(Bn(s))return{data:null,error:s};throw s}})}}class uM extends cM{constructor(t,s={},a){super(t,s,a)}from(t){return new iM(this.url,this.headers,t,this.fetch)}}const dM="2.49.3";let oc="";typeof Deno<"u"?oc="deno":typeof document<"u"?oc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oc="react-native":oc="node";const fM={"X-Client-Info":`supabase-js-${oc}/${dM}`},hM={headers:fM},mM={schema:"public"},pM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},gM={};var xM=function(e,t,s,a){function l(c){return c instanceof s?c:new s(function(u){u(c)})}return new(s||(s=Promise))(function(c,u){function f(x){try{p(a.next(x))}catch(v){u(v)}}function h(x){try{p(a.throw(x))}catch(v){u(v)}}function p(x){x.done?c(x.value):l(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const vM=e=>{let t;return e?t=e:typeof fetch>"u"?t=Aj:t=fetch,(...s)=>t(...s)},yM=()=>typeof Headers>"u"?kj:Headers,bM=(e,t,s)=>{const a=vM(s),l=yM();return(c,u)=>xM(void 0,void 0,void 0,function*(){var f;const h=(f=yield t())!==null&&f!==void 0?f:e;let p=new l(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),a(c,Object.assign(Object.assign({},u),{headers:p}))})};var wM=function(e,t,s,a){function l(c){return c instanceof s?c:new s(function(u){u(c)})}return new(s||(s=Promise))(function(c,u){function f(x){try{p(a.next(x))}catch(v){u(v)}}function h(x){try{p(a.throw(x))}catch(v){u(v)}}function p(x){x.done?c(x.value):l(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};function jM(e){return e.replace(/\/$/,"")}function NM(e,t){const{db:s,auth:a,realtime:l,global:c}=e,{db:u,auth:f,realtime:h,global:p}=t,x={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},h),l),global:Object.assign(Object.assign({},p),c),accessToken:()=>wM(this,void 0,void 0,function*(){return""})};return e.accessToken?x.accessToken=e.accessToken:delete x.accessToken,x}const qj="2.69.1",kl=30*1e3,Up=3,Zm=Up*kl,_M="http://localhost:9999",SM="supabase.auth.token",EM={"X-Client-Info":`gotrue-js/${qj}`},$p="X-Supabase-Api-Version",Fj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},CM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RM=6e5;class Sg extends Error{constructor(t,s,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function dt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class TM extends Sg{constructor(t,s,a){super(t,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function MM(e){return dt(e)&&e.name==="AuthApiError"}class Vj extends Sg{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class Qa extends Sg{constructor(t,s,a,l){super(t,a,l),this.name=s,this.status=a}}class Ua extends Qa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function AM(e){return dt(e)&&e.name==="AuthSessionMissingError"}class Jm extends Qa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dd extends Qa{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class fd extends Qa{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kM(e){return dt(e)&&e.name==="AuthImplicitGrantRedirectError"}class F0 extends Qa{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bp extends Qa{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function ep(e){return dt(e)&&e.name==="AuthRetryableFetchError"}class V0 extends Qa{constructor(t,s,a){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class fc extends Qa{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Y0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),G0=` 	
\r=`.split(""),DM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<G0.length;t+=1)e[G0[t].charCodeAt(0)]=-2;for(let t=0;t<Y0.length;t+=1)e[Y0[t].charCodeAt(0)]=t;return e})();function Yj(e,t,s){const a=DM[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function W0(e){const t=[],s=u=>{t.push(String.fromCodePoint(u))},a={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=u=>{LM(u,a,s)};for(let u=0;u<e.length;u+=1)Yj(e.charCodeAt(u),l,c);return t.join("")}function OM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function PM(e,t){for(let s=0;s<e.length;s+=1){let a=e.charCodeAt(s);if(a>55295&&a<=56319){const l=(a-55296)*1024&65535;a=(e.charCodeAt(s+1)-56320&65535|l)+65536,s+=1}OM(a,t)}}function LM(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function IM(e){const t=[],s={queue:0,queuedBits:0},a=l=>{t.push(l)};for(let l=0;l<e.length;l+=1)Yj(e.charCodeAt(l),s,a);return new Uint8Array(t)}function zM(e){const t=[];return PM(e,s=>t.push(s)),new Uint8Array(t)}function UM(e){return Math.round(Date.now()/1e3)+e}function $M(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ws=()=>typeof window<"u"&&typeof document<"u",Ni={tested:!1,writable:!1},hc=()=>{if(!ws())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ni.tested)return Ni.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ni.tested=!0,Ni.writable=!0}catch{Ni.tested=!0,Ni.writable=!1}return Ni.writable};function BM(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((l,c)=>{t[c]=l})}catch{}return s.searchParams.forEach((a,l)=>{t[l]=a}),t}const Gj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>$l(async()=>{const{default:a}=await Promise.resolve().then(()=>Zl);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)},HM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Wj=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},hd=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},md=async(e,t)=>{await e.removeItem(t)};class tf{constructor(){this.promise=new tf.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}tf.promiseConstructor=Promise;function tp(e){const t=e.split(".");if(t.length!==3)throw new fc("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!CM.test(t[a]))throw new fc("JWT not in base64url format");return{header:JSON.parse(W0(t[0])),payload:JSON.parse(W0(t[1])),signature:IM(t[2]),raw:{header:t[0],payload:t[1]}}}async function qM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function FM(e,t){return new Promise((a,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await e(c);if(!t(c,null,u)){a(u);return}}catch(u){if(!t(c,u)){l(u);return}}})()})}function VM(e){return("0"+e.toString(16)).substr(-2)}function YM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let l="";for(let c=0;c<56;c++)l+=s.charAt(Math.floor(Math.random()*a));return l}return crypto.getRandomValues(t),Array.from(t,VM).join("")}async function GM(e){const s=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",s),l=new Uint8Array(a);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function WM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await GM(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _l(e,t,s=!1){const a=YM();let l=a;s&&(l+="/PASSWORD_RECOVERY"),await Wj(e,`${t}-code-verifier`,l);const c=await WM(a);return[c,a===c?"plain":"s256"]}const XM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function KM(e){const t=e.headers.get($p);if(!t||!t.match(XM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function QM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function ZM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var JM=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(s[a[l]]=e[a[l]]);return s};const Ei=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),eA=[502,503,504];async function X0(e){var t;if(!HM(e))throw new Bp(Ei(e),0);if(eA.includes(e.status))throw new Bp(Ei(e),e.status);let s;try{s=await e.json()}catch(c){throw new Vj(Ei(c),c)}let a;const l=KM(e);if(l&&l.getTime()>=Fj["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new V0(Ei(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Ua}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new V0(Ei(s),e.status,s.weak_password.reasons);throw new TM(Ei(s),e.status||500,a)}const tA=(e,t,s,a)=>{const l={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),l.body=JSON.stringify(a),Object.assign(Object.assign({},l),s))};async function Nt(e,t,s,a){var l;const c=Object.assign({},a==null?void 0:a.headers);c[$p]||(c[$p]=Fj["2024-01-01"].name),a!=null&&a.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const u=(l=a==null?void 0:a.query)!==null&&l!==void 0?l:{};a!=null&&a.redirectTo&&(u.redirect_to=a.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await nA(e,t,s+f,{headers:c,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(h):{data:Object.assign({},h),error:null}}async function nA(e,t,s,a,l,c){const u=tA(t,a,l,c);let f;try{f=await e(s,Object.assign({},u))}catch(h){throw console.error(h),new Bp(Ei(h),0)}if(f.ok||await X0(f),a!=null&&a.noResolveJson)return f;try{return await f.json()}catch(h){await X0(h)}}function $a(e){var t;let s=null;iA(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=UM(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:a},error:null}}function K0(e){const t=$a(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Fa(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function rA(e){return{data:e,error:null}}function sA(e){const{action_link:t,email_otp:s,hashed_token:a,redirect_to:l,verification_type:c}=e,u=JM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:s,hashed_token:a,redirect_to:l,verification_type:c},h=Object.assign({},u);return{data:{properties:f,user:h},error:null}}function aA(e){return e}function iA(e){return e.access_token&&e.refresh_token&&e.expires_in}var lA=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(s[a[l]]=e[a[l]]);return s};class oA{constructor({url:t="",headers:s={},fetch:a}){this.url=t,this.headers=s,this.fetch=Gj(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s="global"){try{return await Nt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,s={}){try{return await Nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Fa})}catch(a){if(dt(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:s}=t,a=lA(t,["options"]),l=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(l.new_email=a==null?void 0:a.newEmail,delete l.newEmail),await Nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:sA,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(dt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await Nt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Fa})}catch(s){if(dt(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,a,l,c,u,f,h;try{const p={nextPage:null,lastPage:0,total:0},x=await Nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(c=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:aA});if(x.error)throw x.error;const v=await x.json(),b=(u=x.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(h=(f=x.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(j=>{const N=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);p[`${_}Page`]=N}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(dt(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){try{return await Nt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Fa})}catch(s){if(dt(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){try{return await Nt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Fa})}catch(a){if(dt(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,s=!1){try{return await Nt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Fa})}catch(a){if(dt(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){try{const{data:s,error:a}=await Nt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:s,error:a}}catch(s){if(dt(s))return{data:null,error:s};throw s}}async _deleteFactor(t){try{return{data:await Nt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}}}const cA={getItem:e=>hc()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{hc()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{hc()&&globalThis.localStorage.removeItem(e)}};function Q0(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function uA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Sl={debug:!!(globalThis&&hc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Xj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class dA extends Xj{}async function fA(e,t,s){Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async l=>{if(l){Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,l.name);try{return await s()}finally{Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,l.name)}}else{if(t===0)throw Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new dA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Sl.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}uA();const hA={url:_M,storageKey:SM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:EM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Z0(e,t,s){return await s()}class yc{constructor(t){var s,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yc.nextInstanceID,yc.nextInstanceID+=1,this.instanceID>0&&ws()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},hA),t);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new oA({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Gj(l.fetch),this.lock=l.lock||Z0,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:ws()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=fA:this.lock=Z0,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?l.storage?this.storage=l.storage:hc()?this.storage=cA:(this.memoryStorage={},this.storage=Q0(this.memoryStorage)):(this.memoryStorage={},this.storage=Q0(this.memoryStorage)),ws()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qj}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=BM(window.location.href);let a="none";if(this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce"),ws()&&this.detectSessionInUrl&&a!=="none"){const{data:l,error:c}=await this._getSessionFromURL(s,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),kM(c)){const h=(t=c.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:u,redirectType:f}=l;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return dt(s)?{error:s}:{error:new Vj("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,a,l;try{const c=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(l=t==null?void 0:t.options)===null||l===void 0?void 0:l.captchaToken}},xform:$a}),{data:u,error:f}=c;if(f||!u)return{data:{user:null,session:null},error:f};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(dt(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(t){var s,a,l;try{let c;if("email"in t){const{email:x,password:v,options:b}=t;let w=null,j=null;this.flowType==="pkce"&&([w,j]=await _l(this.storage,this.storageKey)),c=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:x,password:v,data:(s=b==null?void 0:b.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:w,code_challenge_method:j},xform:$a})}else if("phone"in t){const{phone:x,password:v,options:b}=t;c=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:v,data:(a=b==null?void 0:b.data)!==null&&a!==void 0?a:{},channel:(l=b==null?void 0:b.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:$a})}else throw new dd("You must provide either an email or phone number and a password");const{data:u,error:f}=c;if(f||!u)return{data:{user:null,session:null},error:f};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(dt(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(t){try{let s;if("email"in t){const{email:c,password:u,options:f}=t;s=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:K0})}else if("phone"in t){const{phone:c,password:u,options:f}=t;s=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:K0})}else throw new dd("You must provide either an email or phone number and a password");const{data:a,error:l}=s;return l?{data:{user:null,session:null},error:l}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Jm}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:l})}catch(s){if(dt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,a,l,c;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const s=await hd(this.storage,`${this.storageKey}-code-verifier`),[a,l]=(s??"").split("/");try{const{data:c,error:u}=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:$a});if(await md(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new Jm}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:u})}catch(c){if(dt(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(t){try{const{options:s,provider:a,token:l,access_token:c,nonce:u}=t,f=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:l,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:$a}),{data:h,error:p}=f;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Jm}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(s){if(dt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,a,l,c,u;try{if("email"in t){const{email:f,options:h}=t;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await _l(this.storage,this.storageKey));const{error:v}=await Nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:x},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in t){const{phone:f,options:h}=t,{data:p,error:x}=await Nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(l=h==null?void 0:h.data)!==null&&l!==void 0?l:{},create_user:(c=h==null?void 0:h.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(u=h==null?void 0:h.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:x}}throw new dd("You must provide either an email or phone number.")}catch(f){if(dt(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(t){var s,a;try{let l,c;"options"in t&&(l=(s=t.options)===null||s===void 0?void 0:s.redirectTo,c=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:u,error:f}=await Nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:$a});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,p=u.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(l){if(dt(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(t){var s,a,l;try{let c=null,u=null;return this.flowType==="pkce"&&([c,u]=await _l(this.storage,this.storageKey)),await Nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((l=t==null?void 0:t.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:rA})}catch(c){if(dt(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;if(a)throw a;if(!s)throw new Ua;const{error:l}=await Nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:l}})}catch(t){if(dt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:a,type:l,options:c}=t,{error:u}=await Nt(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:a,type:l,options:c}=t,{data:u,error:f}=await Nt(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new dd("You must provide either an email or phone number and a type")}catch(s){if(dt(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await hd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Zm:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.storage.isServer){let u=this.suppressGetSessionWarning;t=new Proxy(t,{get:(h,p,x)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,x))})}return{data:{session:t},error:null}}const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Fa}):await this._useSession(async s=>{var a,l,c;const{data:u,error:f}=s;if(f)throw f;return!(!((a=u.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ua}:await Nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:Fa})})}catch(s){if(dt(s))return AM(s)&&(await this._removeSession(),await md(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async a=>{const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new Ua;const u=l.session;let f=null,h=null;this.flowType==="pkce"&&t.email!=null&&([f,h]=await _l(this.storage,this.storageKey));const{data:p,error:x}=await Nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:h}),jwt:u.access_token,xform:Fa});if(x)throw x;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(a){if(dt(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ua;const s=Date.now()/1e3;let a=s,l=!0,c=null;const{payload:u}=tp(t.access_token);if(u.exp&&(a=u.exp,l=a<=s),l){const{session:f,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:h}=await this._getUser(t.access_token);if(h)throw h;c={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(s){if(dt(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var a;if(!t){const{data:u,error:f}=s;if(f)throw f;t=(a=u.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new Ua;const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(dt(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!ws())throw new fd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new fd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new F0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fd("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new F0("No code detected.");const{data:E,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:l,access_token:c,refresh_token:u,expires_in:f,expires_at:h,token_type:p}=t;if(!c||!f||!u||!p)throw new fd("No session defined in URL");const x=Math.round(Date.now()/1e3),v=parseInt(f);let b=x+v;h&&(b=parseInt(h));const w=b-x;w*1e3<=kl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${v}s`);const j=b-v;x-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,b,x):x-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,b,x);const{data:N,error:_}=await this._getUser(c);if(_)throw _;const R={provider_token:a,provider_refresh_token:l,access_token:c,expires_in:v,expires_at:b,refresh_token:u,token_type:p,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:t.type},error:null}}catch(a){if(dt(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await hd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:l,error:c}=s;if(c)return{error:c};const u=(a=l.session)===null||a===void 0?void 0:a.access_token;if(u){const{error:f}=await this.admin.signOut(u,t);if(f&&!(MM(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return t!=="others"&&(await this._removeSession(),await md(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=$M(),a={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async s=>{var a,l;try{const{data:{session:c},error:u}=s;if(u)throw u;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,s={}){let a=null,l=null;this.flowType==="pkce"&&([a,l]=await _l(this.storage,this.storageKey,!0));try{return await Nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:l,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(dt(c))return{data:null,error:c};throw c}}async getUserIdentities(){var t;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:a,error:l}=await this._useSession(async c=>{var u,f,h,p,x;const{data:v,error:b}=c;if(b)throw b;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Nt(this.fetch,"GET",w,{headers:this.headers,jwt:(x=(p=v.session)===null||p===void 0?void 0:p.access_token)!==null&&x!==void 0?x:void 0})});if(l)throw l;return ws()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(dt(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var a,l;const{data:c,error:u}=s;if(u)throw u;return await Nt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0})})}catch(s){if(dt(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await FM(async l=>(l>0&&await qM(200*Math.pow(2,l-1)),this._debug(s,"refreshing attempt",l),await Nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:$a})),(l,c)=>{const u=200*Math.pow(2,l);return c&&ep(c)&&Date.now()+u-a<kl})}catch(a){if(this._debug(s,"error",a),dt(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",a),ws()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await hd(this.storage,this.storageKey);if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Zm;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Zm}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),ep(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,a;if(!t)throw new Ua;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new tf;const{data:c,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!c.session)throw new Ua;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={session:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(l,"error",c),dt(c)){const u={session:null,error:c};return ep(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(u),u}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(t,s,a=!0){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:s});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,s)}catch(h){c.push(h)}});if(await Promise.all(u),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Wj(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await md(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ws()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),kl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((a.expires_at*1e3-t)/kl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${kl}ms, refresh threshold is ${Up} ticks`),l<=Up&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Xj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ws()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,a){const l=[`provider=${encodeURIComponent(s)}`];if(a!=null&&a.redirectTo&&l.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&l.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,u]=await _l(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});l.push(f.toString())}if(a!=null&&a.queryParams){const c=new URLSearchParams(a.queryParams);l.push(c.toString())}return a!=null&&a.skipBrowserRedirect&&l.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${l.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var a;const{data:l,error:c}=s;return c?{data:null,error:c}:await Nt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=l==null?void 0:l.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(dt(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var a,l;const{data:c,error:u}=s;if(u)return{data:null,error:u};const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:h,error:p}=await Nt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(a=c==null?void 0:c.session)===null||a===void 0?void 0:a.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&(!((l=h==null?void 0:h.totp)===null||l===void 0)&&l.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(s){if(dt(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:l,error:c}=s;if(c)return{data:null,error:c};const{data:u,error:f}=await Nt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=l==null?void 0:l.session)===null||a===void 0?void 0:a.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:f})})}catch(s){if(dt(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:l,error:c}=s;return c?{data:null,error:c}:await Nt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=l==null?void 0:l.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(dt(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a=(t==null?void 0:t.factors)||[],l=a.filter(u=>u.factor_type==="totp"&&u.status==="verified"),c=a.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:a,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,a;const{data:{session:l},error:c}=t;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=tp(l.access_token);let f=null;u.aal&&(f=u.aal);let h=f;((a=(s=l.user.factors)===null||s===void 0?void 0:s.filter(v=>v.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(h="aal2");const x=u.amr||[];return{data:{currentLevel:f,nextLevel:h,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(t,s={keys:[]}){let a=s.keys.find(u=>u.kid===t);if(a||(a=this.jwks.keys.find(u=>u.kid===t),a&&this.jwks_cached_at+RM>Date.now()))return a;const{data:l,error:c}=await Nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;if(!l.keys||l.keys.length===0)throw new fc("JWKS is empty");if(this.jwks=l,this.jwks_cached_at=Date.now(),a=l.keys.find(u=>u.kid===t),!a)throw new fc("No matching signing key found in JWKS");return a}async getClaims(t,s={keys:[]}){try{let a=t;if(!a){const{data:w,error:j}=await this.getSession();if(j||!w.session)return{data:null,error:j};a=w.session.access_token}const{header:l,payload:c,signature:u,raw:{header:f,payload:h}}=tp(a);if(QM(c.exp),!l.kid||l.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:w}=await this.getUser(a);if(w)throw w;return{data:{claims:c,header:l,signature:u},error:null}}const p=ZM(l.alg),x=await this.fetchJwk(l.kid,s),v=await crypto.subtle.importKey("jwk",x,p,!0,["verify"]);if(!await crypto.subtle.verify(p,v,u,zM(`${f}.${h}`)))throw new fc("Invalid JWT signature");return{data:{claims:c,header:l,signature:u},error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}}}yc.nextInstanceID=0;const mA=yc;class pA extends mA{constructor(t){super(t)}}var gA=function(e,t,s,a){function l(c){return c instanceof s?c:new s(function(u){u(c)})}return new(s||(s=Promise))(function(c,u){function f(x){try{p(a.next(x))}catch(v){u(v)}}function h(x){try{p(a.throw(x))}catch(v){u(v)}}function p(x){x.done?c(x.value):l(x.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class xA{constructor(t,s,a){var l,c,u;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const f=jM(t);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:mM,realtime:gM,auth:Object.assign(Object.assign({},pM),{storageKey:h}),global:hM},x=NM(a??{},p);this.storageKey=(l=x.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=x.global.headers)!==null&&c!==void 0?c:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=x.auth)!==null&&u!==void 0?u:{},this.headers,x.global.fetch),this.fetch=bM(s,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new PT(`${f}/rest/v1`,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),x.accessToken||this._listenForAuthEvents()}get functions(){return new NT(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new uM(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},a={}){return this.rest.rpc(t,s,a)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return gA(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(s=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:a,storage:l,storageKey:c,flowType:u,lock:f,debug:h},p,x){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pA({url:this.authUrl,headers:Object.assign(Object.assign({},v),p),storageKey:c,autoRefreshToken:t,persistSession:s,detectSessionInUrl:a,storage:l,flowType:u,lock:f,debug:h,fetch:x,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new KT(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,s,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vA=(e,t,s)=>new xA(e,t,s),yA="http://127.0.0.1:54321",bA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0",ne=vA(yA,bA),Kj=m.createContext({session:null,user:null,loading:!0}),wA=({children:e})=>{const[t,s]=m.useState(null),[a,l]=m.useState(null),[c,u]=m.useState(!0);m.useEffect(()=>{ne.auth.getSession().then(({data:{session:h}})=>{s(h),l((h==null?void 0:h.user)??null),u(!1);const{data:{subscription:p}}=ne.auth.onAuthStateChange((x,v)=>{console.log("Auth state changed:",x,v),s(v),l((v==null?void 0:v.user)??null)});return()=>{p==null||p.unsubscribe()}}).catch(h=>{console.error("Error getting initial session:",h),u(!1)})},[]);const f={session:t,user:a,loading:c};return n.jsx(Kj.Provider,{value:f,children:e})},Eg=()=>{const e=m.useContext(Kj);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};function jA(e,t){const s=m.createContext(t),a=c=>{const{children:u,...f}=c,h=m.useMemo(()=>f,Object.values(f));return n.jsx(s.Provider,{value:h,children:u})};a.displayName=e+"Provider";function l(c){const u=m.useContext(s);if(u)return u;if(t!==void 0)return t;throw new Error(`\`${c}\` must be used within \`${e}\``)}return[a,l]}function ur(e,t=[]){let s=[];function a(c,u){const f=m.createContext(u),h=s.length;s=[...s,u];const p=v=>{var R;const{scope:b,children:w,...j}=v,N=((R=b==null?void 0:b[e])==null?void 0:R[h])||f,_=m.useMemo(()=>j,Object.values(j));return n.jsx(N.Provider,{value:_,children:w})};p.displayName=c+"Provider";function x(v,b){var N;const w=((N=b==null?void 0:b[e])==null?void 0:N[h])||f,j=m.useContext(w);if(j)return j;if(u!==void 0)return u;throw new Error(`\`${v}\` must be used within \`${c}\``)}return[p,x]}const l=()=>{const c=s.map(u=>m.createContext(u));return function(f){const h=(f==null?void 0:f[e])||c;return m.useMemo(()=>({[`__scope${e}`]:{...f,[e]:h}}),[f,h])}};return l.scopeName=e,[a,NA(l,...t)]}function NA(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const a=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(c){const u=a.reduce((f,{useScope:h,scopeName:p})=>{const v=h(c)[`__scope${p}`];return{...f,...v}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:u}),[u])}};return s.scopeName=t.scopeName,s}function Ar(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...s)=>{var a;return(a=t.current)==null?void 0:a.call(t,...s)},[])}var Xn=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{};function J0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function nf(...e){return t=>{let s=!1;const a=e.map(l=>{const c=J0(l,t);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let l=0;l<a.length;l++){const c=a[l];typeof c=="function"?c():J0(e[l],null)}}}}function _t(...e){return m.useCallback(nf(...e),e)}var Ts=m.forwardRef((e,t)=>{const{children:s,...a}=e,l=m.Children.toArray(s),c=l.find(_A);if(c){const u=c.props.children,f=l.map(h=>h===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:h);return n.jsx(Hp,{...a,ref:t,children:m.isValidElement(u)?m.cloneElement(u,void 0,f):null})}return n.jsx(Hp,{...a,ref:t,children:s})});Ts.displayName="Slot";var Hp=m.forwardRef((e,t)=>{const{children:s,...a}=e;if(m.isValidElement(s)){const l=EA(s),c=SA(a,s.props);return s.type!==m.Fragment&&(c.ref=t?nf(t,l):l),m.cloneElement(s,c)}return m.Children.count(s)>1?m.Children.only(null):null});Hp.displayName="SlotClone";var Cg=({children:e})=>n.jsx(n.Fragment,{children:e});function _A(e){return m.isValidElement(e)&&e.type===Cg}function SA(e,t){const s={...t};for(const a in t){const l=e[a],c=t[a];/^on[A-Z]/.test(a)?l&&c?s[a]=(...f)=>{c(...f),l(...f)}:l&&(s[a]=l):a==="style"?s[a]={...l,...c}:a==="className"&&(s[a]=[l,c].filter(Boolean).join(" "))}return{...e,...s}}function EA(e){var a,l;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(l=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:l.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var CA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Je=CA.reduce((e,t)=>{const s=m.forwardRef((a,l)=>{const{asChild:c,...u}=a,f=c?Ts:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(f,{...u,ref:l})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function Qj(e,t){e&&Ss.flushSync(()=>e.dispatchEvent(t))}var Rg="Avatar",[RA,oH]=ur(Rg),[TA,Zj]=RA(Rg),Jj=m.forwardRef((e,t)=>{const{__scopeAvatar:s,...a}=e,[l,c]=m.useState("idle");return n.jsx(TA,{scope:s,imageLoadingStatus:l,onImageLoadingStatusChange:c,children:n.jsx(Je.span,{...a,ref:t})})});Jj.displayName=Rg;var eN="AvatarImage",tN=m.forwardRef((e,t)=>{const{__scopeAvatar:s,src:a,onLoadingStatusChange:l=()=>{},...c}=e,u=Zj(eN,s),f=MA(a,c.referrerPolicy),h=Ar(p=>{l(p),u.onImageLoadingStatusChange(p)});return Xn(()=>{f!=="idle"&&h(f)},[f,h]),f==="loaded"?n.jsx(Je.img,{...c,ref:t,src:a}):null});tN.displayName=eN;var nN="AvatarFallback",rN=m.forwardRef((e,t)=>{const{__scopeAvatar:s,delayMs:a,...l}=e,c=Zj(nN,s),[u,f]=m.useState(a===void 0);return m.useEffect(()=>{if(a!==void 0){const h=window.setTimeout(()=>f(!0),a);return()=>window.clearTimeout(h)}},[a]),u&&c.imageLoadingStatus!=="loaded"?n.jsx(Je.span,{...l,ref:t}):null});rN.displayName=nN;function MA(e,t){const[s,a]=m.useState("idle");return Xn(()=>{if(!e){a("error");return}let l=!0;const c=new window.Image,u=f=>()=>{l&&a(f)};return a("loading"),c.onload=u("loaded"),c.onerror=u("error"),c.src=e,t&&(c.referrerPolicy=t),()=>{l=!1}},[e,t]),s}var AA=Jj,kA=tN,DA=rN;function sN(e){var t,s,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(s=sN(e[t]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function aN(){for(var e,t,s=0,a="",l=arguments.length;s<l;s++)(e=arguments[s])&&(t=sN(e))&&(a&&(a+=" "),a+=t);return a}const Tg="-",OA=e=>{const t=LA(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:u=>{const f=u.split(Tg);return f[0]===""&&f.length!==1&&f.shift(),iN(f,t)||PA(u)},getConflictingClassGroupIds:(u,f)=>{const h=s[u]||[];return f&&a[u]?[...h,...a[u]]:h}}},iN=(e,t)=>{var u;if(e.length===0)return t.classGroupId;const s=e[0],a=t.nextPart.get(s),l=a?iN(e.slice(1),a):void 0;if(l)return l;if(t.validators.length===0)return;const c=e.join(Tg);return(u=t.validators.find(({validator:f})=>f(c)))==null?void 0:u.classGroupId},ew=/^\[(.+)\]$/,PA=e=>{if(ew.test(e)){const t=ew.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},LA=e=>{const{theme:t,classGroups:s}=e,a={nextPart:new Map,validators:[]};for(const l in s)qp(s[l],a,l,t);return a},qp=(e,t,s,a)=>{e.forEach(l=>{if(typeof l=="string"){const c=l===""?t:tw(t,l);c.classGroupId=s;return}if(typeof l=="function"){if(IA(l)){qp(l(a),t,s,a);return}t.validators.push({validator:l,classGroupId:s});return}Object.entries(l).forEach(([c,u])=>{qp(u,tw(t,c),s,a)})})},tw=(e,t)=>{let s=e;return t.split(Tg).forEach(a=>{s.nextPart.has(a)||s.nextPart.set(a,{nextPart:new Map,validators:[]}),s=s.nextPart.get(a)}),s},IA=e=>e.isThemeGetter,zA=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,a=new Map;const l=(c,u)=>{s.set(c,u),t++,t>e&&(t=0,a=s,s=new Map)};return{get(c){let u=s.get(c);if(u!==void 0)return u;if((u=a.get(c))!==void 0)return l(c,u),u},set(c,u){s.has(c)?s.set(c,u):l(c,u)}}},Fp="!",Vp=":",UA=Vp.length,$A=e=>{const{prefix:t,experimentalParseClassName:s}=e;let a=l=>{const c=[];let u=0,f=0,h=0,p;for(let j=0;j<l.length;j++){let N=l[j];if(u===0&&f===0){if(N===Vp){c.push(l.slice(h,j)),h=j+UA;continue}if(N==="/"){p=j;continue}}N==="["?u++:N==="]"?u--:N==="("?f++:N===")"&&f--}const x=c.length===0?l:l.substring(h),v=BA(x),b=v!==x,w=p&&p>h?p-h:void 0;return{modifiers:c,hasImportantModifier:b,baseClassName:v,maybePostfixModifierPosition:w}};if(t){const l=t+Vp,c=a;a=u=>u.startsWith(l)?c(u.substring(l.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(s){const l=a;a=c=>s({className:c,parseClassName:l})}return a},BA=e=>e.endsWith(Fp)?e.substring(0,e.length-1):e.startsWith(Fp)?e.substring(1):e,HA=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const l=[];let c=[];return a.forEach(u=>{u[0]==="["||t[u]?(l.push(...c.sort(),u),c=[]):c.push(u)}),l.push(...c.sort()),l}},qA=e=>({cache:zA(e.cacheSize),parseClassName:$A(e),sortModifiers:HA(e),...OA(e)}),FA=/\s+/,VA=(e,t)=>{const{parseClassName:s,getClassGroupId:a,getConflictingClassGroupIds:l,sortModifiers:c}=t,u=[],f=e.trim().split(FA);let h="";for(let p=f.length-1;p>=0;p-=1){const x=f[p],{isExternal:v,modifiers:b,hasImportantModifier:w,baseClassName:j,maybePostfixModifierPosition:N}=s(x);if(v){h=x+(h.length>0?" "+h:h);continue}let _=!!N,R=a(_?j.substring(0,N):j);if(!R){if(!_){h=x+(h.length>0?" "+h:h);continue}if(R=a(j),!R){h=x+(h.length>0?" "+h:h);continue}_=!1}const E=c(b).join(":"),C=w?E+Fp:E,M=C+R;if(u.includes(M))continue;u.push(M);const T=l(R,_);for(let z=0;z<T.length;++z){const q=T[z];u.push(C+q)}h=x+(h.length>0?" "+h:h)}return h};function YA(){let e=0,t,s,a="";for(;e<arguments.length;)(t=arguments[e++])&&(s=lN(t))&&(a&&(a+=" "),a+=s);return a}const lN=e=>{if(typeof e=="string")return e;let t,s="";for(let a=0;a<e.length;a++)e[a]&&(t=lN(e[a]))&&(s&&(s+=" "),s+=t);return s};function GA(e,...t){let s,a,l,c=u;function u(h){const p=t.reduce((x,v)=>v(x),e());return s=qA(p),a=s.cache.get,l=s.cache.set,c=f,f(h)}function f(h){const p=a(h);if(p)return p;const x=VA(h,s);return l(h,x),x}return function(){return c(YA.apply(null,arguments))}}const $n=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},oN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,cN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,WA=/^\d+\/\d+$/,XA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,QA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ZA=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,JA=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,El=e=>WA.test(e),jt=e=>!!e&&!Number.isNaN(Number(e)),_i=e=>!!e&&Number.isInteger(Number(e)),nw=e=>e.endsWith("%")&&jt(e.slice(0,-1)),Ia=e=>XA.test(e),e4=()=>!0,t4=e=>KA.test(e)&&!QA.test(e),Mg=()=>!1,n4=e=>ZA.test(e),r4=e=>JA.test(e),s4=e=>!Ue(e)&&!$e(e),a4=e=>Jl(e,fN,Mg),Ue=e=>oN.test(e),Si=e=>Jl(e,hN,t4),np=e=>Jl(e,g4,jt),i4=e=>Jl(e,uN,Mg),l4=e=>Jl(e,dN,r4),o4=e=>Jl(e,Mg,n4),$e=e=>cN.test(e),pd=e=>eo(e,hN),c4=e=>eo(e,x4),u4=e=>eo(e,uN),d4=e=>eo(e,fN),f4=e=>eo(e,dN),h4=e=>eo(e,v4,!0),Jl=(e,t,s)=>{const a=oN.exec(e);return a?a[1]?t(a[1]):s(a[2]):!1},eo=(e,t,s=!1)=>{const a=cN.exec(e);return a?a[1]?t(a[1]):s:!1},uN=e=>e==="position",m4=new Set(["image","url"]),dN=e=>m4.has(e),p4=new Set(["length","size","percentage"]),fN=e=>p4.has(e),hN=e=>e==="length",g4=e=>e==="number",x4=e=>e==="family-name",v4=e=>e==="shadow",y4=()=>{const e=$n("color"),t=$n("font"),s=$n("text"),a=$n("font-weight"),l=$n("tracking"),c=$n("leading"),u=$n("breakpoint"),f=$n("container"),h=$n("spacing"),p=$n("radius"),x=$n("shadow"),v=$n("inset-shadow"),b=$n("drop-shadow"),w=$n("blur"),j=$n("perspective"),N=$n("aspect"),_=$n("ease"),R=$n("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto","contain","none"],z=()=>[$e,Ue,h],q=()=>[El,"full","auto",...z()],F=()=>[_i,"none","subgrid",$e,Ue],U=()=>["auto",{span:["full",_i,$e,Ue]},$e,Ue],G=()=>[_i,"auto",$e,Ue],ce=()=>["auto","min","max","fr",$e,Ue],re=()=>["start","end","center","between","around","evenly","stretch","baseline"],O=()=>["start","end","center","stretch"],ie=()=>["auto",...z()],ue=()=>[El,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...z()],P=()=>[e,$e,Ue],X=()=>[nw,Si],V=()=>["","none","full",p,$e,Ue],te=()=>["",jt,pd,Si],k=()=>["solid","dashed","dotted","double"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>["","none",w,$e,Ue],H=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",$e,Ue],D=()=>["none",jt,$e,Ue],I=()=>["none",jt,$e,Ue],$=()=>[jt,$e,Ue],K=()=>[El,"full",...z()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ia],breakpoint:[Ia],color:[e4],container:[Ia],"drop-shadow":[Ia],ease:["in","out","in-out"],font:[s4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ia],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ia],shadow:[Ia],spacing:["px",jt],text:[Ia],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",El,Ue,$e,N]}],container:["container"],columns:[{columns:[jt,Ue,$e,f]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...C(),Ue,$e]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:q()}],"inset-x":[{"inset-x":q()}],"inset-y":[{"inset-y":q()}],start:[{start:q()}],end:[{end:q()}],top:[{top:q()}],right:[{right:q()}],bottom:[{bottom:q()}],left:[{left:q()}],visibility:["visible","invisible","collapse"],z:[{z:[_i,"auto",$e,Ue]}],basis:[{basis:[El,"full","auto",f,...z()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[jt,El,"auto","initial","none",Ue]}],grow:[{grow:["",jt,$e,Ue]}],shrink:[{shrink:["",jt,$e,Ue]}],order:[{order:[_i,"first","last","none",$e,Ue]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ce()}],"auto-rows":[{"auto-rows":ce()}],gap:[{gap:z()}],"gap-x":[{"gap-x":z()}],"gap-y":[{"gap-y":z()}],"justify-content":[{justify:[...re(),"normal"]}],"justify-items":[{"justify-items":[...O(),"normal"]}],"justify-self":[{"justify-self":["auto",...O()]}],"align-content":[{content:["normal",...re()]}],"align-items":[{items:[...O(),"baseline"]}],"align-self":[{self:["auto",...O(),"baseline"]}],"place-content":[{"place-content":re()}],"place-items":[{"place-items":[...O(),"baseline"]}],"place-self":[{"place-self":["auto",...O()]}],p:[{p:z()}],px:[{px:z()}],py:[{py:z()}],ps:[{ps:z()}],pe:[{pe:z()}],pt:[{pt:z()}],pr:[{pr:z()}],pb:[{pb:z()}],pl:[{pl:z()}],m:[{m:ie()}],mx:[{mx:ie()}],my:[{my:ie()}],ms:[{ms:ie()}],me:[{me:ie()}],mt:[{mt:ie()}],mr:[{mr:ie()}],mb:[{mb:ie()}],ml:[{ml:ie()}],"space-x":[{"space-x":z()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":z()}],"space-y-reverse":["space-y-reverse"],size:[{size:ue()}],w:[{w:[f,"screen",...ue()]}],"min-w":[{"min-w":[f,"screen","none",...ue()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[u]},...ue()]}],h:[{h:["screen",...ue()]}],"min-h":[{"min-h":["screen","none",...ue()]}],"max-h":[{"max-h":["screen",...ue()]}],"font-size":[{text:["base",s,pd,Si]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,$e,np]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",nw,Ue]}],"font-family":[{font:[c4,Ue,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,$e,Ue]}],"line-clamp":[{"line-clamp":[jt,"none",$e,np]}],leading:[{leading:[c,...z()]}],"list-image":[{"list-image":["none",$e,Ue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",$e,Ue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:P()}],"text-color":[{text:P()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...k(),"wavy"]}],"text-decoration-thickness":[{decoration:[jt,"from-font","auto",$e,Si]}],"text-decoration-color":[{decoration:P()}],"underline-offset":[{"underline-offset":[jt,"auto",$e,Ue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$e,Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$e,Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...C(),u4,i4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",d4,a4]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_i,$e,Ue],radial:["",$e,Ue],conic:[_i,$e,Ue]},f4,l4]}],"bg-color":[{bg:P()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:P()}],"gradient-via":[{via:P()}],"gradient-to":[{to:P()}],rounded:[{rounded:V()}],"rounded-s":[{"rounded-s":V()}],"rounded-e":[{"rounded-e":V()}],"rounded-t":[{"rounded-t":V()}],"rounded-r":[{"rounded-r":V()}],"rounded-b":[{"rounded-b":V()}],"rounded-l":[{"rounded-l":V()}],"rounded-ss":[{"rounded-ss":V()}],"rounded-se":[{"rounded-se":V()}],"rounded-ee":[{"rounded-ee":V()}],"rounded-es":[{"rounded-es":V()}],"rounded-tl":[{"rounded-tl":V()}],"rounded-tr":[{"rounded-tr":V()}],"rounded-br":[{"rounded-br":V()}],"rounded-bl":[{"rounded-bl":V()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...k(),"hidden","none"]}],"divide-style":[{divide:[...k(),"hidden","none"]}],"border-color":[{border:P()}],"border-color-x":[{"border-x":P()}],"border-color-y":[{"border-y":P()}],"border-color-s":[{"border-s":P()}],"border-color-e":[{"border-e":P()}],"border-color-t":[{"border-t":P()}],"border-color-r":[{"border-r":P()}],"border-color-b":[{"border-b":P()}],"border-color-l":[{"border-l":P()}],"divide-color":[{divide:P()}],"outline-style":[{outline:[...k(),"none","hidden"]}],"outline-offset":[{"outline-offset":[jt,$e,Ue]}],"outline-w":[{outline:["",jt,pd,Si]}],"outline-color":[{outline:[e]}],shadow:[{shadow:["","none",x,h4,o4]}],"shadow-color":[{shadow:P()}],"inset-shadow":[{"inset-shadow":["none",$e,Ue,v]}],"inset-shadow-color":[{"inset-shadow":P()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:P()}],"ring-offset-w":[{"ring-offset":[jt,Si]}],"ring-offset-color":[{"ring-offset":P()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":P()}],opacity:[{opacity:[jt,$e,Ue]}],"mix-blend":[{"mix-blend":[...L(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none",$e,Ue]}],blur:[{blur:Y()}],brightness:[{brightness:[jt,$e,Ue]}],contrast:[{contrast:[jt,$e,Ue]}],"drop-shadow":[{"drop-shadow":["","none",b,$e,Ue]}],grayscale:[{grayscale:["",jt,$e,Ue]}],"hue-rotate":[{"hue-rotate":[jt,$e,Ue]}],invert:[{invert:["",jt,$e,Ue]}],saturate:[{saturate:[jt,$e,Ue]}],sepia:[{sepia:["",jt,$e,Ue]}],"backdrop-filter":[{"backdrop-filter":["","none",$e,Ue]}],"backdrop-blur":[{"backdrop-blur":Y()}],"backdrop-brightness":[{"backdrop-brightness":[jt,$e,Ue]}],"backdrop-contrast":[{"backdrop-contrast":[jt,$e,Ue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",jt,$e,Ue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[jt,$e,Ue]}],"backdrop-invert":[{"backdrop-invert":["",jt,$e,Ue]}],"backdrop-opacity":[{"backdrop-opacity":[jt,$e,Ue]}],"backdrop-saturate":[{"backdrop-saturate":[jt,$e,Ue]}],"backdrop-sepia":[{"backdrop-sepia":["",jt,$e,Ue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":z()}],"border-spacing-x":[{"border-spacing-x":z()}],"border-spacing-y":[{"border-spacing-y":z()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",$e,Ue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[jt,"initial",$e,Ue]}],ease:[{ease:["linear","initial",_,$e,Ue]}],delay:[{delay:[jt,$e,Ue]}],animate:[{animate:["none",R,$e,Ue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,$e,Ue]}],"perspective-origin":[{"perspective-origin":H()}],rotate:[{rotate:D()}],"rotate-x":[{"rotate-x":D()}],"rotate-y":[{"rotate-y":D()}],"rotate-z":[{"rotate-z":D()}],scale:[{scale:I()}],"scale-x":[{"scale-x":I()}],"scale-y":[{"scale-y":I()}],"scale-z":[{"scale-z":I()}],"scale-3d":["scale-3d"],skew:[{skew:$()}],"skew-x":[{"skew-x":$()}],"skew-y":[{"skew-y":$()}],transform:[{transform:[$e,Ue,"","none","gpu","cpu"]}],"transform-origin":[{origin:H()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:K()}],"translate-x":[{"translate-x":K()}],"translate-y":[{"translate-y":K()}],"translate-z":[{"translate-z":K()}],"translate-none":["translate-none"],accent:[{accent:P()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:P()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$e,Ue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$e,Ue]}],fill:[{fill:["none",...P()]}],"stroke-w":[{stroke:[jt,pd,Si,np]}],stroke:[{stroke:["none",...P()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},b4=GA(y4);function Me(...e){return b4(aN(e))}function Oc({className:e,...t}){return n.jsx(AA,{"data-slot":"avatar",className:Me("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function rf({className:e,...t}){return n.jsx(kA,{"data-slot":"avatar-image",className:Me("aspect-square size-full",e),...t})}function Pc({className:e,...t}){return n.jsx(DA,{"data-slot":"avatar-fallback",className:Me("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}const rw=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,sw=aN,Ag=(e,t)=>s=>{var a;if((t==null?void 0:t.variants)==null)return sw(e,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:l,defaultVariants:c}=t,u=Object.keys(l).map(p=>{const x=s==null?void 0:s[p],v=c==null?void 0:c[p];if(x===null)return null;const b=rw(x)||rw(v);return l[p][b]}),f=s&&Object.entries(s).reduce((p,x)=>{let[v,b]=x;return b===void 0||(p[v]=b),p},{}),h=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((p,x)=>{let{class:v,className:b,...w}=x;return Object.entries(w).every(j=>{let[N,_]=j;return Array.isArray(_)?_.includes({...c,...f}[N]):{...c,...f}[N]===_})?[...p,v,b]:p},[]);return sw(e,u,h,s==null?void 0:s.class,s==null?void 0:s.className)},Hl=Ag("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function ee({className:e,variant:t,size:s,asChild:a=!1,...l}){const c=a?Ts:"button";return n.jsx(c,{"data-slot":"button",className:Me(Hl({variant:t,size:s,className:e})),...l})}function De(e,t,{checkForDefaultPrevented:s=!0}={}){return function(l){if(e==null||e(l),s===!1||!l.defaultPrevented)return t==null?void 0:t(l)}}function Ya({prop:e,defaultProp:t,onChange:s=()=>{}}){const[a,l]=w4({defaultProp:t,onChange:s}),c=e!==void 0,u=c?e:a,f=Ar(s),h=m.useCallback(p=>{if(c){const v=typeof p=="function"?p(e):p;v!==e&&f(v)}else l(p)},[c,e,l,f]);return[u,h]}function w4({defaultProp:e,onChange:t}){const s=m.useState(e),[a]=s,l=m.useRef(a),c=Ar(t);return m.useEffect(()=>{l.current!==a&&(c(a),l.current=a)},[a,l,c]),s}function kg(e){const t=e+"CollectionProvider",[s,a]=ur(t),[l,c]=s(t,{collectionRef:{current:null},itemMap:new Map}),u=w=>{const{scope:j,children:N}=w,_=we.useRef(null),R=we.useRef(new Map).current;return n.jsx(l,{scope:j,itemMap:R,collectionRef:_,children:N})};u.displayName=t;const f=e+"CollectionSlot",h=we.forwardRef((w,j)=>{const{scope:N,children:_}=w,R=c(f,N),E=_t(j,R.collectionRef);return n.jsx(Ts,{ref:E,children:_})});h.displayName=f;const p=e+"CollectionItemSlot",x="data-radix-collection-item",v=we.forwardRef((w,j)=>{const{scope:N,children:_,...R}=w,E=we.useRef(null),C=_t(j,E),M=c(p,N);return we.useEffect(()=>(M.itemMap.set(E,{ref:E,...R}),()=>void M.itemMap.delete(E))),n.jsx(Ts,{[x]:"",ref:C,children:_})});v.displayName=p;function b(w){const j=c(e+"CollectionConsumer",w);return we.useCallback(()=>{const _=j.collectionRef.current;if(!_)return[];const R=Array.from(_.querySelectorAll(`[${x}]`));return Array.from(j.itemMap.values()).sort((M,T)=>R.indexOf(M.ref.current)-R.indexOf(T.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:u,Slot:h,ItemSlot:v},b,a]}var j4=m.createContext(void 0);function sf(e){const t=m.useContext(j4);return e||t||"ltr"}function N4(e,t=globalThis==null?void 0:globalThis.document){const s=Ar(e);m.useEffect(()=>{const a=l=>{l.key==="Escape"&&s(l)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[s,t])}var _4="DismissableLayer",Yp="dismissableLayer.update",S4="dismissableLayer.pointerDownOutside",E4="dismissableLayer.focusOutside",aw,mN=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),to=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,onDismiss:f,...h}=e,p=m.useContext(mN),[x,v]=m.useState(null),b=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=m.useState({}),j=_t(t,q=>v(q)),N=Array.from(p.layers),[_]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),R=N.indexOf(_),E=x?N.indexOf(x):-1,C=p.layersWithOutsidePointerEventsDisabled.size>0,M=E>=R,T=T4(q=>{const F=q.target,U=[...p.branches].some(G=>G.contains(F));!M||U||(l==null||l(q),u==null||u(q),q.defaultPrevented||f==null||f())},b),z=M4(q=>{const F=q.target;[...p.branches].some(G=>G.contains(F))||(c==null||c(q),u==null||u(q),q.defaultPrevented||f==null||f())},b);return N4(q=>{E===p.layers.size-1&&(a==null||a(q),!q.defaultPrevented&&f&&(q.preventDefault(),f()))},b),m.useEffect(()=>{if(x)return s&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(aw=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(x)),p.layers.add(x),iw(),()=>{s&&p.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=aw)}},[x,b,s,p]),m.useEffect(()=>()=>{x&&(p.layers.delete(x),p.layersWithOutsidePointerEventsDisabled.delete(x),iw())},[x,p]),m.useEffect(()=>{const q=()=>w({});return document.addEventListener(Yp,q),()=>document.removeEventListener(Yp,q)},[]),n.jsx(Je.div,{...h,ref:j,style:{pointerEvents:C?M?"auto":"none":void 0,...e.style},onFocusCapture:De(e.onFocusCapture,z.onFocusCapture),onBlurCapture:De(e.onBlurCapture,z.onBlurCapture),onPointerDownCapture:De(e.onPointerDownCapture,T.onPointerDownCapture)})});to.displayName=_4;var C4="DismissableLayerBranch",R4=m.forwardRef((e,t)=>{const s=m.useContext(mN),a=m.useRef(null),l=_t(t,a);return m.useEffect(()=>{const c=a.current;if(c)return s.branches.add(c),()=>{s.branches.delete(c)}},[s.branches]),n.jsx(Je.div,{...e,ref:l})});R4.displayName=C4;function T4(e,t=globalThis==null?void 0:globalThis.document){const s=Ar(e),a=m.useRef(!1),l=m.useRef(()=>{});return m.useEffect(()=>{const c=f=>{if(f.target&&!a.current){let h=function(){pN(S4,s,p,{discrete:!0})};const p={originalEvent:f};f.pointerType==="touch"?(t.removeEventListener("click",l.current),l.current=h,t.addEventListener("click",l.current,{once:!0})):h()}else t.removeEventListener("click",l.current);a.current=!1},u=window.setTimeout(()=>{t.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),t.removeEventListener("pointerdown",c),t.removeEventListener("click",l.current)}},[t,s]),{onPointerDownCapture:()=>a.current=!0}}function M4(e,t=globalThis==null?void 0:globalThis.document){const s=Ar(e),a=m.useRef(!1);return m.useEffect(()=>{const l=c=>{c.target&&!a.current&&pN(E4,s,{originalEvent:c},{discrete:!1})};return t.addEventListener("focusin",l),()=>t.removeEventListener("focusin",l)},[t,s]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function iw(){const e=new CustomEvent(Yp);document.dispatchEvent(e)}function pN(e,t,s,{discrete:a}){const l=s.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&l.addEventListener(e,t,{once:!0}),a?Qj(l,c):l.dispatchEvent(c)}var rp=0;function af(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??lw()),document.body.insertAdjacentElement("beforeend",e[1]??lw()),rp++,()=>{rp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),rp--}},[])}function lw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var sp="focusScope.autoFocusOnMount",ap="focusScope.autoFocusOnUnmount",ow={bubbles:!1,cancelable:!0},A4="FocusScope",Lc=m.forwardRef((e,t)=>{const{loop:s=!1,trapped:a=!1,onMountAutoFocus:l,onUnmountAutoFocus:c,...u}=e,[f,h]=m.useState(null),p=Ar(l),x=Ar(c),v=m.useRef(null),b=_t(t,N=>h(N)),w=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(a){let N=function(C){if(w.paused||!f)return;const M=C.target;f.contains(M)?v.current=M:Ba(v.current,{select:!0})},_=function(C){if(w.paused||!f)return;const M=C.relatedTarget;M!==null&&(f.contains(M)||Ba(v.current,{select:!0}))},R=function(C){if(document.activeElement===document.body)for(const T of C)T.removedNodes.length>0&&Ba(f)};document.addEventListener("focusin",N),document.addEventListener("focusout",_);const E=new MutationObserver(R);return f&&E.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",N),document.removeEventListener("focusout",_),E.disconnect()}}},[a,f,w.paused]),m.useEffect(()=>{if(f){uw.add(w);const N=document.activeElement;if(!f.contains(N)){const R=new CustomEvent(sp,ow);f.addEventListener(sp,p),f.dispatchEvent(R),R.defaultPrevented||(k4(I4(gN(f)),{select:!0}),document.activeElement===N&&Ba(f))}return()=>{f.removeEventListener(sp,p),setTimeout(()=>{const R=new CustomEvent(ap,ow);f.addEventListener(ap,x),f.dispatchEvent(R),R.defaultPrevented||Ba(N??document.body,{select:!0}),f.removeEventListener(ap,x),uw.remove(w)},0)}}},[f,p,x,w]);const j=m.useCallback(N=>{if(!s&&!a||w.paused)return;const _=N.key==="Tab"&&!N.altKey&&!N.ctrlKey&&!N.metaKey,R=document.activeElement;if(_&&R){const E=N.currentTarget,[C,M]=D4(E);C&&M?!N.shiftKey&&R===M?(N.preventDefault(),s&&Ba(C,{select:!0})):N.shiftKey&&R===C&&(N.preventDefault(),s&&Ba(M,{select:!0})):R===E&&N.preventDefault()}},[s,a,w.paused]);return n.jsx(Je.div,{tabIndex:-1,...u,ref:b,onKeyDown:j})});Lc.displayName=A4;function k4(e,{select:t=!1}={}){const s=document.activeElement;for(const a of e)if(Ba(a,{select:t}),document.activeElement!==s)return}function D4(e){const t=gN(e),s=cw(t,e),a=cw(t.reverse(),e);return[s,a]}function gN(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const l=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||l?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function cw(e,t){for(const s of e)if(!O4(s,{upTo:t}))return s}function O4(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function P4(e){return e instanceof HTMLInputElement&&"select"in e}function Ba(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&P4(e)&&t&&e.select()}}var uw=L4();function L4(){let e=[];return{add(t){const s=e[0];t!==s&&(s==null||s.pause()),e=dw(e,t),e.unshift(t)},remove(t){var s;e=dw(e,t),(s=e[0])==null||s.resume()}}}function dw(e,t){const s=[...e],a=s.indexOf(t);return a!==-1&&s.splice(a,1),s}function I4(e){return e.filter(t=>t.tagName!=="A")}var z4=UC.useId||(()=>{}),U4=0;function Cs(e){const[t,s]=m.useState(z4());return Xn(()=>{s(a=>a??String(U4++))},[e]),e||(t?`radix-${t}`:"")}const $4=["top","right","bottom","left"],Ga=Math.min,Tr=Math.max,Ld=Math.round,gd=Math.floor,Rs=e=>({x:e,y:e}),B4={left:"right",right:"left",bottom:"top",top:"bottom"},H4={start:"end",end:"start"};function Gp(e,t,s){return Tr(e,Ga(t,s))}function sa(e,t){return typeof e=="function"?e(t):e}function aa(e){return e.split("-")[0]}function no(e){return e.split("-")[1]}function Dg(e){return e==="x"?"y":"x"}function Og(e){return e==="y"?"height":"width"}function Wa(e){return["top","bottom"].includes(aa(e))?"y":"x"}function Pg(e){return Dg(Wa(e))}function q4(e,t,s){s===void 0&&(s=!1);const a=no(e),l=Pg(e),c=Og(l);let u=l==="x"?a===(s?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(u=Id(u)),[u,Id(u)]}function F4(e){const t=Id(e);return[Wp(e),t,Wp(t)]}function Wp(e){return e.replace(/start|end/g,t=>H4[t])}function V4(e,t,s){const a=["left","right"],l=["right","left"],c=["top","bottom"],u=["bottom","top"];switch(e){case"top":case"bottom":return s?t?l:a:t?a:l;case"left":case"right":return t?c:u;default:return[]}}function Y4(e,t,s,a){const l=no(e);let c=V4(aa(e),s==="start",a);return l&&(c=c.map(u=>u+"-"+l),t&&(c=c.concat(c.map(Wp)))),c}function Id(e){return e.replace(/left|right|bottom|top/g,t=>B4[t])}function G4(e){return{top:0,right:0,bottom:0,left:0,...e}}function xN(e){return typeof e!="number"?G4(e):{top:e,right:e,bottom:e,left:e}}function zd(e){const{x:t,y:s,width:a,height:l}=e;return{width:a,height:l,top:s,left:t,right:t+a,bottom:s+l,x:t,y:s}}function fw(e,t,s){let{reference:a,floating:l}=e;const c=Wa(t),u=Pg(t),f=Og(u),h=aa(t),p=c==="y",x=a.x+a.width/2-l.width/2,v=a.y+a.height/2-l.height/2,b=a[f]/2-l[f]/2;let w;switch(h){case"top":w={x,y:a.y-l.height};break;case"bottom":w={x,y:a.y+a.height};break;case"right":w={x:a.x+a.width,y:v};break;case"left":w={x:a.x-l.width,y:v};break;default:w={x:a.x,y:a.y}}switch(no(t)){case"start":w[u]-=b*(s&&p?-1:1);break;case"end":w[u]+=b*(s&&p?-1:1);break}return w}const W4=async(e,t,s)=>{const{placement:a="bottom",strategy:l="absolute",middleware:c=[],platform:u}=s,f=c.filter(Boolean),h=await(u.isRTL==null?void 0:u.isRTL(t));let p=await u.getElementRects({reference:e,floating:t,strategy:l}),{x,y:v}=fw(p,a,h),b=a,w={},j=0;for(let N=0;N<f.length;N++){const{name:_,fn:R}=f[N],{x:E,y:C,data:M,reset:T}=await R({x,y:v,initialPlacement:a,placement:b,strategy:l,middlewareData:w,rects:p,platform:u,elements:{reference:e,floating:t}});x=E??x,v=C??v,w={...w,[_]:{...w[_],...M}},T&&j<=50&&(j++,typeof T=="object"&&(T.placement&&(b=T.placement),T.rects&&(p=T.rects===!0?await u.getElementRects({reference:e,floating:t,strategy:l}):T.rects),{x,y:v}=fw(p,b,h)),N=-1)}return{x,y:v,placement:b,strategy:l,middlewareData:w}};async function bc(e,t){var s;t===void 0&&(t={});const{x:a,y:l,platform:c,rects:u,elements:f,strategy:h}=e,{boundary:p="clippingAncestors",rootBoundary:x="viewport",elementContext:v="floating",altBoundary:b=!1,padding:w=0}=sa(t,e),j=xN(w),_=f[b?v==="floating"?"reference":"floating":v],R=zd(await c.getClippingRect({element:(s=await(c.isElement==null?void 0:c.isElement(_)))==null||s?_:_.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:p,rootBoundary:x,strategy:h})),E=v==="floating"?{x:a,y:l,width:u.floating.width,height:u.floating.height}:u.reference,C=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),M=await(c.isElement==null?void 0:c.isElement(C))?await(c.getScale==null?void 0:c.getScale(C))||{x:1,y:1}:{x:1,y:1},T=zd(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:E,offsetParent:C,strategy:h}):E);return{top:(R.top-T.top+j.top)/M.y,bottom:(T.bottom-R.bottom+j.bottom)/M.y,left:(R.left-T.left+j.left)/M.x,right:(T.right-R.right+j.right)/M.x}}const X4=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:a,placement:l,rects:c,platform:u,elements:f,middlewareData:h}=t,{element:p,padding:x=0}=sa(e,t)||{};if(p==null)return{};const v=xN(x),b={x:s,y:a},w=Pg(l),j=Og(w),N=await u.getDimensions(p),_=w==="y",R=_?"top":"left",E=_?"bottom":"right",C=_?"clientHeight":"clientWidth",M=c.reference[j]+c.reference[w]-b[w]-c.floating[j],T=b[w]-c.reference[w],z=await(u.getOffsetParent==null?void 0:u.getOffsetParent(p));let q=z?z[C]:0;(!q||!await(u.isElement==null?void 0:u.isElement(z)))&&(q=f.floating[C]||c.floating[j]);const F=M/2-T/2,U=q/2-N[j]/2-1,G=Ga(v[R],U),ce=Ga(v[E],U),re=G,O=q-N[j]-ce,ie=q/2-N[j]/2+F,ue=Gp(re,ie,O),P=!h.arrow&&no(l)!=null&&ie!==ue&&c.reference[j]/2-(ie<re?G:ce)-N[j]/2<0,X=P?ie<re?ie-re:ie-O:0;return{[w]:b[w]+X,data:{[w]:ue,centerOffset:ie-ue-X,...P&&{alignmentOffset:X}},reset:P}}}),K4=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,a;const{placement:l,middlewareData:c,rects:u,initialPlacement:f,platform:h,elements:p}=t,{mainAxis:x=!0,crossAxis:v=!0,fallbackPlacements:b,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:N=!0,..._}=sa(e,t);if((s=c.arrow)!=null&&s.alignmentOffset)return{};const R=aa(l),E=Wa(f),C=aa(f)===f,M=await(h.isRTL==null?void 0:h.isRTL(p.floating)),T=b||(C||!N?[Id(f)]:F4(f)),z=j!=="none";!b&&z&&T.push(...Y4(f,N,j,M));const q=[f,...T],F=await bc(t,_),U=[];let G=((a=c.flip)==null?void 0:a.overflows)||[];if(x&&U.push(F[R]),v){const ie=q4(l,u,M);U.push(F[ie[0]],F[ie[1]])}if(G=[...G,{placement:l,overflows:U}],!U.every(ie=>ie<=0)){var ce,re;const ie=(((ce=c.flip)==null?void 0:ce.index)||0)+1,ue=q[ie];if(ue)return{data:{index:ie,overflows:G},reset:{placement:ue}};let P=(re=G.filter(X=>X.overflows[0]<=0).sort((X,V)=>X.overflows[1]-V.overflows[1])[0])==null?void 0:re.placement;if(!P)switch(w){case"bestFit":{var O;const X=(O=G.filter(V=>{if(z){const te=Wa(V.placement);return te===E||te==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(te=>te>0).reduce((te,k)=>te+k,0)]).sort((V,te)=>V[1]-te[1])[0])==null?void 0:O[0];X&&(P=X);break}case"initialPlacement":P=f;break}if(l!==P)return{reset:{placement:P}}}return{}}}};function hw(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function mw(e){return $4.some(t=>e[t]>=0)}const Q4=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:a="referenceHidden",...l}=sa(e,t);switch(a){case"referenceHidden":{const c=await bc(t,{...l,elementContext:"reference"}),u=hw(c,s.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:mw(u)}}}case"escaped":{const c=await bc(t,{...l,altBoundary:!0}),u=hw(c,s.floating);return{data:{escapedOffsets:u,escaped:mw(u)}}}default:return{}}}}};async function Z4(e,t){const{placement:s,platform:a,elements:l}=e,c=await(a.isRTL==null?void 0:a.isRTL(l.floating)),u=aa(s),f=no(s),h=Wa(s)==="y",p=["left","top"].includes(u)?-1:1,x=c&&h?-1:1,v=sa(t,e);let{mainAxis:b,crossAxis:w,alignmentAxis:j}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return f&&typeof j=="number"&&(w=f==="end"?j*-1:j),h?{x:w*x,y:b*p}:{x:b*p,y:w*x}}const J4=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,a;const{x:l,y:c,placement:u,middlewareData:f}=t,h=await Z4(t,e);return u===((s=f.offset)==null?void 0:s.placement)&&(a=f.arrow)!=null&&a.alignmentOffset?{}:{x:l+h.x,y:c+h.y,data:{...h,placement:u}}}}},ek=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:a,placement:l}=t,{mainAxis:c=!0,crossAxis:u=!1,limiter:f={fn:_=>{let{x:R,y:E}=_;return{x:R,y:E}}},...h}=sa(e,t),p={x:s,y:a},x=await bc(t,h),v=Wa(aa(l)),b=Dg(v);let w=p[b],j=p[v];if(c){const _=b==="y"?"top":"left",R=b==="y"?"bottom":"right",E=w+x[_],C=w-x[R];w=Gp(E,w,C)}if(u){const _=v==="y"?"top":"left",R=v==="y"?"bottom":"right",E=j+x[_],C=j-x[R];j=Gp(E,j,C)}const N=f.fn({...t,[b]:w,[v]:j});return{...N,data:{x:N.x-s,y:N.y-a,enabled:{[b]:c,[v]:u}}}}}},tk=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:a,placement:l,rects:c,middlewareData:u}=t,{offset:f=0,mainAxis:h=!0,crossAxis:p=!0}=sa(e,t),x={x:s,y:a},v=Wa(l),b=Dg(v);let w=x[b],j=x[v];const N=sa(f,t),_=typeof N=="number"?{mainAxis:N,crossAxis:0}:{mainAxis:0,crossAxis:0,...N};if(h){const C=b==="y"?"height":"width",M=c.reference[b]-c.floating[C]+_.mainAxis,T=c.reference[b]+c.reference[C]-_.mainAxis;w<M?w=M:w>T&&(w=T)}if(p){var R,E;const C=b==="y"?"width":"height",M=["top","left"].includes(aa(l)),T=c.reference[v]-c.floating[C]+(M&&((R=u.offset)==null?void 0:R[v])||0)+(M?0:_.crossAxis),z=c.reference[v]+c.reference[C]+(M?0:((E=u.offset)==null?void 0:E[v])||0)-(M?_.crossAxis:0);j<T?j=T:j>z&&(j=z)}return{[b]:w,[v]:j}}}},nk=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,a;const{placement:l,rects:c,platform:u,elements:f}=t,{apply:h=()=>{},...p}=sa(e,t),x=await bc(t,p),v=aa(l),b=no(l),w=Wa(l)==="y",{width:j,height:N}=c.floating;let _,R;v==="top"||v==="bottom"?(_=v,R=b===(await(u.isRTL==null?void 0:u.isRTL(f.floating))?"start":"end")?"left":"right"):(R=v,_=b==="end"?"top":"bottom");const E=N-x.top-x.bottom,C=j-x.left-x.right,M=Ga(N-x[_],E),T=Ga(j-x[R],C),z=!t.middlewareData.shift;let q=M,F=T;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(F=C),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(q=E),z&&!b){const G=Tr(x.left,0),ce=Tr(x.right,0),re=Tr(x.top,0),O=Tr(x.bottom,0);w?F=j-2*(G!==0||ce!==0?G+ce:Tr(x.left,x.right)):q=N-2*(re!==0||O!==0?re+O:Tr(x.top,x.bottom))}await h({...t,availableWidth:F,availableHeight:q});const U=await u.getDimensions(f.floating);return j!==U.width||N!==U.height?{reset:{rects:!0}}:{}}}};function lf(){return typeof window<"u"}function ro(e){return vN(e)?(e.nodeName||"").toLowerCase():"#document"}function Mr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ds(e){var t;return(t=(vN(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function vN(e){return lf()?e instanceof Node||e instanceof Mr(e).Node:!1}function ls(e){return lf()?e instanceof Element||e instanceof Mr(e).Element:!1}function Ms(e){return lf()?e instanceof HTMLElement||e instanceof Mr(e).HTMLElement:!1}function pw(e){return!lf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Mr(e).ShadowRoot}function Ic(e){const{overflow:t,overflowX:s,overflowY:a,display:l}=os(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+s)&&!["inline","contents"].includes(l)}function rk(e){return["table","td","th"].includes(ro(e))}function of(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Lg(e){const t=Ig(),s=ls(e)?os(e):e;return["transform","translate","scale","rotate","perspective"].some(a=>s[a]?s[a]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(s.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(s.contain||"").includes(a))}function sk(e){let t=Xa(e);for(;Ms(t)&&!ql(t);){if(Lg(t))return t;if(of(t))return null;t=Xa(t)}return null}function Ig(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ql(e){return["html","body","#document"].includes(ro(e))}function os(e){return Mr(e).getComputedStyle(e)}function cf(e){return ls(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Xa(e){if(ro(e)==="html")return e;const t=e.assignedSlot||e.parentNode||pw(e)&&e.host||Ds(e);return pw(t)?t.host:t}function yN(e){const t=Xa(e);return ql(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ms(t)&&Ic(t)?t:yN(t)}function wc(e,t,s){var a;t===void 0&&(t=[]),s===void 0&&(s=!0);const l=yN(e),c=l===((a=e.ownerDocument)==null?void 0:a.body),u=Mr(l);if(c){const f=Xp(u);return t.concat(u,u.visualViewport||[],Ic(l)?l:[],f&&s?wc(f):[])}return t.concat(l,wc(l,[],s))}function Xp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function bN(e){const t=os(e);let s=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const l=Ms(e),c=l?e.offsetWidth:s,u=l?e.offsetHeight:a,f=Ld(s)!==c||Ld(a)!==u;return f&&(s=c,a=u),{width:s,height:a,$:f}}function zg(e){return ls(e)?e:e.contextElement}function Ol(e){const t=zg(e);if(!Ms(t))return Rs(1);const s=t.getBoundingClientRect(),{width:a,height:l,$:c}=bN(t);let u=(c?Ld(s.width):s.width)/a,f=(c?Ld(s.height):s.height)/l;return(!u||!Number.isFinite(u))&&(u=1),(!f||!Number.isFinite(f))&&(f=1),{x:u,y:f}}const ak=Rs(0);function wN(e){const t=Mr(e);return!Ig()||!t.visualViewport?ak:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ik(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==Mr(e)?!1:t}function Ti(e,t,s,a){t===void 0&&(t=!1),s===void 0&&(s=!1);const l=e.getBoundingClientRect(),c=zg(e);let u=Rs(1);t&&(a?ls(a)&&(u=Ol(a)):u=Ol(e));const f=ik(c,s,a)?wN(c):Rs(0);let h=(l.left+f.x)/u.x,p=(l.top+f.y)/u.y,x=l.width/u.x,v=l.height/u.y;if(c){const b=Mr(c),w=a&&ls(a)?Mr(a):a;let j=b,N=Xp(j);for(;N&&a&&w!==j;){const _=Ol(N),R=N.getBoundingClientRect(),E=os(N),C=R.left+(N.clientLeft+parseFloat(E.paddingLeft))*_.x,M=R.top+(N.clientTop+parseFloat(E.paddingTop))*_.y;h*=_.x,p*=_.y,x*=_.x,v*=_.y,h+=C,p+=M,j=Mr(N),N=Xp(j)}}return zd({width:x,height:v,x:h,y:p})}function Ug(e,t){const s=cf(e).scrollLeft;return t?t.left+s:Ti(Ds(e)).left+s}function jN(e,t,s){s===void 0&&(s=!1);const a=e.getBoundingClientRect(),l=a.left+t.scrollLeft-(s?0:Ug(e,a)),c=a.top+t.scrollTop;return{x:l,y:c}}function lk(e){let{elements:t,rect:s,offsetParent:a,strategy:l}=e;const c=l==="fixed",u=Ds(a),f=t?of(t.floating):!1;if(a===u||f&&c)return s;let h={scrollLeft:0,scrollTop:0},p=Rs(1);const x=Rs(0),v=Ms(a);if((v||!v&&!c)&&((ro(a)!=="body"||Ic(u))&&(h=cf(a)),Ms(a))){const w=Ti(a);p=Ol(a),x.x=w.x+a.clientLeft,x.y=w.y+a.clientTop}const b=u&&!v&&!c?jN(u,h,!0):Rs(0);return{width:s.width*p.x,height:s.height*p.y,x:s.x*p.x-h.scrollLeft*p.x+x.x+b.x,y:s.y*p.y-h.scrollTop*p.y+x.y+b.y}}function ok(e){return Array.from(e.getClientRects())}function ck(e){const t=Ds(e),s=cf(e),a=e.ownerDocument.body,l=Tr(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),c=Tr(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let u=-s.scrollLeft+Ug(e);const f=-s.scrollTop;return os(a).direction==="rtl"&&(u+=Tr(t.clientWidth,a.clientWidth)-l),{width:l,height:c,x:u,y:f}}function uk(e,t){const s=Mr(e),a=Ds(e),l=s.visualViewport;let c=a.clientWidth,u=a.clientHeight,f=0,h=0;if(l){c=l.width,u=l.height;const p=Ig();(!p||p&&t==="fixed")&&(f=l.offsetLeft,h=l.offsetTop)}return{width:c,height:u,x:f,y:h}}function dk(e,t){const s=Ti(e,!0,t==="fixed"),a=s.top+e.clientTop,l=s.left+e.clientLeft,c=Ms(e)?Ol(e):Rs(1),u=e.clientWidth*c.x,f=e.clientHeight*c.y,h=l*c.x,p=a*c.y;return{width:u,height:f,x:h,y:p}}function gw(e,t,s){let a;if(t==="viewport")a=uk(e,s);else if(t==="document")a=ck(Ds(e));else if(ls(t))a=dk(t,s);else{const l=wN(e);a={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return zd(a)}function NN(e,t){const s=Xa(e);return s===t||!ls(s)||ql(s)?!1:os(s).position==="fixed"||NN(s,t)}function fk(e,t){const s=t.get(e);if(s)return s;let a=wc(e,[],!1).filter(f=>ls(f)&&ro(f)!=="body"),l=null;const c=os(e).position==="fixed";let u=c?Xa(e):e;for(;ls(u)&&!ql(u);){const f=os(u),h=Lg(u);!h&&f.position==="fixed"&&(l=null),(c?!h&&!l:!h&&f.position==="static"&&!!l&&["absolute","fixed"].includes(l.position)||Ic(u)&&!h&&NN(e,u))?a=a.filter(x=>x!==u):l=f,u=Xa(u)}return t.set(e,a),a}function hk(e){let{element:t,boundary:s,rootBoundary:a,strategy:l}=e;const u=[...s==="clippingAncestors"?of(t)?[]:fk(t,this._c):[].concat(s),a],f=u[0],h=u.reduce((p,x)=>{const v=gw(t,x,l);return p.top=Tr(v.top,p.top),p.right=Ga(v.right,p.right),p.bottom=Ga(v.bottom,p.bottom),p.left=Tr(v.left,p.left),p},gw(t,f,l));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function mk(e){const{width:t,height:s}=bN(e);return{width:t,height:s}}function pk(e,t,s){const a=Ms(t),l=Ds(t),c=s==="fixed",u=Ti(e,!0,c,t);let f={scrollLeft:0,scrollTop:0};const h=Rs(0);if(a||!a&&!c)if((ro(t)!=="body"||Ic(l))&&(f=cf(t)),a){const b=Ti(t,!0,c,t);h.x=b.x+t.clientLeft,h.y=b.y+t.clientTop}else l&&(h.x=Ug(l));const p=l&&!a&&!c?jN(l,f):Rs(0),x=u.left+f.scrollLeft-h.x-p.x,v=u.top+f.scrollTop-h.y-p.y;return{x,y:v,width:u.width,height:u.height}}function ip(e){return os(e).position==="static"}function xw(e,t){if(!Ms(e)||os(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return Ds(e)===s&&(s=s.ownerDocument.body),s}function _N(e,t){const s=Mr(e);if(of(e))return s;if(!Ms(e)){let l=Xa(e);for(;l&&!ql(l);){if(ls(l)&&!ip(l))return l;l=Xa(l)}return s}let a=xw(e,t);for(;a&&rk(a)&&ip(a);)a=xw(a,t);return a&&ql(a)&&ip(a)&&!Lg(a)?s:a||sk(e)||s}const gk=async function(e){const t=this.getOffsetParent||_N,s=this.getDimensions,a=await s(e.floating);return{reference:pk(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function xk(e){return os(e).direction==="rtl"}const vk={convertOffsetParentRelativeRectToViewportRelativeRect:lk,getDocumentElement:Ds,getClippingRect:hk,getOffsetParent:_N,getElementRects:gk,getClientRects:ok,getDimensions:mk,getScale:Ol,isElement:ls,isRTL:xk};function SN(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function yk(e,t){let s=null,a;const l=Ds(e);function c(){var f;clearTimeout(a),(f=s)==null||f.disconnect(),s=null}function u(f,h){f===void 0&&(f=!1),h===void 0&&(h=1),c();const p=e.getBoundingClientRect(),{left:x,top:v,width:b,height:w}=p;if(f||t(),!b||!w)return;const j=gd(v),N=gd(l.clientWidth-(x+b)),_=gd(l.clientHeight-(v+w)),R=gd(x),C={rootMargin:-j+"px "+-N+"px "+-_+"px "+-R+"px",threshold:Tr(0,Ga(1,h))||1};let M=!0;function T(z){const q=z[0].intersectionRatio;if(q!==h){if(!M)return u();q?u(!1,q):a=setTimeout(()=>{u(!1,1e-7)},1e3)}q===1&&!SN(p,e.getBoundingClientRect())&&u(),M=!1}try{s=new IntersectionObserver(T,{...C,root:l.ownerDocument})}catch{s=new IntersectionObserver(T,C)}s.observe(e)}return u(!0),c}function bk(e,t,s,a){a===void 0&&(a={});const{ancestorScroll:l=!0,ancestorResize:c=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:h=!1}=a,p=zg(e),x=l||c?[...p?wc(p):[],...wc(t)]:[];x.forEach(R=>{l&&R.addEventListener("scroll",s,{passive:!0}),c&&R.addEventListener("resize",s)});const v=p&&f?yk(p,s):null;let b=-1,w=null;u&&(w=new ResizeObserver(R=>{let[E]=R;E&&E.target===p&&w&&(w.unobserve(t),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var C;(C=w)==null||C.observe(t)})),s()}),p&&!h&&w.observe(p),w.observe(t));let j,N=h?Ti(e):null;h&&_();function _(){const R=Ti(e);N&&!SN(N,R)&&s(),N=R,j=requestAnimationFrame(_)}return s(),()=>{var R;x.forEach(E=>{l&&E.removeEventListener("scroll",s),c&&E.removeEventListener("resize",s)}),v==null||v(),(R=w)==null||R.disconnect(),w=null,h&&cancelAnimationFrame(j)}}const wk=J4,jk=ek,Nk=K4,_k=nk,Sk=Q4,vw=X4,Ek=tk,Ck=(e,t,s)=>{const a=new Map,l={platform:vk,...s},c={...l.platform,_c:a};return W4(e,t,{...l,platform:c})};var Rd=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Ud(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let s,a,l;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(a=s;a--!==0;)if(!Ud(e[a],t[a]))return!1;return!0}if(l=Object.keys(e),s=l.length,s!==Object.keys(t).length)return!1;for(a=s;a--!==0;)if(!{}.hasOwnProperty.call(t,l[a]))return!1;for(a=s;a--!==0;){const c=l[a];if(!(c==="_owner"&&e.$$typeof)&&!Ud(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function EN(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function yw(e,t){const s=EN(e);return Math.round(t*s)/s}function lp(e){const t=m.useRef(e);return Rd(()=>{t.current=e}),t}function Rk(e){e===void 0&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:a=[],platform:l,elements:{reference:c,floating:u}={},transform:f=!0,whileElementsMounted:h,open:p}=e,[x,v]=m.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[b,w]=m.useState(a);Ud(b,a)||w(a);const[j,N]=m.useState(null),[_,R]=m.useState(null),E=m.useCallback(V=>{V!==z.current&&(z.current=V,N(V))},[]),C=m.useCallback(V=>{V!==q.current&&(q.current=V,R(V))},[]),M=c||j,T=u||_,z=m.useRef(null),q=m.useRef(null),F=m.useRef(x),U=h!=null,G=lp(h),ce=lp(l),re=lp(p),O=m.useCallback(()=>{if(!z.current||!q.current)return;const V={placement:t,strategy:s,middleware:b};ce.current&&(V.platform=ce.current),Ck(z.current,q.current,V).then(te=>{const k={...te,isPositioned:re.current!==!1};ie.current&&!Ud(F.current,k)&&(F.current=k,Ss.flushSync(()=>{v(k)}))})},[b,t,s,ce,re]);Rd(()=>{p===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,v(V=>({...V,isPositioned:!1})))},[p]);const ie=m.useRef(!1);Rd(()=>(ie.current=!0,()=>{ie.current=!1}),[]),Rd(()=>{if(M&&(z.current=M),T&&(q.current=T),M&&T){if(G.current)return G.current(M,T,O);O()}},[M,T,O,G,U]);const ue=m.useMemo(()=>({reference:z,floating:q,setReference:E,setFloating:C}),[E,C]),P=m.useMemo(()=>({reference:M,floating:T}),[M,T]),X=m.useMemo(()=>{const V={position:s,left:0,top:0};if(!P.floating)return V;const te=yw(P.floating,x.x),k=yw(P.floating,x.y);return f?{...V,transform:"translate("+te+"px, "+k+"px)",...EN(P.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:te,top:k}},[s,f,P.floating,x.x,x.y]);return m.useMemo(()=>({...x,update:O,refs:ue,elements:P,floatingStyles:X}),[x,O,ue,P,X])}const Tk=e=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:a,padding:l}=typeof e=="function"?e(s):e;return a&&t(a)?a.current!=null?vw({element:a.current,padding:l}).fn(s):{}:a?vw({element:a,padding:l}).fn(s):{}}}},Mk=(e,t)=>({...wk(e),options:[e,t]}),Ak=(e,t)=>({...jk(e),options:[e,t]}),kk=(e,t)=>({...Ek(e),options:[e,t]}),Dk=(e,t)=>({...Nk(e),options:[e,t]}),Ok=(e,t)=>({..._k(e),options:[e,t]}),Pk=(e,t)=>({...Sk(e),options:[e,t]}),Lk=(e,t)=>({...Tk(e),options:[e,t]});var Ik="Arrow",CN=m.forwardRef((e,t)=>{const{children:s,width:a=10,height:l=5,...c}=e;return n.jsx(Je.svg,{...c,ref:t,width:a,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});CN.displayName=Ik;var zk=CN;function $g(e){const[t,s]=m.useState(void 0);return Xn(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const c=l[0];let u,f;if("borderBoxSize"in c){const h=c.borderBoxSize,p=Array.isArray(h)?h[0]:h;u=p.inlineSize,f=p.blockSize}else u=e.offsetWidth,f=e.offsetHeight;s({width:u,height:f})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else s(void 0)},[e]),t}var Bg="Popper",[RN,Za]=ur(Bg),[Uk,TN]=RN(Bg),MN=e=>{const{__scopePopper:t,children:s}=e,[a,l]=m.useState(null);return n.jsx(Uk,{scope:t,anchor:a,onAnchorChange:l,children:s})};MN.displayName=Bg;var AN="PopperAnchor",kN=m.forwardRef((e,t)=>{const{__scopePopper:s,virtualRef:a,...l}=e,c=TN(AN,s),u=m.useRef(null),f=_t(t,u);return m.useEffect(()=>{c.onAnchorChange((a==null?void 0:a.current)||u.current)}),a?null:n.jsx(Je.div,{...l,ref:f})});kN.displayName=AN;var Hg="PopperContent",[$k,Bk]=RN(Hg),DN=m.forwardRef((e,t)=>{var K,ae,ge,de,Se,Ae;const{__scopePopper:s,side:a="bottom",sideOffset:l=0,align:c="center",alignOffset:u=0,arrowPadding:f=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:x=0,sticky:v="partial",hideWhenDetached:b=!1,updatePositionStrategy:w="optimized",onPlaced:j,...N}=e,_=TN(Hg,s),[R,E]=m.useState(null),C=_t(t,it=>E(it)),[M,T]=m.useState(null),z=$g(M),q=(z==null?void 0:z.width)??0,F=(z==null?void 0:z.height)??0,U=a+(c!=="center"?"-"+c:""),G=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},ce=Array.isArray(p)?p:[p],re=ce.length>0,O={padding:G,boundary:ce.filter(qk),altBoundary:re},{refs:ie,floatingStyles:ue,placement:P,isPositioned:X,middlewareData:V}=Rk({strategy:"fixed",placement:U,whileElementsMounted:(...it)=>bk(...it,{animationFrame:w==="always"}),elements:{reference:_.anchor},middleware:[Mk({mainAxis:l+F,alignmentAxis:u}),h&&Ak({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?kk():void 0,...O}),h&&Dk({...O}),Ok({...O,apply:({elements:it,rects:rt,availableWidth:xe,availableHeight:pe})=>{const{width:Pe,height:be}=rt.reference,Ne=it.floating.style;Ne.setProperty("--radix-popper-available-width",`${xe}px`),Ne.setProperty("--radix-popper-available-height",`${pe}px`),Ne.setProperty("--radix-popper-anchor-width",`${Pe}px`),Ne.setProperty("--radix-popper-anchor-height",`${be}px`)}}),M&&Lk({element:M,padding:f}),Fk({arrowWidth:q,arrowHeight:F}),b&&Pk({strategy:"referenceHidden",...O})]}),[te,k]=LN(P),L=Ar(j);Xn(()=>{X&&(L==null||L())},[X,L]);const Y=(K=V.arrow)==null?void 0:K.x,H=(ae=V.arrow)==null?void 0:ae.y,D=((ge=V.arrow)==null?void 0:ge.centerOffset)!==0,[I,$]=m.useState();return Xn(()=>{R&&$(window.getComputedStyle(R).zIndex)},[R]),n.jsx("div",{ref:ie.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:X?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:I,"--radix-popper-transform-origin":[(de=V.transformOrigin)==null?void 0:de.x,(Se=V.transformOrigin)==null?void 0:Se.y].join(" "),...((Ae=V.hide)==null?void 0:Ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx($k,{scope:s,placedSide:te,onArrowChange:T,arrowX:Y,arrowY:H,shouldHideArrow:D,children:n.jsx(Je.div,{"data-side":te,"data-align":k,...N,ref:C,style:{...N.style,animation:X?void 0:"none"}})})})});DN.displayName=Hg;var ON="PopperArrow",Hk={top:"bottom",right:"left",bottom:"top",left:"right"},PN=m.forwardRef(function(t,s){const{__scopePopper:a,...l}=t,c=Bk(ON,a),u=Hk[c.placedSide];return n.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:n.jsx(zk,{...l,ref:s,style:{...l.style,display:"block"}})})});PN.displayName=ON;function qk(e){return e!==null}var Fk=e=>({name:"transformOrigin",options:e,fn(t){var _,R,E;const{placement:s,rects:a,middlewareData:l}=t,u=((_=l.arrow)==null?void 0:_.centerOffset)!==0,f=u?0:e.arrowWidth,h=u?0:e.arrowHeight,[p,x]=LN(s),v={start:"0%",center:"50%",end:"100%"}[x],b=(((R=l.arrow)==null?void 0:R.x)??0)+f/2,w=(((E=l.arrow)==null?void 0:E.y)??0)+h/2;let j="",N="";return p==="bottom"?(j=u?v:`${b}px`,N=`${-h}px`):p==="top"?(j=u?v:`${b}px`,N=`${a.floating.height+h}px`):p==="right"?(j=`${-h}px`,N=u?v:`${w}px`):p==="left"&&(j=`${a.floating.width+h}px`,N=u?v:`${w}px`),{data:{x:j,y:N}}}});function LN(e){const[t,s="center"]=e.split("-");return[t,s]}var qg=MN,zc=kN,uf=DN,df=PN,Vk="Portal",Uc=m.forwardRef((e,t)=>{var f;const{container:s,...a}=e,[l,c]=m.useState(!1);Xn(()=>c(!0),[]);const u=s||l&&((f=globalThis==null?void 0:globalThis.document)==null?void 0:f.body);return u?Mj.createPortal(n.jsx(Je.div,{...a,ref:t}),u):null});Uc.displayName=Vk;function Yk(e,t){return m.useReducer((s,a)=>t[s][a]??s,e)}var Dr=e=>{const{present:t,children:s}=e,a=Gk(t),l=typeof s=="function"?s({present:a.isPresent}):m.Children.only(s),c=_t(a.ref,Wk(l));return typeof s=="function"||a.isPresent?m.cloneElement(l,{ref:c}):null};Dr.displayName="Presence";function Gk(e){const[t,s]=m.useState(),a=m.useRef({}),l=m.useRef(e),c=m.useRef("none"),u=e?"mounted":"unmounted",[f,h]=Yk(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const p=xd(a.current);c.current=f==="mounted"?p:"none"},[f]),Xn(()=>{const p=a.current,x=l.current;if(x!==e){const b=c.current,w=xd(p);e?h("MOUNT"):w==="none"||(p==null?void 0:p.display)==="none"?h("UNMOUNT"):h(x&&b!==w?"ANIMATION_OUT":"UNMOUNT"),l.current=e}},[e,h]),Xn(()=>{if(t){let p;const x=t.ownerDocument.defaultView??window,v=w=>{const N=xd(a.current).includes(w.animationName);if(w.target===t&&N&&(h("ANIMATION_END"),!l.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",p=x.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},b=w=>{w.target===t&&(c.current=xd(a.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",v),t.addEventListener("animationend",v),()=>{x.clearTimeout(p),t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",v),t.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[t,h]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:m.useCallback(p=>{p&&(a.current=getComputedStyle(p)),s(p)},[])}}function xd(e){return(e==null?void 0:e.animationName)||"none"}function Wk(e){var a,l;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(l=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:l.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var op="rovingFocusGroup.onEntryFocus",Xk={bubbles:!1,cancelable:!0},ff="RovingFocusGroup",[Kp,IN,Kk]=kg(ff),[Qk,hf]=ur(ff,[Kk]),[Zk,Jk]=Qk(ff),zN=m.forwardRef((e,t)=>n.jsx(Kp.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(Kp.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(eD,{...e,ref:t})})}));zN.displayName=ff;var eD=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:a,loop:l=!1,dir:c,currentTabStopId:u,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:x=!1,...v}=e,b=m.useRef(null),w=_t(t,b),j=sf(c),[N=null,_]=Ya({prop:u,defaultProp:f,onChange:h}),[R,E]=m.useState(!1),C=Ar(p),M=IN(s),T=m.useRef(!1),[z,q]=m.useState(0);return m.useEffect(()=>{const F=b.current;if(F)return F.addEventListener(op,C),()=>F.removeEventListener(op,C)},[C]),n.jsx(Zk,{scope:s,orientation:a,dir:j,loop:l,currentTabStopId:N,onItemFocus:m.useCallback(F=>_(F),[_]),onItemShiftTab:m.useCallback(()=>E(!0),[]),onFocusableItemAdd:m.useCallback(()=>q(F=>F+1),[]),onFocusableItemRemove:m.useCallback(()=>q(F=>F-1),[]),children:n.jsx(Je.div,{tabIndex:R||z===0?-1:0,"data-orientation":a,...v,ref:w,style:{outline:"none",...e.style},onMouseDown:De(e.onMouseDown,()=>{T.current=!0}),onFocus:De(e.onFocus,F=>{const U=!T.current;if(F.target===F.currentTarget&&U&&!R){const G=new CustomEvent(op,Xk);if(F.currentTarget.dispatchEvent(G),!G.defaultPrevented){const ce=M().filter(P=>P.focusable),re=ce.find(P=>P.active),O=ce.find(P=>P.id===N),ue=[re,O,...ce].filter(Boolean).map(P=>P.ref.current);BN(ue,x)}}T.current=!1}),onBlur:De(e.onBlur,()=>E(!1))})})}),UN="RovingFocusGroupItem",$N=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:a=!0,active:l=!1,tabStopId:c,...u}=e,f=Cs(),h=c||f,p=Jk(UN,s),x=p.currentTabStopId===h,v=IN(s),{onFocusableItemAdd:b,onFocusableItemRemove:w}=p;return m.useEffect(()=>{if(a)return b(),()=>w()},[a,b,w]),n.jsx(Kp.ItemSlot,{scope:s,id:h,focusable:a,active:l,children:n.jsx(Je.span,{tabIndex:x?0:-1,"data-orientation":p.orientation,...u,ref:t,onMouseDown:De(e.onMouseDown,j=>{a?p.onItemFocus(h):j.preventDefault()}),onFocus:De(e.onFocus,()=>p.onItemFocus(h)),onKeyDown:De(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){p.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const N=rD(j,p.orientation,p.dir);if(N!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let R=v().filter(E=>E.focusable).map(E=>E.ref.current);if(N==="last")R.reverse();else if(N==="prev"||N==="next"){N==="prev"&&R.reverse();const E=R.indexOf(j.currentTarget);R=p.loop?sD(R,E+1):R.slice(E+1)}setTimeout(()=>BN(R))}})})})});$N.displayName=UN;var tD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function nD(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function rD(e,t,s){const a=nD(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return tD[a]}function BN(e,t=!1){const s=document.activeElement;for(const a of e)if(a===s||(a.focus({preventScroll:t}),document.activeElement!==s))return}function sD(e,t){return e.map((s,a)=>e[(t+a)%e.length])}var HN=zN,qN=$N,aD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Cl=new WeakMap,vd=new WeakMap,yd={},cp=0,FN=function(e){return e&&(e.host||FN(e.parentNode))},iD=function(e,t){return t.map(function(s){if(e.contains(s))return s;var a=FN(s);return a&&e.contains(a)?a:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},lD=function(e,t,s,a){var l=iD(t,Array.isArray(e)?e:[e]);yd[s]||(yd[s]=new WeakMap);var c=yd[s],u=[],f=new Set,h=new Set(l),p=function(v){!v||f.has(v)||(f.add(v),p(v.parentNode))};l.forEach(p);var x=function(v){!v||h.has(v)||Array.prototype.forEach.call(v.children,function(b){if(f.has(b))x(b);else try{var w=b.getAttribute(a),j=w!==null&&w!=="false",N=(Cl.get(b)||0)+1,_=(c.get(b)||0)+1;Cl.set(b,N),c.set(b,_),u.push(b),N===1&&j&&vd.set(b,!0),_===1&&b.setAttribute(s,"true"),j||b.setAttribute(a,"true")}catch(R){console.error("aria-hidden: cannot operate on ",b,R)}})};return x(t),f.clear(),cp++,function(){u.forEach(function(v){var b=Cl.get(v)-1,w=c.get(v)-1;Cl.set(v,b),c.set(v,w),b||(vd.has(v)||v.removeAttribute(a),vd.delete(v)),w||v.removeAttribute(s)}),cp--,cp||(Cl=new WeakMap,Cl=new WeakMap,vd=new WeakMap,yd={})}},mf=function(e,t,s){s===void 0&&(s="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),l=aD(e);return l?(a.push.apply(a,Array.from(l.querySelectorAll("[aria-live]"))),lD(a,l,s,"aria-hidden")):function(){return null}},js=function(){return js=Object.assign||function(t){for(var s,a=1,l=arguments.length;a<l;a++){s=arguments[a];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(t[c]=s[c])}return t},js.apply(this,arguments)};function VN(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(s[a[l]]=e[a[l]]);return s}function oD(e,t,s){if(s||arguments.length===2)for(var a=0,l=t.length,c;a<l;a++)(c||!(a in t))&&(c||(c=Array.prototype.slice.call(t,0,a)),c[a]=t[a]);return e.concat(c||Array.prototype.slice.call(t))}var Td="right-scroll-bar-position",Md="width-before-scroll-bar",cD="with-scroll-bars-hidden",uD="--removed-body-scroll-bar-size";function up(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function dD(e,t){var s=m.useState(function(){return{value:e,callback:t,facade:{get current(){return s.value},set current(a){var l=s.value;l!==a&&(s.value=a,s.callback(a,l))}}}})[0];return s.callback=t,s.facade}var fD=typeof window<"u"?m.useLayoutEffect:m.useEffect,bw=new WeakMap;function hD(e,t){var s=dD(null,function(a){return e.forEach(function(l){return up(l,a)})});return fD(function(){var a=bw.get(s);if(a){var l=new Set(a),c=new Set(e),u=s.current;l.forEach(function(f){c.has(f)||up(f,null)}),c.forEach(function(f){l.has(f)||up(f,u)})}bw.set(s,e)},[e]),s}function mD(e){return e}function pD(e,t){t===void 0&&(t=mD);var s=[],a=!1,l={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(c){var u=t(c,a);return s.push(u),function(){s=s.filter(function(f){return f!==u})}},assignSyncMedium:function(c){for(a=!0;s.length;){var u=s;s=[],u.forEach(c)}s={push:function(f){return c(f)},filter:function(){return s}}},assignMedium:function(c){a=!0;var u=[];if(s.length){var f=s;s=[],f.forEach(c),u=s}var h=function(){var x=u;u=[],x.forEach(c)},p=function(){return Promise.resolve().then(h)};p(),s={push:function(x){u.push(x),p()},filter:function(x){return u=u.filter(x),s}}}};return l}function gD(e){e===void 0&&(e={});var t=pD(null);return t.options=js({async:!0,ssr:!1},e),t}var YN=function(e){var t=e.sideCar,s=VN(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return m.createElement(a,js({},s))};YN.isSideCarExport=!0;function xD(e,t){return e.useMedium(t),YN}var GN=gD(),dp=function(){},pf=m.forwardRef(function(e,t){var s=m.useRef(null),a=m.useState({onScrollCapture:dp,onWheelCapture:dp,onTouchMoveCapture:dp}),l=a[0],c=a[1],u=e.forwardProps,f=e.children,h=e.className,p=e.removeScrollBar,x=e.enabled,v=e.shards,b=e.sideCar,w=e.noIsolation,j=e.inert,N=e.allowPinchZoom,_=e.as,R=_===void 0?"div":_,E=e.gapMode,C=VN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=b,T=hD([s,t]),z=js(js({},C),l);return m.createElement(m.Fragment,null,x&&m.createElement(M,{sideCar:GN,removeScrollBar:p,shards:v,noIsolation:w,inert:j,setCallbacks:c,allowPinchZoom:!!N,lockRef:s,gapMode:E}),u?m.cloneElement(m.Children.only(f),js(js({},z),{ref:T})):m.createElement(R,js({},z,{className:h,ref:T}),f))});pf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pf.classNames={fullWidth:Md,zeroRight:Td};var vD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function yD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=vD();return t&&e.setAttribute("nonce",t),e}function bD(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function wD(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var jD=function(){var e=0,t=null;return{add:function(s){e==0&&(t=yD())&&(bD(t,s),wD(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ND=function(){var e=jD();return function(t,s){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},WN=function(){var e=ND(),t=function(s){var a=s.styles,l=s.dynamic;return e(a,l),null};return t},_D={left:0,top:0,right:0,gap:0},fp=function(e){return parseInt(e||"",10)||0},SD=function(e){var t=window.getComputedStyle(document.body),s=t[e==="padding"?"paddingLeft":"marginLeft"],a=t[e==="padding"?"paddingTop":"marginTop"],l=t[e==="padding"?"paddingRight":"marginRight"];return[fp(s),fp(a),fp(l)]},ED=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return _D;var t=SD(e),s=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-s+t[2]-t[0])}},CD=WN(),Pl="data-scroll-locked",RD=function(e,t,s,a){var l=e.left,c=e.top,u=e.right,f=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(cD,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(f,"px ").concat(a,`;
  }
  body[`).concat(Pl,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),s==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(a,`;
    `),s==="padding"&&"padding-right: ".concat(f,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Td,` {
    right: `).concat(f,"px ").concat(a,`;
  }
  
  .`).concat(Md,` {
    margin-right: `).concat(f,"px ").concat(a,`;
  }
  
  .`).concat(Td," .").concat(Td,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Md," .").concat(Md,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(Pl,`] {
    `).concat(uD,": ").concat(f,`px;
  }
`)},ww=function(){var e=parseInt(document.body.getAttribute(Pl)||"0",10);return isFinite(e)?e:0},TD=function(){m.useEffect(function(){return document.body.setAttribute(Pl,(ww()+1).toString()),function(){var e=ww()-1;e<=0?document.body.removeAttribute(Pl):document.body.setAttribute(Pl,e.toString())}},[])},MD=function(e){var t=e.noRelative,s=e.noImportant,a=e.gapMode,l=a===void 0?"margin":a;TD();var c=m.useMemo(function(){return ED(l)},[l]);return m.createElement(CD,{styles:RD(c,!t,l,s?"":"!important")})},Qp=!1;if(typeof window<"u")try{var bd=Object.defineProperty({},"passive",{get:function(){return Qp=!0,!0}});window.addEventListener("test",bd,bd),window.removeEventListener("test",bd,bd)}catch{Qp=!1}var Rl=Qp?{passive:!1}:!1,AD=function(e){return e.tagName==="TEXTAREA"},XN=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!AD(e)&&s[t]==="visible")},kD=function(e){return XN(e,"overflowY")},DD=function(e){return XN(e,"overflowX")},jw=function(e,t){var s=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var l=KN(e,a);if(l){var c=QN(e,a),u=c[1],f=c[2];if(u>f)return!0}a=a.parentNode}while(a&&a!==s.body);return!1},OD=function(e){var t=e.scrollTop,s=e.scrollHeight,a=e.clientHeight;return[t,s,a]},PD=function(e){var t=e.scrollLeft,s=e.scrollWidth,a=e.clientWidth;return[t,s,a]},KN=function(e,t){return e==="v"?kD(t):DD(t)},QN=function(e,t){return e==="v"?OD(t):PD(t)},LD=function(e,t){return e==="h"&&t==="rtl"?-1:1},ID=function(e,t,s,a,l){var c=LD(e,window.getComputedStyle(t).direction),u=c*a,f=s.target,h=t.contains(f),p=!1,x=u>0,v=0,b=0;do{var w=QN(e,f),j=w[0],N=w[1],_=w[2],R=N-_-c*j;(j||R)&&KN(e,f)&&(v+=R,b+=j),f instanceof ShadowRoot?f=f.host:f=f.parentNode}while(!h&&f!==document.body||h&&(t.contains(f)||t===f));return(x&&Math.abs(v)<1||!x&&Math.abs(b)<1)&&(p=!0),p},wd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Nw=function(e){return[e.deltaX,e.deltaY]},_w=function(e){return e&&"current"in e?e.current:e},zD=function(e,t){return e[0]===t[0]&&e[1]===t[1]},UD=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},$D=0,Tl=[];function BD(e){var t=m.useRef([]),s=m.useRef([0,0]),a=m.useRef(),l=m.useState($D++)[0],c=m.useState(WN)[0],u=m.useRef(e);m.useEffect(function(){u.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(l));var N=oD([e.lockRef.current],(e.shards||[]).map(_w),!0).filter(Boolean);return N.forEach(function(_){return _.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),N.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(l))})}}},[e.inert,e.lockRef.current,e.shards]);var f=m.useCallback(function(N,_){if("touches"in N&&N.touches.length===2||N.type==="wheel"&&N.ctrlKey)return!u.current.allowPinchZoom;var R=wd(N),E=s.current,C="deltaX"in N?N.deltaX:E[0]-R[0],M="deltaY"in N?N.deltaY:E[1]-R[1],T,z=N.target,q=Math.abs(C)>Math.abs(M)?"h":"v";if("touches"in N&&q==="h"&&z.type==="range")return!1;var F=jw(q,z);if(!F)return!0;if(F?T=q:(T=q==="v"?"h":"v",F=jw(q,z)),!F)return!1;if(!a.current&&"changedTouches"in N&&(C||M)&&(a.current=T),!T)return!0;var U=a.current||T;return ID(U,_,N,U==="h"?C:M)},[]),h=m.useCallback(function(N){var _=N;if(!(!Tl.length||Tl[Tl.length-1]!==c)){var R="deltaY"in _?Nw(_):wd(_),E=t.current.filter(function(T){return T.name===_.type&&(T.target===_.target||_.target===T.shadowParent)&&zD(T.delta,R)})[0];if(E&&E.should){_.cancelable&&_.preventDefault();return}if(!E){var C=(u.current.shards||[]).map(_w).filter(Boolean).filter(function(T){return T.contains(_.target)}),M=C.length>0?f(_,C[0]):!u.current.noIsolation;M&&_.cancelable&&_.preventDefault()}}},[]),p=m.useCallback(function(N,_,R,E){var C={name:N,delta:_,target:R,should:E,shadowParent:HD(R)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(M){return M!==C})},1)},[]),x=m.useCallback(function(N){s.current=wd(N),a.current=void 0},[]),v=m.useCallback(function(N){p(N.type,Nw(N),N.target,f(N,e.lockRef.current))},[]),b=m.useCallback(function(N){p(N.type,wd(N),N.target,f(N,e.lockRef.current))},[]);m.useEffect(function(){return Tl.push(c),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:b}),document.addEventListener("wheel",h,Rl),document.addEventListener("touchmove",h,Rl),document.addEventListener("touchstart",x,Rl),function(){Tl=Tl.filter(function(N){return N!==c}),document.removeEventListener("wheel",h,Rl),document.removeEventListener("touchmove",h,Rl),document.removeEventListener("touchstart",x,Rl)}},[]);var w=e.removeScrollBar,j=e.inert;return m.createElement(m.Fragment,null,j?m.createElement(c,{styles:UD(l)}):null,w?m.createElement(MD,{gapMode:e.gapMode}):null)}function HD(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const qD=xD(GN,BD);var $c=m.forwardRef(function(e,t){return m.createElement(pf,js({},e,{ref:t,sideCar:qD}))});$c.classNames=pf.classNames;var Zp=["Enter"," "],FD=["ArrowDown","PageUp","Home"],ZN=["ArrowUp","PageDown","End"],VD=[...FD,...ZN],YD={ltr:[...Zp,"ArrowRight"],rtl:[...Zp,"ArrowLeft"]},GD={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Bc="Menu",[jc,WD,XD]=kg(Bc),[zi,JN]=ur(Bc,[XD,Za,hf]),gf=Za(),e1=hf(),[KD,Ui]=zi(Bc),[QD,Hc]=zi(Bc),t1=e=>{const{__scopeMenu:t,open:s=!1,children:a,dir:l,onOpenChange:c,modal:u=!0}=e,f=gf(t),[h,p]=m.useState(null),x=m.useRef(!1),v=Ar(c),b=sf(l);return m.useEffect(()=>{const w=()=>{x.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>x.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),n.jsx(qg,{...f,children:n.jsx(KD,{scope:t,open:s,onOpenChange:v,content:h,onContentChange:p,children:n.jsx(QD,{scope:t,onClose:m.useCallback(()=>v(!1),[v]),isUsingKeyboardRef:x,dir:b,modal:u,children:a})})})};t1.displayName=Bc;var ZD="MenuAnchor",Fg=m.forwardRef((e,t)=>{const{__scopeMenu:s,...a}=e,l=gf(s);return n.jsx(zc,{...l,...a,ref:t})});Fg.displayName=ZD;var Vg="MenuPortal",[JD,n1]=zi(Vg,{forceMount:void 0}),r1=e=>{const{__scopeMenu:t,forceMount:s,children:a,container:l}=e,c=Ui(Vg,t);return n.jsx(JD,{scope:t,forceMount:s,children:n.jsx(Dr,{present:s||c.open,children:n.jsx(Uc,{asChild:!0,container:l,children:a})})})};r1.displayName=Vg;var Wr="MenuContent",[eO,Yg]=zi(Wr),s1=m.forwardRef((e,t)=>{const s=n1(Wr,e.__scopeMenu),{forceMount:a=s.forceMount,...l}=e,c=Ui(Wr,e.__scopeMenu),u=Hc(Wr,e.__scopeMenu);return n.jsx(jc.Provider,{scope:e.__scopeMenu,children:n.jsx(Dr,{present:a||c.open,children:n.jsx(jc.Slot,{scope:e.__scopeMenu,children:u.modal?n.jsx(tO,{...l,ref:t}):n.jsx(nO,{...l,ref:t})})})})}),tO=m.forwardRef((e,t)=>{const s=Ui(Wr,e.__scopeMenu),a=m.useRef(null),l=_t(t,a);return m.useEffect(()=>{const c=a.current;if(c)return mf(c)},[]),n.jsx(Gg,{...e,ref:l,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:De(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),nO=m.forwardRef((e,t)=>{const s=Ui(Wr,e.__scopeMenu);return n.jsx(Gg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),Gg=m.forwardRef((e,t)=>{const{__scopeMenu:s,loop:a=!1,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:u,disableOutsidePointerEvents:f,onEntryFocus:h,onEscapeKeyDown:p,onPointerDownOutside:x,onFocusOutside:v,onInteractOutside:b,onDismiss:w,disableOutsideScroll:j,...N}=e,_=Ui(Wr,s),R=Hc(Wr,s),E=gf(s),C=e1(s),M=WD(s),[T,z]=m.useState(null),q=m.useRef(null),F=_t(t,q,_.onContentChange),U=m.useRef(0),G=m.useRef(""),ce=m.useRef(0),re=m.useRef(null),O=m.useRef("right"),ie=m.useRef(0),ue=j?$c:m.Fragment,P=j?{as:Ts,allowPinchZoom:!0}:void 0,X=te=>{var K,ae;const k=G.current+te,L=M().filter(ge=>!ge.disabled),Y=document.activeElement,H=(K=L.find(ge=>ge.ref.current===Y))==null?void 0:K.textValue,D=L.map(ge=>ge.textValue),I=mO(D,k,H),$=(ae=L.find(ge=>ge.textValue===I))==null?void 0:ae.ref.current;(function ge(de){G.current=de,window.clearTimeout(U.current),de!==""&&(U.current=window.setTimeout(()=>ge(""),1e3))})(k),$&&setTimeout(()=>$.focus())};m.useEffect(()=>()=>window.clearTimeout(U.current),[]),af();const V=m.useCallback(te=>{var L,Y;return O.current===((L=re.current)==null?void 0:L.side)&&gO(te,(Y=re.current)==null?void 0:Y.area)},[]);return n.jsx(eO,{scope:s,searchRef:G,onItemEnter:m.useCallback(te=>{V(te)&&te.preventDefault()},[V]),onItemLeave:m.useCallback(te=>{var k;V(te)||((k=q.current)==null||k.focus(),z(null))},[V]),onTriggerLeave:m.useCallback(te=>{V(te)&&te.preventDefault()},[V]),pointerGraceTimerRef:ce,onPointerGraceIntentChange:m.useCallback(te=>{re.current=te},[]),children:n.jsx(ue,{...P,children:n.jsx(Lc,{asChild:!0,trapped:l,onMountAutoFocus:De(c,te=>{var k;te.preventDefault(),(k=q.current)==null||k.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:n.jsx(to,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:p,onPointerDownOutside:x,onFocusOutside:v,onInteractOutside:b,onDismiss:w,children:n.jsx(HN,{asChild:!0,...C,dir:R.dir,orientation:"vertical",loop:a,currentTabStopId:T,onCurrentTabStopIdChange:z,onEntryFocus:De(h,te=>{R.isUsingKeyboardRef.current||te.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(uf,{role:"menu","aria-orientation":"vertical","data-state":b1(_.open),"data-radix-menu-content":"",dir:R.dir,...E,...N,ref:F,style:{outline:"none",...N.style},onKeyDown:De(N.onKeyDown,te=>{const L=te.target.closest("[data-radix-menu-content]")===te.currentTarget,Y=te.ctrlKey||te.altKey||te.metaKey,H=te.key.length===1;L&&(te.key==="Tab"&&te.preventDefault(),!Y&&H&&X(te.key));const D=q.current;if(te.target!==D||!VD.includes(te.key))return;te.preventDefault();const $=M().filter(K=>!K.disabled).map(K=>K.ref.current);ZN.includes(te.key)&&$.reverse(),fO($)}),onBlur:De(e.onBlur,te=>{te.currentTarget.contains(te.target)||(window.clearTimeout(U.current),G.current="")}),onPointerMove:De(e.onPointerMove,Nc(te=>{const k=te.target,L=ie.current!==te.clientX;if(te.currentTarget.contains(k)&&L){const Y=te.clientX>ie.current?"right":"left";O.current=Y,ie.current=te.clientX}}))})})})})})})});s1.displayName=Wr;var rO="MenuGroup",Wg=m.forwardRef((e,t)=>{const{__scopeMenu:s,...a}=e;return n.jsx(Je.div,{role:"group",...a,ref:t})});Wg.displayName=rO;var sO="MenuLabel",a1=m.forwardRef((e,t)=>{const{__scopeMenu:s,...a}=e;return n.jsx(Je.div,{...a,ref:t})});a1.displayName=sO;var $d="MenuItem",Sw="menu.itemSelect",xf=m.forwardRef((e,t)=>{const{disabled:s=!1,onSelect:a,...l}=e,c=m.useRef(null),u=Hc($d,e.__scopeMenu),f=Yg($d,e.__scopeMenu),h=_t(t,c),p=m.useRef(!1),x=()=>{const v=c.current;if(!s&&v){const b=new CustomEvent(Sw,{bubbles:!0,cancelable:!0});v.addEventListener(Sw,w=>a==null?void 0:a(w),{once:!0}),Qj(v,b),b.defaultPrevented?p.current=!1:u.onClose()}};return n.jsx(i1,{...l,ref:h,disabled:s,onClick:De(e.onClick,x),onPointerDown:v=>{var b;(b=e.onPointerDown)==null||b.call(e,v),p.current=!0},onPointerUp:De(e.onPointerUp,v=>{var b;p.current||(b=v.currentTarget)==null||b.click()}),onKeyDown:De(e.onKeyDown,v=>{const b=f.searchRef.current!=="";s||b&&v.key===" "||Zp.includes(v.key)&&(v.currentTarget.click(),v.preventDefault())})})});xf.displayName=$d;var i1=m.forwardRef((e,t)=>{const{__scopeMenu:s,disabled:a=!1,textValue:l,...c}=e,u=Yg($d,s),f=e1(s),h=m.useRef(null),p=_t(t,h),[x,v]=m.useState(!1),[b,w]=m.useState("");return m.useEffect(()=>{const j=h.current;j&&w((j.textContent??"").trim())},[c.children]),n.jsx(jc.ItemSlot,{scope:s,disabled:a,textValue:l??b,children:n.jsx(qN,{asChild:!0,...f,focusable:!a,children:n.jsx(Je.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...c,ref:p,onPointerMove:De(e.onPointerMove,Nc(j=>{a?u.onItemLeave(j):(u.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:De(e.onPointerLeave,Nc(j=>u.onItemLeave(j))),onFocus:De(e.onFocus,()=>v(!0)),onBlur:De(e.onBlur,()=>v(!1))})})})}),aO="MenuCheckboxItem",l1=m.forwardRef((e,t)=>{const{checked:s=!1,onCheckedChange:a,...l}=e;return n.jsx(f1,{scope:e.__scopeMenu,checked:s,children:n.jsx(xf,{role:"menuitemcheckbox","aria-checked":Bd(s)?"mixed":s,...l,ref:t,"data-state":Kg(s),onSelect:De(l.onSelect,()=>a==null?void 0:a(Bd(s)?!0:!s),{checkForDefaultPrevented:!1})})})});l1.displayName=aO;var o1="MenuRadioGroup",[iO,lO]=zi(o1,{value:void 0,onValueChange:()=>{}}),c1=m.forwardRef((e,t)=>{const{value:s,onValueChange:a,...l}=e,c=Ar(a);return n.jsx(iO,{scope:e.__scopeMenu,value:s,onValueChange:c,children:n.jsx(Wg,{...l,ref:t})})});c1.displayName=o1;var u1="MenuRadioItem",d1=m.forwardRef((e,t)=>{const{value:s,...a}=e,l=lO(u1,e.__scopeMenu),c=s===l.value;return n.jsx(f1,{scope:e.__scopeMenu,checked:c,children:n.jsx(xf,{role:"menuitemradio","aria-checked":c,...a,ref:t,"data-state":Kg(c),onSelect:De(a.onSelect,()=>{var u;return(u=l.onValueChange)==null?void 0:u.call(l,s)},{checkForDefaultPrevented:!1})})})});d1.displayName=u1;var Xg="MenuItemIndicator",[f1,oO]=zi(Xg,{checked:!1}),h1=m.forwardRef((e,t)=>{const{__scopeMenu:s,forceMount:a,...l}=e,c=oO(Xg,s);return n.jsx(Dr,{present:a||Bd(c.checked)||c.checked===!0,children:n.jsx(Je.span,{...l,ref:t,"data-state":Kg(c.checked)})})});h1.displayName=Xg;var cO="MenuSeparator",m1=m.forwardRef((e,t)=>{const{__scopeMenu:s,...a}=e;return n.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...a,ref:t})});m1.displayName=cO;var uO="MenuArrow",p1=m.forwardRef((e,t)=>{const{__scopeMenu:s,...a}=e,l=gf(s);return n.jsx(df,{...l,...a,ref:t})});p1.displayName=uO;var dO="MenuSub",[cH,g1]=zi(dO),cc="MenuSubTrigger",x1=m.forwardRef((e,t)=>{const s=Ui(cc,e.__scopeMenu),a=Hc(cc,e.__scopeMenu),l=g1(cc,e.__scopeMenu),c=Yg(cc,e.__scopeMenu),u=m.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:h}=c,p={__scopeMenu:e.__scopeMenu},x=m.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return m.useEffect(()=>x,[x]),m.useEffect(()=>{const v=f.current;return()=>{window.clearTimeout(v),h(null)}},[f,h]),n.jsx(Fg,{asChild:!0,...p,children:n.jsx(i1,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":l.contentId,"data-state":b1(s.open),...e,ref:nf(t,l.onTriggerChange),onClick:v=>{var b;(b=e.onClick)==null||b.call(e,v),!(e.disabled||v.defaultPrevented)&&(v.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:De(e.onPointerMove,Nc(v=>{c.onItemEnter(v),!v.defaultPrevented&&!e.disabled&&!s.open&&!u.current&&(c.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{s.onOpenChange(!0),x()},100))})),onPointerLeave:De(e.onPointerLeave,Nc(v=>{var w,j;x();const b=(w=s.content)==null?void 0:w.getBoundingClientRect();if(b){const N=(j=s.content)==null?void 0:j.dataset.side,_=N==="right",R=_?-5:5,E=b[_?"left":"right"],C=b[_?"right":"left"];c.onPointerGraceIntentChange({area:[{x:v.clientX+R,y:v.clientY},{x:E,y:b.top},{x:C,y:b.top},{x:C,y:b.bottom},{x:E,y:b.bottom}],side:N}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(v),v.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:De(e.onKeyDown,v=>{var w;const b=c.searchRef.current!=="";e.disabled||b&&v.key===" "||YD[a.dir].includes(v.key)&&(s.onOpenChange(!0),(w=s.content)==null||w.focus(),v.preventDefault())})})})});x1.displayName=cc;var v1="MenuSubContent",y1=m.forwardRef((e,t)=>{const s=n1(Wr,e.__scopeMenu),{forceMount:a=s.forceMount,...l}=e,c=Ui(Wr,e.__scopeMenu),u=Hc(Wr,e.__scopeMenu),f=g1(v1,e.__scopeMenu),h=m.useRef(null),p=_t(t,h);return n.jsx(jc.Provider,{scope:e.__scopeMenu,children:n.jsx(Dr,{present:a||c.open,children:n.jsx(jc.Slot,{scope:e.__scopeMenu,children:n.jsx(Gg,{id:f.contentId,"aria-labelledby":f.triggerId,...l,ref:p,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{var v;u.isUsingKeyboardRef.current&&((v=h.current)==null||v.focus()),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:De(e.onFocusOutside,x=>{x.target!==f.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:De(e.onEscapeKeyDown,x=>{u.onClose(),x.preventDefault()}),onKeyDown:De(e.onKeyDown,x=>{var w;const v=x.currentTarget.contains(x.target),b=GD[u.dir].includes(x.key);v&&b&&(c.onOpenChange(!1),(w=f.trigger)==null||w.focus(),x.preventDefault())})})})})})});y1.displayName=v1;function b1(e){return e?"open":"closed"}function Bd(e){return e==="indeterminate"}function Kg(e){return Bd(e)?"indeterminate":e?"checked":"unchecked"}function fO(e){const t=document.activeElement;for(const s of e)if(s===t||(s.focus(),document.activeElement!==t))return}function hO(e,t){return e.map((s,a)=>e[(t+a)%e.length])}function mO(e,t,s){const l=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,c=s?e.indexOf(s):-1;let u=hO(e,Math.max(c,0));l.length===1&&(u=u.filter(p=>p!==s));const h=u.find(p=>p.toLowerCase().startsWith(l.toLowerCase()));return h!==s?h:void 0}function pO(e,t){const{x:s,y:a}=e;let l=!1;for(let c=0,u=t.length-1;c<t.length;u=c++){const f=t[c].x,h=t[c].y,p=t[u].x,x=t[u].y;h>a!=x>a&&s<(p-f)*(a-h)/(x-h)+f&&(l=!l)}return l}function gO(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return pO(s,t)}function Nc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var xO=t1,vO=Fg,yO=r1,bO=s1,wO=Wg,jO=a1,NO=xf,_O=l1,SO=c1,EO=d1,CO=h1,RO=m1,TO=p1,MO=x1,AO=y1,Qg="DropdownMenu",[kO,uH]=ur(Qg,[JN]),dr=JN(),[DO,w1]=kO(Qg),j1=e=>{const{__scopeDropdownMenu:t,children:s,dir:a,open:l,defaultOpen:c,onOpenChange:u,modal:f=!0}=e,h=dr(t),p=m.useRef(null),[x=!1,v]=Ya({prop:l,defaultProp:c,onChange:u});return n.jsx(DO,{scope:t,triggerId:Cs(),triggerRef:p,contentId:Cs(),open:x,onOpenChange:v,onOpenToggle:m.useCallback(()=>v(b=>!b),[v]),modal:f,children:n.jsx(xO,{...h,open:x,onOpenChange:v,dir:a,modal:f,children:s})})};j1.displayName=Qg;var N1="DropdownMenuTrigger",_1=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,disabled:a=!1,...l}=e,c=w1(N1,s),u=dr(s);return n.jsx(vO,{asChild:!0,...u,children:n.jsx(Je.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...l,ref:nf(t,c.triggerRef),onPointerDown:De(e.onPointerDown,f=>{!a&&f.button===0&&f.ctrlKey===!1&&(c.onOpenToggle(),c.open||f.preventDefault())}),onKeyDown:De(e.onKeyDown,f=>{a||(["Enter"," "].includes(f.key)&&c.onOpenToggle(),f.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())})})})});_1.displayName=N1;var OO="DropdownMenuPortal",S1=e=>{const{__scopeDropdownMenu:t,...s}=e,a=dr(t);return n.jsx(yO,{...a,...s})};S1.displayName=OO;var E1="DropdownMenuContent",C1=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,l=w1(E1,s),c=dr(s),u=m.useRef(!1);return n.jsx(bO,{id:l.contentId,"aria-labelledby":l.triggerId,...c,...a,ref:t,onCloseAutoFocus:De(e.onCloseAutoFocus,f=>{var h;u.current||(h=l.triggerRef.current)==null||h.focus(),u.current=!1,f.preventDefault()}),onInteractOutside:De(e.onInteractOutside,f=>{const h=f.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0,x=h.button===2||p;(!l.modal||x)&&(u.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});C1.displayName=E1;var PO="DropdownMenuGroup",LO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,l=dr(s);return n.jsx(wO,{...l,...a,ref:t})});LO.displayName=PO;var IO="DropdownMenuLabel",R1=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,l=dr(s);return n.jsx(jO,{...l,...a,ref:t})});R1.displayName=IO;var zO="DropdownMenuItem",T1=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,l=dr(s);return n.jsx(NO,{...l,...a,ref:t})});T1.displayName=zO;var UO="DropdownMenuCheckboxItem",$O=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,l=dr(s);return n.jsx(_O,{...l,...a,ref:t})});$O.displayName=UO;var BO="DropdownMenuRadioGroup",HO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,l=dr(s);return n.jsx(SO,{...l,...a,ref:t})});HO.displayName=BO;var qO="DropdownMenuRadioItem",FO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,l=dr(s);return n.jsx(EO,{...l,...a,ref:t})});FO.displayName=qO;var VO="DropdownMenuItemIndicator",YO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,l=dr(s);return n.jsx(CO,{...l,...a,ref:t})});YO.displayName=VO;var GO="DropdownMenuSeparator",M1=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,l=dr(s);return n.jsx(RO,{...l,...a,ref:t})});M1.displayName=GO;var WO="DropdownMenuArrow",XO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,l=dr(s);return n.jsx(TO,{...l,...a,ref:t})});XO.displayName=WO;var KO="DropdownMenuSubTrigger",QO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,l=dr(s);return n.jsx(MO,{...l,...a,ref:t})});QO.displayName=KO;var ZO="DropdownMenuSubContent",JO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,l=dr(s);return n.jsx(AO,{...l,...a,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});JO.displayName=ZO;var eP=j1,tP=_1,nP=S1,rP=C1,sP=R1,aP=T1,iP=M1;/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oP=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,a)=>a?a.toUpperCase():s.toLowerCase()),Ew=e=>{const t=oP(e);return t.charAt(0).toUpperCase()+t.slice(1)},A1=(...e)=>e.filter((t,s,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===s).join(" ").trim();/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:c,iconNode:u,...f},h)=>m.createElement("svg",{ref:h,...cP,width:t,height:t,stroke:e,strokeWidth:a?Number(s)*24/Number(t):s,className:A1("lucide",l),...f},[...u.map(([p,x])=>m.createElement(p,x)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=(e,t)=>{const s=m.forwardRef(({className:a,...l},c)=>m.createElement(uP,{ref:c,iconNode:t,className:A1(`lucide-${lP(Ew(e))}`,`lucide-${e}`,a),...l}));return s.displayName=Ew(e),s};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],fP=tt("arrow-down-to-line",dP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],bn=tt("arrow-left",hP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],k1=tt("banknote",mP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],ln=tt("calendar-days",pP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],D1=tt("calendar",gP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Zg=tt("check",xP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],O1=tt("chevron-down",vP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],P1=tt("chevron-left",yP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],L1=tt("chevron-right",bP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],jP=tt("chevron-up",wP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],It=tt("circle-alert",NP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ja=tt("circle-check-big",_P);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ka=tt("circle-plus",SP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],CP=tt("circle",EP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Hd=tt("clipboard-list",RP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]],vf=tt("database-zap",TP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],AP=tt("download",MP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Kr=tt("file-text",kP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Jg=tt("flask-conical",DP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],PP=tt("grip-vertical",OP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],or=tt("hourglass",LP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],yf=tt("image",IP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ye=tt("info",zP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],mc=tt("layers",UP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],BP=tt("layout-template",$P);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],la=tt("list-checks",HP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Lt=tt("loader-circle",qP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],VP=tt("log-out",FP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],GP=tt("menu",YP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],I1=tt("pencil",WP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],mn=tt("phone",XP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ad=tt("plus",KP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],bf=tt("printer",QP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Fl=tt("save",ZP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],qc=tt("search",JP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],t3=tt("settings",e3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Qr=tt("square-pen",n3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Kn=tt("stethoscope",r3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Fc=tt("trash-2",s3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Ll=tt("trash",a3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],l3=tt("upload",i3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],z1=tt("user-plus",o3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ht=tt("user",c3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],U1=tt("users",u3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],f3=tt("workflow",d3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wf=tt("x",h3);function m3({...e}){return n.jsx(eP,{"data-slot":"dropdown-menu",...e})}function p3({...e}){return n.jsx(tP,{"data-slot":"dropdown-menu-trigger",...e})}function g3({className:e,sideOffset:t=4,...s}){return n.jsx(nP,{children:n.jsx(rP,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Me("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...s})})}function x3({className:e,inset:t,variant:s="default",...a}){return n.jsx(aP,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":s,className:Me("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function v3({className:e,inset:t,...s}){return n.jsx(sP,{"data-slot":"dropdown-menu-label","data-inset":t,className:Me("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...s})}function y3({className:e,...t}){return n.jsx(iP,{"data-slot":"dropdown-menu-separator",className:Me("bg-border -mx-1 my-1 h-px",e),...t})}var ex="Dialog",[$1,B1]=ur(ex),[b3,ms]=$1(ex),H1=e=>{const{__scopeDialog:t,children:s,open:a,defaultOpen:l,onOpenChange:c,modal:u=!0}=e,f=m.useRef(null),h=m.useRef(null),[p=!1,x]=Ya({prop:a,defaultProp:l,onChange:c});return n.jsx(b3,{scope:t,triggerRef:f,contentRef:h,contentId:Cs(),titleId:Cs(),descriptionId:Cs(),open:p,onOpenChange:x,onOpenToggle:m.useCallback(()=>x(v=>!v),[x]),modal:u,children:s})};H1.displayName=ex;var q1="DialogTrigger",F1=m.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,l=ms(q1,s),c=_t(t,l.triggerRef);return n.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":rx(l.open),...a,ref:c,onClick:De(e.onClick,l.onOpenToggle)})});F1.displayName=q1;var tx="DialogPortal",[w3,V1]=$1(tx,{forceMount:void 0}),Y1=e=>{const{__scopeDialog:t,forceMount:s,children:a,container:l}=e,c=ms(tx,t);return n.jsx(w3,{scope:t,forceMount:s,children:m.Children.map(a,u=>n.jsx(Dr,{present:s||c.open,children:n.jsx(Uc,{asChild:!0,container:l,children:u})}))})};Y1.displayName=tx;var qd="DialogOverlay",G1=m.forwardRef((e,t)=>{const s=V1(qd,e.__scopeDialog),{forceMount:a=s.forceMount,...l}=e,c=ms(qd,e.__scopeDialog);return c.modal?n.jsx(Dr,{present:a||c.open,children:n.jsx(j3,{...l,ref:t})}):null});G1.displayName=qd;var j3=m.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,l=ms(qd,s);return n.jsx($c,{as:Ts,allowPinchZoom:!0,shards:[l.contentRef],children:n.jsx(Je.div,{"data-state":rx(l.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),Mi="DialogContent",W1=m.forwardRef((e,t)=>{const s=V1(Mi,e.__scopeDialog),{forceMount:a=s.forceMount,...l}=e,c=ms(Mi,e.__scopeDialog);return n.jsx(Dr,{present:a||c.open,children:c.modal?n.jsx(N3,{...l,ref:t}):n.jsx(_3,{...l,ref:t})})});W1.displayName=Mi;var N3=m.forwardRef((e,t)=>{const s=ms(Mi,e.__scopeDialog),a=m.useRef(null),l=_t(t,s.contentRef,a);return m.useEffect(()=>{const c=a.current;if(c)return mf(c)},[]),n.jsx(X1,{...e,ref:l,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(e.onCloseAutoFocus,c=>{var u;c.preventDefault(),(u=s.triggerRef.current)==null||u.focus()}),onPointerDownOutside:De(e.onPointerDownOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0;(u.button===2||f)&&c.preventDefault()}),onFocusOutside:De(e.onFocusOutside,c=>c.preventDefault())})}),_3=m.forwardRef((e,t)=>{const s=ms(Mi,e.__scopeDialog),a=m.useRef(!1),l=m.useRef(!1);return n.jsx(X1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var u,f;(u=e.onCloseAutoFocus)==null||u.call(e,c),c.defaultPrevented||(a.current||(f=s.triggerRef.current)==null||f.focus(),c.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:c=>{var h,p;(h=e.onInteractOutside)==null||h.call(e,c),c.defaultPrevented||(a.current=!0,c.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const u=c.target;((p=s.triggerRef.current)==null?void 0:p.contains(u))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&l.current&&c.preventDefault()}})}),X1=m.forwardRef((e,t)=>{const{__scopeDialog:s,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:c,...u}=e,f=ms(Mi,s),h=m.useRef(null),p=_t(t,h);return af(),n.jsxs(n.Fragment,{children:[n.jsx(Lc,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:c,children:n.jsx(to,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":rx(f.open),...u,ref:p,onDismiss:()=>f.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(E3,{titleId:f.titleId}),n.jsx(R3,{contentRef:h,descriptionId:f.descriptionId})]})]})}),nx="DialogTitle",K1=m.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,l=ms(nx,s);return n.jsx(Je.h2,{id:l.titleId,...a,ref:t})});K1.displayName=nx;var Q1="DialogDescription",Z1=m.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,l=ms(Q1,s);return n.jsx(Je.p,{id:l.descriptionId,...a,ref:t})});Z1.displayName=Q1;var J1="DialogClose",e_=m.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,l=ms(J1,s);return n.jsx(Je.button,{type:"button",...a,ref:t,onClick:De(e.onClick,()=>l.onOpenChange(!1))})});e_.displayName=J1;function rx(e){return e?"open":"closed"}var t_="DialogTitleWarning",[S3,n_]=jA(t_,{contentName:Mi,titleName:nx,docsSlug:"dialog"}),E3=({titleId:e})=>{const t=n_(t_),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},C3="DialogDescriptionWarning",R3=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${n_(C3).contentName}}.`;return m.useEffect(()=>{var c;const l=(c=e.current)==null?void 0:c.getAttribute("aria-describedby");t&&l&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},sx=H1,r_=F1,ax=Y1,ix=G1,lx=W1,s_=K1,a_=Z1,Vc=e_;function T3({...e}){return n.jsx(sx,{"data-slot":"sheet",...e})}function M3({...e}){return n.jsx(r_,{"data-slot":"sheet-trigger",...e})}function A3({...e}){return n.jsx(ax,{"data-slot":"sheet-portal",...e})}function k3({className:e,...t}){return n.jsx(ix,{"data-slot":"sheet-overlay",className:Me("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function D3({className:e,children:t,side:s="right",...a}){return n.jsxs(A3,{children:[n.jsx(k3,{}),n.jsxs(lx,{"data-slot":"sheet-content",className:Me("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",s==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",s==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",s==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",s==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...a,children:[t,n.jsxs(Vc,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[n.jsx(wf,{className:"size-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}var O3="VisuallyHidden",ox=m.forwardRef((e,t)=>n.jsx(Je.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));ox.displayName=O3;var P3=ox,[jf,dH]=ur("Tooltip",[Za]),cx=Za(),i_="TooltipProvider",L3=700,Cw="tooltip.open",[I3,l_]=jf(i_),o_=e=>{const{__scopeTooltip:t,delayDuration:s=L3,skipDelayDuration:a=300,disableHoverableContent:l=!1,children:c}=e,[u,f]=m.useState(!0),h=m.useRef(!1),p=m.useRef(0);return m.useEffect(()=>{const x=p.current;return()=>window.clearTimeout(x)},[]),n.jsx(I3,{scope:t,isOpenDelayed:u,delayDuration:s,onOpen:m.useCallback(()=>{window.clearTimeout(p.current),f(!1)},[]),onClose:m.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>f(!0),a)},[a]),isPointerInTransitRef:h,onPointerInTransitChange:m.useCallback(x=>{h.current=x},[]),disableHoverableContent:l,children:c})};o_.displayName=i_;var c_="Tooltip",[fH,Nf]=jf(c_),Jp="TooltipTrigger",z3=m.forwardRef((e,t)=>{const{__scopeTooltip:s,...a}=e,l=Nf(Jp,s),c=l_(Jp,s),u=cx(s),f=m.useRef(null),h=_t(t,f,l.onTriggerChange),p=m.useRef(!1),x=m.useRef(!1),v=m.useCallback(()=>p.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),n.jsx(zc,{asChild:!0,...u,children:n.jsx(Je.button,{"aria-describedby":l.open?l.contentId:void 0,"data-state":l.stateAttribute,...a,ref:h,onPointerMove:De(e.onPointerMove,b=>{b.pointerType!=="touch"&&!x.current&&!c.isPointerInTransitRef.current&&(l.onTriggerEnter(),x.current=!0)}),onPointerLeave:De(e.onPointerLeave,()=>{l.onTriggerLeave(),x.current=!1}),onPointerDown:De(e.onPointerDown,()=>{p.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:De(e.onFocus,()=>{p.current||l.onOpen()}),onBlur:De(e.onBlur,l.onClose),onClick:De(e.onClick,l.onClose)})})});z3.displayName=Jp;var U3="TooltipPortal",[hH,$3]=jf(U3,{forceMount:void 0}),Vl="TooltipContent",B3=m.forwardRef((e,t)=>{const s=$3(Vl,e.__scopeTooltip),{forceMount:a=s.forceMount,side:l="top",...c}=e,u=Nf(Vl,e.__scopeTooltip);return n.jsx(Dr,{present:a||u.open,children:u.disableHoverableContent?n.jsx(u_,{side:l,...c,ref:t}):n.jsx(H3,{side:l,...c,ref:t})})}),H3=m.forwardRef((e,t)=>{const s=Nf(Vl,e.__scopeTooltip),a=l_(Vl,e.__scopeTooltip),l=m.useRef(null),c=_t(t,l),[u,f]=m.useState(null),{trigger:h,onClose:p}=s,x=l.current,{onPointerInTransitChange:v}=a,b=m.useCallback(()=>{f(null),v(!1)},[v]),w=m.useCallback((j,N)=>{const _=j.currentTarget,R={x:j.clientX,y:j.clientY},E=Y3(R,_.getBoundingClientRect()),C=G3(R,E),M=W3(N.getBoundingClientRect()),T=K3([...C,...M]);f(T),v(!0)},[v]);return m.useEffect(()=>()=>b(),[b]),m.useEffect(()=>{if(h&&x){const j=_=>w(_,x),N=_=>w(_,h);return h.addEventListener("pointerleave",j),x.addEventListener("pointerleave",N),()=>{h.removeEventListener("pointerleave",j),x.removeEventListener("pointerleave",N)}}},[h,x,w,b]),m.useEffect(()=>{if(u){const j=N=>{const _=N.target,R={x:N.clientX,y:N.clientY},E=(h==null?void 0:h.contains(_))||(x==null?void 0:x.contains(_)),C=!X3(R,u);E?b():C&&(b(),p())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[h,x,u,p,b]),n.jsx(u_,{...e,ref:c})}),[q3,F3]=jf(c_,{isInside:!1}),u_=m.forwardRef((e,t)=>{const{__scopeTooltip:s,children:a,"aria-label":l,onEscapeKeyDown:c,onPointerDownOutside:u,...f}=e,h=Nf(Vl,s),p=cx(s),{onClose:x}=h;return m.useEffect(()=>(document.addEventListener(Cw,x),()=>document.removeEventListener(Cw,x)),[x]),m.useEffect(()=>{if(h.trigger){const v=b=>{const w=b.target;w!=null&&w.contains(h.trigger)&&x()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[h.trigger,x]),n.jsx(to,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:v=>v.preventDefault(),onDismiss:x,children:n.jsxs(uf,{"data-state":h.stateAttribute,...p,...f,ref:t,style:{...f.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(Cg,{children:a}),n.jsx(q3,{scope:s,isInside:!0,children:n.jsx(P3,{id:h.contentId,role:"tooltip",children:l||a})})]})})});B3.displayName=Vl;var d_="TooltipArrow",V3=m.forwardRef((e,t)=>{const{__scopeTooltip:s,...a}=e,l=cx(s);return F3(d_,s).isInside?null:n.jsx(df,{...l,...a,ref:t})});V3.displayName=d_;function Y3(e,t){const s=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),l=Math.abs(t.right-e.x),c=Math.abs(t.left-e.x);switch(Math.min(s,a,l,c)){case c:return"left";case l:return"right";case s:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function G3(e,t,s=5){const a=[];switch(t){case"top":a.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":a.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":a.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":a.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return a}function W3(e){const{top:t,right:s,bottom:a,left:l}=e;return[{x:l,y:t},{x:s,y:t},{x:s,y:a},{x:l,y:a}]}function X3(e,t){const{x:s,y:a}=e;let l=!1;for(let c=0,u=t.length-1;c<t.length;u=c++){const f=t[c].x,h=t[c].y,p=t[u].x,x=t[u].y;h>a!=x>a&&s<(p-f)*(a-h)/(x-h)+f&&(l=!l)}return l}function K3(e){const t=e.slice();return t.sort((s,a)=>s.x<a.x?-1:s.x>a.x?1:s.y<a.y?-1:s.y>a.y?1:0),Q3(t)}function Q3(e){if(e.length<=1)return e.slice();const t=[];for(let a=0;a<e.length;a++){const l=e[a];for(;t.length>=2;){const c=t[t.length-1],u=t[t.length-2];if((c.x-u.x)*(l.y-u.y)>=(c.y-u.y)*(l.x-u.x))t.pop();else break}t.push(l)}t.pop();const s=[];for(let a=e.length-1;a>=0;a--){const l=e[a];for(;s.length>=2;){const c=s[s.length-1],u=s[s.length-2];if((c.x-u.x)*(l.y-u.y)>=(c.y-u.y)*(l.x-u.x))s.pop();else break}s.push(l)}return s.pop(),t.length===1&&s.length===1&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}var Z3=o_;function J3({delayDuration:e=0,...t}){return n.jsx(Z3,{"data-slot":"tooltip-provider",delayDuration:e,...t})}const e5=()=>{const{user:e}=Eg(),t=async()=>{const{error:c}=await ne.auth.signOut();c&&console.error("Erreur de déconnexion:",c)},s=c=>c?c.substring(0,2).toUpperCase():"??",a=[{to:"/patients",label:"Patients",icon:U1},{to:"/doctors",label:"Médecins",icon:Kn},{to:"/test-types",label:"Types de Tests",icon:Hd},{to:"/categories",label:"Catégories",icon:mc},{to:"/ristournes",label:"Ristournes",icon:k1},{to:"/settings/print-header",label:"En-tête Impression",icon:Kr},{to:"/skip-range-management",label:"Parametres Validations",icon:t3},{to:"/ecb-models",label:"Modèles ECB",icon:mc},{to:"/atbs",label:"Gestion ATBs",icon:mc}],l=n.jsx("nav",{className:"flex flex-col gap-2 px-2 sm:px-4 py-4",children:a.map(c=>n.jsxs(Rj,{to:c.to,className:({isActive:u})=>`flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors ${u?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,children:[n.jsx(c.icon,{className:"h-5 w-5"}),n.jsx("span",{children:c.label})]},c.label))});return n.jsxs("div",{className:"flex h-screen w-full bg-muted/40",children:[n.jsxs("aside",{className:"hidden sm:flex flex-col w-64 border-r bg-background",children:[n.jsxs("div",{className:"flex items-center gap-2 h-16 border-b px-6",children:[n.jsx(Jg,{className:"h-6 w-6 text-primary"}),n.jsx("span",{className:"font-semibold tracking-tight",children:"LRMS"})]}),l]}),n.jsxs("div",{className:"flex flex-1 flex-col",children:[n.jsxs("header",{className:"sticky top-0 z-10 flex h-16 items-center justify-between border-b bg-background px-4 sm:px-6",children:[n.jsx("div",{className:"sm:hidden",children:n.jsxs(T3,{children:[n.jsx(M3,{asChild:!0,children:n.jsxs(ee,{variant:"outline",size:"icon",children:[n.jsx(GP,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Ouvrir le menu"})]})}),n.jsxs(D3,{side:"left",className:"w-64 p-0 pt-10",children:[" ",l]})]})}),n.jsx("div",{className:"flex-1"}),n.jsxs(m3,{children:[n.jsx(p3,{asChild:!0,children:n.jsx(ee,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:n.jsx(Oc,{className:"h-9 w-9",children:n.jsx(Pc,{children:s(e==null?void 0:e.email)})})})}),n.jsxs(g3,{className:"w-56",align:"end",forceMount:!0,children:[n.jsx(v3,{className:"font-normal",children:n.jsxs("div",{className:"flex flex-col space-y-1",children:[n.jsx("p",{className:"text-sm font-medium leading-none",children:"Connecté en tant que"}),n.jsx("p",{className:"text-xs leading-none text-muted-foreground truncate",children:(e==null?void 0:e.email)||"Utilisateur"})]})}),n.jsx(y3,{}),n.jsxs(x3,{onClick:t,className:"text-destructive focus:text-destructive focus:bg-destructive/10 cursor-pointer",children:[n.jsx(VP,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Se déconnecter"})]})]})]})]}),n.jsx(J3,{children:n.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-4 sm:p-6 bg-white",children:n.jsx(Nj,{})})})]})]})},t5=()=>{const{session:e,loading:t}=Eg(),s=ia();return t?n.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-200",children:[n.jsx(Lt,{className:"h-8 w-8 animate-spin text-primary"}),n.jsx("span",{className:"ml-2 text-muted-foreground",children:"Chargement de l'application..."})]}):e?n.jsx(Nj,{}):n.jsx(jj,{to:"/login",state:{from:s},replace:!0})};function We({className:e,type:t,...s}){return n.jsx("input",{type:t,"data-slot":"input",className:Me("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}var n5="Label",f_=m.forwardRef((e,t)=>n.jsx(Je.label,{...e,ref:t,onMouseDown:s=>{var l;s.target.closest("button, input, select, textarea")||((l=e.onMouseDown)==null||l.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));f_.displayName=n5;var r5=f_;function Ie({className:e,...t}){return n.jsx(r5,{"data-slot":"label",className:Me("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function Ce({className:e,...t}){return n.jsx("div",{"data-slot":"card",className:Me("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function Te({className:e,...t}){return n.jsx("div",{"data-slot":"card-header",className:Me("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function ft({className:e,...t}){return n.jsx("div",{"data-slot":"card-title",className:Me("leading-none font-semibold",e),...t})}function xr({className:e,...t}){return n.jsx("div",{"data-slot":"card-description",className:Me("text-muted-foreground text-sm",e),...t})}function Re({className:e,...t}){return n.jsx("div",{"data-slot":"card-content",className:Me("px-6",e),...t})}function cs({className:e,...t}){return n.jsx("div",{"data-slot":"card-footer",className:Me("flex items-center px-6 [.border-t]:pt-6",e),...t})}const s5=Ag("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function At({className:e,variant:t,...s}){return n.jsx("div",{"data-slot":"alert",role:"alert",className:Me(s5({variant:t}),e),...s})}function kt({className:e,...t}){return n.jsx("div",{"data-slot":"alert-title",className:Me("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function Dt({className:e,...t}){return n.jsx("div",{"data-slot":"alert-description",className:Me("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}const a5=()=>{const[e,t]=m.useState(""),[s,a]=m.useState(""),[l,c]=m.useState(!1),[u,f]=m.useState(null),{session:h,loading:p}=Eg(),x=async v=>{v.preventDefault(),c(!0),f(null);try{const{error:b}=await ne.auth.signInWithPassword({email:e,password:s});if(b)throw b}catch(b){console.error("Login error:",b),f(b instanceof Error&&b.message==="Invalid login credentials"?"Identifiants invalides. Veuillez vérifier votre email et mot de passe.":"Échec de la connexion. Une erreur est survenue.")}finally{c(!1)}};return p?n.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-200",children:[n.jsx(Lt,{className:"h-8 w-8 animate-spin text-primary"}),n.jsx("span",{className:"ml-2 text-muted-foreground",children:"Chargement..."})]}):h?n.jsx(jj,{to:"/patients",replace:!0}):n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-100 via-gray-50 to-blue-100 p-4",children:n.jsxs(Ce,{className:"w-full max-w-md shadow-xl border-t-4 border-primary rounded-lg overflow-hidden",children:[n.jsxs(Te,{className:"text-center p-6 bg-muted/30",children:[n.jsxs("div",{className:"mx-auto mb-4",children:[n.jsx(Jg,{className:"h-12 w-12 text-primary"})," "]}),n.jsx(ft,{className:"text-2xl font-bold tracking-tight",children:"Connexion LRMS "}),n.jsxs(xr,{className:"text-muted-foreground",children:["Accédez à votre espace laboratoire sécurisé."," "]})]}),n.jsxs("form",{onSubmit:x,children:[n.jsxs(Re,{className:"p-6 space-y-6",children:[" ",u&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsx(Dt,{children:u})]}),n.jsxs("div",{className:"space-y-2",children:[" ",n.jsx(Ie,{htmlFor:"email",className:"font-semibold",children:"Adresse e-mail"}),n.jsx(We,{id:"email",type:"email",placeholder:"votreadresse@email.com",required:!0,value:e,onChange:v=>t(v.target.value),disabled:l,className:"h-10"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ie,{htmlFor:"password",className:"font-semibold",children:"Mot de passe"}),n.jsx(We,{id:"password",type:"password",placeholder:"Votre mot de passe",required:!0,value:s,onChange:v=>a(v.target.value),disabled:l,className:"h-10"})]})]}),n.jsx(cs,{className:"p-6 bg-muted/30",children:n.jsx(ee,{type:"submit",className:"w-full h-11 text-base font-semibold",disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx(Lt,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion en cours..."]}):"Se connecter"})})]})]})})};function oa({className:e,...t}){return n.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:n.jsx("table",{"data-slot":"table",className:Me("w-full caption-bottom text-sm",e),...t})})}function ca({className:e,...t}){return n.jsx("thead",{"data-slot":"table-header",className:Me("[&_tr]:border-b",e),...t})}function ua({className:e,...t}){return n.jsx("tbody",{"data-slot":"table-body",className:Me("[&_tr:last-child]:border-0",e),...t})}function Wt({className:e,...t}){return n.jsx("tr",{"data-slot":"table-row",className:Me("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function gt({className:e,...t}){return n.jsx("th",{"data-slot":"table-head",className:Me("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Qe({className:e,...t}){return n.jsx("td",{"data-slot":"table-cell",className:Me("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function W({className:e,...t}){return n.jsx("div",{"data-slot":"skeleton",className:Me("bg-accent animate-pulse rounded-md",e),...t})}function Yc(e,t){const[s,a]=m.useState(e);return m.useEffect(()=>{const l=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(l)}},[e,t]),s}var h_="AlertDialog",[i5,mH]=ur(h_,[B1]),da=B1(),m_=e=>{const{__scopeAlertDialog:t,...s}=e,a=da(t);return n.jsx(sx,{...a,...s,modal:!0})};m_.displayName=h_;var l5="AlertDialogTrigger",p_=m.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...a}=e,l=da(s);return n.jsx(r_,{...l,...a,ref:t})});p_.displayName=l5;var o5="AlertDialogPortal",g_=e=>{const{__scopeAlertDialog:t,...s}=e,a=da(t);return n.jsx(ax,{...a,...s})};g_.displayName=o5;var c5="AlertDialogOverlay",x_=m.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...a}=e,l=da(s);return n.jsx(ix,{...l,...a,ref:t})});x_.displayName=c5;var Il="AlertDialogContent",[u5,d5]=i5(Il),v_=m.forwardRef((e,t)=>{const{__scopeAlertDialog:s,children:a,...l}=e,c=da(s),u=m.useRef(null),f=_t(t,u),h=m.useRef(null);return n.jsx(S3,{contentName:Il,titleName:y_,docsSlug:"alert-dialog",children:n.jsx(u5,{scope:s,cancelRef:h,children:n.jsxs(lx,{role:"alertdialog",...c,...l,ref:f,onOpenAutoFocus:De(l.onOpenAutoFocus,p=>{var x;p.preventDefault(),(x=h.current)==null||x.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[n.jsx(Cg,{children:a}),n.jsx(h5,{contentRef:u})]})})})});v_.displayName=Il;var y_="AlertDialogTitle",b_=m.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...a}=e,l=da(s);return n.jsx(s_,{...l,...a,ref:t})});b_.displayName=y_;var w_="AlertDialogDescription",j_=m.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...a}=e,l=da(s);return n.jsx(a_,{...l,...a,ref:t})});j_.displayName=w_;var f5="AlertDialogAction",N_=m.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...a}=e,l=da(s);return n.jsx(Vc,{...l,...a,ref:t})});N_.displayName=f5;var __="AlertDialogCancel",S_=m.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...a}=e,{cancelRef:l}=d5(__,s),c=da(s),u=_t(t,l);return n.jsx(Vc,{...c,...a,ref:u})});S_.displayName=__;var h5=({contentRef:e})=>{const t=`\`${Il}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Il}\` by passing a \`${w_}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Il}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var a;document.getElementById((a=e.current)==null?void 0:a.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},m5=m_,p5=p_,g5=g_,x5=x_,v5=v_,y5=N_,b5=S_,w5=b_,j5=j_;function _c({...e}){return n.jsx(m5,{"data-slot":"alert-dialog",...e})}function _f({...e}){return n.jsx(p5,{"data-slot":"alert-dialog-trigger",...e})}function N5({...e}){return n.jsx(g5,{"data-slot":"alert-dialog-portal",...e})}function _5({className:e,...t}){return n.jsx(x5,{"data-slot":"alert-dialog-overlay",className:Me("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Sf({className:e,...t}){return n.jsxs(N5,{children:[n.jsx(_5,{}),n.jsx(v5,{"data-slot":"alert-dialog-content",className:Me("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function Ef({className:e,...t}){return n.jsx("div",{"data-slot":"alert-dialog-header",className:Me("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Cf({className:e,...t}){return n.jsx("div",{"data-slot":"alert-dialog-footer",className:Me("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Rf({className:e,...t}){return n.jsx(w5,{"data-slot":"alert-dialog-title",className:Me("text-lg font-semibold",e),...t})}function Tf({className:e,...t}){return n.jsx(j5,{"data-slot":"alert-dialog-description",className:Me("text-muted-foreground text-sm",e),...t})}function ux({className:e,...t}){return n.jsx(y5,{className:Me(Hl(),e),...t})}function Mf({className:e,...t}){return n.jsx(b5,{className:Me(Hl({variant:"outline"}),e),...t})}const hp=10,Rw=()=>{const[e,t]=m.useState([]),[s,a]=m.useState(!0),[l,c]=m.useState(null),[u,f]=m.useState(""),[h,p]=m.useState(1),[x,v]=m.useState(0),[b,w]=m.useState(null),[j,N]=m.useState(!1),[_,R]=m.useState([]),[E,C]=m.useState(""),M=Yc(u,300),T=Math.ceil(x/hp);m.useEffect(()=>{(async()=>{const{data:ce,error:re}=await ne.from("doctor").select("id, full_name").order("full_name",{ascending:!0});re||R(ce||[])})()},[]);const z=m.useCallback(async()=>{a(!0),c(null);try{const G=(h-1)*hp,ce=G+hp-1;let re=ne.from("patient").select("*",{count:"exact"});if(M){const P=`%${M}%`;re=re.or(`full_name.ilike.${P},patient_unique_id.ilike.${P}`)}if(E){const{data:P,error:X}=await ne.from("patient_result").select("patient_id").eq("doctor_id",E);if(X)throw console.error("Supabase error while fetching patient_result:",X),X;const V=(P||[]).map(te=>te.patient_id);if(V.length===0){t([]),v(0),a(!1);return}re=re.in("id",V)}re=re.order("created_at",{ascending:!1}).range(G,ce);const{data:O,error:ie,count:ue}=await re;if(ie)throw console.error("Supabase error while fetching patients:",ie),ie;t(O||[]),v(ue??0)}catch(G){console.error("Erreur lors de la récupération des patients:",G),c(G instanceof Error?G.message:"Une erreur est survenue lors du chargement des patients."),t([]),v(0)}finally{a(!1)}},[h,M,E]);m.useEffect(()=>{z()},[z]),m.useEffect(()=>{p(1)},[M,E]);const q=()=>{p(G=>Math.max(G-1,1))},F=()=>{p(G=>Math.min(G+1,T))},U=async()=>{if(b){N(!0),c(null);try{const{error:G}=await ne.from("patient").delete().eq("id",b.id);if(G)throw G;t(ce=>ce.filter(re=>re.id!==b.id)),v(ce=>ce-1),w(null)}catch(G){c((G instanceof Error?G.message:"")||"Erreur lors de la suppression du patient.")}finally{N(!1)}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[n.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(U1,{className:"h-6 w-6"}),"Gestion des Patients"]}),n.jsx(et,{to:"/patients/new",children:n.jsxs(ee,{children:[n.jsx(Ka,{className:"mr-2 h-4 w-4"}),"Ajouter un Patient"]})})]}),n.jsxs("div",{className:"relative",children:[n.jsx(qc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(We,{type:"search",placeholder:"Rechercher par nom ou ID unique...",value:u,onChange:G=>f(G.target.value),className:"pl-10 w-full md:w-1/3"})]}),n.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[n.jsx(Ie,{htmlFor:"doctor-filter",children:"Filtrer par médecin :"}),n.jsxs("select",{id:"doctor-filter",value:E,onChange:G=>C(G.target.value),className:"border rounded px-2 py-1 text-sm",children:[n.jsx("option",{value:"",children:"Tous les médecins"}),_.map(G=>n.jsx("option",{value:G.id,children:G.full_name},G.id))]})]}),s&&n.jsxs("div",{className:"space-y-2 pt-4",children:[n.jsx(W,{className:"h-12 w-full"}),n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"})]}),!s&&l&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur de Chargement"}),n.jsx(Dt,{children:l})]}),!s&&!l&&n.jsxs("div",{className:"space-y-4",children:[" ",n.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:n.jsxs(oa,{children:[n.jsx(ca,{children:n.jsxs(Wt,{children:[n.jsx(gt,{className:"w-[150px]",children:"ID Unique"}),n.jsx(gt,{children:"Nom Complet"}),n.jsx(gt,{children:"Date de Naissance"}),n.jsx(gt,{className:"hidden md:table-cell",children:"Genre"}),n.jsx(gt,{className:"hidden lg:table-cell",children:"Téléphone"}),n.jsx(gt,{className:"text-right",children:"Actions"})]})}),n.jsx(ua,{children:e.length>0?e.map(G=>n.jsxs(Wt,{children:[n.jsx(Qe,{className:"font-medium",children:G.patient_unique_id}),n.jsx(Qe,{children:G.full_name}),n.jsx(Qe,{children:G.date_of_birth?new Date(G.date_of_birth).toLocaleDateString("fr-FR"):"N/A"}),n.jsx(Qe,{className:"hidden md:table-cell",children:G.gender||"N/A"}),n.jsx(Qe,{className:"hidden lg:table-cell",children:G.phone||"N/A"}),n.jsxs(Qe,{className:"text-right",children:[n.jsx(et,{to:`/patients/${G.id}`,children:n.jsx(ee,{variant:"outline",size:"sm",children:"Voir Détails"})}),n.jsxs(_c,{children:[n.jsx(_f,{asChild:!0,children:n.jsxs(ee,{variant:"destructive",size:"sm",className:"ml-2",title:"Supprimer le patient",onClick:()=>w(G),disabled:s,children:[n.jsx(Fc,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Supprimer"})]})}),n.jsxs(Sf,{children:[n.jsxs(Ef,{children:[n.jsx(Rf,{children:"Supprimer ce patient ?"}),n.jsx(Tf,{children:"Cette action est irréversible. Voulez-vous vraiment supprimer ce patient ?"})]}),n.jsxs(Cf,{children:[n.jsx(Mf,{onClick:()=>w(null),disabled:j,children:"Annuler"}),n.jsx(ux,{onClick:U,disabled:j,className:"bg-destructive text-destructive-foreground",children:"Supprimer"})]})]})]})]})]},G.id)):n.jsx(Wt,{children:n.jsx(Qe,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:u?"Aucun patient ne correspond à votre recherche.":n.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[n.jsx(vf,{className:"h-8 w-8 text-muted-foreground/50"}),"Aucun patient trouvé. Commencez par en ajouter un."]})})})})]})}),T>1&&n.jsxs("div",{className:"flex items-center justify-between space-x-2 pt-2",children:[n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",h," sur ",T," (",x," ",x===1?"résultat":"résultats",")"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(ee,{variant:"outline",size:"sm",onClick:q,disabled:h<=1,children:[n.jsx(P1,{className:"h-4 w-4 mr-1 sm:mr-2"})," ",n.jsx("span",{className:"hidden sm:inline",children:"Précédent"})," "]}),n.jsxs(ee,{variant:"outline",size:"sm",onClick:F,disabled:h>=T,children:[n.jsx("span",{className:"hidden sm:inline",children:"Suivant"})," ",n.jsx(L1,{className:"h-4 w-4 ml-1 sm:ml-2"})," "]})]})]})]})]})};function Ai({...e}){return n.jsx(sx,{"data-slot":"dialog",...e})}function S5({...e}){return n.jsx(ax,{"data-slot":"dialog-portal",...e})}function E_({...e}){return n.jsx(Vc,{"data-slot":"dialog-close",...e})}function E5({className:e,...t}){return n.jsx(ix,{"data-slot":"dialog-overlay",className:Me("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function ki({className:e,children:t,...s}){return n.jsxs(S5,{"data-slot":"dialog-portal",children:[n.jsx(E5,{}),n.jsxs(lx,{"data-slot":"dialog-content",className:Me("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...s,children:[t,n.jsxs(Vc,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[n.jsx(wf,{}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Di({className:e,...t}){return n.jsx("div",{"data-slot":"dialog-header",className:Me("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Yl({className:e,...t}){return n.jsx("div",{"data-slot":"dialog-footer",className:Me("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Oi({className:e,...t}){return n.jsx(s_,{"data-slot":"dialog-title",className:Me("text-lg leading-none font-semibold",e),...t})}function C_({className:e,...t}){return n.jsx(a_,{"data-slot":"dialog-description",className:Me("text-muted-foreground text-sm",e),...t})}const C5=Ag("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Zr({className:e,variant:t,asChild:s=!1,...a}){const l=s?Ts:"span";return n.jsx(l,{"data-slot":"badge",className:Me(C5({variant:t}),e),...a})}function zt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function kr(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function lr(e,t){const s=zt(e);return isNaN(t)?kr(e,NaN):(t&&s.setDate(s.getDate()+t),s)}function us(e,t){const s=zt(e);if(isNaN(t))return kr(e,NaN);if(!t)return s;const a=s.getDate(),l=kr(e,s.getTime());l.setMonth(s.getMonth()+t+1,0);const c=l.getDate();return a>=c?l:(s.setFullYear(l.getFullYear(),l.getMonth(),a),s)}const dx=6048e5,R5=864e5,R_=6e4,T_=36e5;let T5={};function Gc(){return T5}function As(e,t){var f,h,p,x;const s=Gc(),a=(t==null?void 0:t.weekStartsOn)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??s.weekStartsOn??((x=(p=s.locale)==null?void 0:p.options)==null?void 0:x.weekStartsOn)??0,l=zt(e),c=l.getDay(),u=(c<a?7:0)+c-a;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function Pi(e){return As(e,{weekStartsOn:1})}function M_(e){const t=zt(e),s=t.getFullYear(),a=kr(e,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const l=Pi(a),c=kr(e,0);c.setFullYear(s,0,4),c.setHours(0,0,0,0);const u=Pi(c);return t.getTime()>=l.getTime()?s+1:t.getTime()>=u.getTime()?s:s-1}function Gl(e){const t=zt(e);return t.setHours(0,0,0,0),t}function Fd(e){const t=zt(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function Es(e,t){const s=Gl(e),a=Gl(t),l=+s-Fd(s),c=+a-Fd(a);return Math.round((l-c)/R5)}function M5(e){const t=M_(e),s=kr(e,0);return s.setFullYear(t,0,4),s.setHours(0,0,0,0),Pi(s)}function eg(e,t){const s=t*7;return lr(e,s)}function A5(e,t){return us(e,t*12)}function k5(e){let t;return e.forEach(function(s){const a=zt(s);(t===void 0||t<a||isNaN(Number(a)))&&(t=a)}),t||new Date(NaN)}function D5(e){let t;return e.forEach(s=>{const a=zt(s);(!t||t>a||isNaN(+a))&&(t=a)}),t||new Date(NaN)}function vr(e,t){const s=Gl(e),a=Gl(t);return+s==+a}function fx(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function O5(e){if(!fx(e)&&typeof e!="number")return!1;const t=zt(e);return!isNaN(Number(t))}function Sc(e,t){const s=zt(e),a=zt(t),l=s.getFullYear()-a.getFullYear(),c=s.getMonth()-a.getMonth();return l*12+c}function P5(e,t,s){const a=As(e,s),l=As(t,s),c=+a-Fd(a),u=+l-Fd(l);return Math.round((c-u)/dx)}function hx(e){const t=zt(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function yr(e){const t=zt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function A_(e){const t=zt(e),s=kr(e,0);return s.setFullYear(t.getFullYear(),0,1),s.setHours(0,0,0,0),s}function mx(e,t){var f,h,p,x;const s=Gc(),a=(t==null?void 0:t.weekStartsOn)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??s.weekStartsOn??((x=(p=s.locale)==null?void 0:p.options)==null?void 0:x.weekStartsOn)??0,l=zt(e),c=l.getDay(),u=(c<a?-7:0)+6-(c-a);return l.setDate(l.getDate()+u),l.setHours(23,59,59,999),l}function k_(e){return mx(e,{weekStartsOn:1})}const L5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},I5=(e,t,s)=>{let a;const l=L5[e];return typeof l=="string"?a=l:t===1?a=l.one:a=l.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function zl(e){return(t={})=>{const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const z5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},U5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},B5={date:zl({formats:z5,defaultWidth:"full"}),time:zl({formats:U5,defaultWidth:"full"}),dateTime:zl({formats:$5,defaultWidth:"full"})},H5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},q5=(e,t,s,a)=>H5[e];function Ns(e){return(t,s)=>{const a=s!=null&&s.context?String(s.context):"standalone";let l;if(a==="formatting"&&e.formattingValues){const u=e.defaultFormattingWidth||e.defaultWidth,f=s!=null&&s.width?String(s.width):u;l=e.formattingValues[f]||e.formattingValues[u]}else{const u=e.defaultWidth,f=s!=null&&s.width?String(s.width):e.defaultWidth;l=e.values[f]||e.values[u]}const c=e.argumentCallback?e.argumentCallback(t):t;return l[c]}}const F5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},V5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Y5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},G5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},W5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},X5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},K5=(e,t)=>{const s=Number(e),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},Q5={ordinalNumber:K5,era:Ns({values:F5,defaultWidth:"wide"}),quarter:Ns({values:V5,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ns({values:Y5,defaultWidth:"wide"}),day:Ns({values:G5,defaultWidth:"wide"}),dayPeriod:Ns({values:W5,defaultWidth:"wide",formattingValues:X5,defaultFormattingWidth:"wide"})};function _s(e){return(t,s={})=>{const a=s.width,l=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],c=t.match(l);if(!c)return null;const u=c[0],f=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(f)?J5(f,v=>v.test(u)):Z5(f,v=>v.test(u));let p;p=e.valueCallback?e.valueCallback(h):h,p=s.valueCallback?s.valueCallback(p):p;const x=t.slice(u.length);return{value:p,rest:x}}}function Z5(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s}function J5(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s}function D_(e){return(t,s={})=>{const a=t.match(e.matchPattern);if(!a)return null;const l=a[0],c=t.match(e.parsePattern);if(!c)return null;let u=e.valueCallback?e.valueCallback(c[0]):c[0];u=s.valueCallback?s.valueCallback(u):u;const f=t.slice(l.length);return{value:u,rest:f}}}const eL=/^(\d+)(th|st|nd|rd)?/i,tL=/\d+/i,nL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rL={any:[/^b/i,/^(a|c)/i]},sL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aL={any:[/1/i,/2/i,/3/i,/4/i]},iL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},lL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},cL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},uL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},dL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fL={ordinalNumber:D_({matchPattern:eL,parsePattern:tL,valueCallback:e=>parseInt(e,10)}),era:_s({matchPatterns:nL,defaultMatchWidth:"wide",parsePatterns:rL,defaultParseWidth:"any"}),quarter:_s({matchPatterns:sL,defaultMatchWidth:"wide",parsePatterns:aL,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_s({matchPatterns:iL,defaultMatchWidth:"wide",parsePatterns:lL,defaultParseWidth:"any"}),day:_s({matchPatterns:oL,defaultMatchWidth:"wide",parsePatterns:cL,defaultParseWidth:"any"}),dayPeriod:_s({matchPatterns:uL,defaultMatchWidth:"any",parsePatterns:dL,defaultParseWidth:"any"})},O_={code:"en-US",formatDistance:I5,formatLong:B5,formatRelative:q5,localize:Q5,match:fL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hL(e){const t=zt(e);return Es(t,A_(t))+1}function P_(e){const t=zt(e),s=+Pi(t)-+M5(t);return Math.round(s/dx)+1}function L_(e,t){var x,v,b,w;const s=zt(e),a=s.getFullYear(),l=Gc(),c=(t==null?void 0:t.firstWeekContainsDate)??((v=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:v.firstWeekContainsDate)??l.firstWeekContainsDate??((w=(b=l.locale)==null?void 0:b.options)==null?void 0:w.firstWeekContainsDate)??1,u=kr(e,0);u.setFullYear(a+1,0,c),u.setHours(0,0,0,0);const f=As(u,t),h=kr(e,0);h.setFullYear(a,0,c),h.setHours(0,0,0,0);const p=As(h,t);return s.getTime()>=f.getTime()?a+1:s.getTime()>=p.getTime()?a:a-1}function mL(e,t){var f,h,p,x;const s=Gc(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((x=(p=s.locale)==null?void 0:p.options)==null?void 0:x.firstWeekContainsDate)??1,l=L_(e,t),c=kr(e,0);return c.setFullYear(l,0,a),c.setHours(0,0,0,0),As(c,t)}function I_(e,t){const s=zt(e),a=+As(s,t)-+mL(s,t);return Math.round(a/dx)+1}function Gt(e,t){const s=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return s+a}const za={y(e,t){const s=e.getFullYear(),a=s>0?s:1-s;return Gt(t==="yy"?a%100:a,t.length)},M(e,t){const s=e.getMonth();return t==="M"?String(s+1):Gt(s+1,2)},d(e,t){return Gt(e.getDate(),t.length)},a(e,t){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(e,t){return Gt(e.getHours()%12||12,t.length)},H(e,t){return Gt(e.getHours(),t.length)},m(e,t){return Gt(e.getMinutes(),t.length)},s(e,t){return Gt(e.getSeconds(),t.length)},S(e,t){const s=t.length,a=e.getMilliseconds(),l=Math.trunc(a*Math.pow(10,s-3));return Gt(l,t.length)}},Ml={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Tw={G:function(e,t,s){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(e,t,s){if(t==="yo"){const a=e.getFullYear(),l=a>0?a:1-a;return s.ordinalNumber(l,{unit:"year"})}return za.y(e,t)},Y:function(e,t,s,a){const l=L_(e,a),c=l>0?l:1-l;if(t==="YY"){const u=c%100;return Gt(u,2)}return t==="Yo"?s.ordinalNumber(c,{unit:"year"}):Gt(c,t.length)},R:function(e,t){const s=M_(e);return Gt(s,t.length)},u:function(e,t){const s=e.getFullYear();return Gt(s,t.length)},Q:function(e,t,s){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return Gt(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,s){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return Gt(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,s){const a=e.getMonth();switch(t){case"M":case"MM":return za.M(e,t);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,s){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return Gt(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,s,a){const l=I_(e,a);return t==="wo"?s.ordinalNumber(l,{unit:"week"}):Gt(l,t.length)},I:function(e,t,s){const a=P_(e);return t==="Io"?s.ordinalNumber(a,{unit:"week"}):Gt(a,t.length)},d:function(e,t,s){return t==="do"?s.ordinalNumber(e.getDate(),{unit:"date"}):za.d(e,t)},D:function(e,t,s){const a=hL(e);return t==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):Gt(a,t.length)},E:function(e,t,s){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,s,a){const l=e.getDay(),c=(l-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(c);case"ee":return Gt(c,2);case"eo":return s.ordinalNumber(c,{unit:"day"});case"eee":return s.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(l,{width:"short",context:"formatting"});case"eeee":default:return s.day(l,{width:"wide",context:"formatting"})}},c:function(e,t,s,a){const l=e.getDay(),c=(l-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(c);case"cc":return Gt(c,t.length);case"co":return s.ordinalNumber(c,{unit:"day"});case"ccc":return s.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(l,{width:"narrow",context:"standalone"});case"cccccc":return s.day(l,{width:"short",context:"standalone"});case"cccc":default:return s.day(l,{width:"wide",context:"standalone"})}},i:function(e,t,s){const a=e.getDay(),l=a===0?7:a;switch(t){case"i":return String(l);case"ii":return Gt(l,t.length);case"io":return s.ordinalNumber(l,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,s){const l=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,t,s){const a=e.getHours();let l;switch(a===12?l=Ml.noon:a===0?l=Ml.midnight:l=a/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,t,s){const a=e.getHours();let l;switch(a>=17?l=Ml.evening:a>=12?l=Ml.afternoon:a>=4?l=Ml.morning:l=Ml.night,t){case"B":case"BB":case"BBB":return s.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,t,s){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return za.h(e,t)},H:function(e,t,s){return t==="Ho"?s.ordinalNumber(e.getHours(),{unit:"hour"}):za.H(e,t)},K:function(e,t,s){const a=e.getHours()%12;return t==="Ko"?s.ordinalNumber(a,{unit:"hour"}):Gt(a,t.length)},k:function(e,t,s){let a=e.getHours();return a===0&&(a=24),t==="ko"?s.ordinalNumber(a,{unit:"hour"}):Gt(a,t.length)},m:function(e,t,s){return t==="mo"?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):za.m(e,t)},s:function(e,t,s){return t==="so"?s.ordinalNumber(e.getSeconds(),{unit:"second"}):za.s(e,t)},S:function(e,t){return za.S(e,t)},X:function(e,t,s){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return Aw(a);case"XXXX":case"XX":return Ci(a);case"XXXXX":case"XXX":default:return Ci(a,":")}},x:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"x":return Aw(a);case"xxxx":case"xx":return Ci(a);case"xxxxx":case"xxx":default:return Ci(a,":")}},O:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Mw(a,":");case"OOOO":default:return"GMT"+Ci(a,":")}},z:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Mw(a,":");case"zzzz":default:return"GMT"+Ci(a,":")}},t:function(e,t,s){const a=Math.trunc(e.getTime()/1e3);return Gt(a,t.length)},T:function(e,t,s){const a=e.getTime();return Gt(a,t.length)}};function Mw(e,t=""){const s=e>0?"-":"+",a=Math.abs(e),l=Math.trunc(a/60),c=a%60;return c===0?s+String(l):s+String(l)+t+Gt(c,2)}function Aw(e,t){return e%60===0?(e>0?"-":"+")+Gt(Math.abs(e)/60,2):Ci(e,t)}function Ci(e,t=""){const s=e>0?"-":"+",a=Math.abs(e),l=Gt(Math.trunc(a/60),2),c=Gt(a%60,2);return s+l+t+c}const kw=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},z_=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},pL=(e,t)=>{const s=e.match(/(P+)(p+)?/)||[],a=s[1],l=s[2];if(!l)return kw(e,t);let c;switch(a){case"P":c=t.dateTime({width:"short"});break;case"PP":c=t.dateTime({width:"medium"});break;case"PPP":c=t.dateTime({width:"long"});break;case"PPPP":default:c=t.dateTime({width:"full"});break}return c.replace("{{date}}",kw(a,t)).replace("{{time}}",z_(l,t))},gL={p:z_,P:pL},xL=/^D+$/,vL=/^Y+$/,yL=["D","DD","YY","YYYY"];function bL(e){return xL.test(e)}function wL(e){return vL.test(e)}function jL(e,t,s){const a=NL(e,t,s);if(console.warn(a),yL.includes(e))throw new RangeError(a)}function NL(e,t,s){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _L=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,SL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EL=/^'([^]*?)'?$/,CL=/''/g,RL=/[a-zA-Z]/;function at(e,t,s){var x,v,b,w,j,N,_,R;const a=Gc(),l=(s==null?void 0:s.locale)??a.locale??O_,c=(s==null?void 0:s.firstWeekContainsDate)??((v=(x=s==null?void 0:s.locale)==null?void 0:x.options)==null?void 0:v.firstWeekContainsDate)??a.firstWeekContainsDate??((w=(b=a.locale)==null?void 0:b.options)==null?void 0:w.firstWeekContainsDate)??1,u=(s==null?void 0:s.weekStartsOn)??((N=(j=s==null?void 0:s.locale)==null?void 0:j.options)==null?void 0:N.weekStartsOn)??a.weekStartsOn??((R=(_=a.locale)==null?void 0:_.options)==null?void 0:R.weekStartsOn)??0,f=zt(e);if(!O5(f))throw new RangeError("Invalid time value");let h=t.match(SL).map(E=>{const C=E[0];if(C==="p"||C==="P"){const M=gL[C];return M(E,l.formatLong)}return E}).join("").match(_L).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const C=E[0];if(C==="'")return{isToken:!1,value:TL(E)};if(Tw[C])return{isToken:!0,value:E};if(C.match(RL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:E}});l.localize.preprocessor&&(h=l.localize.preprocessor(f,h));const p={firstWeekContainsDate:c,weekStartsOn:u,locale:l};return h.map(E=>{if(!E.isToken)return E.value;const C=E.value;(!(s!=null&&s.useAdditionalWeekYearTokens)&&wL(C)||!(s!=null&&s.useAdditionalDayOfYearTokens)&&bL(C))&&jL(C,t,String(e));const M=Tw[C[0]];return M(f,C,l.localize,p)}).join("")}function TL(e){const t=e.match(EL);return t?t[1].replace(CL,"'"):e}function ML(e){const t=zt(e),s=t.getFullYear(),a=t.getMonth(),l=kr(e,0);return l.setFullYear(s,a+1,0),l.setHours(0,0,0,0),l.getDate()}function AL(e){return Math.trunc(+zt(e)/1e3)}function kL(e){const t=zt(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(0,0,0,0),t}function DL(e,t){return P5(kL(e),yr(e),t)+1}function tg(e,t){const s=zt(e),a=zt(t);return s.getTime()>a.getTime()}function U_(e,t){const s=zt(e),a=zt(t);return+s<+a}function px(e,t){const s=zt(e),a=zt(t);return s.getFullYear()===a.getFullYear()&&s.getMonth()===a.getMonth()}function OL(e,t){const s=zt(e),a=zt(t);return s.getFullYear()===a.getFullYear()}function mp(e,t){return lr(e,-t)}function Ft(e,t){const a=zL(e);let l;if(a.date){const h=UL(a.date,2);l=$L(h.restDateString,h.year)}if(!l||isNaN(l.getTime()))return new Date(NaN);const c=l.getTime();let u=0,f;if(a.time&&(u=BL(a.time),isNaN(u)))return new Date(NaN);if(a.timezone){if(f=HL(a.timezone),isNaN(f))return new Date(NaN)}else{const h=new Date(c+u),p=new Date(0);return p.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),p.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),p}return new Date(c+u+f)}const jd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},PL=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,LL=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,IL=/^([+-])(\d{2})(?::?(\d{2}))?$/;function zL(e){const t={},s=e.split(jd.dateTimeDelimiter);let a;if(s.length>2)return t;if(/:/.test(s[0])?a=s[0]:(t.date=s[0],a=s[1],jd.timeZoneDelimiter.test(t.date)&&(t.date=e.split(jd.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){const l=jd.timezone.exec(a);l?(t.time=a.replace(l[1],""),t.timezone=l[1]):t.time=a}return t}function UL(e,t){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(s);if(!a)return{year:NaN,restDateString:""};const l=a[1]?parseInt(a[1]):null,c=a[2]?parseInt(a[2]):null;return{year:c===null?l:c*100,restDateString:e.slice((a[1]||a[2]).length)}}function $L(e,t){if(t===null)return new Date(NaN);const s=e.match(PL);if(!s)return new Date(NaN);const a=!!s[4],l=lc(s[1]),c=lc(s[2])-1,u=lc(s[3]),f=lc(s[4]),h=lc(s[5])-1;if(a)return GL(t,f,h)?qL(t,f,h):new Date(NaN);{const p=new Date(0);return!VL(t,c,u)||!YL(t,l)?new Date(NaN):(p.setUTCFullYear(t,c,Math.max(l,u)),p)}}function lc(e){return e?parseInt(e):1}function BL(e){const t=e.match(LL);if(!t)return NaN;const s=pp(t[1]),a=pp(t[2]),l=pp(t[3]);return WL(s,a,l)?s*T_+a*R_+l*1e3:NaN}function pp(e){return e&&parseFloat(e.replace(",","."))||0}function HL(e){if(e==="Z")return 0;const t=e.match(IL);if(!t)return 0;const s=t[1]==="+"?-1:1,a=parseInt(t[2]),l=t[3]&&parseInt(t[3])||0;return XL(a,l)?s*(a*T_+l*R_):NaN}function qL(e,t,s){const a=new Date(0);a.setUTCFullYear(e,0,4);const l=a.getUTCDay()||7,c=(t-1)*7+s+1-l;return a.setUTCDate(a.getUTCDate()+c),a}const FL=[31,null,31,30,31,30,31,31,30,31,30,31];function $_(e){return e%400===0||e%4===0&&e%100!==0}function VL(e,t,s){return t>=0&&t<=11&&s>=1&&s<=(FL[t]||($_(e)?29:28))}function YL(e,t){return t>=1&&t<=($_(e)?366:365)}function GL(e,t,s){return t>=1&&t<=53&&s>=0&&s<=6}function WL(e,t,s){return e===24?t===0&&s===0:s>=0&&s<60&&t>=0&&t<60&&e>=0&&e<25}function XL(e,t){return t>=0&&t<=59}function gp(e,t){const s=zt(e),a=s.getFullYear(),l=s.getDate(),c=kr(e,0);c.setFullYear(a,t,15),c.setHours(0,0,0,0);const u=ML(c);return s.setMonth(t,Math.min(l,u)),s}function Dw(e,t){const s=zt(e);return isNaN(+s)?kr(e,NaN):(s.setFullYear(t),s)}const KL={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},QL=(e,t,s)=>{let a;const l=KL[e];return typeof l=="string"?a=l:t===1?a=l.one:a=l.other.replace("{{count}}",String(t)),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"dans "+a:"il y a "+a:a},ZL={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},JL={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},e6={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},t6={date:zl({formats:ZL,defaultWidth:"full"}),time:zl({formats:JL,defaultWidth:"full"}),dateTime:zl({formats:e6,defaultWidth:"full"})},n6={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},r6=(e,t,s,a)=>n6[e],s6={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},a6={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},i6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},l6={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},o6={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},c6=(e,t)=>{const s=Number(e),a=t==null?void 0:t.unit;if(s===0)return"0";const l=["year","week","hour","minute","second"];let c;return s===1?c=a&&l.includes(a)?"ère":"er":c="ème",s+c},u6=["MMM","MMMM"],d6={preprocessor:(e,t)=>e.getDate()===1||!t.some(a=>a.isToken&&u6.includes(a.value))?t:t.map(a=>a.isToken&&a.value==="do"?{isToken:!0,value:"d"}:a),ordinalNumber:c6,era:Ns({values:s6,defaultWidth:"wide"}),quarter:Ns({values:a6,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ns({values:i6,defaultWidth:"wide"}),day:Ns({values:l6,defaultWidth:"wide"}),dayPeriod:Ns({values:o6,defaultWidth:"wide"})},f6=/^(\d+)(ième|ère|ème|er|e)?/i,h6=/\d+/i,m6={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},p6={any:[/^av/i,/^ap/i]},g6={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},x6={any:[/1/i,/2/i,/3/i,/4/i]},v6={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},y6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},b6={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},w6={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},j6={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},N6={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},_6={ordinalNumber:D_({matchPattern:f6,parsePattern:h6,valueCallback:e=>parseInt(e)}),era:_s({matchPatterns:m6,defaultMatchWidth:"wide",parsePatterns:p6,defaultParseWidth:"any"}),quarter:_s({matchPatterns:g6,defaultMatchWidth:"wide",parsePatterns:x6,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_s({matchPatterns:v6,defaultMatchWidth:"wide",parsePatterns:y6,defaultParseWidth:"any"}),day:_s({matchPatterns:b6,defaultMatchWidth:"wide",parsePatterns:w6,defaultParseWidth:"any"}),dayPeriod:_s({matchPatterns:j6,defaultMatchWidth:"any",parsePatterns:N6,defaultParseWidth:"any"})},qt={code:"fr",formatDistance:QL,formatLong:t6,formatRelative:r6,localize:d6,match:_6,options:{weekStartsOn:1,firstWeekContainsDate:4}},S6=e=>{switch(e==null?void 0:e.toLowerCase()){case"completed":return"default";case"in progress":return"secondary";case"pending":return"outline";default:return"secondary"}},E6=()=>{const{patientId:e}=cr(),t=rr(),[s,a]=m.useState(null),[l,c]=m.useState([]),[u,f]=m.useState(!0),[h,p]=m.useState(!0),[x,v]=m.useState(null),[b,w]=m.useState(!1),[j,N]=m.useState(null),[_,R]=m.useState(null),[E,C]=m.useState(!1),M=m.useCallback(async()=>{if(e){f(!0);try{const{data:U,error:G}=await ne.from("patient").select("*").eq("id",e).single();if(G)throw G;if(!U)throw new Error("Patient non trouvé.");a(U)}catch(U){console.error("Erreur chargement détails patient:",U),v(G=>G||(U instanceof Error?U.message:"Erreur inconnue")||"Impossible de charger les détails du patient.")}finally{f(!1)}}},[e]),T=m.useCallback(async()=>{if(e){p(!0);try{const{data:U,error:G}=await ne.from("patient_result").select(`
          id,
          result_date,
          status,
          doctor:doctor_id ( full_name )
        `).eq("patient_id",e).order("result_date",{ascending:!1});if(G)throw G;c(U||[])}catch(U){console.error("Erreur chargement résultats patient:",U),v(G=>G||(U instanceof Error?U.message:"Erreur inconnue")||"Impossible de charger les résultats du patient.")}finally{p(!1)}}},[e]),z=m.useCallback(async()=>{if(C(!0),R(null),!!j)try{const{error:U}=await ne.from("patient_result").delete().eq("id",j);if(U)throw U;T(),w(!1),N(null)}catch(U){console.error("Error deleting result:",U),R(`Impossible de supprimer le résultat. 
 ${U.message}`)}finally{C(!1)}},[j,T]);m.useEffect(()=>{v(null),(async()=>{a(null),c([]),f(!0),p(!0),await Promise.all([M(),T()])})()},[M,T]);const q=u||h,F=(U,G,ce)=>{const re=U;return n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(re,{className:"h-5 w-5 text-muted-foreground mt-1 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:G}),n.jsx("p",{className:"text-base",children:ce||n.jsx("span",{className:"text-muted-foreground italic",children:"Non spécifié"})})]})]})};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[n.jsx("div",{children:n.jsx(et,{to:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour à la liste"]})})}),!q&&s&&!x&&n.jsx(et,{to:`/patients/${e}/edit`,children:n.jsxs(ee,{variant:"secondary",children:[n.jsx(Qr,{className:"mr-2 h-4 w-4"}),"Modifier le Patient"]})})]}),u&&n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-6 w-3/5"}),n.jsx(W,{className:"h-4 w-4/5"})]}),n.jsxs(Re,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"})]})]}),x&&!q&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsxs(Dt,{children:[x," ",n.jsx(ee,{variant:"link",onClick:()=>{M(),T()},className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),!u&&s&&!x&&n.jsxs(Ce,{className:"overflow-hidden",children:[n.jsxs(Te,{className:"bg-muted/30",children:[n.jsxs(ft,{className:"text-xl font-semibold flex items-center gap-2",children:[n.jsx(Ht,{className:"h-5 w-5"}),"Informations du Patient"]}),n.jsx(xr,{children:"Détails démographiques."})]}),n.jsxs(Re,{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[F(Ht,"Nom Complet",s.full_name),F(Ye,"ID Unique",s.patient_unique_id),F(ln,"Date de Naissance",s.date_of_birth?at(Ft(s.date_of_birth),"PPP",{locale:qt}):null),F(Ye,"Genre",s.gender),F(mn,"Téléphone",s.phone)]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold tracking-tight flex items-center gap-2",children:[n.jsx(la,{className:"h-6 w-6"}),"Historique des Résultats"]}),!q&&s&&!x&&n.jsxs(ee,{onClick:()=>t(`/patients/${e}/results/new`),children:[" ",n.jsx(Ka,{className:"mr-2 h-4 w-4"}),"Ajouter un Résultat"]})]}),h&&n.jsxs("div",{className:"border rounded-lg overflow-hidden bg-background",children:[n.jsx(W,{className:"h-12 w-full"})," ",n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"})]}),!h&&!x&&n.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:n.jsxs(oa,{children:[n.jsx(ca,{children:n.jsxs(Wt,{children:[n.jsx(gt,{className:"w-[180px]",children:"Date du Résultat"}),n.jsx(gt,{children:"Médecin Prescripteur"}),n.jsx(gt,{className:"w-[130px]",children:"Statut"}),n.jsx(gt,{className:"text-right w-[150px]",children:"Actions"})]})}),n.jsx(ua,{children:l.length>0?l.map(U=>{var G,ce,re;return n.jsxs(Wt,{children:[n.jsx(Qe,{children:U.result_date?at(Ft(U.result_date),"PPP 'à' HH:mm",{locale:qt}):"N/A"}),n.jsx(Qe,{children:((G=U.doctor)==null?void 0:G.full_name)||n.jsx("span",{className:"italic text-muted-foreground",children:"Inconnu"})}),n.jsx(Qe,{children:n.jsx(Zr,{variant:S6(U.status),children:((ce=U.status)==null?void 0:ce.charAt(0).toUpperCase())+((re=U.status)==null?void 0:re.slice(1))||"N/A"})}),n.jsxs(Qe,{className:"text-right",children:[n.jsxs(et,{to:`/results/${U.id}`,children:[" ",n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(Kr,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"})," ",n.jsx("span",{className:"hidden sm:inline",children:"Voir Résultat"})," ",n.jsx("span",{className:"sm:hidden",children:"Voir"})," "]})]}),n.jsxs(ee,{variant:"destructive",size:"sm",className:"ml-2",onClick:O=>{O.preventDefault(),N(U.id),w(!0)},children:[n.jsx(Ll,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"})," ",n.jsx("span",{className:"hidden sm:inline",children:"Supprimer"})," ",n.jsx("span",{className:"sm:hidden",children:"Suppr"})," "]})]})]},U.id)}):n.jsx(Wt,{children:n.jsx(Qe,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"Aucun résultat trouvé pour ce patient."})})})]})})]})]}),n.jsx(Ai,{open:b,onOpenChange:w,children:n.jsxs(ki,{children:[n.jsx(Di,{children:n.jsx(Oi,{children:"Confirmer la suppression"})}),n.jsxs("div",{className:"py-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Êtes-vous sûr de vouloir supprimer ce résultat ? Cette action est irréversible."}),_&&n.jsxs(At,{variant:"destructive",children:[n.jsx(kt,{children:"Erreur"}),n.jsx(Dt,{children:_})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx(ee,{variant:"outline",onClick:()=>w(!1),children:"Annuler"}),n.jsx(ee,{variant:"destructive",onClick:z,children:E?"Suppression...":"Supprimer"})]})]})]})})]})},C6=()=>{const[e,t]=m.useState([]),[s,a]=m.useState(!0),[l,c]=m.useState(null),[u,f]=m.useState(""),[h,p]=m.useState(null),[x,v]=m.useState(!1),b=Yc(u,300),w=m.useCallback(async()=>{a(!0),c(null);try{const{data:_,error:R}=await ne.from("doctor").select("*").order("full_name",{ascending:!0});if(R)throw R;t(_||[])}catch(_){console.error("Erreur lors de la récupération des médecins:",_),c((_ instanceof Error?_.message:"")||"Une erreur est survenue lors du chargement des médecins."),t([])}finally{a(!1)}},[]);m.useEffect(()=>{w()},[w]);const j=m.useMemo(()=>{if(!b)return e;const _=b.toLowerCase();return e.filter(R=>R.full_name.toLowerCase().includes(_)||R.hospital&&R.hospital.toLowerCase().includes(_))},[e,b]),N=async()=>{if(h){v(!0),c(null);try{const{error:_}=await ne.from("doctor").delete().eq("id",h.id);if(_)throw _;t(R=>R.filter(E=>E.id!==h.id)),p(null)}catch(_){c((_ instanceof Error?_.message:"")||"Erreur lors de la suppression du médecin.")}finally{v(!1)}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[n.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(Kn,{className:"h-6 w-6"}),"Gestion des Médecins"]}),n.jsx(et,{to:"/doctors/new",children:n.jsxs(ee,{children:[n.jsx(Ka,{className:"mr-2 h-4 w-4"}),"Ajouter un Médecin"]})})]}),n.jsxs("div",{className:"relative",children:[n.jsx(qc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(We,{type:"search",placeholder:"Rechercher par nom ou hôpital...",value:u,onChange:_=>f(_.target.value),className:"pl-10 w-full md:w-1/3 h-10",disabled:s})]}),s&&n.jsxs("div",{className:"border rounded-lg",children:[n.jsx(W,{className:"h-12 w-full rounded-t-lg"}),n.jsxs("div",{className:"p-4 space-y-2",children:[n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"})]})]}),!s&&l&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur de Chargement"}),n.jsxs(Dt,{children:[l," ",n.jsx(ee,{variant:"link",onClick:w,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),!s&&!l&&n.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:n.jsxs(oa,{children:[n.jsx(ca,{children:n.jsxs(Wt,{children:[n.jsx(gt,{children:"Nom Complet"}),n.jsx(gt,{className:"w-[200px]",children:"Téléphone"}),n.jsx(gt,{className:"w-[300px]",children:"Hôpital / Clinique"}),n.jsx(gt,{className:"text-right w-[150px]",children:"Actions"})]})}),n.jsx(ua,{children:j.length>0?j.map(_=>n.jsxs(Wt,{children:[n.jsx(Qe,{className:"font-medium",children:_.full_name}),n.jsx(Qe,{children:_.phone||n.jsx("span",{className:"italic text-muted-foreground",children:"N/A"})}),n.jsx(Qe,{children:_.hospital||n.jsx("span",{className:"italic text-muted-foreground",children:"N/A"})}),n.jsxs(Qe,{className:"text-right",children:[n.jsx(et,{to:`/doctors/${_.id}/edit`,children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(Qr,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Modifier"}),n.jsx("span",{className:"sm:hidden",children:"Éditer"})]})}),n.jsxs(_c,{children:[n.jsx(_f,{asChild:!0,children:n.jsxs(ee,{variant:"destructive",size:"sm",className:"ml-2",title:"Supprimer le médecin",onClick:()=>p(_),disabled:s,children:[n.jsx(Fc,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Supprimer"})]})}),n.jsxs(Sf,{children:[n.jsxs(Ef,{children:[n.jsx(Rf,{children:"Supprimer ce médecin ?"}),n.jsx(Tf,{children:"Cette action est irréversible. Voulez-vous vraiment supprimer ce médecin ?"})]}),n.jsxs(Cf,{children:[n.jsx(Mf,{onClick:()=>p(null),disabled:x,children:"Annuler"}),n.jsx(ux,{onClick:N,disabled:x,className:"bg-destructive text-destructive-foreground",children:"Supprimer"})]})]})]})]})]},_.id)):n.jsx(Wt,{children:n.jsx(Qe,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:u?"Aucun médecin ne correspond à votre recherche.":n.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[n.jsx(vf,{className:"h-8 w-8 text-muted-foreground/50"}),"Aucun médecin trouvé. Commencez par en ajouter un."]})})})})]})})]})},R6=()=>n.jsx("div",{children:"404 - Page Not Found"});var gx="Popover",[B_,pH]=ur(gx,[Za]),Wc=Za(),[T6,ei]=B_(gx),H_=e=>{const{__scopePopover:t,children:s,open:a,defaultOpen:l,onOpenChange:c,modal:u=!1}=e,f=Wc(t),h=m.useRef(null),[p,x]=m.useState(!1),[v=!1,b]=Ya({prop:a,defaultProp:l,onChange:c});return n.jsx(qg,{...f,children:n.jsx(T6,{scope:t,contentId:Cs(),triggerRef:h,open:v,onOpenChange:b,onOpenToggle:m.useCallback(()=>b(w=>!w),[b]),hasCustomAnchor:p,onCustomAnchorAdd:m.useCallback(()=>x(!0),[]),onCustomAnchorRemove:m.useCallback(()=>x(!1),[]),modal:u,children:s})})};H_.displayName=gx;var q_="PopoverAnchor",M6=m.forwardRef((e,t)=>{const{__scopePopover:s,...a}=e,l=ei(q_,s),c=Wc(s),{onCustomAnchorAdd:u,onCustomAnchorRemove:f}=l;return m.useEffect(()=>(u(),()=>f()),[u,f]),n.jsx(zc,{...c,...a,ref:t})});M6.displayName=q_;var F_="PopoverTrigger",V_=m.forwardRef((e,t)=>{const{__scopePopover:s,...a}=e,l=ei(F_,s),c=Wc(s),u=_t(t,l.triggerRef),f=n.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":K_(l.open),...a,ref:u,onClick:De(e.onClick,l.onOpenToggle)});return l.hasCustomAnchor?f:n.jsx(zc,{asChild:!0,...c,children:f})});V_.displayName=F_;var xx="PopoverPortal",[A6,k6]=B_(xx,{forceMount:void 0}),Y_=e=>{const{__scopePopover:t,forceMount:s,children:a,container:l}=e,c=ei(xx,t);return n.jsx(A6,{scope:t,forceMount:s,children:n.jsx(Dr,{present:s||c.open,children:n.jsx(Uc,{asChild:!0,container:l,children:a})})})};Y_.displayName=xx;var Wl="PopoverContent",G_=m.forwardRef((e,t)=>{const s=k6(Wl,e.__scopePopover),{forceMount:a=s.forceMount,...l}=e,c=ei(Wl,e.__scopePopover);return n.jsx(Dr,{present:a||c.open,children:c.modal?n.jsx(D6,{...l,ref:t}):n.jsx(O6,{...l,ref:t})})});G_.displayName=Wl;var D6=m.forwardRef((e,t)=>{const s=ei(Wl,e.__scopePopover),a=m.useRef(null),l=_t(t,a),c=m.useRef(!1);return m.useEffect(()=>{const u=a.current;if(u)return mf(u)},[]),n.jsx($c,{as:Ts,allowPinchZoom:!0,children:n.jsx(W_,{...e,ref:l,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(e.onCloseAutoFocus,u=>{var f;u.preventDefault(),c.current||(f=s.triggerRef.current)==null||f.focus()}),onPointerDownOutside:De(e.onPointerDownOutside,u=>{const f=u.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,p=f.button===2||h;c.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:De(e.onFocusOutside,u=>u.preventDefault(),{checkForDefaultPrevented:!1})})})}),O6=m.forwardRef((e,t)=>{const s=ei(Wl,e.__scopePopover),a=m.useRef(!1),l=m.useRef(!1);return n.jsx(W_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var u,f;(u=e.onCloseAutoFocus)==null||u.call(e,c),c.defaultPrevented||(a.current||(f=s.triggerRef.current)==null||f.focus(),c.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:c=>{var h,p;(h=e.onInteractOutside)==null||h.call(e,c),c.defaultPrevented||(a.current=!0,c.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const u=c.target;((p=s.triggerRef.current)==null?void 0:p.contains(u))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&l.current&&c.preventDefault()}})}),W_=m.forwardRef((e,t)=>{const{__scopePopover:s,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:x,...v}=e,b=ei(Wl,s),w=Wc(s);return af(),n.jsx(Lc,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:c,children:n.jsx(to,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:x,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onDismiss:()=>b.onOpenChange(!1),children:n.jsx(uf,{"data-state":K_(b.open),role:"dialog",id:b.contentId,...w,...v,ref:t,style:{...v.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),X_="PopoverClose",P6=m.forwardRef((e,t)=>{const{__scopePopover:s,...a}=e,l=ei(X_,s);return n.jsx(Je.button,{type:"button",...a,ref:t,onClick:De(e.onClick,()=>l.onOpenChange(!1))})});P6.displayName=X_;var L6="PopoverArrow",I6=m.forwardRef((e,t)=>{const{__scopePopover:s,...a}=e,l=Wc(s);return n.jsx(df,{...l,...a,ref:t})});I6.displayName=L6;function K_(e){return e?"open":"closed"}var z6=H_,U6=V_,$6=Y_,B6=G_;function Q_({...e}){return n.jsx(z6,{"data-slot":"popover",...e})}function Z_({...e}){return n.jsx(U6,{"data-slot":"popover-trigger",...e})}function J_({className:e,align:t="center",sideOffset:s=4,...a}){return n.jsx($6,{children:n.jsx(B6,{"data-slot":"popover-content",align:t,sideOffset:s,className:Me("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...a})})}var Ze=function(){return Ze=Object.assign||function(t){for(var s,a=1,l=arguments.length;a<l;a++){s=arguments[a];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(t[c]=s[c])}return t},Ze.apply(this,arguments)};function H6(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(s[a[l]]=e[a[l]]);return s}function eS(e,t,s){for(var a=0,l=t.length,c;a<l;a++)(c||!(a in t))&&(c||(c=Array.prototype.slice.call(t,0,a)),c[a]=t[a]);return e.concat(c||Array.prototype.slice.call(t))}function Xc(e){return e.mode==="multiple"}function Kc(e){return e.mode==="range"}function Af(e){return e.mode==="single"}var q6={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function F6(e,t){return at(e,"LLLL y",t)}function V6(e,t){return at(e,"d",t)}function Y6(e,t){return at(e,"LLLL",t)}function G6(e){return"".concat(e)}function W6(e,t){return at(e,"cccccc",t)}function X6(e,t){return at(e,"yyyy",t)}var K6=Object.freeze({__proto__:null,formatCaption:F6,formatDay:V6,formatMonthCaption:Y6,formatWeekNumber:G6,formatWeekdayName:W6,formatYearCaption:X6}),Q6=function(e,t,s){return at(e,"do MMMM (EEEE)",s)},Z6=function(){return"Month: "},J6=function(){return"Go to next month"},eI=function(){return"Go to previous month"},tI=function(e,t){return at(e,"cccc",t)},nI=function(e){return"Week n. ".concat(e)},rI=function(){return"Year: "},sI=Object.freeze({__proto__:null,labelDay:Q6,labelMonthDropdown:Z6,labelNext:J6,labelPrevious:eI,labelWeekNumber:nI,labelWeekday:tI,labelYearDropdown:rI});function aI(){var e="buttons",t=q6,s=O_,a={},l={},c=1,u={},f=new Date;return{captionLayout:e,classNames:t,formatters:K6,labels:sI,locale:s,modifiersClassNames:a,modifiers:l,numberOfMonths:c,styles:u,today:f,mode:"default"}}function iI(e){var t=e.fromYear,s=e.toYear,a=e.fromMonth,l=e.toMonth,c=e.fromDate,u=e.toDate;return a?c=yr(a):t&&(c=new Date(t,0,1)),l?u=hx(l):s&&(u=new Date(s,11,31)),{fromDate:c?Gl(c):void 0,toDate:u?Gl(u):void 0}}var tS=m.createContext(void 0);function lI(e){var t,s=e.initialProps,a=aI(),l=iI(s),c=l.fromDate,u=l.toDate,f=(t=s.captionLayout)!==null&&t!==void 0?t:a.captionLayout;f!=="buttons"&&(!c||!u)&&(f="buttons");var h;(Af(s)||Xc(s)||Kc(s))&&(h=s.onSelect);var p=Ze(Ze(Ze({},a),s),{captionLayout:f,classNames:Ze(Ze({},a.classNames),s.classNames),components:Ze({},s.components),formatters:Ze(Ze({},a.formatters),s.formatters),fromDate:c,labels:Ze(Ze({},a.labels),s.labels),mode:s.mode||a.mode,modifiers:Ze(Ze({},a.modifiers),s.modifiers),modifiersClassNames:Ze(Ze({},a.modifiersClassNames),s.modifiersClassNames),onSelect:h,styles:Ze(Ze({},a.styles),s.styles),toDate:u});return n.jsx(tS.Provider,{value:p,children:e.children})}function an(){var e=m.useContext(tS);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function nS(e){var t=an(),s=t.locale,a=t.classNames,l=t.styles,c=t.formatters.formatCaption;return n.jsx("div",{className:a.caption_label,style:l.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:c(e.displayMonth,{locale:s})})}function oI(e){return n.jsx("svg",Ze({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:n.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function rS(e){var t,s,a=e.onChange,l=e.value,c=e.children,u=e.caption,f=e.className,h=e.style,p=an(),x=(s=(t=p.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&s!==void 0?s:oI;return n.jsxs("div",{className:f,style:h,children:[n.jsx("span",{className:p.classNames.vhidden,children:e["aria-label"]}),n.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:p.classNames.dropdown,style:p.styles.dropdown,value:l,onChange:a,children:c}),n.jsxs("div",{className:p.classNames.caption_label,style:p.styles.caption_label,"aria-hidden":"true",children:[u,n.jsx(x,{className:p.classNames.dropdown_icon,style:p.styles.dropdown_icon})]})]})}function cI(e){var t,s=an(),a=s.fromDate,l=s.toDate,c=s.styles,u=s.locale,f=s.formatters.formatMonthCaption,h=s.classNames,p=s.components,x=s.labels.labelMonthDropdown;if(!a)return n.jsx(n.Fragment,{});if(!l)return n.jsx(n.Fragment,{});var v=[];if(OL(a,l))for(var b=yr(a),w=a.getMonth();w<=l.getMonth();w++)v.push(gp(b,w));else for(var b=yr(new Date),w=0;w<=11;w++)v.push(gp(b,w));var j=function(_){var R=Number(_.target.value),E=gp(yr(e.displayMonth),R);e.onChange(E)},N=(t=p==null?void 0:p.Dropdown)!==null&&t!==void 0?t:rS;return n.jsx(N,{name:"months","aria-label":x(),className:h.dropdown_month,style:c.dropdown_month,onChange:j,value:e.displayMonth.getMonth(),caption:f(e.displayMonth,{locale:u}),children:v.map(function(_){return n.jsx("option",{value:_.getMonth(),children:f(_,{locale:u})},_.getMonth())})})}function uI(e){var t,s=e.displayMonth,a=an(),l=a.fromDate,c=a.toDate,u=a.locale,f=a.styles,h=a.classNames,p=a.components,x=a.formatters.formatYearCaption,v=a.labels.labelYearDropdown,b=[];if(!l)return n.jsx(n.Fragment,{});if(!c)return n.jsx(n.Fragment,{});for(var w=l.getFullYear(),j=c.getFullYear(),N=w;N<=j;N++)b.push(Dw(A_(new Date),N));var _=function(E){var C=Dw(yr(s),Number(E.target.value));e.onChange(C)},R=(t=p==null?void 0:p.Dropdown)!==null&&t!==void 0?t:rS;return n.jsx(R,{name:"years","aria-label":v(),className:h.dropdown_year,style:f.dropdown_year,onChange:_,value:s.getFullYear(),caption:x(s,{locale:u}),children:b.map(function(E){return n.jsx("option",{value:E.getFullYear(),children:x(E,{locale:u})},E.getFullYear())})})}function dI(e,t){var s=m.useState(e),a=s[0],l=s[1],c=t===void 0?a:t;return[c,l]}function fI(e){var t=e.month,s=e.defaultMonth,a=e.today,l=t||s||a||new Date,c=e.toDate,u=e.fromDate,f=e.numberOfMonths,h=f===void 0?1:f;if(c&&Sc(c,l)<0){var p=-1*(h-1);l=us(c,p)}return u&&Sc(l,u)<0&&(l=u),yr(l)}function hI(){var e=an(),t=fI(e),s=dI(t,e.month),a=s[0],l=s[1],c=function(u){var f;if(!e.disableNavigation){var h=yr(u);l(h),(f=e.onMonthChange)===null||f===void 0||f.call(e,h)}};return[a,c]}function mI(e,t){for(var s=t.reverseMonths,a=t.numberOfMonths,l=yr(e),c=yr(us(l,a)),u=Sc(c,l),f=[],h=0;h<u;h++){var p=us(l,h);f.push(p)}return s&&(f=f.reverse()),f}function pI(e,t){if(!t.disableNavigation){var s=t.toDate,a=t.pagedNavigation,l=t.numberOfMonths,c=l===void 0?1:l,u=a?c:1,f=yr(e);if(!s)return us(f,u);var h=Sc(s,e);if(!(h<c))return us(f,u)}}function gI(e,t){if(!t.disableNavigation){var s=t.fromDate,a=t.pagedNavigation,l=t.numberOfMonths,c=l===void 0?1:l,u=a?c:1,f=yr(e);if(!s)return us(f,-u);var h=Sc(f,s);if(!(h<=0))return us(f,-u)}}var sS=m.createContext(void 0);function xI(e){var t=an(),s=hI(),a=s[0],l=s[1],c=mI(a,t),u=pI(a,t),f=gI(a,t),h=function(v){return c.some(function(b){return px(v,b)})},p=function(v,b){h(v)||(b&&U_(v,b)?l(us(v,1+t.numberOfMonths*-1)):l(v))},x={currentMonth:a,displayMonths:c,goToMonth:l,goToDate:p,previousMonth:f,nextMonth:u,isDateDisplayed:h};return n.jsx(sS.Provider,{value:x,children:e.children})}function Qc(){var e=m.useContext(sS);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Ow(e){var t,s=an(),a=s.classNames,l=s.styles,c=s.components,u=Qc().goToMonth,f=function(x){u(us(x,e.displayIndex?-e.displayIndex:0))},h=(t=c==null?void 0:c.CaptionLabel)!==null&&t!==void 0?t:nS,p=n.jsx(h,{id:e.id,displayMonth:e.displayMonth});return n.jsxs("div",{className:a.caption_dropdowns,style:l.caption_dropdowns,children:[n.jsx("div",{className:a.vhidden,children:p}),n.jsx(cI,{onChange:f,displayMonth:e.displayMonth}),n.jsx(uI,{onChange:f,displayMonth:e.displayMonth})]})}function vI(e){return n.jsx("svg",Ze({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:n.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function yI(e){return n.jsx("svg",Ze({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:n.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Vd=m.forwardRef(function(e,t){var s=an(),a=s.classNames,l=s.styles,c=[a.button_reset,a.button];e.className&&c.push(e.className);var u=c.join(" "),f=Ze(Ze({},l.button_reset),l.button);return e.style&&Object.assign(f,e.style),n.jsx("button",Ze({},e,{ref:t,type:"button",className:u,style:f}))});function bI(e){var t,s,a=an(),l=a.dir,c=a.locale,u=a.classNames,f=a.styles,h=a.labels,p=h.labelPrevious,x=h.labelNext,v=a.components;if(!e.nextMonth&&!e.previousMonth)return n.jsx(n.Fragment,{});var b=p(e.previousMonth,{locale:c}),w=[u.nav_button,u.nav_button_previous].join(" "),j=x(e.nextMonth,{locale:c}),N=[u.nav_button,u.nav_button_next].join(" "),_=(t=v==null?void 0:v.IconRight)!==null&&t!==void 0?t:yI,R=(s=v==null?void 0:v.IconLeft)!==null&&s!==void 0?s:vI;return n.jsxs("div",{className:u.nav,style:f.nav,children:[!e.hidePrevious&&n.jsx(Vd,{name:"previous-month","aria-label":b,className:w,style:f.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:l==="rtl"?n.jsx(_,{className:u.nav_icon,style:f.nav_icon}):n.jsx(R,{className:u.nav_icon,style:f.nav_icon})}),!e.hideNext&&n.jsx(Vd,{name:"next-month","aria-label":j,className:N,style:f.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:l==="rtl"?n.jsx(R,{className:u.nav_icon,style:f.nav_icon}):n.jsx(_,{className:u.nav_icon,style:f.nav_icon})})]})}function Pw(e){var t=an().numberOfMonths,s=Qc(),a=s.previousMonth,l=s.nextMonth,c=s.goToMonth,u=s.displayMonths,f=u.findIndex(function(j){return px(e.displayMonth,j)}),h=f===0,p=f===u.length-1,x=t>1&&(h||!p),v=t>1&&(p||!h),b=function(){a&&c(a)},w=function(){l&&c(l)};return n.jsx(bI,{displayMonth:e.displayMonth,hideNext:x,hidePrevious:v,nextMonth:l,previousMonth:a,onPreviousClick:b,onNextClick:w})}function wI(e){var t,s=an(),a=s.classNames,l=s.disableNavigation,c=s.styles,u=s.captionLayout,f=s.components,h=(t=f==null?void 0:f.CaptionLabel)!==null&&t!==void 0?t:nS,p;return l?p=n.jsx(h,{id:e.id,displayMonth:e.displayMonth}):u==="dropdown"?p=n.jsx(Ow,{displayMonth:e.displayMonth,id:e.id}):u==="dropdown-buttons"?p=n.jsxs(n.Fragment,{children:[n.jsx(Ow,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),n.jsx(Pw,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):p=n.jsxs(n.Fragment,{children:[n.jsx(h,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),n.jsx(Pw,{displayMonth:e.displayMonth,id:e.id})]}),n.jsx("div",{className:a.caption,style:c.caption,children:p})}function jI(e){var t=an(),s=t.footer,a=t.styles,l=t.classNames.tfoot;return s?n.jsx("tfoot",{className:l,style:a.tfoot,children:n.jsx("tr",{children:n.jsx("td",{colSpan:8,children:s})})}):n.jsx(n.Fragment,{})}function NI(e,t,s){for(var a=s?Pi(new Date):As(new Date,{locale:e,weekStartsOn:t}),l=[],c=0;c<7;c++){var u=lr(a,c);l.push(u)}return l}function _I(){var e=an(),t=e.classNames,s=e.styles,a=e.showWeekNumber,l=e.locale,c=e.weekStartsOn,u=e.ISOWeek,f=e.formatters.formatWeekdayName,h=e.labels.labelWeekday,p=NI(l,c,u);return n.jsxs("tr",{style:s.head_row,className:t.head_row,children:[a&&n.jsx("td",{style:s.head_cell,className:t.head_cell}),p.map(function(x,v){return n.jsx("th",{scope:"col",className:t.head_cell,style:s.head_cell,"aria-label":h(x,{locale:l}),children:f(x,{locale:l})},v)})]})}function SI(){var e,t=an(),s=t.classNames,a=t.styles,l=t.components,c=(e=l==null?void 0:l.HeadRow)!==null&&e!==void 0?e:_I;return n.jsx("thead",{style:a.head,className:s.head,children:n.jsx(c,{})})}function EI(e){var t=an(),s=t.locale,a=t.formatters.formatDay;return n.jsx(n.Fragment,{children:a(e.date,{locale:s})})}var vx=m.createContext(void 0);function CI(e){if(!Xc(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return n.jsx(vx.Provider,{value:t,children:e.children})}return n.jsx(RI,{initialProps:e.initialProps,children:e.children})}function RI(e){var t=e.initialProps,s=e.children,a=t.selected,l=t.min,c=t.max,u=function(p,x,v){var b,w;(b=t.onDayClick)===null||b===void 0||b.call(t,p,x,v);var j=!!(x.selected&&l&&(a==null?void 0:a.length)===l);if(!j){var N=!!(!x.selected&&c&&(a==null?void 0:a.length)===c);if(!N){var _=a?eS([],a):[];if(x.selected){var R=_.findIndex(function(E){return vr(p,E)});_.splice(R,1)}else _.push(p);(w=t.onSelect)===null||w===void 0||w.call(t,_,p,x,v)}}},f={disabled:[]};a&&f.disabled.push(function(p){var x=c&&a.length>c-1,v=a.some(function(b){return vr(b,p)});return!!(x&&!v)});var h={selected:a,onDayClick:u,modifiers:f};return n.jsx(vx.Provider,{value:h,children:s})}function yx(){var e=m.useContext(vx);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function TI(e,t){var s=t||{},a=s.from,l=s.to;return a&&l?vr(l,e)&&vr(a,e)?void 0:vr(l,e)?{from:l,to:void 0}:vr(a,e)?void 0:tg(a,e)?{from:e,to:l}:{from:a,to:e}:l?tg(e,l)?{from:l,to:e}:{from:e,to:l}:a?U_(e,a)?{from:e,to:a}:{from:a,to:e}:{from:e,to:void 0}}var bx=m.createContext(void 0);function MI(e){if(!Kc(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return n.jsx(bx.Provider,{value:t,children:e.children})}return n.jsx(AI,{initialProps:e.initialProps,children:e.children})}function AI(e){var t=e.initialProps,s=e.children,a=t.selected,l=a||{},c=l.from,u=l.to,f=t.min,h=t.max,p=function(w,j,N){var _,R;(_=t.onDayClick)===null||_===void 0||_.call(t,w,j,N);var E=TI(w,a);(R=t.onSelect)===null||R===void 0||R.call(t,E,w,j,N)},x={range_start:[],range_end:[],range_middle:[],disabled:[]};if(c?(x.range_start=[c],u?(x.range_end=[u],vr(c,u)||(x.range_middle=[{after:c,before:u}])):x.range_end=[c]):u&&(x.range_start=[u],x.range_end=[u]),f&&(c&&!u&&x.disabled.push({after:mp(c,f-1),before:lr(c,f-1)}),c&&u&&x.disabled.push({after:c,before:lr(c,f-1)}),!c&&u&&x.disabled.push({after:mp(u,f-1),before:lr(u,f-1)})),h){if(c&&!u&&(x.disabled.push({before:lr(c,-h+1)}),x.disabled.push({after:lr(c,h-1)})),c&&u){var v=Es(u,c)+1,b=h-v;x.disabled.push({before:mp(c,b)}),x.disabled.push({after:lr(u,b)})}!c&&u&&(x.disabled.push({before:lr(u,-h+1)}),x.disabled.push({after:lr(u,h-1)}))}return n.jsx(bx.Provider,{value:{selected:a,onDayClick:p,modifiers:x},children:s})}function wx(){var e=m.useContext(bx);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function kd(e){return Array.isArray(e)?eS([],e):e!==void 0?[e]:[]}function kI(e){var t={};return Object.entries(e).forEach(function(s){var a=s[0],l=s[1];t[a]=kd(l)}),t}var ds;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(ds||(ds={}));var DI=ds.Selected,Js=ds.Disabled,OI=ds.Hidden,PI=ds.Today,xp=ds.RangeEnd,vp=ds.RangeMiddle,yp=ds.RangeStart,LI=ds.Outside;function II(e,t,s){var a,l=(a={},a[DI]=kd(e.selected),a[Js]=kd(e.disabled),a[OI]=kd(e.hidden),a[PI]=[e.today],a[xp]=[],a[vp]=[],a[yp]=[],a[LI]=[],a);return e.fromDate&&l[Js].push({before:e.fromDate}),e.toDate&&l[Js].push({after:e.toDate}),Xc(e)?l[Js]=l[Js].concat(t.modifiers[Js]):Kc(e)&&(l[Js]=l[Js].concat(s.modifiers[Js]),l[yp]=s.modifiers[yp],l[vp]=s.modifiers[vp],l[xp]=s.modifiers[xp]),l}var aS=m.createContext(void 0);function zI(e){var t=an(),s=yx(),a=wx(),l=II(t,s,a),c=kI(t.modifiers),u=Ze(Ze({},l),c);return n.jsx(aS.Provider,{value:u,children:e.children})}function iS(){var e=m.useContext(aS);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function UI(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function $I(e){return!!(e&&typeof e=="object"&&"from"in e)}function BI(e){return!!(e&&typeof e=="object"&&"after"in e)}function HI(e){return!!(e&&typeof e=="object"&&"before"in e)}function qI(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function FI(e,t){var s,a=t.from,l=t.to;if(a&&l){var c=Es(l,a)<0;c&&(s=[l,a],a=s[0],l=s[1]);var u=Es(e,a)>=0&&Es(l,e)>=0;return u}return l?vr(l,e):a?vr(a,e):!1}function VI(e){return fx(e)}function YI(e){return Array.isArray(e)&&e.every(fx)}function GI(e,t){return t.some(function(s){if(typeof s=="boolean")return s;if(VI(s))return vr(e,s);if(YI(s))return s.includes(e);if($I(s))return FI(e,s);if(qI(s))return s.dayOfWeek.includes(e.getDay());if(UI(s)){var a=Es(s.before,e),l=Es(s.after,e),c=a>0,u=l<0,f=tg(s.before,s.after);return f?u&&c:c||u}return BI(s)?Es(e,s.after)>0:HI(s)?Es(s.before,e)>0:typeof s=="function"?s(e):!1})}function jx(e,t,s){var a=Object.keys(t).reduce(function(c,u){var f=t[u];return GI(e,f)&&c.push(u),c},[]),l={};return a.forEach(function(c){return l[c]=!0}),s&&!px(e,s)&&(l.outside=!0),l}function WI(e,t){for(var s=yr(e[0]),a=hx(e[e.length-1]),l,c,u=s;u<=a;){var f=jx(u,t),h=!f.disabled&&!f.hidden;if(!h){u=lr(u,1);continue}if(f.selected)return u;f.today&&!c&&(c=u),l||(l=u),u=lr(u,1)}return c||l}var XI=365;function lS(e,t){var s=t.moveBy,a=t.direction,l=t.context,c=t.modifiers,u=t.retry,f=u===void 0?{count:0,lastFocused:e}:u,h=l.weekStartsOn,p=l.fromDate,x=l.toDate,v=l.locale,b={day:lr,week:eg,month:us,year:A5,startOfWeek:function(_){return l.ISOWeek?Pi(_):As(_,{locale:v,weekStartsOn:h})},endOfWeek:function(_){return l.ISOWeek?k_(_):mx(_,{locale:v,weekStartsOn:h})}},w=b[s](e,a==="after"?1:-1);a==="before"&&p?w=k5([p,w]):a==="after"&&x&&(w=D5([x,w]));var j=!0;if(c){var N=jx(w,c);j=!N.disabled&&!N.hidden}return j?w:f.count>XI?f.lastFocused:lS(w,{moveBy:s,direction:a,context:l,modifiers:c,retry:Ze(Ze({},f),{count:f.count+1})})}var oS=m.createContext(void 0);function KI(e){var t=Qc(),s=iS(),a=m.useState(),l=a[0],c=a[1],u=m.useState(),f=u[0],h=u[1],p=WI(t.displayMonths,s),x=l??(f&&t.isDateDisplayed(f))?f:p,v=function(){h(l),c(void 0)},b=function(_){c(_)},w=an(),j=function(_,R){if(l){var E=lS(l,{moveBy:_,direction:R,context:w,modifiers:s});vr(l,E)||(t.goToDate(E,l),b(E))}},N={focusedDay:l,focusTarget:x,blur:v,focus:b,focusDayAfter:function(){return j("day","after")},focusDayBefore:function(){return j("day","before")},focusWeekAfter:function(){return j("week","after")},focusWeekBefore:function(){return j("week","before")},focusMonthBefore:function(){return j("month","before")},focusMonthAfter:function(){return j("month","after")},focusYearBefore:function(){return j("year","before")},focusYearAfter:function(){return j("year","after")},focusStartOfWeek:function(){return j("startOfWeek","before")},focusEndOfWeek:function(){return j("endOfWeek","after")}};return n.jsx(oS.Provider,{value:N,children:e.children})}function Nx(){var e=m.useContext(oS);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function QI(e,t){var s=iS(),a=jx(e,s,t);return a}var _x=m.createContext(void 0);function ZI(e){if(!Af(e.initialProps)){var t={selected:void 0};return n.jsx(_x.Provider,{value:t,children:e.children})}return n.jsx(JI,{initialProps:e.initialProps,children:e.children})}function JI(e){var t=e.initialProps,s=e.children,a=function(c,u,f){var h,p,x;if((h=t.onDayClick)===null||h===void 0||h.call(t,c,u,f),u.selected&&!t.required){(p=t.onSelect)===null||p===void 0||p.call(t,void 0,c,u,f);return}(x=t.onSelect)===null||x===void 0||x.call(t,c,c,u,f)},l={selected:t.selected,onDayClick:a};return n.jsx(_x.Provider,{value:l,children:s})}function cS(){var e=m.useContext(_x);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function e8(e,t){var s=an(),a=cS(),l=yx(),c=wx(),u=Nx(),f=u.focusDayAfter,h=u.focusDayBefore,p=u.focusWeekAfter,x=u.focusWeekBefore,v=u.blur,b=u.focus,w=u.focusMonthBefore,j=u.focusMonthAfter,N=u.focusYearBefore,_=u.focusYearAfter,R=u.focusStartOfWeek,E=u.focusEndOfWeek,C=function(X){var V,te,k,L;Af(s)?(V=a.onDayClick)===null||V===void 0||V.call(a,e,t,X):Xc(s)?(te=l.onDayClick)===null||te===void 0||te.call(l,e,t,X):Kc(s)?(k=c.onDayClick)===null||k===void 0||k.call(c,e,t,X):(L=s.onDayClick)===null||L===void 0||L.call(s,e,t,X)},M=function(X){var V;b(e),(V=s.onDayFocus)===null||V===void 0||V.call(s,e,t,X)},T=function(X){var V;v(),(V=s.onDayBlur)===null||V===void 0||V.call(s,e,t,X)},z=function(X){var V;(V=s.onDayMouseEnter)===null||V===void 0||V.call(s,e,t,X)},q=function(X){var V;(V=s.onDayMouseLeave)===null||V===void 0||V.call(s,e,t,X)},F=function(X){var V;(V=s.onDayPointerEnter)===null||V===void 0||V.call(s,e,t,X)},U=function(X){var V;(V=s.onDayPointerLeave)===null||V===void 0||V.call(s,e,t,X)},G=function(X){var V;(V=s.onDayTouchCancel)===null||V===void 0||V.call(s,e,t,X)},ce=function(X){var V;(V=s.onDayTouchEnd)===null||V===void 0||V.call(s,e,t,X)},re=function(X){var V;(V=s.onDayTouchMove)===null||V===void 0||V.call(s,e,t,X)},O=function(X){var V;(V=s.onDayTouchStart)===null||V===void 0||V.call(s,e,t,X)},ie=function(X){var V;(V=s.onDayKeyUp)===null||V===void 0||V.call(s,e,t,X)},ue=function(X){var V;switch(X.key){case"ArrowLeft":X.preventDefault(),X.stopPropagation(),s.dir==="rtl"?f():h();break;case"ArrowRight":X.preventDefault(),X.stopPropagation(),s.dir==="rtl"?h():f();break;case"ArrowDown":X.preventDefault(),X.stopPropagation(),p();break;case"ArrowUp":X.preventDefault(),X.stopPropagation(),x();break;case"PageUp":X.preventDefault(),X.stopPropagation(),X.shiftKey?N():w();break;case"PageDown":X.preventDefault(),X.stopPropagation(),X.shiftKey?_():j();break;case"Home":X.preventDefault(),X.stopPropagation(),R();break;case"End":X.preventDefault(),X.stopPropagation(),E();break}(V=s.onDayKeyDown)===null||V===void 0||V.call(s,e,t,X)},P={onClick:C,onFocus:M,onBlur:T,onKeyDown:ue,onKeyUp:ie,onMouseEnter:z,onMouseLeave:q,onPointerEnter:F,onPointerLeave:U,onTouchCancel:G,onTouchEnd:ce,onTouchMove:re,onTouchStart:O};return P}function t8(){var e=an(),t=cS(),s=yx(),a=wx(),l=Af(e)?t.selected:Xc(e)?s.selected:Kc(e)?a.selected:void 0;return l}function n8(e){return Object.values(ds).includes(e)}function r8(e,t){var s=[e.classNames.day];return Object.keys(t).forEach(function(a){var l=e.modifiersClassNames[a];if(l)s.push(l);else if(n8(a)){var c=e.classNames["day_".concat(a)];c&&s.push(c)}}),s}function s8(e,t){var s=Ze({},e.styles.day);return Object.keys(t).forEach(function(a){var l;s=Ze(Ze({},s),(l=e.modifiersStyles)===null||l===void 0?void 0:l[a])}),s}function a8(e,t,s){var a,l,c,u=an(),f=Nx(),h=QI(e,t),p=e8(e,h),x=t8(),v=!!(u.onDayClick||u.mode!=="default");m.useEffect(function(){var z;h.outside||f.focusedDay&&v&&vr(f.focusedDay,e)&&((z=s.current)===null||z===void 0||z.focus())},[f.focusedDay,e,s,v,h.outside]);var b=r8(u,h).join(" "),w=s8(u,h),j=!!(h.outside&&!u.showOutsideDays||h.hidden),N=(c=(l=u.components)===null||l===void 0?void 0:l.DayContent)!==null&&c!==void 0?c:EI,_=n.jsx(N,{date:e,displayMonth:t,activeModifiers:h}),R={style:w,className:b,children:_,role:"gridcell"},E=f.focusTarget&&vr(f.focusTarget,e)&&!h.outside,C=f.focusedDay&&vr(f.focusedDay,e),M=Ze(Ze(Ze({},R),(a={disabled:h.disabled,role:"gridcell"},a["aria-selected"]=h.selected,a.tabIndex=C||E?0:-1,a)),p),T={isButton:v,isHidden:j,activeModifiers:h,selectedDays:x,buttonProps:M,divProps:R};return T}function i8(e){var t=m.useRef(null),s=a8(e.date,e.displayMonth,t);return s.isHidden?n.jsx("div",{role:"gridcell"}):s.isButton?n.jsx(Vd,Ze({name:"day",ref:t},s.buttonProps)):n.jsx("div",Ze({},s.divProps))}function l8(e){var t=e.number,s=e.dates,a=an(),l=a.onWeekNumberClick,c=a.styles,u=a.classNames,f=a.locale,h=a.labels.labelWeekNumber,p=a.formatters.formatWeekNumber,x=p(Number(t),{locale:f});if(!l)return n.jsx("span",{className:u.weeknumber,style:c.weeknumber,children:x});var v=h(Number(t),{locale:f}),b=function(w){l(t,s,w)};return n.jsx(Vd,{name:"week-number","aria-label":v,className:u.weeknumber,style:c.weeknumber,onClick:b,children:x})}function o8(e){var t,s,a=an(),l=a.styles,c=a.classNames,u=a.showWeekNumber,f=a.components,h=(t=f==null?void 0:f.Day)!==null&&t!==void 0?t:i8,p=(s=f==null?void 0:f.WeekNumber)!==null&&s!==void 0?s:l8,x;return u&&(x=n.jsx("td",{className:c.cell,style:l.cell,children:n.jsx(p,{number:e.weekNumber,dates:e.dates})})),n.jsxs("tr",{className:c.row,style:l.row,children:[x,e.dates.map(function(v){return n.jsx("td",{className:c.cell,style:l.cell,role:"presentation",children:n.jsx(h,{displayMonth:e.displayMonth,date:v})},AL(v))})]})}function Lw(e,t,s){for(var a=s!=null&&s.ISOWeek?k_(t):mx(t,s),l=s!=null&&s.ISOWeek?Pi(e):As(e,s),c=Es(a,l),u=[],f=0;f<=c;f++)u.push(lr(l,f));var h=u.reduce(function(p,x){var v=s!=null&&s.ISOWeek?P_(x):I_(x,s),b=p.find(function(w){return w.weekNumber===v});return b?(b.dates.push(x),p):(p.push({weekNumber:v,dates:[x]}),p)},[]);return h}function c8(e,t){var s=Lw(yr(e),hx(e),t);if(t!=null&&t.useFixedWeeks){var a=DL(e,t);if(a<6){var l=s[s.length-1],c=l.dates[l.dates.length-1],u=eg(c,6-a),f=Lw(eg(c,1),u,t);s.push.apply(s,f)}}return s}function u8(e){var t,s,a,l=an(),c=l.locale,u=l.classNames,f=l.styles,h=l.hideHead,p=l.fixedWeeks,x=l.components,v=l.weekStartsOn,b=l.firstWeekContainsDate,w=l.ISOWeek,j=c8(e.displayMonth,{useFixedWeeks:!!p,ISOWeek:w,locale:c,weekStartsOn:v,firstWeekContainsDate:b}),N=(t=x==null?void 0:x.Head)!==null&&t!==void 0?t:SI,_=(s=x==null?void 0:x.Row)!==null&&s!==void 0?s:o8,R=(a=x==null?void 0:x.Footer)!==null&&a!==void 0?a:jI;return n.jsxs("table",{id:e.id,className:u.table,style:f.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!h&&n.jsx(N,{}),n.jsx("tbody",{className:u.tbody,style:f.tbody,children:j.map(function(E){return n.jsx(_,{displayMonth:e.displayMonth,dates:E.dates,weekNumber:E.weekNumber},E.weekNumber)})}),n.jsx(R,{displayMonth:e.displayMonth})]})}function d8(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var f8=d8()?m.useLayoutEffect:m.useEffect,bp=!1,h8=0;function Iw(){return"react-day-picker-".concat(++h8)}function m8(e){var t,s=e??(bp?Iw():null),a=m.useState(s),l=a[0],c=a[1];return f8(function(){l===null&&c(Iw())},[]),m.useEffect(function(){bp===!1&&(bp=!0)},[]),(t=e??l)!==null&&t!==void 0?t:void 0}function p8(e){var t,s,a=an(),l=a.dir,c=a.classNames,u=a.styles,f=a.components,h=Qc().displayMonths,p=m8(a.id?"".concat(a.id,"-").concat(e.displayIndex):void 0),x=a.id?"".concat(a.id,"-grid-").concat(e.displayIndex):void 0,v=[c.month],b=u.month,w=e.displayIndex===0,j=e.displayIndex===h.length-1,N=!w&&!j;l==="rtl"&&(t=[w,j],j=t[0],w=t[1]),w&&(v.push(c.caption_start),b=Ze(Ze({},b),u.caption_start)),j&&(v.push(c.caption_end),b=Ze(Ze({},b),u.caption_end)),N&&(v.push(c.caption_between),b=Ze(Ze({},b),u.caption_between));var _=(s=f==null?void 0:f.Caption)!==null&&s!==void 0?s:wI;return n.jsxs("div",{className:v.join(" "),style:b,children:[n.jsx(_,{id:p,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),n.jsx(u8,{id:x,"aria-labelledby":p,displayMonth:e.displayMonth})]},e.displayIndex)}function g8(e){var t=an(),s=t.classNames,a=t.styles;return n.jsx("div",{className:s.months,style:a.months,children:e.children})}function x8(e){var t,s,a=e.initialProps,l=an(),c=Nx(),u=Qc(),f=m.useState(!1),h=f[0],p=f[1];m.useEffect(function(){l.initialFocus&&c.focusTarget&&(h||(c.focus(c.focusTarget),p(!0)))},[l.initialFocus,h,c.focus,c.focusTarget,c]);var x=[l.classNames.root,l.className];l.numberOfMonths>1&&x.push(l.classNames.multiple_months),l.showWeekNumber&&x.push(l.classNames.with_weeknumber);var v=Ze(Ze({},l.styles.root),l.style),b=Object.keys(a).filter(function(j){return j.startsWith("data-")}).reduce(function(j,N){var _;return Ze(Ze({},j),(_={},_[N]=a[N],_))},{}),w=(s=(t=a.components)===null||t===void 0?void 0:t.Months)!==null&&s!==void 0?s:g8;return n.jsx("div",Ze({className:x.join(" "),style:v,dir:l.dir,id:l.id,nonce:a.nonce,title:a.title,lang:a.lang},b,{children:n.jsx(w,{children:u.displayMonths.map(function(j,N){return n.jsx(p8,{displayIndex:N,displayMonth:j},N)})})}))}function v8(e){var t=e.children,s=H6(e,["children"]);return n.jsx(lI,{initialProps:s,children:n.jsx(xI,{children:n.jsx(ZI,{initialProps:s,children:n.jsx(CI,{initialProps:s,children:n.jsx(MI,{initialProps:s,children:n.jsx(zI,{children:n.jsx(KI,{children:t})})})})})})})}function y8(e){return n.jsx(v8,Ze({},e,{children:n.jsx(x8,{initialProps:e})}))}function uS({className:e,classNames:t,showOutsideDays:s=!0,...a}){return n.jsx(y8,{showOutsideDays:s,className:Me("p-3",e),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:Me(Hl({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Me("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md",a.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Me(Hl({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:l,...c})=>n.jsx(P1,{className:Me("size-4",l),...c}),IconRight:({className:l,...c})=>n.jsx(L1,{className:Me("size-4",l),...c})},...a})}function zw(e,[t,s]){return Math.min(s,Math.max(t,e))}function Sx(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var b8=[" ","Enter","ArrowUp","ArrowDown"],w8=[" ","Enter"],Zc="Select",[kf,Df,j8]=kg(Zc),[so,gH]=ur(Zc,[j8,Za]),Of=Za(),[N8,ti]=so(Zc),[_8,S8]=so(Zc),dS=e=>{const{__scopeSelect:t,children:s,open:a,defaultOpen:l,onOpenChange:c,value:u,defaultValue:f,onValueChange:h,dir:p,name:x,autoComplete:v,disabled:b,required:w,form:j}=e,N=Of(t),[_,R]=m.useState(null),[E,C]=m.useState(null),[M,T]=m.useState(!1),z=sf(p),[q=!1,F]=Ya({prop:a,defaultProp:l,onChange:c}),[U,G]=Ya({prop:u,defaultProp:f,onChange:h}),ce=m.useRef(null),re=_?j||!!_.closest("form"):!0,[O,ie]=m.useState(new Set),ue=Array.from(O).map(P=>P.props.value).join(";");return n.jsx(qg,{...N,children:n.jsxs(N8,{required:w,scope:t,trigger:_,onTriggerChange:R,valueNode:E,onValueNodeChange:C,valueNodeHasChildren:M,onValueNodeHasChildrenChange:T,contentId:Cs(),value:U,onValueChange:G,open:q,onOpenChange:F,dir:z,triggerPointerDownPosRef:ce,disabled:b,children:[n.jsx(kf.Provider,{scope:t,children:n.jsx(_8,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback(P=>{ie(X=>new Set(X).add(P))},[]),onNativeOptionRemove:m.useCallback(P=>{ie(X=>{const V=new Set(X);return V.delete(P),V})},[]),children:s})}),re?n.jsxs(OS,{"aria-hidden":!0,required:w,tabIndex:-1,name:x,autoComplete:v,value:U,onChange:P=>G(P.target.value),disabled:b,form:j,children:[U===void 0?n.jsx("option",{value:""}):null,Array.from(O)]},ue):null]})})};dS.displayName=Zc;var fS="SelectTrigger",hS=m.forwardRef((e,t)=>{const{__scopeSelect:s,disabled:a=!1,...l}=e,c=Of(s),u=ti(fS,s),f=u.disabled||a,h=_t(t,u.onTriggerChange),p=Df(s),x=m.useRef("touch"),[v,b,w]=PS(N=>{const _=p().filter(C=>!C.disabled),R=_.find(C=>C.value===u.value),E=LS(_,N,R);E!==void 0&&u.onValueChange(E.value)}),j=N=>{f||(u.onOpenChange(!0),w()),N&&(u.triggerPointerDownPosRef.current={x:Math.round(N.pageX),y:Math.round(N.pageY)})};return n.jsx(zc,{asChild:!0,...c,children:n.jsx(Je.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:f,"data-disabled":f?"":void 0,"data-placeholder":DS(u.value)?"":void 0,...l,ref:h,onClick:De(l.onClick,N=>{N.currentTarget.focus(),x.current!=="mouse"&&j(N)}),onPointerDown:De(l.onPointerDown,N=>{x.current=N.pointerType;const _=N.target;_.hasPointerCapture(N.pointerId)&&_.releasePointerCapture(N.pointerId),N.button===0&&N.ctrlKey===!1&&N.pointerType==="mouse"&&(j(N),N.preventDefault())}),onKeyDown:De(l.onKeyDown,N=>{const _=v.current!=="";!(N.ctrlKey||N.altKey||N.metaKey)&&N.key.length===1&&b(N.key),!(_&&N.key===" ")&&b8.includes(N.key)&&(j(),N.preventDefault())})})})});hS.displayName=fS;var mS="SelectValue",pS=m.forwardRef((e,t)=>{const{__scopeSelect:s,className:a,style:l,children:c,placeholder:u="",...f}=e,h=ti(mS,s),{onValueNodeHasChildrenChange:p}=h,x=c!==void 0,v=_t(t,h.onValueNodeChange);return Xn(()=>{p(x)},[p,x]),n.jsx(Je.span,{...f,ref:v,style:{pointerEvents:"none"},children:DS(h.value)?n.jsx(n.Fragment,{children:u}):c})});pS.displayName=mS;var E8="SelectIcon",gS=m.forwardRef((e,t)=>{const{__scopeSelect:s,children:a,...l}=e;return n.jsx(Je.span,{"aria-hidden":!0,...l,ref:t,children:a||"▼"})});gS.displayName=E8;var C8="SelectPortal",xS=e=>n.jsx(Uc,{asChild:!0,...e});xS.displayName=C8;var Li="SelectContent",vS=m.forwardRef((e,t)=>{const s=ti(Li,e.__scopeSelect),[a,l]=m.useState();if(Xn(()=>{l(new DocumentFragment)},[]),!s.open){const c=a;return c?Ss.createPortal(n.jsx(yS,{scope:e.__scopeSelect,children:n.jsx(kf.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),c):null}return n.jsx(bS,{...e,ref:t})});vS.displayName=Li;var ss=10,[yS,ni]=so(Li),R8="SelectContentImpl",bS=m.forwardRef((e,t)=>{const{__scopeSelect:s,position:a="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,side:f,sideOffset:h,align:p,alignOffset:x,arrowPadding:v,collisionBoundary:b,collisionPadding:w,sticky:j,hideWhenDetached:N,avoidCollisions:_,...R}=e,E=ti(Li,s),[C,M]=m.useState(null),[T,z]=m.useState(null),q=_t(t,K=>M(K)),[F,U]=m.useState(null),[G,ce]=m.useState(null),re=Df(s),[O,ie]=m.useState(!1),ue=m.useRef(!1);m.useEffect(()=>{if(C)return mf(C)},[C]),af();const P=m.useCallback(K=>{const[ae,...ge]=re().map(Ae=>Ae.ref.current),[de]=ge.slice(-1),Se=document.activeElement;for(const Ae of K)if(Ae===Se||(Ae==null||Ae.scrollIntoView({block:"nearest"}),Ae===ae&&T&&(T.scrollTop=0),Ae===de&&T&&(T.scrollTop=T.scrollHeight),Ae==null||Ae.focus(),document.activeElement!==Se))return},[re,T]),X=m.useCallback(()=>P([F,C]),[P,F,C]);m.useEffect(()=>{O&&X()},[O,X]);const{onOpenChange:V,triggerPointerDownPosRef:te}=E;m.useEffect(()=>{if(C){let K={x:0,y:0};const ae=de=>{var Se,Ae;K={x:Math.abs(Math.round(de.pageX)-(((Se=te.current)==null?void 0:Se.x)??0)),y:Math.abs(Math.round(de.pageY)-(((Ae=te.current)==null?void 0:Ae.y)??0))}},ge=de=>{K.x<=10&&K.y<=10?de.preventDefault():C.contains(de.target)||V(!1),document.removeEventListener("pointermove",ae),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",ge,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",ge,{capture:!0})}}},[C,V,te]),m.useEffect(()=>{const K=()=>V(!1);return window.addEventListener("blur",K),window.addEventListener("resize",K),()=>{window.removeEventListener("blur",K),window.removeEventListener("resize",K)}},[V]);const[k,L]=PS(K=>{const ae=re().filter(Se=>!Se.disabled),ge=ae.find(Se=>Se.ref.current===document.activeElement),de=LS(ae,K,ge);de&&setTimeout(()=>de.ref.current.focus())}),Y=m.useCallback((K,ae,ge)=>{const de=!ue.current&&!ge;(E.value!==void 0&&E.value===ae||de)&&(U(K),de&&(ue.current=!0))},[E.value]),H=m.useCallback(()=>C==null?void 0:C.focus(),[C]),D=m.useCallback((K,ae,ge)=>{const de=!ue.current&&!ge;(E.value!==void 0&&E.value===ae||de)&&ce(K)},[E.value]),I=a==="popper"?ng:wS,$=I===ng?{side:f,sideOffset:h,align:p,alignOffset:x,arrowPadding:v,collisionBoundary:b,collisionPadding:w,sticky:j,hideWhenDetached:N,avoidCollisions:_}:{};return n.jsx(yS,{scope:s,content:C,viewport:T,onViewportChange:z,itemRefCallback:Y,selectedItem:F,onItemLeave:H,itemTextRefCallback:D,focusSelectedItem:X,selectedItemText:G,position:a,isPositioned:O,searchRef:k,children:n.jsx($c,{as:Ts,allowPinchZoom:!0,children:n.jsx(Lc,{asChild:!0,trapped:E.open,onMountAutoFocus:K=>{K.preventDefault()},onUnmountAutoFocus:De(l,K=>{var ae;(ae=E.trigger)==null||ae.focus({preventScroll:!0}),K.preventDefault()}),children:n.jsx(to,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:K=>K.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:n.jsx(I,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:K=>K.preventDefault(),...R,...$,onPlaced:()=>ie(!0),ref:q,style:{display:"flex",flexDirection:"column",outline:"none",...R.style},onKeyDown:De(R.onKeyDown,K=>{const ae=K.ctrlKey||K.altKey||K.metaKey;if(K.key==="Tab"&&K.preventDefault(),!ae&&K.key.length===1&&L(K.key),["ArrowUp","ArrowDown","Home","End"].includes(K.key)){let de=re().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);if(["ArrowUp","End"].includes(K.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(K.key)){const Se=K.target,Ae=de.indexOf(Se);de=de.slice(Ae+1)}setTimeout(()=>P(de)),K.preventDefault()}})})})})})})});bS.displayName=R8;var T8="SelectItemAlignedPosition",wS=m.forwardRef((e,t)=>{const{__scopeSelect:s,onPlaced:a,...l}=e,c=ti(Li,s),u=ni(Li,s),[f,h]=m.useState(null),[p,x]=m.useState(null),v=_t(t,q=>x(q)),b=Df(s),w=m.useRef(!1),j=m.useRef(!0),{viewport:N,selectedItem:_,selectedItemText:R,focusSelectedItem:E}=u,C=m.useCallback(()=>{if(c.trigger&&c.valueNode&&f&&p&&N&&_&&R){const q=c.trigger.getBoundingClientRect(),F=p.getBoundingClientRect(),U=c.valueNode.getBoundingClientRect(),G=R.getBoundingClientRect();if(c.dir!=="rtl"){const Se=G.left-F.left,Ae=U.left-Se,it=q.left-Ae,rt=q.width+it,xe=Math.max(rt,F.width),pe=window.innerWidth-ss,Pe=zw(Ae,[ss,Math.max(ss,pe-xe)]);f.style.minWidth=rt+"px",f.style.left=Pe+"px"}else{const Se=F.right-G.right,Ae=window.innerWidth-U.right-Se,it=window.innerWidth-q.right-Ae,rt=q.width+it,xe=Math.max(rt,F.width),pe=window.innerWidth-ss,Pe=zw(Ae,[ss,Math.max(ss,pe-xe)]);f.style.minWidth=rt+"px",f.style.right=Pe+"px"}const ce=b(),re=window.innerHeight-ss*2,O=N.scrollHeight,ie=window.getComputedStyle(p),ue=parseInt(ie.borderTopWidth,10),P=parseInt(ie.paddingTop,10),X=parseInt(ie.borderBottomWidth,10),V=parseInt(ie.paddingBottom,10),te=ue+P+O+V+X,k=Math.min(_.offsetHeight*5,te),L=window.getComputedStyle(N),Y=parseInt(L.paddingTop,10),H=parseInt(L.paddingBottom,10),D=q.top+q.height/2-ss,I=re-D,$=_.offsetHeight/2,K=_.offsetTop+$,ae=ue+P+K,ge=te-ae;if(ae<=D){const Se=ce.length>0&&_===ce[ce.length-1].ref.current;f.style.bottom="0px";const Ae=p.clientHeight-N.offsetTop-N.offsetHeight,it=Math.max(I,$+(Se?H:0)+Ae+X),rt=ae+it;f.style.height=rt+"px"}else{const Se=ce.length>0&&_===ce[0].ref.current;f.style.top="0px";const it=Math.max(D,ue+N.offsetTop+(Se?Y:0)+$)+ge;f.style.height=it+"px",N.scrollTop=ae-D+N.offsetTop}f.style.margin=`${ss}px 0`,f.style.minHeight=k+"px",f.style.maxHeight=re+"px",a==null||a(),requestAnimationFrame(()=>w.current=!0)}},[b,c.trigger,c.valueNode,f,p,N,_,R,c.dir,a]);Xn(()=>C(),[C]);const[M,T]=m.useState();Xn(()=>{p&&T(window.getComputedStyle(p).zIndex)},[p]);const z=m.useCallback(q=>{q&&j.current===!0&&(C(),E==null||E(),j.current=!1)},[C,E]);return n.jsx(A8,{scope:s,contentWrapper:f,shouldExpandOnScrollRef:w,onScrollButtonChange:z,children:n.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:n.jsx(Je.div,{...l,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});wS.displayName=T8;var M8="SelectPopperPosition",ng=m.forwardRef((e,t)=>{const{__scopeSelect:s,align:a="start",collisionPadding:l=ss,...c}=e,u=Of(s);return n.jsx(uf,{...u,...c,ref:t,align:a,collisionPadding:l,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ng.displayName=M8;var[A8,Ex]=so(Li,{}),rg="SelectViewport",jS=m.forwardRef((e,t)=>{const{__scopeSelect:s,nonce:a,...l}=e,c=ni(rg,s),u=Ex(rg,s),f=_t(t,c.onViewportChange),h=m.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(kf.Slot,{scope:s,children:n.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:f,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:De(l.onScroll,p=>{const x=p.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:b}=u;if(b!=null&&b.current&&v){const w=Math.abs(h.current-x.scrollTop);if(w>0){const j=window.innerHeight-ss*2,N=parseFloat(v.style.minHeight),_=parseFloat(v.style.height),R=Math.max(N,_);if(R<j){const E=R+w,C=Math.min(j,E),M=E-C;v.style.height=C+"px",v.style.bottom==="0px"&&(x.scrollTop=M>0?M:0,v.style.justifyContent="flex-end")}}}h.current=x.scrollTop})})})]})});jS.displayName=rg;var NS="SelectGroup",[k8,D8]=so(NS),O8=m.forwardRef((e,t)=>{const{__scopeSelect:s,...a}=e,l=Cs();return n.jsx(k8,{scope:s,id:l,children:n.jsx(Je.div,{role:"group","aria-labelledby":l,...a,ref:t})})});O8.displayName=NS;var _S="SelectLabel",P8=m.forwardRef((e,t)=>{const{__scopeSelect:s,...a}=e,l=D8(_S,s);return n.jsx(Je.div,{id:l.id,...a,ref:t})});P8.displayName=_S;var Yd="SelectItem",[L8,SS]=so(Yd),ES=m.forwardRef((e,t)=>{const{__scopeSelect:s,value:a,disabled:l=!1,textValue:c,...u}=e,f=ti(Yd,s),h=ni(Yd,s),p=f.value===a,[x,v]=m.useState(c??""),[b,w]=m.useState(!1),j=_t(t,E=>{var C;return(C=h.itemRefCallback)==null?void 0:C.call(h,E,a,l)}),N=Cs(),_=m.useRef("touch"),R=()=>{l||(f.onValueChange(a),f.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(L8,{scope:s,value:a,disabled:l,textId:N,isSelected:p,onItemTextChange:m.useCallback(E=>{v(C=>C||((E==null?void 0:E.textContent)??"").trim())},[]),children:n.jsx(kf.ItemSlot,{scope:s,value:a,disabled:l,textValue:x,children:n.jsx(Je.div,{role:"option","aria-labelledby":N,"data-highlighted":b?"":void 0,"aria-selected":p&&b,"data-state":p?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...u,ref:j,onFocus:De(u.onFocus,()=>w(!0)),onBlur:De(u.onBlur,()=>w(!1)),onClick:De(u.onClick,()=>{_.current!=="mouse"&&R()}),onPointerUp:De(u.onPointerUp,()=>{_.current==="mouse"&&R()}),onPointerDown:De(u.onPointerDown,E=>{_.current=E.pointerType}),onPointerMove:De(u.onPointerMove,E=>{var C;_.current=E.pointerType,l?(C=h.onItemLeave)==null||C.call(h):_.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:De(u.onPointerLeave,E=>{var C;E.currentTarget===document.activeElement&&((C=h.onItemLeave)==null||C.call(h))}),onKeyDown:De(u.onKeyDown,E=>{var M;((M=h.searchRef)==null?void 0:M.current)!==""&&E.key===" "||(w8.includes(E.key)&&R(),E.key===" "&&E.preventDefault())})})})})});ES.displayName=Yd;var uc="SelectItemText",CS=m.forwardRef((e,t)=>{const{__scopeSelect:s,className:a,style:l,...c}=e,u=ti(uc,s),f=ni(uc,s),h=SS(uc,s),p=S8(uc,s),[x,v]=m.useState(null),b=_t(t,R=>v(R),h.onItemTextChange,R=>{var E;return(E=f.itemTextRefCallback)==null?void 0:E.call(f,R,h.value,h.disabled)}),w=x==null?void 0:x.textContent,j=m.useMemo(()=>n.jsx("option",{value:h.value,disabled:h.disabled,children:w},h.value),[h.disabled,h.value,w]),{onNativeOptionAdd:N,onNativeOptionRemove:_}=p;return Xn(()=>(N(j),()=>_(j)),[N,_,j]),n.jsxs(n.Fragment,{children:[n.jsx(Je.span,{id:h.textId,...c,ref:b}),h.isSelected&&u.valueNode&&!u.valueNodeHasChildren?Ss.createPortal(c.children,u.valueNode):null]})});CS.displayName=uc;var RS="SelectItemIndicator",TS=m.forwardRef((e,t)=>{const{__scopeSelect:s,...a}=e;return SS(RS,s).isSelected?n.jsx(Je.span,{"aria-hidden":!0,...a,ref:t}):null});TS.displayName=RS;var sg="SelectScrollUpButton",MS=m.forwardRef((e,t)=>{const s=ni(sg,e.__scopeSelect),a=Ex(sg,e.__scopeSelect),[l,c]=m.useState(!1),u=_t(t,a.onScrollButtonChange);return Xn(()=>{if(s.viewport&&s.isPositioned){let f=function(){const p=h.scrollTop>0;c(p)};const h=s.viewport;return f(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[s.viewport,s.isPositioned]),l?n.jsx(kS,{...e,ref:u,onAutoScroll:()=>{const{viewport:f,selectedItem:h}=s;f&&h&&(f.scrollTop=f.scrollTop-h.offsetHeight)}}):null});MS.displayName=sg;var ag="SelectScrollDownButton",AS=m.forwardRef((e,t)=>{const s=ni(ag,e.__scopeSelect),a=Ex(ag,e.__scopeSelect),[l,c]=m.useState(!1),u=_t(t,a.onScrollButtonChange);return Xn(()=>{if(s.viewport&&s.isPositioned){let f=function(){const p=h.scrollHeight-h.clientHeight,x=Math.ceil(h.scrollTop)<p;c(x)};const h=s.viewport;return f(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[s.viewport,s.isPositioned]),l?n.jsx(kS,{...e,ref:u,onAutoScroll:()=>{const{viewport:f,selectedItem:h}=s;f&&h&&(f.scrollTop=f.scrollTop+h.offsetHeight)}}):null});AS.displayName=ag;var kS=m.forwardRef((e,t)=>{const{__scopeSelect:s,onAutoScroll:a,...l}=e,c=ni("SelectScrollButton",s),u=m.useRef(null),f=Df(s),h=m.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return m.useEffect(()=>()=>h(),[h]),Xn(()=>{var x;const p=f().find(v=>v.ref.current===document.activeElement);(x=p==null?void 0:p.ref.current)==null||x.scrollIntoView({block:"nearest"})},[f]),n.jsx(Je.div,{"aria-hidden":!0,...l,ref:t,style:{flexShrink:0,...l.style},onPointerDown:De(l.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(a,50))}),onPointerMove:De(l.onPointerMove,()=>{var p;(p=c.onItemLeave)==null||p.call(c),u.current===null&&(u.current=window.setInterval(a,50))}),onPointerLeave:De(l.onPointerLeave,()=>{h()})})}),I8="SelectSeparator",z8=m.forwardRef((e,t)=>{const{__scopeSelect:s,...a}=e;return n.jsx(Je.div,{"aria-hidden":!0,...a,ref:t})});z8.displayName=I8;var ig="SelectArrow",U8=m.forwardRef((e,t)=>{const{__scopeSelect:s,...a}=e,l=Of(s),c=ti(ig,s),u=ni(ig,s);return c.open&&u.position==="popper"?n.jsx(df,{...l,...a,ref:t}):null});U8.displayName=ig;function DS(e){return e===""||e===void 0}var OS=m.forwardRef((e,t)=>{const{value:s,...a}=e,l=m.useRef(null),c=_t(t,l),u=Sx(s);return m.useEffect(()=>{const f=l.current,h=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(h,"value").set;if(u!==s&&x){const v=new Event("change",{bubbles:!0});x.call(f,s),f.dispatchEvent(v)}},[u,s]),n.jsx(ox,{asChild:!0,children:n.jsx("select",{...a,ref:c,defaultValue:s})})});OS.displayName="BubbleSelect";function PS(e){const t=Ar(e),s=m.useRef(""),a=m.useRef(0),l=m.useCallback(u=>{const f=s.current+u;t(f),function h(p){s.current=p,window.clearTimeout(a.current),p!==""&&(a.current=window.setTimeout(()=>h(""),1e3))}(f)},[t]),c=m.useCallback(()=>{s.current="",window.clearTimeout(a.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(a.current),[]),[s,l,c]}function LS(e,t,s){const l=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,c=s?e.indexOf(s):-1;let u=$8(e,Math.max(c,0));l.length===1&&(u=u.filter(p=>p!==s));const h=u.find(p=>p.textValue.toLowerCase().startsWith(l.toLowerCase()));return h!==s?h:void 0}function $8(e,t){return e.map((s,a)=>e[(t+a)%e.length])}var B8=dS,H8=hS,q8=pS,F8=gS,V8=xS,Y8=vS,G8=jS,W8=ES,X8=CS,K8=TS,Q8=MS,Z8=AS;function Qn({...e}){return n.jsx(B8,{"data-slot":"select",...e})}function Zn({...e}){return n.jsx(q8,{"data-slot":"select-value",...e})}function Jn({className:e,size:t="default",children:s,...a}){return n.jsxs(H8,{"data-slot":"select-trigger","data-size":t,className:Me("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a,children:[s,n.jsx(F8,{asChild:!0,children:n.jsx(O1,{className:"size-4 opacity-50"})})]})}function er({className:e,children:t,position:s="popper",...a}){return n.jsx(V8,{children:n.jsxs(Y8,{"data-slot":"select-content",className:Me("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[n.jsx(J8,{}),n.jsx(G8,{className:Me("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),n.jsx(ez,{})]})})}function ht({className:e,children:t,...s}){return n.jsxs(W8,{"data-slot":"select-item",className:Me("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...s,children:[n.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:n.jsx(K8,{children:n.jsx(Zg,{className:"size-4"})})}),n.jsx(X8,{children:t})]})}function J8({className:e,...t}){return n.jsx(Q8,{"data-slot":"select-scroll-up-button",className:Me("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(jP,{className:"size-4"})})}function ez({className:e,...t}){return n.jsx(Z8,{"data-slot":"select-scroll-down-button",className:Me("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(O1,{className:"size-4"})})}const Uw=()=>{const e=rr(),{patientId:t}=cr(),s=!!t,[a,l]=m.useState({}),[c,u]=m.useState(!1),[f,h]=m.useState(s),[p,x]=m.useState(null),[v,b]=m.useState(!1),w=m.useCallback(async()=>{if(!s||!t){h(!1);return}h(!0),x(null);try{const{data:E,error:C}=await ne.from("patient").select("*").eq("id",t).single();if(C)throw C;E?l({patient_unique_id:E.patient_unique_id||"",full_name:E.full_name||"",date_of_birth:E.date_of_birth?at(Ft(E.date_of_birth),"yyyy-MM-dd"):void 0,gender:E.gender||void 0,phone:E.phone||""}):x("Patient non trouvé.")}catch(E){console.error("Erreur lors de la récupération du patient:",E),x((E instanceof Error?E.message:null)||"Impossible de charger les données du patient.")}finally{h(!1)}},[s,t]);m.useEffect(()=>{w()},[w]);const j=E=>{const{name:C,value:M}=E.target;l(T=>({...T,[C]:M}))},N=(E,C)=>{l(M=>({...M,[E]:C===""?void 0:C}))},_=E=>{l(C=>({...C,date_of_birth:E?at(E,"yyyy-MM-dd"):void 0})),b(!1)},R=async E=>{var C;if(E.preventDefault(),x(null),!a.patient_unique_id||!a.full_name){x("L'ID Unique et le Nom Complet sont requis.");return}u(!0);try{const M={patient_unique_id:a.patient_unique_id.trim(),full_name:a.full_name.trim(),date_of_birth:a.date_of_birth||null,gender:a.gender||null,phone:((C=a.phone)==null?void 0:C.trim())||null};let T=null;if(s){const{error:z}=await ne.from("patient").update(M).eq("id",t);T=z}else{const{error:z}=await ne.from("patient").insert(M);T=z}if(T)if(T.code==="23505")x("Cet ID Unique de patient existe déjà. Veuillez en utiliser un autre.");else throw T;else e("/patients")}catch(M){console.error(`Erreur lors de ${s?"la mise à jour":"la création"} du patient:`,M),x((M instanceof Error?M.message:null)||`Une erreur est survenue lors de ${s?"la mise à jour":"l'enregistrement"}.`)}finally{u(!1)}};return f?n.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[n.jsx(W,{className:"h-8 w-32"})," ",n.jsxs(Ce,{className:"shadow-md",children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-6 w-3/4"}),n.jsx(W,{className:"h-4 w-full"})]}),n.jsxs(Re,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-10 w-full"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-10 w-full"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-10 w-full"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-10 w-full"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-10 w-full"})]})]})]}),n.jsxs(cs,{className:"border-t px-6 py-4",children:[n.jsx(W,{className:"h-10 w-32"}),n.jsx(W,{className:"h-10 w-24 ml-auto"})]})]})]}):n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsx("div",{className:"mb-4",children:n.jsx(et,{to:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour à la liste"]})})}),n.jsxs(Ce,{className:"shadow-md",children:[n.jsxs(Te,{children:[n.jsxs(ft,{className:"text-xl font-semibold flex items-center gap-2",children:[s?n.jsx(Qr,{className:"h-5 w-5"}):n.jsx(z1,{className:"h-5 w-5"}),s?"Modifier le Patient":"Ajouter un Nouveau Patient"]}),n.jsx(xr,{children:s?"Mettez à jour les informations du patient ci-dessous.":"Remplissez les informations ci-dessous pour enregistrer un nouveau patient."})]}),n.jsxs("form",{onSubmit:R,children:[n.jsxs(Re,{className:"space-y-6",children:[p&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsx(Dt,{children:p})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ie,{htmlFor:"patient_unique_id",className:"font-semibold",children:["ID Unique Patient ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(We,{id:"patient_unique_id",name:"patient_unique_id",placeholder:"Ex: PID-00051",required:!0,value:a.patient_unique_id||"",onChange:j,disabled:c||s,className:Me(s&&"bg-muted/50 cursor-not-allowed")}),s&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"L'ID Unique ne peut pas être modifié."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ie,{htmlFor:"full_name",className:"font-semibold",children:["Nom Complet ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(We,{id:"full_name",name:"full_name",placeholder:"Ex: Jean Dupont",required:!0,value:a.full_name||"",onChange:j,disabled:c})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"hidden space-y-2",children:[n.jsx(Ie,{htmlFor:"date_of_birth",className:"font-semibold",children:"Date de Naissance"}),n.jsxs(Q_,{open:v,onOpenChange:b,children:[n.jsx(Z_,{asChild:!0,children:n.jsxs(ee,{variant:"outline",className:Me("w-full justify-start text-left font-normal h-10",!a.date_of_birth&&"text-muted-foreground"),disabled:c,children:[n.jsx(D1,{className:"mr-2 h-4 w-4"}),a.date_of_birth?at(Ft(a.date_of_birth),"PPP",{locale:qt}):n.jsx("span",{children:"Choisir une date"})]})}),n.jsx(J_,{className:"w-auto p-0",align:"start",children:n.jsx(uS,{mode:"single",selected:a.date_of_birth?Ft(a.date_of_birth):void 0,onSelect:_,initialFocus:!0,locale:qt,captionLayout:"dropdown-buttons",fromYear:1900,toYear:new Date().getFullYear(),disabled:E=>E>new Date||E<new Date("1900-01-01")})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ie,{htmlFor:"gender",className:"font-semibold",children:"Genre"}),n.jsxs(Qn,{name:"gender",value:a.gender||"",onValueChange:E=>N("gender",E),disabled:c,children:[n.jsx(Jn,{id:"gender",className:"h-10",children:n.jsx(Zn,{placeholder:"Sélectionner..."})}),n.jsxs(er,{children:[n.jsx(ht,{value:"Masculin",children:"Masculin"}),n.jsx(ht,{value:"Féminin",children:"Féminin"}),n.jsx(ht,{value:"Autre",children:"Autre"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ie,{htmlFor:"phone",className:"font-semibold",children:"Téléphone"}),n.jsx(We,{id:"phone",name:"phone",type:"tel",placeholder:"Ex: +33 6 12 34 56 78",value:a.phone||"",onChange:j,disabled:c})]})]})]}),n.jsxs(cs,{className:"border-t px-6 py-4 flex justify-between",children:[n.jsx(ee,{type:"submit",disabled:c,children:c?n.jsxs(n.Fragment,{children:[n.jsx(Lt,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Mise à jour...":"Enregistrement..."]}):s?"Mettre à jour le Patient":"Enregistrer le Patient"}),n.jsx(et,{to:"/patients",children:n.jsx(ee,{type:"button",variant:"outline",disabled:c,children:"Annuler"})})]})]})]})]})};var Cx="Checkbox",[tz,xH]=ur(Cx),[nz,rz]=tz(Cx),IS=m.forwardRef((e,t)=>{const{__scopeCheckbox:s,name:a,checked:l,defaultChecked:c,required:u,disabled:f,value:h="on",onCheckedChange:p,form:x,...v}=e,[b,w]=m.useState(null),j=_t(t,M=>w(M)),N=m.useRef(!1),_=b?x||!!b.closest("form"):!0,[R=!1,E]=Ya({prop:l,defaultProp:c,onChange:p}),C=m.useRef(R);return m.useEffect(()=>{const M=b==null?void 0:b.form;if(M){const T=()=>E(C.current);return M.addEventListener("reset",T),()=>M.removeEventListener("reset",T)}},[b,E]),n.jsxs(nz,{scope:s,state:R,disabled:f,children:[n.jsx(Je.button,{type:"button",role:"checkbox","aria-checked":Va(R)?"mixed":R,"aria-required":u,"data-state":$S(R),"data-disabled":f?"":void 0,disabled:f,value:h,...v,ref:j,onKeyDown:De(e.onKeyDown,M=>{M.key==="Enter"&&M.preventDefault()}),onClick:De(e.onClick,M=>{E(T=>Va(T)?!0:!T),_&&(N.current=M.isPropagationStopped(),N.current||M.stopPropagation())})}),_&&n.jsx(sz,{control:b,bubbles:!N.current,name:a,value:h,checked:R,required:u,disabled:f,form:x,style:{transform:"translateX(-100%)"},defaultChecked:Va(c)?!1:c})]})});IS.displayName=Cx;var zS="CheckboxIndicator",US=m.forwardRef((e,t)=>{const{__scopeCheckbox:s,forceMount:a,...l}=e,c=rz(zS,s);return n.jsx(Dr,{present:a||Va(c.state)||c.state===!0,children:n.jsx(Je.span,{"data-state":$S(c.state),"data-disabled":c.disabled?"":void 0,...l,ref:t,style:{pointerEvents:"none",...e.style}})})});US.displayName=zS;var sz=e=>{const{control:t,checked:s,bubbles:a=!0,defaultChecked:l,...c}=e,u=m.useRef(null),f=Sx(s),h=$g(t);m.useEffect(()=>{const x=u.current,v=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(v,"checked").set;if(f!==s&&w){const j=new Event("click",{bubbles:a});x.indeterminate=Va(s),w.call(x,Va(s)?!1:s),x.dispatchEvent(j)}},[f,s,a]);const p=m.useRef(Va(s)?!1:s);return n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l??p.current,...c,tabIndex:-1,ref:u,style:{...e.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Va(e){return e==="indeterminate"}function $S(e){return Va(e)?"indeterminate":e?"checked":"unchecked"}var az=IS,iz=US;function na({className:e,...t}){return n.jsx(az,{"data-slot":"checkbox",className:Me("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(iz,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:n.jsx(Zg,{className:"size-3.5"})})})}var lz="Separator",$w="horizontal",oz=["horizontal","vertical"],BS=m.forwardRef((e,t)=>{const{decorative:s,orientation:a=$w,...l}=e,c=cz(a)?a:$w,f=s?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return n.jsx(Je.div,{"data-orientation":c,...f,...l,ref:t})});BS.displayName=lz;function cz(e){return oz.includes(e)}var uz=BS;function Xr({className:e,orientation:t="horizontal",decorative:s=!0,...a}){return n.jsx(uz,{"data-slot":"separator-root",decorative:s,orientation:t,className:Me("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...a})}const qn=({data:e,isPreview:t})=>{const{labName:s,addressLine1:a,addressLine2:l,cityPostalCode:c,phone:u,email:f,website:h}=e;return n.jsx("div",{className:`flex flex-col items-center text-center gap-2  ${t?"p-4 border rounded-md bg-white min-h-[100px]":" "}`,children:n.jsx("div",{className:" template-heading-shadow w-full py-4 flex items-center justify-center flex-col border-slate-600 border-[1px] shadow-lg mb-2 rounded-[50%] ",children:n.jsxs("div",{className:"text-xs space-y-0.5",children:[n.jsx("p",{className:"font-bold text-sm",children:s||"[Nom Laboratoire]"}),n.jsx("p",{children:a||"[Adresse Ligne 1]"}),l&&n.jsx("p",{children:l}),c&&n.jsx("p",{children:c}),n.jsxs("p",{children:[u&&n.jsxs("span",{children:["Tél : ",u]}),u&&f&&n.jsx("span",{children:" | "}),f&&n.jsxs("span",{children:["Email : ",f]})]}),h&&n.jsx("p",{children:h})]})})})},fa=({data:e,isPreview:t})=>{const{logoUrl:s,labName:a,addressLine1:l,addressLine2:c,cityPostalCode:u,phone:f,email:h,website:p}=e;return n.jsxs("div",{className:`flex flex-col items-center text-center gap-2 ${t?"p-4 border rounded-md bg-white min-h-[100px]":""}`,children:[n.jsx("div",{className:"mb-2",children:n.jsxs(Oc,{className:"h-16 w-16 rounded-md border",children:[n.jsx(rf,{src:s||void 0,alt:"Logo",className:"object-contain"}),n.jsx(Pc,{className:"rounded-md bg-muted",children:n.jsx(yf,{className:"h-8 w-8 text-muted-foreground"})})]})}),n.jsxs("div",{className:"text-xs space-y-0.5",children:[n.jsx("p",{className:"font-bold text-sm",children:a||"[Nom Laboratoire]"}),n.jsx("p",{children:l||"[Adresse Ligne 1]"}),c&&n.jsx("p",{children:c}),u&&n.jsx("p",{children:u}),n.jsxs("p",{children:[f&&n.jsxs("span",{children:["Tél : ",f]}),f&&h&&n.jsx("span",{children:" | "}),h&&n.jsxs("span",{children:["Email : ",h]})]}),p&&n.jsx("p",{children:p})]})]})},ha=({data:e,isPreview:t})=>{const{logoUrl:s,labName:a,addressLine1:l,addressLine2:c,cityPostalCode:u,phone:f,email:h,website:p}=e;return n.jsx("div",{className:`flex flex-col items-center text-center gap-2  ${t?"p-4 border rounded-md bg-white min-h-[100px]":" "}`,children:n.jsxs("div",{className:" w-full py-2 flex items-center flex-col border-slate-600 border-[1px] shadow-lg mb-2 rounded-md ",children:[n.jsx("div",{className:"mb-2",children:n.jsxs(Oc,{className:"h-16 w-16 rounded-md border",children:[n.jsx(rf,{src:s||void 0,alt:"Logo",className:"object-contain"}),n.jsx(Pc,{className:"rounded-md bg-muted",children:n.jsx(yf,{className:"h-8 w-8 text-muted-foreground"})})]})}),n.jsxs("div",{className:"text-xs space-y-0.5",children:[n.jsx("p",{className:"font-bold text-sm",children:a||"[Nom Laboratoire]"}),n.jsx("p",{children:l||"[Adresse Ligne 1]"}),c&&n.jsx("p",{children:c}),u&&n.jsx("p",{children:u}),n.jsxs("p",{children:[f&&n.jsxs("span",{children:["Tél : ",f]}),f&&h&&n.jsx("span",{children:" | "}),h&&n.jsxs("span",{children:["Email : ",h]})]}),p&&n.jsx("p",{children:p})]})]})})},ma=({data:e,isPreview:t})=>{const{logoUrl:s,labName:a,addressLine1:l,addressLine2:c,cityPostalCode:u,phone:f,email:h,website:p}=e;return n.jsx("div",{className:`flex flex-col items-center text-center gap-2  ${t?"p-4 border rounded-md bg-white min-h-[100px]":" "}`,children:n.jsxs("div",{className:" template-heading-shadow w-full py-4 flex items-center justify-center flex-col border-slate-600 border-[1px] shadow-lg mb-2 rounded-[50%] ",children:[n.jsx("div",{className:"mb-2",children:n.jsxs(Oc,{className:"h-16 w-16 rounded-md border",children:[n.jsx(rf,{src:s||void 0,alt:"Logo",className:"object-contain"}),n.jsx(Pc,{className:"rounded-md bg-muted",children:n.jsx(yf,{className:"h-8 w-8 text-muted-foreground"})})]})}),n.jsxs("div",{className:"text-xs space-y-0.5",children:[n.jsx("p",{className:"font-bold text-sm",children:a||"[Nom Laboratoire]"}),n.jsx("p",{children:l||"[Adresse Ligne 1]"}),c&&n.jsx("p",{children:c}),u&&n.jsx("p",{children:u}),n.jsxs("p",{children:[f&&n.jsxs("span",{children:["Tél : ",f]}),f&&h&&n.jsx("span",{children:" | "}),h&&n.jsxs("span",{children:["Email : ",h]})]}),p&&n.jsx("p",{children:p})]})]})})};function wp(e,t){const s=t.trim();try{if(s.startsWith("<")&&!s.startsWith("<=")){const l=parseFloat(s.substring(1).trim().replace(",","."));if(!isNaN(l))return e<l?"in-range":"out-of-range"}else if(s.startsWith(">")&&!s.startsWith(">=")){const l=parseFloat(s.substring(1).trim().replace(",","."));if(!isNaN(l))return e>l?"in-range":"out-of-range"}else if(s.startsWith("<=")||s.startsWith("≤")){const l=parseFloat(s.substring(2).trim().replace(",","."));if(!isNaN(l))return e<=l?"in-range":"out-of-range"}else if(s.startsWith(">=")||s.startsWith("≥")){const l=parseFloat(s.substring(2).trim().replace(",","."));if(!isNaN(l))return e>=l?"in-range":"out-of-range"}else if(s.includes("-")){const l=s.split("-").map(c=>parseFloat(c.trim().replace(",",".")));if(l.length===2&&!isNaN(l[0])&&!isNaN(l[1])){const c=Math.min(l[0],l[1]),u=Math.max(l[0],l[1]);return e>=c&&e<=u?"in-range":"out-of-range"}}const a=parseFloat(s.replace(",","."));if(!isNaN(a))return"indeterminate"}catch(a){console.error("Error parsing single range line:",t,a)}return"indeterminate"}function Bw(e,t,s,a,l){if(l.includes(s)||l.includes(a))return"in-range";if(e==null||t===null||t===void 0||t.trim()==="")return"indeterminate";if(t.trim()==="-"){switch(e.trim().toLocaleLowerCase()){case"0 negatif":case"0 négatif":case"negatif":case"négatif":case"négative":case"neant":case"néant":case"0":return"in-range";case"positif":case"positive":return"out-of-range"}if(!isNaN(parseFloat(e)))return"out-of-range"}const c=parseFloat(e.replace(",",".")),u=t.trim(),f=e.trim().toLowerCase(),h=!isNaN(c);if(u.includes("Homme")||u.includes("HOMME")||u.match(/^(<|>|<=|>=)\s*\d+\s*(y|a|ans?)/i))return"indeterminate";const x=u.match(/^([a-zA-Z\s][a-zA-Z\s\d]*):\s*(.*)$/),v=u.includes(":")&&u.includes(";");if(x&&!v)return"indeterminate";if(u.toLowerCase().includes("negatif:")&&u.toLowerCase().includes("positif:")&&u.includes(";")){const w=u.split(";").map(_=>_.trim()).filter(_=>_.length>0);let j=null,N=null;for(const _ of w){const R=_.match(/^(.+?):\s*(.*)$/);if(R){const E=R[1].trim().toLowerCase(),C=R[2].trim();E==="negatif"?j=C:E==="positif"&&(N=C)}else return"indeterminate"}return!j||!N?(console.warn("NEGATIF/POSITIF format detected, but couldn't extract both range segments."),"indeterminate"):f==="negatif"?"in-range":f==="positif"?"out-of-range":h?wp(c,j)==="in-range"?"in-range":wp(c,N)==="in-range"?"out-of-range":"indeterminate":"indeterminate"}if(!h)return isNaN(parseFloat(u.charAt(0)))&&!["<",">","-"].some(w=>u.includes(w))?f===u.toLowerCase()?"in-range":"out-of-range":"indeterminate";try{return wp(c,u)}catch(w){return console.error("Error parsing simple range string:",u,w),"indeterminate"}}function dz(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return m.useMemo(()=>a=>{t.forEach(l=>l(a))},t)}const Pf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ao(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Rx(e){return"nodeType"in e}function br(e){var t,s;return e?ao(e)?e:Rx(e)&&(t=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?t:window:window}function Tx(e){const{Document:t}=br(e);return e instanceof t}function Jc(e){return ao(e)?!1:e instanceof br(e).HTMLElement}function HS(e){return e instanceof br(e).SVGElement}function io(e){return e?ao(e)?e.document:Rx(e)?Tx(e)?e:Jc(e)||HS(e)?e.ownerDocument:document:document:document}const ks=Pf?m.useLayoutEffect:m.useEffect;function Mx(e){const t=m.useRef(e);return ks(()=>{t.current=e}),m.useCallback(function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return t.current==null?void 0:t.current(...a)},[])}function fz(){const e=m.useRef(null),t=m.useCallback((a,l)=>{e.current=setInterval(a,l)},[]),s=m.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,s]}function Ec(e,t){t===void 0&&(t=[e]);const s=m.useRef(e);return ks(()=>{s.current!==e&&(s.current=e)},t),s}function eu(e,t){const s=m.useRef();return m.useMemo(()=>{const a=e(s.current);return s.current=a,a},[...t])}function Gd(e){const t=Mx(e),s=m.useRef(null),a=m.useCallback(l=>{l!==s.current&&(t==null||t(l,s.current)),s.current=l},[]);return[s,a]}function lg(e){const t=m.useRef();return m.useEffect(()=>{t.current=e},[e]),t.current}let jp={};function tu(e,t){return m.useMemo(()=>{if(t)return t;const s=jp[e]==null?0:jp[e]+1;return jp[e]=s,e+"-"+s},[e,t])}function qS(e){return function(t){for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return a.reduce((c,u)=>{const f=Object.entries(u);for(const[h,p]of f){const x=c[h];x!=null&&(c[h]=x+e*p)}return c},{...t})}}const Ul=qS(1),Cc=qS(-1);function hz(e){return"clientX"in e&&"clientY"in e}function Ax(e){if(!e)return!1;const{KeyboardEvent:t}=br(e.target);return t&&e instanceof t}function mz(e){if(!e)return!1;const{TouchEvent:t}=br(e.target);return t&&e instanceof t}function og(e){if(mz(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:s}=e.touches[0];return{x:t,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:s}=e.changedTouches[0];return{x:t,y:s}}}return hz(e)?{x:e.clientX,y:e.clientY}:null}const Rc=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:s}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:s}=e;return"scaleX("+t+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[Rc.Translate.toString(e),Rc.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:s,easing:a}=e;return t+" "+s+"ms "+a}}}),Hw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function pz(e){return e.matches(Hw)?e:e.querySelector(Hw)}const gz={display:"none"};function xz(e){let{id:t,value:s}=e;return we.createElement("div",{id:t,style:gz},s)}function vz(e){let{id:t,announcement:s,ariaLiveType:a="assertive"}=e;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return we.createElement("div",{id:t,style:l,role:"status","aria-live":a,"aria-atomic":!0},s)}function yz(){const[e,t]=m.useState("");return{announce:m.useCallback(a=>{a!=null&&t(a)},[]),announcement:e}}const FS=m.createContext(null);function bz(e){const t=m.useContext(FS);m.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function wz(){const[e]=m.useState(()=>new Set),t=m.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[m.useCallback(a=>{let{type:l,event:c}=a;e.forEach(u=>{var f;return(f=u[l])==null?void 0:f.call(u,c)})},[e]),t]}const jz={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Nz={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:s}=e;return s?"Draggable item "+t.id+" was moved over droppable area "+s.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:s}=e;return s?"Draggable item "+t.id+" was dropped over droppable area "+s.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function _z(e){let{announcements:t=Nz,container:s,hiddenTextDescribedById:a,screenReaderInstructions:l=jz}=e;const{announce:c,announcement:u}=yz(),f=tu("DndLiveRegion"),[h,p]=m.useState(!1);if(m.useEffect(()=>{p(!0)},[]),bz(m.useMemo(()=>({onDragStart(v){let{active:b}=v;c(t.onDragStart({active:b}))},onDragMove(v){let{active:b,over:w}=v;t.onDragMove&&c(t.onDragMove({active:b,over:w}))},onDragOver(v){let{active:b,over:w}=v;c(t.onDragOver({active:b,over:w}))},onDragEnd(v){let{active:b,over:w}=v;c(t.onDragEnd({active:b,over:w}))},onDragCancel(v){let{active:b,over:w}=v;c(t.onDragCancel({active:b,over:w}))}}),[c,t])),!h)return null;const x=we.createElement(we.Fragment,null,we.createElement(xz,{id:a,value:l.draggable}),we.createElement(vz,{id:f,announcement:u}));return s?Ss.createPortal(x,s):x}var Dn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Dn||(Dn={}));function Wd(){}function qw(e,t){return m.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Sz(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return m.useMemo(()=>[...t].filter(a=>a!=null),[...t])}const fs=Object.freeze({x:0,y:0});function VS(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function YS(e,t){let{data:{value:s}}=e,{data:{value:a}}=t;return s-a}function Ez(e,t){let{data:{value:s}}=e,{data:{value:a}}=t;return a-s}function Fw(e){let{left:t,top:s,height:a,width:l}=e;return[{x:t,y:s},{x:t+l,y:s},{x:t,y:s+a},{x:t+l,y:s+a}]}function GS(e,t){if(!e||e.length===0)return null;const[s]=e;return s[t]}function Vw(e,t,s){return t===void 0&&(t=e.left),s===void 0&&(s=e.top),{x:t+e.width*.5,y:s+e.height*.5}}const Cz=e=>{let{collisionRect:t,droppableRects:s,droppableContainers:a}=e;const l=Vw(t,t.left,t.top),c=[];for(const u of a){const{id:f}=u,h=s.get(f);if(h){const p=VS(Vw(h),l);c.push({id:f,data:{droppableContainer:u,value:p}})}}return c.sort(YS)},Rz=e=>{let{collisionRect:t,droppableRects:s,droppableContainers:a}=e;const l=Fw(t),c=[];for(const u of a){const{id:f}=u,h=s.get(f);if(h){const p=Fw(h),x=l.reduce((b,w,j)=>b+VS(p[j],w),0),v=Number((x/4).toFixed(4));c.push({id:f,data:{droppableContainer:u,value:v}})}}return c.sort(YS)};function Tz(e,t){const s=Math.max(t.top,e.top),a=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),c=Math.min(t.top+t.height,e.top+e.height),u=l-a,f=c-s;if(a<l&&s<c){const h=t.width*t.height,p=e.width*e.height,x=u*f,v=x/(h+p-x);return Number(v.toFixed(4))}return 0}const Mz=e=>{let{collisionRect:t,droppableRects:s,droppableContainers:a}=e;const l=[];for(const c of a){const{id:u}=c,f=s.get(u);if(f){const h=Tz(f,t);h>0&&l.push({id:u,data:{droppableContainer:c,value:h}})}}return l.sort(Ez)};function Az(e,t,s){return{...e,scaleX:t&&s?t.width/s.width:1,scaleY:t&&s?t.height/s.height:1}}function WS(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:fs}function kz(e){return function(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];return l.reduce((u,f)=>({...u,top:u.top+e*f.y,bottom:u.bottom+e*f.y,left:u.left+e*f.x,right:u.right+e*f.x}),{...s})}}const Dz=kz(1);function Oz(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Pz(e,t,s){const a=Oz(t);if(!a)return e;const{scaleX:l,scaleY:c,x:u,y:f}=a,h=e.left-u-(1-l)*parseFloat(s),p=e.top-f-(1-c)*parseFloat(s.slice(s.indexOf(" ")+1)),x=l?e.width/l:e.width,v=c?e.height/c:e.height;return{width:x,height:v,top:p,right:h+x,bottom:p+v,left:h}}const Lz={ignoreTransform:!1};function lo(e,t){t===void 0&&(t=Lz);let s=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:x}=br(e).getComputedStyle(e);p&&(s=Pz(s,p,x))}const{top:a,left:l,width:c,height:u,bottom:f,right:h}=s;return{top:a,left:l,width:c,height:u,bottom:f,right:h}}function Yw(e){return lo(e,{ignoreTransform:!0})}function Iz(e){const t=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:t,bottom:s,width:t,height:s}}function zz(e,t){return t===void 0&&(t=br(e).getComputedStyle(e)),t.position==="fixed"}function Uz(e,t){t===void 0&&(t=br(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const c=t[l];return typeof c=="string"?s.test(c):!1})}function Lf(e,t){const s=[];function a(l){if(t!=null&&s.length>=t||!l)return s;if(Tx(l)&&l.scrollingElement!=null&&!s.includes(l.scrollingElement))return s.push(l.scrollingElement),s;if(!Jc(l)||HS(l)||s.includes(l))return s;const c=br(e).getComputedStyle(l);return l!==e&&Uz(l,c)&&s.push(l),zz(l,c)?s:a(l.parentNode)}return e?a(e):s}function XS(e){const[t]=Lf(e,1);return t??null}function Np(e){return!Pf||!e?null:ao(e)?e:Rx(e)?Tx(e)||e===io(e).scrollingElement?window:Jc(e)?e:null:null}function KS(e){return ao(e)?e.scrollX:e.scrollLeft}function QS(e){return ao(e)?e.scrollY:e.scrollTop}function cg(e){return{x:KS(e),y:QS(e)}}var Hn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Hn||(Hn={}));function ZS(e){return!Pf||!e?!1:e===document.scrollingElement}function JS(e){const t={x:0,y:0},s=ZS(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},l=e.scrollTop<=t.y,c=e.scrollLeft<=t.x,u=e.scrollTop>=a.y,f=e.scrollLeft>=a.x;return{isTop:l,isLeft:c,isBottom:u,isRight:f,maxScroll:a,minScroll:t}}const $z={x:.2,y:.2};function Bz(e,t,s,a,l){let{top:c,left:u,right:f,bottom:h}=s;a===void 0&&(a=10),l===void 0&&(l=$z);const{isTop:p,isBottom:x,isLeft:v,isRight:b}=JS(e),w={x:0,y:0},j={x:0,y:0},N={height:t.height*l.y,width:t.width*l.x};return!p&&c<=t.top+N.height?(w.y=Hn.Backward,j.y=a*Math.abs((t.top+N.height-c)/N.height)):!x&&h>=t.bottom-N.height&&(w.y=Hn.Forward,j.y=a*Math.abs((t.bottom-N.height-h)/N.height)),!b&&f>=t.right-N.width?(w.x=Hn.Forward,j.x=a*Math.abs((t.right-N.width-f)/N.width)):!v&&u<=t.left+N.width&&(w.x=Hn.Backward,j.x=a*Math.abs((t.left+N.width-u)/N.width)),{direction:w,speed:j}}function Hz(e){if(e===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:t,left:s,right:a,bottom:l}=e.getBoundingClientRect();return{top:t,left:s,right:a,bottom:l,width:e.clientWidth,height:e.clientHeight}}function eE(e){return e.reduce((t,s)=>Ul(t,cg(s)),fs)}function qz(e){return e.reduce((t,s)=>t+KS(s),0)}function Fz(e){return e.reduce((t,s)=>t+QS(s),0)}function Vz(e,t){if(t===void 0&&(t=lo),!e)return;const{top:s,left:a,bottom:l,right:c}=t(e);XS(e)&&(l<=0||c<=0||s>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Yz=[["x",["left","right"],qz],["y",["top","bottom"],Fz]];class kx{constructor(t,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=Lf(s),l=eE(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[c,u,f]of Yz)for(const h of u)Object.defineProperty(this,h,{get:()=>{const p=f(a),x=l[c]-p;return this.rect[h]+x},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class pc{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...s)})},this.target=t}add(t,s,a){var l;(l=this.target)==null||l.addEventListener(t,s,a),this.listeners.push([t,s,a])}}function Gz(e){const{EventTarget:t}=br(e);return e instanceof t?e:io(e)}function _p(e,t){const s=Math.abs(e.x),a=Math.abs(e.y);return typeof t=="number"?Math.sqrt(s**2+a**2)>t:"x"in t&&"y"in t?s>t.x&&a>t.y:"x"in t?s>t.x:"y"in t?a>t.y:!1}var Gr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Gr||(Gr={}));function Gw(e){e.preventDefault()}function Wz(e){e.stopPropagation()}var Ct;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ct||(Ct={}));const tE={start:[Ct.Space,Ct.Enter],cancel:[Ct.Esc],end:[Ct.Space,Ct.Enter,Ct.Tab]},Xz=(e,t)=>{let{currentCoordinates:s}=t;switch(e.code){case Ct.Right:return{...s,x:s.x+25};case Ct.Left:return{...s,x:s.x-25};case Ct.Down:return{...s,y:s.y+25};case Ct.Up:return{...s,y:s.y-25}}};class Dx{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:s}}=t;this.props=t,this.listeners=new pc(io(s)),this.windowListeners=new pc(br(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Gr.Resize,this.handleCancel),this.windowListeners.add(Gr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Gr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:s}=this.props,a=t.node.current;a&&Vz(a),s(fs)}handleKeyDown(t){if(Ax(t)){const{active:s,context:a,options:l}=this.props,{keyboardCodes:c=tE,coordinateGetter:u=Xz,scrollBehavior:f="smooth"}=l,{code:h}=t;if(c.end.includes(h)){this.handleEnd(t);return}if(c.cancel.includes(h)){this.handleCancel(t);return}const{collisionRect:p}=a.current,x=p?{x:p.left,y:p.top}:fs;this.referenceCoordinates||(this.referenceCoordinates=x);const v=u(t,{active:s,context:a.current,currentCoordinates:x});if(v){const b=Cc(v,x),w={x:0,y:0},{scrollableAncestors:j}=a.current;for(const N of j){const _=t.code,{isTop:R,isRight:E,isLeft:C,isBottom:M,maxScroll:T,minScroll:z}=JS(N),q=Hz(N),F={x:Math.min(_===Ct.Right?q.right-q.width/2:q.right,Math.max(_===Ct.Right?q.left:q.left+q.width/2,v.x)),y:Math.min(_===Ct.Down?q.bottom-q.height/2:q.bottom,Math.max(_===Ct.Down?q.top:q.top+q.height/2,v.y))},U=_===Ct.Right&&!E||_===Ct.Left&&!C,G=_===Ct.Down&&!M||_===Ct.Up&&!R;if(U&&F.x!==v.x){const ce=N.scrollLeft+b.x,re=_===Ct.Right&&ce<=T.x||_===Ct.Left&&ce>=z.x;if(re&&!b.y){N.scrollTo({left:ce,behavior:f});return}re?w.x=N.scrollLeft-ce:w.x=_===Ct.Right?N.scrollLeft-T.x:N.scrollLeft-z.x,w.x&&N.scrollBy({left:-w.x,behavior:f});break}else if(G&&F.y!==v.y){const ce=N.scrollTop+b.y,re=_===Ct.Down&&ce<=T.y||_===Ct.Up&&ce>=z.y;if(re&&!b.x){N.scrollTo({top:ce,behavior:f});return}re?w.y=N.scrollTop-ce:w.y=_===Ct.Down?N.scrollTop-T.y:N.scrollTop-z.y,w.y&&N.scrollBy({top:-w.y,behavior:f});break}}this.handleMove(t,Ul(Cc(v,this.referenceCoordinates),w))}}}handleMove(t,s){const{onMove:a}=this.props;t.preventDefault(),a(s)}handleEnd(t){const{onEnd:s}=this.props;t.preventDefault(),this.detach(),s()}handleCancel(t){const{onCancel:s}=this.props;t.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Dx.activators=[{eventName:"onKeyDown",handler:(e,t,s)=>{let{keyboardCodes:a=tE,onActivation:l}=t,{active:c}=s;const{code:u}=e.nativeEvent;if(a.start.includes(u)){const f=c.activatorNode.current;return f&&e.target!==f?!1:(e.preventDefault(),l==null||l({event:e.nativeEvent}),!0)}return!1}}];function Ww(e){return!!(e&&"distance"in e)}function Xw(e){return!!(e&&"delay"in e)}class Ox{constructor(t,s,a){var l;a===void 0&&(a=Gz(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=s;const{event:c}=t,{target:u}=c;this.props=t,this.events=s,this.document=io(u),this.documentListeners=new pc(this.document),this.listeners=new pc(a),this.windowListeners=new pc(br(u)),this.initialCoordinates=(l=og(c))!=null?l:fs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:s,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Gr.Resize,this.handleCancel),this.windowListeners.add(Gr.DragStart,Gw),this.windowListeners.add(Gr.VisibilityChange,this.handleCancel),this.windowListeners.add(Gr.ContextMenu,Gw),this.documentListeners.add(Gr.Keydown,this.handleKeydown),s){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Xw(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(Ww(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,s){const{active:a,onPending:l}=this.props;l(a,t,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:t}=this,{onStart:s}=this.props;t&&(this.activated=!0,this.documentListeners.add(Gr.Click,Wz,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Gr.SelectionChange,this.removeTextSelection),s(t))}handleMove(t){var s;const{activated:a,initialCoordinates:l,props:c}=this,{onMove:u,options:{activationConstraint:f}}=c;if(!l)return;const h=(s=og(t))!=null?s:fs,p=Cc(l,h);if(!a&&f){if(Ww(f)){if(f.tolerance!=null&&_p(p,f.tolerance))return this.handleCancel();if(_p(p,f.distance))return this.handleStart()}if(Xw(f)&&_p(p,f.tolerance))return this.handleCancel();this.handlePending(f,p);return}t.cancelable&&t.preventDefault(),u(h)}handleEnd(){const{onAbort:t,onEnd:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleCancel(){const{onAbort:t,onCancel:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleKeydown(t){t.code===Ct.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Kz={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Px extends Ox{constructor(t){const{event:s}=t,a=io(s.target);super(t,Kz,a)}}Px.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:a}=t;return!s.isPrimary||s.button!==0?!1:(a==null||a({event:s}),!0)}}];const Qz={move:{name:"mousemove"},end:{name:"mouseup"}};var ug;(function(e){e[e.RightClick=2]="RightClick"})(ug||(ug={}));class Zz extends Ox{constructor(t){super(t,Qz,io(t.event.target))}}Zz.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:a}=t;return s.button===ug.RightClick?!1:(a==null||a({event:s}),!0)}}];const Sp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Jz extends Ox{constructor(t){super(t,Sp)}static setup(){return window.addEventListener(Sp.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Sp.move.name,t)};function t(){}}}Jz.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:a}=t;const{touches:l}=s;return l.length>1?!1:(a==null||a({event:s}),!0)}}];var gc;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(gc||(gc={}));var Xd;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Xd||(Xd={}));function eU(e){let{acceleration:t,activator:s=gc.Pointer,canScroll:a,draggingRect:l,enabled:c,interval:u=5,order:f=Xd.TreeOrder,pointerCoordinates:h,scrollableAncestors:p,scrollableAncestorRects:x,delta:v,threshold:b}=e;const w=nU({delta:v,disabled:!c}),[j,N]=fz(),_=m.useRef({x:0,y:0}),R=m.useRef({x:0,y:0}),E=m.useMemo(()=>{switch(s){case gc.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case gc.DraggableRect:return l}},[s,l,h]),C=m.useRef(null),M=m.useCallback(()=>{const z=C.current;if(!z)return;const q=_.current.x*R.current.x,F=_.current.y*R.current.y;z.scrollBy(q,F)},[]),T=m.useMemo(()=>f===Xd.TreeOrder?[...p].reverse():p,[f,p]);m.useEffect(()=>{if(!c||!p.length||!E){N();return}for(const z of T){if((a==null?void 0:a(z))===!1)continue;const q=p.indexOf(z),F=x[q];if(!F)continue;const{direction:U,speed:G}=Bz(z,F,E,t,b);for(const ce of["x","y"])w[ce][U[ce]]||(G[ce]=0,U[ce]=0);if(G.x>0||G.y>0){N(),C.current=z,j(M,u),_.current=G,R.current=U;return}}_.current={x:0,y:0},R.current={x:0,y:0},N()},[t,M,a,N,c,u,JSON.stringify(E),JSON.stringify(w),j,p,T,x,JSON.stringify(b)])}const tU={x:{[Hn.Backward]:!1,[Hn.Forward]:!1},y:{[Hn.Backward]:!1,[Hn.Forward]:!1}};function nU(e){let{delta:t,disabled:s}=e;const a=lg(t);return eu(l=>{if(s||!a||!l)return tU;const c={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[Hn.Backward]:l.x[Hn.Backward]||c.x===-1,[Hn.Forward]:l.x[Hn.Forward]||c.x===1},y:{[Hn.Backward]:l.y[Hn.Backward]||c.y===-1,[Hn.Forward]:l.y[Hn.Forward]||c.y===1}}},[s,t,a])}function rU(e,t){const s=t!=null?e.get(t):void 0,a=s?s.node.current:null;return eu(l=>{var c;return t==null?null:(c=a??l)!=null?c:null},[a,t])}function sU(e,t){return m.useMemo(()=>e.reduce((s,a)=>{const{sensor:l}=a,c=l.activators.map(u=>({eventName:u.eventName,handler:t(u.handler,a)}));return[...s,...c]},[]),[e,t])}var Tc;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Tc||(Tc={}));var dg;(function(e){e.Optimized="optimized"})(dg||(dg={}));const Kw=new Map;function aU(e,t){let{dragging:s,dependencies:a,config:l}=t;const[c,u]=m.useState(null),{frequency:f,measure:h,strategy:p}=l,x=m.useRef(e),v=_(),b=Ec(v),w=m.useCallback(function(R){R===void 0&&(R=[]),!b.current&&u(E=>E===null?R:E.concat(R.filter(C=>!E.includes(C))))},[b]),j=m.useRef(null),N=eu(R=>{if(v&&!s)return Kw;if(!R||R===Kw||x.current!==e||c!=null){const E=new Map;for(let C of e){if(!C)continue;if(c&&c.length>0&&!c.includes(C.id)&&C.rect.current){E.set(C.id,C.rect.current);continue}const M=C.node.current,T=M?new kx(h(M),M):null;C.rect.current=T,T&&E.set(C.id,T)}return E}return R},[e,c,s,v,h]);return m.useEffect(()=>{x.current=e},[e]),m.useEffect(()=>{v||w()},[s,v]),m.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),m.useEffect(()=>{v||typeof f!="number"||j.current!==null||(j.current=setTimeout(()=>{w(),j.current=null},f))},[f,v,w,...a]),{droppableRects:N,measureDroppableContainers:w,measuringScheduled:c!=null};function _(){switch(p){case Tc.Always:return!1;case Tc.BeforeDragging:return s;default:return!s}}}function nE(e,t){return eu(s=>e?s||(typeof t=="function"?t(e):e):null,[t,e])}function iU(e,t){return nE(e,t)}function lU(e){let{callback:t,disabled:s}=e;const a=Mx(t),l=m.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(a)},[a,s]);return m.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function If(e){let{callback:t,disabled:s}=e;const a=Mx(t),l=m.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(a)},[s]);return m.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function oU(e){return new kx(lo(e),e)}function Qw(e,t,s){t===void 0&&(t=oU);const[a,l]=m.useState(null);function c(){l(h=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=h??s)!=null?p:null}const x=t(e);return JSON.stringify(h)===JSON.stringify(x)?h:x})}const u=lU({callback(h){if(e)for(const p of h){const{type:x,target:v}=p;if(x==="childList"&&v instanceof HTMLElement&&v.contains(e)){c();break}}}}),f=If({callback:c});return ks(()=>{c(),e?(f==null||f.observe(e),u==null||u.observe(document.body,{childList:!0,subtree:!0})):(f==null||f.disconnect(),u==null||u.disconnect())},[e]),a}function cU(e){const t=nE(e);return WS(e,t)}const Zw=[];function uU(e){const t=m.useRef(e),s=eu(a=>e?a&&a!==Zw&&e&&t.current&&e.parentNode===t.current.parentNode?a:Lf(e):Zw,[e]);return m.useEffect(()=>{t.current=e},[e]),s}function dU(e){const[t,s]=m.useState(null),a=m.useRef(e),l=m.useCallback(c=>{const u=Np(c.target);u&&s(f=>f?(f.set(u,cg(u)),new Map(f)):null)},[]);return m.useEffect(()=>{const c=a.current;if(e!==c){u(c);const f=e.map(h=>{const p=Np(h);return p?(p.addEventListener("scroll",l,{passive:!0}),[p,cg(p)]):null}).filter(h=>h!=null);s(f.length?new Map(f):null),a.current=e}return()=>{u(e),u(c)};function u(f){f.forEach(h=>{const p=Np(h);p==null||p.removeEventListener("scroll",l)})}},[l,e]),m.useMemo(()=>e.length?t?Array.from(t.values()).reduce((c,u)=>Ul(c,u),fs):eE(e):fs,[e,t])}function Jw(e,t){t===void 0&&(t=[]);const s=m.useRef(null);return m.useEffect(()=>{s.current=null},t),m.useEffect(()=>{const a=e!==fs;a&&!s.current&&(s.current=e),!a&&s.current&&(s.current=null)},[e]),s.current?Cc(e,s.current):fs}function fU(e){m.useEffect(()=>{if(!Pf)return;const t=e.map(s=>{let{sensor:a}=s;return a.setup==null?void 0:a.setup()});return()=>{for(const s of t)s==null||s()}},e.map(t=>{let{sensor:s}=t;return s}))}function hU(e,t){return m.useMemo(()=>e.reduce((s,a)=>{let{eventName:l,handler:c}=a;return s[l]=u=>{c(u,t)},s},{}),[e,t])}function rE(e){return m.useMemo(()=>e?Iz(e):null,[e])}const ej=[];function mU(e,t){t===void 0&&(t=lo);const[s]=e,a=rE(s?br(s):null),[l,c]=m.useState(ej);function u(){c(()=>e.length?e.map(h=>ZS(h)?a:new kx(t(h),h)):ej)}const f=If({callback:u});return ks(()=>{f==null||f.disconnect(),u(),e.forEach(h=>f==null?void 0:f.observe(h))},[e]),l}function pU(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Jc(t)?t:e}function gU(e){let{measure:t}=e;const[s,a]=m.useState(null),l=m.useCallback(p=>{for(const{target:x}of p)if(Jc(x)){a(v=>{const b=t(x);return v?{...v,width:b.width,height:b.height}:b});break}},[t]),c=If({callback:l}),u=m.useCallback(p=>{const x=pU(p);c==null||c.disconnect(),x&&(c==null||c.observe(x)),a(x?t(x):null)},[t,c]),[f,h]=Gd(u);return m.useMemo(()=>({nodeRef:f,rect:s,setRef:h}),[s,f,h])}const xU=[{sensor:Px,options:{}},{sensor:Dx,options:{}}],vU={current:{}},Dd={draggable:{measure:Yw},droppable:{measure:Yw,strategy:Tc.WhileDragging,frequency:dg.Optimized},dragOverlay:{measure:lo}};class xc extends Map{get(t){var s;return t!=null&&(s=super.get(t))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:s}=t;return!s})}getNodeFor(t){var s,a;return(s=(a=this.get(t))==null?void 0:a.node.current)!=null?s:void 0}}const yU={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new xc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Wd},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Dd,measureDroppableContainers:Wd,windowRect:null,measuringScheduled:!1},bU={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Wd,draggableNodes:new Map,over:null,measureDroppableContainers:Wd},zf=m.createContext(bU),sE=m.createContext(yU);function wU(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new xc}}}function jU(e,t){switch(t.type){case Dn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Dn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Dn.DragEnd:case Dn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Dn.RegisterDroppable:{const{element:s}=t,{id:a}=s,l=new xc(e.droppable.containers);return l.set(a,s),{...e,droppable:{...e.droppable,containers:l}}}case Dn.SetDroppableDisabled:{const{id:s,key:a,disabled:l}=t,c=e.droppable.containers.get(s);if(!c||a!==c.key)return e;const u=new xc(e.droppable.containers);return u.set(s,{...c,disabled:l}),{...e,droppable:{...e.droppable,containers:u}}}case Dn.UnregisterDroppable:{const{id:s,key:a}=t,l=e.droppable.containers.get(s);if(!l||a!==l.key)return e;const c=new xc(e.droppable.containers);return c.delete(s),{...e,droppable:{...e.droppable,containers:c}}}default:return e}}function NU(e){let{disabled:t}=e;const{active:s,activatorEvent:a,draggableNodes:l}=m.useContext(zf),c=lg(a),u=lg(s==null?void 0:s.id);return m.useEffect(()=>{if(!t&&!a&&c&&u!=null){if(!Ax(c)||document.activeElement===c.target)return;const f=l.get(u);if(!f)return;const{activatorNode:h,node:p}=f;if(!h.current&&!p.current)return;requestAnimationFrame(()=>{for(const x of[h.current,p.current]){if(!x)continue;const v=pz(x);if(v){v.focus();break}}})}},[a,t,l,u,c]),null}function _U(e,t){let{transform:s,...a}=t;return e!=null&&e.length?e.reduce((l,c)=>c({transform:l,...a}),s):s}function SU(e){return m.useMemo(()=>({draggable:{...Dd.draggable,...e==null?void 0:e.draggable},droppable:{...Dd.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Dd.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function EU(e){let{activeNode:t,measure:s,initialRect:a,config:l=!0}=e;const c=m.useRef(!1),{x:u,y:f}=typeof l=="boolean"?{x:l,y:l}:l;ks(()=>{if(!u&&!f||!t){c.current=!1;return}if(c.current||!a)return;const p=t==null?void 0:t.node.current;if(!p||p.isConnected===!1)return;const x=s(p),v=WS(x,a);if(u||(v.x=0),f||(v.y=0),c.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const b=XS(p);b&&b.scrollBy({top:v.y,left:v.x})}},[t,u,f,a,s])}const aE=m.createContext({...fs,scaleX:1,scaleY:1});var qa;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(qa||(qa={}));const CU=m.memo(function(t){var s,a,l,c;let{id:u,accessibility:f,autoScroll:h=!0,children:p,sensors:x=xU,collisionDetection:v=Mz,measuring:b,modifiers:w,...j}=t;const N=m.useReducer(jU,void 0,wU),[_,R]=N,[E,C]=wz(),[M,T]=m.useState(qa.Uninitialized),z=M===qa.Initialized,{draggable:{active:q,nodes:F,translate:U},droppable:{containers:G}}=_,ce=q!=null?F.get(q):null,re=m.useRef({initial:null,translated:null}),O=m.useMemo(()=>{var Xt;return q!=null?{id:q,data:(Xt=ce==null?void 0:ce.data)!=null?Xt:vU,rect:re}:null},[q,ce]),ie=m.useRef(null),[ue,P]=m.useState(null),[X,V]=m.useState(null),te=Ec(j,Object.values(j)),k=tu("DndDescribedBy",u),L=m.useMemo(()=>G.getEnabled(),[G]),Y=SU(b),{droppableRects:H,measureDroppableContainers:D,measuringScheduled:I}=aU(L,{dragging:z,dependencies:[U.x,U.y],config:Y.droppable}),$=rU(F,q),K=m.useMemo(()=>X?og(X):null,[X]),ae=Or(),ge=iU($,Y.draggable.measure);EU({activeNode:q!=null?F.get(q):null,config:ae.layoutShiftCompensation,initialRect:ge,measure:Y.draggable.measure});const de=Qw($,Y.draggable.measure,ge),Se=Qw($?$.parentElement:null),Ae=m.useRef({activatorEvent:null,active:null,activeNode:$,collisionRect:null,collisions:null,droppableRects:H,draggableNodes:F,draggingNode:null,draggingNodeRect:null,droppableContainers:G,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),it=G.getNodeFor((s=Ae.current.over)==null?void 0:s.id),rt=gU({measure:Y.dragOverlay.measure}),xe=(a=rt.nodeRef.current)!=null?a:$,pe=z?(l=rt.rect)!=null?l:de:null,Pe=!!(rt.nodeRef.current&&rt.rect),be=cU(Pe?null:de),Ne=rE(xe?br(xe):null),Oe=uU(z?it??$:null),Xe=mU(Oe),Fe=_U(w,{transform:{x:U.x-be.x,y:U.y-be.y,scaleX:1,scaleY:1},activatorEvent:X,active:O,activeNodeRect:de,containerNodeRect:Se,draggingNodeRect:pe,over:Ae.current.over,overlayNodeRect:rt.rect,scrollableAncestors:Oe,scrollableAncestorRects:Xe,windowRect:Ne}),wt=K?Ul(K,U):null,St=dU(Oe),Vt=Jw(St),Be=Jw(St,[de]),nt=Ul(Fe,Vt),en=pe?Dz(pe,Fe):null,On=O&&en?v({active:O,collisionRect:en,droppableRects:H,droppableContainers:L,pointerCoordinates:wt}):null,Tn=GS(On,"id"),[pn,cn]=m.useState(null),tn=Pe?Fe:Ul(Fe,Be),Yt=Az(tn,(c=pn==null?void 0:pn.rect)!=null?c:null,de),sr=m.useRef(null),Mn=m.useCallback((Xt,lt)=>{let{sensor:J,options:ve}=lt;if(ie.current==null)return;const _e=F.get(ie.current);if(!_e)return;const ke=Xt.nativeEvent,He=new J({active:ie.current,activeNode:_e,event:ke,options:ve,context:Ae,onAbort(Ge){if(!F.get(Ge))return;const{onDragAbort:ct}=te.current,xt={id:Ge};ct==null||ct(xt),E({type:"onDragAbort",event:xt})},onPending(Ge,mt,ct,xt){if(!F.get(Ge))return;const{onDragPending:Ut}=te.current,Zt={id:Ge,constraint:mt,initialCoordinates:ct,offset:xt};Ut==null||Ut(Zt),E({type:"onDragPending",event:Zt})},onStart(Ge){const mt=ie.current;if(mt==null)return;const ct=F.get(mt);if(!ct)return;const{onDragStart:xt}=te.current,Ot={activatorEvent:ke,active:{id:mt,data:ct.data,rect:re}};Ss.unstable_batchedUpdates(()=>{xt==null||xt(Ot),T(qa.Initializing),R({type:Dn.DragStart,initialCoordinates:Ge,active:mt}),E({type:"onDragStart",event:Ot}),P(sr.current),V(ke)})},onMove(Ge){R({type:Dn.DragMove,coordinates:Ge})},onEnd:ot(Dn.DragEnd),onCancel:ot(Dn.DragCancel)});sr.current=He;function ot(Ge){return async function(){const{active:ct,collisions:xt,over:Ot,scrollAdjustedTranslate:Ut}=Ae.current;let Zt=null;if(ct&&Ut){const{cancelDrop:Nn}=te.current;Zt={activatorEvent:ke,active:ct,collisions:xt,delta:Ut,over:Ot},Ge===Dn.DragEnd&&typeof Nn=="function"&&await Promise.resolve(Nn(Zt))&&(Ge=Dn.DragCancel)}ie.current=null,Ss.unstable_batchedUpdates(()=>{R({type:Ge}),T(qa.Uninitialized),cn(null),P(null),V(null),sr.current=null;const Nn=Ge===Dn.DragEnd?"onDragEnd":"onDragCancel";if(Zt){const un=te.current[Nn];un==null||un(Zt),E({type:Nn,event:Zt})}})}}},[F]),gn=m.useCallback((Xt,lt)=>(J,ve)=>{const _e=J.nativeEvent,ke=F.get(ve);if(ie.current!==null||!ke||_e.dndKit||_e.defaultPrevented)return;const He={active:ke};Xt(J,lt.options,He)===!0&&(_e.dndKit={capturedBy:lt.sensor},ie.current=ve,Mn(J,lt))},[F,Mn]),wr=sU(x,gn);fU(x),ks(()=>{de&&M===qa.Initializing&&T(qa.Initialized)},[de,M]),m.useEffect(()=>{const{onDragMove:Xt}=te.current,{active:lt,activatorEvent:J,collisions:ve,over:_e}=Ae.current;if(!lt||!J)return;const ke={active:lt,activatorEvent:J,collisions:ve,delta:{x:nt.x,y:nt.y},over:_e};Ss.unstable_batchedUpdates(()=>{Xt==null||Xt(ke),E({type:"onDragMove",event:ke})})},[nt.x,nt.y]),m.useEffect(()=>{const{active:Xt,activatorEvent:lt,collisions:J,droppableContainers:ve,scrollAdjustedTranslate:_e}=Ae.current;if(!Xt||ie.current==null||!lt||!_e)return;const{onDragOver:ke}=te.current,He=ve.get(Tn),ot=He&&He.rect.current?{id:He.id,rect:He.rect.current,data:He.data,disabled:He.disabled}:null,Ge={active:Xt,activatorEvent:lt,collisions:J,delta:{x:_e.x,y:_e.y},over:ot};Ss.unstable_batchedUpdates(()=>{cn(ot),ke==null||ke(Ge),E({type:"onDragOver",event:Ge})})},[Tn]),ks(()=>{Ae.current={activatorEvent:X,active:O,activeNode:$,collisionRect:en,collisions:On,droppableRects:H,draggableNodes:F,draggingNode:xe,draggingNodeRect:pe,droppableContainers:G,over:pn,scrollableAncestors:Oe,scrollAdjustedTranslate:nt},re.current={initial:pe,translated:en}},[O,$,On,en,F,xe,pe,H,G,pn,Oe,nt]),eU({...ae,delta:U,draggingRect:en,pointerCoordinates:wt,scrollableAncestors:Oe,scrollableAncestorRects:Xe});const jn=m.useMemo(()=>({active:O,activeNode:$,activeNodeRect:de,activatorEvent:X,collisions:On,containerNodeRect:Se,dragOverlay:rt,draggableNodes:F,droppableContainers:G,droppableRects:H,over:pn,measureDroppableContainers:D,scrollableAncestors:Oe,scrollableAncestorRects:Xe,measuringConfiguration:Y,measuringScheduled:I,windowRect:Ne}),[O,$,de,X,On,Se,rt,F,G,H,pn,D,Oe,Xe,Y,I,Ne]),Os=m.useMemo(()=>({activatorEvent:X,activators:wr,active:O,activeNodeRect:de,ariaDescribedById:{draggable:k},dispatch:R,draggableNodes:F,over:pn,measureDroppableContainers:D}),[X,wr,O,de,R,k,F,pn,D]);return we.createElement(FS.Provider,{value:C},we.createElement(zf.Provider,{value:Os},we.createElement(sE.Provider,{value:jn},we.createElement(aE.Provider,{value:Yt},p)),we.createElement(NU,{disabled:(f==null?void 0:f.restoreFocus)===!1})),we.createElement(_z,{...f,hiddenTextDescribedById:k}));function Or(){const Xt=(ue==null?void 0:ue.autoScrollEnabled)===!1,lt=typeof h=="object"?h.enabled===!1:h===!1,J=z&&!Xt&&!lt;return typeof h=="object"?{...h,enabled:J}:{enabled:J}}}),RU=m.createContext(null),tj="button",TU="Draggable";function MU(e){let{id:t,data:s,disabled:a=!1,attributes:l}=e;const c=tu(TU),{activators:u,activatorEvent:f,active:h,activeNodeRect:p,ariaDescribedById:x,draggableNodes:v,over:b}=m.useContext(zf),{role:w=tj,roleDescription:j="draggable",tabIndex:N=0}=l??{},_=(h==null?void 0:h.id)===t,R=m.useContext(_?aE:RU),[E,C]=Gd(),[M,T]=Gd(),z=hU(u,t),q=Ec(s);ks(()=>(v.set(t,{id:t,key:c,node:E,activatorNode:M,data:q}),()=>{const U=v.get(t);U&&U.key===c&&v.delete(t)}),[v,t]);const F=m.useMemo(()=>({role:w,tabIndex:N,"aria-disabled":a,"aria-pressed":_&&w===tj?!0:void 0,"aria-roledescription":j,"aria-describedby":x.draggable}),[a,w,N,_,j,x.draggable]);return{active:h,activatorEvent:f,activeNodeRect:p,attributes:F,isDragging:_,listeners:a?void 0:z,node:E,over:b,setNodeRef:C,setActivatorNodeRef:T,transform:R}}function AU(){return m.useContext(sE)}const kU="Droppable",DU={timeout:25};function OU(e){let{data:t,disabled:s=!1,id:a,resizeObserverConfig:l}=e;const c=tu(kU),{active:u,dispatch:f,over:h,measureDroppableContainers:p}=m.useContext(zf),x=m.useRef({disabled:s}),v=m.useRef(!1),b=m.useRef(null),w=m.useRef(null),{disabled:j,updateMeasurementsFor:N,timeout:_}={...DU,...l},R=Ec(N??a),E=m.useCallback(()=>{if(!v.current){v.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{p(Array.isArray(R.current)?R.current:[R.current]),w.current=null},_)},[_]),C=If({callback:E,disabled:j||!u}),M=m.useCallback((F,U)=>{C&&(U&&(C.unobserve(U),v.current=!1),F&&C.observe(F))},[C]),[T,z]=Gd(M),q=Ec(t);return m.useEffect(()=>{!C||!T.current||(C.disconnect(),v.current=!1,C.observe(T.current))},[T,C]),m.useEffect(()=>(f({type:Dn.RegisterDroppable,element:{id:a,key:c,disabled:s,node:T,rect:b,data:q}}),()=>f({type:Dn.UnregisterDroppable,key:c,id:a})),[a]),m.useEffect(()=>{s!==x.current.disabled&&(f({type:Dn.SetDroppableDisabled,id:a,key:c,disabled:s}),x.current.disabled=s)},[a,c,s,f]),{active:u,rect:b,isOver:(h==null?void 0:h.id)===a,node:T,over:h,setNodeRef:z}}function Lx(e,t,s){const a=e.slice();return a.splice(s<0?a.length+s:s,0,a.splice(t,1)[0]),a}function PU(e,t){return e.reduce((s,a,l)=>{const c=t.get(a);return c&&(s[l]=c),s},Array(e.length))}function Nd(e){return e!==null&&e>=0}function LU(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}function IU(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const _d={scaleX:1,scaleY:1},zU=e=>{var t;let{rects:s,activeNodeRect:a,activeIndex:l,overIndex:c,index:u}=e;const f=(t=s[l])!=null?t:a;if(!f)return null;const h=UU(s,u,l);if(u===l){const p=s[c];return p?{x:l<c?p.left+p.width-(f.left+f.width):p.left-f.left,y:0,..._d}:null}return u>l&&u<=c?{x:-f.width-h,y:0,..._d}:u<l&&u>=c?{x:f.width+h,y:0,..._d}:{x:0,y:0,..._d}};function UU(e,t,s){const a=e[t],l=e[t-1],c=e[t+1];return!a||!l&&!c?0:s<t?l?a.left-(l.left+l.width):c.left-(a.left+a.width):c?c.left-(a.left+a.width):a.left-(l.left+l.width)}const iE=e=>{let{rects:t,activeIndex:s,overIndex:a,index:l}=e;const c=Lx(t,a,s),u=t[l],f=c[l];return!f||!u?null:{x:f.left-u.left,y:f.top-u.top,scaleX:f.width/u.width,scaleY:f.height/u.height}},lE="Sortable",oE=we.createContext({activeIndex:-1,containerId:lE,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:iE,disabled:{draggable:!1,droppable:!1}});function $U(e){let{children:t,id:s,items:a,strategy:l=iE,disabled:c=!1}=e;const{active:u,dragOverlay:f,droppableRects:h,over:p,measureDroppableContainers:x}=AU(),v=tu(lE,s),b=f.rect!==null,w=m.useMemo(()=>a.map(z=>typeof z=="object"&&"id"in z?z.id:z),[a]),j=u!=null,N=u?w.indexOf(u.id):-1,_=p?w.indexOf(p.id):-1,R=m.useRef(w),E=!LU(w,R.current),C=_!==-1&&N===-1||E,M=IU(c);ks(()=>{E&&j&&x(w)},[E,w,j,x]),m.useEffect(()=>{R.current=w},[w]);const T=m.useMemo(()=>({activeIndex:N,containerId:v,disabled:M,disableTransforms:C,items:w,overIndex:_,useDragOverlay:b,sortedRects:PU(w,h),strategy:l}),[N,v,M.draggable,M.droppable,C,w,_,h,b,l]);return we.createElement(oE.Provider,{value:T},t)}const BU=e=>{let{id:t,items:s,activeIndex:a,overIndex:l}=e;return Lx(s,a,l).indexOf(t)},HU=e=>{let{containerId:t,isSorting:s,wasDragging:a,index:l,items:c,newIndex:u,previousItems:f,previousContainerId:h,transition:p}=e;return!p||!a||f!==c&&l===u?!1:s?!0:u!==l&&t===h},qU={duration:200,easing:"ease"},cE="transform",FU=Rc.Transition.toString({property:cE,duration:0,easing:"linear"}),VU={roleDescription:"sortable"};function YU(e){let{disabled:t,index:s,node:a,rect:l}=e;const[c,u]=m.useState(null),f=m.useRef(s);return ks(()=>{if(!t&&s!==f.current&&a.current){const h=l.current;if(h){const p=lo(a.current,{ignoreTransform:!0}),x={x:h.left-p.left,y:h.top-p.top,scaleX:h.width/p.width,scaleY:h.height/p.height};(x.x||x.y)&&u(x)}}s!==f.current&&(f.current=s)},[t,s,a,l]),m.useEffect(()=>{c&&u(null)},[c]),c}function GU(e){let{animateLayoutChanges:t=HU,attributes:s,disabled:a,data:l,getNewIndex:c=BU,id:u,strategy:f,resizeObserverConfig:h,transition:p=qU}=e;const{items:x,containerId:v,activeIndex:b,disabled:w,disableTransforms:j,sortedRects:N,overIndex:_,useDragOverlay:R,strategy:E}=m.useContext(oE),C=WU(a,w),M=x.indexOf(u),T=m.useMemo(()=>({sortable:{containerId:v,index:M,items:x},...l}),[v,l,M,x]),z=m.useMemo(()=>x.slice(x.indexOf(u)),[x,u]),{rect:q,node:F,isOver:U,setNodeRef:G}=OU({id:u,data:T,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:z,...h}}),{active:ce,activatorEvent:re,activeNodeRect:O,attributes:ie,setNodeRef:ue,listeners:P,isDragging:X,over:V,setActivatorNodeRef:te,transform:k}=MU({id:u,data:T,attributes:{...VU,...s},disabled:C.draggable}),L=dz(G,ue),Y=!!ce,H=Y&&!j&&Nd(b)&&Nd(_),D=!R&&X,I=D&&H?k:null,K=H?I??(f??E)({rects:N,activeNodeRect:O,activeIndex:b,overIndex:_,index:M}):null,ae=Nd(b)&&Nd(_)?c({id:u,items:x,activeIndex:b,overIndex:_}):M,ge=ce==null?void 0:ce.id,de=m.useRef({activeId:ge,items:x,newIndex:ae,containerId:v}),Se=x!==de.current.items,Ae=t({active:ce,containerId:v,isDragging:X,isSorting:Y,id:u,index:M,items:x,newIndex:de.current.newIndex,previousItems:de.current.items,previousContainerId:de.current.containerId,transition:p,wasDragging:de.current.activeId!=null}),it=YU({disabled:!Ae,index:M,node:F,rect:q});return m.useEffect(()=>{Y&&de.current.newIndex!==ae&&(de.current.newIndex=ae),v!==de.current.containerId&&(de.current.containerId=v),x!==de.current.items&&(de.current.items=x)},[Y,ae,v,x]),m.useEffect(()=>{if(ge===de.current.activeId)return;if(ge!=null&&de.current.activeId==null){de.current.activeId=ge;return}const xe=setTimeout(()=>{de.current.activeId=ge},50);return()=>clearTimeout(xe)},[ge]),{active:ce,activeIndex:b,attributes:ie,data:T,rect:q,index:M,newIndex:ae,items:x,isOver:U,isSorting:Y,isDragging:X,listeners:P,node:F,overIndex:_,over:V,setNodeRef:L,setActivatorNodeRef:te,setDroppableNodeRef:G,setDraggableNodeRef:ue,transform:it??K,transition:rt()};function rt(){if(it||Se&&de.current.newIndex===M)return FU;if(!(D&&!Ax(re)||!p)&&(Y||Ae))return Rc.Transition.toString({...p,property:cE})}}function WU(e,t){var s,a;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(s=e==null?void 0:e.draggable)!=null?s:t.draggable,droppable:(a=e==null?void 0:e.droppable)!=null?a:t.droppable}}function Kd(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const XU=[Ct.Down,Ct.Right,Ct.Up,Ct.Left],KU=(e,t)=>{let{context:{active:s,collisionRect:a,droppableRects:l,droppableContainers:c,over:u,scrollableAncestors:f}}=t;if(XU.includes(e.code)){if(e.preventDefault(),!s||!a)return;const h=[];c.getEnabled().forEach(v=>{if(!v||v!=null&&v.disabled)return;const b=l.get(v.id);if(b)switch(e.code){case Ct.Down:a.top<b.top&&h.push(v);break;case Ct.Up:a.top>b.top&&h.push(v);break;case Ct.Left:a.left>b.left&&h.push(v);break;case Ct.Right:a.left<b.left&&h.push(v);break}});const p=Rz({collisionRect:a,droppableRects:l,droppableContainers:h});let x=GS(p,"id");if(x===(u==null?void 0:u.id)&&p.length>1&&(x=p[1].id),x!=null){const v=c.get(s.id),b=c.get(x),w=b?l.get(b.id):null,j=b==null?void 0:b.node.current;if(j&&w&&v&&b){const _=Lf(j).some((z,q)=>f[q]!==z),R=uE(v,b),E=QU(v,b),C=_||!R?{x:0,y:0}:{x:E?a.width-w.width:0,y:E?a.height-w.height:0},M={x:w.left,y:w.top};return C.x&&C.y?M:Cc(M,C)}}}};function uE(e,t){return!Kd(e)||!Kd(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function QU(e,t){return!Kd(e)||!Kd(t)||!uE(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function ZU(e){const t=new Date(e);return{day:t.getDate().toString().padStart(2,"0"),month:(t.getMonth()+1).toString().padStart(2,"0"),year:t.getFullYear().toString()}}function oo({date:e}){const[t,s]=m.useState(!1),[a,l]=m.useState(ZU(e)),c=m.useRef(null);let u;const f=()=>s(!0),h=w=>{const{name:j,value:N}=w.target;l(_=>({..._,[j]:N.replace(/\D/g,"")}))},p=w=>{w.key==="Enter"&&s(!1)},x=()=>{u=setTimeout(()=>s(!1),0)},v=()=>{u&&clearTimeout(u)},b=`${a.year}-${a.month}-${a.day}`;return n.jsxs("div",{className:"flex items-center justify-between  font-bold",children:[n.jsxs("p",{children:["Bamako, le"," ",t?n.jsxs("span",{ref:c,tabIndex:-1,onBlur:x,onFocus:v,children:[n.jsx("input",{type:"text",name:"day",value:a.day,onChange:h,onKeyDown:p,maxLength:2,size:2,className:"border-b border-gray-400 focus:outline-none bg-transparent w-6 text-center mx-0.5",autoFocus:!0}),"/",n.jsx("input",{type:"text",name:"month",value:a.month,onChange:h,onKeyDown:p,maxLength:2,size:2,className:"border-b border-gray-400 focus:outline-none bg-transparent w-6 text-center mx-0.5"}),"/",n.jsx("input",{type:"text",name:"year",value:a.year,onChange:h,onKeyDown:p,maxLength:4,size:4,className:"border-b border-gray-400 focus:outline-none bg-transparent w-10 text-center mx-0.5"})]}):n.jsx("span",{onClick:f,style:{cursor:"pointer"},title:"Click to edit date",children:at(new Date(b),"dd/MM/yyyy")})]}),n.jsx("p",{children:"Le Biologiste"})]})}const JU=[{id:"template1",component:qn},{id:"template2",component:fa},{id:"template3",component:ha},{id:"template4",component:ma}],e$="template1",t$=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},n$=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},r$=()=>{const{resultId:e}=cr(),t=rr(),[s,a]=m.useState(null),[l,c]=m.useState(null),[u,f]=m.useState(null),[h,p]=m.useState([]),[x,v]=m.useState(!0),[b,w]=m.useState(!1),[j,N]=m.useState(null),[_,R]=m.useState(null),[E,C]=m.useState(null),[M,T]=m.useState(!0),z=m.useRef(null),q=Sz(qw(Px),qw(Dx,{coordinateGetter:KU})),[F,U]=m.useState({}),[G,ce]=m.useState({}),[re,O]=m.useState(""),[ie,ue]=m.useState(!1),[P,X]=m.useState(!1),[V,te]=m.useState(""),[k,L]=m.useState(""),[Y,H]=m.useState(!1),[D,I]=m.useState(null),[$,K]=m.useState([]);m.useEffect(()=>{(async()=>{const{data:ve,error:_e}=await ne.from("skip_range_check").select("value, type");!_e&&ve&&K(ve)})()},[]);const[ae,ge]=m.useState(5),[de,Se]=m.useState(40),[Ae,it]=m.useState(15),[rt,xe]=m.useState(10),[pe,Pe]=m.useState(35);m.useEffect(()=>{async function J(){const{data:ve,error:_e}=await ne.from("result_column_widths").select("*").order("updated_at",{ascending:!1}).limit(1).single();ve&&(Se(ve.param_width),it(ve.value_width),xe(ve.unit_width),Pe(ve.ref_width))}J()},[]);const[be,Ne]=m.useState([]),[Oe,Xe]=m.useState([]),[Fe,wt]=m.useState([]),[St,Vt]=m.useState([]),[Be,nt]=m.useState([]);m.useEffect(()=>{h.length>0&&Ne(J=>{if(J.length===0)return h.map(_e=>_e.category.id);const ve=new Set(J);return h.forEach(_e=>ve.add(_e.category.id)),Array.from(ve)})},[h]),m.useEffect(()=>{h.length>0&&Vt(J=>{if(J.length===0)return h.map(_e=>_e.category.id);const ve=new Set(J);return h.forEach(_e=>ve.add(_e.category.id)),Array.from(ve)}),console.log("categoriesUnitToShow:",St)},[h]),m.useEffect(()=>{h.length>0&&nt(J=>{if(J.length===0)return h.map(_e=>_e.category.id);const ve=new Set(J);return h.forEach(_e=>ve.add(_e.category.id)),Array.from(ve)}),console.log("categoriesRefToShow:",Be)},[h]);const en=J=>{Vt(ve=>ve.includes(J)?ve.filter(_e=>_e!==J):[...ve,J])},On=J=>{nt(ve=>ve.includes(J)?ve.filter(_e=>_e!==J):[...ve,J])},Tn=J=>{Ne(ve=>ve.includes(J)?ve.filter(_e=>_e!==J):[...ve,J])};m.useEffect(()=>{if(h.length>0){console.log("groupedResults:",h);const J=h.flatMap(ve=>ve.testTypes.flatMap(_e=>_e.parameters.map(ke=>ke.id)));console.log("parametersIds:",J)}},[h]);const pn=J=>{Xe(ve=>ve.includes(J)?ve.filter(_e=>_e!==J):[...ve,J])};m.useEffect(()=>{if(h.length>0){const J=h.flatMap(ve=>ve.category.id);console.log("testTypesIds:",J),wt(J)}console.log("testTypesToPrint:",Fe)},[h]);const cn=J=>{wt(ve=>ve.includes(J)?ve.filter(_e=>_e!==J):[...ve,J])},tn=m.useMemo(()=>{var ve;const J=(E==null?void 0:E.selected_template)||e$;return((ve=JU.find(_e=>_e.id===J))==null?void 0:ve.component)||qn},[E]),Yt=m.useMemo(()=>({logoUrl:(E==null?void 0:E.logo_url)||null,labName:E==null?void 0:E.lab_name,addressLine1:E==null?void 0:E.address_line1,addressLine2:E==null?void 0:E.address_line2,cityPostalCode:E==null?void 0:E.city_postal_code,phone:E==null?void 0:E.phone,email:E==null?void 0:E.email,website:E==null?void 0:E.website}),[E]),sr=m.useCallback(async()=>{if(!e){N("ID du résultat manquant."),v(!1);return}v(!0),N(null),R(null),a(null),c(null),f(null),p([]),C(null);try{const{data:J,error:ve}=await ne.from("patient_result").select("*").eq("id",e).single();if(ve)throw ve;if(!J)throw new Error("Résultat non trouvé.");a(J);const[_e,ke,He]=await Promise.all([ne.from("patient").select("*").eq("id",J.patient_id).single(),ne.from("doctor").select("*").eq("id",J.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);_e.error&&console.warn("Erreur chargement patient:",_e.error.message),ke.error&&console.warn("Erreur chargement médecin:",ke.error.message),c(_e.data),f(ke.data),He.error&&console.warn("Erreur chargement config en-tête:",He.error.message),C(He.data),T(!1);const{data:ot,error:Ge}=await ne.from("result_value").select(`
                    value,
                    test_parameter: test_parameter_id (
                        *,
                        test_type: test_type_id (
                            *,
                            category: category_id (id, name)
                        )
                    )
                `).eq("patient_result_id",e);if(Ge)throw Ge;const mt=new Map;(ot||[]).forEach(xt=>{const Ot=xt.test_parameter;if(Ot&&Ot.test_type&&Ot.test_type.category){const Ut=Ot.test_type.category.id,Zt=Ot.test_type.category.name,Nn=Ot.test_type.id,un=Ot.test_type.name;mt.has(Ut)||mt.set(Ut,{category:{...Ot.test_type.category,created_at:"",updated_at:""},testTypes:[]});const _n=mt.get(Ut);let fe=_n.testTypes.find(Ee=>Ee.testType.id===Nn);fe||(fe={testType:{...Ot.test_type,category_id:Ut,category:null},parameters:[]},_n.testTypes.push(fe)),fe.parameters.push({...Ot,resultValue:xt.value,test_type:null})}else console.warn("Données de paramètre/type/catégorie manquantes pour une valeur:",xt)}),mt.forEach(xt=>{xt.testTypes.forEach(Ot=>{Ot.parameters.sort((Ut,Zt)=>Ut.order!==Zt.order?Ut.order-Zt.order:Ut.name.localeCompare(Zt.name))}),xt.testTypes.sort((Ot,Ut)=>Ot.testType.name.localeCompare(Ut.testType.name))});const ct=Array.from(mt.values()).sort((xt,Ot)=>xt.category.name.localeCompare(Ot.category.name));p(ct)}catch(J){console.error("Erreur chargement détails du résultat:",J),N(J.message||"Une erreur est survenue lors du chargement du résultat.")}finally{v(!1)}},[e]);m.useEffect(()=>{sr()},[sr]),m.useEffect(()=>{s!=null&&s.description&&O(s.description)},[s]),m.useEffect(()=>{te((s==null?void 0:s.normal_price)!=null?String(s.normal_price):""),L((s==null?void 0:s.insurance_price)!=null?String(s.insurance_price):"")},[s]);const Mn=m.useCallback(async J=>{if(e){ue(!0);try{const{error:ve}=await ne.from("patient_result").update({description:J}).eq("id",e);if(ve)throw ve}catch(ve){console.error("Error saving description:",ve)}finally{ue(!1)}}},[e]);m.useEffect(()=>{const J=setTimeout(()=>{re!==(s==null?void 0:s.description)&&Mn(re)},1e3);return()=>clearTimeout(J)},[re,s==null?void 0:s.description,Mn]),m.useEffect(()=>{console.log("Grouped results: ",h)},[h]);const gn=m.useCallback(async()=>{H(!0),I(null);try{const J=V!==""?Number(V):null,ve=k!==""?Number(k):null;if(V!==""&&isNaN(J)||k!==""&&isNaN(ve)){I("Les prix doivent être des nombres valides."),H(!1);return}const{error:_e,data:ke}=await ne.from("patient_result").update({normal_price:J,insurance_price:ve}).eq("id",s.id).select().single();if(_e)throw _e;a(He=>He&&{...He,normal_price:J,insurance_price:ve}),X(!1)}catch(J){I(J.message||"Erreur lors de la sauvegarde des prix.")}finally{H(!1)}},[s,V,k]),wr=async J=>{if(!(!s||J===s.status)){w(!0),R(null);try{const{data:ve,error:_e}=await ne.from("patient_result").update({status:J}).eq("id",s.id).select().single();if(_e)throw _e;a(ve||(ke=>ke?{...ke,status:J}:null))}catch(ve){console.error("Erreur mise à jour statut:",ve),R(ve.message||"Impossible de mettre à jour le statut.")}finally{w(!1)}}},jn=()=>{window.print()},Os=J=>{const{active:ve,over:_e}=J;_e&&ve.id!==_e.id&&p(ke=>{const He=ke.findIndex(Ge=>Ge.category.id===ve.id),ot=ke.findIndex(Ge=>Ge.category.id===_e.id);return He===-1||ot===-1?ke:Lx(ke,He,ot)})},Or=(J,ve)=>{U(_e=>({..._e,[J]:ve}))},Xt=J=>{ce(ve=>{const _e=ve[J],ke={...ve};let He="indeterminate";for(const ot of h){for(const Ge of ot.testTypes){const mt=Ge.parameters.find(ct=>ct.id===J);if(mt){He=Bw(mt.resultValue,mt.reference_range,ot.category.name,Ge.testType.name,$.map(({value:ct})=>ct));break}}if(He!=="indeterminate")break}return _e===void 0?ke[J]="off":_e==="off"?ke[J]="on":_e==="on"?ke[J]="warn":delete ke[J],ke})},lt=(J,ve,_e,ke)=>{const He=J;return n.jsxs("div",{className:Me("flex items-start space-x-3",ke),children:[n.jsx(He,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:ve}),n.jsx("p",{className:"text-sm font-bold print:text-xs",children:_e||n.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})};return x||M?n.jsxs("div",{className:"space-y-6",children:[n.jsx(W,{className:"h-8 w-32"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]})]}):j?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"mb-4",children:n.jsx(et,{to:s!=null&&s.patient_id?`/patients/${s.patient_id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsxs(Dt,{children:[j," ",n.jsx(ee,{variant:"link",onClick:sr,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):s?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[n.jsx("div",{children:n.jsx(et,{to:l?`/patients/${l.id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour ",l?`à ${l.full_name}`:"à la liste"]})})}),n.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[n.jsx(Kr,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(et,{to:`/results/${e}/edit`,children:n.jsxs(ee,{variant:"secondary",size:"sm",children:[n.jsx(Qr,{className:"mr-2 h-4 w-4"})," Modifier"]})}),n.jsxs(ee,{variant:"outline",size:"sm",onClick:jn,disabled:x,children:[n.jsx(bf,{className:"mr-2 h-4 w-4"})," Imprimer"]}),n.jsxs(ee,{variant:"outline",size:"sm",disabled:!0,children:[n.jsx(AP,{className:"mr-2 h-4 w-4"})," Télécharger"]})]})]}),n.jsxs("div",{ref:z,className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[E?n.jsx("div",{className:"mb-6 print:mb-4",children:n.jsx(tn,{data:Yt,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):n.jsxs(At,{variant:"default",className:"mb-6 print:hidden",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"En-tête Manquant"}),n.jsxs(Dt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",n.jsx(et,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),n.jsx(Xr,{className:"my-4 print:hidden"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[n.jsxs(Ce,{className:"overflow-hidden print:shadow-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[lt(Ye,"NOM PRENOM",l==null?void 0:l.full_name),lt(Ye,"IDENTIFIANT Unique",l==null?void 0:l.patient_unique_id),lt(ln,"Date Naissance",l!=null&&l.date_of_birth?at(Ft(l.date_of_birth),"P",{locale:qt}):null),n.jsx("div",{className:"hidden print:block",children:lt(ln,"Date Résultat",s.result_date?at(Ft(s.result_date),"Pp",{locale:qt}):null)})]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[lt(Ht,"NOM PRENOM",u==null?void 0:u.full_name),lt(mn,"Téléphone",u==null?void 0:u.phone),lt(Ye,"Provenance",u==null?void 0:u.hospital)]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(la,{className:"h-4 w-4"}),"Résultat Info"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[lt(ln,"Date Résultat",s.result_date?at(Ft(s.result_date),"Pp",{locale:qt}):null),n.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),P?n.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:V,onChange:J=>te(J.target.value),disabled:Y}):n.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:V,disabled:!0,readOnly:!0})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),P?n.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:k,onChange:J=>L(J.target.value),disabled:Y}):n.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:k,disabled:!0,readOnly:!0})]}),n.jsx("div",{className:"flex gap-2 mt-1",children:P?n.jsxs(n.Fragment,{children:[n.jsxs(ee,{size:"xs",variant:"secondary",onClick:gn,disabled:Y,children:[Y?n.jsx(Lt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>X(!1),disabled:Y,children:"Annuler"})]}):n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>X(!0),children:"Modifier Prix"})}),D&&n.jsx("p",{className:"text-xs text-destructive mt-1",children:D})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Ye,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),n.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[n.jsxs(Qn,{value:s.status??"",onValueChange:J=>wr(J),disabled:b,children:[n.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",n.jsx(Zn,{placeholder:"Changer statut..."})," "]}),n.jsxs(er,{children:[n.jsx(ht,{value:"attente",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(f3,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),n.jsx(ht,{value:"en cours",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),n.jsx(ht,{value:"fini",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),b&&n.jsx(Lt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),_&&n.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:_}),n.jsx(Zr,{variant:t$(s.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:n$(s.status)})]})]})]})]})]}),n.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 hidden print:grid",children:[n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Ht,{className:"h-4 w-4"})," Patient"]}),lt(Ye,"NOM PRENOM",l==null?void 0:l.full_name),lt(Ye,"ID Unique",l==null?void 0:l.patient_unique_id),lt(mn,"Téléphone",l==null?void 0:l.phone)]}),n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),lt(Ht,"NOM PRENOM",u==null?void 0:u.full_name),lt(mn,"Téléphone",u==null?void 0:u.phone),lt(Ye,"Provenance",u==null?void 0:u.hospital)]})]}),h.length>1&&n.jsxs("div",{className:"my-6 print:hidden",children:[n.jsx(Ie,{className:"text-sm font-medium text-muted-foreground mb-2 block",children:"Réorganiser les Catégories (Glisser-Déposer) :"}),n.jsx(CU,{sensors:q,collisionDetection:Cz,onDragEnd:Os,children:n.jsx($U,{items:h.map(J=>J.category.id),strategy:zU,children:n.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(J=>n.jsx(s$,{category:J.category},J.category.id))})})}),n.jsx(Xr,{className:"mt-6"})]}),n.jsxs("div",{className:"flex gap-4 mb-2 print:hidden items-end",children:[n.jsxs("div",{className:"flex flex-col text-xs",children:[n.jsx("label",{htmlFor:"paramWidth",children:"Paramètre (%)"}),n.jsx("input",{id:"paramWidth",type:"number",min:5,max:80,value:de,onChange:J=>Se(Number(J.target.value)),className:"border px-2 py-1 w-16 rounded"})]}),n.jsxs("div",{className:"flex flex-col text-xs",children:[n.jsx("label",{htmlFor:"valueWidth",children:"Valeur (%)"}),n.jsx("input",{id:"valueWidth",type:"number",min:5,max:80,value:Ae,onChange:J=>it(Number(J.target.value)),className:"border px-2 py-1 w-16 rounded"})]}),n.jsxs("div",{className:"flex flex-col text-xs",children:[n.jsx("label",{htmlFor:"unitWidth",children:"Unité (%)"}),n.jsx("input",{id:"unitWidth",type:"number",min:5,max:80,value:rt,onChange:J=>xe(Number(J.target.value)),className:"border px-2 py-1 w-16 rounded"})]}),n.jsxs("div",{className:"flex flex-col text-xs",children:[n.jsx("label",{htmlFor:"refWidth",children:"Réf. (%)"}),n.jsx("input",{id:"refWidth",type:"number",min:5,max:80,value:pe,onChange:J=>Pe(Number(J.target.value)),className:"border px-2 py-1 w-16 rounded"})]})]}),n.jsx("div",{className:"space-y-8 print:space-y-4",children:h.map(J=>{const ve=F[J.category.id]??!1,_e=be.includes(J.category.id);return n.jsxs("div",{className:Me(ve&&"print-force-break-before",!_e&&"print:hidden"),children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3 print:mb-2",children:[" ",n.jsxs("h2",{className:"text-xl font-bold uppercase mx-auto tracking-tight  print:text-center",children:[" ",J.category.name]}),n.jsx(Xr,{className:"flex-1 print:hidden"}),n.jsxs("div",{className:"flex items-center space-x-2 ml-auto print:hidden pl-4",children:[n.jsx(na,{id:`break-${J.category.id}`,checked:ve,onCheckedChange:ke=>{const He=ke===!0;Or(J.category.id,He)},"aria-label":"Forcer saut de page avant"}),n.jsxs(Ie,{htmlFor:`break-${J.category.id}`,className:"text-xs font-medium text-muted-foreground cursor-pointer flex items-center gap-1",title:"Forcer un saut de page avant cette catégorie à l'impression",children:[n.jsx(fP,{className:"h-3.5 w-3.5"})," Saut Page Avant"]})]}),n.jsxs("div",{className:"flex items-center space-x-2 ml-auto print:hidden pl-4",children:[n.jsx(na,{id:`print-${J.category.id}`,checked:be.includes(J.category.id),onCheckedChange:ke=>{Tn(J.category.id)},"aria-label":"Inclure dans l'impression"}),n.jsx(Ie,{htmlFor:`print-${J.category.id}`,className:"text-xs font-medium text-muted-foreground cursor-pointer flex items-center gap-1",title:"Inclure cette catégorie dans l'impression",children:"Imprimer"})]})]}),n.jsxs(oa,{className:"print:text-xs",children:[n.jsx(ca,{className:"bg-muted/10 print:bg-gray-300 text-black",children:n.jsxs(Wt,{children:[n.jsx(gt,{style:{width:`${de}%`},className:"pl-4 print:pl-1",children:"Paramètre"}),n.jsx(gt,{style:{width:`${Ae}%`},className:Me("pl-2 print:pl-1",St.includes(J.category.id)&&Be.includes(J.category.id)?"":"do-something"),children:"Valeur"}),n.jsx(gt,{style:{width:`${rt}%`},className:"pl-2 print:pl-1 cursor-pointer",onClick:()=>{en(J.category.id)},children:St.includes(J.category.id)?"Unité":""}),n.jsx(gt,{style:{width:`${pe}%`},className:"pr-4 print:pr-1 cursor-pointer",onClick:()=>{On(J.category.id)},children:Be.includes(J.category.id)?"Réf.":""})]})}),n.jsxs(ua,{children:[J.testTypes.length===0&&n.jsx(Wt,{children:n.jsx(Qe,{colSpan:4,className:"h-10 text-center text-xs italic text-muted-foreground",children:"(Aucun type de test dans cette catégorie)"})}),J.testTypes.map(ke=>n.jsxs(we.Fragment,{children:[ke.parameters.length>1&&n.jsx(Wt,{className:Me("bg-muted/50 print:bg-gray-100  print:break-inside-avoid",Fe.includes(ke.testType.id)&&"!bg-red-400 print:hidden"),children:n.jsx(Qe,{colSpan:4,className:"py-1.5 px-4 print:px-1 font-semibold text-sm print:text-xs text-foreground print:text-black cursor-pointer",onClick:()=>cn(ke.testType.id),children:ke.testType.name})}),ke.parameters.length>0?n.jsxs(n.Fragment,{children:[ke.parameters.map(He=>{var Ot,Ut;const ot=Bw(He.resultValue,He.reference_range,J.category.name,ke.testType.name,$.map(({value:Zt})=>Zt)),Ge=G[He.id];let mt="",ct="";Ge==="on"?(mt="result-out-of-range",ct="font-bold text-red-700 dark:text-red-400 print:text-red-700"):Ge==="off"?mt="":Ge==="warn"?mt="result-indeterminate-range":ot==="out-of-range"?(mt="result-out-of-range",ct="font-bold text-red-700 dark:text-red-400 print:text-red-700"):ot==="indeterminate"?mt="result-indeterminate-range":mt="";const xt=ke.parameters.length===1;return n.jsxs(Wt,{className:Me("print:even:bg-white print:break-inside-avoid  ",Oe.length>0&&Oe.includes(He.id)?"print:hidden":""),children:[n.jsx(Qe,{style:{width:`${de}%`},className:Me("font-medium text-black pl-6 print:pl-2 cursor-pointer",Oe.includes(He.id)?" bg-red-400":""),dangerouslySetInnerHTML:{__html:xt?`<span style="font-weight: 600; color: black; display:inline-block; margin-left: -5px">${He.name}</span>`:He.name},onClick:()=>pn(He.id)}),n.jsx(Qe,{style:{width:`${Ae}%`},className:Me("pl-2 print:pl-1 cursor-pointer hover:bg-muted/50","cursor-pointer hover:bg-black/5 dark:hover:bg-white/5",ct,mt==="result-indeterminate-range"&&mt),onClick:()=>Xt(He.id),title:"Cliquer pour changer le surlignage",children:n.jsx("p",{className:` inline-block px-2 mx-auto ${mt}`,children:He.resultValue})}),n.jsx(Qe,{style:{width:`${rt}%`},className:"pl-2 print:pl-1 text-black",dangerouslySetInnerHTML:{__html:He.unit||"-"}}),n.jsxs(Qe,{style:{width:`${pe}%`},className:"text-black pr-4 print:pr-1 !whitespace-pre-line",children:[!He.reference_range&&"-",He.reference_range==="NEGATIF"&&"-",((Ot=He.reference_range)==null?void 0:Ot.includes("style"))&&n.jsx("div",{dangerouslySetInnerHTML:{__html:He.reference_range}}),He.reference_range!=="NEGATIF"&&!((Ut=He.reference_range)!=null&&Ut.includes("style"))&&He.reference_range&&He.reference_range.split(";").map((Zt,Nn)=>n.jsx("div",{children:Zt},Nn))]})]},He.id)}),ke.testType.description&&n.jsx(Wt,{children:n.jsx(Qe,{colSpan:4,className:"py-2 px-6 print:px-2 text-sm print:text-xs",children:n.jsx("div",{dangerouslySetInnerHTML:{__html:ke.testType.description}})})})]}):n.jsx(n.Fragment,{})]},ke.testType.id)),J.testTypes.length>0&&J.testTypes.every(ke=>ke.parameters.length===0)&&n.jsx(Wt,{children:n.jsx(Qe,{colSpan:4,className:"h-10 text-center text-xs italic text-muted-foreground",children:"(Aucun paramètre défini pour les tests de cette catégorie)"})})]})]})]},J.category.id)})}),n.jsxs(Ce,{className:"mt-8 print:hidden",children:[n.jsx(Te,{className:"pb-2",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2",children:[n.jsx(Kr,{className:"h-4 w-4"}),"Description du résultat"]})}),n.jsx(Re,{children:n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{value:re,onChange:J=>O(J.target.value),className:"w-full min-h-[100px] p-2 border rounded-md resize-y",placeholder:"Entrez une description pour ce résultat..."}),ie&&n.jsx("div",{className:"absolute right-2 top-2",children:n.jsx(Lt,{className:"h-4 w-4 animate-spin text-muted-foreground"})})]})})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-2 print:hidden",children:[n.jsx("label",{htmlFor:"marginTopControl",className:"text-xs",children:"Décalage vertical (mt):"}),n.jsx("input",{id:"marginTopControl",type:"number",min:0,max:20,value:ae,onChange:J=>ge(Number(J.target.value)),className:"border px-2 py-1 text-xs w-16 rounded"})]}),n.jsxs("div",{className:"text-sm text-black print:block print:mt-4",style:{marginTop:`${ae*.25}rem`},children:[n.jsx("div",{className:"font-bold",children:re.split(`
`).map((J,ve)=>n.jsx("div",{children:J},ve))}),n.jsx("div",{className:"mt-4",children:n.jsx(oo,{date:s.result_date})}),n.jsxs("div",{className:"mt-[200px] flex flex-wrap flex-row items-center space-x-2 print:hidden",children:[n.jsx("div",{className:"",children:n.jsx(ee,{onClick:()=>t(`/protidogramme/${e}`),children:"Protidogramme"})}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx(ee,{onClick:()=>t(`/atb/${e}`),children:"ATB"})}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx(ee,{onClick:()=>t(`/ecb/${e}`),children:"ECB"})}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx(ee,{onClick:()=>t(`/vhb/${e}`),children:"VHB"})}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx(ee,{onClick:()=>t(`/vih/${e}`),children:"VIH"})}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx(ee,{onClick:()=>t(`/anapath/${e}`),children:"Anapath"})}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx(ee,{onClick:()=>t(`/spermogramme/${e}`),children:"Spermogramme"})})]})]})]})," "]}):n.jsx("div",{children:"Résultat non trouvé."})},s$=({category:e})=>{const{attributes:t,listeners:s,setNodeRef:a,transform:l,transition:c,isDragging:u}=GU({id:e.id}),f={transform:Rc.Transform.toString(l),transition:c,opacity:u?.7:1,zIndex:u?10:void 0};return n.jsx("div",{ref:a,style:f,...t,children:n.jsxs(ee,{variant:"secondary",size:"sm",className:"cursor-grab touch-none flex items-center gap-1.5",children:[n.jsx("span",{...s,"aria-label":`Réorganiser ${e.name}`,children:n.jsx(PP,{className:"h-4 w-4 text-muted-foreground"})}),e.name]})})},nj=()=>{const{patientId:e,resultId:t}=cr(),s=rr(),a=!!t,[l,c]=m.useState(null),[u,f]=m.useState(!1),[h,p]=m.useState(""),[x,v]=m.useState(e||null),[b,w]=m.useState([]),[j,N]=m.useState([]),[_,R]=m.useState([]),[E,C]=m.useState(void 0),[M,T]=m.useState(void 0),[z,q]=m.useState(new Date),[F,U]=m.useState(new Map),[G,ce]=m.useState(""),[re,O]=m.useState(!0),[ie,ue]=m.useState(!1),[P,X]=m.useState(null),[V,te]=m.useState(!1),[k,L]=m.useState([]),[Y,H]=m.useState(""),[D,I]=m.useState(""),$=Yc(G,250),K=m.useCallback(async()=>{if(t){O(!0),X(null);try{const[xe,pe,Pe,be]=await Promise.all([ne.from("patient_result").select("*").eq("id",t).single(),ne.from("result_value").select("id, value, test_parameter_id, test_parameter:test_parameter_id(test_type_id, test_type:test_type_id(id, name))").eq("patient_result_id",t),ne.from("doctor").select("id, full_name").order("full_name"),ne.from("test_type").select("id, name, category_id").order("name")]);if(xe.error)throw xe.error;if(!xe.data)throw new Error("Résultat non trouvé.");const Ne=xe.data;if(c(xe.data.patient),T(xe.data.doctor_id),q(xe.data.result_date?new Date(xe.data.result_date):void 0),v(xe.data.patient_id),L(pe.data||[]),H(xe.data.normal_price??""),I(xe.data.insurance_price??""),f(!!xe.data.isFree),p(xe.data.notes??""),Pe.error)throw Pe.error;if(be.error)throw be.error;if(w(Pe.data||[]),N(be.data||[]),pe.error)throw pe.error;const Oe=pe.data||[],Xe=new Map,Fe=[...new Set(Oe.map(Vt=>{var Be,nt;return(nt=(Be=Vt.test_parameter)==null?void 0:Be.test_type)==null?void 0:nt.id}).filter(Boolean))],{data:wt,error:St}=await ne.from("test_parameter").select("*, test_type:test_type_id(id, name), order").in("test_type_id",Fe);if(St)throw St;Fe.forEach(Vt=>{var On,Tn,pn;const Be=Oe.find(cn=>{var tn,Yt;return((Yt=(tn=cn.test_parameter)==null?void 0:tn.test_type)==null?void 0:Yt.id)===Vt}),nt=((Tn=(On=Be==null?void 0:Be.test_parameter)==null?void 0:On.test_type)==null?void 0:Tn.name)||"Type Inconnu",en=(wt||[]).filter(cn=>cn.test_type_id===Vt);Xe.set(Vt,{id:Vt,name:nt,category_id:((pn=en[0])==null?void 0:pn.test_type_id)||"",created_at:"",updated_at:"",parameters:en.map(cn=>{const tn=Oe.find(Yt=>Yt.test_parameter_id===cn.id);return{...cn,resultValue:(tn==null?void 0:tn.value)||"",isVisible:!0,originalValueId:(tn==null?void 0:tn.id)||null}}),loadingParams:!1,errorLoadingParams:!1})}),U(Xe)}catch(xe){console.error("Erreur chargement données pour modification:",xe),X(xe.message||"Impossible de charger les données pour la modification.")}finally{O(!1)}}},[t]),ae=m.useCallback(async()=>{if(e){O(!0),X(null);try{const[xe,pe,Pe]=await Promise.all([ne.from("patient").select("*").eq("id",e).single(),ne.from("doctor").select("id, full_name").order("full_name"),ne.from("test_type").select("id, name, category_id").order("name")]);if(xe.error)throw xe.error;if(!xe.data)throw new Error("Patient non trouvé pour la création.");if(pe.error)throw pe.error;if(Pe.error)throw Pe.error;c(xe.data),v(e),w(pe.data||[]),N(Pe.data||[]),H(""),I("")}catch(xe){console.error("Erreur chargement données pour création:",xe),X(xe.message||"Impossible de charger les informations nécessaires.")}finally{O(!1)}}},[e]);m.useEffect(()=>{(async()=>{const{data:pe,error:Pe}=await ne.from("category").select("id, name").order("name");if(Pe){X("Erreur lors du chargement des catégories");return}R(pe||[])})()},[]),m.useEffect(()=>{a?K():ae()},[a,K,ae]);const ge=m.useMemo(()=>{if(E)return j.filter(xe=>xe.category_id===E);{if(!$)return j;const xe=$.toLowerCase();return j.filter(pe=>pe.name.toLowerCase().includes(xe))}},[j,$,E]),de=m.useCallback(async(xe,pe)=>{const Pe=j.find(be=>be.id===pe);if(Pe)if(xe===!0){U(be=>{const Ne=new Map(be),Oe=Ne.get(pe),Xe={...Oe||Pe,parameters:(Oe==null?void 0:Oe.parameters)||[],loadingParams:!0,errorLoadingParams:!1};return Ne.set(pe,Xe),Ne});try{const{data:be,error:Ne}=await ne.from("test_parameter").select("*, test_type:test_type_id(id, name), order").eq("test_type_id",pe).order("order");if(Ne)throw Ne;U(Oe=>{const Xe=new Map(Oe),Fe=Xe.get(pe);if(Fe){const wt=new Map(Fe.parameters.map(Be=>[Be.id,Be])),St=(be||[]).map(Be=>{const nt=wt.get(Be.id);return{...Be,resultValue:(nt==null?void 0:nt.resultValue)||"",isVisible:(nt==null?void 0:nt.isVisible)!==!1,originalValueId:(nt==null?void 0:nt.originalValueId)||null}}),Vt={...Fe,parameters:St,loadingParams:!1,errorLoadingParams:!1};return Xe.set(pe,Vt),Xe}return Oe})}catch(be){console.error(`Erreur chargement paramètres pour ${Pe.name}:`,be),U(Ne=>{const Oe=new Map(Ne),Xe=Oe.get(pe);if(Xe){const Fe={...Xe,loadingParams:!1,errorLoadingParams:!0};return Oe.set(pe,Fe),Oe}return Ne}),X(Ne=>Ne?`${Ne}
Impossible de charger les paramètres pour ${Pe.name}.`:`Impossible de charger les paramètres pour ${Pe.name}.`)}}else U(be=>{const Ne=new Map(be);return Ne.delete(pe),Ne})},[j]),Se=(xe,pe,Pe)=>{U(be=>{const Ne=new Map(be),Oe=Ne.get(xe);if(Oe){const Xe=Oe.parameters.map(wt=>wt.id===pe?{...wt,resultValue:Pe}:wt),Fe={...Oe,parameters:Xe};return Ne.set(xe,Fe),Ne}return be})},Ae=(xe,pe)=>{U(Pe=>{const be=new Map(Pe),Ne=be.get(xe);if(Ne){const Oe=Ne.parameters.map(Fe=>Fe.id===pe?{...Fe,isVisible:!1}:Fe),Xe={...Ne,parameters:Oe};return be.set(xe,Xe),be}return Pe})},it=async xe=>{if(xe.preventDefault(),X(null),!x){X("Erreur: ID du patient non défini.");return}if(!M){X("Veuillez sélectionner un médecin prescripteur.");return}if(!z){X("Veuillez sélectionner la date du résultat.");return}if(F.size===0&&!a){X("Veuillez sélectionner au moins un type de test.");return}if(Y!==""&&isNaN(Number(Y))){X("Le prix normal doit être un nombre valide.");return}if(D!==""&&isNaN(Number(D))){X("Le prix assurance doit être un nombre valide.");return}ue(!0);try{const pe={patient_id:x,doctor_id:M,result_date:at(z,"yyyy-MM-dd'T'HH:mm:ssXXX")};Y!==""&&(pe.normal_price=Number(Y)),D!==""&&(pe.insurance_price=Number(D)),pe.isFree=u,pe.notes=h;const{data:Pe,error:be}=await(a?ne.from("patient_result").update(pe).eq("id",t).select().single():ne.from("patient_result").insert(pe).select().single());if(be)throw be;const Ne=Pe==null?void 0:Pe.id;if(!Ne)throw new Error("Erreur lors de l'enregistrement de l'en-tête du résultat (ID manquant).");const Oe=new Map,Xe=new Set;F.forEach(Be=>{Be.parameters.forEach(nt=>{nt.isVisible!==!1&&(Xe.add(nt.id),nt.resultValue!==void 0&&nt.resultValue.trim()!==""&&Oe.set(nt.id,{value:nt.resultValue.trim(),test_parameter_id:nt.id}))})});const Fe=new Map(k.map(Be=>[Be.test_parameter_id,Be])),wt=[],St=[],Vt=[];if(k.forEach(Be=>{(!Xe.has(Be.test_parameter_id)||!Oe.has(Be.test_parameter_id))&&wt.push(Be.id)}),Oe.forEach((Be,nt)=>{const en=Fe.get(nt);en!=null&&en.id?St.push({id:en.id,patient_result_id:Ne,test_parameter_id:Be.test_parameter_id,value:Be.value}):Vt.push({patient_result_id:Ne,test_parameter_id:Be.test_parameter_id,value:Be.value})}),wt.length>0){const{error:Be}=await ne.from("result_value").delete().in("id",wt);if(Be)throw Be}for(const Be of St){const{error:nt}=await ne.from("result_value").update({value:Be.value,test_parameter_id:Be.test_parameter_id,patient_result_id:Be.patient_result_id}).eq("id",Be.id);if(nt)throw nt}if(Vt.length>0){const{error:Be}=await ne.from("result_value").insert(Vt);if(Be)throw Be}s(a?`/results/${Ne}`:`/results/${Ne}`)}catch(pe){console.error(`Erreur lors de ${a?"la mise à jour":"la création"} du résultat:`,pe),X((pe==null?void 0:pe.message)||`Une erreur est survenue lors de ${a?"la mise à jour":"l'enregistrement"}.`)}finally{ue(!1)}};if(re)return n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsx(W,{className:"h-8 w-32"}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/2"})}),n.jsxs(Re,{className:"space-y-6",children:[n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-20 w-full"})]}),n.jsx(cs,{children:n.jsx(W,{className:"h-10 w-32"})})]})]});const rt=a?`/results/${t}`:`/patients/${x}`;return n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("div",{className:"mb-4",children:n.jsx(et,{to:rt,children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),a?"Retour au Résultat":"Retour au Patient"]})})}),n.jsxs(Ce,{className:"shadow-md",children:[n.jsxs(Te,{children:[n.jsxs(ft,{className:"text-xl font-semibold flex items-center gap-2",children:[a?n.jsx(Qr,{className:"h-5 w-5 text-primary"}):n.jsx(Jg,{className:"h-5 w-5 text-primary"}),a?"Modifier le Résultat":"Ajouter un Nouveau Résultat"]}),l&&n.jsxs(xr,{children:["Pour le patient :"," ",n.jsx("span",{className:"font-medium",children:l.full_name})," (ID:"," ",l.patient_unique_id,")"]})]}),n.jsxs("form",{onSubmit:it,children:[n.jsxs(Re,{className:"space-y-6",children:[P&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsx(Dt,{className:"whitespace-pre-line",children:P})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ie,{htmlFor:"doctor",className:"font-semibold",children:["Médecin Prescripteur"," ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsxs(Qn,{name:"doctor",value:M,onValueChange:xe=>T(xe),required:!0,disabled:ie||b.length===0,children:[n.jsx(Jn,{id:"doctor",className:"h-10",children:n.jsx(Zn,{placeholder:b.length===0?"Aucun médecin...":"Sélectionner..."})}),n.jsx(er,{children:b.length>0?b.map(xe=>n.jsx(ht,{value:xe.id,children:xe.full_name},xe.id)):n.jsx(ht,{value:"no-doctors",disabled:!0,children:"Aucun médecin disponible"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ie,{htmlFor:"resultDate",className:"font-semibold",children:["Date du Résultat ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsxs(Q_,{open:V,onOpenChange:te,children:[n.jsx(Z_,{asChild:!0,children:n.jsxs(ee,{variant:"outline",className:Me("w-full justify-start text-left font-normal h-10",!z&&"text-muted-foreground"),disabled:ie,children:[n.jsx(D1,{className:"mr-2 h-4 w-4"}),z?at(z,"PPP",{locale:qt}):n.jsx("span",{children:"Choisir une date"})]})}),n.jsx(J_,{className:"w-auto p-0",children:n.jsx(uS,{mode:"single",selected:z,onSelect:xe=>{q(xe||new Date),te(!1)},initialFocus:!0,locale:qt,disabled:xe=>xe>new Date})})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ie,{htmlFor:"normal_price",className:"font-semibold",children:"Prix Normal"}),n.jsx(We,{id:"normal_price",name:"normal_price",type:"number",required:!0,min:"0",step:"0.01",placeholder:"Prix normal du test (ex: 1000)",value:Y,onChange:xe=>H(xe.target.value),disabled:ie})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ie,{htmlFor:"insurance_price",className:"font-semibold",children:"Prix Assurance"}),n.jsx(We,{id:"insurance_price",name:"insurance_price",type:"number",required:!0,min:"0",step:"0.01",placeholder:"Prix avec assurance (ex: 800)",value:D,onChange:xe=>I(xe.target.value),disabled:ie})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[n.jsx(na,{id:"isFree",checked:u,onCheckedChange:xe=>f(!!xe),disabled:ie}),n.jsx(Ie,{htmlFor:"isFree",className:"font-semibold",children:"Gratuit"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx(Ie,{htmlFor:"notes",className:"font-semibold",children:"Notes"}),n.jsx("textarea",{id:"notes",value:h,onChange:xe=>p(xe.target.value),rows:3,className:"w-full border rounded-md p-2 mt-1 focus:outline-none focus:ring focus:border-blue-300",placeholder:"Ajouter des notes ou des commentaires...",disabled:ie})]}),n.jsxs("div",{style:{marginBottom:16},children:[n.jsx(Ie,{htmlFor:"category-filter",children:"Catégorie"}),n.jsxs(Qn,{value:E??"all",onValueChange:xe=>C(xe==="all"?void 0:xe),children:[n.jsx(Jn,{id:"category-filter",children:n.jsx(Zn,{placeholder:"Filtrer par catégorie"})}),n.jsxs(er,{children:[n.jsx(ht,{value:"all",children:"Toutes les catégories"}),_.map(xe=>n.jsx(ht,{value:xe.id,children:xe.name},xe.id))]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(Ie,{className:"font-semibold text-base",children:"Types de Tests Inclus"}),n.jsxs("div",{className:"relative",children:[n.jsx(qc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(We,{type:"search",placeholder:"Rechercher et ajouter un type de test...",value:G,onChange:xe=>ce(xe.target.value),className:"pl-10 w-full md:w-1/2 h-9",disabled:j.length===0})]}),j.length>0?n.jsx("div",{className:"grid grid-cols-2 _sm:grid-cols-3 _md:grid-cols-4 gap-x-4 gap-y-3 rounded-md border p-4 max-h-80 overflow-y-auto",children:ge.length>0?ge.map(xe=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(na,{id:`test-type-${xe.id}`,checked:F.has(xe.id),onCheckedChange:pe=>de(pe,xe.id),disabled:ie}),n.jsx("label",{htmlFor:`test-type-${xe.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:xe.name})]},xe.id)):n.jsx("p",{className:"col-span-full text-sm text-muted-foreground text-center py-4",children:"Aucun type de test ne correspond."})}):n.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Aucun type de test configuré."})]}),F.size>0&&n.jsx(Xr,{}),Array.from(F.values()).map(xe=>n.jsxs("div",{className:"space-y-4 py-4 border-b last:border-b-0",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center justify-between gap-2",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Zg,{className:"h-5 w-5 text-green-600"}),xe.name]}),n.jsx(ee,{type:"button",variant:"ghost",size:"sm",className:"h-7 text-xs text-destructive hover:bg-destructive/10",onClick:()=>de(!1,xe.id),disabled:ie,children:"Retirer ce Test"})]}),xe.loadingParams?n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 pl-7",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(W,{className:"h-5 w-20"}),n.jsx(W,{className:"h-9 w-full"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(W,{className:"h-5 w-20"}),n.jsx(W,{className:"h-9 w-full"})]})]}):xe.errorLoadingParams?n.jsxs(At,{variant:"destructive",className:"ml-7",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur Paramètres"}),n.jsx(Dt,{children:"Impossible de charger les paramètres pour ce test."})]}):xe.parameters.length>0?n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-3 pl-7",children:[xe.parameters.filter(pe=>pe.isVisible!==!1).sort((pe,Pe)=>(pe.order??0)-(Pe.order??0)).map(pe=>n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(Ie,{htmlFor:`param-${pe.id}`,className:"text-sm font-medium flex items-center gap-1",children:[n.jsx("span",{dangerouslySetInnerHTML:{__html:pe.name}}),pe.unit&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",pe.unit,")"]})]}),n.jsx(ee,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:()=>Ae(xe.id,pe.id),disabled:ie,"aria-label":`Retirer ${pe.name}`,children:n.jsx(wf,{className:"h-4 w-4"})})]}),n.jsx(We,{id:`param-${pe.id}`,name:`param-${pe.id}`,value:pe.resultValue||"",onChange:Pe=>Se(xe.id,pe.id,Pe.target.value),placeholder:`Valeur ${pe.reference_range?`(Réf: ${pe.reference_range})`:""}`,disabled:ie,className:"h-9"}),pe.description&&n.jsx("p",{className:"text-xs text-muted-foreground pt-1",children:pe.description})]},pe.id)),xe.parameters.every(pe=>pe.isVisible===!1)&&n.jsx("p",{className:"col-span-full text-sm text-muted-foreground italic",children:"Tous les paramètres pour ce test sont masqués."})]}):n.jsx("p",{className:"text-sm text-muted-foreground italic pl-7",children:"Aucun paramètre défini pour ce type de test."})]},xe.id))]}),n.jsxs(cs,{className:"border-t px-6 py-4 flex justify-between",children:[n.jsx(ee,{type:"submit",disabled:ie||re,children:ie?n.jsxs(n.Fragment,{children:[n.jsx(Lt,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Mise à jour...":"Enregistrement..."]}):a?"Mettre à jour le Résultat":"Enregistrer le Résultat"}),n.jsx(et,{to:rt,children:n.jsx(ee,{type:"button",variant:"outline",disabled:ie,children:"Annuler"})})]})]})]})]})},a$=()=>{const[e,t]=m.useState([]),[s,a]=m.useState([]),[l,c]=m.useState(!0),[u,f]=m.useState(null),[h,p]=m.useState(""),[x,v]=m.useState("all"),[b,w]=m.useState(!1),[j,N]=m.useState(null),_=Yc(h,300),R=m.useCallback(async()=>{c(!0),f(null);try{const[M,T]=await Promise.all([ne.from("test_type").select(`
            id,
            name,
            created_at,
            updated_at,
            category:category_id (id, name)
          `).order("name",{ascending:!0}),ne.from("category").select("*").order("name",{ascending:!0})]);if(M.error)throw M.error;if(t(M.data||[]),T.error)throw T.error;a(T.data||[])}catch(M){console.error("Erreur lors de la récupération des données:",M),f((M==null?void 0:M.message)||"Une erreur est survenue lors du chargement."),t([]),a([])}finally{c(!1)}},[]);m.useEffect(()=>{R()},[R]);const E=m.useMemo(()=>{let M=e;if(x!=="all"&&(M=M.filter(T=>{var z;return((z=T.category)==null?void 0:z.id)===x})),_){const T=_.toLowerCase();M=M.filter(z=>z.name.toLowerCase().includes(T))}return M},[e,x,_]),C=async M=>{c(!0),f(null);try{const{error:T}=await ne.from("test_type").delete().eq("id",M);if(T)throw T;R()}catch(T){f((T==null?void 0:T.message)||"Erreur lors de la suppression.")}finally{c(!1),w(!1),N(null)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[n.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(Hd,{className:"h-6 w-6"}),"Gestion des Types de Test"]}),n.jsx(et,{to:"/test-types/new",children:n.jsxs(ee,{children:[n.jsx(Ka,{className:"mr-2 h-4 w-4"}),"Ajouter un Type de Test"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 sm:flex-none sm:w-64 space-y-1.5",children:[n.jsx(Ie,{htmlFor:"categoryFilter",className:"text-xs font-medium text-muted-foreground",children:"Filtrer par Catégorie"}),n.jsxs(Qn,{value:x,onValueChange:M=>v(M||"all"),disabled:l||s.length===0,children:[n.jsx(Jn,{id:"categoryFilter",className:"h-10",children:n.jsx(Zn,{placeholder:"Toutes les catégories"})}),n.jsxs(er,{children:[n.jsx(ht,{value:"all",children:"Toutes les catégories"}),s.map(M=>n.jsx(ht,{value:M.id,children:M.name},M.id))]})]})]}),n.jsxs("div",{className:"flex-1 space-y-1.5",children:[n.jsx(Ie,{htmlFor:"testTypeSearch",className:"text-xs font-medium text-muted-foreground",children:"Rechercher par Nom"}),n.jsxs("div",{className:"relative",children:[n.jsx(qc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(We,{id:"testTypeSearch",type:"search",placeholder:"Nom du type de test...",value:h,onChange:M=>p(M.target.value),className:"pl-10 h-10 w-full",disabled:l})]})]})]}),l&&n.jsxs("div",{className:"border rounded-lg",children:[n.jsx(W,{className:"h-12 w-full rounded-t-lg"})," ",n.jsxs("div",{className:"p-4 space-y-2",children:[n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"})]})]}),!l&&u&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur de Chargement"}),n.jsxs(Dt,{children:[u," ",n.jsx(ee,{variant:"link",onClick:R,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),!l&&!u&&n.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:n.jsxs(oa,{children:[n.jsx(ca,{children:n.jsxs(Wt,{children:[n.jsx(gt,{children:"Nom du Type de Test"}),n.jsx(gt,{className:"w-[250px]",children:"Catégorie"}),n.jsx(gt,{className:"text-right w-[150px]",children:"Actions"})]})}),n.jsx(ua,{children:E.length>0?E.map(M=>n.jsxs(Wt,{children:[n.jsx(Qe,{className:"font-medium",children:M.name}),n.jsx(Qe,{children:n.jsx("div",{className:"flex items-center gap-2",children:M.category?n.jsxs(n.Fragment,{children:[n.jsx(mc,{className:"h-4 w-4 text-muted-foreground"}),M.category.name]}):n.jsx("span",{className:"italic text-muted-foreground",children:"N/A"})})}),n.jsxs(Qe,{className:"text-right",children:[n.jsx(et,{to:`/test-types/${M.id}/edit`,children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(Qr,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Modifier"}),n.jsx("span",{className:"sm:hidden",children:"Éditer"})]})}),n.jsxs(ee,{variant:"destructive",size:"sm",className:"ml-2",title:"Supprimer",onClick:()=>{N(M.id),w(!0)},children:[n.jsx(Ll,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Supprimer"}),n.jsx("span",{className:"sm:hidden",children:"Del"})]})]})]},M.id)):n.jsx(Wt,{children:n.jsx(Qe,{colSpan:3,className:"h-24 text-center text-muted-foreground",children:h||x!=="all"?"Aucun type de test ne correspond à vos filtres.":n.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[n.jsx(vf,{className:"h-8 w-8 text-muted-foreground/50"}),"Aucun type de test défini."]})})})})]})}),n.jsx(Ai,{open:b,onOpenChange:w,children:n.jsxs(ki,{children:[n.jsxs(Di,{children:[n.jsx(Oi,{children:"Confirmer la suppression"}),n.jsx(C_,{children:"Êtes-vous sûr de vouloir supprimer ce type de test ? Cette action est irréversible."})]}),n.jsxs(Yl,{children:[n.jsx(E_,{asChild:!0,children:n.jsx(ee,{variant:"outline",children:"Annuler"})}),n.jsx(ee,{variant:"destructive",onClick:()=>{j&&C(j)},disabled:l,children:"Supprimer"})]})]})})]})},Wn=[];for(let e=0;e<256;++e)Wn.push((e+256).toString(16).slice(1));function i$(e,t=0){return(Wn[e[t+0]]+Wn[e[t+1]]+Wn[e[t+2]]+Wn[e[t+3]]+"-"+Wn[e[t+4]]+Wn[e[t+5]]+"-"+Wn[e[t+6]]+Wn[e[t+7]]+"-"+Wn[e[t+8]]+Wn[e[t+9]]+"-"+Wn[e[t+10]]+Wn[e[t+11]]+Wn[e[t+12]]+Wn[e[t+13]]+Wn[e[t+14]]+Wn[e[t+15]]).toLowerCase()}let Ep;const l$=new Uint8Array(16);function o$(){if(!Ep){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ep=crypto.getRandomValues.bind(crypto)}return Ep(l$)}const c$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rj={randomUUID:c$};function sj(e,t,s){var l;if(rj.randomUUID&&!e)return rj.randomUUID();e=e||{};const a=e.random??((l=e.rng)==null?void 0:l.call(e))??o$();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,i$(a)}function Mc({className:e,...t}){return n.jsx("textarea",{"data-slot":"textarea",className:Me("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const aj=()=>{const{testTypeId:e}=cr(),t=rr(),s=!!e,[a,l]=m.useState(""),[c,u]=m.useState(""),[f,h]=m.useState(void 0),[p,x]=m.useState([]),[v,b]=m.useState([]),[w,j]=m.useState(null),[N,_]=m.useState([]),[R,E]=m.useState(!0),[C,M]=m.useState(!1),[T,z]=m.useState(null),q=m.useCallback(async()=>{E(!0),z(null),x([]),_([]),j(null),l(""),u(""),h(void 0);try{const{data:re,error:O}=await ne.from("category").select("*").order("name");if(O)throw O;if(b(re||[]),s&&e){const{data:ie,error:ue}=await ne.from("test_type").select("*").eq("id",e).single();if(ue)throw ue;if(!ie)throw new Error("Type de test non trouvé.");const{data:P,error:X}=await ne.from("test_parameter").select("*").eq("test_type_id",e).order("name");if(X)throw X;j(ie),l(ie.name),u(ie.description||""),h(ie.category_id);const V=(P||[]).map(te=>({...te,tempId:te.id||sj()}));x(V),_(JSON.parse(JSON.stringify(V)))}}catch(re){console.error("Erreur chargement données:",re),z(re.message||"Impossible de charger les données.")}finally{E(!1)}},[s,e]);m.useEffect(()=>{q()},[q]);const F=(re,O,ie)=>{x(ue=>ue.map(P=>P.tempId===re?{...P,[O]:O==="order"?Number(ie):ie}:P))},U=()=>{const re=p.reduce((ie,ue)=>Math.max(ie,ue.order??0),0),O={tempId:sj(),name:"",unit:"",reference_range:"",description:"",order:re+1,id:void 0,test_type_id:void 0};x(ie=>[...ie,O])},G=re=>{x(O=>O.filter(ie=>ie.tempId!==re))},ce=async re=>{if(re.preventDefault(),z(null),!a.trim()){z("Le nom du type de test est requis.");return}if(!f){z("Veuillez sélectionner une catégorie.");return}const O=p.find(ie=>{var ue;return!((ue=ie.name)!=null&&ue.trim())});if(O){z(`Le nom est requis pour tous les paramètres (problème avec paramètre temporaire ID ${O.tempId}).`);return}M(!0);try{let ie=e;const ue={name:a.trim(),category_id:f,description:c.trim()||null};if(s){const{error:L}=await ne.from("test_type").update(ue).eq("id",ie);if(L)throw L}else{const{data:L,error:Y}=await ne.from("test_type").insert(ue).select("id").single();if(Y)throw Y;if(!(L!=null&&L.id))throw new Error("Impossible d'obtenir l'ID du nouveau type de test.");ie=L.id}const P=new Map(p.map(L=>[L.tempId,L])),X=new Map(N.map(L=>[L.tempId,L])),V=[],te=[],k=[];if(N.forEach(L=>{!P.has(L.tempId)&&L.id&&V.push(L.id)}),p.forEach(L=>{const Y=X.get(L.tempId),H={test_type_id:ie,name:L.name,unit:L.unit||null,reference_range:L.reference_range||null,description:L.description||null,order:L.order??0};if(Y!=null&&Y.id){const D={test_type_id:Y.test_type_id||ie,name:Y.name,unit:Y.unit||null,reference_range:Y.reference_range||null,description:Y.description||null,order:Y.order??0};JSON.stringify(H)!==JSON.stringify(D)&&k.push({id:Y.id,...H})}else te.push(H)}),V.length>0){console.log("Deleting parameters:",V);const{error:L}=await ne.from("test_parameter").delete().in("id",V);if(L)throw new Error(`Erreur suppression paramètres: ${L.message}`)}if(te.length>0){console.log("Inserting parameters:",te);const{error:L}=await ne.from("test_parameter").insert(te);if(L)throw new Error(`Erreur insertion paramètres: ${L.message}`)}if(k.length>0){console.log("Updating parameters:",k);const{error:L}=await ne.from("test_parameter").upsert(k);if(L)throw new Error(`Erreur mise à jour paramètres: ${L.message}`)}console.log("Save successful"),t("/test-types")}catch(ie){console.error("Erreur sauvegarde type de test:",ie),z(ie.message||`Une erreur est survenue lors de ${s?"la mise à jour":"l'enregistrement"}.`)}finally{M(!1)}};return R?n.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[n.jsx(W,{className:"h-8 w-32"})," ",n.jsxs(Ce,{children:[n.jsxs(Te,{children:[" ",n.jsx(W,{className:"h-6 w-1/2"})," ",n.jsx(W,{className:"h-4 w-3/4"})," "]}),n.jsxs(Re,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-10 w-full"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-10 w-full"})]}),n.jsx(Xr,{}),n.jsx(W,{className:"h-6 w-1/3"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(W,{className:"h-20 w-full"}),n.jsx(W,{className:"h-20 w-full"})]}),n.jsx(W,{className:"h-9 w-36"})]}),n.jsx(cs,{children:n.jsx(W,{className:"h-10 w-32"})})]})]}):n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsx("div",{className:"mb-4",children:n.jsx(et,{to:"/test-types",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour à la liste"]})})}),n.jsx("form",{onSubmit:ce,children:n.jsxs(Ce,{className:"shadow-md",children:[n.jsxs(Te,{children:[n.jsxs(ft,{className:"text-xl font-semibold flex items-center gap-2",children:[s?n.jsx(Hd,{className:"h-5 w-5"}):n.jsx(Hd,{className:"h-5 w-5"}),s?"Modifier le Type de Test":"Ajouter un Type de Test"]}),n.jsx(xr,{children:"Définissez le nom, la catégorie et les paramètres pour ce type de test."})]}),n.jsxs(Re,{className:"space-y-6",children:[T&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsx(Dt,{className:"whitespace-pre-line",children:T})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ie,{htmlFor:"testTypeName",className:"font-semibold",children:["Nom du Type ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(We,{id:"testTypeName",value:a,onChange:re=>l(re.target.value),placeholder:"Ex: Numération Formule Sanguine",disabled:C,required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ie,{htmlFor:"testTypeDescription",className:"font-semibold",children:"Description"}),n.jsx(Mc,{id:"testTypeDescription",value:c,onChange:re=>u(re.target.value),placeholder:"Description du type de test, instructions de préparation, etc.",disabled:C,rows:3})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ie,{htmlFor:"category",className:"font-semibold",children:["Catégorie ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsxs(Qn,{value:f,onValueChange:re=>h(re),disabled:C||v.length===0,required:!0,children:[n.jsx(Jn,{id:"category",className:"h-10",children:n.jsx(Zn,{placeholder:"Sélectionner une catégorie..."})}),n.jsxs(er,{children:[v.map(re=>n.jsx(ht,{value:re.id,children:re.name},re.id)),v.length===0&&n.jsx(ht,{value:"-",disabled:!0,children:"Aucune catégorie"})]})]})]})]}),n.jsx(Xr,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Paramètres Associés"}),p.length>0&&n.jsx("div",{className:"space-y-4",children:p.map((re,O)=>n.jsxs(Ce,{className:"bg-muted/30 p-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[n.jsxs(Ie,{htmlFor:`param-name-${re.tempId}`,className:"text-sm",children:["Nom du Paramètre"," ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(We,{id:`param-name-${re.tempId}`,value:re.name||"",onChange:ie=>F(re.tempId,"name",ie.target.value),placeholder:"Ex: Hémoglobine",disabled:C,required:!0,className:"bg-background h-9"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(Ie,{htmlFor:`param-unit-${re.tempId}`,className:"text-sm",children:"Unité"}),n.jsx(We,{id:`param-unit-${re.tempId}`,value:re.unit||"",onChange:ie=>F(re.tempId,"unit",ie.target.value),placeholder:"Ex: g/dL",disabled:C,className:"bg-background h-9"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(Ie,{htmlFor:`param-ref-${re.tempId}`,className:"text-sm",children:"Valeurs de Référence"}),n.jsx(We,{id:`param-ref-${re.tempId}`,value:re.reference_range||"",onChange:ie=>F(re.tempId,"reference_range",ie.target.value),placeholder:"Ex: 12.0 - 16.0",disabled:C,className:"bg-background h-9"})]}),n.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[n.jsx(Ie,{htmlFor:`param-desc-${re.tempId}`,className:"text-sm",children:"Description (Optionnel)"}),n.jsx(Mc,{id:`param-desc-${re.tempId}`,value:re.description||"",onChange:ie=>F(re.tempId,"description",ie.target.value),placeholder:"Explication du paramètre ou des valeurs...",disabled:C,className:"bg-background",rows:2})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(Ie,{htmlFor:`param-order-${re.tempId}`,className:"text-sm",children:"Ordre"}),n.jsx(We,{id:`param-order-${re.tempId}`,value:re.order||"",onChange:ie=>F(re.tempId,"order",ie.target.value),type:"number",disabled:C,className:"bg-background h-9"})]})]}),n.jsx("div",{className:"mt-3 text-right",children:n.jsxs(ee,{type:"button",variant:"destructive",size:"sm",onClick:()=>G(re.tempId),disabled:C,className:"h-8 px-2 py-1 text-xs",children:[n.jsx(Fc,{className:"h-3.5 w-3.5 mr-1"}),"Retirer Param. #",O+1]})})]},re.tempId))}),p.length===0&&n.jsx("p",{className:"text-sm text-muted-foreground italic text-center py-4",children:"Aucun paramètre défini pour ce type de test."}),n.jsxs(ee,{type:"button",variant:"outline",onClick:U,disabled:C,className:"mt-4",children:[n.jsx(Ka,{className:"mr-2 h-4 w-4"}),"Ajouter un Paramètre"]})]})]}),n.jsxs(cs,{className:"border-t px-6 py-4 flex justify-between",children:[n.jsx(ee,{type:"submit",disabled:C||R,children:C?n.jsxs(n.Fragment,{children:[n.jsx(Lt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarde..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Fl,{className:"mr-2 h-4 w-4"}),s?"Enregistrer les Modifications":"Enregistrer le Type de Test"]})}),n.jsx(et,{to:"/test-types",children:n.jsx(ee,{type:"button",variant:"outline",disabled:C,children:"Annuler"})})]})]})})]})},ij=()=>{const{doctorId:e}=cr(),t=rr(),s=!!e,[a,l]=m.useState({full_name:"",phone:"",hospital:"",bio:""}),[c,u]=m.useState(s),[f,h]=m.useState(!1),[p,x]=m.useState(null),v=m.useCallback(async()=>{if(!s||!e){u(!1);return}u(!0),x(null);try{const{data:j,error:N}=await ne.from("doctor").select("*").eq("id",e).single();if(N)throw N;if(!j)throw new Error("Médecin non trouvé.");l({full_name:j.full_name||"",phone:j.phone||"",hospital:j.hospital||"",bio:j.bio||""})}catch(j){console.error("Erreur chargement médecin:",j),j instanceof Error?x(j.message||"Impossible de charger les données du médecin."):x("Une erreur inconnue est survenue.")}finally{u(!1)}},[s,e]);m.useEffect(()=>{v()},[v]);const b=j=>{const{name:N,value:_}=j.target;l(R=>({...R,[N]:_}))},w=async j=>{var N,_,R;if(j.preventDefault(),x(null),!a.full_name||!a.full_name.trim()){x("Le nom complet du médecin est requis.");return}h(!0);try{const E={full_name:a.full_name.trim(),phone:((N=a.phone)==null?void 0:N.trim())||null,hospital:((_=a.hospital)==null?void 0:_.trim())||null,bio:((R=a.bio)==null?void 0:R.trim())||null};let C=null;if(s){const{error:M}=await ne.from("doctor").update(E).eq("id",e);C=M}else{const{error:M}=await ne.from("doctor").insert(E);C=M}if(C)if(C.code==="23505")x("Un médecin avec ces informations (ex: nom) existe peut-être déjà.");else throw C;else t("/doctors")}catch(E){console.error(`Erreur ${s?"mise à jour":"création"} médecin:`,E),E instanceof Error?x(E.message||`Une erreur est survenue lors de ${s?"la mise à jour":"l'enregistrement"}.`):x(`Une erreur inconnue est survenue lors de ${s?"la mise à jour":"l'enregistrement"}.`)}finally{h(!1)}};return c?n.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[n.jsx(W,{className:"h-8 w-32"})," ",n.jsxs(Ce,{children:[n.jsxs(Te,{children:[" ",n.jsx(W,{className:"h-6 w-1/2"})," ",n.jsx(W,{className:"h-4 w-3/4"})," "]}),n.jsxs(Re,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-10 w-full"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-10 w-full"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-10 w-full"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-20 w-full"})]})]}),n.jsx(cs,{children:n.jsx(W,{className:"h-10 w-32"})})]})]}):n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsx("div",{className:"mb-4",children:n.jsx(et,{to:"/doctors",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour à la liste"]})})}),n.jsx("form",{onSubmit:w,children:n.jsxs(Ce,{className:"shadow-md",children:[n.jsxs(Te,{children:[n.jsxs(ft,{className:"text-xl font-semibold flex items-center gap-2",children:[s?n.jsx(Qr,{className:"h-5 w-5"}):n.jsx(z1,{className:"h-5 w-5"}),s?"Modifier le Médecin":"Ajouter un Nouveau Médecin"]}),n.jsx(xr,{children:s?"Mettez à jour les informations du médecin.":"Entrez les informations du nouveau médecin."})]}),n.jsxs(Re,{className:"space-y-6",children:[p&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsx(Dt,{className:"whitespace-pre-line",children:p})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ie,{htmlFor:"full_name",className:"font-semibold",children:["Nom Complet ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(We,{id:"full_name",name:"full_name",value:a.full_name||"",onChange:b,placeholder:"Ex: Dr. Alain Dupont",disabled:f,required:!0,className:"h-10"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ie,{htmlFor:"phone",className:"font-semibold",children:"Téléphone"}),n.jsx(We,{id:"phone",name:"phone",type:"tel",value:a.phone||"",onChange:b,placeholder:"Ex: +33 6 11 22 33 44",disabled:f,className:"h-10"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ie,{htmlFor:"hospital",className:"font-semibold",children:"Hôpital / Clinique"}),n.jsx(We,{id:"hospital",name:"hospital",value:a.hospital||"",onChange:b,placeholder:"Ex: Hôpital Central",disabled:f,className:"h-10"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ie,{htmlFor:"bio",className:"font-semibold",children:"Bio / Notes (Optionnel)"}),n.jsx(Mc,{id:"bio",name:"bio",value:a.bio||"",onChange:b,placeholder:"Spécialité, notes importantes...",disabled:f,rows:4})]})]}),n.jsxs(cs,{className:"border-t px-6 py-4 flex justify-between",children:[n.jsx(ee,{type:"submit",disabled:f||c,children:f?n.jsxs(n.Fragment,{children:[n.jsx(Lt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarde..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Fl,{className:"mr-2 h-4 w-4"}),s?"Enregistrer les Modifications":"Enregistrer le Médecin"]})}),n.jsx(et,{to:"/doctors",children:n.jsx(ee,{type:"button",variant:"outline",disabled:f,children:"Annuler"})})]})]})})]})},u$=()=>{const[e,t]=m.useState([]),[s,a]=m.useState(!0),[l,c]=m.useState(null),[u,f]=m.useState(null),[h,p]=m.useState(!1),[x,v]=m.useState(!1),[b,w]=m.useState(null),[j,N]=m.useState({name:""}),[_,R]=m.useState(null),E=m.useCallback(async(F=!0)=>{F&&a(!0),c(null);try{const{data:U,error:G}=await ne.from("category").select("*").order("name",{ascending:!0});if(G)throw G;t(U||[])}catch(U){console.error("Erreur chargement catégories:",U),U instanceof Error?c(U.message||"Impossible de charger les catégories."):c("Impossible de charger les catégories."),t([])}finally{F&&a(!1)}},[]);m.useEffect(()=>{E()},[E]);const C=(F=null)=>{w(F),N({name:(F==null?void 0:F.name)||""}),f(null),v(!0)},M=()=>{v(!1),setTimeout(()=>{w(null),N({name:""})},150)},T=F=>{N({name:F.target.value})},z=async F=>{if(F.preventDefault(),f(null),!j.name||!j.name.trim()){f("Le nom de la catégorie est requis.");return}p(!0);const U={name:j.name.trim()};try{let G=null;if(b){const{error:ce}=await ne.from("category").update(U).eq("id",b.id);G=ce}else{const{error:ce}=await ne.from("category").insert(U);G=ce}if(G)if(G.code==="23505")f("Ce nom de catégorie existe déjà.");else throw G;else M(),await E(!1)}catch(G){console.error("Erreur sauvegarde catégorie:",G),G instanceof Error?f(G.message||"Une erreur est survenue."):f("Une erreur est survenue.")}finally{p(!1)}},q=async()=>{if(_){p(!0),c(null);try{const{error:F}=await ne.from("category").delete().eq("id",_.id);if(F)if(F.code==="23503")c(`Impossible de supprimer la catégorie "${_.name}" car elle est utilisée par un ou plusieurs types de test.`),R(null);else throw F;else R(null),await E(!1)}catch(F){console.error("Erreur suppression catégorie:",F),F instanceof Error?c(F.message||"Une erreur est survenue lors de la suppression."):c("Une erreur est survenue lors de la suppression."),R(null)}finally{p(!1)}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[n.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(mc,{className:"h-6 w-6"}),"Gestion des Catégories"]}),n.jsxs(ee,{onClick:()=>C(null),children:[n.jsx(Ka,{className:"mr-2 h-4 w-4"}),"Ajouter une Catégorie"]})]}),l&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsx(Dt,{children:l})]}),s&&n.jsxs("div",{className:"border rounded-lg",children:[n.jsx(W,{className:"h-12 w-full rounded-t-lg"})," ",n.jsxs("div",{className:"p-4 space-y-2",children:[n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"})]})]}),!s&&!l&&n.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:n.jsxs(oa,{children:[n.jsx(ca,{children:n.jsxs(Wt,{children:[n.jsx(gt,{children:"Nom de la Catégorie"}),n.jsx(gt,{className:"text-right w-[200px]",children:"Actions"})]})}),n.jsx(ua,{children:e.length>0?e.map(F=>n.jsxs(Wt,{children:[n.jsx(Qe,{className:"font-medium",children:F.name}),n.jsxs(Qe,{className:"text-right space-x-2",children:[n.jsx(ee,{variant:"outline",size:"sm",onClick:()=>C(F),children:n.jsx(Qr,{className:"h-4 w-4"})}),n.jsx(_c,{children:n.jsx(_f,{asChild:!0,children:n.jsx(ee,{variant:"destructive",size:"sm",onClick:U=>{U.stopPropagation(),R(F)},children:n.jsx(Fc,{className:"h-4 w-4"})})})})]})]},F.id)):n.jsx(Wt,{children:n.jsx(Qe,{colSpan:2,className:"h-24 text-center text-muted-foreground",children:n.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[n.jsx(vf,{className:"h-8 w-8 text-muted-foreground/50"}),"Aucune catégorie définie."]})})})})]})}),n.jsx(Ai,{open:x,onOpenChange:v,children:n.jsx(ki,{className:"sm:max-w-[425px]",children:n.jsxs("form",{onSubmit:z,children:[n.jsxs(Di,{children:[n.jsx(Oi,{children:b?"Modifier la Catégorie":"Ajouter une Catégorie"}),n.jsx(C_,{children:b?"Modifiez le nom de la catégorie ci-dessous.":"Entrez le nom de la nouvelle catégorie."})]}),n.jsxs("div",{className:"grid gap-4 py-4",children:[u&&n.jsxs(At,{variant:"destructive",className:"text-xs",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsx(Dt,{children:u})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsxs(Ie,{htmlFor:"category-name",className:"text-right col-span-1",children:["Nom ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(We,{id:"category-name",name:"name",value:j.name,onChange:T,className:"col-span-3 h-9",disabled:h,required:!0,autoFocus:!0})]})]}),n.jsxs(Yl,{children:[n.jsx(E_,{asChild:!0,children:n.jsx(ee,{type:"button",variant:"outline",disabled:h,children:"Annuler"})}),n.jsxs(ee,{type:"submit",disabled:h,children:[h&&n.jsx(Lt,{className:"mr-2 h-4 w-4 animate-spin"}),b?"Enregistrer Modifications":"Ajouter Catégorie"]})]})]})})}),n.jsx(_c,{open:!!_,onOpenChange:F=>!F&&R(null),children:n.jsxs(Sf,{children:[n.jsxs(Ef,{children:[n.jsx(Rf,{children:"Êtes-vous sûr(e) ?"}),n.jsxs(Tf,{children:["Cette action est irréversible. Voulez-vous vraiment supprimer la catégorie",n.jsxs("span",{className:"font-medium",children:[' "',_==null?void 0:_.name,'"']})," ?",n.jsx("br",{}),n.jsx("span",{className:"text-destructive/80 font-medium",children:"Attention :"})," ","La suppression échouera si des types de test utilisent encore cette catégorie."]})]}),n.jsxs(Cf,{children:[n.jsx(Mf,{disabled:h,onClick:()=>R(null),children:"Annuler"}),n.jsxs(ee,{variant:"destructive",onClick:q,disabled:h,children:[h&&n.jsx(Lt,{className:"mr-2 h-4 w-4 animate-spin"}),"Supprimer"]})]})]})})]})};function d$(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}const f$=e=>{switch(e){case"success":return p$;case"info":return x$;case"warning":return g$;case"error":return v$;default:return null}},h$=Array(12).fill(0),m$=({visible:e,className:t})=>we.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},we.createElement("div",{className:"sonner-spinner"},h$.map((s,a)=>we.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),p$=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),g$=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),x$=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),v$=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),y$=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},we.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),we.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),b$=()=>{const[e,t]=we.useState(document.hidden);return we.useEffect(()=>{const s=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),e};let fg=1;class w${constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;const{message:a,...l}=t,c=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:fg++,u=this.toasts.find(h=>h.id===c),f=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),u?this.toasts=this.toasts.map(h=>h.id===c?(this.publish({...h,...t,id:c,title:a}),{...h,...t,id:c,dismissible:f,title:a}):h):this.addToast({title:a,...l,dismissible:f,id:c}),c},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:t,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(a=>a({id:s.id,dismiss:!0}))}),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let a;s.loading!==void 0&&(a=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const l=Promise.resolve(t instanceof Function?t():t);let c=a!==void 0,u;const f=l.then(async p=>{if(u=["resolve",p],we.isValidElement(p))c=!1,this.create({id:a,type:"default",message:p});else if(N$(p)&&!p.ok){c=!1;const v=typeof s.error=="function"?await s.error(`HTTP error! status: ${p.status}`):s.error,b=typeof s.description=="function"?await s.description(`HTTP error! status: ${p.status}`):s.description,j=typeof v=="object"&&!we.isValidElement(v)?v:{message:v};this.create({id:a,type:"error",description:b,...j})}else if(p instanceof Error){c=!1;const v=typeof s.error=="function"?await s.error(p):s.error,b=typeof s.description=="function"?await s.description(p):s.description,j=typeof v=="object"&&!we.isValidElement(v)?v:{message:v};this.create({id:a,type:"error",description:b,...j})}else if(s.success!==void 0){c=!1;const v=typeof s.success=="function"?await s.success(p):s.success,b=typeof s.description=="function"?await s.description(p):s.description,j=typeof v=="object"&&!we.isValidElement(v)?v:{message:v};this.create({id:a,type:"success",description:b,...j})}}).catch(async p=>{if(u=["reject",p],s.error!==void 0){c=!1;const x=typeof s.error=="function"?await s.error(p):s.error,v=typeof s.description=="function"?await s.description(p):s.description,w=typeof x=="object"&&!we.isValidElement(x)?x:{message:x};this.create({id:a,type:"error",description:v,...w})}}).finally(()=>{c&&(this.dismiss(a),a=void 0),s.finally==null||s.finally.call(s)}),h=()=>new Promise((p,x)=>f.then(()=>u[0]==="reject"?x(u[1]):p(u[1])).catch(x));return typeof a!="string"&&typeof a!="number"?{unwrap:h}:Object.assign(a,{unwrap:h})},this.custom=(t,s)=>{const a=(s==null?void 0:s.id)||fg++;return this.create({jsx:t(a),id:a,...s}),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const gr=new w$,j$=(e,t)=>{const s=(t==null?void 0:t.id)||fg++;return gr.addToast({title:e,...t,id:s}),s},N$=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",_$=j$,S$=()=>gr.toasts,E$=()=>gr.getActiveToasts(),Cp=Object.assign(_$,{success:gr.success,info:gr.info,warning:gr.warning,error:gr.error,custom:gr.custom,message:gr.message,promise:gr.promise,dismiss:gr.dismiss,loading:gr.loading},{getHistory:S$,getToasts:E$});d$("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Sd(e){return e.label!==void 0}const C$=3,R$="24px",T$="16px",lj=4e3,M$=356,A$=14,k$=45,D$=200;function bs(...e){return e.filter(Boolean).join(" ")}function O$(e){const[t,s]=e.split("-"),a=[];return t&&a.push(t),s&&a.push(s),a}const P$=e=>{var t,s,a,l,c,u,f,h,p;const{invert:x,toast:v,unstyled:b,interacting:w,setHeights:j,visibleToasts:N,heights:_,index:R,toasts:E,expanded:C,removeToast:M,defaultRichColors:T,closeButton:z,style:q,cancelButtonStyle:F,actionButtonStyle:U,className:G="",descriptionClassName:ce="",duration:re,position:O,gap:ie,expandByDefault:ue,classNames:P,icons:X,closeButtonAriaLabel:V="Close toast"}=e,[te,k]=we.useState(null),[L,Y]=we.useState(null),[H,D]=we.useState(!1),[I,$]=we.useState(!1),[K,ae]=we.useState(!1),[ge,de]=we.useState(!1),[Se,Ae]=we.useState(!1),[it,rt]=we.useState(0),[xe,pe]=we.useState(0),Pe=we.useRef(v.duration||re||lj),be=we.useRef(null),Ne=we.useRef(null),Oe=R===0,Xe=R+1<=N,Fe=v.type,wt=v.dismissible!==!1,St=v.className||"",Vt=v.descriptionClassName||"",Be=we.useMemo(()=>_.findIndex(J=>J.toastId===v.id)||0,[_,v.id]),nt=we.useMemo(()=>{var J;return(J=v.closeButton)!=null?J:z},[v.closeButton,z]),en=we.useMemo(()=>v.duration||re||lj,[v.duration,re]),On=we.useRef(0),Tn=we.useRef(0),pn=we.useRef(0),cn=we.useRef(null),[tn,Yt]=O.split("-"),sr=we.useMemo(()=>_.reduce((J,ve,_e)=>_e>=Be?J:J+ve.height,0),[_,Be]),Mn=b$(),gn=v.invert||x,wr=Fe==="loading";Tn.current=we.useMemo(()=>Be*ie+sr,[Be,sr]),we.useEffect(()=>{Pe.current=en},[en]),we.useEffect(()=>{D(!0)},[]),we.useEffect(()=>{const J=Ne.current;if(J){const ve=J.getBoundingClientRect().height;return pe(ve),j(_e=>[{toastId:v.id,height:ve,position:v.position},..._e]),()=>j(_e=>_e.filter(ke=>ke.toastId!==v.id))}},[j,v.id]),we.useLayoutEffect(()=>{if(!H)return;const J=Ne.current,ve=J.style.height;J.style.height="auto";const _e=J.getBoundingClientRect().height;J.style.height=ve,pe(_e),j(ke=>ke.find(ot=>ot.toastId===v.id)?ke.map(ot=>ot.toastId===v.id?{...ot,height:_e}:ot):[{toastId:v.id,height:_e,position:v.position},...ke])},[H,v.title,v.description,j,v.id]);const jn=we.useCallback(()=>{$(!0),rt(Tn.current),j(J=>J.filter(ve=>ve.toastId!==v.id)),setTimeout(()=>{M(v)},D$)},[v,M,j,Tn]);we.useEffect(()=>{if(v.promise&&Fe==="loading"||v.duration===1/0||v.type==="loading")return;let J;return C||w||Mn?(()=>{if(pn.current<On.current){const ke=new Date().getTime()-On.current;Pe.current=Pe.current-ke}pn.current=new Date().getTime()})():(()=>{Pe.current!==1/0&&(On.current=new Date().getTime(),J=setTimeout(()=>{v.onAutoClose==null||v.onAutoClose.call(v,v),jn()},Pe.current))})(),()=>clearTimeout(J)},[C,w,v,Fe,Mn,jn]),we.useEffect(()=>{v.delete&&jn()},[jn,v.delete]);function Os(){var J;if(X!=null&&X.loading){var ve;return we.createElement("div",{className:bs(P==null?void 0:P.loader,v==null||(ve=v.classNames)==null?void 0:ve.loader,"sonner-loader"),"data-visible":Fe==="loading"},X.loading)}return we.createElement(m$,{className:bs(P==null?void 0:P.loader,v==null||(J=v.classNames)==null?void 0:J.loader),visible:Fe==="loading"})}const Or=v.icon||(X==null?void 0:X[Fe])||f$(Fe);var Xt,lt;return we.createElement("li",{tabIndex:0,ref:Ne,className:bs(G,St,P==null?void 0:P.toast,v==null||(t=v.classNames)==null?void 0:t.toast,P==null?void 0:P.default,P==null?void 0:P[Fe],v==null||(s=v.classNames)==null?void 0:s[Fe]),"data-sonner-toast":"","data-rich-colors":(Xt=v.richColors)!=null?Xt:T,"data-styled":!(v.jsx||v.unstyled||b),"data-mounted":H,"data-promise":!!v.promise,"data-swiped":Se,"data-removed":I,"data-visible":Xe,"data-y-position":tn,"data-x-position":Yt,"data-index":R,"data-front":Oe,"data-swiping":K,"data-dismissible":wt,"data-type":Fe,"data-invert":gn,"data-swipe-out":ge,"data-swipe-direction":L,"data-expanded":!!(C||ue&&H),style:{"--index":R,"--toasts-before":R,"--z-index":E.length-R,"--offset":`${I?it:Tn.current}px`,"--initial-height":ue?"auto":`${xe}px`,...q,...v.style},onDragEnd:()=>{ae(!1),k(null),cn.current=null},onPointerDown:J=>{wr||!wt||(be.current=new Date,rt(Tn.current),J.target.setPointerCapture(J.pointerId),J.target.tagName!=="BUTTON"&&(ae(!0),cn.current={x:J.clientX,y:J.clientY}))},onPointerUp:()=>{var J,ve,_e;if(ge||!wt)return;cn.current=null;const ke=Number(((J=Ne.current)==null?void 0:J.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),He=Number(((ve=Ne.current)==null?void 0:ve.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ot=new Date().getTime()-((_e=be.current)==null?void 0:_e.getTime()),Ge=te==="x"?ke:He,mt=Math.abs(Ge)/ot;if(Math.abs(Ge)>=k$||mt>.11){rt(Tn.current),v.onDismiss==null||v.onDismiss.call(v,v),Y(te==="x"?ke>0?"right":"left":He>0?"down":"up"),jn(),de(!0);return}else{var ct,xt;(ct=Ne.current)==null||ct.style.setProperty("--swipe-amount-x","0px"),(xt=Ne.current)==null||xt.style.setProperty("--swipe-amount-y","0px")}Ae(!1),ae(!1),k(null)},onPointerMove:J=>{var ve,_e,ke;if(!cn.current||!wt||((ve=window.getSelection())==null?void 0:ve.toString().length)>0)return;const ot=J.clientY-cn.current.y,Ge=J.clientX-cn.current.x;var mt;const ct=(mt=e.swipeDirections)!=null?mt:O$(O);!te&&(Math.abs(Ge)>1||Math.abs(ot)>1)&&k(Math.abs(Ge)>Math.abs(ot)?"x":"y");let xt={x:0,y:0};const Ot=Ut=>1/(1.5+Math.abs(Ut)/20);if(te==="y"){if(ct.includes("top")||ct.includes("bottom"))if(ct.includes("top")&&ot<0||ct.includes("bottom")&&ot>0)xt.y=ot;else{const Ut=ot*Ot(ot);xt.y=Math.abs(Ut)<Math.abs(ot)?Ut:ot}}else if(te==="x"&&(ct.includes("left")||ct.includes("right")))if(ct.includes("left")&&Ge<0||ct.includes("right")&&Ge>0)xt.x=Ge;else{const Ut=Ge*Ot(Ge);xt.x=Math.abs(Ut)<Math.abs(Ge)?Ut:Ge}(Math.abs(xt.x)>0||Math.abs(xt.y)>0)&&Ae(!0),(_e=Ne.current)==null||_e.style.setProperty("--swipe-amount-x",`${xt.x}px`),(ke=Ne.current)==null||ke.style.setProperty("--swipe-amount-y",`${xt.y}px`)}},nt&&!v.jsx&&Fe!=="loading"?we.createElement("button",{"aria-label":V,"data-disabled":wr,"data-close-button":!0,onClick:wr||!wt?()=>{}:()=>{jn(),v.onDismiss==null||v.onDismiss.call(v,v)},className:bs(P==null?void 0:P.closeButton,v==null||(a=v.classNames)==null?void 0:a.closeButton)},(lt=X==null?void 0:X.close)!=null?lt:y$):null,(Fe||v.icon||v.promise)&&v.icon!==null&&((X==null?void 0:X[Fe])!==null||v.icon)?we.createElement("div",{"data-icon":"",className:bs(P==null?void 0:P.icon,v==null||(l=v.classNames)==null?void 0:l.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||Os():null,v.type!=="loading"?Or:null):null,we.createElement("div",{"data-content":"",className:bs(P==null?void 0:P.content,v==null||(c=v.classNames)==null?void 0:c.content)},we.createElement("div",{"data-title":"",className:bs(P==null?void 0:P.title,v==null||(u=v.classNames)==null?void 0:u.title)},v.jsx?v.jsx:typeof v.title=="function"?v.title():v.title),v.description?we.createElement("div",{"data-description":"",className:bs(ce,Vt,P==null?void 0:P.description,v==null||(f=v.classNames)==null?void 0:f.description)},typeof v.description=="function"?v.description():v.description):null),we.isValidElement(v.cancel)?v.cancel:v.cancel&&Sd(v.cancel)?we.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||F,onClick:J=>{Sd(v.cancel)&&wt&&(v.cancel.onClick==null||v.cancel.onClick.call(v.cancel,J),jn())},className:bs(P==null?void 0:P.cancelButton,v==null||(h=v.classNames)==null?void 0:h.cancelButton)},v.cancel.label):null,we.isValidElement(v.action)?v.action:v.action&&Sd(v.action)?we.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||U,onClick:J=>{Sd(v.action)&&(v.action.onClick==null||v.action.onClick.call(v.action,J),!J.defaultPrevented&&jn())},className:bs(P==null?void 0:P.actionButton,v==null||(p=v.classNames)==null?void 0:p.actionButton)},v.action.label):null)};function oj(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function L$(e,t){const s={};return[e,t].forEach((a,l)=>{const c=l===1,u=c?"--mobile-offset":"--offset",f=c?T$:R$;function h(p){["top","right","bottom","left"].forEach(x=>{s[`${u}-${x}`]=typeof p=="number"?`${p}px`:p})}typeof a=="number"||typeof a=="string"?h(a):typeof a=="object"?["top","right","bottom","left"].forEach(p=>{a[p]===void 0?s[`${u}-${p}`]=f:s[`${u}-${p}`]=typeof a[p]=="number"?`${a[p]}px`:a[p]}):h(f)}),s}const I$=we.forwardRef(function(t,s){const{invert:a,position:l="bottom-right",hotkey:c=["altKey","KeyT"],expand:u,closeButton:f,className:h,offset:p,mobileOffset:x,theme:v="light",richColors:b,duration:w,style:j,visibleToasts:N=C$,toastOptions:_,dir:R=oj(),gap:E=A$,icons:C,containerAriaLabel:M="Notifications"}=t,[T,z]=we.useState([]),q=we.useMemo(()=>Array.from(new Set([l].concat(T.filter(L=>L.position).map(L=>L.position)))),[T,l]),[F,U]=we.useState([]),[G,ce]=we.useState(!1),[re,O]=we.useState(!1),[ie,ue]=we.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),P=we.useRef(null),X=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=we.useRef(null),te=we.useRef(!1),k=we.useCallback(L=>{z(Y=>{var H;return(H=Y.find(D=>D.id===L.id))!=null&&H.delete||gr.dismiss(L.id),Y.filter(({id:D})=>D!==L.id)})},[]);return we.useEffect(()=>gr.subscribe(L=>{if(L.dismiss){requestAnimationFrame(()=>{z(Y=>Y.map(H=>H.id===L.id?{...H,delete:!0}:H))});return}setTimeout(()=>{Mj.flushSync(()=>{z(Y=>{const H=Y.findIndex(D=>D.id===L.id);return H!==-1?[...Y.slice(0,H),{...Y[H],...L},...Y.slice(H+1)]:[L,...Y]})})})}),[T]),we.useEffect(()=>{if(v!=="system"){ue(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ue("dark"):ue("light")),typeof window>"u")return;const L=window.matchMedia("(prefers-color-scheme: dark)");try{L.addEventListener("change",({matches:Y})=>{ue(Y?"dark":"light")})}catch{L.addListener(({matches:H})=>{try{ue(H?"dark":"light")}catch(D){console.error(D)}})}},[v]),we.useEffect(()=>{T.length<=1&&ce(!1)},[T]),we.useEffect(()=>{const L=Y=>{var H;if(c.every($=>Y[$]||Y.code===$)){var I;ce(!0),(I=P.current)==null||I.focus()}Y.code==="Escape"&&(document.activeElement===P.current||(H=P.current)!=null&&H.contains(document.activeElement))&&ce(!1)};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[c]),we.useEffect(()=>{if(P.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,te.current=!1)}},[P.current]),we.createElement("section",{ref:s,"aria-label":`${M} ${X}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},q.map((L,Y)=>{var H;const[D,I]=L.split("-");return T.length?we.createElement("ol",{key:L,dir:R==="auto"?oj():R,tabIndex:-1,ref:P,className:h,"data-sonner-toaster":!0,"data-sonner-theme":ie,"data-y-position":D,"data-lifted":G&&T.length>1&&!u,"data-x-position":I,style:{"--front-toast-height":`${((H=F[0])==null?void 0:H.height)||0}px`,"--width":`${M$}px`,"--gap":`${E}px`,...j,...L$(p,x)},onBlur:$=>{te.current&&!$.currentTarget.contains($.relatedTarget)&&(te.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:$=>{$.target instanceof HTMLElement&&$.target.dataset.dismissible==="false"||te.current||(te.current=!0,V.current=$.relatedTarget)},onMouseEnter:()=>ce(!0),onMouseMove:()=>ce(!0),onMouseLeave:()=>{re||ce(!1)},onDragEnd:()=>ce(!1),onPointerDown:$=>{$.target instanceof HTMLElement&&$.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},T.filter($=>!$.position&&Y===0||$.position===L).map(($,K)=>{var ae,ge;return we.createElement(P$,{key:$.id,icons:C,index:K,toast:$,defaultRichColors:b,duration:(ae=_==null?void 0:_.duration)!=null?ae:w,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:a,visibleToasts:N,closeButton:(ge=_==null?void 0:_.closeButton)!=null?ge:f,interacting:re,position:L,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:k,toasts:T.filter(de=>de.position==$.position),heights:F.filter(de=>de.position==$.position),setHeights:U,expandByDefault:u,gap:E,expanded:G,swipeDirections:t.swipeDirections})})):null}))});var Ix="Progress",zx=100,[z$,vH]=ur(Ix),[U$,$$]=z$(Ix),dE=m.forwardRef((e,t)=>{const{__scopeProgress:s,value:a=null,max:l,getValueLabel:c=B$,...u}=e;(l||l===0)&&!cj(l)&&console.error(H$(`${l}`,"Progress"));const f=cj(l)?l:zx;a!==null&&!uj(a,f)&&console.error(q$(`${a}`,"Progress"));const h=uj(a,f)?a:null,p=Qd(h)?c(h,f):void 0;return n.jsx(U$,{scope:s,value:h,max:f,children:n.jsx(Je.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":Qd(h)?h:void 0,"aria-valuetext":p,role:"progressbar","data-state":mE(h,f),"data-value":h??void 0,"data-max":f,...u,ref:t})})});dE.displayName=Ix;var fE="ProgressIndicator",hE=m.forwardRef((e,t)=>{const{__scopeProgress:s,...a}=e,l=$$(fE,s);return n.jsx(Je.div,{"data-state":mE(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...a,ref:t})});hE.displayName=fE;function B$(e,t){return`${Math.round(e/t*100)}%`}function mE(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Qd(e){return typeof e=="number"}function cj(e){return Qd(e)&&!isNaN(e)&&e>0}function uj(e,t){return Qd(e)&&!isNaN(e)&&e<=t&&e>=0}function H$(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${zx}\`.`}function q$(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${zx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var F$=dE,V$=hE;function Y$({className:e,value:t,...s}){return n.jsx(F$,{"data-slot":"progress",className:Me("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...s,children:n.jsx(V$,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}var Ux="Radio",[G$,pE]=ur(Ux),[W$,X$]=G$(Ux),gE=m.forwardRef((e,t)=>{const{__scopeRadio:s,name:a,checked:l=!1,required:c,disabled:u,value:f="on",onCheck:h,form:p,...x}=e,[v,b]=m.useState(null),w=_t(t,_=>b(_)),j=m.useRef(!1),N=v?p||!!v.closest("form"):!0;return n.jsxs(W$,{scope:s,checked:l,disabled:u,children:[n.jsx(Je.button,{type:"button",role:"radio","aria-checked":l,"data-state":yE(l),"data-disabled":u?"":void 0,disabled:u,value:f,...x,ref:w,onClick:De(e.onClick,_=>{l||h==null||h(),N&&(j.current=_.isPropagationStopped(),j.current||_.stopPropagation())})}),N&&n.jsx(K$,{control:v,bubbles:!j.current,name:a,value:f,checked:l,required:c,disabled:u,form:p,style:{transform:"translateX(-100%)"}})]})});gE.displayName=Ux;var xE="RadioIndicator",vE=m.forwardRef((e,t)=>{const{__scopeRadio:s,forceMount:a,...l}=e,c=X$(xE,s);return n.jsx(Dr,{present:a||c.checked,children:n.jsx(Je.span,{"data-state":yE(c.checked),"data-disabled":c.disabled?"":void 0,...l,ref:t})})});vE.displayName=xE;var K$=e=>{const{control:t,checked:s,bubbles:a=!0,...l}=e,c=m.useRef(null),u=Sx(s),f=$g(t);return m.useEffect(()=>{const h=c.current,p=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==s&&v){const b=new Event("click",{bubbles:a});v.call(h,s),h.dispatchEvent(b)}},[u,s,a]),n.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:s,...l,tabIndex:-1,ref:c,style:{...e.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function yE(e){return e?"checked":"unchecked"}var Q$=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$x="RadioGroup",[Z$,yH]=ur($x,[hf,pE]),bE=hf(),wE=pE(),[J$,eB]=Z$($x),jE=m.forwardRef((e,t)=>{const{__scopeRadioGroup:s,name:a,defaultValue:l,value:c,required:u=!1,disabled:f=!1,orientation:h,dir:p,loop:x=!0,onValueChange:v,...b}=e,w=bE(s),j=sf(p),[N,_]=Ya({prop:c,defaultProp:l,onChange:v});return n.jsx(J$,{scope:s,name:a,required:u,disabled:f,value:N,onValueChange:_,children:n.jsx(HN,{asChild:!0,...w,orientation:h,dir:j,loop:x,children:n.jsx(Je.div,{role:"radiogroup","aria-required":u,"aria-orientation":h,"data-disabled":f?"":void 0,dir:j,...b,ref:t})})})});jE.displayName=$x;var NE="RadioGroupItem",_E=m.forwardRef((e,t)=>{const{__scopeRadioGroup:s,disabled:a,...l}=e,c=eB(NE,s),u=c.disabled||a,f=bE(s),h=wE(s),p=m.useRef(null),x=_t(t,p),v=c.value===l.value,b=m.useRef(!1);return m.useEffect(()=>{const w=N=>{Q$.includes(N.key)&&(b.current=!0)},j=()=>b.current=!1;return document.addEventListener("keydown",w),document.addEventListener("keyup",j),()=>{document.removeEventListener("keydown",w),document.removeEventListener("keyup",j)}},[]),n.jsx(qN,{asChild:!0,...f,focusable:!u,active:v,children:n.jsx(gE,{disabled:u,required:c.required,checked:v,...h,...l,name:c.name,ref:x,onCheck:()=>c.onValueChange(l.value),onKeyDown:De(w=>{w.key==="Enter"&&w.preventDefault()}),onFocus:De(l.onFocus,()=>{var w;b.current&&((w=p.current)==null||w.click())})})})});_E.displayName=NE;var tB="RadioGroupIndicator",SE=m.forwardRef((e,t)=>{const{__scopeRadioGroup:s,...a}=e,l=wE(s);return n.jsx(vE,{...l,...a,ref:t})});SE.displayName=tB;var nB=jE,rB=_E,sB=SE;function aB({className:e,...t}){return n.jsx(nB,{"data-slot":"radio-group",className:Me("grid gap-3",e),...t})}function iB({className:e,...t}){return n.jsx(rB,{"data-slot":"radio-group-item",className:Me("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(sB,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:n.jsx(CP,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}const lB={logoUrl:null,labName:"Laboratoire XYZ",addressLine1:"123 Rue Principale",cityPostalCode:"75001 Paris",phone:"01 23 45 67 89"},oB=({templates:e,selectedTemplateId:t,onSelectTemplate:s,disabled:a=!1})=>n.jsx(aB,{value:t,onValueChange:s,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",disabled:a,children:e.map(l=>n.jsxs(Ie,{htmlFor:l.id,className:Me("border-2 rounded-lg p-4 flex flex-col items-center gap-4 cursor-pointer transition-colors hover:border-primary/80",t===l.id&&"border-primary ring-2 ring-primary ring-offset-2",a&&"cursor-not-allowed opacity-50"),children:[n.jsx(iB,{value:l.id,id:l.id,className:"sr-only"}),n.jsx("span",{className:"font-medium text-sm text-center",children:l.name}),n.jsxs(Ce,{className:"w-full scale-75 origin-top border-dashed",children:[" ",n.jsx(Re,{className:"p-2",children:n.jsx(l.component,{data:lB,isPreview:!0})})]})]},l.id))}),cB="public",uB="header-logo",Rp=[{id:"template1",name:"Classique (Sans Logo)",component:qn},{id:"template2",name:"Centré (Logo au Dessus)",component:fa},{id:"template3",name:"Centré (encercle)",component:ha},{id:"template4",name:"Centré (encercle en %)",component:ma}],Tp="template1",dB=()=>{var ue;const[e,t]=m.useState(null),[s,a]=m.useState({}),[l,c]=m.useState(null),[u,f]=m.useState(Tp),[h,p]=m.useState(null),[x,v]=m.useState(null),[b,w]=m.useState(!1),[j,N]=m.useState(null),[_,R]=m.useState(null),[E,C]=m.useState(!0),[M,T]=m.useState(!1),[z,q]=m.useState(null),F=m.useCallback(async()=>{C(!0),q(null);try{const{data:P,error:X}=await ne.from("print_header_config").select("*").limit(1).maybeSingle();if(X)throw X;P?(t(P.id),a({lab_name:P.lab_name,address_line1:P.address_line1,address_line2:P.address_line2,city_postal_code:P.city_postal_code,phone:P.phone,email:P.email,website:P.website}),c(P.logo_url),f(P.selected_template||Tp)):(t(null),a({}),c(null),f(Tp))}catch(P){console.error("Erreur chargement configuration:",P),q(P instanceof Error?P.message:"Impossible de charger la configuration de l'en-tête.")}finally{C(!1)}},[]);m.useEffect(()=>{F()},[F]);const U=P=>{const{name:X,value:V}=P.target;a(te=>({...te,[X]:V}))},G=P=>{var V;const X=(V=P.target.files)==null?void 0:V[0];if(h&&(URL.revokeObjectURL(h),p(null)),X){v(X),R(null);const te=URL.createObjectURL(X);p(te)}else v(null)};m.useEffect(()=>()=>{h&&URL.revokeObjectURL(h)},[h]);const ce=async()=>{var P;if(!x)return l;w(!0),R(null),N(0);try{const X=((P=x.name.split(".").pop())==null?void 0:P.toLowerCase())||"png",V=`${cB}/${uB}.${X}`,{error:te}=await ne.storage.from("logos").upload(V,x,{cacheControl:"3600",upsert:!0});if(te)throw te;const{data:k}=ne.storage.from("logos").getPublicUrl(V);if(!(k!=null&&k.publicUrl))throw new Error("Impossible d'obtenir l'URL publique du logo.");const L=`${k.publicUrl}?t=${new Date().getTime()}`;return c(L),v(null),h&&(URL.revokeObjectURL(h),p(null)),L}catch(X){console.error("Erreur upload logo:",X);const V=X instanceof Error?X.message:"Échec de l'upload du logo.";return R(V),Cp.error("Erreur Upload Logo",{description:V}),l}finally{w(!1),N(null)}},re=async P=>{var X,V,te,k,L,Y,H;P.preventDefault(),q(null),R(null),T(!0);try{let D=l;if(x&&(D=await ce(),!D||_)){q(_||"L'upload du logo a échoué. Veuillez réessayer."),T(!1);return}const I={lab_name:((X=s.lab_name)==null?void 0:X.trim())||null,address_line1:((V=s.address_line1)==null?void 0:V.trim())||null,address_line2:((te=s.address_line2)==null?void 0:te.trim())||null,city_postal_code:((k=s.city_postal_code)==null?void 0:k.trim())||null,phone:((L=s.phone)==null?void 0:L.trim())||null,email:((Y=s.email)==null?void 0:Y.trim())||null,website:((H=s.website)==null?void 0:H.trim())||null,logo_url:D,selected_template:u};let $=null,K=null;if(e){const{data:ae,error:ge}=await ne.from("print_header_config").update(I).eq("id",e).select().single();$=ge,K=ae}else{const{data:ae,error:ge}=await ne.from("print_header_config").insert(I).select().single();$=ge,K=ae,K!=null&&K.id&&t(K.id)}if($)throw $;Cp.success("Configuration Enregistrée",{description:"L'en-tête d'impression a été mis à jour avec succès.",duration:3e3})}catch(D){console.error("Erreur sauvegarde configuration:",D);const I=D instanceof Error?D.message:"Une erreur est survenue lors de l'enregistrement.";q(I),Cp.error("Erreur Sauvegarde",{description:I})}finally{T(!1)}},O=m.useMemo(()=>{var P;return((P=Rp.find(X=>X.id===u))==null?void 0:P.component)||qn},[u]),ie=m.useMemo(()=>({logoUrl:h||l,labName:s.lab_name,addressLine1:s.address_line1,addressLine2:s.address_line2,cityPostalCode:s.city_postal_code,phone:s.phone,email:s.email,website:s.website}),[s,l,h]);return E?n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsx(W,{className:"h-8 w-3/4 mb-4"}),n.jsx(W,{className:"h-32 w-full"})," ",n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/2"})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsx(W,{className:"h-9 w-full"}),n.jsx(W,{className:"h-9 w-full"}),n.jsx(W,{className:"h-9 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/2"})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsx(W,{className:"h-16 w-32 mx-auto"}),n.jsx(W,{className:"h-9 w-full"})]})]})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/2"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-24 w-full"})})]}),n.jsx(W,{className:"h-10 w-36 ml-auto"})," "]}):n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(Kr,{className:"h-6 w-6"}),"Configuration En-tête Impression/PDF"]}),z&&!M&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsxs(Dt,{children:[z," ",n.jsx(ee,{variant:"link",onClick:F,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),n.jsxs("form",{onSubmit:re,className:"space-y-6",children:[n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsxs(ft,{className:"flex items-center gap-2",children:[n.jsx(BP,{className:"h-5 w-5"})," Modèle d'En-tête"]}),n.jsx(xr,{children:"Choisissez la disposition de l'en-tête pour vos rapports."})]}),n.jsx(Re,{children:n.jsx(oB,{templates:Rp,selectedTemplateId:u,onSelectTemplate:f,disabled:M||b})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(ft,{children:"Informations du Laboratoire"}),n.jsx(xr,{children:"Ces informations apparaîtront dans l'en-tête choisi."})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(Ie,{htmlFor:"lab_name",children:"Nom du Laboratoire"}),n.jsx(We,{id:"lab_name",name:"lab_name",value:s.lab_name||"",onChange:U,disabled:M})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(Ie,{htmlFor:"address_line1",children:"Adresse Ligne 1"}),n.jsx(We,{id:"address_line1",name:"address_line1",value:s.address_line1||"",onChange:U,disabled:M})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(Ie,{htmlFor:"address_line2",children:"Adresse Ligne 2"}),n.jsx(We,{id:"address_line2",name:"address_line2",value:s.address_line2||"",onChange:U,disabled:M})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(Ie,{htmlFor:"city_postal_code",children:"Ville & Code Postal"}),n.jsx(We,{id:"city_postal_code",name:"city_postal_code",value:s.city_postal_code||"",onChange:U,disabled:M})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(Ie,{htmlFor:"phone",children:"Téléphone"}),n.jsx(We,{id:"phone",name:"phone",type:"tel",value:s.phone||"",onChange:U,disabled:M})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(Ie,{htmlFor:"email",children:"E-mail"}),n.jsx(We,{id:"email",name:"email",type:"email",value:s.email||"",onChange:U,disabled:M})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx(Ie,{htmlFor:"website",children:"Site Web"}),n.jsx(We,{id:"website",name:"website",type:"url",value:s.website||"",onChange:U,disabled:M})]})]})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(ft,{children:"Logo du Laboratoire"})}),n.jsxs(Re,{className:"space-y-4",children:[n.jsx(Ie,{children:"Aperçu Actuel / Nouveau"}),n.jsxs(Oc,{className:"h-20 w-20 rounded-md border",children:[n.jsx(rf,{src:h||l||void 0,alt:"Logo",className:"object-contain"}),n.jsx(Pc,{className:"rounded-md text-muted-foreground",children:n.jsx(yf,{})})]}),n.jsxs(Ie,{htmlFor:"logo-upload",className:Me(Hl({variant:"outline"}),"cursor-pointer w-full",b||M&&"cursor-not-allowed opacity-50"),children:[" ",n.jsx(l3,{className:"mr-2 h-4 w-4"})," ",x?"Changer le logo...":"Choisir un logo..."," "]}),n.jsx(We,{id:"logo-upload",type:"file",accept:"image/png, image/jpeg, image/gif, image/svg+xml",onChange:G,className:"hidden",disabled:b||M}),x&&!b&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Fichier : ",x.name]}),b&&n.jsx(Y$,{value:j,className:"w-full h-2"}),_&&!b&&n.jsxs(At,{variant:"destructive",className:"text-xs",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur Upload Précédente"}),n.jsx(Dt,{children:_})]})]})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsxs(ft,{children:["Aperçu de l'En-tête (Modèle:"," ",((ue=Rp.find(P=>P.id===u))==null?void 0:ue.name)||u,")"]}),n.jsx(xr,{children:"Ceci est une prévisualisation basée sur le modèle sélectionné et les informations saisies."})]}),n.jsx(Re,{children:n.jsx(O,{data:ie,isPreview:!0})})]}),n.jsx("div",{className:"flex justify-end pt-4",children:n.jsxs(ee,{type:"submit",disabled:M||b,children:[M?n.jsx(Lt,{className:"mr-2 h-4 w-4 animate-spin"}):n.jsx(Fl,{className:"mr-2 h-4 w-4"}),"Enregistrer la Configuration"]})})]})]})},fB={pending:"default",approved:"warning",paid:"success"},hB={pending:"En attente",approved:"Approuvé",paid:"Payé"},Mp=10,mB=()=>{const[e,t]=m.useState([]),[s,a]=m.useState(!0),[l,c]=m.useState(null),[u,f]=m.useState(""),[h,p]=m.useState(1),[x,v]=m.useState(0),b=Yc(u,300),[w,j]=m.useState(null),[N,_]=m.useState(!1),[R,E]=m.useState(null),[C,M]=m.useState(()=>!sessionStorage.getItem("ristourne_access_granted")),[T,z]=m.useState(""),[q,F]=m.useState(null),[U,G]=m.useState(null),[ce,re]=m.useState(!0);m.useEffect(()=>{(async()=>{re(!0);const{data:H,error:D}=await ne.from("settings").select("ristourne_access_code").limit(1).single();!D&&H&&H.ristourne_access_code?G(H.ristourne_access_code):G(null),re(!1)})()},[]);const O=Y=>{Y.preventDefault(),T===U?(M(!1),z(""),F(null),sessionStorage.setItem("ristourne_access_granted","1")):F("Code incorrect. Veuillez réessayer.")},ie=async()=>{a(!0),c(null);try{const{count:Y}=await ne.from("ristourne").select("id",{count:"exact",head:!0});v(Y||0);const H=(h-1)*Mp,D=H+Mp-1,{data:I,error:$}=await ne.from("ristourne").select(`
          *,
          doctor:doctor_id (
            id,
            full_name,
            hospital
          )
        `).order("created_date",{ascending:!1}).range(H,D);if($)throw $;t(I||[])}catch(Y){console.error("Erreur lors de la récupération des ristournes:",Y),c((Y instanceof Error?Y.message:"")||"Une erreur est survenue lors du chargement des ristournes."),t([])}finally{a(!1)}};m.useEffect(()=>{ie()},[h]);const ue=m.useMemo(()=>{let Y=e;if(b){const H=b.toLowerCase();Y=e.filter(D=>{var I,$;return((I=D.doctor)==null?void 0:I.full_name.toLowerCase().includes(H))||(($=D.doctor)==null?void 0:$.hospital)&&D.doctor.hospital.toLowerCase().includes(H)})}return Y.slice().sort((H,D)=>new Date(D.created_date).getTime()-new Date(H.created_date).getTime())},[e,b]),P=Math.ceil(x/Mp),X=h>1,V=h<P,te=Y=>new Date(Y).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),k=Y=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(Y),L=async()=>{if(w){_(!0),E(null);try{const{error:Y}=await ne.from("ristourne").delete().eq("id",w.id);if(Y)throw Y;j(null),ie()}catch(Y){E(Y.message||"Erreur lors de la suppression")}finally{_(!1)}}};return n.jsxs(n.Fragment,{children:[n.jsx(Ai,{open:C,children:n.jsxs(ki,{className:"max-w-[350px]",children:[n.jsx(Di,{children:n.jsx(Oi,{children:"Code d'accès requis"})}),n.jsxs("form",{onSubmit:O,className:"space-y-4",children:[n.jsx(We,{type:"password",placeholder:"Entrer le code d'accès",value:T,onChange:Y=>z(Y.target.value),disabled:ce,autoFocus:!0}),q&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsx(Dt,{children:q})]}),n.jsx(Yl,{children:n.jsx(ee,{type:"submit",disabled:ce||!T,children:ce?"Chargement...":"Valider"})})]})]})}),!C&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[n.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(k1,{className:"h-6 w-6"}),"Gestion des Ristournes"]}),n.jsx(et,{to:"/ristournes/new",children:n.jsxs(ee,{children:[n.jsx(Ka,{className:"mr-2 h-4 w-4"}),"Nouvelle Ristourne"]})})]}),n.jsxs("div",{className:"relative",children:[n.jsx(qc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(We,{type:"search",placeholder:"Rechercher par médecin ou hôpital...",value:u,onChange:Y=>f(Y.target.value),className:"pl-10 w-full md:w-1/3 h-10",disabled:s})]}),s&&n.jsxs("div",{className:"border rounded-lg",children:[n.jsx(W,{className:"h-12 w-full rounded-t-lg"}),n.jsxs("div",{className:"p-4 space-y-2",children:[n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"})]})]}),!s&&l&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur de Chargement"}),n.jsxs(Dt,{children:[l," ",n.jsx(ee,{variant:"link",onClick:ie,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),!s&&!l&&n.jsxs("div",{className:"border rounded-lg overflow-hidden bg-background",children:[n.jsxs(oa,{children:[n.jsx(ca,{children:n.jsxs(Wt,{children:[n.jsx(gt,{children:"Date"}),n.jsx(gt,{children:"Médecin"}),n.jsx(gt,{children:"Hôpital"}),n.jsx(gt,{children:"Montant Total"}),n.jsx(gt,{children:"Statut"}),n.jsx(gt,{className:"text-right",children:"Actions"})]})}),n.jsx(ua,{children:ue.length>0?ue.map(Y=>{var H,D;return n.jsxs(Wt,{children:[n.jsx(Qe,{children:te(Y.created_date)}),n.jsx(Qe,{className:"font-medium",children:(H=Y.doctor)==null?void 0:H.full_name}),n.jsx(Qe,{children:((D=Y.doctor)==null?void 0:D.hospital)||n.jsx("span",{className:"italic text-muted-foreground",children:"N/A"})}),n.jsx(Qe,{children:k(Y.total_fee)}),n.jsx(Qe,{children:n.jsx(Zr,{variant:fB[Y.status],children:hB[Y.status]})}),n.jsxs(Qe,{className:"text-right",children:[n.jsx(et,{to:`/ristournes/${Y.id}`,children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(Qr,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Modifier"}),n.jsx("span",{className:"sm:hidden",children:"Éditer"})]})}),n.jsxs(ee,{variant:"destructive",size:"sm",className:"ml-2",onClick:()=>j(Y),disabled:N,children:[n.jsx(Fc,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Supprimer"}),n.jsx("span",{className:"sm:hidden",children:"Del"})]})]})]},Y.id)}):n.jsx(Wt,{children:n.jsx(Qe,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:u?"Aucune ristourne ne correspond à votre recherche.":n.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[n.jsx("p",{children:"Aucune ristourne n'a été créée."}),n.jsx(et,{to:"/ristournes/new",children:n.jsxs(ee,{variant:"link",className:"gap-2",children:[n.jsx(Ka,{className:"h-4 w-4"}),"Créer une ristourne"]})})]})})})})]}),n.jsxs("div",{className:"flex justify-between items-center py-3 px-2 border-t bg-muted text-xs",children:[n.jsxs("div",{children:["Page ",h," sur ",P]}),n.jsxs("div",{className:"space-x-2",children:[n.jsx(ee,{size:"sm",variant:"outline",onClick:()=>p(h-1),disabled:!X,children:"Précédent"}),n.jsx(ee,{size:"sm",variant:"outline",onClick:()=>p(h+1),disabled:!V,children:"Suivant"})]}),n.jsxs("div",{children:[x," résultats"]})]})]}),n.jsx(Ai,{open:!!w,onOpenChange:()=>j(null),children:n.jsxs(ki,{children:[n.jsx(Di,{children:n.jsx(Oi,{children:"Confirmer la suppression"})}),n.jsxs("div",{children:["Voulez-vous vraiment supprimer cette ristourne ? Cette action est irréversible.",R&&n.jsxs(At,{variant:"destructive",className:"mt-2",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsx(Dt,{children:R})]})]}),n.jsxs(Yl,{children:[n.jsx(ee,{variant:"outline",onClick:()=>j(null),disabled:N,children:"Annuler"}),n.jsx(ee,{variant:"destructive",onClick:L,loading:N,children:"Supprimer"})]})]})})]})]})},dj=()=>{const e=rr(),{ristourneId:t}=cr(),s=!!t,[a,l]=m.useState(null),[c,u]=m.useState(null),[f,h]=m.useState(40),[p,x]=m.useState(100),[v,b]=m.useState(!1),[w,j]=m.useState([]),[N,_]=m.useState(""),[R,E]=m.useState(0),[C,M]=m.useState("pending"),[T,z]=m.useState([]),[q,F]=m.useState(!0),[U,G]=m.useState(!1),[ce,re]=m.useState(null),O=[{value:"pending",label:"En attente"},{value:"paid",label:"Payé"}];m.useEffect(()=>{(async()=>{try{const{data:$,error:K}=await ne.from("doctor").select("*");if(K){re("Erreur lors du chargement des médecins"),console.error("Error fetching doctors:",K);return}if(z($||[]),s&&t){const{data:ae,error:ge}=await ne.from("ristourne").select(`
              *,
              doctor:doctor_id(*),
              ristourne_patient_result(
                *,
                patient_result:patient_result_id(
                  *,
                  patient:patient_id(*)
                )
              )
            `).eq("id",t).single();if(ge){re("Erreur lors du chargement de la ristourne"),console.error("Error fetching ristourne:",ge);return}if(ae){l(ae.doctor),_(ae.notes||""),E(ae.total_fee),M(ae.status);const de=ae.ristourne_patient_result.map(Se=>({...Se.patient_result,calculatedFee:Se.fee_amount,isSelected:!0,isSelectedInitial:!0,patient:Se.patient_result.patient}));if(j(de),ae.doctor){const{data:Se}=await ne.from("doctor_fee_config").select("*").eq("doctor_id",ae.doctor.id).order("effective_date",{ascending:!1}).limit(1).single();Se&&(u(Se),h(Se.normal_price_percentage),x(Se.insurance_price_percentage),await V(ae.doctor.id,Se,de))}}}}catch($){console.error("Error:",$),re("Une erreur est survenue lors du chargement des données")}finally{F(!1)}})()},[s,t]);const ie=(I,$)=>{const K=I.normal_price?I.normal_price*$.normal_price_percentage/100:0,ae=I.insurance_price?I.insurance_price*$.insurance_price_percentage/100:0;return Math.round(K+ae)},ue=m.useCallback((I,$)=>{if(!$)return I;const K=I.map(ge=>({...ge,calculatedFee:ie(ge,$)})),ae=K.filter(ge=>ge.isSelected).reduce((ge,de)=>ge+de.calculatedFee,0);return E(ae),K},[]),P=(I,$)=>{j(K=>{const ae=K.map(ge=>ge.id===I?{...ge,isSelected:$}:ge);if(c){const ge=ae.filter(de=>de.isSelected).reduce((de,Se)=>de+Se.calculatedFee,0);E(ge)}return ae})},X=async()=>{if(a){b(!0);try{const I={doctor_id:a.id,normal_price_percentage:f,insurance_price_percentage:p,effective_date:new Date().toISOString()},{data:$,error:K}=await ne.from("doctor_fee_config").insert(I).select().single();if(K)throw K;u($),j(ae=>ue(ae,$)),await V(a.id,$,w.filter(ae=>ae.isSelected))}catch(I){console.error("Error saving fee config:",I),re(I.message||"Une erreur est survenue lors de la sauvegarde de la configuration")}finally{b(!1)}}},V=async(I,$,K)=>{let ae=[];K&&K.length>0&&(ae=K.map(pe=>pe.id));let ge=[];if(s&&t){const{data:pe,error:Pe}=await ne.from("ristourne_patient_result").select("patient_result_id, ristourne(status, id)");!Pe&&Array.isArray(pe)&&(ge=pe.filter(be=>be.ristourne&&["paid","pending"].includes(be.ristourne.status)&&be.ristourne.id!==t).map(be=>be.patient_result_id))}else{const{data:pe,error:Pe}=await ne.from("ristourne_patient_result").select("patient_result_id, ristourne(status)");!Pe&&Array.isArray(pe)&&(ge=pe.filter(be=>be.ristourne&&["paid","pending"].includes(be.ristourne.status)).map(be=>be.patient_result_id))}let de=ne.from("patient_result").select("*, patient:patient_id(*)");if(de=de.eq("isFree",!1),ae.length>0?(de=de.or(`paid_status.eq.unpaid,or(paid_status.eq.paid,id.in.(${ae.join(",")}))`),de=de.eq("doctor_id",I)):de=de.eq("doctor_id",I).eq("paid_status","unpaid"),ge.length>0){const pe=ge.filter(Pe=>!ae.includes(Pe));pe.length>0&&(de=de.not("id","in",`(${pe.join(",")})`))}const{data:Se,error:Ae}=await de;if(Ae){re("Erreur lors du chargement des résultats"),console.error("Error fetching patient results:",Ae);return}const it=new Map((K==null?void 0:K.map(pe=>[pe.id,pe]))||[]),rt=(Se||[]).map(pe=>{const Pe=it.get(pe.id);return{...pe,calculatedFee:(Pe==null?void 0:Pe.calculatedFee)||ie(pe,$),isSelected:!!Pe}});j(rt);const xe=rt.filter(pe=>pe.isSelected).reduce((pe,Pe)=>pe+Pe.calculatedFee,0);E(xe)};m.useEffect(()=>{a?(async $=>{const{data:K,error:ae}=await ne.from("doctor_fee_config").select("*").eq("doctor_id",$).order("effective_date",{ascending:!1}).limit(1).single();if(ae&&ae.code!=="PGRST116"){re("Erreur lors du chargement de la configuration des frais"),console.error("Error fetching doctor fee config:",ae);return}K?(u(K),h(K.normal_price_percentage),x(K.insurance_price_percentage),await V($,K,w)):(u(null),h(40),x(100),j([]))})(a.id):(u(null),j([]),E(0))},[a]);const te=I=>{const $=T.find(K=>K.id===I);l($||null)},k=I=>{M(I)},L=async I=>{if(I.preventDefault(),!a){re("Veuillez sélectionner un médecin");return}const $=w.filter(K=>K.isSelected);G(!0),re(null);try{if(s){const de=w.filter(Se=>Se.isSelectedInitial).map(Se=>Se.id).filter(Se=>!$.some(Ae=>Ae.id===Se));de.length>0&&await ne.from("patient_result").update({paid_status:"unpaid"}).in("id",de)}const{data:K,error:ae}=await ne.rpc("handle_ristourne_upsert",{p_ristourne_id:t||null,p_doctor_id:a.id,p_notes:N,p_total_fee:R,p_status:C,p_patient_results:$.map(ge=>({patient_result_id:ge.id,fee_amount:ge.calculatedFee}))});if(ae)throw ae;e("/ristournes",{state:{message:`Ristourne ${s?"modifiée":"créée"} avec succès.`}})}catch(K){console.error("Error saving ristourne:",K),re(K.message||"Une erreur est survenue lors de la sauvegarde")}finally{G(!1)}};m.useEffect(()=>{s&&w.length>0&&j(I=>I.map($=>({...$,isSelectedInitial:$.isSelectedInitial??$.isSelected})))},[s,w.length]);const Y=w.length>0&&w.every(I=>I.isSelected),H=w.some(I=>I.isSelected),D=I=>{if(j($=>$.map(K=>({...K,isSelected:I}))),c){const $=w.map(K=>({...K,isSelected:I})).filter(K=>K.isSelected).reduce((K,ae)=>K+ae.calculatedFee,0);E($)}};return q?n.jsxs("div",{className:"container mx-auto p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(W,{className:"h-10 w-10"}),n.jsx(W,{className:"h-10 w-40"})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-8 w-3/4"}),n.jsx(W,{className:"h-4 w-1/2"})]}),n.jsxs(Re,{className:"space-y-4",children:[n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-10 w-full"}),n.jsx(W,{className:"h-32 w-full"})]})]})]}):n.jsxs("div",{className:"ristourne-print-root container mx-auto p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[n.jsx(ee,{variant:"outline",size:"icon",onClick:()=>e("/ristournes"),children:n.jsx(bn,{className:"h-4 w-4"})}),n.jsxs("h1",{className:"text-2xl font-bold",children:[s?"Modifier":"Nouvelle"," Ristourne"]}),n.jsx(ee,{variant:"default",className:"ml-auto",onClick:()=>window.print(),children:"Imprimer"})]}),ce&&n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsx(Dt,{children:ce})]}),n.jsxs("div",{className:"ristourne-print-summary  hidden print:block",children:[n.jsxs("h1",{children:["Ristourne: ",(a==null?void 0:a.full_name)||"-"]}),n.jsxs("table",{children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Patient"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Prix"}),n.jsx("th",{children:"Prix AMO"}),n.jsx("th",{children:"Montant"})]})}),n.jsx("tbody",{children:w.filter(I=>I.isSelected&&I.paid_status==="paid").length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,children:"Aucun résultat payé sélectionné"})}):w.filter(I=>I.isSelected&&I.paid_status==="paid").map(I=>{var $,K;return n.jsxs("tr",{children:[n.jsx("td",{children:I.patient.full_name}),n.jsx("td",{children:I.result_date?at(new Date(I.result_date),"dd/MM/yyyy"):""}),n.jsxs("td",{children:[($=I.normal_price)==null?void 0:$.toLocaleString()," "]}),n.jsxs("td",{children:[(K=I.insurance_price)==null?void 0:K.toLocaleString()," "]}),n.jsxs("td",{children:[I.calculatedFee.toLocaleString()," "]})]},I.id)})})]}),n.jsx("div",{className:"flex items-center justify-end",children:n.jsxs(Zr,{variant:"secondary",className:"text-lg px-4 py-2",children:["Total: ",R.toLocaleString()," FCFA"]})})]}),n.jsxs("form",{className:"ristourne-print-area print:hidden",onSubmit:L,children:[n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(ft,{children:"Sélection du Médecin"}),n.jsx(xr,{children:"Sélectionnez le médecin pour lequel vous souhaitez créer une ristourne"})]}),n.jsx(Re,{children:n.jsxs(Qn,{value:a==null?void 0:a.id,onValueChange:te,disabled:U,children:[n.jsx(Jn,{children:n.jsx(Zn,{placeholder:"Sélectionner un médecin..."})}),n.jsx(er,{children:T.map(I=>n.jsx(ht,{value:I.id,children:I.full_name},I.id))})]})})]}),a&&n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(ft,{children:"Configuration des Frais"}),n.jsx(xr,{children:c?"Modifier la configuration des frais du médecin":"Créer une nouvelle configuration des frais pour le médecin"})]}),n.jsx(Re,{children:n.jsxs("div",{className:"grid gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ie,{htmlFor:"normalPrice",children:"Pourcentage Prix Normal"}),n.jsx(We,{id:"normalPrice",type:"number",min:"0",max:"100",value:f,onChange:I=>h(Number(I.target.value))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ie,{htmlFor:"insurancePrice",children:"Pourcentage Prix Assurance"}),n.jsx(We,{id:"insurancePrice",type:"number",min:"0",max:"100",value:p,onChange:I=>x(Number(I.target.value))})]})]})}),n.jsx(cs,{children:n.jsxs(ee,{type:"button",onClick:X,disabled:v,children:[v&&n.jsx(Lt,{className:"mr-2 h-4 w-4 animate-spin"}),n.jsx(Fl,{className:"mr-2 h-4 w-4"}),c?"Mettre à jour":"Enregistrer"]})})]}),a&&c&&n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(ft,{children:"Sélection des Résultats"}),n.jsx(xr,{children:"Sélectionnez les résultats à inclure dans la ristourne"})]}),n.jsxs(Re,{children:[n.jsx("div",{className:"rounded-md border",children:n.jsxs(oa,{children:[n.jsx(ca,{children:n.jsxs(Wt,{children:[n.jsx(gt,{className:"w-12",children:n.jsx(na,{checked:Y,indeterminate:H&&!Y,onCheckedChange:I=>D(!!I),disabled:U||w.length===0,"aria-label":"Tout sélectionner"})}),n.jsx(gt,{children:"Patient"}),n.jsx(gt,{children:"Date"}),n.jsx(gt,{children:"Prix Normal"}),n.jsx(gt,{children:"Prix Assurance"}),n.jsx(gt,{className:"text-right",children:"Frais Calculés"})]})}),n.jsx(ua,{children:w.length===0?n.jsx(Wt,{children:n.jsx(Qe,{colSpan:6,className:"text-center text-muted-foreground",children:"Aucun résultat non payé trouvé pour ce médecin"})}):w.map(I=>{var $,K;return n.jsxs(Wt,{children:[n.jsx(Qe,{children:n.jsx(na,{checked:I.isSelected,onCheckedChange:ae=>P(I.id,ae),disabled:U})}),n.jsx(Qe,{children:I.patient.full_name}),n.jsx(Qe,{children:I.result_date?at(new Date(I.result_date),"dd/MM/yyyy"):""}),n.jsxs(Qe,{children:[($=I.normal_price)==null?void 0:$.toLocaleString()," FCFA"]}),n.jsxs(Qe,{children:[(K=I.insurance_price)==null?void 0:K.toLocaleString()," FCFA"]}),n.jsxs(Qe,{className:"text-right font-medium",children:[I.calculatedFee.toLocaleString()," FCFA"]})]},I.id)})})]})}),n.jsx("div",{className:"mt-4 flex justify-end items-center gap-2 print:block",children:n.jsxs(Zr,{variant:"secondary",className:"text-lg px-4 py-2",children:["Total: ",R.toLocaleString()," FCFA"]})})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(ft,{children:"Statut"}),n.jsx(xr,{children:"Sélectionnez le statut de la ristourne"})]}),n.jsx(Re,{children:n.jsxs(Qn,{value:C,onValueChange:k,children:[n.jsx(Jn,{children:n.jsx(Zn,{placeholder:"Sélectionner un statut"})}),n.jsx(er,{children:O.map(I=>n.jsx(ht,{value:I.value,children:I.label},I.value))})]})})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(ft,{children:"Notes"}),n.jsx(xr,{children:"Ajoutez des notes ou commentaires optionnels"})]}),n.jsx(Re,{children:n.jsx(Mc,{value:N,onChange:I=>_(I.target.value),placeholder:"Notes ou commentaires...",disabled:U})})]}),n.jsx(Ce,{children:n.jsxs(cs,{className:"flex justify-end space-x-4",children:[n.jsx(ee,{type:"button",variant:"outline",onClick:()=>e("/ristournes"),disabled:U,children:"Annuler"}),n.jsxs(ee,{type:"submit",disabled:U||!c,children:[U&&n.jsx(Lt,{className:"mr-2 h-4 w-4 animate-spin"}),n.jsx(Fl,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})]})})]})]})},pB=()=>{const[e,t]=m.useState([]),[s,a]=m.useState(""),[l,c]=m.useState("category"),[u,f]=m.useState(!1),[h,p]=m.useState(null),[x,v]=m.useState(null),b=async()=>{f(!0),p(null);const{data:N,error:_}=await ne.from("skip_range_check").select("id, value, type").order("type").order("value");!_&&N?t(N):p("Erreur lors du chargement des valeurs."),f(!1)};m.useEffect(()=>{b()},[]);const w=async N=>{if(N.preventDefault(),!s.trim())return;f(!0),p(null);const{error:_}=await ne.from("skip_range_check").insert({value:s.trim(),type:l});_?p("Erreur lors de l'ajout."):(a(""),b()),f(!1)},j=async N=>{f(!0),p(null);const{error:_}=await ne.from("skip_range_check").delete().eq("id",N);_?p("Erreur lors de la suppression."):b(),f(!1)};return n.jsx("div",{className:"max-w-xl mx-auto mt-10",children:n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(ft,{children:"Gestion des valeurs à ignorer pour le contrôle des plages"})}),n.jsxs(Re,{children:[n.jsxs("form",{onSubmit:w,className:"flex gap-2 mb-6",children:[n.jsx(We,{placeholder:"Nom de la catégorie ou du test type",value:s,onChange:N=>a(N.target.value),disabled:u,required:!0}),n.jsxs(Qn,{value:l,onValueChange:N=>c(N),children:[n.jsx(Jn,{className:"w-32",children:n.jsx(Zn,{})}),n.jsxs(er,{children:[n.jsx(ht,{value:"category",children:"Catégorie"}),n.jsx(ht,{value:"test_type",children:"Test Type"})]})]}),n.jsx(ee,{type:"submit",disabled:u,children:"Ajouter"})]}),h&&n.jsx("div",{className:"text-red-500 mb-2",children:h}),u?n.jsx("div",{children:"Chargement…"}):n.jsx("ul",{className:"space-y-2",children:e.map(({id:N,value:_,type:R})=>n.jsxs("li",{className:"flex items-center justify-between border-b pb-2",children:[n.jsxs("span",{children:[n.jsxs("span",{className:"font-semibold",children:[R==="category"?"Catégorie":"Test Type",":"]})," ",_]}),n.jsxs(_c,{children:[n.jsx(_f,{asChild:!0,children:n.jsx(ee,{variant:"destructive",size:"sm",disabled:u,onClick:()=>v(N),children:"Supprimer"})}),n.jsxs(Sf,{children:[n.jsxs(Ef,{children:[n.jsx(Rf,{children:"Confirmer la suppression"}),n.jsx(Tf,{children:"Voulez-vous vraiment supprimer cette valeur à ignorer ? Cette action est irréversible."})]}),n.jsxs(Cf,{children:[n.jsx(Mf,{asChild:!0,children:n.jsx(ee,{variant:"outline",onClick:()=>v(null),children:"Annuler"})}),n.jsx(ux,{asChild:!0,children:n.jsx(ee,{variant:"destructive",onClick:async()=>{await j(N),v(null)},children:"Supprimer"})})]})]})]})]},N))})]})]})})},gB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},xB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},vB=()=>{const{resultId:e}=cr();rr();const[t,s]=m.useState(null),[a,l]=m.useState(null),[c,u]=m.useState(null),[f,h]=m.useState(null),[p,x]=m.useState(!0),[v,b]=m.useState(!1),[w,j]=m.useState(null),[N,_]=m.useState(null),[R,E]=m.useState(""),[C,M]=m.useState(!1),[T,z]=m.useState(""),[q,F]=m.useState(""),[U,G]=m.useState(!1),[ce,re]=m.useState(null),O=[{id:"template1",component:qn},{id:"template2",component:fa},{id:"template3",component:ha},{id:"template4",component:ma}],ie="template1",[ue,P]=m.useState(null),[X,V]=m.useState(!0),te=async()=>{if(!e){j("ID du résultat manquant."),x(!1);return}x(!0),j(null),_(null),s(null),l(null),u(null),h(null),V(!0),P(null);try{const{data:$,error:K}=await ne.from("patient_result").select("*").eq("id",e).single();if(K)throw K;if(!$)throw new Error("Résultat non trouvé.");s($);const[ae,ge,de,Se]=await Promise.all([ne.from("patient").select("*").eq("id",$.patient_id).single(),ne.from("doctor").select("*").eq("id",$.doctor_id).single(),ne.from("protidogramme").select("*").eq("result_id",e).maybeSingle(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);ae.error&&console.warn("Erreur chargement patient:",ae.error.message),ge.error&&console.warn("Erreur chargement médecin:",ge.error.message),l(ae.data),u(ge.data),h(de.data||null),P(Se.data),V(!1)}catch($){console.error("Erreur chargement détails du résultat:",$),j($.message||"Une erreur est survenue lors du chargement du résultat.")}finally{x(!1)}};m.useEffect(()=>{te()},[e]),m.useEffect(()=>{z((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),F((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const k=m.useCallback(async $=>{if(e)try{const{error:K}=await ne.from("patient_result").update({description:$}).eq("id",e);if(K)throw K}catch(K){console.error("Error saving description:",K)}},[e]);m.useEffect(()=>{const $=setTimeout(()=>{R!==(t==null?void 0:t.description)&&k(R)},1e3);return()=>clearTimeout($)},[R,t==null?void 0:t.description,k]);const L=m.useCallback(async()=>{G(!0),re(null);try{const $=T!==""?Number(T):null,K=q!==""?Number(q):null;if(T!==""&&isNaN($)||q!==""&&isNaN(K)){re("Les prix doivent être des nombres valides."),G(!1);return}const{error:ae,data:ge}=await ne.from("patient_result").update({normal_price:$,insurance_price:K}).eq("id",t.id).select().single();if(ae)throw ae;s(de=>de&&{...de,normal_price:$,insurance_price:K}),M(!1)}catch($){re($.message||"Erreur lors de la sauvegarde des prix.")}finally{G(!1)}},[t,T,q]),Y=async $=>{if(!(!t||$===t.status)){b(!0),_(null);try{const{data:K,error:ae}=await ne.from("patient_result").update({status:$}).eq("id",t.id).select().single();if(ae)throw ae;s(K||(ge=>ge?{...ge,status:$}:null))}catch(K){console.error("Erreur mise à jour statut:",K),_(K.message||"Impossible de mettre à jour le statut.")}finally{b(!1)}}},H=($,K,ae,ge)=>{const de=$;return n.jsxs("div",{className:Me("flex items-start space-x-3",ge),children:[n.jsx(de,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:K}),n.jsx("p",{className:"text-sm font-bold print:text-xs",children:ae||n.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},D=m.useMemo(()=>{var K;const $=(ue==null?void 0:ue.selected_template)||ie;return((K=O.find(ae=>ae.id===$))==null?void 0:K.component)||qn},[ue]),I=m.useMemo(()=>({logoUrl:(ue==null?void 0:ue.logo_url)||null,labName:ue==null?void 0:ue.lab_name,addressLine1:ue==null?void 0:ue.address_line1,addressLine2:ue==null?void 0:ue.address_line2,cityPostalCode:ue==null?void 0:ue.city_postal_code,phone:ue==null?void 0:ue.phone,email:ue==null?void 0:ue.email,website:ue==null?void 0:ue.website}),[ue]);return p?n.jsxs("div",{className:"space-y-6",children:[n.jsx(W,{className:"h-8 w-32"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]})]}):w?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"mb-4",children:n.jsx(et,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsxs(Dt,{children:[w," ",n.jsx(ee,{variant:"link",onClick:te,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[n.jsx("div",{children:n.jsx(et,{to:a?`/patients/${a.id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),n.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[n.jsx(Kr,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),n.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[ue?n.jsx("div",{className:"mb-2 print:mb-0",children:n.jsx(D,{data:I,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):n.jsxs(At,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"En-tête Manquant"}),n.jsxs(Dt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",n.jsx(et,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),n.jsx(Xr,{className:"my-2 print:my-0 print:border-none"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[n.jsxs(Ce,{className:"overflow-hidden print:shadow-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[H(Ye,"NOM PRENOM",a==null?void 0:a.full_name),H(Ye,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),H(ln,"Date Naissance",a!=null&&a.date_of_birth?at(Ft(a.date_of_birth),"P",{locale:qt}):null),n.jsx("div",{className:"hidden print:block",children:H(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null)})]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[H(Ht,"NOM PRENOM",c==null?void 0:c.full_name),H(mn,"Téléphone",c==null?void 0:c.phone),H(Ye,"Provenance",c==null?void 0:c.hospital)]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(la,{className:"h-4 w-4"}),"Résultat Info"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[H(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null),n.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),C?n.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:$=>z($.target.value),disabled:U}):n.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),C?n.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:q,onChange:$=>F($.target.value),disabled:U}):n.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:q,disabled:!0,readOnly:!0})]}),n.jsx("div",{className:"flex gap-2 mt-1",children:C?n.jsxs(n.Fragment,{children:[n.jsxs(ee,{size:"xs",variant:"secondary",onClick:L,disabled:U,children:[U?n.jsx(Lt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>M(!1),disabled:U,children:"Annuler"})]}):n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>M(!0),children:"Modifier Prix"})}),ce&&n.jsx("p",{className:"text-xs text-destructive mt-1",children:ce})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Ye,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),n.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[n.jsxs(Qn,{value:t.status??"",onValueChange:$=>Y($),disabled:v,children:[n.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",n.jsx(Zn,{placeholder:"Changer statut..."})," "]}),n.jsxs(er,{children:[n.jsx(ht,{value:"attente",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),n.jsx(ht,{value:"en cours",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),n.jsx(ht,{value:"fini",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),v&&n.jsx(Lt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),N&&n.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:N}),n.jsx(Zr,{variant:gB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:xB(t.status)})]})]})]})]})]}),n.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]}),H(Ye,"NOM PRENOM",a==null?void 0:a.full_name),H(Ye,"ID Unique",a==null?void 0:a.patient_unique_id),H(mn,"Téléphone",a==null?void 0:a.phone)]}),n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),H(Ht,"NOM PRENOM",c==null?void 0:c.full_name),H(mn,"Téléphone",c==null?void 0:c.phone),H(Ye,"Hôpital",c==null?void 0:c.hospital)]})]}),n.jsxs(Ce,{className:"shadow print:shadow-none print:border-none",children:[n.jsx(Te,{className:"flex-row items-center gap-2 print:hidden",children:n.jsx(ft,{className:"flex-1 text-lg",children:"Protidogramme"})}),n.jsx(Re,{children:n.jsx(yB,{})})]})]})," "]}):n.jsx("div",{children:"Résultat non trouvé."})},yB=()=>{const{resultId:e}=cr(),[t,s]=m.useState(null),[a,l]=m.useState(!0),[c,u]=m.useState(null),[f,h]=m.useState(!1),[p,x]=m.useState(""),[v,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(!1),[R,E]=m.useState(null),C=m.useRef(null);m.useEffect(()=>{e&&(l(!0),u(null),ne.from("protidogramme").select("*").eq("result_id",e).single().then(({data:F,error:U})=>{U&&U.code!=="PGRST116"&&u("Erreur de chargement"),s(F),x((F==null?void 0:F.description)||""),j(F!=null&&F.image?M(F.image):null),l(!1)}))},[e,f]);function M(F){return ne.storage.from("images").getPublicUrl(F).data.publicUrl}function T(F){var G;const U=((G=F.target.files)==null?void 0:G[0])||null;b(U),j(U?URL.createObjectURL(U):null)}async function z(F){if(F.preventDefault(),!e)return;_(!0),E(null);let U=(t==null?void 0:t.image)||null;try{if(v){const ce=v.name.split(".").pop(),re=`protidogramme/${e}_${Date.now()}.${ce}`,{error:O}=await ne.storage.from("images").upload(re,v,{upsert:!0});if(O){E("Erreur lors de l'upload de l'image"),_(!1),console.error(O);return}U=re}const{error:G}=await ne.from("protidogramme").upsert({result_id:e,image:U,description:p,updated_at:new Date().toISOString()},{onConflict:"result_id"});if(G){E("Erreur lors de la sauvegarde"),_(!1),console.error(G);return}h(!1),b(null)}catch(G){E("Erreur inattendue lors de la sauvegarde"),console.error(G)}finally{_(!1)}}function q(){window.print()}return a?n.jsxs("div",{className:"max-w-xl mx-auto py-10",children:[n.jsx(W,{className:"h-40 w-full mb-4"}),n.jsx(W,{className:"h-6 w-1/2"})]}):n.jsxs("div",{className:"max-w-xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6 print:hidden",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Protidogramme"}),n.jsx("div",{className:"flex gap-2",children:!f&&n.jsxs(ee,{variant:"outline",size:"sm",onClick:q,children:[n.jsx(bf,{className:"w-4 h-4 mr-1"})," Imprimer"]})})]}),n.jsxs(Ce,{className:"shadow print:shadow-none print:border-none",children:[n.jsxs(Te,{className:"flex-row items-center gap-2 print:hidden",children:[n.jsx(ft,{className:"flex-1 text-lg",children:f?t?"Modifier":"Ajouter":"Aperçu"}),!f&&n.jsxs(ee,{size:"sm",variant:"secondary",onClick:()=>h(!0),children:[n.jsx(Qr,{className:"w-4 h-4 mr-1"})," Modifier"]})]}),n.jsx(Re,{children:f?n.jsxs("form",{className:"space-y-4",onSubmit:z,children:[n.jsxs("div",{children:[n.jsx("label",{className:"block mb-1 font-medium",children:"Image"}),w&&n.jsx("img",{src:w,alt:"Aperçu",className:"max-h-60 rounded  mb-2"}),n.jsx(We,{type:"file",accept:"image/*",onChange:T,ref:C}),R&&n.jsx("div",{className:"text-red-500 text-sm mt-1",children:R})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block mb-1 font-medium",children:"Description"}),n.jsx(Mc,{value:p,onChange:F=>x(F.target.value),rows:4,required:!0,className:"resize-vertical"})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx(ee,{type:"submit",disabled:N,children:N?n.jsxs(n.Fragment,{children:[n.jsx(Lt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarde..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Fl,{className:"mr-2 h-4 w-4"}),"Sauvegarder"]})}),n.jsxs(ee,{type:"button",variant:"outline",onClick:()=>{h(!1),E(null),b(null),j(t!=null&&t.image?M(t.image):null),x((t==null?void 0:t.description)||"")},children:[n.jsx(wf,{className:"w-4 h-4 mr-1"})," Annuler"]})]})]}):n.jsxs("div",{className:"print:block",children:[(t==null?void 0:t.image)&&n.jsx("img",{src:M(t.image),alt:"Protidogramme",className:"max-h-96 mb-4 rounded border mx-auto print:max-h-[450px]",style:{maxWidth:"100%"}}),n.jsx("div",{className:"prose prose-sm print:prose print:max-w-full print:break-words",children:t!=null&&t.description?n.jsxs("div",{children:[" ",t.description.split(`
`).map(F=>n.jsxs("div",{children:[" ",F," "]},F))," "]}):n.jsx("span",{className:"text-muted-foreground",children:"Aucune description"})}),n.jsx("div",{className:"mt-4",children:n.jsx(oo,{date:new Date().toISOString()||""})})]})})]})]})},bB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},wB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},jB=()=>{const{resultId:e}=cr();rr();const[t,s]=m.useState(null),[a,l]=m.useState(null),[c,u]=m.useState(null),[f,h]=m.useState(!0),[p,x]=m.useState(!1),[v,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(""),[R,E]=m.useState(!1),[C,M]=m.useState(""),[T,z]=m.useState(""),[q,F]=m.useState(!1),[U,G]=m.useState(null),ce=[{id:"template1",component:qn},{id:"template2",component:fa},{id:"template3",component:ha},{id:"template4",component:ma}],re="template1",[O,ie]=m.useState(null),[ue,P]=m.useState(!0),[X,V]=m.useState(null),[te,k]=m.useState(!0);m.useEffect(()=>{(async()=>{if(k(!0),!e)return;const{data:Ne,error:Oe}=await ne.from("atbs_result").select("id, nature_prelevement, souche").eq("result_id",e).single();Ne&&V(Ne.id),k(!1)})()},[e]);const L=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),s(null),l(null),u(null),P(!0),ie(null);try{const{data:be,error:Ne}=await ne.from("patient_result").select("*").eq("id",e).single();if(Ne)throw Ne;if(!be)throw new Error("Résultat non trouvé.");s(be);const[Oe,Xe,Fe]=await Promise.all([ne.from("patient").select("*").eq("id",be.patient_id).single(),ne.from("doctor").select("*").eq("id",be.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);Oe.error&&console.warn("Erreur chargement patient:",Oe.error.message),Xe.error&&console.warn("Erreur chargement médecin:",Xe.error.message),l(Oe.data),u(Xe.data),ie(Fe.data),P(!1)}catch(be){console.error("Erreur chargement détails du résultat:",be),b(be.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{L()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),z((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const Y=m.useCallback(async be=>{if(e)try{const{error:Ne}=await ne.from("patient_result").update({description:be}).eq("id",e);if(Ne)throw Ne}catch(Ne){console.error("Error saving description:",Ne)}},[e]);m.useEffect(()=>{const be=setTimeout(()=>{N!==(t==null?void 0:t.description)&&Y(N)},1e3);return()=>clearTimeout(be)},[N,t==null?void 0:t.description,Y]);const H=m.useCallback(async()=>{F(!0),G(null);try{const be=C!==""?Number(C):null,Ne=T!==""?Number(T):null;if(C!==""&&isNaN(be)||T!==""&&isNaN(Ne)){G("Les prix doivent être des nombres valides."),F(!1);return}const{error:Oe,data:Xe}=await ne.from("patient_result").update({normal_price:be,insurance_price:Ne}).eq("id",t.id).select().single();if(Oe)throw Oe;s(Fe=>Fe&&{...Fe,normal_price:be,insurance_price:Ne}),E(!1)}catch(be){G(be.message||"Erreur lors de la sauvegarde des prix.")}finally{F(!1)}},[t,C,T]),D=async be=>{if(!(!t||be===t.status)){x(!0),j(null);try{const{data:Ne,error:Oe}=await ne.from("patient_result").update({status:be}).eq("id",t.id).select().single();if(Oe)throw Oe;s(Ne||(Xe=>Xe?{...Xe,status:be}:null))}catch(Ne){console.error("Erreur mise à jour statut:",Ne),j(Ne.message||"Impossible de mettre à jour le statut.")}finally{x(!1)}}},[I,$]=m.useState([]),[K,ae]=m.useState(!1);m.useEffect(()=>{e&&(ae(!0),ne.from("atbs_result").select("*").eq("result_id",e).then(({data:be})=>{$(be||[]),ae(!1)}))},[e]);const[ge,de]=m.useState([]),Se=be=>{de(Ne=>Ne.includes(be)?Ne.filter(Oe=>Oe!==be):[...Ne,be])},Ae=(be,Ne,Oe,Xe)=>{const Fe=be;return n.jsxs("div",{className:Me("flex items-start space-x-3",Xe),children:[n.jsx(Fe,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:Ne}),n.jsx("p",{className:"text-sm font-bold print:text-xs",children:Oe||n.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},it=m.useMemo(()=>{var Ne;const be=(O==null?void 0:O.selected_template)||re;return((Ne=ce.find(Oe=>Oe.id===be))==null?void 0:Ne.component)||qn},[O]),rt=m.useMemo(()=>({logoUrl:(O==null?void 0:O.logo_url)||null,labName:O==null?void 0:O.lab_name,addressLine1:O==null?void 0:O.address_line1,addressLine2:O==null?void 0:O.address_line2,cityPostalCode:O==null?void 0:O.city_postal_code,phone:O==null?void 0:O.phone,email:O==null?void 0:O.email,website:O==null?void 0:O.website}),[O]),[xe,pe]=m.useState(!1),Pe=async()=>{if(e){pe(!0);try{const{data:be,error:Ne}=await ne.from("atbs_result").insert({result_id:e}).select("id");if(Ne||!be||!be[0])throw Ne;const Oe=be[0].id,{data:Xe,error:Fe}=await ne.from("atbs").select("id");if(Fe||!Xe)throw Fe;const wt=Xe.map(St=>({atbs_result_id:Oe,atb_id:St.id}));wt.length>0&&await ne.from("atbs_result_atb").insert(wt),window.location.reload()}catch{pe(!1)}}};return m.useEffect(()=>!e||f?void 0:((async()=>{const{data:Ne,error:Oe}=await ne.from("atbs_result").select("id").eq("result_id",e);if(Oe){console.error("Erreur lors de la vérification d'atbs_result:",Oe);return}if(Ne&&Ne.length>0)return;const{data:Xe,error:Fe}=await ne.from("atbs_result").insert({result_id:e}).select("id").single();if(Fe||!Xe){console.error("Erreur lors de la création d'atbs_result:",Fe);return}const{data:wt,error:St}=await ne.from("atbs").select("id");if(St||!wt){console.error("Erreur lors de la récupération des ATBs:",St);return}const Vt=wt.map(Be=>({atbs_result_id:Xe.id,atb_id:Be.id}));if(Vt.length>0){const{error:Be}=await ne.from("atbs_result_atb").insert(Vt);Be&&console.error("Erreur lors de la création des atbs_result_atb:",Be)}})(),()=>{}),[e,f]),f?n.jsxs("div",{className:"space-y-6",children:[n.jsx(W,{className:"h-8 w-32"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]})]}):v?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"mb-4",children:n.jsx(et,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsxs(Dt,{children:[v," ",n.jsx(ee,{variant:"link",onClick:L,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[n.jsx("div",{children:n.jsx(et,{to:a?`/patients/${a.id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),n.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[n.jsx(Kr,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]}),n.jsxs("div",{className:"flex justify-end",children:[n.jsx(ee,{variant:"default",onClick:()=>window.print(),children:"Imprimer"}),n.jsx(ee,{variant:"secondary",onClick:Pe,disabled:xe,children:xe?"Création...":"Créer un nouvel ATB Résultat"})]})]}),n.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[O?n.jsx("div",{className:"mb-2 print:mb-0",children:n.jsx(it,{data:rt,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):n.jsxs(At,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"En-tête Manquant"}),n.jsxs(Dt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",n.jsx(et,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),n.jsx(Xr,{className:"my-2 print:my-0 print:border-none print:hidden"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[n.jsxs(Ce,{className:"overflow-hidden print:shadow-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Ae(Ye,"NOM PRENOM",a==null?void 0:a.full_name),Ae(Ye,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),Ae(ln,"Date Naissance",a!=null&&a.date_of_birth?at(Ft(a.date_of_birth),"P",{locale:qt}):null),n.jsx("div",{className:"hidden print:block",children:Ae(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null)})]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Ae(Ht,"NOM PRENOM",c==null?void 0:c.full_name),Ae(mn,"Téléphone",c==null?void 0:c.phone),Ae(Ye,"Provenance",c==null?void 0:c.hospital)]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(la,{className:"h-4 w-4"}),"Résultat Info"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Ae(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null),n.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),R?n.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:C,onChange:be=>M(be.target.value),disabled:q}):n.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:C,disabled:!0,readOnly:!0})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),R?n.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:be=>z(be.target.value),disabled:q}):n.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),n.jsx("div",{className:"flex gap-2 mt-1",children:R?n.jsxs(n.Fragment,{children:[n.jsxs(ee,{size:"xs",variant:"secondary",onClick:H,disabled:q,children:[q?n.jsx(Lt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:q,children:"Annuler"})]}):n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),U&&n.jsx("p",{className:"text-xs text-destructive mt-1",children:U})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Ye,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),n.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[n.jsxs(Qn,{value:t.status??"",onValueChange:be=>D(be),disabled:p,children:[n.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[n.jsx(Zn,{placeholder:"Changer statut..."})," "]}),n.jsxs(er,{children:[n.jsx(ht,{value:"attente",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),n.jsx(ht,{value:"en cours",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),n.jsx(ht,{value:"fini",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&n.jsx(Lt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&n.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),n.jsx(Zr,{variant:bB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:wB(t.status)})]})]})]})]})]}),n.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden ",children:[n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]}),Ae(Ye,"NOM PRENOM",a==null?void 0:a.full_name),Ae(Ye,"ID Unique",a==null?void 0:a.patient_unique_id),Ae(mn,"Téléphone",a==null?void 0:a.phone)]}),n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),Ae(Ht,"NOM PRENOM",c==null?void 0:c.full_name),Ae(mn,"Téléphone",c==null?void 0:c.phone),Ae(Ye,"Hôpital",c==null?void 0:c.hospital)]})]}),n.jsxs("div",{className:"flex flex-col items-center gap-2 mt-2",children:[n.jsx(We,{className:"text-2xl font-bold text-center w-auto",value:N||"ANTIBIOGRAMME",onChange:be=>_(be.target.value),style:{maxWidth:400}}),n.jsx("div",{className:"w-full mt-0",children:K?n.jsx("div",{className:"text-center",children:"Chargement des antibiogrammes..."}):I.length===0?n.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[n.jsx("div",{className:"text-center text-muted-foreground",children:"Aucun antibiogramme trouvé."}),n.jsx(ee,{onClick:()=>window.location.reload(),className:"mx-auto",children:"Creer"})]}):n.jsx("div",{className:"flex flex-col gap-8 mt-0",children:I.map(be=>n.jsxs("div",{className:ge.length>0&&!ge.includes(be.id)?"print:hidden":"",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2 print:hidden",children:[n.jsx("input",{type:"checkbox",checked:ge.length===0||ge.includes(be.id),onChange:()=>Se(be.id),id:`print-checkbox-${be.id}`}),n.jsx("label",{htmlFor:`print-checkbox-${be.id}`,className:"text-sm",children:"Inclure pour impression"})]}),n.jsx(NB,{resultId:be.id})]},be.id))})})]})," ",n.jsx("style",{children:`
        @media print {
          .report-content table {
            font-size: 16px;
            width: 100%;
          }
          .report-content th, .report-content td {
            padding: 4px 4px !important;
            font-size: 16px;
          }
          .report-content {
            padding: 2px !important;
            margin: 0 !important;
          }
          .report-content table {
            border-collapse: collapse;
          }
          .report-content th, .report-content td {
            border: 1px solid #ccc;
          }
        }
      `})]})]}):n.jsx("div",{children:"Résultat non trouvé."})},NB=({resultId:e})=>{const[t,s]=m.useState([]),[a,l]=m.useState(null),[c,u]=m.useState([]),[f,h]=m.useState({}),[p,x]=m.useState(!0),[v,b]=m.useState(!1),[w,j]=m.useState(null),[N,_]=m.useState(""),[R,E]=m.useState("");m.useEffect(()=>{(async()=>{if(x(!0),!e)return;const{data:z}=await ne.from("atbs_result").select("*").eq("id",e);if(!z||z.length===0){x(!1);return}const q=z[0].id;l(q),_(z[0].nature_prelement),E(z[0].souche);const{data:F}=await ne.from("atbs").select("id, name");s(F||[]);const{data:U}=await ne.from("atbs_result_atb").select("id, atb_id, sensible, intermediaire, resistant").eq("atbs_result_id",q);u(U||[]);const G={};(U||[]).forEach(ce=>{G[ce.atb_id]={S:!!ce.sensible,I:!!ce.intermediaire,R:!!ce.resistant}}),h(G),x(!1)})()},[e]);const C=(T,z)=>{h(q=>{var F;return{...q,[T]:{...q[T],[z]:!((F=q[T])!=null&&F[z])}}})},M=async()=>{var T,z,q;if(a){b(!0),j(null);try{for(const F of t){const U=c.find(G=>G.atb_id===F.id);U&&await ne.from("atbs_result_atb").update({sensible:((T=f[F.id])==null?void 0:T.S)||!1,intermediaire:((z=f[F.id])==null?void 0:z.I)||!1,resistant:((q=f[F.id])==null?void 0:q.R)||!1}).eq("id",U.id)}await ne.from("atbs_result").update({nature_prelement:N,souche:R}).eq("id",a),j("success")}catch{j("error")}b(!1)}};return p?n.jsx("div",{className:"text-center",children:"Chargement du tableau..."}):a?n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("div",{className:"flex gap-4 w-full justify-center",children:[n.jsxs("div",{className:"flex flex-col items-start",children:[n.jsx(Ie,{htmlFor:"nature_prelevement",className:"text-lg font-bold print:-mb-2",children:"Nature du prélèvement"}),n.jsx(We,{id:"nature_prelevement",value:N,onChange:T=>_(T.target.value),style:{minWidth:220},className:"print:border-none print:bg-transparent"})]}),n.jsxs("div",{className:"flex flex-col items-start",children:[n.jsx(Ie,{htmlFor:"souche",className:"text-lg font-bold print:-mb-2",children:"Souche étudiée"}),n.jsx(We,{id:"souche",value:R,onChange:T=>E(T.target.value),style:{minWidth:180},className:"print:border-none print:bg-transparent"})]})]}),n.jsxs(oa,{children:[n.jsx(ca,{children:n.jsxs(Wt,{children:[n.jsx(gt,{className:"text-left",children:"Dénomination"}),n.jsx(gt,{className:"text-center",children:"S"}),n.jsx(gt,{className:"text-center",children:"I"}),n.jsx(gt,{className:"text-center",children:"R"})]})}),n.jsx(ua,{children:t.map((T,z)=>{var q,F,U,G,ce,re;return n.jsxs(Wt,{className:z%2===0?"bg-muted/50":"",children:[n.jsx(Qe,{children:T.name}),n.jsxs(Qe,{className:"text-center",children:[n.jsx(na,{className:"print:hidden",checked:!!((q=f[T.id])!=null&&q.S),onCheckedChange:()=>C(T.id,"S")}),n.jsx("p",{className:"hidden print:inline",children:((F=f[T.id])==null?void 0:F.S)&&n.jsx(n.Fragment,{children:"S"})})]}),n.jsxs(Qe,{className:"text-center",children:[n.jsx(na,{className:"print:hidden",checked:!!((U=f[T.id])!=null&&U.I),onCheckedChange:()=>C(T.id,"I")}),n.jsx("p",{className:"hidden print:inline",children:((G=f[T.id])==null?void 0:G.I)&&n.jsx(n.Fragment,{children:"I"})})]}),n.jsxs(Qe,{className:"text-center",children:[n.jsx(na,{checked:!!((ce=f[T.id])!=null&&ce.R),onCheckedChange:()=>C(T.id,"R"),className:"print:hidden"}),n.jsx("p",{className:"hidden print:inline",children:((re=f[T.id])==null?void 0:re.R)&&n.jsx(n.Fragment,{children:"R"})})]})]},T.id)})})]}),n.jsx("div",{className:"mt-2 text-sm  font-semibold text-center",children:"S = sensible   |   I = intermédiaire   |   R = résistant"}),n.jsxs("div",{className:"flex flex-col items-center mt-4 print:hidden",children:[n.jsx(ee,{disabled:v,onClick:M,children:v?"Enregistrement...":"Enregistrer les modifications"}),w==="success"&&n.jsx("span",{className:"text-green-600 mt-2 print:hidden",children:"Modifications enregistrées !"}),w==="error"&&n.jsx("span",{className:"text-red-600 mt-2 print:hidden",children:"Erreur lors de l'enregistrement."})]}),n.jsx("div",{className:"mt-4",children:n.jsx(oo,{date:new Date().toISOString()||""})})]}):n.jsx("div",{className:"text-center text-muted-foreground",children:"Aucun antibiogramme trouvé."})},_B=()=>{const[e,t]=m.useState([]),[s,a]=m.useState(!1),[l,c]=m.useState(""),[u,f]=m.useState(null),[h,p]=m.useState(""),[x,v]=m.useState(null),[b,w]=m.useState(null),j=async()=>{a(!0);const{data:C,error:M}=await ne.from("atbs").select("*").order("name");M?v(M.message):t(C||[]),a(!1)};m.useEffect(()=>{j()},[]);const N=async()=>{if(!l.trim())return;a(!0);const{error:C}=await ne.from("atbs").insert({name:l.trim()});C&&v(C.message),c(""),j(),a(!1)},_=C=>{f(C.id),p(C.name),v(null)},R=async C=>{if(!h.trim())return;a(!0);const{error:M}=await ne.from("atbs").update({name:h.trim()}).eq("id",C);M&&v(M.message),f(null),p(""),j(),a(!1)},E=async C=>{a(!0);const{error:M}=await ne.from("atbs").delete().eq("id",C);M&&v(M.message),j(),a(!1),w(null)};return n.jsxs("div",{className:"max-w-xl mx-auto mt-8",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Gestion des ATBs"}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx(We,{value:l,onChange:C=>c(C.target.value),placeholder:"Nom de l'ATB",disabled:s,onKeyDown:C=>{C.key==="Enter"&&N()}}),n.jsxs(ee,{onClick:N,disabled:s||!l.trim(),children:[n.jsx(Ad,{className:"w-4 h-4 mr-1"})," Ajouter"]})]}),x&&n.jsx("div",{className:"text-red-500 mb-2",children:x}),n.jsxs("table",{className:"min-w-full border",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-2 border",children:"Nom"}),n.jsx("th",{className:"text-left p-2 border",children:"Actions"})]})}),n.jsx("tbody",{children:e.map(C=>n.jsxs("tr",{children:[n.jsx("td",{className:"p-2 border",children:u===C.id?n.jsx(We,{value:h,onChange:M=>p(M.target.value),onKeyDown:M=>{M.key==="Enter"&&R(C.id),M.key==="Escape"&&f(null)},autoFocus:!0}):C.name}),n.jsx("td",{className:"p-2 border",children:u===C.id?n.jsx(ee,{size:"sm",onClick:()=>R(C.id),disabled:s||!h.trim(),children:"Enregistrer"}):n.jsxs(n.Fragment,{children:[n.jsx(ee,{size:"icon",variant:"ghost",onClick:()=>_(C),children:n.jsx(I1,{className:"w-4 h-4"})}),n.jsx(ee,{size:"icon",variant:"destructive",onClick:()=>w(C.id),disabled:s,children:n.jsx(Ll,{className:"w-4 h-4"})})]})})]},C.id))})]}),n.jsx(Ai,{open:!!b,onOpenChange:C=>!C&&w(null),children:n.jsxs(ki,{children:[n.jsx(Di,{children:n.jsx(Oi,{children:"Confirmer la suppression"})}),n.jsx("div",{children:"Êtes-vous sûr de vouloir supprimer cet ATB ?"}),n.jsxs(Yl,{children:[n.jsx(ee,{variant:"destructive",onClick:()=>b&&E(b),disabled:s,children:"Supprimer"}),n.jsx(ee,{variant:"ghost",onClick:()=>w(null),disabled:s,children:"Annuler"})]})]})})]})},SB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},EB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},CB=()=>{var _n;const{resultId:e}=cr();rr();const[t,s]=m.useState(null),[a,l]=m.useState(null),[c,u]=m.useState(null),[f,h]=m.useState(!0),[p,x]=m.useState(!1),[v,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(""),[R,E]=m.useState(!1),[C,M]=m.useState(""),[T,z]=m.useState(""),[q,F]=m.useState(!1),[U,G]=m.useState(null),[ce,re]=m.useState([]),[O,ie]=m.useState(!0),[ue,P]=m.useState(""),[X,V]=m.useState(!1),[te,k]=m.useState(null);m.useEffect(()=>{(async()=>{ie(!0);const{data:Ee,error:Le}=await ne.from("ecb_model").select("id, name, description, structure");Le||re(Ee||[]),ie(!1)})()},[]);const L=[{id:"template1",component:qn},{id:"template2",component:fa},{id:"template3",component:ha},{id:"template4",component:ma}],Y="template1",[H,D]=m.useState(null),[I,$]=m.useState(!0),K=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),s(null),l(null),u(null),$(!0),D(null);try{const{data:fe,error:Ee}=await ne.from("patient_result").select("*").eq("id",e).single();if(Ee)throw Ee;if(!fe)throw new Error("Résultat non trouvé.");s(fe);const[Le,Rt,dn]=await Promise.all([ne.from("patient").select("*").eq("id",fe.patient_id).single(),ne.from("doctor").select("*").eq("id",fe.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);Le.error&&console.warn("Erreur chargement patient:",Le.error.message),Rt.error&&console.warn("Erreur chargement médecin:",Rt.error.message),l(Le.data),u(Rt.data),D(dn.data),$(!1)}catch(fe){console.error("Erreur chargement détails du résultat:",fe),b(fe.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{K()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),z((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const ae=m.useCallback(async fe=>{if(e)try{const{error:Ee}=await ne.from("patient_result").update({description:fe}).eq("id",e);if(Ee)throw Ee}catch(Ee){console.error("Error saving description:",Ee)}},[e]);m.useEffect(()=>{const fe=setTimeout(()=>{N!==(t==null?void 0:t.description)&&ae(N)},1e3);return()=>clearTimeout(fe)},[N,t==null?void 0:t.description,ae]);const ge=m.useCallback(async()=>{F(!0),G(null);try{const fe=C!==""?Number(C):null,Ee=T!==""?Number(T):null;if(C!==""&&isNaN(fe)||T!==""&&isNaN(Ee)){G("Les prix doivent être des nombres valides."),F(!1);return}const{error:Le,data:Rt}=await ne.from("patient_result").update({normal_price:fe,insurance_price:Ee}).eq("id",t.id).select().single();if(Le)throw Le;s(dn=>dn&&{...dn,normal_price:fe,insurance_price:Ee}),E(!1)}catch(fe){G(fe.message||"Erreur lors de la sauvegarde des prix.")}finally{F(!1)}},[t,C,T]),de=async fe=>{if(!(!t||fe===t.status)){x(!0),j(null);try{const{data:Ee,error:Le}=await ne.from("patient_result").update({status:fe}).eq("id",t.id).select().single();if(Le)throw Le;s(Ee||(Rt=>Rt?{...Rt,status:fe}:null))}catch(Ee){console.error("Erreur mise à jour statut:",Ee),j(Ee.message||"Impossible de mettre à jour le statut.")}finally{x(!1)}}},Se=(fe,Ee,Le,Rt)=>{const dn=fe;return n.jsxs("div",{className:Me("flex items-start space-x-3",Rt),children:[n.jsx(dn,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:Ee}),n.jsx("p",{className:"text-sm font-bold print:text-xs",children:Le||n.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},Ae=m.useMemo(()=>{var Ee;const fe=(H==null?void 0:H.selected_template)||Y;return((Ee=L.find(Le=>Le.id===fe))==null?void 0:Ee.component)||qn},[H]),it=m.useMemo(()=>({logoUrl:(H==null?void 0:H.logo_url)||null,labName:H==null?void 0:H.lab_name,addressLine1:H==null?void 0:H.address_line1,addressLine2:H==null?void 0:H.address_line2,cityPostalCode:H==null?void 0:H.city_postal_code,phone:H==null?void 0:H.phone,email:H==null?void 0:H.email,website:H==null?void 0:H.website}),[H]),[rt,xe]=m.useState([]),[pe,Pe]=m.useState({}),[be,Ne]=m.useState({}),[Oe,Xe]=m.useState(!0),[Fe,wt]=m.useState(null),[St,Vt]=m.useState({}),[Be,nt]=m.useState(null),[en,On]=m.useState(null),[Tn,pn]=m.useState(null),[cn,tn]=m.useState(""),[Yt,sr]=m.useState(null),Mn=(fe,Ee)=>{pn(fe),tn(Ee)},gn=()=>{pn(null),tn("")},wr=async fe=>{sr(fe),await ne.from("ecb").update({title:cn}).eq("id",fe),sr(null),pn(null),tn(""),await jn()},jn=m.useCallback(async()=>{if(!e)return;Xe(!0);const{data:fe,error:Ee}=await ne.from("ecb").select("*").eq("result_id",e).order("created_at",{ascending:!0});if(Ee){Xe(!1);return}xe(fe||[]);const Le=(fe||[]).map(Pt=>Pt.id),{data:Rt}=await ne.from("ecb_section").select("*").in("ecb_id",Le.length?Le:["00000000-0000-0000-0000-000000000000"]).order("position",{ascending:!0}),dn={};(Rt||[]).forEach(Pt=>{dn[Pt.ecb_id]||(dn[Pt.ecb_id]=[]),dn[Pt.ecb_id].push(Pt)}),Pe(dn);const Fn=(Rt||[]).map(Pt=>Pt.id),{data:fr}=await ne.from("ecb_value").select("*").in("section_id",Fn.length?Fn:["00000000-0000-0000-0000-000000000000"]).order("position",{ascending:!0}),Pn={};(fr||[]).forEach(Pt=>{Pn[Pt.section_id]||(Pn[Pt.section_id]=[]),Pn[Pt.section_id].push(Pt)}),Ne(Pn),Xe(!1)},[e]);m.useEffect(()=>{jn()},[jn,X]);const Os=fe=>{wt(fe);let Ee={};(pe[fe]||[]).forEach(Le=>{(be[Le.id]||[]).forEach(Rt=>{Ee[Rt.id]=Rt.value??""})}),Vt(Ee)},Or=()=>{wt(null),Vt({})},Xt=(fe,Ee)=>{Vt(Le=>({...Le,[fe]:Ee}))},lt=async fe=>{nt(fe);const Ee=Object.entries(St).map(([Le,Rt])=>ne.from("ecb_value").update({value:Rt}).eq("id",Le));await Promise.all(Ee),nt(null),wt(null),Vt({}),await jn()},J=fe=>{On(fe),setTimeout(()=>window.print(),100)};function ve(){if(typeof window<"u")try{const fe=window.localStorage.getItem("ecb_bold_toggles");return fe?JSON.parse(fe):{}}catch{return{}}return{}}const[_e,ke]=m.useState(ve);m.useEffect(()=>{window.localStorage.setItem("ecb_bold_toggles",JSON.stringify(_e))},[_e]);const He=fe=>{ke(Ee=>{var Le;return{...Ee,[fe]:{...Ee[fe],labelBold:!((Le=Ee[fe])!=null&&Le.labelBold)}}})},ot=fe=>{ke(Ee=>{var Le;return{...Ee,[fe]:{...Ee[fe],valueBold:!((Le=Ee[fe])!=null&&Le.valueBold)}}})};function Ge(fe){if(typeof window<"u")try{const Ee=window.localStorage.getItem("ecb_section_bold_toggles"),Le=Ee?JSON.parse(Ee):{};for(const Rt of fe)Rt in Le||(Le[Rt]=!0);return Le}catch{return Object.fromEntries(fe.map(Ee=>[Ee,!0]))}return Object.fromEntries(fe.map(Ee=>[Ee,!0]))}const mt=Object.values(pe||{}).flat().map(fe=>fe.id),[ct,xt]=m.useState(()=>Ge(mt));m.useEffect(()=>{window.localStorage.setItem("ecb_section_bold_toggles",JSON.stringify(ct))},[ct]),m.useEffect(()=>{xt(fe=>{let Ee=!1;const Le={...fe};for(const Rt of mt)Rt in Le||(Le[Rt]=!0,Ee=!0);return Ee?Le:fe})},[mt.length]);const Ot=fe=>{xt(Ee=>({...Ee,[fe]:!Ee[fe]}))};function Ut(){if(typeof window<"u")try{const fe=window.localStorage.getItem("ecb_abnormal_cells");return fe?JSON.parse(fe):{}}catch{return{}}return{}}const[Zt,Nn]=m.useState(Ut);m.useEffect(()=>{window.localStorage.setItem("ecb_abnormal_cells",JSON.stringify(Zt))},[Zt]);const un=fe=>{Nn(Ee=>({...Ee,[fe]:!Ee[fe]}))};return f?n.jsxs("div",{className:"space-y-6",children:[n.jsx(W,{className:"h-8 w-32"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[n.jsxs("div",{className:"pb-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[n.jsxs("div",{className:"pb-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[n.jsxs("div",{className:"pb-2",children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]})]}),n.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[n.jsx("div",{className:"pb-2",children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx("div",{children:n.jsx(W,{className:"h-20 w-full"})})]}),n.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[n.jsx("div",{className:"pb-2",children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx("div",{children:n.jsx(W,{className:"h-20 w-full"})})]})]}):v?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"mb-4",children:n.jsx(et,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsxs(Dt,{children:[v," ",n.jsx(ee,{variant:"link",onClick:K,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[n.jsx("div",{children:n.jsx(et,{to:a?`/patients/${a.id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),n.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[n.jsx(Kr,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),n.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[H?n.jsx("div",{className:"mb-2 print:mb-0",children:n.jsx(Ae,{data:it,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):n.jsxs(At,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"En-tête Manquant"}),n.jsxs(Dt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",n.jsx(et,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),n.jsx(Xr,{className:"my-2 print:my-0 print:border-none"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[n.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[n.jsx("div",{className:"pb-2",children:n.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]})}),n.jsxs("div",{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Se(Ye,"NOM PRENOM",a==null?void 0:a.full_name),Se(Ye,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),Se(ln,"Date Naissance",a!=null&&a.date_of_birth?at(Ft(a.date_of_birth),"P",{locale:qt}):null),n.jsx("div",{className:"hidden print:block",children:Se(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null)})]})]}),n.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[n.jsx("div",{className:"pb-2",children:n.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),n.jsxs("div",{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Se(Ht,"NOM PRENOM",c==null?void 0:c.full_name),Se(mn,"Téléphone",c==null?void 0:c.phone),Se(Ye,"Provenance",c==null?void 0:c.hospital)]})]}),n.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4 print:hidden",children:[n.jsx("div",{className:"pb-2",children:n.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(la,{className:"h-4 w-4"}),"Résultat Info"]})}),n.jsxs("div",{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Se(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null),n.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),R?n.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:C,onChange:fe=>M(fe.target.value),disabled:q}):n.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:C,disabled:!0,readOnly:!0})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),R?n.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:fe=>z(fe.target.value),disabled:q}):n.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),n.jsx("div",{className:"flex gap-2 mt-1",children:R?n.jsxs(n.Fragment,{children:[n.jsxs(ee,{size:"xs",variant:"secondary",onClick:ge,disabled:q,children:[q?n.jsx(Lt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:q,children:"Annuler"})]}):n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),U&&n.jsx("p",{className:"text-xs text-destructive mt-1",children:U})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Ye,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),n.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[n.jsxs(Qn,{value:t.status??"",onValueChange:fe=>de(fe),disabled:p,children:[n.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",n.jsx(Zn,{placeholder:"Changer statut..."})," "]}),n.jsxs(er,{children:[n.jsx(ht,{value:"attente",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),n.jsx(ht,{value:"en cours",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),n.jsx(ht,{value:"fini",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&n.jsx(Lt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&n.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),n.jsx(Zr,{variant:SB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:EB(t.status)})]})]})]})]})]}),n.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]}),Se(Ye,"NOM PRENOM",a==null?void 0:a.full_name),Se(Ye,"ID Unique",a==null?void 0:a.patient_unique_id),Se(mn,"Téléphone",a==null?void 0:a.phone)]}),n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),Se(Ht,"NOM PRENOM",c==null?void 0:c.full_name),Se(mn,"Téléphone",c==null?void 0:c.phone),Se(Ye,"Hôpital",c==null?void 0:c.hospital)]})]}),n.jsxs("div",{className:"page-content",children:[n.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4 mb-4 print:hidden",children:[n.jsx("div",{children:n.jsx("div",{className:"font-semibold",children:"Créer un nouvel ECB"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(Ie,{htmlFor:"ecb-model-select",children:"Sélectionner un modèle"}),n.jsxs(Qn,{value:ue,onValueChange:P,disabled:O||X,children:[n.jsx(Jn,{id:"ecb-model-select",className:"w-full",children:n.jsx(Zn,{placeholder:O?"Chargement...":"Choisir un modèle"})}),n.jsx(er,{children:ce.map(fe=>n.jsx(ht,{value:fe.id,children:fe.name},fe.id))})]}),ue&&n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:(_n=ce.find(fe=>fe.id===ue))==null?void 0:_n.description})]}),n.jsxs(ee,{onClick:async()=>{var fe;V(!0),k(null);try{if(!ue||!e)throw new Error("Sélectionner un modèle.");const Ee=ce.find(Pt=>Pt.id===ue);if(!Ee)throw new Error("Modèle non trouvé.");const{data:Le,error:Rt}=await ne.from("ecb").insert({result_id:e,model_id:Ee.id,title:Ee.name,created_by:((fe=(await ne.auth.getUser()).data.user)==null?void 0:fe.id)||null}).select().single();if(Rt)throw Rt;const dn=Ee.structure;let Fn=[],fr=[],Pn=0;for(const Pt of dn){const pa=crypto.randomUUID();Fn.push({id:pa,ecb_id:Le.id,section_title:Pt.title,position:Pn});let Ps=0;for(const Sn of Pt.labels)fr.push({section_id:pa,label:Sn,value:null,position:Ps}),Ps++;Pn++}if(Fn.length){const{error:Pt}=await ne.from("ecb_section").insert(Fn);if(Pt)throw Pt}if(fr.length){const{error:Pt}=await ne.from("ecb_value").insert(fr);if(Pt)throw Pt}await jn(),P("")}catch(Ee){k(Ee.message||"Erreur lors de la création de l''ECB.")}finally{V(!1)}},disabled:!ue||X,className:"min-w-[120px]",children:[X?n.jsx(Lt,{className:"h-4 w-4 animate-spin mr-2"}):null,"Créer"]})]}),te&&n.jsx("div",{className:"text-xs text-destructive mt-2",children:te})]})]}),Oe?n.jsx(W,{className:"h-12 w-full"}):rt.length===0?n.jsx("div",{className:"text-muted-foreground text-sm",children:"Aucun ECB trouvé pour ce résultat."}):n.jsx("div",{className:"space-y-6 print:space-y-0",children:rt.map(fe=>n.jsxs("div",{className:"relative  p-4",children:[n.jsxs("div",{className:"print:hidden flex flex-row items-center justify-between border-b pb-2 mb-2 print:mb-0",children:[n.jsxs("div",{className:"print:hidden",children:[n.jsx("div",{className:"font-semibold text-base flex items-center gap-2",children:Tn===fe.id?n.jsxs(n.Fragment,{children:[n.jsx(We,{value:cn,onChange:Ee=>tn(Ee.target.value),onKeyDown:Ee=>{Ee.key==="Enter"&&wr(fe.id),Ee.key==="Escape"&&gn()},disabled:Yt===fe.id,className:"text-base w-48",autoFocus:!0}),n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>wr(fe.id),disabled:Yt===fe.id,children:Yt===fe.id?n.jsx(Lt,{className:"h-3 w-3 animate-spin"}):"Enregistrer"}),n.jsx(ee,{size:"xs",variant:"ghost",onClick:gn,disabled:Yt===fe.id,children:"Annuler"})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{children:fe.title}),n.jsx(ee,{size:"xs",variant:"ghost",onClick:()=>Mn(fe.id,fe.title),className:"ml-1",children:n.jsx(Qr,{className:"h-3 w-3"})})]})}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Créé le"," ",at(Ft(fe.created_at),"Pp",{locale:qt})]})]}),n.jsx("div",{className:"flex gap-2 print:hidden",children:Fe===fe.id?n.jsxs(n.Fragment,{children:[n.jsxs(ee,{size:"sm",variant:"outline",onClick:()=>lt(fe.id),disabled:Be===fe.id,children:[Be===fe.id?n.jsx(Lt,{className:"h-4 w-4 animate-spin mr-2"}):null,"Enregistrer toutes les modifications"]}),n.jsx(ee,{size:"sm",variant:"ghost",onClick:Or,disabled:Be===fe.id,children:"Annuler"})]}):n.jsxs(n.Fragment,{children:[n.jsxs(ee,{size:"sm",variant:"outline",onClick:()=>Os(fe.id),children:[n.jsx(Qr,{className:"h-4 w-4 mr-1"})," Modifier"]}),n.jsxs(ee,{size:"sm",variant:"outline",onClick:()=>J(fe.id),children:[n.jsx(bf,{className:"h-4 w-4 mr-1"})," Imprimer"]})]})})]}),n.jsx("div",{className:"print:hidden",children:(pe[fe.id]||[]).map(Ee=>n.jsxs("div",{className:"mb-4 print:mb-0",children:[n.jsxs("div",{className:"font-semibold mb-2 text-lg flex items-center gap-1",children:[Ee.section_title,n.jsx(ee,{size:"icon",variant:ct[Ee.id]?"default":"ghost",className:"h-5 w-5 p-0",title:ct[Ee.id]?"Définir en normal":"Mettre en gras",onClick:()=>Ot(Ee.id),type:"button",tabIndex:-1,children:n.jsx("b",{children:"B"})})]}),n.jsx("div",{className:"grid grid-cols-1  gap-2",children:(be[Ee.id]||[]).map(Le=>{var Rt,dn,Fn,fr,Pn;return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Ie,{className:"w-40 text-md font-medium flex items-center gap-1",children:[Le.label,n.jsx(ee,{size:"icon",variant:(Rt=_e[Le.id])!=null&&Rt.labelBold?"default":"ghost",className:"h-5 w-5 p-0",title:(dn=_e[Le.id])!=null&&dn.labelBold?"Définir en normal":"Mettre en gras",onClick:()=>He(Le.id),type:"button",tabIndex:-1,children:n.jsx("b",{children:"B"})})]}),Fe===fe.id?n.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[n.jsx(We,{value:St[Le.id]??"",onChange:Pt=>Xt(Le.id,Pt.target.value),disabled:Be===fe.id,className:"text-xs flex-1"}),n.jsx(ee,{size:"icon",variant:(Fn=_e[Le.id])!=null&&Fn.valueBold?"default":"ghost",className:"h-5 w-5 p-0",title:(fr=_e[Le.id])!=null&&fr.valueBold?"Définir en normal":"Mettre en gras",onClick:()=>ot(Le.id),type:"button",tabIndex:-1,children:n.jsx("b",{children:"B"})}),n.jsx(ee,{size:"icon",variant:Zt[Le.id]?"destructive":"ghost",className:"h-5 w-5 p-0",title:Zt[Le.id]?"Cellule anormale":"Marquer comme anormale",onClick:()=>un(Le.id),type:"button",tabIndex:-1,children:n.jsx("span",{style:{fontWeight:"bold"},children:"!"})})]}):n.jsx("span",{className:`text-xs flex-1 ${(Pn=_e[Le.id])!=null&&Pn.valueBold?"font-bold":""} ${Zt[Le.id]?"bg-gray-200 font-bold":""}`,children:Le.value??n.jsx("span",{className:"italic text-muted-foreground",children:"(vide)"})})]},Le.id)})})]},Ee.id))}),en===fe.id&&n.jsxs("div",{className:"hidden print:block bg-white p-4 print:p-0",children:[n.jsx("div",{className:"font-semibold text-lg text-center mb-1",children:fe.title}),n.jsx("table",{className:"w-full border-collapse print-ecb-table",children:n.jsx("tbody",{children:(pe[fe.id]||[]).map(Ee=>n.jsxs(we.Fragment,{children:[n.jsx("tr",{children:n.jsx("td",{colSpan:2,className:`text-xs mb-1 py-2 print-ecb-section-title ${ct[Ee.id]?"font-bold":"font-normal"}`,children:Ee.section_title})}),(be[Ee.id]||[]).map(Le=>{var Rt,dn;return n.jsxs("tr",{children:[n.jsx("td",{className:`align-top pr-4 pb-1 text-xs print-ecb-label ${(Rt=_e[Le.id])!=null&&Rt.labelBold?"font-bold":"font-normal"}`,style:{width:"35%"},children:Le.label}),n.jsx("td",{className:`align-top pb-1 text-xs print-ecb-value ${(dn=_e[Le.id])!=null&&dn.valueBold?"font-bold":"font-normal"} ${Zt[Le.id]?"print-ecb-abnormal-cell":""}`,children:Le.value?n.jsx("div",{className:"flex items-center justify-between",children:Le.value.split(";").map((Fn,fr)=>n.jsx("div",{children:Fn},fr))}):n.jsx("span",{className:"italic text-muted-foreground",children:"(vide)"})})]},Le.id)})]},Ee.id))})}),n.jsx("div",{className:"mt-4",children:n.jsx(oo,{date:new Date().toISOString()})}),n.jsx("style",{jsx:!0,global:!0,children:`
                        @media print {
                          .print-ecb-table {
                            width: 100%;
                            border-collapse: collapse;
                            font-size: 13.5px;
                          }
                          .print-ecb-label {
                            text-align: left;
                            padding-right: 16px;
                            vertical-align: top;
                            width: 35%;
                            font-size: 13.5px;
                          }
                          .print-ecb-section-title {
                            background: #f6f6f6;
                            font-size: 14px;
                            font-weight: bold;
                            padding-top: 12px;
                            padding-bottom: 6px;
                            text-align: left;
                            border-bottom: 1px solid #e5e5e5;
                          }
                          .print-ecb-value {
                            text-align: left;
                            vertical-align: top;
                            word-break: break-word;
                            font-size: 13.5px;
                          }
                          .print-ecb-abnormal-cell {
                            background: #e5e5e5 !important;
                            font-weight: bold !important;
                          }
                          .print-ecb-table td {
                            padding-top: 3px;
                            padding-bottom: 3px;
                          }
                        }
                      `})]})]},fe.id))})]})]})," "]}):n.jsx("div",{children:"Résultat non trouvé."})},RB=()=>{const[e,t]=m.useState([]),[s,a]=m.useState(!1),[l,c]=m.useState(null),[u,f]=m.useState(""),[h,p]=m.useState(""),[x,v]=m.useState(""),[b,w]=m.useState(""),[j,N]=m.useState(!1),[_,R]=m.useState(null),[E,C]=m.useState([]),[M,T]=m.useState(null),[z,q]=m.useState(null),F=async()=>{a(!0);const{data:Y,error:H}=await ne.from("ecb_model").select("id, name, description, structure, created_at").order("created_at");H||t(Y||[]),a(!1)};m.useEffect(()=>{F()},[]);const U=Y=>{c(Y.id),f(Y.name),p(Y.description||"")},G=async Y=>{N(!0),await ne.from("ecb_model").update({name:u,description:h}).eq("id",Y),c(null),f(""),p(""),N(!1),F()},ce=async Y=>{N(!0),await ne.from("ecb_model").delete().eq("id",Y),F(),N(!1),q(null)},re=async()=>{x.trim()&&(N(!0),await ne.from("ecb_model").insert({name:x.trim(),description:b.trim(),structure:JSON.stringify([])}),v(""),w(""),N(!1),F())},O=Y=>{R(Y),C(Array.isArray(Y.structure)?Y.structure:[]),T(null)},ie=()=>{R(null),C([]),T(null)},ue=async()=>{if(_){for(const Y of E){if(!Y.title.trim()){T("Titre de section requis");return}if(!Array.isArray(Y.labels)||Y.labels.some(H=>!H.trim())){T("Chaque section doit avoir des labels non vides");return}}N(!0),await ne.from("ecb_model").update({structure:E}).eq("id",_.id),N(!1),ie(),F()}},P=()=>C([...E,{title:"Nouvelle section",labels:["Label 1"]}]),X=Y=>C(E.filter((H,D)=>D!==Y)),V=(Y,H)=>C(E.map((D,I)=>I===Y?{...D,title:H}:D)),te=Y=>C(E.map((H,D)=>D===Y?{...H,labels:[...H.labels,"Nouveau label"]}:H)),k=(Y,H,D)=>C(E.map((I,$)=>$===Y?{...I,labels:I.labels.map((K,ae)=>ae===H?D:K)}:I)),L=(Y,H)=>C(E.map((D,I)=>I===Y?{...D,labels:D.labels.filter(($,K)=>K!==H)}:D));return n.jsxs("div",{className:"w-full mx-auto p-4",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Gestion des Modèles ECB"}),n.jsxs("div",{className:"mb-6 flex gap-2",children:[n.jsx(We,{value:x,onChange:Y=>v(Y.target.value),placeholder:"Nouveau modèle",className:"flex-1"}),n.jsx(We,{value:b,onChange:Y=>w(Y.target.value),placeholder:"Description (optionnelle)",className:"flex-1"}),n.jsxs(ee,{onClick:re,disabled:j||!x.trim(),children:[n.jsx(Ad,{className:"w-4 h-4 mr-1"})," Ajouter"]})]}),n.jsx("div",{className:"bg-white rounded shadow p-4",children:s?n.jsx("div",{children:"Chargement..."}):n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-2",children:"Nom du modèle"}),n.jsx("th",{className:"text-left py-2",children:"Description"}),n.jsx("th",{className:"text-left py-2",children:"Structure"}),n.jsx("th",{className:"w-48"})]})}),n.jsx("tbody",{children:e.map(Y=>n.jsxs(we.Fragment,{children:[n.jsxs("tr",{children:[n.jsx("td",{className:"py-2",children:l===Y.id?n.jsx(We,{value:u,onChange:H=>f(H.target.value),className:"inline-block w-auto",onKeyDown:H=>{H.key==="Enter"&&G(Y.id),H.key==="Escape"&&c(null)},autoFocus:!0}):n.jsx("span",{children:Y.name})}),n.jsx("td",{className:"py-2",children:l===Y.id?n.jsx(We,{value:h,onChange:H=>p(H.target.value),className:"inline-block w-auto",onKeyDown:H=>{H.key==="Enter"&&G(Y.id),H.key==="Escape"&&c(null)}}):n.jsx("span",{children:Y.description})}),n.jsx("td",{className:"py-2",children:n.jsx(ee,{size:"sm",variant:"outline",onClick:()=>O(Y),children:"Éditer Structure"})}),n.jsx("td",{children:l===Y.id?n.jsx(ee,{size:"sm",onClick:()=>G(Y.id),disabled:j||!u.trim(),children:"Enregistrer"}):n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ee,{size:"icon",variant:"ghost",onClick:()=>U(Y),children:n.jsx(I1,{className:"w-4 h-4"})}),n.jsx(ee,{size:"icon",variant:"destructive",onClick:()=>q(Y.id),children:n.jsx(Ll,{className:"w-4 h-4"})})]})})]}),_&&_.id===Y.id&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,children:n.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2 border rounded p-4 bg-muted",children:[n.jsx("div",{className:"mb-2 font-semibold text-lg",children:"Éditer la structure du modèle"}),E.map((H,D)=>n.jsxs("div",{className:"border rounded p-3 mb-2",children:[n.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[n.jsx(We,{value:H.title,onChange:I=>V(D,I.target.value),placeholder:"Titre de section",className:"flex-1"}),n.jsx(ee,{size:"icon",variant:"destructive",onClick:()=>X(D),children:n.jsx(Ll,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"ml-4 space-y-1",children:[H.labels.map((I,$)=>n.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[n.jsx(We,{value:I,onChange:K=>k(D,$,K.target.value),placeholder:"Label",className:"flex-1"}),n.jsx(ee,{size:"icon",variant:"destructive",onClick:()=>L(D,$),children:n.jsx(Ll,{className:"w-4 h-4"})})]},$)),n.jsxs(ee,{size:"sm",variant:"outline",onClick:()=>te(D),children:[n.jsx(Ad,{className:"w-4 h-4 mr-1"})," Ajouter Label"]})]})]},D)),n.jsxs(ee,{size:"sm",variant:"secondary",onClick:P,children:[n.jsx(Ad,{className:"w-4 h-4 mr-1"})," Ajouter Section"]}),M&&n.jsx("div",{className:"text-red-500 text-sm",children:M}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx(ee,{onClick:ue,disabled:j,children:"Enregistrer la structure"}),n.jsx(ee,{variant:"ghost",onClick:ie,children:"Annuler"})]})]})})})]},Y.id))})]})}),n.jsx(Ai,{open:!!z,onOpenChange:Y=>!Y&&q(null),children:n.jsxs(ki,{children:[n.jsx(Di,{children:n.jsx(Oi,{children:"Confirmer la suppression"})}),n.jsx("div",{children:"Êtes-vous sûr de vouloir supprimer ce modèle ECB ?"}),n.jsxs(Yl,{children:[n.jsx(ee,{variant:"destructive",onClick:()=>z&&ce(z),disabled:j,children:"Supprimer"}),n.jsx(ee,{variant:"ghost",onClick:()=>q(null),disabled:j,children:"Annuler"})]})]})})]})},TB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},MB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},AB=()=>{const{resultId:e}=cr();rr();const[t,s]=m.useState(null),[a,l]=m.useState(null),[c,u]=m.useState(null),[f,h]=m.useState(!0),[p,x]=m.useState(!1),[v,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(""),[R,E]=m.useState(!1),[C,M]=m.useState(""),[T,z]=m.useState(""),[q,F]=m.useState(!1),[U,G]=m.useState(null),ce=[{id:"template1",component:qn},{id:"template2",component:fa},{id:"template3",component:ha},{id:"template4",component:ma}],re="template1",[O,ie]=m.useState(null),[ue,P]=m.useState(!0),X=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),s(null),l(null),u(null),P(!0),ie(null);try{const{data:D,error:I}=await ne.from("patient_result").select("*").eq("id",e).single();if(I)throw I;if(!D)throw new Error("Résultat non trouvé.");s(D);const[$,K,ae]=await Promise.all([ne.from("patient").select("*").eq("id",D.patient_id).single(),ne.from("doctor").select("*").eq("id",D.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);$.error&&console.warn("Erreur chargement patient:",$.error.message),K.error&&console.warn("Erreur chargement médecin:",K.error.message),l($.data),u(K.data),ie(ae.data),P(!1)}catch(D){console.error("Erreur chargement détails du résultat:",D),b(D.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{X()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),z((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const V=m.useCallback(async D=>{if(e)try{const{error:I}=await ne.from("patient_result").update({description:D}).eq("id",e);if(I)throw I}catch(I){console.error("Error saving description:",I)}},[e]);m.useEffect(()=>{const D=setTimeout(()=>{N!==(t==null?void 0:t.description)&&V(N)},1e3);return()=>clearTimeout(D)},[N,t==null?void 0:t.description,V]);const te=m.useCallback(async()=>{F(!0),G(null);try{const D=C!==""?Number(C):null,I=T!==""?Number(T):null;if(C!==""&&isNaN(D)||T!==""&&isNaN(I)){G("Les prix doivent être des nombres valides."),F(!1);return}const{error:$,data:K}=await ne.from("patient_result").update({normal_price:D,insurance_price:I}).eq("id",t.id).select().single();if($)throw $;s(ae=>ae&&{...ae,normal_price:D,insurance_price:I}),E(!1)}catch(D){G(D.message||"Erreur lors de la sauvegarde des prix.")}finally{F(!1)}},[t,C,T]),k=async D=>{if(!(!t||D===t.status)){x(!0),j(null);try{const{data:I,error:$}=await ne.from("patient_result").update({status:D}).eq("id",t.id).select().single();if($)throw $;s(I||(K=>K?{...K,status:D}:null))}catch(I){console.error("Erreur mise à jour statut:",I),j(I.message||"Impossible de mettre à jour le statut.")}finally{x(!1)}}},L=(D,I,$,K)=>{const ae=D;return n.jsxs("div",{className:Me("flex items-start space-x-3",K),children:[n.jsx(ae,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:I}),n.jsx("p",{className:"text-sm font-bold print:text-xs",children:$||n.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},Y=m.useMemo(()=>{var I;const D=(O==null?void 0:O.selected_template)||re;return((I=ce.find($=>$.id===D))==null?void 0:I.component)||qn},[O]),H=m.useMemo(()=>({logoUrl:(O==null?void 0:O.logo_url)||null,labName:O==null?void 0:O.lab_name,addressLine1:O==null?void 0:O.address_line1,addressLine2:O==null?void 0:O.address_line2,cityPostalCode:O==null?void 0:O.city_postal_code,phone:O==null?void 0:O.phone,email:O==null?void 0:O.email,website:O==null?void 0:O.website}),[O]);return f?n.jsxs("div",{className:"space-y-6",children:[n.jsx(W,{className:"h-8 w-32"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]})]}):v?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"mb-4",children:n.jsx(et,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsxs(Dt,{children:[v," ",n.jsx(ee,{variant:"link",onClick:X,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[n.jsx("div",{children:n.jsx(et,{to:a?`/patients/${a.id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),n.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[n.jsx(Kr,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),n.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[O?n.jsx("div",{className:"mb-2 print:mb-0",children:n.jsx(Y,{data:H,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):n.jsxs(At,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"En-tête Manquant"}),n.jsxs(Dt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",n.jsx(et,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),n.jsx(Xr,{className:"my-2 print:my-0 print:border-none"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[n.jsxs(Ce,{className:"overflow-hidden print:shadow-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[L(Ye,"NOM PRENOM",a==null?void 0:a.full_name),L(Ye,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),L(ln,"Date Naissance",a!=null&&a.date_of_birth?at(Ft(a.date_of_birth),"P",{locale:qt}):null),n.jsx("div",{className:"hidden print:block",children:L(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null)})]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[L(Ht,"NOM PRENOM",c==null?void 0:c.full_name),L(mn,"Téléphone",c==null?void 0:c.phone),L(Ye,"Provenance",c==null?void 0:c.hospital)]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(la,{className:"h-4 w-4"}),"Résultat Info"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[L(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null),n.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),R?n.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:C,onChange:D=>M(D.target.value),disabled:q}):n.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:C,disabled:!0,readOnly:!0})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),R?n.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:D=>z(D.target.value),disabled:q}):n.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),n.jsx("div",{className:"flex gap-2 mt-1",children:R?n.jsxs(n.Fragment,{children:[n.jsxs(ee,{size:"xs",variant:"secondary",onClick:te,disabled:q,children:[q?n.jsx(Lt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:q,children:"Annuler"})]}):n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),U&&n.jsx("p",{className:"text-xs text-destructive mt-1",children:U})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Ye,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),n.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[n.jsxs(Qn,{value:t.status??"",onValueChange:D=>k(D),disabled:p,children:[n.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",n.jsx(Zn,{placeholder:"Changer statut..."})," "]}),n.jsxs(er,{children:[n.jsx(ht,{value:"attente",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),n.jsx(ht,{value:"en cours",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),n.jsx(ht,{value:"fini",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&n.jsx(Lt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&n.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),n.jsx(Zr,{variant:TB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:MB(t.status)})]})]})]})]})]}),n.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]}),L(Ye,"NOM PRENOM",a==null?void 0:a.full_name),L(Ye,"ID Unique",a==null?void 0:a.patient_unique_id),L(mn,"Téléphone",a==null?void 0:a.phone)]}),n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),L(Ht,"NOM PRENOM",c==null?void 0:c.full_name),L(mn,"Téléphone",c==null?void 0:c.phone),L(Ye,"Hôpital",c==null?void 0:c.hospital)]})]}),n.jsx(kB,{resultId:e})]})," "]}):n.jsx("div",{children:"Résultat non trouvé."})},kB=({resultId:e})=>{var _,R,E,C;const[t,s]=m.useState(null),[a,l]=m.useState(!0),[c,u]=m.useState(null),f="Pas de virus détecté ou 366 copies/ml; 1.82 log",[h,p]=m.useState((t==null?void 0:t.value)??f),[x,v]=m.useState(!1),[b,w]=m.useState(!1);m.useEffect(()=>{(async()=>{l(!0),u(null);try{const{data:T,error:z}=await ne.from("vhb").select("*").eq("result_id",e).maybeSingle();if(z)throw z;s(T),p((T==null?void 0:T.value)||f)}catch(T){u(T.message||"Erreur lors du chargement du VHB.")}finally{l(!1)}})()},[e]);const j=async()=>{w(!0),u(null);try{const{data:M,error:T}=await ne.from("vhb").insert({result_id:e,value:h}).select().single();if(T)throw T;s(M),v(!1)}catch(M){u(M.message||"Erreur lors de la création du VHB.")}finally{w(!1)}},N=async()=>{if(t){w(!0),u(null);try{const{data:M,error:T}=await ne.from("vhb").update({value:h}).eq("id",t.id).select().single();if(T)throw T;s(M),v(!1)}catch(M){u(M.message||"Erreur lors de la mise à jour du VHB.")}finally{w(!1)}}};return a?n.jsx("div",{children:"Chargement du VHB..."}):c?n.jsx("div",{className:"text-destructive",children:c}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"print:hidden flex justify-end",children:n.jsx(ee,{onClick:()=>window.print(),variant:"outline",size:"sm",children:"Imprimer"})}),n.jsx("div",{className:"print:hidden",children:t?n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-lg font-semibold",children:"VHB"}),x?n.jsxs(n.Fragment,{children:[n.jsx(We,{value:h,onChange:M=>p(M.target.value),disabled:b,placeholder:"Pas de virus détecté ou 366 copies/ml; 1.82 log"}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"(Pas de virus détecté ou 366 copies/ml; 1.82 log)"}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(ee,{onClick:N,disabled:b||!h,children:b?"Sauvegarde...":"Sauvegarder"}),n.jsx(ee,{variant:"outline",onClick:()=>{v(!1),p(t.value)},disabled:b,children:"Annuler"})]})]}):n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("span",{className:"font-mono text-lg",children:t.value}),n.jsx(ee,{variant:"outline",size:"sm",onClick:()=>v(!0),children:"Modifier"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Créer VHB"}),n.jsx(We,{value:h,onChange:M=>p(M.target.value),placeholder:"Pas de virus détecté ou 366 copies/ml; 1.82 log",disabled:b}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"(Pas de virus détecté ou 366 copies/ml; 1.82 log)"}),n.jsx(ee,{onClick:j,disabled:b||!h,className:"mt-2",children:b?"Création...":"Créer"})]})}),n.jsx("h2",{className:" text-3xl text-center mb-4 print:pt-4 font-bold uppercase mx-auto tracking-tight print:block  print:text-center",children:"VIROLOGIE"}),t!=null&&t.value&&(t.value.includes("Pas de virus")||t.value.includes("virus"))?n.jsxs("div",{className:" print:block mt-8 text-black text-lg",children:[n.jsxs("div",{className:"flex flex-row justify-between mb-4",children:[n.jsx("span",{className:"font-bold underline",children:"EXAMENS"}),n.jsx("span",{className:"font-bold underline",children:"RESULTATS"})]}),n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:"font-bold text-xl underline",children:"CHARGE VIRALE HEPATITE B"})}),n.jsxs("div",{className:"flex flex-row justify-between items-start mt-8",children:[n.jsxs("div",{className:"flex flex-col items-start gap-2 text-lg",style:{minWidth:"340px"},children:[n.jsx("span",{className:"font-semibold",children:"Charge virale  VHB"}),n.jsx("span",{className:"text-xs mt-1 whitespace-nowrap",children:"(Abbott m2000rt et m2000sp Technique PCR en temps réel)"})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2 text-lg text-right",style:{minWidth:"340px"},children:[n.jsx("span",{className:"font-bold text-2xl",children:((_=t.value.match(/([\d,.]+\s*copies\/ml)/i))==null?void 0:_[1])||t.value}),n.jsx("span",{className:"text-xs mt-1",children:"( Pour 0.5 ml d'échantillon )"}),n.jsx("span",{className:"font-bold text-2xl mt-8",children:((R=t.value.split(";")[1])==null?void 0:R.trim())||""})]})]})]}):t!=null&&t.value?n.jsxs("div",{className:" mt-8 text-black text-lg positive format",children:[n.jsxs("div",{className:"flex flex-row justify-between mb-2",children:[n.jsx("span",{className:"font-bold underline text-xl",children:"EXAMENS"}),n.jsx("span",{className:"font-bold underline text-xl",children:"RESULTATS"})]}),n.jsx("div",{className:"w-full mb-6",children:n.jsx("div",{className:"font-bold text-2xl underline",children:"CHARGE VIRALE HEPATITE B"})}),n.jsxs("div",{className:"flex flex-row justify-between items-start mt-8",children:[n.jsxs("div",{className:"flex flex-col items-start gap-2 text-lg",style:{minWidth:"340px"},children:[n.jsx("span",{className:"font-semibold text-xl",children:"Charge virale  VHB"}),n.jsx("span",{className:"text-xs mt-1 whitespace-nowrap",children:"(Abbott m2000rt et m2000sp Technique PCR en temps réel)"}),n.jsx("span",{className:"font-semibold mt-13 text-2xl",children:"Soit"})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2 text-lg text-right",style:{minWidth:"340px"},children:[n.jsx("span",{className:"font-bold text-2xl",children:((E=t.value.match(/([\d,.]+\s*copies\/ml)/i))==null?void 0:E[1])||t.value}),n.jsx("span",{className:"text-xs mt-1",children:"(limite de détection <35 pour 0.5 ml)"}),n.jsx("span",{className:"text-xs",children:"(d'échantillon, 1 UI= 3.41 copie/ml)"}),n.jsx("span",{className:"font-bold text-2xl mt-5",children:((C=t.value.split(";")[1])==null?void 0:C.trim())||""})]})]})]}):null,n.jsx("div",{className:" mt-20",children:n.jsx(oo,{date:new Date().toISOString()})})]})},DB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},OB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},PB=()=>{const{resultId:e}=cr();rr();const[t,s]=m.useState(null),[a,l]=m.useState(null),[c,u]=m.useState(null),[f,h]=m.useState(!0),[p,x]=m.useState(!1),[v,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(""),[R,E]=m.useState(!1),[C,M]=m.useState(""),[T,z]=m.useState(""),[q,F]=m.useState(!1),[U,G]=m.useState(null),ce=[{id:"template1",component:qn},{id:"template2",component:fa},{id:"template3",component:ha},{id:"template4",component:ma}],re="template1",[O,ie]=m.useState(null),[ue,P]=m.useState(!0),X=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),s(null),l(null),u(null),P(!0),ie(null);try{const{data:D,error:I}=await ne.from("patient_result").select("*").eq("id",e).single();if(I)throw I;if(!D)throw new Error("Résultat non trouvé.");s(D);const[$,K,ae]=await Promise.all([ne.from("patient").select("*").eq("id",D.patient_id).single(),ne.from("doctor").select("*").eq("id",D.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);$.error&&console.warn("Erreur chargement patient:",$.error.message),K.error&&console.warn("Erreur chargement médecin:",K.error.message),l($.data),u(K.data),ie(ae.data),P(!1)}catch(D){console.error("Erreur chargement détails du résultat:",D),b(D.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{X()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),z((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const V=m.useCallback(async D=>{if(e)try{const{error:I}=await ne.from("patient_result").update({description:D}).eq("id",e);if(I)throw I}catch(I){console.error("Error saving description:",I)}},[e]);m.useEffect(()=>{const D=setTimeout(()=>{N!==(t==null?void 0:t.description)&&V(N)},1e3);return()=>clearTimeout(D)},[N,t==null?void 0:t.description,V]);const te=m.useCallback(async()=>{F(!0),G(null);try{const D=C!==""?Number(C):null,I=T!==""?Number(T):null;if(C!==""&&isNaN(D)||T!==""&&isNaN(I)){G("Les prix doivent être des nombres valides."),F(!1);return}const{error:$,data:K}=await ne.from("patient_result").update({normal_price:D,insurance_price:I}).eq("id",t.id).select().single();if($)throw $;s(ae=>ae&&{...ae,normal_price:D,insurance_price:I}),E(!1)}catch(D){G(D.message||"Erreur lors de la sauvegarde des prix.")}finally{F(!1)}},[t,C,T]),k=async D=>{if(!(!t||D===t.status)){x(!0),j(null);try{const{data:I,error:$}=await ne.from("patient_result").update({status:D}).eq("id",t.id).select().single();if($)throw $;s(I||(K=>K?{...K,status:D}:null))}catch(I){console.error("Erreur mise à jour statut:",I),j(I.message||"Impossible de mettre à jour le statut.")}finally{x(!1)}}},L=(D,I,$,K)=>{const ae=D;return n.jsxs("div",{className:Me("flex items-start space-x-3",K),children:[n.jsx(ae,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:I}),n.jsx("p",{className:"text-sm font-bold print:text-xs",children:$||n.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},Y=m.useMemo(()=>{var I;const D=(O==null?void 0:O.selected_template)||re;return((I=ce.find($=>$.id===D))==null?void 0:I.component)||qn},[O]),H=m.useMemo(()=>({logoUrl:(O==null?void 0:O.logo_url)||null,labName:O==null?void 0:O.lab_name,addressLine1:O==null?void 0:O.address_line1,addressLine2:O==null?void 0:O.address_line2,cityPostalCode:O==null?void 0:O.city_postal_code,phone:O==null?void 0:O.phone,email:O==null?void 0:O.email,website:O==null?void 0:O.website}),[O]);return f?n.jsxs("div",{className:"space-y-6",children:[n.jsx(W,{className:"h-8 w-32"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]})]}):v?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"mb-4",children:n.jsx(et,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsxs(Dt,{children:[v," ",n.jsx(ee,{variant:"link",onClick:X,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[n.jsx("div",{children:n.jsx(et,{to:a?`/patients/${a.id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),n.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[n.jsx(Kr,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),n.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[O?n.jsx("div",{className:"mb-2 print:mb-0",children:n.jsx(Y,{data:H,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):n.jsxs(At,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"En-tête Manquant"}),n.jsxs(Dt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",n.jsx(et,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),n.jsx(Xr,{className:"my-2 print:my-0 print:border-none"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[n.jsxs(Ce,{className:"overflow-hidden print:shadow-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[L(Ye,"NOM PRENOM",a==null?void 0:a.full_name),L(Ye,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),L(ln,"Date Naissance",a!=null&&a.date_of_birth?at(Ft(a.date_of_birth),"P",{locale:qt}):null),n.jsx("div",{className:"hidden print:block",children:L(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null)})]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[L(Ht,"NOM PRENOM",c==null?void 0:c.full_name),L(mn,"Téléphone",c==null?void 0:c.phone),L(Ye,"Provenance",c==null?void 0:c.hospital)]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(la,{className:"h-4 w-4"}),"Résultat Info"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[L(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null),n.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),R?n.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:C,onChange:D=>M(D.target.value),disabled:q}):n.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:C,disabled:!0,readOnly:!0})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),R?n.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:D=>z(D.target.value),disabled:q}):n.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),n.jsx("div",{className:"flex gap-2 mt-1",children:R?n.jsxs(n.Fragment,{children:[n.jsxs(ee,{size:"xs",variant:"secondary",onClick:te,disabled:q,children:[q?n.jsx(Lt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:q,children:"Annuler"})]}):n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),U&&n.jsx("p",{className:"text-xs text-destructive mt-1",children:U})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Ye,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),n.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[n.jsxs(Qn,{value:t.status??"",onValueChange:D=>k(D),disabled:p,children:[n.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",n.jsx(Zn,{placeholder:"Changer statut..."})," "]}),n.jsxs(er,{children:[n.jsx(ht,{value:"attente",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),n.jsx(ht,{value:"en cours",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),n.jsx(ht,{value:"fini",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&n.jsx(Lt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&n.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),n.jsx(Zr,{variant:DB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:OB(t.status)})]})]})]})]})]}),n.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]}),L(Ye,"NOM PRENOM",a==null?void 0:a.full_name),L(Ye,"ID Unique",a==null?void 0:a.patient_unique_id),L(mn,"Téléphone",a==null?void 0:a.phone)]}),n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),L(Ht,"NOM PRENOM",c==null?void 0:c.full_name),L(mn,"Téléphone",c==null?void 0:c.phone),L(Ye,"Hôpital",c==null?void 0:c.hospital)]})]}),n.jsx(LB,{resultId:e})]})," "]}):n.jsx("div",{children:"Résultat non trouvé."})},LB=({resultId:e})=>{const[t,s]=m.useState(null),[a,l]=m.useState(!0),[c,u]=m.useState(null),[f,h]=m.useState((t==null?void 0:t.value)??"1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté"),[p,x]=m.useState(!1),[v,b]=m.useState(!1);m.useEffect(()=>{(async()=>{l(!0),u(null);try{const{data:_,error:R}=await ne.from("vih").select("*").eq("result_id",e).maybeSingle();if(R)throw R;s(_),h((_==null?void 0:_.value)||"1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté")}catch(_){u(_.message||"Erreur lors du chargement du VIH.")}finally{l(!1)}})()},[e]);const w=async()=>{b(!0),u(null);try{const{data:N,error:_}=await ne.from("vih").insert({result_id:e,value:f}).select().single();if(_)throw _;s(N),x(!1)}catch(N){u(N.message||"Erreur lors de la création du VIH.")}finally{b(!1)}},j=async()=>{if(t){b(!0),u(null);try{const{data:N,error:_}=await ne.from("vih").update({value:f}).eq("id",t.id).select().single();if(_)throw _;s(N),x(!1)}catch(N){u(N.message||"Erreur lors de la mise à jour du VIH.")}finally{b(!1)}}};return a?n.jsx("div",{children:"Chargement du VIH..."}):c?n.jsx("div",{className:"text-destructive",children:c}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"print:hidden flex justify-end",children:n.jsx(ee,{onClick:()=>window.print(),variant:"outline",size:"sm",children:"Imprimer"})}),n.jsx("div",{className:"print:hidden",children:t?n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-lg font-semibold",children:"VIH"}),p?n.jsxs(n.Fragment,{children:[n.jsx(We,{value:f,onChange:N=>h(N.target.value),disabled:v,placeholder:"ex: 1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté"}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"(ex: 1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté)"}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(ee,{onClick:j,disabled:v||!f,children:v?"Sauvegarde...":"Sauvegarder"}),n.jsx(ee,{variant:"outline",onClick:()=>{x(!1),h(t.value)},disabled:v,children:"Annuler"})]})]}):n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("span",{className:"font-mono text-lg",children:t.value}),n.jsx(ee,{variant:"outline",size:"sm",onClick:()=>x(!0),children:"Modifier"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Créer VIH"}),n.jsx(We,{value:f,onChange:N=>h(N.target.value),placeholder:"ex: 1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté",disabled:v}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"(ex: 1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté)"}),n.jsx(ee,{onClick:w,disabled:v||!f,className:"mt-2",children:v?"Création...":"Créer"})]})}),n.jsx("h2",{className:" text-3xl text-center mb-4 print:pt-4 font-bold uppercase mx-auto tracking-tight print:block  print:text-center",children:"VIROLOGIE"}),t!=null&&t.value?n.jsxs("div",{className:"print:block mt-8 text-black text-lg",children:[n.jsxs("div",{className:"flex flex-row justify-between mb-4",children:[n.jsx("span",{className:"font-bold underline",children:"EXAMENS"}),n.jsx("span",{className:"font-bold underline",children:"RESULTATS"})]}),n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:"font-bold text-xl underline",children:"CHARGE VIRALE VIH"})}),n.jsxs("div",{className:"flex flex-row justify-between items-start mt-8",children:[n.jsxs("div",{className:"flex flex-col items-start gap-2 text-lg",style:{minWidth:"340px"},children:[n.jsx("span",{className:"font-semibold",children:"Charge virale  VIH"}),n.jsx("span",{className:"text-xs mt-1 whitespace-nowrap",children:"(Abbott m2000rt et m2000sp Technique PCR en temps réel)"}),!t.value.includes("virus")&&n.jsx("span",{className:"font-semibold mt-20",children:"Soit"})]}),n.jsx("div",{className:"flex flex-col items-end gap-2 text-lg text-right",style:{minWidth:"340px"},children:(()=>{if(/pas de virus détecté/i.test(t.value))return n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"font-bold text-2xl",children:"Pas de virus détecté"}),n.jsx("span",{className:"text-xs mt-1",children:"(pour 1 ml d'échantillon)"})]});const N=t.value.match(/([\d\s]+copies\/ml)/i),_=t.value.match(/;\s*([\d.]+)\s*log10/i);return n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"font-bold text-2xl",children:N?N[1].trim():t.value}),n.jsxs("span",{className:"text-xs font-normal",children:[" ","(limite de détection <40 pour 0.6 ml)"]}),n.jsx("span",{className:"text-xs mt-1",children:"(d'échantillon, 1 copie /ml = 0.58* 1UI/ml)"}),n.jsxs("div",{className:"flex flex-row justify-between w-full mt-8 ",children:[n.jsx("span",{}),n.jsxs("span",{className:"font-bold text-2xl",children:[_?_[1]:""," log",n.jsx("sub",{children:"10"})]})]})]})})()})]})]}):null,n.jsx("div",{className:" mt-20",children:n.jsx(oo,{date:new Date().toISOString()})})]})},IB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},zB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},UB=()=>{const{resultId:e}=cr();rr();const[t,s]=m.useState(null),[a,l]=m.useState(null),[c,u]=m.useState(null),[f,h]=m.useState(!0),[p,x]=m.useState(!1),[v,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(""),[R,E]=m.useState(!1),[C,M]=m.useState(""),[T,z]=m.useState(""),[q,F]=m.useState(!1),[U,G]=m.useState(null),ce=[{id:"template1",component:qn},{id:"template2",component:fa},{id:"template3",component:ha},{id:"template4",component:ma}],re="template1",[O,ie]=m.useState(null),[ue,P]=m.useState(!0),X=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),s(null),l(null),u(null),P(!0),ie(null);try{const{data:D,error:I}=await ne.from("patient_result").select("*").eq("id",e).single();if(I)throw I;if(!D)throw new Error("Résultat non trouvé.");s(D);const[$,K,ae]=await Promise.all([ne.from("patient").select("*").eq("id",D.patient_id).single(),ne.from("doctor").select("*").eq("id",D.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);$.error&&console.warn("Erreur chargement patient:",$.error.message),K.error&&console.warn("Erreur chargement médecin:",K.error.message),l($.data),u(K.data),ie(ae.data),P(!1)}catch(D){console.error("Erreur chargement détails du résultat:",D),b(D.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{X()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),z((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const V=m.useCallback(async D=>{if(e)try{const{error:I}=await ne.from("patient_result").update({description:D}).eq("id",e);if(I)throw I}catch(I){console.error("Error saving description:",I)}},[e]);m.useEffect(()=>{const D=setTimeout(()=>{N!==(t==null?void 0:t.description)&&V(N)},1e3);return()=>clearTimeout(D)},[N,t==null?void 0:t.description,V]);const te=m.useCallback(async()=>{F(!0),G(null);try{const D=C!==""?Number(C):null,I=T!==""?Number(T):null;if(C!==""&&isNaN(D)||T!==""&&isNaN(I)){G("Les prix doivent être des nombres valides."),F(!1);return}const{error:$,data:K}=await ne.from("patient_result").update({normal_price:D,insurance_price:I}).eq("id",t.id).select().single();if($)throw $;s(ae=>ae&&{...ae,normal_price:D,insurance_price:I}),E(!1)}catch(D){G(D.message||"Erreur lors de la sauvegarde des prix.")}finally{F(!1)}},[t,C,T]),k=async D=>{if(!(!t||D===t.status)){x(!0),j(null);try{const{data:I,error:$}=await ne.from("patient_result").update({status:D}).eq("id",t.id).select().single();if($)throw $;s(I||(K=>K?{...K,status:D}:null))}catch(I){console.error("Erreur mise à jour statut:",I),j(I.message||"Impossible de mettre à jour le statut.")}finally{x(!1)}}},L=(D,I,$,K)=>{const ae=D;return n.jsxs("div",{className:Me("flex items-start space-x-3",K),children:[n.jsx(ae,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:I}),n.jsx("p",{className:"text-sm font-bold print:text-xs",children:$||n.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},Y=m.useMemo(()=>{var I;const D=(O==null?void 0:O.selected_template)||re;return((I=ce.find($=>$.id===D))==null?void 0:I.component)||qn},[O]),H=m.useMemo(()=>({logoUrl:(O==null?void 0:O.logo_url)||null,labName:O==null?void 0:O.lab_name,addressLine1:O==null?void 0:O.address_line1,addressLine2:O==null?void 0:O.address_line2,cityPostalCode:O==null?void 0:O.city_postal_code,phone:O==null?void 0:O.phone,email:O==null?void 0:O.email,website:O==null?void 0:O.website}),[O]);return f?n.jsxs("div",{className:"space-y-6",children:[n.jsx(W,{className:"h-8 w-32"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]})]}):v?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"mb-4",children:n.jsx(et,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsxs(Dt,{children:[v," ",n.jsx(ee,{variant:"link",onClick:X,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[n.jsx("div",{children:n.jsx(et,{to:a?`/patients/${a.id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),n.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[n.jsx(Kr,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),n.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[O?n.jsx("div",{className:"mb-2 print:mb-0",children:n.jsx(Y,{data:H,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):n.jsxs(At,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"En-tête Manquant"}),n.jsxs(Dt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",n.jsx(et,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),n.jsx(Xr,{className:"my-2 print:my-0 print:border-none"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[n.jsxs(Ce,{className:"overflow-hidden print:shadow-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[L(Ye,"NOM PRENOM",a==null?void 0:a.full_name),L(Ye,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),L(ln,"Date Naissance",a!=null&&a.date_of_birth?at(Ft(a.date_of_birth),"P",{locale:qt}):null),n.jsx("div",{className:"hidden print:block",children:L(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null)})]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[L(Ht,"NOM PRENOM",c==null?void 0:c.full_name),L(mn,"Téléphone",c==null?void 0:c.phone),L(Ye,"Provenance",c==null?void 0:c.hospital)]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(la,{className:"h-4 w-4"}),"Résultat Info"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[L(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null),n.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),R?n.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:C,onChange:D=>M(D.target.value),disabled:q}):n.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:C,disabled:!0,readOnly:!0})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),R?n.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:D=>z(D.target.value),disabled:q}):n.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),n.jsx("div",{className:"flex gap-2 mt-1",children:R?n.jsxs(n.Fragment,{children:[n.jsxs(ee,{size:"xs",variant:"secondary",onClick:te,disabled:q,children:[q?n.jsx(Lt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:q,children:"Annuler"})]}):n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),U&&n.jsx("p",{className:"text-xs text-destructive mt-1",children:U})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Ye,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),n.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[n.jsxs(Qn,{value:t.status??"",onValueChange:D=>k(D),disabled:p,children:[n.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",n.jsx(Zn,{placeholder:"Changer statut..."})," "]}),n.jsxs(er,{children:[n.jsx(ht,{value:"attente",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),n.jsx(ht,{value:"en cours",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),n.jsx(ht,{value:"fini",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&n.jsx(Lt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&n.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),n.jsx(Zr,{variant:IB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:zB(t.status)})]})]})]})]})]}),n.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]}),L(Ye,"NOM PRENOM",a==null?void 0:a.full_name),L(Ye,"ID Unique",a==null?void 0:a.patient_unique_id),L(mn,"Téléphone",a==null?void 0:a.phone)]}),n.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[n.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),L(Ht,"NOM PRENOM",c==null?void 0:c.full_name),L(mn,"Téléphone",c==null?void 0:c.phone),L(Ye,"Hôpital",c==null?void 0:c.hospital)]})]}),n.jsx($B,{resultId:e})]})]}):n.jsx("div",{children:"Résultat non trouvé."})};function $B({resultId:e}){const[t,s]=m.useState(!0),[a,l]=m.useState(null),[c,u]=m.useState(null),[f,h]=m.useState(!1),[p,x]=m.useState(null),[v,b]=m.useState({diagnostic_clinique:"",biopsie_chirurgicale:"",fixateur_utilise:"",etude_macroscopique:"",etude_histologique:"",conclusion:"",bottom_text:""}),[w,j]=m.useState({cityDate:`BAMAKO, LE ${at(new Date,"dd/MM/yyyy")}`,doctor:"Dr, Bourama COULIBALY"});m.useEffect(()=>{const E=localStorage.getItem("anapath_city_date"),C=localStorage.getItem("anapath_doctor");j({cityDate:E||"BAMAKO, LE 4/06/2024",doctor:C||"Dr, Bourama COULIBALY"})},[]),m.useEffect(()=>{localStorage.setItem("anapath_city_date",w.cityDate),localStorage.setItem("anapath_doctor",w.doctor)},[w]);const N=E=>{const{name:C,value:M}=E.target;j(T=>({...T,[C]:M}))};m.useEffect(()=>{async function E(){s(!0),l(null);const{data:C,error:M}=await ne.from("anapath").select("*").eq("result_id",e).maybeSingle();if(M){l("Erreur lors du chargement: "+M.message),s(!1);return}if(C){u(C),b({diagnostic_clinique:C.diagnostic_clinique||"",biopsie_chirurgicale:C.biopsie_chirurgicale||"",fixateur_utilise:C.fixateur_utilise||"",etude_macroscopique:C.etude_macroscopique||"",etude_histologique:C.etude_histologique||"",conclusion:C.conclusion||"",bottom_text:C.bottom_text||""}),s(!1);return}const{data:T,error:z}=await ne.from("anapath").insert([{result_id:e}]).select().maybeSingle();if(z)if(z.code==="23505"||z.message&&z.message.includes("duplicate key value")){const{data:q,error:F}=await ne.from("anapath").select("*").eq("result_id",e).maybeSingle();F?l("Erreur lors du chargement après duplication: "+F.message):q?(u(q),b({diagnostic_clinique:q.diagnostic_clinique||"",biopsie_chirurgicale:q.biopsie_chirurgicale||"",fixateur_utilise:q.fixateur_utilise||"",etude_macroscopique:q.etude_macroscopique||"",etude_histologique:q.etude_histologique||"",conclusion:q.conclusion||"",bottom_text:q.bottom_text||""})):l("Erreur inattendue lors de la récupération après duplication.")}else l("Erreur lors de la création: "+z.message);else u(T),b({diagnostic_clinique:T.diagnostic_clinique||"",biopsie_chirurgicale:T.biopsie_chirurgicale||"",fixateur_utilise:T.fixateur_utilise||"",etude_macroscopique:T.etude_macroscopique||"",etude_histologique:T.etude_histologique||"",conclusion:T.conclusion||"",bottom_text:T.bottom_text||""});s(!1)}e&&E()},[e]);const _=E=>{const{name:C,value:M}=E.target;b(T=>({...T,[C]:M}))},R=async()=>{if(!c)return;h(!0),x(null);const{error:E}=await ne.from("anapath").update(v).eq("id",c.id);h(!1),x(E?"Erreur lors de la sauvegarde: "+E.message:"Modifications enregistrées !")};return t?n.jsx("div",{children:"Chargement..."}):a?n.jsx("div",{className:"text-red-500",children:a}):c?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex justify-end mb-4 print:hidden",children:n.jsxs(ee,{onClick:()=>window.print(),variant:"outline",children:[n.jsx(bf,{className:"mr-2 h-4 w-4"})," Imprimer"]})}),n.jsxs("div",{className:"w-full mx-auto bg-white p-8 rounded shadow print:bg-white print:shadow-none print:p-0 print:max-w-full print:text-black print:font-serif print:leading-relaxed print:text-[16pt] print:rounded-none",style:{minHeight:"29.7cm",minWidth:"21cm"},children:[n.jsx("h1",{className:"text-2xl font-bold text-center mb-6 uppercase print:text-[20pt] print:mb-8 print:font-bold",children:"EXAMEN ANATOMO-PATHOLOGIQUE"}),n.jsxs("div",{className:"mb-4 print:mb-6",children:[n.jsx("h2",{className:"font-bold mb-2 print:mb-1 print:text-[17pt] uppercase",children:"Résumé de l’Observation Clinique :"}),n.jsxs("div",{className:"ml-4 space-y-2 print:ml-0 print:space-y-1",children:[n.jsxs("div",{children:["Diagnostic Clinique :",n.jsxs("span",{className:"print:inline print:ml-1",children:[n.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:v.diagnostic_clinique}),n.jsx("input",{name:"diagnostic_clinique",value:v.diagnostic_clinique,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Diagnostic Clinique",disabled:f})]})]}),n.jsxs("div",{children:["Biopsie Chirurgicale :",n.jsxs("span",{className:"print:inline print:ml-1",children:[n.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:v.biopsie_chirurgicale}),n.jsx("input",{name:"biopsie_chirurgicale",value:v.biopsie_chirurgicale,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Biopsie Chirurgicale",disabled:f})]})]}),n.jsxs("div",{children:["Fixateur Utilisé :",n.jsxs("span",{className:"print:inline print:ml-1",children:[n.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:v.fixateur_utilise}),n.jsx("input",{name:"fixateur_utilise",value:v.fixateur_utilise,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Fixateur Utilisé",disabled:f})]})]})]})]}),n.jsxs("div",{className:"mb-4 print:mb-6",children:[n.jsx("h2",{className:"font-bold mb-2 uppercase print:mb-1 print:text-[17pt]",children:"COMPTE –RENDU HISTOPATHOLOGIQUE :"}),n.jsxs("div",{className:"ml-4 space-y-2 print:ml-0 print:space-y-1",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-bold print:text-[16pt]",children:"I. Etude Macroscopique :"}),n.jsxs("span",{className:"print:inline print:ml-1",children:[n.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:v.etude_macroscopique}),n.jsx("textarea",{name:"etude_macroscopique",value:v.etude_macroscopique,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Etude Macroscopique",rows:2,disabled:f})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-bold print:text-[16pt]",children:"2-Etude Histologique :"}),n.jsxs("span",{className:"print:inline print:ml-1",children:[n.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:v.etude_histologique}),n.jsx("textarea",{name:"etude_histologique",value:v.etude_histologique,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Etude Histologique",rows:2,disabled:f})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-bold underline print:text-[16pt]",children:"3-Conclusion :"}),n.jsxs("span",{className:"print:inline print:ml-1",children:[n.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:v.conclusion}),n.jsx("textarea",{name:"conclusion",value:v.conclusion,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Conclusion",rows:2,disabled:f})]})]}),n.jsx("div",{children:n.jsxs("span",{className:"print:inline print:ml-1",children:[n.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:v.bottom_text}),n.jsx("textarea",{name:"bottom_text",value:v.bottom_text,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"OLGA/OLGIM...",rows:1,disabled:f})]})})]})]}),n.jsxs("div",{className:"mt-8 flex flex-col items-end print:mt-12 print:items-end",children:[n.jsxs("span",{className:"print:text-[15pt]",children:[n.jsx("span",{className:"hidden print:inline",children:w.cityDate}),n.jsx("input",{name:"cityDate",value:w.cityDate,onChange:N,className:"border-b border-gray-300 focus:outline-none bg-transparent w-auto text-right print:hidden"})]}),n.jsxs("span",{className:"print:text-[15pt]",children:[n.jsx("span",{className:"hidden print:inline",children:w.doctor}),n.jsx("input",{name:"doctor",value:w.doctor,onChange:N,className:"border-b border-gray-300 focus:outline-none bg-transparent w-auto text-right print:hidden"})]})]}),n.jsxs("div",{className:"mt-6 flex items-center gap-4 print:hidden",children:[n.jsx(ee,{onClick:R,disabled:f,variant:"default",children:f?"Enregistrement...":"Enregistrer"}),p&&n.jsx("span",{className:p.startsWith("Erreur")?"text-red-500":"text-green-600",children:p})]})]}),n.jsx("div",{className:"print:block hidden page-break-after"})]}):n.jsx("div",{children:"Entrée Anapath non trouvée."})}const BB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},HB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},qB=()=>{const{resultId:e}=cr();rr();const[t,s]=m.useState(null),[a,l]=m.useState(null),[c,u]=m.useState(null),[f,h]=m.useState(!0),[p,x]=m.useState(!1),[v,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(""),[R,E]=m.useState(!1),[C,M]=m.useState(""),[T,z]=m.useState(""),[q,F]=m.useState(!1),[U,G]=m.useState(null),ce=[{id:"template1",component:qn},{id:"template2",component:fa},{id:"template3",component:ha},{id:"template4",component:ma}],re="template1",[O,ie]=m.useState(null),[ue,P]=m.useState(!0),X=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),s(null),l(null),u(null),P(!0),ie(null);try{const{data:H,error:D}=await ne.from("patient_result").select("*").eq("id",e).single();if(D)throw D;if(!H)throw new Error("Résultat non trouvé.");s(H);const[I,$,K]=await Promise.all([ne.from("patient").select("*").eq("id",H.patient_id).single(),ne.from("doctor").select("*").eq("id",H.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);I.error&&console.warn("Erreur chargement patient:",I.error.message),$.error&&console.warn("Erreur chargement médecin:",$.error.message),l(I.data),u($.data),ie(K.data),P(!1)}catch(H){console.error("Erreur chargement détails du résultat:",H),b(H.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{X()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),z((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const V=m.useCallback(async H=>{if(e)try{const{error:D}=await ne.from("patient_result").update({description:H}).eq("id",e);if(D)throw D}catch(D){console.error("Error saving description:",D)}},[e]);m.useEffect(()=>{const H=setTimeout(()=>{N!==(t==null?void 0:t.description)&&V(N)},1e3);return()=>clearTimeout(H)},[N,t==null?void 0:t.description,V]);const te=m.useCallback(async()=>{F(!0),G(null);try{const H=C!==""?Number(C):null,D=T!==""?Number(T):null;if(C!==""&&isNaN(H)||T!==""&&isNaN(D)){G("Les prix doivent être des nombres valides."),F(!1);return}const{error:I,data:$}=await ne.from("patient_result").update({normal_price:H,insurance_price:D}).eq("id",t.id).select().single();if(I)throw I;s(K=>K&&{...K,normal_price:H,insurance_price:D}),E(!1)}catch(H){G(H.message||"Erreur lors de la sauvegarde des prix.")}finally{F(!1)}},[t,C,T]),k=async H=>{if(!(!t||H===t.status)){x(!0),j(null);try{const{data:D,error:I}=await ne.from("patient_result").update({status:H}).eq("id",t.id).select().single();if(I)throw I;s(D||($=>$?{...$,status:H}:null))}catch(D){console.error("Erreur mise à jour statut:",D),j(D.message||"Impossible de mettre à jour le statut.")}finally{x(!1)}}},L=()=>{window.print()},Y=(H,D,I,$)=>{const K=H;return n.jsxs("div",{className:Me("flex items-start space-x-3",$),children:[n.jsx(K,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:D}),n.jsx("p",{className:"text-sm font-bold print:text-xs",children:I||n.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})};return m.useMemo(()=>{var D;const H=(O==null?void 0:O.selected_template)||re;return((D=ce.find(I=>I.id===H))==null?void 0:D.component)||qn},[O]),m.useMemo(()=>({logoUrl:(O==null?void 0:O.logo_url)||null,labName:O==null?void 0:O.lab_name,addressLine1:O==null?void 0:O.address_line1,addressLine2:O==null?void 0:O.address_line2,cityPostalCode:O==null?void 0:O.city_postal_code,phone:O==null?void 0:O.phone,email:O==null?void 0:O.email,website:O==null?void 0:O.website}),[O]),f?n.jsxs("div",{className:"space-y-6",children:[n.jsx(W,{className:"h-8 w-32"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]}),n.jsxs(Ce,{children:[n.jsxs(Te,{children:[n.jsx(W,{className:"h-5 w-24"}),n.jsx(W,{className:"h-4 w-32 mt-1"})]}),n.jsxs(Re,{className:"space-y-3",children:[n.jsx(W,{className:"h-8 w-full"}),n.jsx(W,{className:"h-8 w-full"})]})]})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]}),n.jsxs(Ce,{children:[n.jsx(Te,{children:n.jsx(W,{className:"h-6 w-1/3"})}),n.jsx(Re,{children:n.jsx(W,{className:"h-20 w-full"})})]})]}):v?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"mb-4",children:n.jsx(et,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),n.jsxs(At,{variant:"destructive",children:[n.jsx(It,{className:"h-4 w-4"}),n.jsx(kt,{children:"Erreur"}),n.jsxs(Dt,{children:[v," ",n.jsx(ee,{variant:"link",onClick:X,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[n.jsx("div",{children:n.jsx(et,{to:a?`/patients/${a.id}`:"/patients",children:n.jsxs(ee,{variant:"outline",size:"sm",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),n.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[n.jsx(Kr,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),n.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[n.jsxs(Ce,{className:"overflow-hidden print:shadow-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Patient"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Y(Ye,"NOM PRENOM",a==null?void 0:a.full_name),Y(Ye,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),Y(ln,"Date Naissance",a!=null&&a.date_of_birth?at(Ft(a.date_of_birth),"P",{locale:qt}):null),n.jsx("div",{className:"hidden print:block",children:Y(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null)})]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Y(Ht,"NOM PRENOM",c==null?void 0:c.full_name),Y(mn,"Téléphone",c==null?void 0:c.phone),Y(Ye,"Provenance",c==null?void 0:c.hospital)]})]}),n.jsxs(Ce,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[n.jsx(Te,{className:"pb-2 print:pb-1",children:n.jsxs(ft,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[n.jsx(la,{className:"h-4 w-4"}),"Résultat Info"]})}),n.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Y(ln,"Date Résultat",t.result_date?at(Ft(t.result_date),"Pp",{locale:qt}):null),n.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),R?n.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:C,onChange:H=>M(H.target.value),disabled:q}):n.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:C,disabled:!0,readOnly:!0})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),R?n.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:H=>z(H.target.value),disabled:q}):n.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),n.jsx("div",{className:"flex gap-2 mt-1",children:R?n.jsxs(n.Fragment,{children:[n.jsxs(ee,{size:"xs",variant:"secondary",onClick:te,disabled:q,children:[q?n.jsx(Lt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:q,children:"Annuler"})]}):n.jsx(ee,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),U&&n.jsx("p",{className:"text-xs text-destructive mt-1",children:U})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Ye,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),n.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[n.jsxs(Qn,{value:t.status??"",onValueChange:H=>k(H),disabled:p,children:[n.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",n.jsx(Zn,{placeholder:"Changer statut..."})," "]}),n.jsxs(er,{children:[n.jsx(ht,{value:"attente",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),n.jsx(ht,{value:"en cours",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),n.jsx(ht,{value:"fini",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&n.jsx(Lt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&n.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),n.jsx(Zr,{variant:BB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:HB(t.status)})]})]})]})]})]}),n.jsx("div",{className:"flex items-center justify-end  print:hidden",children:n.jsx(ee,{onClick:L,className:"",children:"Imprimer"})}),n.jsx(FB,{})]})]}):n.jsx("div",{children:"Résultat non trouvé."})},FB=()=>n.jsx(n.Fragment,{children:n.jsxs("div",{className:"p-4 space-y-1",children:[n.jsx(YB,{}),n.jsx(GB,{}),n.jsx(Al,{children:n.jsx(VB,{})}),n.jsxs(Al,{children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[n.jsx(Ap,{label:"Délai d'abstinence",value:"3 (j)"}),n.jsx(Ap,{label:"Lieu de Recueil",value:"Laboratoire"}),n.jsx(Ap,{label:"Mode de Recueil",value:"Masturbation"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-1 pt-1 ",children:[n.jsx(Cr,{label:"Volume",value:"1 ml",ref:"VN: 1.5 - 6 ml"}),n.jsx(Cr,{label:"pH",value:"-",ref:"VN: 7.2 - 8.5"}),n.jsx(Cr,{label:"Viscosité",value:"Normale"}),n.jsx(Cr,{label:"Couleur",value:"Normale"}),n.jsx(Cr,{label:"Odeur",value:"Normale"})]}),n.jsxs("div",{className:"grid grid-cols-2 pt-1 gap-2",children:[n.jsx(Cr,{label:"Agglutinats spontanés",value:"Absence"}),n.jsx(Cr,{label:"Agrégats multiples",value:"Absence"})]})]}),n.jsxs(Al,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(yt,{type:"section",children:"MOBILITÉ DES SPERMATOZOÏDES APRÈS 1 HEURE"}),n.jsx(Uf,{children:n.jsx(yt,{type:"text",children:"Normale [a+b+c] ≥ 40%"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-1 ",children:[n.jsx(Cr,{label:"Rapides et progressifs (a)",value:"15%",ref:"VN:Vitesse > 25 ms"}),n.jsx(Cr,{label:"Lents et progressifs (b)",value:"15%",ref:"VN:Vitesse < 25 ms"}),n.jsx(Cr,{label:"Mobiles sur place (c)",value:"5%"}),n.jsx(Cr,{label:"Immobiles (d)",value:"80%"})]})]}),n.jsxs(Al,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yt,{type:"section",children:"CULOT DE CENTRIFUGATION:"}),n.jsx(yt,{type:"text",children:"AUCUN SPERMATOZOIDE OBSERVÉ"})]}),n.jsx(yt,{type:"section",children:"NUMÉRATION/CONCENTRATION DE SPERMATOZOÏDES PAR MILLILITRE DE SPERME"}),n.jsx(XB,{}),n.jsx(yt,{type:"text",children:"Identification des cellules rondes: Cellules épithéliales"})]}),n.jsxs(Al,{children:[n.jsx(yt,{type:"section",children:"VITALITE ou Test de Williams"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx(Cr,{label:"% de spermatozoïdes Vivants",value:"40%",ref:"VN: ≥ 58%"}),n.jsx(Cr,{label:"% de spermatozoïdes Morts",value:"60%"})]})]}),n.jsxs(Al,{children:[n.jsx(yt,{type:"section",children:"SPERMOCYTOGRAMME (Critères de David et Kruger)"}),n.jsx(KB,{})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(yt,{type:"section",className:"uppercase",children:["Conclusion:"," "]}),n.jsx(yt,{type:"text",children:"Le Biologiste"})]}),n.jsx(WB,{})]})}),yt=({children:e,type:t,className:s})=>n.jsx("span",{className:Me("inline-block text-base leading-4",t==="header"&&"font-bold print:text-[14pt] text-[#9b87f5] print:text-black",t==="section"&&" print:text-[10pt] text-[#9b87f5] print:text-black font-bold",t==="text"&&"font-normal print:text-[9pt]",s),children:e});function Uf({children:e,primary:t,bg:s}){return n.jsx("div",{className:`border border-slate-${t?300:200} rounded-full px-2  ${s?"bg-slate-50":""}`,children:e})}function Cr({label:e,value:t,ref:s}){return n.jsx("div",{className:"bg-gray-50 px-2 rounded-lg",children:s?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between py-1",children:[n.jsx(yt,{type:"text",children:e}),n.jsx(Uf,{children:n.jsx(yt,{type:"text",children:s})})]}),n.jsx(yt,{type:"text",className:"font-bold",children:t})]}):n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex items-center gap-2 py-1",children:[n.jsxs(yt,{type:"text",children:[e,":"]}),n.jsx(yt,{type:"text",children:t})]})})})}function Ap({label:e,value:t}){return n.jsx(Uf,{children:n.jsxs("div",{className:"flex items-center gap-2 ml-1",children:[n.jsxs(yt,{type:"text",className:"text-muted-foreground leading-5",children:[e,":"]}),n.jsx(yt,{type:"text",className:"font-bold leading-5",children:t})]})})}function EE({columns:e,data:t,borderVisible:s=!0}){return n.jsx("div",{className:`${s?"border-visible":"border-none"}`,children:n.jsxs("table",{className:"w-full  ",children:[n.jsx("thead",{children:n.jsx("tr",{className:"text-left",children:e.map((a,l)=>n.jsx("th",{children:n.jsx(yt,{type:"text",className:"font-bold",children:a})},l))})}),n.jsx("tbody",{children:t.map((a,l)=>n.jsx("tr",{children:e.map((c,u)=>n.jsx("td",{children:n.jsx(yt,{type:"text",children:a[c]})},u))},l))})]})})}function VB(){return n.jsx("div",{className:"border-none",children:n.jsxs("table",{className:"w-full  ",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left",children:[n.jsx("th",{children:n.jsx(yt,{type:"text",className:"text-muted-foreground",children:"Prénom et Nom"})}),n.jsx("th",{children:n.jsx(yt,{type:"text",className:"text-muted-foreground",children:"Âge"})}),n.jsx("th",{children:n.jsx(yt,{type:"text",className:"text-muted-foreground",children:"Profession"})}),n.jsx("th",{children:n.jsx(yt,{type:"text",className:"text-muted-foreground",children:"Résidence"})}),n.jsx("th",{children:n.jsx(yt,{type:"text",className:"text-muted-foreground",children:"Ethnie"})})]})}),n.jsx("tbody",{children:n.jsxs("tr",{className:"text-left",children:[n.jsx("td",{children:n.jsx(yt,{type:"text",className:"font-bold",children:"Naouma TRAORE"})}),n.jsx("td",{children:n.jsx(yt,{type:"text",className:"font-bold",children:"- ans"})}),n.jsx("td",{children:n.jsx(yt,{type:"text",className:"font-bold",children:"-"})}),n.jsx("td",{children:n.jsx(yt,{type:"text",className:"font-bold",children:"-"})}),n.jsx("td",{children:n.jsx(yt,{type:"text",className:"font-bold",children:"-"})})]})})]})})}function YB(){return n.jsxs("div",{className:"flex flex-col items-center border border-slate-300 rounded-lg",children:[n.jsx(yt,{type:"header",className:" text-center tracking-wider pt-2 ",children:"DÉCLIC SANTÉ"}),n.jsx(yt,{type:"text",children:"MEDINA COURA RUE: 1 PORTE: 28 BAMAKO - MALI TEL: 92906964/67737350"}),n.jsx(yt,{type:"text",children:"LABORATOIRE - ECHOGRAPHIES - CONSULTATIONS"})]})}function GB(){const e=new Date,t=e.getFullYear(),s=e.getDate(),a=e.getMonth(),c=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"][a];return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(yt,{type:"section",className:"uppercase",children:["Spermogramme ",t]}),n.jsx(Uf,{bg:!0,children:n.jsxs(yt,{type:"text",children:["Nº: 022/24 du ",s," ",c]})})]})}function WB(){return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx(yt,{type:"text",className:"font-bold -ml-[200px]",children:"OLIGO-ASTHENO-NECROZOOSPERMIE SEVERE"}),n.jsx(yt,{type:"text",className:"font-bold -ml-[200px]",children:"HYPOSPERMIE"}),n.jsx(yt,{type:"text",className:"font-bold -ml-[200px]",children:"INTERET DE BILAN INFECTIEUX"}),n.jsx(yt,{type:"text",className:"font-bold -ml-[200px]",children:"EXAMEN DE CONTROLE A REALISER DANS 03 MOIS"})]})})}const Al=({children:e})=>n.jsx("div",{className:"border border-slate-300 rounded-lg px-2 py-1",children:e});function XB(){const e=["Paramètres","Résultats","Ref."],t=[{Paramètres:"Nombre de Spermatozoïdes / millilitre de sperme",Résultats:"5 millions","Ref.":"> 15 millions/ml"},{Paramètres:"Nombre de Spermatozoïdes dans l'éjaculat",Résultats:"+","Ref.":"≥  39.10^6 / ml"},{Paramètres:"Cellules rondes",Résultats:"+","Ref.":"≤ 5000 / ml"},{Paramètres:"Leucocytes",Résultats:"+","Ref.":"≤ 10^6 / ml"}];return n.jsx(EE,{columns:e,data:t})}function KB(){const e=["Paramètres","Résultats","Ref."],t=[{Paramètres:"% de spermatozoïdes de formes typiques",Résultats:"-%","Ref.":"≥ 4%"},{Paramètres:"% de spermatozoïdes présentant une anomalie de la tête",Résultats:"-%","Ref.":"-"},{Paramètres:"% de spermatozoïdes présentant une anomalie de la pièce intermédiaire",Résultats:"-%","Ref.":"-"},{Paramètres:"% de spermatozoïdes présentant une anomalie de la flagelle",Résultats:"-%","Ref.":"-"},{Paramètres:"% de spermatozoïdes de formes immatures",Résultats:"-%","Ref.":"-"}];return n.jsx(EE,{columns:e,data:t})}function QB(){return n.jsx(n.Fragment,{children:n.jsxs(zR,{children:[n.jsx(Mt,{path:"/login",element:n.jsx(a5,{})}),n.jsx(Mt,{element:n.jsx(t5,{}),children:n.jsxs(Mt,{element:n.jsx(e5,{}),children:[n.jsx(Mt,{index:!0,element:n.jsx(Rw,{})}),n.jsx(Mt,{path:"/patients",element:n.jsx(Rw,{})}),n.jsx(Mt,{path:"/patients/new",element:n.jsx(Uw,{})})," ",n.jsx(Mt,{path:"/patients/:patientId",element:n.jsx(E6,{})}),n.jsx(Mt,{path:"/patients/:patientId/edit",element:n.jsx(Uw,{})})," ",n.jsx(Mt,{path:"/patients/:patientId/results/new",element:n.jsx(nj,{})}),n.jsx(Mt,{path:"/results/:resultId",element:n.jsx(r$,{})}),n.jsx(Mt,{path:"/results/:resultId/edit",element:n.jsx(nj,{})}),n.jsx(Mt,{path:"/doctors",element:n.jsx(C6,{})}),n.jsx(Mt,{path:"/doctors/new",element:n.jsx(ij,{})})," ",n.jsx(Mt,{path:"/doctors/:doctorId/edit",element:n.jsx(ij,{})})," ",n.jsx(Mt,{path:"/test-types",element:n.jsx(a$,{})}),n.jsx(Mt,{path:"/test-types/new",element:n.jsx(aj,{})}),n.jsx(Mt,{path:"/test-types/:testTypeId/edit",element:n.jsx(aj,{})}),n.jsx(Mt,{path:"/categories",element:n.jsx(u$,{})})," ",n.jsx(Mt,{path:"/ristournes",element:n.jsx(mB,{})}),n.jsx(Mt,{path:"/ristournes/new",element:n.jsx(dj,{})}),n.jsx(Mt,{path:"/ristournes/:ristourneId",element:n.jsx(dj,{})}),n.jsx(Mt,{path:"/settings/print-header",element:n.jsx(dB,{})}),n.jsx(Mt,{path:"/protidogramme/:resultId",element:n.jsx(vB,{})}),n.jsx(Mt,{path:"/skip-range-management",element:n.jsx(pB,{})}),n.jsx(Mt,{path:"/atbs",element:n.jsx(_B,{})}),n.jsx(Mt,{path:"/atb/:resultId",element:n.jsx(jB,{})}),n.jsx(Mt,{path:"/ecb/:resultId",element:n.jsx(CB,{})}),n.jsx(Mt,{path:"/ecb-models",element:n.jsx(RB,{})}),n.jsx(Mt,{path:"/vhb/:resultId",element:n.jsx(AB,{})}),n.jsx(Mt,{path:"/vih/:resultId",element:n.jsx(PB,{})}),n.jsx(Mt,{path:"/anapath/:resultId",element:n.jsx(UB,{})}),n.jsx(Mt,{path:"/spermogramme/:resultId",element:n.jsx(qB,{})})]})}),n.jsx(Mt,{path:"*",element:n.jsx(R6,{})})]})})}var ZB=(e,t,s,a,l,c,u,f)=>{let h=document.documentElement,p=["light","dark"];function x(w){(Array.isArray(e)?e:[e]).forEach(j=>{let N=j==="class",_=N&&c?l.map(R=>c[R]||R):l;N?(h.classList.remove(..._),h.classList.add(c&&c[w]?c[w]:w)):h.setAttribute(j,w)}),v(w)}function v(w){f&&p.includes(w)&&(h.style.colorScheme=w)}function b(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(a)x(a);else try{let w=localStorage.getItem(t)||s,j=u&&w==="system"?b():w;x(j)}catch{}},JB=m.createContext(void 0),eH={setTheme:e=>{},themes:[]},tH=()=>{var e;return(e=m.useContext(JB))!=null?e:eH};m.memo(({forcedTheme:e,storageKey:t,attribute:s,enableSystem:a,enableColorScheme:l,defaultTheme:c,value:u,themes:f,nonce:h,scriptProps:p})=>{let x=JSON.stringify([s,t,c,e,f,u,a,l]).slice(1,-1);return m.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(${ZB.toString()})(${x})`}})});const nH=({...e})=>{const{theme:t="system"}=tH();return n.jsx(I$,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};YC.createRoot(document.getElementById("root")).render(n.jsx(we.StrictMode,{children:n.jsx(lT,{children:n.jsxs(wA,{children:[n.jsx(nH,{richColors:!0,position:"top-right"})," ",n.jsx(QB,{})]})})}));export{Zd as g};
