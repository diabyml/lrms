function TC(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in e)){const c=Object.getOwnPropertyDescriptor(a,l);c&&Object.defineProperty(e,l,c.get?c:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function Xd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function RC(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var l=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:function(){return e[a]}})}),r}var zm={exports:{}},Zo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function MC(){if(o0)return Zo;o0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:e,type:a,key:d,ref:l!==void 0?l:null,props:c}}return Zo.Fragment=t,Zo.jsx=r,Zo.jsxs=r,Zo}var c0;function AC(){return c0||(c0=1,zm.exports=MC()),zm.exports}var s=AC(),Um={exports:{}},ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function kC(){if(u0)return ct;u0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function b(k){return k===null||typeof k!="object"?null:(k=x&&k[x]||k["@@iterator"],typeof k=="function"?k:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,_={};function N(k,P,V){this.props=k,this.context=P,this.refs=_,this.updater=V||w}N.prototype.isReactComponent={},N.prototype.setState=function(k,P){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,P,"setState")},N.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function C(){}C.prototype=N.prototype;function E(k,P,V){this.props=k,this.context=P,this.refs=_,this.updater=V||w}var T=E.prototype=new C;T.constructor=E,j(T,N.prototype),T.isPureReactComponent=!0;var M=Array.isArray,R={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function H(k,P,V,X,D,U){return V=U.ref,{$$typeof:e,type:k,key:P,ref:V!==void 0?V:null,props:U}}function $(k,P){return H(k.type,P,void 0,void 0,void 0,k.props)}function I(k){return typeof k=="object"&&k!==null&&k.$$typeof===e}function Y(k){var P={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(V){return P[V]})}var ce=/\/+/g;function te(k,P){return typeof k=="object"&&k!==null&&k.key!=null?Y(""+k.key):P.toString(36)}function q(){}function le(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(q,q):(k.status="pending",k.then(function(P){k.status==="pending"&&(k.status="fulfilled",k.value=P)},function(P){k.status==="pending"&&(k.status="rejected",k.reason=P)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function ue(k,P,V,X,D){var U=typeof k;(U==="undefined"||U==="boolean")&&(k=null);var F=!1;if(k===null)F=!0;else switch(U){case"bigint":case"string":case"number":F=!0;break;case"object":switch(k.$$typeof){case e:case t:F=!0;break;case v:return F=k._init,ue(F(k._payload),P,V,X,D)}}if(F)return D=D(k),F=X===""?"."+te(k,0):X,M(D)?(V="",F!=null&&(V=F.replace(ce,"$&/")+"/"),ue(D,P,V,"",function(ge){return ge})):D!=null&&(I(D)&&(D=$(D,V+(D.key==null||k&&k.key===D.key?"":(""+D.key).replace(ce,"$&/")+"/")+F)),P.push(D)),1;F=0;var K=X===""?".":X+":";if(M(k))for(var ae=0;ae<k.length;ae++)X=k[ae],U=K+te(X,ae),F+=ue(X,P,V,U,D);else if(ae=b(k),typeof ae=="function")for(k=ae.call(k),ae=0;!(X=k.next()).done;)X=X.value,U=K+te(X,ae++),F+=ue(X,P,V,U,D);else if(U==="object"){if(typeof k.then=="function")return ue(le(k),P,V,X,D);throw P=String(k),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return F}function O(k,P,V){if(k==null)return k;var X=[],D=0;return ue(k,X,"","",function(U){return P.call(V,U,D++)}),X}function G(k){if(k._status===-1){var P=k._result;P=P(),P.then(function(V){(k._status===0||k._status===-1)&&(k._status=1,k._result=V)},function(V){(k._status===0||k._status===-1)&&(k._status=2,k._result=V)}),k._status===-1&&(k._status=0,k._result=P)}if(k._status===1)return k._result.default;throw k._result}var B=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function ee(){}return ct.Children={map:O,forEach:function(k,P,V){O(k,function(){P.apply(this,arguments)},V)},count:function(k){var P=0;return O(k,function(){P++}),P},toArray:function(k){return O(k,function(P){return P})||[]},only:function(k){if(!I(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},ct.Component=N,ct.Fragment=r,ct.Profiler=l,ct.PureComponent=E,ct.StrictMode=a,ct.Suspense=h,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ct.act=function(){throw Error("act(...) is not supported in production builds of React.")},ct.cache=function(k){return function(){return k.apply(null,arguments)}},ct.cloneElement=function(k,P,V){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var X=j({},k.props),D=k.key,U=void 0;if(P!=null)for(F in P.ref!==void 0&&(U=void 0),P.key!==void 0&&(D=""+P.key),P)!L.call(P,F)||F==="key"||F==="__self"||F==="__source"||F==="ref"&&P.ref===void 0||(X[F]=P[F]);var F=arguments.length-2;if(F===1)X.children=V;else if(1<F){for(var K=Array(F),ae=0;ae<F;ae++)K[ae]=arguments[ae+2];X.children=K}return H(k.type,D,void 0,void 0,U,X)},ct.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:c,_context:k},k},ct.createElement=function(k,P,V){var X,D={},U=null;if(P!=null)for(X in P.key!==void 0&&(U=""+P.key),P)L.call(P,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(D[X]=P[X]);var F=arguments.length-2;if(F===1)D.children=V;else if(1<F){for(var K=Array(F),ae=0;ae<F;ae++)K[ae]=arguments[ae+2];D.children=K}if(k&&k.defaultProps)for(X in F=k.defaultProps,F)D[X]===void 0&&(D[X]=F[X]);return H(k,U,void 0,void 0,null,D)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(k){return{$$typeof:f,render:k}},ct.isValidElement=I,ct.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:G}},ct.memo=function(k,P){return{$$typeof:p,type:k,compare:P===void 0?null:P}},ct.startTransition=function(k){var P=R.T,V={};R.T=V;try{var X=k(),D=R.S;D!==null&&D(V,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(ee,B)}catch(U){B(U)}finally{R.T=P}},ct.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ct.use=function(k){return R.H.use(k)},ct.useActionState=function(k,P,V){return R.H.useActionState(k,P,V)},ct.useCallback=function(k,P){return R.H.useCallback(k,P)},ct.useContext=function(k){return R.H.useContext(k)},ct.useDebugValue=function(){},ct.useDeferredValue=function(k,P){return R.H.useDeferredValue(k,P)},ct.useEffect=function(k,P){return R.H.useEffect(k,P)},ct.useId=function(){return R.H.useId()},ct.useImperativeHandle=function(k,P,V){return R.H.useImperativeHandle(k,P,V)},ct.useInsertionEffect=function(k,P){return R.H.useInsertionEffect(k,P)},ct.useLayoutEffect=function(k,P){return R.H.useLayoutEffect(k,P)},ct.useMemo=function(k,P){return R.H.useMemo(k,P)},ct.useOptimistic=function(k,P){return R.H.useOptimistic(k,P)},ct.useReducer=function(k,P,V){return R.H.useReducer(k,P,V)},ct.useRef=function(k){return R.H.useRef(k)},ct.useState=function(k){return R.H.useState(k)},ct.useSyncExternalStore=function(k,P,V){return R.H.useSyncExternalStore(k,P,V)},ct.useTransition=function(){return R.H.useTransition()},ct.version="19.0.0",ct}var d0;function og(){return d0||(d0=1,Um.exports=kC()),Um.exports}var m=og();const we=Xd(m),DC=TC({__proto__:null,default:we},[m]);var $m={exports:{}},Jo={},Bm={exports:{}},Hm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function OC(){return f0||(f0=1,function(e){function t(O,G){var B=O.length;O.push(G);e:for(;0<B;){var ee=B-1>>>1,k=O[ee];if(0<l(k,G))O[ee]=G,O[B]=k,B=ee;else break e}}function r(O){return O.length===0?null:O[0]}function a(O){if(O.length===0)return null;var G=O[0],B=O.pop();if(B!==G){O[0]=B;e:for(var ee=0,k=O.length,P=k>>>1;ee<P;){var V=2*(ee+1)-1,X=O[V],D=V+1,U=O[D];if(0>l(X,B))D<k&&0>l(U,X)?(O[ee]=U,O[D]=B,ee=D):(O[ee]=X,O[V]=B,ee=V);else if(D<k&&0>l(U,B))O[ee]=U,O[D]=B,ee=D;else break e}}return G}function l(O,G){var B=O.sortIndex-G.sortIndex;return B!==0?B:O.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var h=[],p=[],v=1,x=null,b=3,w=!1,j=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function T(O){for(var G=r(p);G!==null;){if(G.callback===null)a(p);else if(G.startTime<=O)a(p),G.sortIndex=G.expirationTime,t(h,G);else break;G=r(p)}}function M(O){if(_=!1,T(O),!j)if(r(h)!==null)j=!0,le();else{var G=r(p);G!==null&&ue(M,G.startTime-O)}}var R=!1,L=-1,H=5,$=-1;function I(){return!(e.unstable_now()-$<H)}function Y(){if(R){var O=e.unstable_now();$=O;var G=!0;try{e:{j=!1,_&&(_=!1,C(L),L=-1),w=!0;var B=b;try{t:{for(T(O),x=r(h);x!==null&&!(x.expirationTime>O&&I());){var ee=x.callback;if(typeof ee=="function"){x.callback=null,b=x.priorityLevel;var k=ee(x.expirationTime<=O);if(O=e.unstable_now(),typeof k=="function"){x.callback=k,T(O),G=!0;break t}x===r(h)&&a(h),T(O)}else a(h);x=r(h)}if(x!==null)G=!0;else{var P=r(p);P!==null&&ue(M,P.startTime-O),G=!1}}break e}finally{x=null,b=B,w=!1}G=void 0}}finally{G?ce():R=!1}}}var ce;if(typeof E=="function")ce=function(){E(Y)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,q=te.port2;te.port1.onmessage=Y,ce=function(){q.postMessage(null)}}else ce=function(){N(Y,0)};function le(){R||(R=!0,ce())}function ue(O,G){L=N(function(){O(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){j||w||(j=!0,le())},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(O){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var B=b;b=G;try{return O()}finally{b=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var B=b;b=O;try{return G()}finally{b=B}},e.unstable_scheduleCallback=function(O,G,B){var ee=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ee+B:ee):B=ee,O){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=B+k,O={id:v++,callback:G,priorityLevel:O,startTime:B,expirationTime:k,sortIndex:-1},B>ee?(O.sortIndex=B,t(p,O),r(h)===null&&O===r(p)&&(_?(C(L),L=-1):_=!0,ue(M,B-ee))):(O.sortIndex=k,t(h,O),j||w||(j=!0,le())),O},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(O){var G=b;return function(){var B=b;b=G;try{return O.apply(this,arguments)}finally{b=B}}}}(Hm)),Hm}var h0;function PC(){return h0||(h0=1,Bm.exports=OC()),Bm.exports}var qm={exports:{}},Xn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function LC(){if(m0)return Xn;m0=1;var e=og();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(h,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:x==null?null:""+x,children:h,containerInfo:p,implementation:v}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Xn.createPortal=function(h,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return c(h,p,null,v)},Xn.flushSync=function(h){var p=d.T,v=a.p;try{if(d.T=null,a.p=2,h)return h()}finally{d.T=p,a.p=v,a.d.f()}},Xn.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(h,p))},Xn.prefetchDNS=function(h){typeof h=="string"&&a.d.D(h)},Xn.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var v=p.as,x=f(v,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?a.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:w}):v==="script"&&a.d.X(h,{crossOrigin:x,integrity:b,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Xn.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=f(p.as,p.crossOrigin);a.d.M(h,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(h)},Xn.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=f(v,p.crossOrigin);a.d.L(h,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Xn.preloadModule=function(h,p){if(typeof h=="string")if(p){var v=f(p.as,p.crossOrigin);a.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(h)},Xn.requestFormReset=function(h){a.d.r(h)},Xn.unstable_batchedUpdates=function(h,p){return h(p)},Xn.useFormState=function(h,p,v){return d.H.useFormState(h,p,v)},Xn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Xn.version="19.0.0",Xn}var p0;function lj(){if(p0)return qm.exports;p0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),qm.exports=LC(),qm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function IC(){if(g0)return Jo;g0=1;var e=PC(),t=og(),r=lj();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var c=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),M=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=R&&n[R]||n["@@iterator"],typeof n=="function"?n:null)}var H=Symbol.for("react.client.reference");function $(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===H?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case h:return"Fragment";case f:return"Portal";case v:return"Profiler";case p:return"StrictMode";case _:return"Suspense";case N:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case w:return(n.displayName||"Context")+".Provider";case b:return(n._context.displayName||"Context")+".Consumer";case j:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return i=n.displayName||null,i!==null?i:$(n.type)||"Memo";case E:i=n._payload,n=n._init;try{return $(n(i))}catch{}}return null}var I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=Object.assign,ce,te;function q(n){if(ce===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);ce=i&&i[1]||"",te=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+n+te}var le=!1;function ue(n,i){if(!n||le)return"";le=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(he){var oe=he}Reflect.construct(n,[],je)}else{try{je.call()}catch(he){oe=he}n.call(je.prototype)}}else{try{throw Error()}catch(he){oe=he}(je=n())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(he){if(he&&oe&&typeof he.stack=="string")return[he.stack,oe.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),S=y[0],A=y[1];if(S&&A){var z=S.split(`
`),Z=A.split(`
`);for(g=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;g<Z.length&&!Z[g].includes("DetermineComponentFrameRoot");)g++;if(u===z.length||g===Z.length)for(u=z.length-1,g=Z.length-1;1<=u&&0<=g&&z[u]!==Z[g];)g--;for(;1<=u&&0<=g;u--,g--)if(z[u]!==Z[g]){if(u!==1||g!==1)do if(u--,g--,0>g||z[u]!==Z[g]){var me=`
`+z[u].replace(" at new "," at ");return n.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",n.displayName)),me}while(1<=u&&0<=g);break}}}finally{le=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?q(o):""}function O(n){switch(n.tag){case 26:case 27:case 5:return q(n.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 15:return n=ue(n.type,!1),n;case 11:return n=ue(n.type.render,!1),n;case 1:return n=ue(n.type,!0),n;default:return""}}function G(n){try{var i="";do i+=O(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function B(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function ee(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function k(n){if(B(n)!==n)throw Error(a(188))}function P(n){var i=n.alternate;if(!i){if(i=B(n),i===null)throw Error(a(188));return i!==n?null:n}for(var o=n,u=i;;){var g=o.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===o)return k(g),n;if(y===u)return k(g),i;y=y.sibling}throw Error(a(188))}if(o.return!==u.return)o=g,u=y;else{for(var S=!1,A=g.child;A;){if(A===o){S=!0,o=g,u=y;break}if(A===u){S=!0,u=g,o=y;break}A=A.sibling}if(!S){for(A=y.child;A;){if(A===o){S=!0,o=y,u=g;break}if(A===u){S=!0,u=y,o=g;break}A=A.sibling}if(!S)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?n:i}function V(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=V(n),i!==null)return i;n=n.sibling}return null}var X=Array.isArray,D=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},F=[],K=-1;function ae(n){return{current:n}}function ge(n){0>K||(n.current=F[K],F[K]=null,K--)}function de(n,i){K++,F[K]=n.current,n.current=i}var Se=ae(null),Me=ae(null),at=ae(null),nt=ae(null);function ve(n,i){switch(de(at,i),de(Me,n),de(Se,null),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?Ib(i):0;break;default:if(n=n===8?i.parentNode:i,i=n.tagName,n=n.namespaceURI)n=Ib(n),i=zb(n,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ge(Se),de(Se,i)}function pe(){ge(Se),ge(Me),ge(at)}function Pe(n){n.memoizedState!==null&&de(nt,n);var i=Se.current,o=zb(i,n.type);i!==o&&(de(Me,n),de(Se,o))}function be(n){Me.current===n&&(ge(Se),ge(Me)),nt.current===n&&(ge(nt),Go._currentValue=U)}var Ne=Object.prototype.hasOwnProperty,Oe=e.unstable_scheduleCallback,We=e.unstable_cancelCallback,Fe=e.unstable_shouldYield,bt=e.unstable_requestPaint,Nt=e.unstable_now,Ht=e.unstable_getCurrentPriorityLevel,Be=e.unstable_ImmediatePriority,tt=e.unstable_UserBlockingPriority,Zt=e.unstable_NormalPriority,kn=e.unstable_LowPriority,Cn=e.unstable_IdlePriority,fn=e.log,ln=e.unstable_setDisableYieldValue,Jt=null,qt=null;function nr(n){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Jt,n,void 0,(n.current.flags&128)===128)}catch{}}function Tn(n){if(typeof fn=="function"&&ln(n),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Jt,n)}catch{}}var hn=Math.clz32?Math.clz32:ks,yr=Math.log,bn=Math.LN2;function ks(n){return n>>>=0,n===0?32:31-(yr(n)/bn|0)|0}var kr=128,Yt=4194304;function it(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function J(n,i){var o=n.pendingLanes;if(o===0)return 0;var u=0,g=n.suspendedLanes,y=n.pingedLanes,S=n.warmLanes;n=n.finishedLanes!==0;var A=o&134217727;return A!==0?(o=A&~g,o!==0?u=it(o):(y&=A,y!==0?u=it(y):n||(S=A&~S,S!==0&&(u=it(S))))):(A=o&~g,A!==0?u=it(A):y!==0?u=it(y):n||(S=o&~S,S!==0&&(u=it(S)))),u===0?0:i!==0&&i!==u&&(i&g)===0&&(g=u&-u,S=i&-i,g>=S||g===32&&(S&4194176)!==0)?i:u}function xe(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function _e(n,i){switch(n){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function De(){var n=kr;return kr<<=1,(kr&4194176)===0&&(kr=128),n}function qe(){var n=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),n}function lt(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Ye(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ft(n,i,o,u,g,y){var S=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,z=n.expirationTimes,Z=n.hiddenUpdates;for(o=S&~o;0<o;){var me=31-hn(o),je=1<<me;A[me]=0,z[me]=-1;var oe=Z[me];if(oe!==null)for(Z[me]=null,me=0;me<oe.length;me++){var he=oe[me];he!==null&&(he.lane&=-536870913)}o&=~je}u!==0&&ot(n,u,0),y!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=y&~(S&~i))}function ot(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-hn(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194218}function ht(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-hn(o),g=1<<u;g&i|n[u]&i&&(n[u]|=i),o&=~g}}function Rt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Mt(){var n=D.p;return n!==0?n:(n=window.event,n===void 0?32:n0(n.type))}function sn(n,i){var o=D.p;try{return D.p=n,i()}finally{D.p=o}}var Dn=Math.random().toString(36).slice(2),on="__reactFiber$"+Dn,wn="__reactProps$"+Dn,fe="__reactContainer$"+Dn,Ee="__reactEvents$"+Dn,Le="__reactListeners$"+Dn,Ct="__reactHandles$"+Dn,cn="__reactResources$"+Dn,Hn="__reactMarker$"+Dn;function cr(n){delete n[on],delete n[wn],delete n[Ee],delete n[Le],delete n[Ct]}function On(n){var i=n[on];if(i)return i;for(var o=n.parentNode;o;){if(i=o[fe]||o[on]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=Bb(n);n!==null;){if(o=n[on])return o;n=Bb(n)}return i}n=o,o=n.parentNode}return null}function At(n){if(n=n[on]||n[fe]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function ca(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function Ds(n){var i=n[cn];return i||(i=n[cn]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function jn(n){n[Hn]=!0}var Lv=new Set,Iv={};function ei(n,i){zi(n,i),zi(n+"Capture",i)}function zi(n,i){for(Iv[n]=i,n=0;n<i.length;n++)Lv.add(i[n])}var Os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zv={},Uv={};function jE(n){return Ne.call(Uv,n)?!0:Ne.call(zv,n)?!1:wE.test(n)?Uv[n]=!0:(zv[n]=!0,!1)}function Jc(n,i,o){if(jE(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function eu(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Ps(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}function Dr(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $v(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function _E(n){var i=$v(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,y=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return g.call(this)},set:function(S){u=""+S,y.call(this,S)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(S){u=""+S},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function tu(n){n._valueTracker||(n._valueTracker=_E(n))}function Bv(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=$v(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function nu(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var NE=/[\n"\\]/g;function Or(n){return n.replace(NE,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Lf(n,i,o,u,g,y,S,A){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),i!=null?S==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Dr(i)):n.value!==""+Dr(i)&&(n.value=""+Dr(i)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),i!=null?If(n,S,Dr(i)):o!=null?If(n,S,Dr(o)):u!=null&&n.removeAttribute("value"),g==null&&y!=null&&(n.defaultChecked=!!y),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+Dr(A):n.removeAttribute("name")}function Hv(n,i,o,u,g,y,S,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null))return;o=o!=null?""+Dr(o):"",i=i!=null?""+Dr(i):o,A||i===n.value||(n.value=i),n.defaultValue=i}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S)}function If(n,i,o){i==="number"&&nu(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ui(n,i,o,u){if(n=n.options,i){i={};for(var g=0;g<o.length;g++)i["$"+o[g]]=!0;for(o=0;o<n.length;o++)g=i.hasOwnProperty("$"+n[o].value),n[o].selected!==g&&(n[o].selected=g),g&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Dr(o),i=null,g=0;g<n.length;g++){if(n[g].value===o){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}i!==null||n[g].disabled||(i=n[g])}i!==null&&(i.selected=!0)}}function qv(n,i,o){if(i!=null&&(i=""+Dr(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Dr(o):""}function Fv(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(X(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Dr(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function $i(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var SE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vv(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||SE.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Yv(n,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in i)u=i[g],i.hasOwnProperty(g)&&o[g]!==u&&Vv(n,g,u)}else for(var y in i)i.hasOwnProperty(y)&&Vv(n,y,i[y])}function zf(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var EE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),CE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ru(n){return CE.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Uf=null;function $f(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Bi=null,Hi=null;function Gv(n){var i=At(n);if(i&&(n=i.stateNode)){var o=n[wn]||null;e:switch(n=i.stateNode,i.type){case"input":if(Lf(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Or(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var g=u[wn]||null;if(!g)throw Error(a(90));Lf(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Bv(u)}break e;case"textarea":qv(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ui(n,!!o.multiple,i,!1)}}}var Bf=!1;function Wv(n,i,o){if(Bf)return n(i,o);Bf=!0;try{var u=n(i);return u}finally{if(Bf=!1,(Bi!==null||Hi!==null)&&($u(),Bi&&(i=Bi,n=Hi,Hi=Bi=null,Gv(i),n)))for(i=0;i<n.length;i++)Gv(n[i])}}function io(n,i){var o=n.stateNode;if(o===null)return null;var u=o[wn]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var Hf=!1;if(Os)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){Hf=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{Hf=!1}var ua=null,qf=null,su=null;function Xv(){if(su)return su;var n,i=qf,o=i.length,u,g="value"in ua?ua.value:ua.textContent,y=g.length;for(n=0;n<o&&i[n]===g[n];n++);var S=o-n;for(u=1;u<=S&&i[o-u]===g[y-u];u++);return su=g.slice(n,1<u?1-u:void 0)}function au(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function iu(){return!0}function Kv(){return!1}function ur(n){function i(o,u,g,y,S){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?iu:Kv,this.isPropagationStopped=Kv,this}return Y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=iu)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=iu)},persist:function(){},isPersistent:iu}),i}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lu=ur(ti),oo=Y({},ti,{view:0,detail:0}),TE=ur(oo),Ff,Vf,co,ou=Y({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==co&&(co&&n.type==="mousemove"?(Ff=n.screenX-co.screenX,Vf=n.screenY-co.screenY):Vf=Ff=0,co=n),Ff)},movementY:function(n){return"movementY"in n?n.movementY:Vf}}),Qv=ur(ou),RE=Y({},ou,{dataTransfer:0}),ME=ur(RE),AE=Y({},oo,{relatedTarget:0}),Yf=ur(AE),kE=Y({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),DE=ur(kE),OE=Y({},ti,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),PE=ur(OE),LE=Y({},ti,{data:0}),Zv=ur(LE),IE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $E(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=UE[n])?!!i[n]:!1}function Gf(){return $E}var BE=Y({},oo,{key:function(n){if(n.key){var i=IE[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=au(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zE[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gf,charCode:function(n){return n.type==="keypress"?au(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?au(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),HE=ur(BE),qE=Y({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jv=ur(qE),FE=Y({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gf}),VE=ur(FE),YE=Y({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),GE=ur(YE),WE=Y({},ou,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),XE=ur(WE),KE=Y({},ti,{newState:0,oldState:0}),QE=ur(KE),ZE=[9,13,27,32],Wf=Os&&"CompositionEvent"in window,uo=null;Os&&"documentMode"in document&&(uo=document.documentMode);var JE=Os&&"TextEvent"in window&&!uo,ex=Os&&(!Wf||uo&&8<uo&&11>=uo),tx=" ",nx=!1;function rx(n,i){switch(n){case"keyup":return ZE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sx(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var qi=!1;function e2(n,i){switch(n){case"compositionend":return sx(i);case"keypress":return i.which!==32?null:(nx=!0,tx);case"textInput":return n=i.data,n===tx&&nx?null:n;default:return null}}function t2(n,i){if(qi)return n==="compositionend"||!Wf&&rx(n,i)?(n=Xv(),su=qf=ua=null,qi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ex&&i.locale!=="ko"?null:i.data;default:return null}}var n2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ax(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!n2[n.type]:i==="textarea"}function ix(n,i,o,u){Bi?Hi?Hi.push(u):Hi=[u]:Bi=u,i=Vu(i,"onChange"),0<i.length&&(o=new lu("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var fo=null,ho=null;function r2(n){kb(n,0)}function cu(n){var i=ca(n);if(Bv(i))return n}function lx(n,i){if(n==="change")return i}var ox=!1;if(Os){var Xf;if(Os){var Kf="oninput"in document;if(!Kf){var cx=document.createElement("div");cx.setAttribute("oninput","return;"),Kf=typeof cx.oninput=="function"}Xf=Kf}else Xf=!1;ox=Xf&&(!document.documentMode||9<document.documentMode)}function ux(){fo&&(fo.detachEvent("onpropertychange",dx),ho=fo=null)}function dx(n){if(n.propertyName==="value"&&cu(ho)){var i=[];ix(i,ho,n,$f(n)),Wv(r2,i)}}function s2(n,i,o){n==="focusin"?(ux(),fo=i,ho=o,fo.attachEvent("onpropertychange",dx)):n==="focusout"&&ux()}function a2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return cu(ho)}function i2(n,i){if(n==="click")return cu(i)}function l2(n,i){if(n==="input"||n==="change")return cu(i)}function o2(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var br=typeof Object.is=="function"?Object.is:o2;function mo(n,i){if(br(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!Ne.call(i,g)||!br(n[g],i[g]))return!1}return!0}function fx(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function hx(n,i){var o=fx(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=fx(o)}}function mx(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?mx(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function px(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=nu(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=nu(n.document)}return i}function Qf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function c2(n,i){var o=px(i);i=n.focusedElem;var u=n.selectionRange;if(o!==i&&i&&i.ownerDocument&&mx(i.ownerDocument.documentElement,i)){if(u!==null&&Qf(i)){if(n=u.start,o=u.end,o===void 0&&(o=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(o,i.value.length);else if(o=(n=i.ownerDocument||document)&&n.defaultView||window,o.getSelection){o=o.getSelection();var g=i.textContent.length,y=Math.min(u.start,g);u=u.end===void 0?y:Math.min(u.end,g),!o.extend&&y>u&&(g=u,u=y,y=g),g=hx(i,y);var S=hx(i,u);g&&S&&(o.rangeCount!==1||o.anchorNode!==g.node||o.anchorOffset!==g.offset||o.focusNode!==S.node||o.focusOffset!==S.offset)&&(n=n.createRange(),n.setStart(g.node,g.offset),o.removeAllRanges(),y>u?(o.addRange(n),o.extend(S.node,S.offset)):(n.setEnd(S.node,S.offset),o.addRange(n)))}}for(n=[],o=i;o=o.parentNode;)o.nodeType===1&&n.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)o=n[i],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var u2=Os&&"documentMode"in document&&11>=document.documentMode,Fi=null,Zf=null,po=null,Jf=!1;function gx(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Jf||Fi==null||Fi!==nu(u)||(u=Fi,"selectionStart"in u&&Qf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),po&&mo(po,u)||(po=u,u=Vu(Zf,"onSelect"),0<u.length&&(i=new lu("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=Fi)))}function ni(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Vi={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionrun:ni("Transition","TransitionRun"),transitionstart:ni("Transition","TransitionStart"),transitioncancel:ni("Transition","TransitionCancel"),transitionend:ni("Transition","TransitionEnd")},eh={},vx={};Os&&(vx=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function ri(n){if(eh[n])return eh[n];if(!Vi[n])return n;var i=Vi[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in vx)return eh[n]=i[o];return n}var xx=ri("animationend"),yx=ri("animationiteration"),bx=ri("animationstart"),d2=ri("transitionrun"),f2=ri("transitionstart"),h2=ri("transitioncancel"),wx=ri("transitionend"),jx=new Map,_x="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Kr(n,i){jx.set(n,i),ei(i,[n])}var Pr=[],Yi=0,th=0;function uu(){for(var n=Yi,i=th=Yi=0;i<n;){var o=Pr[i];Pr[i++]=null;var u=Pr[i];Pr[i++]=null;var g=Pr[i];Pr[i++]=null;var y=Pr[i];if(Pr[i++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}y!==0&&Nx(o,g,y)}}function du(n,i,o,u){Pr[Yi++]=n,Pr[Yi++]=i,Pr[Yi++]=o,Pr[Yi++]=u,th|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function nh(n,i,o,u){return du(n,i,o,u),fu(n)}function da(n,i){return du(n,null,null,i),fu(n)}function Nx(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var g=!1,y=n.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(g=!0)),n=y,y=y.return;g&&i!==null&&n.tag===3&&(y=n.stateNode,g=31-hn(o),y=y.hiddenUpdates,n=y[g],n===null?y[g]=[i]:n.push(i),i.lane=o|536870912)}function fu(n){if(50<$o)throw $o=0,om=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Gi={},Sx=new WeakMap;function Lr(n,i){if(typeof n=="object"&&n!==null){var o=Sx.get(n);return o!==void 0?o:(i={value:n,source:i,stack:G(i)},Sx.set(n,i),i)}return{value:n,source:i,stack:G(i)}}var Wi=[],Xi=0,hu=null,mu=0,Ir=[],zr=0,si=null,Ls=1,Is="";function ai(n,i){Wi[Xi++]=mu,Wi[Xi++]=hu,hu=n,mu=i}function Ex(n,i,o){Ir[zr++]=Ls,Ir[zr++]=Is,Ir[zr++]=si,si=n;var u=Ls;n=Is;var g=32-hn(u)-1;u&=~(1<<g),o+=1;var y=32-hn(i)+g;if(30<y){var S=g-g%5;y=(u&(1<<S)-1).toString(32),u>>=S,g-=S,Ls=1<<32-hn(i)+g|o<<g|u,Is=y+n}else Ls=1<<y|o<<g|u,Is=n}function rh(n){n.return!==null&&(ai(n,1),Ex(n,1,0))}function sh(n){for(;n===hu;)hu=Wi[--Xi],Wi[Xi]=null,mu=Wi[--Xi],Wi[Xi]=null;for(;n===si;)si=Ir[--zr],Ir[zr]=null,Is=Ir[--zr],Ir[zr]=null,Ls=Ir[--zr],Ir[zr]=null}var rr=null,qn=null,It=!1,Qr=null,hs=!1,ah=Error(a(519));function ii(n){var i=Error(a(418,""));throw xo(Lr(i,n)),ah}function Cx(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[on]=n,i[wn]=u,o){case"dialog":St("cancel",i),St("close",i);break;case"iframe":case"object":case"embed":St("load",i);break;case"video":case"audio":for(o=0;o<Ho.length;o++)St(Ho[o],i);break;case"source":St("error",i);break;case"img":case"image":case"link":St("error",i),St("load",i);break;case"details":St("toggle",i);break;case"input":St("invalid",i),Hv(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),tu(i);break;case"select":St("invalid",i);break;case"textarea":St("invalid",i),Fv(i,u.value,u.defaultValue,u.children),tu(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||Lb(i.textContent,o)?(u.popover!=null&&(St("beforetoggle",i),St("toggle",i)),u.onScroll!=null&&St("scroll",i),u.onScrollEnd!=null&&St("scrollend",i),u.onClick!=null&&(i.onclick=Yu),i=!0):i=!1,i||ii(n)}function Tx(n){for(rr=n.return;rr;)switch(rr.tag){case 3:case 27:hs=!0;return;case 5:case 13:hs=!1;return;default:rr=rr.return}}function go(n){if(n!==rr)return!1;if(!It)return Tx(n),It=!0,!1;var i=!1,o;if((o=n.tag!==3&&n.tag!==27)&&((o=n.tag===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Sm(n.type,n.memoizedProps)),o=!o),o&&(i=!0),i&&qn&&ii(n),Tx(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){qn=Jr(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}qn=null}}else qn=rr?Jr(n.stateNode.nextSibling):null;return!0}function vo(){qn=rr=null,It=!1}function xo(n){Qr===null?Qr=[n]:Qr.push(n)}var yo=Error(a(460)),Rx=Error(a(474)),ih={then:function(){}};function Mx(n){return n=n.status,n==="fulfilled"||n==="rejected"}function pu(){}function Ax(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(pu,pu),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,n===yo?Error(a(483)):n;default:if(typeof i.status=="string")i.then(pu,pu);else{if(n=en,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=u}},function(u){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,n===yo?Error(a(483)):n}throw bo=i,yo}}var bo=null;function kx(){if(bo===null)throw Error(a(459));var n=bo;return bo=null,n}var Ki=null,wo=0;function gu(n){var i=wo;return wo+=1,Ki===null&&(Ki=[]),Ax(Ki,n,i)}function jo(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function vu(n,i){throw i.$$typeof===c?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Dx(n){var i=n._init;return i(n._payload)}function Ox(n){function i(re,Q){if(n){var ie=re.deletions;ie===null?(re.deletions=[Q],re.flags|=16):ie.push(Q)}}function o(re,Q){if(!n)return null;for(;Q!==null;)i(re,Q),Q=Q.sibling;return null}function u(re){for(var Q=new Map;re!==null;)re.key!==null?Q.set(re.key,re):Q.set(re.index,re),re=re.sibling;return Q}function g(re,Q){return re=_a(re,Q),re.index=0,re.sibling=null,re}function y(re,Q,ie){return re.index=ie,n?(ie=re.alternate,ie!==null?(ie=ie.index,ie<Q?(re.flags|=33554434,Q):ie):(re.flags|=33554434,Q)):(re.flags|=1048576,Q)}function S(re){return n&&re.alternate===null&&(re.flags|=33554434),re}function A(re,Q,ie,ye){return Q===null||Q.tag!==6?(Q=em(ie,re.mode,ye),Q.return=re,Q):(Q=g(Q,ie),Q.return=re,Q)}function z(re,Q,ie,ye){var ze=ie.type;return ze===h?me(re,Q,ie.props.children,ye,ie.key):Q!==null&&(Q.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===E&&Dx(ze)===Q.type)?(Q=g(Q,ie.props),jo(Q,ie),Q.return=re,Q):(Q=Pu(ie.type,ie.key,ie.props,null,re.mode,ye),jo(Q,ie),Q.return=re,Q)}function Z(re,Q,ie,ye){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ie.containerInfo||Q.stateNode.implementation!==ie.implementation?(Q=tm(ie,re.mode,ye),Q.return=re,Q):(Q=g(Q,ie.children||[]),Q.return=re,Q)}function me(re,Q,ie,ye,ze){return Q===null||Q.tag!==7?(Q=gi(ie,re.mode,ye,ze),Q.return=re,Q):(Q=g(Q,ie),Q.return=re,Q)}function je(re,Q,ie){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=em(""+Q,re.mode,ie),Q.return=re,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case d:return ie=Pu(Q.type,Q.key,Q.props,null,re.mode,ie),jo(ie,Q),ie.return=re,ie;case f:return Q=tm(Q,re.mode,ie),Q.return=re,Q;case E:var ye=Q._init;return Q=ye(Q._payload),je(re,Q,ie)}if(X(Q)||L(Q))return Q=gi(Q,re.mode,ie,null),Q.return=re,Q;if(typeof Q.then=="function")return je(re,gu(Q),ie);if(Q.$$typeof===w)return je(re,ku(re,Q),ie);vu(re,Q)}return null}function oe(re,Q,ie,ye){var ze=Q!==null?Q.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ze!==null?null:A(re,Q,""+ie,ye);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case d:return ie.key===ze?z(re,Q,ie,ye):null;case f:return ie.key===ze?Z(re,Q,ie,ye):null;case E:return ze=ie._init,ie=ze(ie._payload),oe(re,Q,ie,ye)}if(X(ie)||L(ie))return ze!==null?null:me(re,Q,ie,ye,null);if(typeof ie.then=="function")return oe(re,Q,gu(ie),ye);if(ie.$$typeof===w)return oe(re,Q,ku(re,ie),ye);vu(re,ie)}return null}function he(re,Q,ie,ye,ze){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return re=re.get(ie)||null,A(Q,re,""+ye,ze);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case d:return re=re.get(ye.key===null?ie:ye.key)||null,z(Q,re,ye,ze);case f:return re=re.get(ye.key===null?ie:ye.key)||null,Z(Q,re,ye,ze);case E:var gt=ye._init;return ye=gt(ye._payload),he(re,Q,ie,ye,ze)}if(X(ye)||L(ye))return re=re.get(ie)||null,me(Q,re,ye,ze,null);if(typeof ye.then=="function")return he(re,Q,ie,gu(ye),ze);if(ye.$$typeof===w)return he(re,Q,ie,ku(Q,ye),ze);vu(Q,ye)}return null}function He(re,Q,ie,ye){for(var ze=null,gt=null,Ve=Q,Ke=Q=0,In=null;Ve!==null&&Ke<ie.length;Ke++){Ve.index>Ke?(In=Ve,Ve=null):In=Ve.sibling;var zt=oe(re,Ve,ie[Ke],ye);if(zt===null){Ve===null&&(Ve=In);break}n&&Ve&&zt.alternate===null&&i(re,Ve),Q=y(zt,Q,Ke),gt===null?ze=zt:gt.sibling=zt,gt=zt,Ve=In}if(Ke===ie.length)return o(re,Ve),It&&ai(re,Ke),ze;if(Ve===null){for(;Ke<ie.length;Ke++)Ve=je(re,ie[Ke],ye),Ve!==null&&(Q=y(Ve,Q,Ke),gt===null?ze=Ve:gt.sibling=Ve,gt=Ve);return It&&ai(re,Ke),ze}for(Ve=u(Ve);Ke<ie.length;Ke++)In=he(Ve,re,Ke,ie[Ke],ye),In!==null&&(n&&In.alternate!==null&&Ve.delete(In.key===null?Ke:In.key),Q=y(In,Q,Ke),gt===null?ze=In:gt.sibling=In,gt=In);return n&&Ve.forEach(function(Ma){return i(re,Ma)}),It&&ai(re,Ke),ze}function rt(re,Q,ie,ye){if(ie==null)throw Error(a(151));for(var ze=null,gt=null,Ve=Q,Ke=Q=0,In=null,zt=ie.next();Ve!==null&&!zt.done;Ke++,zt=ie.next()){Ve.index>Ke?(In=Ve,Ve=null):In=Ve.sibling;var Ma=oe(re,Ve,zt.value,ye);if(Ma===null){Ve===null&&(Ve=In);break}n&&Ve&&Ma.alternate===null&&i(re,Ve),Q=y(Ma,Q,Ke),gt===null?ze=Ma:gt.sibling=Ma,gt=Ma,Ve=In}if(zt.done)return o(re,Ve),It&&ai(re,Ke),ze;if(Ve===null){for(;!zt.done;Ke++,zt=ie.next())zt=je(re,zt.value,ye),zt!==null&&(Q=y(zt,Q,Ke),gt===null?ze=zt:gt.sibling=zt,gt=zt);return It&&ai(re,Ke),ze}for(Ve=u(Ve);!zt.done;Ke++,zt=ie.next())zt=he(Ve,re,Ke,zt.value,ye),zt!==null&&(n&&zt.alternate!==null&&Ve.delete(zt.key===null?Ke:zt.key),Q=y(zt,Q,Ke),gt===null?ze=zt:gt.sibling=zt,gt=zt);return n&&Ve.forEach(function(CC){return i(re,CC)}),It&&ai(re,Ke),ze}function gn(re,Q,ie,ye){if(typeof ie=="object"&&ie!==null&&ie.type===h&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case d:e:{for(var ze=ie.key;Q!==null;){if(Q.key===ze){if(ze=ie.type,ze===h){if(Q.tag===7){o(re,Q.sibling),ye=g(Q,ie.props.children),ye.return=re,re=ye;break e}}else if(Q.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===E&&Dx(ze)===Q.type){o(re,Q.sibling),ye=g(Q,ie.props),jo(ye,ie),ye.return=re,re=ye;break e}o(re,Q);break}else i(re,Q);Q=Q.sibling}ie.type===h?(ye=gi(ie.props.children,re.mode,ye,ie.key),ye.return=re,re=ye):(ye=Pu(ie.type,ie.key,ie.props,null,re.mode,ye),jo(ye,ie),ye.return=re,re=ye)}return S(re);case f:e:{for(ze=ie.key;Q!==null;){if(Q.key===ze)if(Q.tag===4&&Q.stateNode.containerInfo===ie.containerInfo&&Q.stateNode.implementation===ie.implementation){o(re,Q.sibling),ye=g(Q,ie.children||[]),ye.return=re,re=ye;break e}else{o(re,Q);break}else i(re,Q);Q=Q.sibling}ye=tm(ie,re.mode,ye),ye.return=re,re=ye}return S(re);case E:return ze=ie._init,ie=ze(ie._payload),gn(re,Q,ie,ye)}if(X(ie))return He(re,Q,ie,ye);if(L(ie)){if(ze=L(ie),typeof ze!="function")throw Error(a(150));return ie=ze.call(ie),rt(re,Q,ie,ye)}if(typeof ie.then=="function")return gn(re,Q,gu(ie),ye);if(ie.$$typeof===w)return gn(re,Q,ku(re,ie),ye);vu(re,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,Q!==null&&Q.tag===6?(o(re,Q.sibling),ye=g(Q,ie),ye.return=re,re=ye):(o(re,Q),ye=em(ie,re.mode,ye),ye.return=re,re=ye),S(re)):o(re,Q)}return function(re,Q,ie,ye){try{wo=0;var ze=gn(re,Q,ie,ye);return Ki=null,ze}catch(Ve){if(Ve===yo)throw Ve;var gt=Hr(29,Ve,null,re.mode);return gt.lanes=ye,gt.return=re,gt}finally{}}}var li=Ox(!0),Px=Ox(!1),Qi=ae(null),xu=ae(0);function Lx(n,i){n=Ws,de(xu,n),de(Qi,i),Ws=n|i.baseLanes}function lh(){de(xu,Ws),de(Qi,Qi.current)}function oh(){Ws=xu.current,ge(Qi),ge(xu)}var Ur=ae(null),ms=null;function fa(n){var i=n.alternate;de(Rn,Rn.current&1),de(Ur,n),ms===null&&(i===null||Qi.current!==null||i.memoizedState!==null)&&(ms=n)}function Ix(n){if(n.tag===22){if(de(Rn,Rn.current),de(Ur,n),ms===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(ms=n)}}else ha()}function ha(){de(Rn,Rn.current),de(Ur,Ur.current)}function zs(n){ge(Ur),ms===n&&(ms=null),ge(Rn)}var Rn=ae(0);function yu(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var m2=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},p2=e.unstable_scheduleCallback,g2=e.unstable_NormalPriority,Mn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ch(){return{controller:new m2,data:new Map,refCount:0}}function _o(n){n.refCount--,n.refCount===0&&p2(g2,function(){n.controller.abort()})}var No=null,uh=0,Zi=0,Ji=null;function v2(n,i){if(No===null){var o=No=[];uh=0,Zi=gm(),Ji={status:"pending",value:void 0,then:function(u){o.push(u)}}}return uh++,i.then(zx,zx),i}function zx(){if(--uh===0&&No!==null){Ji!==null&&(Ji.status="fulfilled");var n=No;No=null,Zi=0,Ji=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function x2(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var g=0;g<o.length;g++)(0,o[g])(i)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var Ux=I.S;I.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&v2(n,i),Ux!==null&&Ux(n,i)};var oi=ae(null);function dh(){var n=oi.current;return n!==null?n:en.pooledCache}function bu(n,i){i===null?de(oi,oi.current):de(oi,i.pool)}function $x(){var n=dh();return n===null?null:{parent:Mn._currentValue,pool:n}}var ma=0,mt=null,Gt=null,_n=null,wu=!1,el=!1,ci=!1,ju=0,So=0,tl=null,y2=0;function yn(){throw Error(a(321))}function fh(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!br(n[o],i[o]))return!1;return!0}function hh(n,i,o,u,g,y){return ma=y,mt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,I.H=n===null||n.memoizedState===null?ui:pa,ci=!1,y=o(u,g),ci=!1,el&&(y=Hx(i,o,u,g)),Bx(n),y}function Bx(n){I.H=ps;var i=Gt!==null&&Gt.next!==null;if(ma=0,_n=Gt=mt=null,wu=!1,So=0,tl=null,i)throw Error(a(300));n===null||Pn||(n=n.dependencies,n!==null&&Au(n)&&(Pn=!0))}function Hx(n,i,o,u){mt=n;var g=0;do{if(el&&(tl=null),So=0,el=!1,25<=g)throw Error(a(301));if(g+=1,_n=Gt=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}I.H=di,y=i(o,u)}while(el);return y}function b2(){var n=I.H,i=n.useState()[0];return i=typeof i.then=="function"?Eo(i):i,n=n.useState()[0],(Gt!==null?Gt.memoizedState:null)!==n&&(mt.flags|=1024),i}function mh(){var n=ju!==0;return ju=0,n}function ph(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function gh(n){if(wu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}wu=!1}ma=0,_n=Gt=mt=null,el=!1,So=ju=0,tl=null}function dr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?mt.memoizedState=_n=n:_n=_n.next=n,_n}function Nn(){if(Gt===null){var n=mt.alternate;n=n!==null?n.memoizedState:null}else n=Gt.next;var i=_n===null?mt.memoizedState:_n.next;if(i!==null)_n=i,Gt=n;else{if(n===null)throw mt.alternate===null?Error(a(467)):Error(a(310));Gt=n,n={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},_n===null?mt.memoizedState=_n=n:_n=_n.next=n}return _n}var _u;_u=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Eo(n){var i=So;return So+=1,tl===null&&(tl=[]),n=Ax(tl,n,i),i=mt,(_n===null?i.memoizedState:_n.next)===null&&(i=i.alternate,I.H=i===null||i.memoizedState===null?ui:pa),n}function Nu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Eo(n);if(n.$$typeof===w)return Wn(n)}throw Error(a(438,String(n)))}function vh(n){var i=null,o=mt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=mt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=_u(),mt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=M;return i.index++,o}function Us(n,i){return typeof i=="function"?i(n):i}function Su(n){var i=Nn();return xh(i,Gt,n)}function xh(n,i,o){var u=n.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var g=n.baseQueue,y=u.pending;if(y!==null){if(g!==null){var S=g.next;g.next=y.next,y.next=S}i.baseQueue=g=y,u.pending=null}if(y=n.baseState,g===null)n.memoizedState=y;else{i=g.next;var A=S=null,z=null,Z=i,me=!1;do{var je=Z.lane&-536870913;if(je!==Z.lane?(Tt&je)===je:(ma&je)===je){var oe=Z.revertLane;if(oe===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),je===Zi&&(me=!0);else if((ma&oe)===oe){Z=Z.next,oe===Zi&&(me=!0);continue}else je={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(A=z=je,S=y):z=z.next=je,mt.lanes|=oe,Na|=oe;je=Z.action,ci&&o(y,je),y=Z.hasEagerState?Z.eagerState:o(y,je)}else oe={lane:je,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(A=z=oe,S=y):z=z.next=oe,mt.lanes|=je,Na|=je;Z=Z.next}while(Z!==null&&Z!==i);if(z===null?S=y:z.next=A,!br(y,n.memoizedState)&&(Pn=!0,me&&(o=Ji,o!==null)))throw o;n.memoizedState=y,n.baseState=S,n.baseQueue=z,u.lastRenderedState=y}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function yh(n){var i=Nn(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=n;var u=o.dispatch,g=o.pending,y=i.memoizedState;if(g!==null){o.pending=null;var S=g=g.next;do y=n(y,S.action),S=S.next;while(S!==g);br(y,i.memoizedState)||(Pn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function qx(n,i,o){var u=mt,g=Nn(),y=It;if(y){if(o===void 0)throw Error(a(407));o=o()}else o=i();var S=!br((Gt||g).memoizedState,o);if(S&&(g.memoizedState=o,Pn=!0),g=g.queue,jh(Yx.bind(null,u,g,n),[n]),g.getSnapshot!==i||S||_n!==null&&_n.memoizedState.tag&1){if(u.flags|=2048,nl(9,Vx.bind(null,u,g,o,i),{destroy:void 0},null),en===null)throw Error(a(349));y||(ma&60)!==0||Fx(u,i,o)}return o}function Fx(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=mt.updateQueue,i===null?(i=_u(),mt.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function Vx(n,i,o,u){i.value=o,i.getSnapshot=u,Gx(i)&&Wx(n)}function Yx(n,i,o){return o(function(){Gx(i)&&Wx(n)})}function Gx(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!br(n,o)}catch{return!0}}function Wx(n){var i=da(n,2);i!==null&&sr(i,n,2)}function bh(n){var i=dr();if(typeof n=="function"){var o=n;if(n=o(),ci){Tn(!0);try{o()}finally{Tn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:n},i}function Xx(n,i,o,u){return n.baseState=o,xh(n,Gt,typeof u=="function"?u:Us)}function w2(n,i,o,u,g){if(Tu(n))throw Error(a(485));if(n=i.action,n!==null){var y={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};I.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,Kx(i,y)):(y.next=o.next,i.pending=o.next=y)}}function Kx(n,i){var o=i.action,u=i.payload,g=n.state;if(i.isTransition){var y=I.T,S={};I.T=S;try{var A=o(g,u),z=I.S;z!==null&&z(S,A),Qx(n,i,A)}catch(Z){wh(n,i,Z)}finally{I.T=y}}else try{y=o(g,u),Qx(n,i,y)}catch(Z){wh(n,i,Z)}}function Qx(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Zx(n,i,u)},function(u){return wh(n,i,u)}):Zx(n,i,o)}function Zx(n,i,o){i.status="fulfilled",i.value=o,Jx(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,Kx(n,o)))}function wh(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Jx(i),i=i.next;while(i!==u)}n.action=null}function Jx(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function ey(n,i){return i}function ty(n,i){if(It){var o=en.formState;if(o!==null){e:{var u=mt;if(It){if(qn){t:{for(var g=qn,y=hs;g.nodeType!==8;){if(!y){g=null;break t}if(g=Jr(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){qn=Jr(g.nextSibling),u=g.data==="F!";break e}}ii(u)}u=!1}u&&(i=o[0])}}return o=dr(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ey,lastRenderedState:i},o.queue=u,o=yy.bind(null,mt,u),u.dispatch=o,u=bh(!1),y=Ch.bind(null,mt,!1,u.queue),u=dr(),g={state:i,dispatch:null,action:n,pending:null},u.queue=g,o=w2.bind(null,mt,g,y,o),g.dispatch=o,u.memoizedState=n,[i,o,!1]}function ny(n){var i=Nn();return ry(i,Gt,n)}function ry(n,i,o){i=xh(n,i,ey)[0],n=Su(Us)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?Eo(i):i;var u=Nn(),g=u.queue,y=g.dispatch;return o!==u.memoizedState&&(mt.flags|=2048,nl(9,j2.bind(null,g,o),{destroy:void 0},null)),[i,y,n]}function j2(n,i){n.action=i}function sy(n){var i=Nn(),o=Gt;if(o!==null)return ry(i,o,n);Nn(),i=i.memoizedState,o=Nn();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function nl(n,i,o,u){return n={tag:n,create:i,inst:o,deps:u,next:null},i=mt.updateQueue,i===null&&(i=_u(),mt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function ay(){return Nn().memoizedState}function Eu(n,i,o,u){var g=dr();mt.flags|=n,g.memoizedState=nl(1|i,o,{destroy:void 0},u===void 0?null:u)}function Cu(n,i,o,u){var g=Nn();u=u===void 0?null:u;var y=g.memoizedState.inst;Gt!==null&&u!==null&&fh(u,Gt.memoizedState.deps)?g.memoizedState=nl(i,o,y,u):(mt.flags|=n,g.memoizedState=nl(1|i,o,y,u))}function iy(n,i){Eu(8390656,8,n,i)}function jh(n,i){Cu(2048,8,n,i)}function ly(n,i){return Cu(4,2,n,i)}function oy(n,i){return Cu(4,4,n,i)}function cy(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function uy(n,i,o){o=o!=null?o.concat([n]):null,Cu(4,4,cy.bind(null,i,n),o)}function _h(){}function dy(n,i){var o=Nn();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&fh(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function fy(n,i){var o=Nn();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&fh(i,u[1]))return u[0];if(u=n(),ci){Tn(!0);try{n()}finally{Tn(!1)}}return o.memoizedState=[u,i],u}function Nh(n,i,o){return o===void 0||(ma&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=mb(),mt.lanes|=n,Na|=n,o)}function hy(n,i,o,u){return br(o,i)?o:Qi.current!==null?(n=Nh(n,o,u),br(n,i)||(Pn=!0),n):(ma&42)===0?(Pn=!0,n.memoizedState=o):(n=mb(),mt.lanes|=n,Na|=n,i)}function my(n,i,o,u,g){var y=D.p;D.p=y!==0&&8>y?y:8;var S=I.T,A={};I.T=A,Ch(n,!1,i,o);try{var z=g(),Z=I.S;if(Z!==null&&Z(A,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var me=x2(z,u);Co(n,i,me,Nr(n))}else Co(n,i,u,Nr(n))}catch(je){Co(n,i,{then:function(){},status:"rejected",reason:je},Nr())}finally{D.p=y,I.T=S}}function _2(){}function Sh(n,i,o,u){if(n.tag!==5)throw Error(a(476));var g=py(n).queue;my(n,g,i,U,o===null?_2:function(){return gy(n),o(u)})}function py(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:U},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function gy(n){var i=py(n).next.queue;Co(n,i,{},Nr())}function Eh(){return Wn(Go)}function vy(){return Nn().memoizedState}function xy(){return Nn().memoizedState}function N2(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Nr();n=xa(o);var u=ya(i,n,o);u!==null&&(sr(u,i,o),Mo(u,i,o)),i={cache:ch()},n.payload=i;return}i=i.return}}function S2(n,i,o){var u=Nr();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Tu(n)?by(i,o):(o=nh(n,i,o,u),o!==null&&(sr(o,n,u),wy(o,i,u)))}function yy(n,i,o){var u=Nr();Co(n,i,o,u)}function Co(n,i,o,u){var g={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Tu(n))by(i,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var S=i.lastRenderedState,A=y(S,o);if(g.hasEagerState=!0,g.eagerState=A,br(A,S))return du(n,i,g,0),en===null&&uu(),!1}catch{}finally{}if(o=nh(n,i,g,u),o!==null)return sr(o,n,u),wy(o,i,u),!0}return!1}function Ch(n,i,o,u){if(u={lane:2,revertLane:gm(),action:u,hasEagerState:!1,eagerState:null,next:null},Tu(n)){if(i)throw Error(a(479))}else i=nh(n,o,u,2),i!==null&&sr(i,n,2)}function Tu(n){var i=n.alternate;return n===mt||i!==null&&i===mt}function by(n,i){el=wu=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function wy(n,i,o){if((o&4194176)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,ht(n,o)}}var ps={readContext:Wn,use:Nu,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn};ps.useCacheRefresh=yn,ps.useMemoCache=yn,ps.useHostTransitionStatus=yn,ps.useFormState=yn,ps.useActionState=yn,ps.useOptimistic=yn;var ui={readContext:Wn,use:Nu,useCallback:function(n,i){return dr().memoizedState=[n,i===void 0?null:i],n},useContext:Wn,useEffect:iy,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Eu(4194308,4,cy.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Eu(4194308,4,n,i)},useInsertionEffect:function(n,i){Eu(4,2,n,i)},useMemo:function(n,i){var o=dr();i=i===void 0?null:i;var u=n();if(ci){Tn(!0);try{n()}finally{Tn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=dr();if(o!==void 0){var g=o(i);if(ci){Tn(!0);try{o(i)}finally{Tn(!1)}}}else g=i;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=S2.bind(null,mt,n),[u.memoizedState,n]},useRef:function(n){var i=dr();return n={current:n},i.memoizedState=n},useState:function(n){n=bh(n);var i=n.queue,o=yy.bind(null,mt,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:_h,useDeferredValue:function(n,i){var o=dr();return Nh(o,n,i)},useTransition:function(){var n=bh(!1);return n=my.bind(null,mt,n.queue,!0,!1),dr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=mt,g=dr();if(It){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),en===null)throw Error(a(349));(Tt&60)!==0||Fx(u,i,o)}g.memoizedState=o;var y={value:o,getSnapshot:i};return g.queue=y,iy(Yx.bind(null,u,y,n),[n]),u.flags|=2048,nl(9,Vx.bind(null,u,y,o,i),{destroy:void 0},null),o},useId:function(){var n=dr(),i=en.identifierPrefix;if(It){var o=Is,u=Ls;o=(u&~(1<<32-hn(u)-1)).toString(32)+o,i=":"+i+"R"+o,o=ju++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=y2++,i=":"+i+"r"+o.toString(32)+":";return n.memoizedState=i},useCacheRefresh:function(){return dr().memoizedState=N2.bind(null,mt)}};ui.useMemoCache=vh,ui.useHostTransitionStatus=Eh,ui.useFormState=ty,ui.useActionState=ty,ui.useOptimistic=function(n){var i=dr();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Ch.bind(null,mt,!0,o),o.dispatch=i,[n,i]};var pa={readContext:Wn,use:Nu,useCallback:dy,useContext:Wn,useEffect:jh,useImperativeHandle:uy,useInsertionEffect:ly,useLayoutEffect:oy,useMemo:fy,useReducer:Su,useRef:ay,useState:function(){return Su(Us)},useDebugValue:_h,useDeferredValue:function(n,i){var o=Nn();return hy(o,Gt.memoizedState,n,i)},useTransition:function(){var n=Su(Us)[0],i=Nn().memoizedState;return[typeof n=="boolean"?n:Eo(n),i]},useSyncExternalStore:qx,useId:vy};pa.useCacheRefresh=xy,pa.useMemoCache=vh,pa.useHostTransitionStatus=Eh,pa.useFormState=ny,pa.useActionState=ny,pa.useOptimistic=function(n,i){var o=Nn();return Xx(o,Gt,n,i)};var di={readContext:Wn,use:Nu,useCallback:dy,useContext:Wn,useEffect:jh,useImperativeHandle:uy,useInsertionEffect:ly,useLayoutEffect:oy,useMemo:fy,useReducer:yh,useRef:ay,useState:function(){return yh(Us)},useDebugValue:_h,useDeferredValue:function(n,i){var o=Nn();return Gt===null?Nh(o,n,i):hy(o,Gt.memoizedState,n,i)},useTransition:function(){var n=yh(Us)[0],i=Nn().memoizedState;return[typeof n=="boolean"?n:Eo(n),i]},useSyncExternalStore:qx,useId:vy};di.useCacheRefresh=xy,di.useMemoCache=vh,di.useHostTransitionStatus=Eh,di.useFormState=sy,di.useActionState=sy,di.useOptimistic=function(n,i){var o=Nn();return Gt!==null?Xx(o,Gt,n,i):(o.baseState=n,[n,o.queue.dispatch])};function Th(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:Y({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Rh={isMounted:function(n){return(n=n._reactInternals)?B(n)===n:!1},enqueueSetState:function(n,i,o){n=n._reactInternals;var u=Nr(),g=xa(u);g.payload=i,o!=null&&(g.callback=o),i=ya(n,g,u),i!==null&&(sr(i,n,u),Mo(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=Nr(),g=xa(u);g.tag=1,g.payload=i,o!=null&&(g.callback=o),i=ya(n,g,u),i!==null&&(sr(i,n,u),Mo(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Nr(),u=xa(o);u.tag=2,i!=null&&(u.callback=i),i=ya(n,u,o),i!==null&&(sr(i,n,o),Mo(i,n,o))}};function jy(n,i,o,u,g,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,S):i.prototype&&i.prototype.isPureReactComponent?!mo(o,u)||!mo(g,y):!0}function _y(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&Rh.enqueueReplaceState(i,i.state,null)}function fi(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=Y({},o));for(var g in n)o[g]===void 0&&(o[g]=n[g])}return o}var Ru=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Ny(n){Ru(n)}function Sy(n){console.error(n)}function Ey(n){Ru(n)}function Mu(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Cy(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Mh(n,i,o){return o=xa(o),o.tag=3,o.payload={element:null},o.callback=function(){Mu(n,i)},o}function Ty(n){return n=xa(n),n.tag=3,n}function Ry(n,i,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;n.payload=function(){return g(y)},n.callback=function(){Cy(i,o,u)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){Cy(i,o,u),typeof g!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function E2(n,i,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Ro(i,o,g,!0),o=Ur.current,o!==null){switch(o.tag){case 13:return ms===null?dm():o.alternate===null&&pn===0&&(pn=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===ih?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),hm(n,u,g)),!1;case 22:return o.flags|=65536,u===ih?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),hm(n,u,g)),!1}throw Error(a(435,o.tag))}return hm(n,u,g),dm(),!1}if(It)return i=Ur.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,u!==ah&&(n=Error(a(422),{cause:u}),xo(Lr(n,o)))):(u!==ah&&(i=Error(a(423),{cause:u}),xo(Lr(i,o))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=Lr(u,o),g=Mh(n.stateNode,u,g),Vh(n,g),pn!==4&&(pn=2)),!1;var y=Error(a(520),{cause:u});if(y=Lr(y,o),zo===null?zo=[y]:zo.push(y),pn!==4&&(pn=2),i===null)return!0;u=Lr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=g&-g,o.lanes|=n,n=Mh(o.stateNode,u,n),Vh(o,n),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Sa===null||!Sa.has(y))))return o.flags|=65536,g&=-g,o.lanes|=g,g=Ty(g),Ry(g,n,o,u),Vh(o,g),!1}o=o.return}while(o!==null);return!1}var My=Error(a(461)),Pn=!1;function Fn(n,i,o,u){i.child=n===null?Px(i,null,o,u):li(i,n.child,o,u)}function Ay(n,i,o,u,g){o=o.render;var y=i.ref;if("ref"in u){var S={};for(var A in u)A!=="ref"&&(S[A]=u[A])}else S=u;return mi(i),u=hh(n,i,o,S,y,g),A=mh(),n!==null&&!Pn?(ph(n,i,g),$s(n,i,g)):(It&&A&&rh(i),i.flags|=1,Fn(n,i,u,g),i.child)}function ky(n,i,o,u,g){if(n===null){var y=o.type;return typeof y=="function"&&!Jh(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,Dy(n,i,y,u,g)):(n=Pu(o.type,null,u,i,i.mode,g),n.ref=i.ref,n.return=i,i.child=n)}if(y=n.child,!Uh(n,g)){var S=y.memoizedProps;if(o=o.compare,o=o!==null?o:mo,o(S,u)&&n.ref===i.ref)return $s(n,i,g)}return i.flags|=1,n=_a(y,u),n.ref=i.ref,n.return=i,i.child=n}function Dy(n,i,o,u,g){if(n!==null){var y=n.memoizedProps;if(mo(y,u)&&n.ref===i.ref)if(Pn=!1,i.pendingProps=u=y,Uh(n,g))(n.flags&131072)!==0&&(Pn=!0);else return i.lanes=n.lanes,$s(n,i,g)}return Ah(n,i,o,u,g)}function Oy(n,i,o){var u=i.pendingProps,g=u.children,y=(i.stateNode._pendingVisibility&2)!==0,S=n!==null?n.memoizedState:null;if(To(n,i),u.mode==="hidden"||y){if((i.flags&128)!==0){if(u=S!==null?S.baseLanes|o:o,n!==null){for(g=i.child=n.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;i.childLanes=y&~u}else i.childLanes=0,i.child=null;return Py(n,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&bu(i,S!==null?S.cachePool:null),S!==null?Lx(i,S):lh(),Ix(i);else return i.lanes=i.childLanes=536870912,Py(n,i,S!==null?S.baseLanes|o:o,o)}else S!==null?(bu(i,S.cachePool),Lx(i,S),ha(),i.memoizedState=null):(n!==null&&bu(i,null),lh(),ha());return Fn(n,i,g,o),i.child}function Py(n,i,o,u){var g=dh();return g=g===null?null:{parent:Mn._currentValue,pool:g},i.memoizedState={baseLanes:o,cachePool:g},n!==null&&bu(i,null),lh(),Ix(i),n!==null&&Ro(n,i,u,!0),null}function To(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(n===null||n.ref!==o)&&(i.flags|=2097664)}}function Ah(n,i,o,u,g){return mi(i),o=hh(n,i,o,u,void 0,g),u=mh(),n!==null&&!Pn?(ph(n,i,g),$s(n,i,g)):(It&&u&&rh(i),i.flags|=1,Fn(n,i,o,g),i.child)}function Ly(n,i,o,u,g,y){return mi(i),i.updateQueue=null,o=Hx(i,u,o,g),Bx(n),u=mh(),n!==null&&!Pn?(ph(n,i,y),$s(n,i,y)):(It&&u&&rh(i),i.flags|=1,Fn(n,i,o,y),i.child)}function Iy(n,i,o,u,g){if(mi(i),i.stateNode===null){var y=Gi,S=o.contextType;typeof S=="object"&&S!==null&&(y=Wn(S)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Rh,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},qh(i),S=o.contextType,y.context=typeof S=="object"&&S!==null?Wn(S):Gi,y.state=i.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(Th(i,o,S,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&Rh.enqueueReplaceState(y,y.state,null),ko(i,u,y,g),Ao(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){y=i.stateNode;var A=i.memoizedProps,z=fi(o,A);y.props=z;var Z=y.context,me=o.contextType;S=Gi,typeof me=="object"&&me!==null&&(S=Wn(me));var je=o.getDerivedStateFromProps;me=typeof je=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,me||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||Z!==S)&&_y(i,y,u,S),va=!1;var oe=i.memoizedState;y.state=oe,ko(i,u,y,g),Ao(),Z=i.memoizedState,A||oe!==Z||va?(typeof je=="function"&&(Th(i,o,je,u),Z=i.memoizedState),(z=va||jy(i,o,z,u,oe,Z,S))?(me||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Z),y.props=u,y.state=Z,y.context=S,u=z):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,Fh(n,i),S=i.memoizedProps,me=fi(o,S),y.props=me,je=i.pendingProps,oe=y.context,Z=o.contextType,z=Gi,typeof Z=="object"&&Z!==null&&(z=Wn(Z)),A=o.getDerivedStateFromProps,(Z=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==je||oe!==z)&&_y(i,y,u,z),va=!1,oe=i.memoizedState,y.state=oe,ko(i,u,y,g),Ao();var he=i.memoizedState;S!==je||oe!==he||va||n!==null&&n.dependencies!==null&&Au(n.dependencies)?(typeof A=="function"&&(Th(i,o,A,u),he=i.memoizedState),(me=va||jy(i,o,me,u,oe,he,z)||n!==null&&n.dependencies!==null&&Au(n.dependencies))?(Z||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,he,z),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,he,z)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&oe===n.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&oe===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=he),y.props=u,y.state=he,y.context=z,u=me):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&oe===n.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&oe===n.memoizedState||(i.flags|=1024),u=!1)}return y=u,To(n,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,n!==null&&u?(i.child=li(i,n.child,null,g),i.child=li(i,null,o,g)):Fn(n,i,o,g),i.memoizedState=y.state,n=i.child):n=$s(n,i,g),n}function zy(n,i,o,u){return vo(),i.flags|=256,Fn(n,i,o,u),i.child}var kh={dehydrated:null,treeContext:null,retryLane:0};function Dh(n){return{baseLanes:n,cachePool:$x()}}function Oh(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=qr),n}function Uy(n,i,o){var u=i.pendingProps,g=!1,y=(i.flags&128)!==0,S;if((S=y)||(S=n!==null&&n.memoizedState===null?!1:(Rn.current&2)!==0),S&&(g=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,n===null){if(It){if(g?fa(i):ha(),It){var A=qn,z;if(z=A){e:{for(z=A,A=hs;z.nodeType!==8;){if(!A){A=null;break e}if(z=Jr(z.nextSibling),z===null){A=null;break e}}A=z}A!==null?(i.memoizedState={dehydrated:A,treeContext:si!==null?{id:Ls,overflow:Is}:null,retryLane:536870912},z=Hr(18,null,null,0),z.stateNode=A,z.return=i,i.child=z,rr=i,qn=null,z=!0):z=!1}z||ii(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return A.data==="$!"?i.lanes=16:i.lanes=536870912,null;zs(i)}return A=u.children,u=u.fallback,g?(ha(),g=i.mode,A=Lh({mode:"hidden",children:A},g),u=gi(u,g,o,null),A.return=i,u.return=i,A.sibling=u,i.child=A,g=i.child,g.memoizedState=Dh(o),g.childLanes=Oh(n,S,o),i.memoizedState=kh,u):(fa(i),Ph(i,A))}if(z=n.memoizedState,z!==null&&(A=z.dehydrated,A!==null)){if(y)i.flags&256?(fa(i),i.flags&=-257,i=Ih(n,i,o)):i.memoizedState!==null?(ha(),i.child=n.child,i.flags|=128,i=null):(ha(),g=u.fallback,A=i.mode,u=Lh({mode:"visible",children:u.children},A),g=gi(g,A,o,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,li(i,n.child,null,o),u=i.child,u.memoizedState=Dh(o),u.childLanes=Oh(n,S,o),i.memoizedState=kh,i=g);else if(fa(i),A.data==="$!"){if(S=A.nextSibling&&A.nextSibling.dataset,S)var Z=S.dgst;S=Z,u=Error(a(419)),u.stack="",u.digest=S,xo({value:u,source:null,stack:null}),i=Ih(n,i,o)}else if(Pn||Ro(n,i,o,!1),S=(o&n.childLanes)!==0,Pn||S){if(S=en,S!==null){if(u=o&-o,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(S.suspendedLanes|o))!==0?0:u,u!==0&&u!==z.retryLane)throw z.retryLane=u,da(n,u),sr(S,n,u),My}A.data==="$?"||dm(),i=Ih(n,i,o)}else A.data==="$?"?(i.flags|=128,i.child=n.child,i=B2.bind(null,n),A._reactRetry=i,i=null):(n=z.treeContext,qn=Jr(A.nextSibling),rr=i,It=!0,Qr=null,hs=!1,n!==null&&(Ir[zr++]=Ls,Ir[zr++]=Is,Ir[zr++]=si,Ls=n.id,Is=n.overflow,si=i),i=Ph(i,u.children),i.flags|=4096);return i}return g?(ha(),g=u.fallback,A=i.mode,z=n.child,Z=z.sibling,u=_a(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&31457280,Z!==null?g=_a(Z,g):(g=gi(g,A,o,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,A=n.child.memoizedState,A===null?A=Dh(o):(z=A.cachePool,z!==null?(Z=Mn._currentValue,z=z.parent!==Z?{parent:Z,pool:Z}:z):z=$x(),A={baseLanes:A.baseLanes|o,cachePool:z}),g.memoizedState=A,g.childLanes=Oh(n,S,o),i.memoizedState=kh,u):(fa(i),o=n.child,n=o.sibling,o=_a(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(S=i.deletions,S===null?(i.deletions=[n],i.flags|=16):S.push(n)),i.child=o,i.memoizedState=null,o)}function Ph(n,i){return i=Lh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Lh(n,i){return db(n,i,0,null)}function Ih(n,i,o){return li(i,n.child,null,o),n=Ph(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function $y(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Bh(n.return,i,o)}function zh(n,i,o,u,g){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=o,y.tailMode=g)}function By(n,i,o){var u=i.pendingProps,g=u.revealOrder,y=u.tail;if(Fn(n,i,u.children,o),u=Rn.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$y(n,o,i);else if(n.tag===19)$y(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(de(Rn,u),g){case"forwards":for(o=i.child,g=null;o!==null;)n=o.alternate,n!==null&&yu(n)===null&&(g=o),o=o.sibling;o=g,o===null?(g=i.child,i.child=null):(g=o.sibling,o.sibling=null),zh(i,!1,g,o,y);break;case"backwards":for(o=null,g=i.child,i.child=null;g!==null;){if(n=g.alternate,n!==null&&yu(n)===null){i.child=g;break}n=g.sibling,g.sibling=o,o=g,g=n}zh(i,!0,o,null,y);break;case"together":zh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function $s(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Na|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Ro(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,o=_a(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=_a(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Uh(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Au(n)))}function C2(n,i,o){switch(i.tag){case 3:ve(i,i.stateNode.containerInfo),ga(i,Mn,n.memoizedState.cache),vo();break;case 27:case 5:Pe(i);break;case 4:ve(i,i.stateNode.containerInfo);break;case 10:ga(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(fa(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Uy(n,i,o):(fa(i),n=$s(n,i,o),n!==null?n.sibling:null);fa(i);break;case 19:var g=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Ro(n,i,o,!1),u=(o&i.childLanes)!==0),g){if(u)return By(n,i,o);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),de(Rn,Rn.current),u)break;return null;case 22:case 23:return i.lanes=0,Oy(n,i,o);case 24:ga(i,Mn,n.memoizedState.cache)}return $s(n,i,o)}function Hy(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Pn=!0;else{if(!Uh(n,o)&&(i.flags&128)===0)return Pn=!1,C2(n,i,o);Pn=(n.flags&131072)!==0}else Pn=!1,It&&(i.flags&1048576)!==0&&Ex(i,mu,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,g=u._init;if(u=g(u._payload),i.type=u,typeof u=="function")Jh(u)?(n=fi(u,n),i.tag=1,i=Iy(null,i,u,n,o)):(i.tag=0,i=Ah(null,i,u,n,o));else{if(u!=null){if(g=u.$$typeof,g===j){i.tag=11,i=Ay(null,i,u,n,o);break e}else if(g===C){i.tag=14,i=ky(null,i,u,n,o);break e}}throw i=$(u)||u,Error(a(306,i,""))}}return i;case 0:return Ah(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,g=fi(u,i.pendingProps),Iy(n,i,u,g,o);case 3:e:{if(ve(i,i.stateNode.containerInfo),n===null)throw Error(a(387));var y=i.pendingProps;g=i.memoizedState,u=g.element,Fh(n,i),ko(i,y,null,o);var S=i.memoizedState;if(y=S.cache,ga(i,Mn,y),y!==g.cache&&Hh(i,[Mn],o,!0),Ao(),y=S.element,g.isDehydrated)if(g={element:y,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=zy(n,i,y,o);break e}else if(y!==u){u=Lr(Error(a(424)),i),xo(u),i=zy(n,i,y,o);break e}else for(qn=Jr(i.stateNode.containerInfo.firstChild),rr=i,It=!0,Qr=null,hs=!0,o=Px(i,null,y,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(vo(),y===u){i=$s(n,i,o);break e}Fn(n,i,y,o)}i=i.child}return i;case 26:return To(n,i),n===null?(o=Vb(i.type,null,i.pendingProps,null))?i.memoizedState=o:It||(o=i.type,n=i.pendingProps,u=Gu(at.current).createElement(o),u[on]=i,u[wn]=n,Vn(u,o,n),jn(u),i.stateNode=u):i.memoizedState=Vb(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Pe(i),n===null&&It&&(u=i.stateNode=Hb(i.type,i.pendingProps,at.current),rr=i,hs=!0,qn=Jr(u.firstChild)),u=i.pendingProps.children,n!==null||It?Fn(n,i,u,o):i.child=li(i,null,u,o),To(n,i),i.child;case 5:return n===null&&It&&((g=u=qn)&&(u=rC(u,i.type,i.pendingProps,hs),u!==null?(i.stateNode=u,rr=i,qn=Jr(u.firstChild),hs=!1,g=!0):g=!1),g||ii(i)),Pe(i),g=i.type,y=i.pendingProps,S=n!==null?n.memoizedProps:null,u=y.children,Sm(g,y)?u=null:S!==null&&Sm(g,S)&&(i.flags|=32),i.memoizedState!==null&&(g=hh(n,i,b2,null,null,o),Go._currentValue=g),To(n,i),Fn(n,i,u,o),i.child;case 6:return n===null&&It&&((n=o=qn)&&(o=sC(o,i.pendingProps,hs),o!==null?(i.stateNode=o,rr=i,qn=null,n=!0):n=!1),n||ii(i)),null;case 13:return Uy(n,i,o);case 4:return ve(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=li(i,null,u,o):Fn(n,i,u,o),i.child;case 11:return Ay(n,i,i.type,i.pendingProps,o);case 7:return Fn(n,i,i.pendingProps,o),i.child;case 8:return Fn(n,i,i.pendingProps.children,o),i.child;case 12:return Fn(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,ga(i,i.type,u.value),Fn(n,i,u.children,o),i.child;case 9:return g=i.type._context,u=i.pendingProps.children,mi(i),g=Wn(g),u=u(g),i.flags|=1,Fn(n,i,u,o),i.child;case 14:return ky(n,i,i.type,i.pendingProps,o);case 15:return Dy(n,i,i.type,i.pendingProps,o);case 19:return By(n,i,o);case 22:return Oy(n,i,o);case 24:return mi(i),u=Wn(Mn),n===null?(g=dh(),g===null&&(g=en,y=ch(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=o),g=y),i.memoizedState={parent:u,cache:g},qh(i),ga(i,Mn,g)):((n.lanes&o)!==0&&(Fh(n,i),ko(i,null,null,o),Ao()),g=n.memoizedState,y=i.memoizedState,g.parent!==u?(g={parent:u,cache:u},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),ga(i,Mn,u)):(u=y.cache,ga(i,Mn,u),u!==g.cache&&Hh(i,[Mn],o,!0))),Fn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}var $h=ae(null),hi=null,Bs=null;function ga(n,i,o){de($h,i._currentValue),i._currentValue=o}function Hs(n){n._currentValue=$h.current,ge($h)}function Bh(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function Hh(n,i,o,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var y=g.dependencies;if(y!==null){var S=g.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=g;for(var z=0;z<i.length;z++)if(A.context===i[z]){y.lanes|=o,A=y.alternate,A!==null&&(A.lanes|=o),Bh(y.return,o,n),u||(S=null);break e}y=A.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(a(341));S.lanes|=o,y=S.alternate,y!==null&&(y.lanes|=o),Bh(S,o,n),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===n){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function Ro(n,i,o,u){n=null;for(var g=i,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(a(387));if(S=S.memoizedProps,S!==null){var A=g.type;br(g.pendingProps.value,S.value)||(n!==null?n.push(A):n=[A])}}else if(g===nt.current){if(S=g.alternate,S===null)throw Error(a(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Go):n=[Go])}g=g.return}n!==null&&Hh(i,n,o,u),i.flags|=262144}function Au(n){for(n=n.firstContext;n!==null;){if(!br(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function mi(n){hi=n,Bs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Wn(n){return qy(hi,n)}function ku(n,i){return hi===null&&mi(n),qy(n,i)}function qy(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Bs===null){if(n===null)throw Error(a(308));Bs=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Bs=Bs.next=i;return o}var va=!1;function qh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fh(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function xa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ya(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(dn&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,i=fu(n),Nx(n,null,o),i}return du(n,u,i,o),fu(n)}function Mo(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194176)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,ht(n,o)}}function Vh(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?g=y=S:y=y.next=S,o=o.next}while(o!==null);y===null?g=y=i:y=y.next=i}else g=y=i;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Yh=!1;function Ao(){if(Yh){var n=Ji;if(n!==null)throw n}}function ko(n,i,o,u){Yh=!1;var g=n.updateQueue;va=!1;var y=g.firstBaseUpdate,S=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var z=A,Z=z.next;z.next=null,S===null?y=Z:S.next=Z,S=z;var me=n.alternate;me!==null&&(me=me.updateQueue,A=me.lastBaseUpdate,A!==S&&(A===null?me.firstBaseUpdate=Z:A.next=Z,me.lastBaseUpdate=z))}if(y!==null){var je=g.baseState;S=0,me=Z=z=null,A=y;do{var oe=A.lane&-536870913,he=oe!==A.lane;if(he?(Tt&oe)===oe:(u&oe)===oe){oe!==0&&oe===Zi&&(Yh=!0),me!==null&&(me=me.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var He=n,rt=A;oe=i;var gn=o;switch(rt.tag){case 1:if(He=rt.payload,typeof He=="function"){je=He.call(gn,je,oe);break e}je=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=rt.payload,oe=typeof He=="function"?He.call(gn,je,oe):He,oe==null)break e;je=Y({},je,oe);break e;case 2:va=!0}}oe=A.callback,oe!==null&&(n.flags|=64,he&&(n.flags|=8192),he=g.callbacks,he===null?g.callbacks=[oe]:he.push(oe))}else he={lane:oe,tag:A.tag,payload:A.payload,callback:A.callback,next:null},me===null?(Z=me=he,z=je):me=me.next=he,S|=oe;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;he=A,A=he.next,he.next=null,g.lastBaseUpdate=he,g.shared.pending=null}}while(!0);me===null&&(z=je),g.baseState=z,g.firstBaseUpdate=Z,g.lastBaseUpdate=me,y===null&&(g.shared.lanes=0),Na|=S,n.lanes=S,n.memoizedState=je}}function Fy(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function Vy(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Fy(o[n],i)}function Do(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&n)===n){u=void 0;var y=o.create,S=o.inst;u=y(),S.destroy=u}o=o.next}while(o!==g)}}catch(A){Kt(i,i.return,A)}}function ba(n,i,o){try{var u=i.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&n)===n){var S=u.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,g=i;var z=o;try{A()}catch(Z){Kt(g,z,Z)}}}u=u.next}while(u!==y)}}catch(Z){Kt(i,i.return,Z)}}function Yy(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Vy(i,o)}catch(u){Kt(n,n.return,u)}}}function Gy(n,i,o){o.props=fi(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Kt(n,i,u)}}function pi(n,i){try{var o=n.ref;if(o!==null){var u=n.stateNode;switch(n.tag){case 26:case 27:case 5:var g=u;break;default:g=u}typeof o=="function"?n.refCleanup=o(g):o.current=g}}catch(y){Kt(n,i,y)}}function wr(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){Kt(n,i,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){Kt(n,i,g)}else o.current=null}function Wy(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){Kt(n,n.return,g)}}function Xy(n,i,o){try{var u=n.stateNode;Z2(u,n.type,o,i),u[wn]=i}catch(g){Kt(n,n.return,g)}}function Ky(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Gh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ky(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wh(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(n,i):o.insertBefore(n,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(n,o)):(i=o,i.appendChild(n)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Yu));else if(u!==4&&u!==27&&(n=n.child,n!==null))for(Wh(n,i,o),n=n.sibling;n!==null;)Wh(n,i,o),n=n.sibling}function Du(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&u!==27&&(n=n.child,n!==null))for(Du(n,i,o),n=n.sibling;n!==null;)Du(n,i,o),n=n.sibling}var qs=!1,mn=!1,Xh=!1,Qy=typeof WeakSet=="function"?WeakSet:Set,Ln=null,Zy=!1;function T2(n,i){if(n=n.containerInfo,_m=Ju,n=px(n),Qf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var S=0,A=-1,z=-1,Z=0,me=0,je=n,oe=null;t:for(;;){for(var he;je!==o||g!==0&&je.nodeType!==3||(A=S+g),je!==y||u!==0&&je.nodeType!==3||(z=S+u),je.nodeType===3&&(S+=je.nodeValue.length),(he=je.firstChild)!==null;)oe=je,je=he;for(;;){if(je===n)break t;if(oe===o&&++Z===g&&(A=S),oe===y&&++me===u&&(z=S),(he=je.nextSibling)!==null)break;je=oe,oe=je.parentNode}je=he}o=A===-1||z===-1?null:{start:A,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(Nm={focusedElem:n,selectionRange:o},Ju=!1,Ln=i;Ln!==null;)if(i=Ln,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ln=n;else for(;Ln!==null;){switch(i=Ln,y=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,o=i,g=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var He=fi(o.type,g,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(He,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(rt){Kt(o,o.return,rt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Tm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Tm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,Ln=n;break}Ln=i.return}return He=Zy,Zy=!1,He}function Jy(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Vs(n,o),u&4&&Do(5,o);break;case 1:if(Vs(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(A){Kt(o,o.return,A)}else{var g=fi(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(g,i,n.__reactInternalSnapshotBeforeUpdate)}catch(A){Kt(o,o.return,A)}}u&64&&Yy(o),u&512&&pi(o,o.return);break;case 3:if(Vs(n,o),u&64&&(u=o.updateQueue,u!==null)){if(n=null,o.child!==null)switch(o.child.tag){case 27:case 5:n=o.child.stateNode;break;case 1:n=o.child.stateNode}try{Vy(u,n)}catch(A){Kt(o,o.return,A)}}break;case 26:Vs(n,o),u&512&&pi(o,o.return);break;case 27:case 5:Vs(n,o),i===null&&u&4&&Wy(o),u&512&&pi(o,o.return);break;case 12:Vs(n,o);break;case 13:Vs(n,o),u&4&&nb(n,o);break;case 22:if(g=o.memoizedState!==null||qs,!g){i=i!==null&&i.memoizedState!==null||mn;var y=qs,S=mn;qs=g,(mn=i)&&!S?wa(n,o,(o.subtreeFlags&8772)!==0):Vs(n,o),qs=y,mn=S}u&512&&(o.memoizedProps.mode==="manual"?pi(o,o.return):wr(o,o.return));break;default:Vs(n,o)}}function eb(n){var i=n.alternate;i!==null&&(n.alternate=null,eb(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&cr(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Sn=null,jr=!1;function Fs(n,i,o){for(o=o.child;o!==null;)tb(n,i,o),o=o.sibling}function tb(n,i,o){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Jt,o)}catch{}switch(o.tag){case 26:mn||wr(o,i),Fs(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:mn||wr(o,i);var u=Sn,g=jr;for(Sn=o.stateNode,Fs(n,i,o),o=o.stateNode,i=o.attributes;i.length;)o.removeAttributeNode(i[0]);cr(o),Sn=u,jr=g;break;case 5:mn||wr(o,i);case 6:g=Sn;var y=jr;if(Sn=null,Fs(n,i,o),Sn=g,jr=y,Sn!==null)if(jr)try{n=Sn,u=o.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)}catch(S){Kt(o,i,S)}else try{Sn.removeChild(o.stateNode)}catch(S){Kt(o,i,S)}break;case 18:Sn!==null&&(jr?(i=Sn,o=o.stateNode,i.nodeType===8?Cm(i.parentNode,o):i.nodeType===1&&Cm(i,o),Qo(i)):Cm(Sn,o.stateNode));break;case 4:u=Sn,g=jr,Sn=o.stateNode.containerInfo,jr=!0,Fs(n,i,o),Sn=u,jr=g;break;case 0:case 11:case 14:case 15:mn||ba(2,o,i),mn||ba(4,o,i),Fs(n,i,o);break;case 1:mn||(wr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Gy(o,i,u)),Fs(n,i,o);break;case 21:Fs(n,i,o);break;case 22:mn||wr(o,i),mn=(u=mn)||o.memoizedState!==null,Fs(n,i,o),mn=u;break;default:Fs(n,i,o)}}function nb(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Qo(n)}catch(o){Kt(i,i.return,o)}}function R2(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Qy),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Qy),i;default:throw Error(a(435,n.tag))}}function Kh(n,i){var o=R2(n);i.forEach(function(u){var g=H2.bind(null,n,u);o.has(u)||(o.add(u),u.then(g,g))})}function $r(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],y=n,S=i,A=S;e:for(;A!==null;){switch(A.tag){case 27:case 5:Sn=A.stateNode,jr=!1;break e;case 3:Sn=A.stateNode.containerInfo,jr=!0;break e;case 4:Sn=A.stateNode.containerInfo,jr=!0;break e}A=A.return}if(Sn===null)throw Error(a(160));tb(y,S,g),Sn=null,jr=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)rb(i,n),i=i.sibling}var Zr=null;function rb(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:$r(i,n),Br(n),u&4&&(ba(3,n,n.return),Do(3,n),ba(5,n,n.return));break;case 1:$r(i,n),Br(n),u&512&&(mn||o===null||wr(o,o.return)),u&64&&qs&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=Zr;if($r(i,n),Br(n),u&512&&(mn||o===null||wr(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Hn]||y[on]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),Vn(y,u,o),y[on]=n,jn(y),u=y;break e;case"link":var S=Wb("link","href",g).get(u+(o.href||""));if(S){for(var A=0;A<S.length;A++)if(y=S[A],y.getAttribute("href")===(o.href==null?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(A,1);break t}}y=g.createElement(u),Vn(y,u,o),g.head.appendChild(y);break;case"meta":if(S=Wb("meta","content",g).get(u+(o.content||""))){for(A=0;A<S.length;A++)if(y=S[A],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(A,1);break t}}y=g.createElement(u),Vn(y,u,o),g.head.appendChild(y);break;default:throw Error(a(468,u))}y[on]=n,jn(y),u=y}n.stateNode=u}else Xb(g,n.type,n.stateNode);else n.stateNode=Gb(g,u,n.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?Xb(g,n.type,n.stateNode):Gb(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Xy(n,n.memoizedProps,o.memoizedProps)}break;case 27:if(u&4&&n.alternate===null){g=n.stateNode,y=n.memoizedProps;try{for(var z=g.firstChild;z;){var Z=z.nextSibling,me=z.nodeName;z[Hn]||me==="HEAD"||me==="BODY"||me==="SCRIPT"||me==="STYLE"||me==="LINK"&&z.rel.toLowerCase()==="stylesheet"||g.removeChild(z),z=Z}for(var je=n.type,oe=g.attributes;oe.length;)g.removeAttributeNode(oe[0]);Vn(g,je,y),g[on]=n,g[wn]=y}catch(He){Kt(n,n.return,He)}}case 5:if($r(i,n),Br(n),u&512&&(mn||o===null||wr(o,o.return)),n.flags&32){g=n.stateNode;try{$i(g,"")}catch(He){Kt(n,n.return,He)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,Xy(n,g,o!==null?o.memoizedProps:g)),u&1024&&(Xh=!0);break;case 6:if($r(i,n),Br(n),u&4){if(n.stateNode===null)throw Error(a(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(He){Kt(n,n.return,He)}}break;case 3:if(Ku=null,g=Zr,Zr=Wu(i.containerInfo),$r(i,n),Zr=g,Br(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Qo(i.containerInfo)}catch(He){Kt(n,n.return,He)}Xh&&(Xh=!1,sb(n));break;case 4:u=Zr,Zr=Wu(n.stateNode.containerInfo),$r(i,n),Br(n),Zr=u;break;case 12:$r(i,n),Br(n);break;case 13:$r(i,n),Br(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(am=Nt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kh(n,u)));break;case 22:if(u&512&&(mn||o===null||wr(o,o.return)),z=n.memoizedState!==null,Z=o!==null&&o.memoizedState!==null,me=qs,je=mn,qs=me||z,mn=je||Z,$r(i,n),mn=je,qs=me,Br(n),i=n.stateNode,i._current=n,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,u&8192&&(i._visibility=z?i._visibility&-2:i._visibility|1,z&&(i=qs||mn,o===null||Z||i||rl(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(o=null,i=n;;){if(i.tag===5||i.tag===26||i.tag===27){if(o===null){Z=o=i;try{if(g=Z.stateNode,z)y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=Z.stateNode,A=Z.memoizedProps.style;var he=A!=null&&A.hasOwnProperty("display")?A.display:null;S.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(He){Kt(Z,Z.return,He)}}}else if(i.tag===6){if(o===null){Z=i;try{Z.stateNode.nodeValue=z?"":Z.memoizedProps}catch(He){Kt(Z,Z.return,He)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Kh(n,o))));break;case 19:$r(i,n),Br(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kh(n,u)));break;case 21:break;default:$r(i,n),Br(n)}}function Br(n){var i=n.flags;if(i&2){try{if(n.tag!==27){e:{for(var o=n.return;o!==null;){if(Ky(o)){var u=o;break e}o=o.return}throw Error(a(160))}switch(u.tag){case 27:var g=u.stateNode,y=Gh(n);Du(n,y,g);break;case 5:var S=u.stateNode;u.flags&32&&($i(S,""),u.flags&=-33);var A=Gh(n);Du(n,A,S);break;case 3:case 4:var z=u.stateNode.containerInfo,Z=Gh(n);Wh(n,Z,z);break;default:throw Error(a(161))}}}catch(me){Kt(n,n.return,me)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function sb(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;sb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Vs(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Jy(n,i.alternate,i),i=i.sibling}function rl(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:ba(4,i,i.return),rl(i);break;case 1:wr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Gy(i,i.return,o),rl(i);break;case 26:case 27:case 5:wr(i,i.return),rl(i);break;case 22:wr(i,i.return),i.memoizedState===null&&rl(i);break;default:rl(i)}n=n.sibling}}function wa(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,g=n,y=i,S=y.flags;switch(y.tag){case 0:case 11:case 15:wa(g,y,o),Do(4,y);break;case 1:if(wa(g,y,o),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Z){Kt(u,u.return,Z)}if(u=y,g=u.updateQueue,g!==null){var A=u.stateNode;try{var z=g.shared.hiddenCallbacks;if(z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<z.length;g++)Fy(z[g],A)}catch(Z){Kt(u,u.return,Z)}}o&&S&64&&Yy(y),pi(y,y.return);break;case 26:case 27:case 5:wa(g,y,o),o&&u===null&&S&4&&Wy(y),pi(y,y.return);break;case 12:wa(g,y,o);break;case 13:wa(g,y,o),o&&S&4&&nb(g,y);break;case 22:y.memoizedState===null&&wa(g,y,o),pi(y,y.return);break;default:wa(g,y,o)}i=i.sibling}}function Qh(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&_o(o))}function Zh(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&_o(n))}function ja(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ab(n,i,o,u),i=i.sibling}function ab(n,i,o,u){var g=i.flags;switch(i.tag){case 0:case 11:case 15:ja(n,i,o,u),g&2048&&Do(9,i);break;case 3:ja(n,i,o,u),g&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&_o(n)));break;case 12:if(g&2048){ja(n,i,o,u),n=i.stateNode;try{var y=i.memoizedProps,S=y.id,A=y.onPostCommit;typeof A=="function"&&A(S,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(z){Kt(i,i.return,z)}}else ja(n,i,o,u);break;case 23:break;case 22:y=i.stateNode,i.memoizedState!==null?y._visibility&4?ja(n,i,o,u):Oo(n,i):y._visibility&4?ja(n,i,o,u):(y._visibility|=4,sl(n,i,o,u,(i.subtreeFlags&10256)!==0)),g&2048&&Qh(i.alternate,i);break;case 24:ja(n,i,o,u),g&2048&&Zh(i.alternate,i);break;default:ja(n,i,o,u)}}function sl(n,i,o,u,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var y=n,S=i,A=o,z=u,Z=S.flags;switch(S.tag){case 0:case 11:case 15:sl(y,S,A,z,g),Do(8,S);break;case 23:break;case 22:var me=S.stateNode;S.memoizedState!==null?me._visibility&4?sl(y,S,A,z,g):Oo(y,S):(me._visibility|=4,sl(y,S,A,z,g)),g&&Z&2048&&Qh(S.alternate,S);break;case 24:sl(y,S,A,z,g),g&&Z&2048&&Zh(S.alternate,S);break;default:sl(y,S,A,z,g)}i=i.sibling}}function Oo(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,g=u.flags;switch(u.tag){case 22:Oo(o,u),g&2048&&Qh(u.alternate,u);break;case 24:Oo(o,u),g&2048&&Zh(u.alternate,u);break;default:Oo(o,u)}i=i.sibling}}var Po=8192;function al(n){if(n.subtreeFlags&Po)for(n=n.child;n!==null;)ib(n),n=n.sibling}function ib(n){switch(n.tag){case 26:al(n),n.flags&Po&&n.memoizedState!==null&&vC(Zr,n.memoizedState,n.memoizedProps);break;case 5:al(n);break;case 3:case 4:var i=Zr;Zr=Wu(n.stateNode.containerInfo),al(n),Zr=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Po,Po=16777216,al(n),Po=i):al(n));break;default:al(n)}}function lb(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Lo(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ln=u,cb(u,n)}lb(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ob(n),n=n.sibling}function ob(n){switch(n.tag){case 0:case 11:case 15:Lo(n),n.flags&2048&&ba(9,n,n.return);break;case 3:Lo(n);break;case 12:Lo(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&4&&(n.return===null||n.return.tag!==13)?(i._visibility&=-5,Ou(n)):Lo(n);break;default:Lo(n)}}function Ou(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ln=u,cb(u,n)}lb(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:ba(8,i,i.return),Ou(i);break;case 22:o=i.stateNode,o._visibility&4&&(o._visibility&=-5,Ou(i));break;default:Ou(i)}n=n.sibling}}function cb(n,i){for(;Ln!==null;){var o=Ln;switch(o.tag){case 0:case 11:case 15:ba(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:_o(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ln=u;else e:for(o=n;Ln!==null;){u=Ln;var g=u.sibling,y=u.return;if(eb(u),u===o){Ln=null;break e}if(g!==null){g.return=y,Ln=g;break e}Ln=y}}}function M2(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(n,i,o,u){return new M2(n,i,o,u)}function Jh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function _a(n,i){var o=n.alternate;return o===null?(o=Hr(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&31457280,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function ub(n,i){n.flags&=31457282;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Pu(n,i,o,u,g,y){var S=0;if(u=n,typeof n=="function")Jh(n)&&(S=1);else if(typeof n=="string")S=pC(n,o,Se.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case h:return gi(o.children,g,y,i);case p:S=8,g|=24;break;case v:return n=Hr(12,o,i,g|2),n.elementType=v,n.lanes=y,n;case _:return n=Hr(13,o,i,g),n.elementType=_,n.lanes=y,n;case N:return n=Hr(19,o,i,g),n.elementType=N,n.lanes=y,n;case T:return db(o,g,y,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:case w:S=10;break e;case b:S=9;break e;case j:S=11;break e;case C:S=14;break e;case E:S=16,u=null;break e}S=29,o=Error(a(130,n===null?"null":typeof n,"")),u=null}return i=Hr(S,o,i,g),i.elementType=n,i.type=u,i.lanes=y,i}function gi(n,i,o,u){return n=Hr(7,n,u,i),n.lanes=o,n}function db(n,i,o,u){n=Hr(22,n,u,i),n.elementType=T,n.lanes=o;var g={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=g._current;if(y===null)throw Error(a(456));if((g._pendingVisibility&2)===0){var S=da(y,2);S!==null&&(g._pendingVisibility|=2,sr(S,y,2))}},attach:function(){var y=g._current;if(y===null)throw Error(a(456));if((g._pendingVisibility&2)!==0){var S=da(y,2);S!==null&&(g._pendingVisibility&=-3,sr(S,y,2))}}};return n.stateNode=g,n}function em(n,i,o){return n=Hr(6,n,null,i),n.lanes=o,n}function tm(n,i,o){return i=Hr(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Ys(n){n.flags|=4}function fb(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Kb(i)){if(i=Ur.current,i!==null&&((Tt&4194176)===Tt?ms!==null:(Tt&62914560)!==Tt&&(Tt&536870912)===0||i!==ms))throw bo=ih,Rx;n.flags|=8192}}function Lu(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?qe():536870912,n.lanes|=i,ll|=i)}function Io(n,i){if(!It)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function un(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var g=n.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&31457280,u|=g.flags&31457280,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function A2(n,i,o){var u=i.pendingProps;switch(sh(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(i),null;case 1:return un(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Hs(Mn),pe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(go(i)?Ys(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Qr!==null&&(cm(Qr),Qr=null))),un(i),null;case 26:return o=i.memoizedState,n===null?(Ys(i),o!==null?(un(i),fb(i,o)):(un(i),i.flags&=-16777217)):o?o!==n.memoizedState?(Ys(i),un(i),fb(i,o)):(un(i),i.flags&=-16777217):(n.memoizedProps!==u&&Ys(i),un(i),i.flags&=-16777217),null;case 27:be(i),o=at.current;var g=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ys(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return un(i),null}n=Se.current,go(i)?Cx(i):(n=Hb(g,u,o),i.stateNode=n,Ys(i))}return un(i),null;case 5:if(be(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ys(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return un(i),null}if(n=Se.current,go(i))Cx(i);else{switch(g=Gu(at.current),n){case 1:n=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=g.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?g.createElement(o,{is:u.is}):g.createElement(o)}}n[on]=i,n[wn]=u;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)n.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=n;e:switch(Vn(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ys(i)}}return un(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&Ys(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(n=at.current,go(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,g=rr,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[on]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Lb(n.nodeValue,o)),n||ii(i)}else n=Gu(n).createTextNode(u),n[on]=i,i.stateNode=n}return un(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=go(i),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(a(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(a(317));g[on]=i}else vo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;un(i),g=!1}else Qr!==null&&(cm(Qr),Qr=null),g=!0;if(!g)return i.flags&256?(zs(i),i):(zs(i),null)}if(zs(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=i.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var y=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),Lu(i,i.updateQueue),un(i),null;case 4:return pe(),n===null&&bm(i.stateNode.containerInfo),un(i),null;case 10:return Hs(i.type),un(i),null;case 19:if(ge(Rn),g=i.memoizedState,g===null)return un(i),null;if(u=(i.flags&128)!==0,y=g.rendering,y===null)if(u)Io(g,!1);else{if(pn!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(y=yu(n),y!==null){for(i.flags|=128,Io(g,!1),n=y.updateQueue,i.updateQueue=n,Lu(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)ub(o,n),o=o.sibling;return de(Rn,Rn.current&1|2),i.child}n=n.sibling}g.tail!==null&&Nt()>Iu&&(i.flags|=128,u=!0,Io(g,!1),i.lanes=4194304)}else{if(!u)if(n=yu(y),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Lu(i,n),Io(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!It)return un(i),null}else 2*Nt()-g.renderingStartTime>Iu&&o!==536870912&&(i.flags|=128,u=!0,Io(g,!1),i.lanes=4194304);g.isBackwards?(y.sibling=i.child,i.child=y):(n=g.last,n!==null?n.sibling=y:i.child=y,g.last=y)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Nt(),i.sibling=null,n=Rn.current,de(Rn,u?n&1|2:n&1),i):(un(i),null);case 22:case 23:return zs(i),oh(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(un(i),i.subtreeFlags&6&&(i.flags|=8192)):un(i),o=i.updateQueue,o!==null&&Lu(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&ge(oi),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Hs(Mn),un(i),null;case 25:return null}throw Error(a(156,i.tag))}function k2(n,i){switch(sh(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Hs(Mn),pe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return be(i),null;case 13:if(zs(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));vo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ge(Rn),null;case 4:return pe(),null;case 10:return Hs(i.type),null;case 22:case 23:return zs(i),oh(),n!==null&&ge(oi),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Hs(Mn),null;case 25:return null;default:return null}}function hb(n,i){switch(sh(i),i.tag){case 3:Hs(Mn),pe();break;case 26:case 27:case 5:be(i);break;case 4:pe();break;case 13:zs(i);break;case 19:ge(Rn);break;case 10:Hs(i.type);break;case 22:case 23:zs(i),oh(),n!==null&&ge(oi);break;case 24:Hs(Mn)}}var D2={getCacheForType:function(n){var i=Wn(Mn),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},O2=typeof WeakMap=="function"?WeakMap:Map,dn=0,en=null,vt=null,Tt=0,tn=0,_r=null,Gs=!1,il=!1,nm=!1,Ws=0,pn=0,Na=0,vi=0,rm=0,qr=0,ll=0,zo=null,gs=null,sm=!1,am=0,Iu=1/0,zu=null,Sa=null,Uu=!1,xi=null,Uo=0,im=0,lm=null,$o=0,om=null;function Nr(){if((dn&2)!==0&&Tt!==0)return Tt&-Tt;if(I.T!==null){var n=Zi;return n!==0?n:gm()}return Mt()}function mb(){qr===0&&(qr=(Tt&536870912)===0||It?De():536870912);var n=Ur.current;return n!==null&&(n.flags|=32),qr}function sr(n,i,o){(n===en&&tn===2||n.cancelPendingCommit!==null)&&(ol(n,0),Xs(n,Tt,qr,!1)),Ye(n,o),((dn&2)===0||n!==en)&&(n===en&&((dn&2)===0&&(vi|=o),pn===4&&Xs(n,Tt,qr,!1)),vs(n))}function pb(n,i,o){if((dn&6)!==0)throw Error(a(327));var u=!o&&(i&60)===0&&(i&n.expiredLanes)===0||xe(n,i),g=u?I2(n,i):fm(n,i,!0),y=u;do{if(g===0){il&&!u&&Xs(n,i,0,!1);break}else if(g===6)Xs(n,i,0,!Gs);else{if(o=n.current.alternate,y&&!P2(o)){g=fm(n,i,!1),y=!1;continue}if(g===2){if(y=i,n.errorRecoveryDisabledLanes&y)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var A=n;g=zo;var z=A.current.memoizedState.isDehydrated;if(z&&(ol(A,S).flags|=256),S=fm(A,S,!1),S!==2){if(nm&&!z){A.errorRecoveryDisabledLanes|=y,vi|=y,g=4;break e}y=gs,gs=g,y!==null&&cm(y)}g=S}if(y=!1,g!==2)continue}}if(g===1){ol(n,0),Xs(n,i,0,!0);break}e:{switch(u=n,g){case 0:case 1:throw Error(a(345));case 4:if((i&4194176)===i){Xs(u,i,qr,!Gs);break e}break;case 2:gs=null;break;case 3:case 5:break;default:throw Error(a(329))}if(u.finishedWork=o,u.finishedLanes=i,(i&62914560)===i&&(y=am+300-Nt(),10<y)){if(Xs(u,i,qr,!Gs),J(u,0)!==0)break e;u.timeoutHandle=Ub(gb.bind(null,u,o,gs,zu,sm,i,qr,vi,ll,Gs,2,-0,0),y);break e}gb(u,o,gs,zu,sm,i,qr,vi,ll,Gs,0,-0,0)}}break}while(!0);vs(n)}function cm(n){gs===null?gs=n:gs.push.apply(gs,n)}function gb(n,i,o,u,g,y,S,A,z,Z,me,je,oe){var he=i.subtreeFlags;if((he&8192||(he&16785408)===16785408)&&(Yo={stylesheets:null,count:0,unsuspend:gC},ib(i),i=xC(),i!==null)){n.cancelPendingCommit=i(_b.bind(null,n,o,u,g,S,A,z,1,je,oe)),Xs(n,y,S,!Z);return}_b(n,o,u,g,S,A,z,me,je,oe)}function P2(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],y=g.getSnapshot;g=g.value;try{if(!br(y(),g))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Xs(n,i,o,u){i&=~rm,i&=~vi,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var g=i;0<g;){var y=31-hn(g),S=1<<y;u[y]=-1,g&=~S}o!==0&&ot(n,o,i)}function $u(){return(dn&6)===0?(Bo(0),!1):!0}function um(){if(vt!==null){if(tn===0)var n=vt.return;else n=vt,Bs=hi=null,gh(n),Ki=null,wo=0,n=vt;for(;n!==null;)hb(n.alternate,n),n=n.return;vt=null}}function ol(n,i){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,eC(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),um(),en=n,vt=o=_a(n.current,null),Tt=i,tn=0,_r=null,Gs=!1,il=xe(n,i),nm=!1,ll=qr=rm=vi=Na=pn=0,gs=zo=null,sm=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var g=31-hn(u),y=1<<g;i|=n[g],u&=~y}return Ws=i,uu(),o}function vb(n,i){mt=null,I.H=ps,i===yo?(i=kx(),tn=3):i===Rx?(i=kx(),tn=4):tn=i===My?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,_r=i,vt===null&&(pn=1,Mu(n,Lr(i,n.current)))}function xb(){var n=I.H;return I.H=ps,n===null?ps:n}function yb(){var n=I.A;return I.A=D2,n}function dm(){pn=4,Gs||(Tt&4194176)!==Tt&&Ur.current!==null||(il=!0),(Na&134217727)===0&&(vi&134217727)===0||en===null||Xs(en,Tt,qr,!1)}function fm(n,i,o){var u=dn;dn|=2;var g=xb(),y=yb();(en!==n||Tt!==i)&&(zu=null,ol(n,i)),i=!1;var S=pn;e:do try{if(tn!==0&&vt!==null){var A=vt,z=_r;switch(tn){case 8:um(),S=6;break e;case 3:case 2:case 6:Ur.current===null&&(i=!0);var Z=tn;if(tn=0,_r=null,cl(n,A,z,Z),o&&il){S=0;break e}break;default:Z=tn,tn=0,_r=null,cl(n,A,z,Z)}}L2(),S=pn;break}catch(me){vb(n,me)}while(!0);return i&&n.shellSuspendCounter++,Bs=hi=null,dn=u,I.H=g,I.A=y,vt===null&&(en=null,Tt=0,uu()),S}function L2(){for(;vt!==null;)bb(vt)}function I2(n,i){var o=dn;dn|=2;var u=xb(),g=yb();en!==n||Tt!==i?(zu=null,Iu=Nt()+500,ol(n,i)):il=xe(n,i);e:do try{if(tn!==0&&vt!==null){i=vt;var y=_r;t:switch(tn){case 1:tn=0,_r=null,cl(n,i,y,1);break;case 2:if(Mx(y)){tn=0,_r=null,wb(i);break}i=function(){tn===2&&en===n&&(tn=7),vs(n)},y.then(i,i);break e;case 3:tn=7;break e;case 4:tn=5;break e;case 7:Mx(y)?(tn=0,_r=null,wb(i)):(tn=0,_r=null,cl(n,i,y,7));break;case 5:var S=null;switch(vt.tag){case 26:S=vt.memoizedState;case 5:case 27:var A=vt;if(!S||Kb(S)){tn=0,_r=null;var z=A.sibling;if(z!==null)vt=z;else{var Z=A.return;Z!==null?(vt=Z,Bu(Z)):vt=null}break t}}tn=0,_r=null,cl(n,i,y,5);break;case 6:tn=0,_r=null,cl(n,i,y,6);break;case 8:um(),pn=6;break e;default:throw Error(a(462))}}z2();break}catch(me){vb(n,me)}while(!0);return Bs=hi=null,I.H=u,I.A=g,dn=o,vt!==null?0:(en=null,Tt=0,uu(),pn)}function z2(){for(;vt!==null&&!Fe();)bb(vt)}function bb(n){var i=Hy(n.alternate,n,Ws);n.memoizedProps=n.pendingProps,i===null?Bu(n):vt=i}function wb(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Ly(o,i,i.pendingProps,i.type,void 0,Tt);break;case 11:i=Ly(o,i,i.pendingProps,i.type.render,i.ref,Tt);break;case 5:gh(i);default:hb(o,i),i=vt=ub(i,Ws),i=Hy(o,i,Ws)}n.memoizedProps=n.pendingProps,i===null?Bu(n):vt=i}function cl(n,i,o,u){Bs=hi=null,gh(i),Ki=null,wo=0;var g=i.return;try{if(E2(n,g,i,o,Tt)){pn=1,Mu(n,Lr(o,n.current)),vt=null;return}}catch(y){if(g!==null)throw vt=g,y;pn=1,Mu(n,Lr(o,n.current)),vt=null;return}i.flags&32768?(It||u===1?n=!0:il||(Tt&536870912)!==0?n=!1:(Gs=n=!0,(u===2||u===3||u===6)&&(u=Ur.current,u!==null&&u.tag===13&&(u.flags|=16384))),jb(i,n)):Bu(i)}function Bu(n){var i=n;do{if((i.flags&32768)!==0){jb(i,Gs);return}n=i.return;var o=A2(i.alternate,i,Ws);if(o!==null){vt=o;return}if(i=i.sibling,i!==null){vt=i;return}vt=i=n}while(i!==null);pn===0&&(pn=5)}function jb(n,i){do{var o=k2(n.alternate,n);if(o!==null){o.flags&=32767,vt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){vt=n;return}vt=n=o}while(n!==null);pn=6,vt=null}function _b(n,i,o,u,g,y,S,A,z,Z){var me=I.T,je=D.p;try{D.p=2,I.T=null,U2(n,i,o,u,je,g,y,S,A,z,Z)}finally{I.T=me,D.p=je}}function U2(n,i,o,u,g,y,S,A){do ul();while(xi!==null);if((dn&6)!==0)throw Error(a(327));var z=n.finishedWork;if(u=n.finishedLanes,z===null)return null;if(n.finishedWork=null,n.finishedLanes=0,z===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var Z=z.lanes|z.childLanes;if(Z|=th,ft(n,u,Z,y,S,A),n===en&&(vt=en=null,Tt=0),(z.subtreeFlags&10256)===0&&(z.flags&10256)===0||Uu||(Uu=!0,im=Z,lm=o,q2(Zt,function(){return ul(),null})),o=(z.flags&15990)!==0,(z.subtreeFlags&15990)!==0||o?(o=I.T,I.T=null,y=D.p,D.p=2,S=dn,dn|=4,T2(n,z),rb(z,n),c2(Nm,n.containerInfo),Ju=!!_m,Nm=_m=null,n.current=z,Jy(n,z.alternate,z),bt(),dn=S,D.p=y,I.T=o):n.current=z,Uu?(Uu=!1,xi=n,Uo=u):Nb(n,Z),Z=n.pendingLanes,Z===0&&(Sa=null),nr(z.stateNode),vs(n),i!==null)for(g=n.onRecoverableError,z=0;z<i.length;z++)Z=i[z],g(Z.value,{componentStack:Z.stack});return(Uo&3)!==0&&ul(),Z=n.pendingLanes,(u&4194218)!==0&&(Z&42)!==0?n===om?$o++:($o=0,om=n):$o=0,Bo(0),null}function Nb(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,_o(i)))}function ul(){if(xi!==null){var n=xi,i=im;im=0;var o=Rt(Uo),u=I.T,g=D.p;try{if(D.p=32>o?32:o,I.T=null,xi===null)var y=!1;else{o=lm,lm=null;var S=xi,A=Uo;if(xi=null,Uo=0,(dn&6)!==0)throw Error(a(331));var z=dn;if(dn|=4,ob(S.current),ab(S,S.current,A,o),dn=z,Bo(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Jt,S)}catch{}y=!0}return y}finally{D.p=g,I.T=u,Nb(n,i)}}return!1}function Sb(n,i,o){i=Lr(o,i),i=Mh(n.stateNode,i,2),n=ya(n,i,2),n!==null&&(Ye(n,2),vs(n))}function Kt(n,i,o){if(n.tag===3)Sb(n,n,o);else for(;i!==null;){if(i.tag===3){Sb(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Sa===null||!Sa.has(u))){n=Lr(o,n),o=Ty(2),u=ya(i,o,2),u!==null&&(Ry(o,u,i,n),Ye(u,2),vs(u));break}}i=i.return}}function hm(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new O2;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(o)||(nm=!0,g.add(o),n=$2.bind(null,n,i,o),i.then(n,n))}function $2(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,en===n&&(Tt&o)===o&&(pn===4||pn===3&&(Tt&62914560)===Tt&&300>Nt()-am?(dn&2)===0&&ol(n,0):rm|=o,ll===Tt&&(ll=0)),vs(n)}function Eb(n,i){i===0&&(i=qe()),n=da(n,i),n!==null&&(Ye(n,i),vs(n))}function B2(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Eb(n,o)}function H2(n,i){var o=0;switch(n.tag){case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),Eb(n,o)}function q2(n,i){return Oe(n,i)}var Hu=null,dl=null,mm=!1,qu=!1,pm=!1,yi=0;function vs(n){n!==dl&&n.next===null&&(dl===null?Hu=dl=n:dl=dl.next=n),qu=!0,mm||(mm=!0,V2(F2))}function Bo(n,i){if(!pm&&qu){pm=!0;do for(var o=!1,u=Hu;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var S=u.suspendedLanes,A=u.pingedLanes;y=(1<<31-hn(42|n)+1)-1,y&=g&~(S&~A),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(o=!0,Rb(u,y))}else y=Tt,y=J(u,u===en?y:0),(y&3)===0||xe(u,y)||(o=!0,Rb(u,y));u=u.next}while(o);pm=!1}}function F2(){qu=mm=!1;var n=0;yi!==0&&(J2()&&(n=yi),yi=0);for(var i=Nt(),o=null,u=Hu;u!==null;){var g=u.next,y=Cb(u,i);y===0?(u.next=null,o===null?Hu=g:o.next=g,g===null&&(dl=o)):(o=u,(n!==0||(y&3)!==0)&&(qu=!0)),u=g}Bo(n)}function Cb(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var S=31-hn(y),A=1<<S,z=g[S];z===-1?((A&o)===0||(A&u)!==0)&&(g[S]=_e(A,i)):z<=i&&(n.expiredLanes|=A),y&=~A}if(i=en,o=Tt,o=J(n,n===i?o:0),u=n.callbackNode,o===0||n===i&&tn===2||n.cancelPendingCommit!==null)return u!==null&&u!==null&&We(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||xe(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&We(u),Rt(o)){case 2:case 8:o=tt;break;case 32:o=Zt;break;case 268435456:o=Cn;break;default:o=Zt}return u=Tb.bind(null,n),o=Oe(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&We(u),n.callbackPriority=2,n.callbackNode=null,2}function Tb(n,i){var o=n.callbackNode;if(ul()&&n.callbackNode!==o)return null;var u=Tt;return u=J(n,n===en?u:0),u===0?null:(pb(n,u,i),Cb(n,Nt()),n.callbackNode!=null&&n.callbackNode===o?Tb.bind(null,n):null)}function Rb(n,i){if(ul())return null;pb(n,i,!0)}function V2(n){tC(function(){(dn&6)!==0?Oe(Be,n):n()})}function gm(){return yi===0&&(yi=De()),yi}function Mb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ru(""+n)}function Ab(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function Y2(n,i,o,u,g){if(i==="submit"&&o&&o.stateNode===g){var y=Mb((g[wn]||null).action),S=u.submitter;S&&(i=(i=S[wn]||null)?Mb(i.formAction):S.getAttribute("formAction"),i!==null&&(y=i,S=null));var A=new lu("action","action",null,u,g);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(yi!==0){var z=S?Ab(g,S):new FormData(g);Sh(o,{pending:!0,data:z,method:g.method,action:y},null,z)}}else typeof y=="function"&&(A.preventDefault(),z=S?Ab(g,S):new FormData(g),Sh(o,{pending:!0,data:z,method:g.method,action:y},y,z))},currentTarget:g}]})}}for(var vm=0;vm<_x.length;vm++){var xm=_x[vm],G2=xm.toLowerCase(),W2=xm[0].toUpperCase()+xm.slice(1);Kr(G2,"on"+W2)}Kr(xx,"onAnimationEnd"),Kr(yx,"onAnimationIteration"),Kr(bx,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(d2,"onTransitionRun"),Kr(f2,"onTransitionStart"),Kr(h2,"onTransitionCancel"),Kr(wx,"onTransitionEnd"),zi("onMouseEnter",["mouseout","mouseover"]),zi("onMouseLeave",["mouseout","mouseover"]),zi("onPointerEnter",["pointerout","pointerover"]),zi("onPointerLeave",["pointerout","pointerover"]),ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ho));function kb(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],g=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var S=u.length-1;0<=S;S--){var A=u[S],z=A.instance,Z=A.currentTarget;if(A=A.listener,z!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=Z;try{y(g)}catch(me){Ru(me)}g.currentTarget=null,y=z}else for(S=0;S<u.length;S++){if(A=u[S],z=A.instance,Z=A.currentTarget,A=A.listener,z!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=Z;try{y(g)}catch(me){Ru(me)}g.currentTarget=null,y=z}}}}function St(n,i){var o=i[Ee];o===void 0&&(o=i[Ee]=new Set);var u=n+"__bubble";o.has(u)||(Db(i,n,2,!1),o.add(u))}function ym(n,i,o){var u=0;i&&(u|=4),Db(o,n,u,i)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function bm(n){if(!n[Fu]){n[Fu]=!0,Lv.forEach(function(o){o!=="selectionchange"&&(X2.has(o)||ym(o,!1,n),ym(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Fu]||(i[Fu]=!0,ym("selectionchange",!1,i))}}function Db(n,i,o,u){switch(n0(i)){case 2:var g=wC;break;case 8:g=jC;break;default:g=Dm}o=g.bind(null,i,o,n),g=void 0,!Hf||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(i,o,{capture:!0,passive:g}):n.addEventListener(i,o,!0):g!==void 0?n.addEventListener(i,o,{passive:g}):n.addEventListener(i,o,!1)}function wm(n,i,o,u,g){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var A=u.stateNode.containerInfo;if(A===g||A.nodeType===8&&A.parentNode===g)break;if(S===4)for(S=u.return;S!==null;){var z=S.tag;if((z===3||z===4)&&(z=S.stateNode.containerInfo,z===g||z.nodeType===8&&z.parentNode===g))return;S=S.return}for(;A!==null;){if(S=On(A),S===null)return;if(z=S.tag,z===5||z===6||z===26||z===27){u=y=S;continue e}A=A.parentNode}}u=u.return}Wv(function(){var Z=y,me=$f(o),je=[];e:{var oe=jx.get(n);if(oe!==void 0){var he=lu,He=n;switch(n){case"keypress":if(au(o)===0)break e;case"keydown":case"keyup":he=HE;break;case"focusin":He="focus",he=Yf;break;case"focusout":He="blur",he=Yf;break;case"beforeblur":case"afterblur":he=Yf;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Qv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=ME;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=VE;break;case xx:case yx:case bx:he=DE;break;case wx:he=GE;break;case"scroll":case"scrollend":he=TE;break;case"wheel":he=XE;break;case"copy":case"cut":case"paste":he=PE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Jv;break;case"toggle":case"beforetoggle":he=QE}var rt=(i&4)!==0,gn=!rt&&(n==="scroll"||n==="scrollend"),re=rt?oe!==null?oe+"Capture":null:oe;rt=[];for(var Q=Z,ie;Q!==null;){var ye=Q;if(ie=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ie===null||re===null||(ye=io(Q,re),ye!=null&&rt.push(qo(Q,ye,ie))),gn)break;Q=Q.return}0<rt.length&&(oe=new he(oe,He,null,o,me),je.push({event:oe,listeners:rt}))}}if((i&7)===0){e:{if(oe=n==="mouseover"||n==="pointerover",he=n==="mouseout"||n==="pointerout",oe&&o!==Uf&&(He=o.relatedTarget||o.fromElement)&&(On(He)||He[fe]))break e;if((he||oe)&&(oe=me.window===me?me:(oe=me.ownerDocument)?oe.defaultView||oe.parentWindow:window,he?(He=o.relatedTarget||o.toElement,he=Z,He=He?On(He):null,He!==null&&(gn=B(He),rt=He.tag,He!==gn||rt!==5&&rt!==27&&rt!==6)&&(He=null)):(he=null,He=Z),he!==He)){if(rt=Qv,ye="onMouseLeave",re="onMouseEnter",Q="mouse",(n==="pointerout"||n==="pointerover")&&(rt=Jv,ye="onPointerLeave",re="onPointerEnter",Q="pointer"),gn=he==null?oe:ca(he),ie=He==null?oe:ca(He),oe=new rt(ye,Q+"leave",he,o,me),oe.target=gn,oe.relatedTarget=ie,ye=null,On(me)===Z&&(rt=new rt(re,Q+"enter",He,o,me),rt.target=ie,rt.relatedTarget=gn,ye=rt),gn=ye,he&&He)t:{for(rt=he,re=He,Q=0,ie=rt;ie;ie=fl(ie))Q++;for(ie=0,ye=re;ye;ye=fl(ye))ie++;for(;0<Q-ie;)rt=fl(rt),Q--;for(;0<ie-Q;)re=fl(re),ie--;for(;Q--;){if(rt===re||re!==null&&rt===re.alternate)break t;rt=fl(rt),re=fl(re)}rt=null}else rt=null;he!==null&&Ob(je,oe,he,rt,!1),He!==null&&gn!==null&&Ob(je,gn,He,rt,!0)}}e:{if(oe=Z?ca(Z):window,he=oe.nodeName&&oe.nodeName.toLowerCase(),he==="select"||he==="input"&&oe.type==="file")var ze=lx;else if(ax(oe))if(ox)ze=l2;else{ze=a2;var gt=s2}else he=oe.nodeName,!he||he.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?Z&&zf(Z.elementType)&&(ze=lx):ze=i2;if(ze&&(ze=ze(n,Z))){ix(je,ze,o,me);break e}gt&&gt(n,oe,Z),n==="focusout"&&Z&&oe.type==="number"&&Z.memoizedProps.value!=null&&If(oe,"number",oe.value)}switch(gt=Z?ca(Z):window,n){case"focusin":(ax(gt)||gt.contentEditable==="true")&&(Fi=gt,Zf=Z,po=null);break;case"focusout":po=Zf=Fi=null;break;case"mousedown":Jf=!0;break;case"contextmenu":case"mouseup":case"dragend":Jf=!1,gx(je,o,me);break;case"selectionchange":if(u2)break;case"keydown":case"keyup":gx(je,o,me)}var Ve;if(Wf)e:{switch(n){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else qi?rx(n,o)&&(Ke="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ke="onCompositionStart");Ke&&(ex&&o.locale!=="ko"&&(qi||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&qi&&(Ve=Xv()):(ua=me,qf="value"in ua?ua.value:ua.textContent,qi=!0)),gt=Vu(Z,Ke),0<gt.length&&(Ke=new Zv(Ke,n,null,o,me),je.push({event:Ke,listeners:gt}),Ve?Ke.data=Ve:(Ve=sx(o),Ve!==null&&(Ke.data=Ve)))),(Ve=JE?e2(n,o):t2(n,o))&&(Ke=Vu(Z,"onBeforeInput"),0<Ke.length&&(gt=new Zv("onBeforeInput","beforeinput",null,o,me),je.push({event:gt,listeners:Ke}),gt.data=Ve)),Y2(je,n,Z,o,me)}kb(je,i)})}function qo(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Vu(n,i){for(var o=i+"Capture",u=[];n!==null;){var g=n,y=g.stateNode;g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=io(n,o),g!=null&&u.unshift(qo(n,g,y)),g=io(n,i),g!=null&&u.push(qo(n,g,y))),n=n.return}return u}function fl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Ob(n,i,o,u,g){for(var y=i._reactName,S=[];o!==null&&o!==u;){var A=o,z=A.alternate,Z=A.stateNode;if(A=A.tag,z!==null&&z===u)break;A!==5&&A!==26&&A!==27||Z===null||(z=Z,g?(Z=io(o,y),Z!=null&&S.unshift(qo(o,Z,z))):g||(Z=io(o,y),Z!=null&&S.push(qo(o,Z,z)))),o=o.return}S.length!==0&&n.push({event:i,listeners:S})}var K2=/\r\n?/g,Q2=/\u0000|\uFFFD/g;function Pb(n){return(typeof n=="string"?n:""+n).replace(K2,`
`).replace(Q2,"")}function Lb(n,i){return i=Pb(i),Pb(n)===i}function Yu(){}function Wt(n,i,o,u,g,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||$i(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&$i(n,""+u);break;case"className":eu(n,"class",u);break;case"tabIndex":eu(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":eu(n,o,u);break;case"style":Yv(n,u,y);break;case"data":if(i!=="object"){eu(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ru(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&Wt(n,i,"name",g.name,g,null),Wt(n,i,"formEncType",g.formEncType,g,null),Wt(n,i,"formMethod",g.formMethod,g,null),Wt(n,i,"formTarget",g.formTarget,g,null)):(Wt(n,i,"encType",g.encType,g,null),Wt(n,i,"method",g.method,g,null),Wt(n,i,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ru(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Yu);break;case"onScroll":u!=null&&St("scroll",n);break;case"onScrollEnd":u!=null&&St("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=ru(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":St("beforetoggle",n),St("toggle",n),Jc(n,"popover",u);break;case"xlinkActuate":Ps(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ps(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ps(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ps(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ps(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ps(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ps(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ps(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ps(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Jc(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=EE.get(o)||o,Jc(n,o,u))}}function jm(n,i,o,u,g,y){switch(o){case"style":Yv(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"children":typeof u=="string"?$i(n,u):(typeof u=="number"||typeof u=="bigint")&&$i(n,""+u);break;case"onScroll":u!=null&&St("scroll",n);break;case"onScrollEnd":u!=null&&St("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Yu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Iv.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),i=o.slice(2,g?o.length-7:void 0),y=n[wn]||null,y=y!=null?y[o]:null,typeof y=="function"&&n.removeEventListener(i,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,g);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Jc(n,o,u)}}}function Vn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",n),St("load",n);var u=!1,g=!1,y;for(y in o)if(o.hasOwnProperty(y)){var S=o[y];if(S!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Wt(n,i,y,S,o,null)}}g&&Wt(n,i,"srcSet",o.srcSet,o,null),u&&Wt(n,i,"src",o.src,o,null);return;case"input":St("invalid",n);var A=y=S=g=null,z=null,Z=null;for(u in o)if(o.hasOwnProperty(u)){var me=o[u];if(me!=null)switch(u){case"name":g=me;break;case"type":S=me;break;case"checked":z=me;break;case"defaultChecked":Z=me;break;case"value":y=me;break;case"defaultValue":A=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(a(137,i));break;default:Wt(n,i,u,me,o,null)}}Hv(n,y,A,z,Z,S,g,!1),tu(n);return;case"select":St("invalid",n),u=S=y=null;for(g in o)if(o.hasOwnProperty(g)&&(A=o[g],A!=null))switch(g){case"value":y=A;break;case"defaultValue":S=A;break;case"multiple":u=A;default:Wt(n,i,g,A,o,null)}i=y,o=S,n.multiple=!!u,i!=null?Ui(n,!!u,i,!1):o!=null&&Ui(n,!!u,o,!0);return;case"textarea":St("invalid",n),y=g=u=null;for(S in o)if(o.hasOwnProperty(S)&&(A=o[S],A!=null))switch(S){case"value":u=A;break;case"defaultValue":g=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:Wt(n,i,S,A,o,null)}Fv(n,u,g,y),tu(n);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Wt(n,i,z,u,o,null)}return;case"dialog":St("cancel",n),St("close",n);break;case"iframe":case"object":St("load",n);break;case"video":case"audio":for(u=0;u<Ho.length;u++)St(Ho[u],n);break;case"image":St("error",n),St("load",n);break;case"details":St("toggle",n);break;case"embed":case"source":case"link":St("error",n),St("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(u=o[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Wt(n,i,Z,u,o,null)}return;default:if(zf(i)){for(me in o)o.hasOwnProperty(me)&&(u=o[me],u!==void 0&&jm(n,i,me,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&Wt(n,i,A,u,o,null))}function Z2(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,S=null,A=null,z=null,Z=null,me=null;for(he in o){var je=o[he];if(o.hasOwnProperty(he)&&je!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":z=je;default:u.hasOwnProperty(he)||Wt(n,i,he,null,u,je)}}for(var oe in u){var he=u[oe];if(je=o[oe],u.hasOwnProperty(oe)&&(he!=null||je!=null))switch(oe){case"type":y=he;break;case"name":g=he;break;case"checked":Z=he;break;case"defaultChecked":me=he;break;case"value":S=he;break;case"defaultValue":A=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(a(137,i));break;default:he!==je&&Wt(n,i,oe,he,u,je)}}Lf(n,S,A,z,Z,me,y,g);return;case"select":he=S=A=oe=null;for(y in o)if(z=o[y],o.hasOwnProperty(y)&&z!=null)switch(y){case"value":break;case"multiple":he=z;default:u.hasOwnProperty(y)||Wt(n,i,y,null,u,z)}for(g in u)if(y=u[g],z=o[g],u.hasOwnProperty(g)&&(y!=null||z!=null))switch(g){case"value":oe=y;break;case"defaultValue":A=y;break;case"multiple":S=y;default:y!==z&&Wt(n,i,g,y,u,z)}i=A,o=S,u=he,oe!=null?Ui(n,!!o,oe,!1):!!u!=!!o&&(i!=null?Ui(n,!!o,i,!0):Ui(n,!!o,o?[]:"",!1));return;case"textarea":he=oe=null;for(A in o)if(g=o[A],o.hasOwnProperty(A)&&g!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Wt(n,i,A,null,u,g)}for(S in u)if(g=u[S],y=o[S],u.hasOwnProperty(S)&&(g!=null||y!=null))switch(S){case"value":oe=g;break;case"defaultValue":he=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(a(91));break;default:g!==y&&Wt(n,i,S,g,u,y)}qv(n,oe,he);return;case"option":for(var He in o)if(oe=o[He],o.hasOwnProperty(He)&&oe!=null&&!u.hasOwnProperty(He))switch(He){case"selected":n.selected=!1;break;default:Wt(n,i,He,null,u,oe)}for(z in u)if(oe=u[z],he=o[z],u.hasOwnProperty(z)&&oe!==he&&(oe!=null||he!=null))switch(z){case"selected":n.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:Wt(n,i,z,oe,u,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in o)oe=o[rt],o.hasOwnProperty(rt)&&oe!=null&&!u.hasOwnProperty(rt)&&Wt(n,i,rt,null,u,oe);for(Z in u)if(oe=u[Z],he=o[Z],u.hasOwnProperty(Z)&&oe!==he&&(oe!=null||he!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,i));break;default:Wt(n,i,Z,oe,u,he)}return;default:if(zf(i)){for(var gn in o)oe=o[gn],o.hasOwnProperty(gn)&&oe!==void 0&&!u.hasOwnProperty(gn)&&jm(n,i,gn,void 0,u,oe);for(me in u)oe=u[me],he=o[me],!u.hasOwnProperty(me)||oe===he||oe===void 0&&he===void 0||jm(n,i,me,oe,u,he);return}}for(var re in o)oe=o[re],o.hasOwnProperty(re)&&oe!=null&&!u.hasOwnProperty(re)&&Wt(n,i,re,null,u,oe);for(je in u)oe=u[je],he=o[je],!u.hasOwnProperty(je)||oe===he||oe==null&&he==null||Wt(n,i,je,oe,u,he)}var _m=null,Nm=null;function Gu(n){return n.nodeType===9?n:n.ownerDocument}function Ib(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zb(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Sm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Em=null;function J2(){var n=window.event;return n&&n.type==="popstate"?n===Em?!1:(Em=n,!0):(Em=null,!1)}var Ub=typeof setTimeout=="function"?setTimeout:void 0,eC=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,tC=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(n){return $b.resolve(null).then(n).catch(nC)}:Ub;function nC(n){setTimeout(function(){throw n})}function Cm(n,i){var o=i,u=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(u===0){n.removeChild(g),Qo(i);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=g}while(o);Qo(i)}function Tm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Tm(o),cr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function rC(n,i,o,u){for(;n.nodeType===1;){var g=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Hn])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==g.rel||n.getAttribute("href")!==(g.href==null?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Jr(n.nextSibling),n===null)break}return null}function sC(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Jr(n.nextSibling),n===null))return null;return n}function Jr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}function Bb(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function Hb(n,i,o){switch(i=Gu(o),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}var Fr=new Map,qb=new Set;function Wu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var Ks=D.d;D.d={f:aC,r:iC,D:lC,C:oC,L:cC,m:uC,X:fC,S:dC,M:hC};function aC(){var n=Ks.f(),i=$u();return n||i}function iC(n){var i=At(n);i!==null&&i.tag===5&&i.type==="form"?gy(i):Ks.r(n)}var hl=typeof document>"u"?null:document;function Fb(n,i,o){var u=hl;if(u&&typeof i=="string"&&i){var g=Or(i);g='link[rel="'+n+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),qb.has(g)||(qb.add(g),n={rel:n,crossOrigin:o,href:i},u.querySelector(g)===null&&(i=u.createElement("link"),Vn(i,"link",n),jn(i),u.head.appendChild(i)))}}function lC(n){Ks.D(n),Fb("dns-prefetch",n,null)}function oC(n,i){Ks.C(n,i),Fb("preconnect",n,i)}function cC(n,i,o){Ks.L(n,i,o);var u=hl;if(u&&n&&i){var g='link[rel="preload"][as="'+Or(i)+'"]';i==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Or(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Or(o.imageSizes)+'"]')):g+='[href="'+Or(n)+'"]';var y=g;switch(i){case"style":y=ml(n);break;case"script":y=pl(n)}Fr.has(y)||(n=Y({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Fr.set(y,n),u.querySelector(g)!==null||i==="style"&&u.querySelector(Fo(y))||i==="script"&&u.querySelector(Vo(y))||(i=u.createElement("link"),Vn(i,"link",n),jn(i),u.head.appendChild(i)))}}function uC(n,i){Ks.m(n,i);var o=hl;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Or(u)+'"][href="'+Or(n)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=pl(n)}if(!Fr.has(y)&&(n=Y({rel:"modulepreload",href:n},i),Fr.set(y,n),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Vo(y)))return}u=o.createElement("link"),Vn(u,"link",n),jn(u),o.head.appendChild(u)}}}function dC(n,i,o){Ks.S(n,i,o);var u=hl;if(u&&n){var g=Ds(u).hoistableStyles,y=ml(n);i=i||"default";var S=g.get(y);if(!S){var A={loading:0,preload:null};if(S=u.querySelector(Fo(y)))A.loading=5;else{n=Y({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Fr.get(y))&&Rm(n,o);var z=S=u.createElement("link");jn(z),Vn(z,"link",n),z._p=new Promise(function(Z,me){z.onload=Z,z.onerror=me}),z.addEventListener("load",function(){A.loading|=1}),z.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Xu(S,i,u)}S={type:"stylesheet",instance:S,count:1,state:A},g.set(y,S)}}}function fC(n,i){Ks.X(n,i);var o=hl;if(o&&n){var u=Ds(o).hoistableScripts,g=pl(n),y=u.get(g);y||(y=o.querySelector(Vo(g)),y||(n=Y({src:n,async:!0},i),(i=Fr.get(g))&&Mm(n,i),y=o.createElement("script"),jn(y),Vn(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function hC(n,i){Ks.M(n,i);var o=hl;if(o&&n){var u=Ds(o).hoistableScripts,g=pl(n),y=u.get(g);y||(y=o.querySelector(Vo(g)),y||(n=Y({src:n,async:!0,type:"module"},i),(i=Fr.get(g))&&Mm(n,i),y=o.createElement("script"),jn(y),Vn(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Vb(n,i,o,u){var g=(g=at.current)?Wu(g):null;if(!g)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=ml(o.href),o=Ds(g).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=ml(o.href);var y=Ds(g).hoistableStyles,S=y.get(n);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,S),(y=g.querySelector(Fo(n)))&&!y._p&&(S.instance=y,S.state.loading=5),Fr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Fr.set(n,o),y||mC(g,n,o,S.state))),i&&u===null)throw Error(a(528,""));return S}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=pl(o),o=Ds(g).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function ml(n){return'href="'+Or(n)+'"'}function Fo(n){return'link[rel="stylesheet"]['+n+"]"}function Yb(n){return Y({},n,{"data-precedence":n.precedence,precedence:null})}function mC(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Vn(i,"link",o),jn(i),n.head.appendChild(i))}function pl(n){return'[src="'+Or(n)+'"]'}function Vo(n){return"script[async]"+n}function Gb(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Or(o.href)+'"]');if(u)return i.instance=u,jn(u),u;var g=Y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),jn(u),Vn(u,"style",g),Xu(u,o.precedence,n),i.instance=u;case"stylesheet":g=ml(o.href);var y=n.querySelector(Fo(g));if(y)return i.state.loading|=4,i.instance=y,jn(y),y;u=Yb(o),(g=Fr.get(g))&&Rm(u,g),y=(n.ownerDocument||n).createElement("link"),jn(y);var S=y;return S._p=new Promise(function(A,z){S.onload=A,S.onerror=z}),Vn(y,"link",u),i.state.loading|=4,Xu(y,o.precedence,n),i.instance=y;case"script":return y=pl(o.src),(g=n.querySelector(Vo(y)))?(i.instance=g,jn(g),g):(u=o,(g=Fr.get(y))&&(u=Y({},o),Mm(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),jn(g),Vn(g,"link",u),n.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Xu(u,o.precedence,n));return i.instance}function Xu(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,S=0;S<u.length;S++){var A=u[S];if(A.dataset.precedence===i)y=A;else if(y!==g)break}y?y.parentNode.insertBefore(n,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Rm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Mm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Ku=null;function Wb(n,i,o){if(Ku===null){var u=new Map,g=Ku=new Map;g.set(o,u)}else g=Ku,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),g=0;g<o.length;g++){var y=o[g];if(!(y[Hn]||y[on]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(i)||"";S=n+S;var A=u.get(S);A?A.push(y):u.set(S,[y])}}return u}function Xb(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function pC(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Kb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Yo=null;function gC(){}function vC(n,i,o){if(Yo===null)throw Error(a(475));var u=Yo;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=ml(o.href),y=n.querySelector(Fo(g));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Qu.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=y,jn(y);return}y=n.ownerDocument||n,o=Yb(o),(g=Fr.get(g))&&Rm(o,g),y=y.createElement("link"),jn(y);var S=y;S._p=new Promise(function(A,z){S.onload=A,S.onerror=z}),Vn(y,"link",o),i.instance=y}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Qu.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function xC(){if(Yo===null)throw Error(a(475));var n=Yo;return n.stylesheets&&n.count===0&&Am(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&Am(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Qu(){if(this.count--,this.count===0){if(this.stylesheets)Am(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Zu=null;function Am(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Zu=new Map,i.forEach(yC,n),Zu=null,Qu.call(n))}function yC(n,i){if(!(i.state.loading&4)){var o=Zu.get(n);if(o)var u=o.get(null);else{o=new Map,Zu.set(n,o);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var S=g[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),u=S)}u&&o.set(null,u)}g=i.instance,S=g.getAttribute("data-precedence"),y=o.get(S)||u,y===u&&o.set(null,g),o.set(S,g),this.count++,u=Qu.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),i.state.loading|=4}}var Go={$$typeof:w,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function bC(n,i,o,u,g,y,S,A){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lt(0),this.hiddenUpdates=lt(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Qb(n,i,o,u,g,y,S,A,z,Z,me,je){return n=new bC(n,i,o,S,A,z,Z,je),i=1,y===!0&&(i|=24),y=Hr(3,null,null,i),n.current=y,y.stateNode=n,i=ch(),i.refCount++,n.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},qh(y),n}function Zb(n){return n?(n=Gi,n):Gi}function Jb(n,i,o,u,g,y){g=Zb(g),u.context===null?u.context=g:u.pendingContext=g,u=xa(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=ya(n,u,i),o!==null&&(sr(o,n,i),Mo(o,n,i))}function e0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function km(n,i){e0(n,i),(n=n.alternate)&&e0(n,i)}function t0(n){if(n.tag===13){var i=da(n,67108864);i!==null&&sr(i,n,67108864),km(n,67108864)}}var Ju=!0;function wC(n,i,o,u){var g=I.T;I.T=null;var y=D.p;try{D.p=2,Dm(n,i,o,u)}finally{D.p=y,I.T=g}}function jC(n,i,o,u){var g=I.T;I.T=null;var y=D.p;try{D.p=8,Dm(n,i,o,u)}finally{D.p=y,I.T=g}}function Dm(n,i,o,u){if(Ju){var g=Om(u);if(g===null)wm(n,i,u,ed,o),r0(n,u);else if(NC(g,n,i,o,u))u.stopPropagation();else if(r0(n,u),i&4&&-1<_C.indexOf(n)){for(;g!==null;){var y=At(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=it(y.pendingLanes);if(S!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var z=1<<31-hn(S);A.entanglements[1]|=z,S&=~z}vs(y),(dn&6)===0&&(Iu=Nt()+500,Bo(0))}}break;case 13:A=da(y,2),A!==null&&sr(A,y,2),$u(),km(y,2)}if(y=Om(u),y===null&&wm(n,i,u,ed,o),y===g)break;g=y}g!==null&&u.stopPropagation()}else wm(n,i,u,null,o)}}function Om(n){return n=$f(n),Pm(n)}var ed=null;function Pm(n){if(ed=null,n=On(n),n!==null){var i=B(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=ee(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return ed=n,null}function n0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ht()){case Be:return 2;case tt:return 8;case Zt:case kn:return 32;case Cn:return 268435456;default:return 32}default:return 32}}var Lm=!1,Ea=null,Ca=null,Ta=null,Wo=new Map,Xo=new Map,Ra=[],_C="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r0(n,i){switch(n){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":Wo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(i.pointerId)}}function Ko(n,i,o,u,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},i!==null&&(i=At(i),i!==null&&t0(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),n)}function NC(n,i,o,u,g){switch(i){case"focusin":return Ea=Ko(Ea,n,i,o,u,g),!0;case"dragenter":return Ca=Ko(Ca,n,i,o,u,g),!0;case"mouseover":return Ta=Ko(Ta,n,i,o,u,g),!0;case"pointerover":var y=g.pointerId;return Wo.set(y,Ko(Wo.get(y)||null,n,i,o,u,g)),!0;case"gotpointercapture":return y=g.pointerId,Xo.set(y,Ko(Xo.get(y)||null,n,i,o,u,g)),!0}return!1}function s0(n){var i=On(n.target);if(i!==null){var o=B(i);if(o!==null){if(i=o.tag,i===13){if(i=ee(o),i!==null){n.blockedOn=i,sn(n.priority,function(){if(o.tag===13){var u=Nr(),g=da(o,u);g!==null&&sr(g,o,u),km(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function td(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Om(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Uf=u,o.target.dispatchEvent(u),Uf=null}else return i=At(o),i!==null&&t0(i),n.blockedOn=o,!1;i.shift()}return!0}function a0(n,i,o){td(n)&&o.delete(i)}function SC(){Lm=!1,Ea!==null&&td(Ea)&&(Ea=null),Ca!==null&&td(Ca)&&(Ca=null),Ta!==null&&td(Ta)&&(Ta=null),Wo.forEach(a0),Xo.forEach(a0)}function nd(n,i){n.blockedOn===i&&(n.blockedOn=null,Lm||(Lm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,SC)))}var rd=null;function i0(n){rd!==n&&(rd=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){rd===n&&(rd=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],g=n[i+2];if(typeof u!="function"){if(Pm(u||o)===null)continue;break}var y=At(o);y!==null&&(n.splice(i,3),i-=3,Sh(y,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function Qo(n){function i(z){return nd(z,n)}Ea!==null&&nd(Ea,n),Ca!==null&&nd(Ca,n),Ta!==null&&nd(Ta,n),Wo.forEach(i),Xo.forEach(i);for(var o=0;o<Ra.length;o++){var u=Ra[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ra.length&&(o=Ra[0],o.blockedOn===null);)s0(o),o.blockedOn===null&&Ra.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],y=o[u+1],S=g[wn]||null;if(typeof y=="function")S||i0(o);else if(S){var A=null;if(y&&y.hasAttribute("formAction")){if(g=y,S=y[wn]||null)A=S.formAction;else if(Pm(g)!==null)continue}else A=S.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),i0(o)}}}function Im(n){this._internalRoot=n}sd.prototype.render=Im.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=Nr();Jb(o,u,n,i,null,null)},sd.prototype.unmount=Im.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;n.tag===0&&ul(),Jb(n.current,2,null,n,null,null),$u(),i[fe]=null}};function sd(n){this._internalRoot=n}sd.prototype.unstable_scheduleHydration=function(n){if(n){var i=Mt();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Ra.length&&i!==0&&i<Ra[o].priority;o++);Ra.splice(o,0,n),o===0&&s0(n)}};var l0=t.version;if(l0!=="19.0.0")throw Error(a(527,l0,"19.0.0"));D.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=P(i),n=n!==null?V(n):null,n=n===null?null:n.stateNode,n};var EC={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:I,findFiberByHostInstance:On,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{Jt=ad.inject(EC),qt=ad}catch{}}return Jo.createRoot=function(n,i){if(!l(n))throw Error(a(299));var o=!1,u="",g=Ny,y=Sy,S=Ey,A=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=Qb(n,1,!1,null,null,o,u,g,y,S,A,null),n[fe]=i.current,bm(n.nodeType===8?n.parentNode:n),new Im(i)},Jo.hydrateRoot=function(n,i,o){if(!l(n))throw Error(a(299));var u=!1,g="",y=Ny,S=Sy,A=Ey,z=null,Z=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(z=o.unstable_transitionCallbacks),o.formState!==void 0&&(Z=o.formState)),i=Qb(n,1,!0,i,o??null,u,g,y,S,A,z,Z),i.context=Zb(null),o=i.current,u=Nr(),g=xa(u),g.callback=null,ya(o,g,u),i.current.lanes=u,Ye(i,u),vs(i),n[fe]=i.current,bm(n),new sd(i)},Jo.version="19.0.0",Jo}var v0;function zC(){if(v0)return $m.exports;v0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),$m.exports=IC(),$m.exports}var UC=zC();const $C=Xd(UC);var ec={},x0;function BC(){if(x0)return ec;x0=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.parse=d,ec.serialize=p;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,c=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function d(b,w){const j=new c,_=b.length;if(_<2)return j;const N=(w==null?void 0:w.decode)||v;let C=0;do{const E=b.indexOf("=",C);if(E===-1)break;const T=b.indexOf(";",C),M=T===-1?_:T;if(E>M){C=b.lastIndexOf(";",E-1)+1;continue}const R=f(b,C,E),L=h(b,E,R),H=b.slice(R,L);if(j[H]===void 0){let $=f(b,E+1,M),I=h(b,M,$);const Y=N(b.slice($,I));j[H]=Y}C=M+1}while(C<_);return j}function f(b,w,j){do{const _=b.charCodeAt(w);if(_!==32&&_!==9)return w}while(++w<j);return j}function h(b,w,j){for(;w>j;){const _=b.charCodeAt(--w);if(_!==32&&_!==9)return w+1}return j}function p(b,w,j){const _=(j==null?void 0:j.encode)||encodeURIComponent;if(!e.test(b))throw new TypeError(`argument name is invalid: ${b}`);const N=_(w);if(!t.test(N))throw new TypeError(`argument val is invalid: ${w}`);let C=b+"="+N;if(!j)return C;if(j.maxAge!==void 0){if(!Number.isInteger(j.maxAge))throw new TypeError(`option maxAge is invalid: ${j.maxAge}`);C+="; Max-Age="+j.maxAge}if(j.domain){if(!r.test(j.domain))throw new TypeError(`option domain is invalid: ${j.domain}`);C+="; Domain="+j.domain}if(j.path){if(!a.test(j.path))throw new TypeError(`option path is invalid: ${j.path}`);C+="; Path="+j.path}if(j.expires){if(!x(j.expires)||!Number.isFinite(j.expires.valueOf()))throw new TypeError(`option expires is invalid: ${j.expires}`);C+="; Expires="+j.expires.toUTCString()}if(j.httpOnly&&(C+="; HttpOnly"),j.secure&&(C+="; Secure"),j.partitioned&&(C+="; Partitioned"),j.priority)switch(typeof j.priority=="string"?j.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${j.priority}`)}if(j.sameSite)switch(typeof j.sameSite=="string"?j.sameSite.toLowerCase():j.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${j.sameSite}`)}return C}function v(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function x(b){return l.call(b)==="[object Date]"}return ec}BC();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var y0="popstate";function HC(e={}){function t(a,l){let{pathname:c,search:d,hash:f}=a.location;return Cp("",{pathname:c,search:d,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(a,l){return typeof l=="string"?l:pc(l)}return FC(t,r,null,e)}function an(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ns(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function qC(){return Math.random().toString(36).substring(2,10)}function b0(e,t){return{usr:e.state,key:e.key,idx:t}}function Cp(e,t,r=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Yl(t):t,state:r,key:t&&t.key||a||qC()}}function pc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Yl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function FC(e,t,r,a={}){let{window:l=document.defaultView,v5Compat:c=!1}=a,d=l.history,f="POP",h=null,p=v();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function v(){return(d.state||{idx:null}).idx}function x(){f="POP";let N=v(),C=N==null?null:N-p;p=N,h&&h({action:f,location:_.location,delta:C})}function b(N,C){f="PUSH";let E=Cp(_.location,N,C);p=v()+1;let T=b0(E,p),M=_.createHref(E);try{d.pushState(T,"",M)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;l.location.assign(M)}c&&h&&h({action:f,location:_.location,delta:1})}function w(N,C){f="REPLACE";let E=Cp(_.location,N,C);p=v();let T=b0(E,p),M=_.createHref(E);d.replaceState(T,"",M),c&&h&&h({action:f,location:_.location,delta:0})}function j(N){let C=l.location.origin!=="null"?l.location.origin:l.location.href,E=typeof N=="string"?N:pc(N);return E=E.replace(/ $/,"%20"),an(C,`No window.location.(origin|href) available to create URL for href: ${E}`),new URL(E,C)}let _={get action(){return f},get location(){return e(l,d)},listen(N){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(y0,x),h=N,()=>{l.removeEventListener(y0,x),h=null}},createHref(N){return t(l,N)},createURL:j,encodeLocation(N){let C=j(N);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:b,replace:w,go(N){return d.go(N)}};return _}function oj(e,t,r="/"){return VC(e,t,r,!1)}function VC(e,t,r,a){let l=typeof t=="string"?Yl(t):t,c=ta(l.pathname||"/",r);if(c==null)return null;let d=cj(e);YC(d);let f=null;for(let h=0;f==null&&h<d.length;++h){let p=rT(c);f=tT(d[h],p,a)}return f}function cj(e,t=[],r=[],a=""){let l=(c,d,f)=>{let h={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};h.relativePath.startsWith("/")&&(an(h.relativePath.startsWith(a),`Absolute route path "${h.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(a.length));let p=Js([a,h.relativePath]),v=r.concat(h);c.children&&c.children.length>0&&(an(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),cj(c.children,t,v,p)),!(c.path==null&&!c.index)&&t.push({path:p,score:JC(p,c.index),routesMeta:v})};return e.forEach((c,d)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))l(c,d);else for(let h of uj(c.path))l(c,d,h)}),t}function uj(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,l=r.endsWith("?"),c=r.replace(/\?$/,"");if(a.length===0)return l?[c,""]:[c];let d=uj(a.join("/")),f=[];return f.push(...d.map(h=>h===""?c:[c,h].join("/"))),l&&f.push(...d),f.map(h=>e.startsWith("/")&&h===""?"/":h)}function YC(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:eT(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var GC=/^:[\w-]+$/,WC=3,XC=2,KC=1,QC=10,ZC=-2,w0=e=>e==="*";function JC(e,t){let r=e.split("/"),a=r.length;return r.some(w0)&&(a+=ZC),t&&(a+=XC),r.filter(l=>!w0(l)).reduce((l,c)=>l+(GC.test(c)?WC:c===""?KC:QC),a)}function eT(e,t){return e.length===t.length&&e.slice(0,-1).every((a,l)=>a===t[l])?e[e.length-1]-t[t.length-1]:0}function tT(e,t,r=!1){let{routesMeta:a}=e,l={},c="/",d=[];for(let f=0;f<a.length;++f){let h=a[f],p=f===a.length-1,v=c==="/"?t:t.slice(c.length)||"/",x=Ad({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},v),b=h.route;if(!x&&p&&r&&!a[a.length-1].route.index&&(x=Ad({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},v)),!x)return null;Object.assign(l,x.params),d.push({params:l,pathname:Js([c,x.pathname]),pathnameBase:lT(Js([c,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(c=Js([c,x.pathnameBase]))}return d}function Ad(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=nT(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let c=l[0],d=c.replace(/(.)\/+$/,"$1"),f=l.slice(1);return{params:a.reduce((p,{paramName:v,isOptional:x},b)=>{if(v==="*"){let j=f[b]||"";d=c.slice(0,c.length-j.length).replace(/(.)\/+$/,"$1")}const w=f[b];return x&&!w?p[v]=void 0:p[v]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:d,pattern:e}}function nT(e,t=!1,r=!0){ns(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,h)=>(a.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),a]}function rT(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ns(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ta(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function sT(e,t="/"){let{pathname:r,search:a="",hash:l=""}=typeof e=="string"?Yl(e):e;return{pathname:r?r.startsWith("/")?r:aT(r,t):t,search:oT(a),hash:cT(l)}}function aT(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function Fm(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iT(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function cg(e){let t=iT(e);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function ug(e,t,r,a=!1){let l;typeof e=="string"?l=Yl(e):(l={...e},an(!l.pathname||!l.pathname.includes("?"),Fm("?","pathname","search",l)),an(!l.pathname||!l.pathname.includes("#"),Fm("#","pathname","hash",l)),an(!l.search||!l.search.includes("#"),Fm("#","search","hash",l)));let c=e===""||l.pathname==="",d=c?"/":l.pathname,f;if(d==null)f=r;else{let x=t.length-1;if(!a&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),x-=1;l.pathname=b.join("/")}f=x>=0?t[x]:"/"}let h=sT(l,f),p=d&&d!=="/"&&d.endsWith("/"),v=(c||d===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(p||v)&&(h.pathname+="/"),h}var Js=e=>e.join("/").replace(/\/\/+/g,"/"),lT=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oT=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cT=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function uT(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var dj=["POST","PUT","PATCH","DELETE"];new Set(dj);var dT=["GET",...dj];new Set(dT);var Gl=m.createContext(null);Gl.displayName="DataRouter";var Kd=m.createContext(null);Kd.displayName="DataRouterState";var fj=m.createContext({isTransitioning:!1});fj.displayName="ViewTransition";var fT=m.createContext(new Map);fT.displayName="Fetchers";var hT=m.createContext(null);hT.displayName="Await";var ds=m.createContext(null);ds.displayName="Navigation";var Tc=m.createContext(null);Tc.displayName="Location";var Xr=m.createContext({outlet:null,matches:[],isDataRoute:!1});Xr.displayName="Route";var dg=m.createContext(null);dg.displayName="RouteError";function mT(e,{relative:t}={}){an(Wl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=m.useContext(ds),{hash:l,pathname:c,search:d}=Rc(e,{relative:t}),f=c;return r!=="/"&&(f=c==="/"?r:Js([r,c])),a.createHref({pathname:f,search:d,hash:l})}function Wl(){return m.useContext(Tc)!=null}function sa(){return an(Wl(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(Tc).location}var hj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mj(e){m.useContext(ds).static||m.useLayoutEffect(e)}function ir(){let{isDataRoute:e}=m.useContext(Xr);return e?RT():pT()}function pT(){an(Wl(),"useNavigate() may be used only in the context of a <Router> component.");let e=m.useContext(Gl),{basename:t,navigator:r}=m.useContext(ds),{matches:a}=m.useContext(Xr),{pathname:l}=sa(),c=JSON.stringify(cg(a)),d=m.useRef(!1);return mj(()=>{d.current=!0}),m.useCallback((h,p={})=>{if(ns(d.current,hj),!d.current)return;if(typeof h=="number"){r.go(h);return}let v=ug(h,JSON.parse(c),l,p.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:Js([t,v.pathname])),(p.replace?r.replace:r.push)(v,p.state,p)},[t,r,c,l,e])}var gT=m.createContext(null);function vT(e){let t=m.useContext(Xr).outlet;return t&&m.createElement(gT.Provider,{value:e},t)}function vr(){let{matches:e}=m.useContext(Xr),t=e[e.length-1];return t?t.params:{}}function Rc(e,{relative:t}={}){let{matches:r}=m.useContext(Xr),{pathname:a}=sa(),l=JSON.stringify(cg(r));return m.useMemo(()=>ug(e,JSON.parse(l),a,t==="path"),[e,l,a,t])}function xT(e,t){return pj(e,t)}function pj(e,t,r,a){var E;an(Wl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l,static:c}=m.useContext(ds),{matches:d}=m.useContext(Xr),f=d[d.length-1],h=f?f.params:{},p=f?f.pathname:"/",v=f?f.pathnameBase:"/",x=f&&f.route;{let T=x&&x.path||"";gj(p,!x||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let b=sa(),w;if(t){let T=typeof t=="string"?Yl(t):t;an(v==="/"||((E=T.pathname)==null?void 0:E.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${T.pathname}" was given in the \`location\` prop.`),w=T}else w=b;let j=w.pathname||"/",_=j;if(v!=="/"){let T=v.replace(/^\//,"").split("/");_="/"+j.replace(/^\//,"").split("/").slice(T.length).join("/")}let N=!c&&r&&r.matches&&r.matches.length>0?r.matches:oj(e,{pathname:_});ns(x||N!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),ns(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=_T(N&&N.map(T=>Object.assign({},T,{params:Object.assign({},h,T.params),pathname:Js([v,l.encodeLocation?l.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?v:Js([v,l.encodeLocation?l.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),d,r,a);return t&&C?m.createElement(Tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},C):C}function yT(){let e=TT(),t=uT(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=m.createElement(m.Fragment,null,m.createElement("p",null,"💿 Hey developer 👋"),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:c},"ErrorBoundary")," or"," ",m.createElement("code",{style:c},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:l},r):null,d)}var bT=m.createElement(yT,null),wT=class extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?m.createElement(Xr.Provider,{value:this.props.routeContext},m.createElement(dg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jT({routeContext:e,match:t,children:r}){let a=m.useContext(Gl);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),m.createElement(Xr.Provider,{value:e},r)}function _T(e,t=[],r=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,c=r==null?void 0:r.errors;if(c!=null){let h=l.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);an(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let d=!1,f=-1;if(r)for(let h=0;h<l.length;h++){let p=l[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:v,errors:x}=r,b=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||b){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,p,v)=>{let x,b=!1,w=null,j=null;r&&(x=c&&p.route.id?c[p.route.id]:void 0,w=p.route.errorElement||bT,d&&(f<0&&v===0?(gj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,j=null):f===v&&(b=!0,j=p.route.hydrateFallbackElement||null)));let _=t.concat(l.slice(0,v+1)),N=()=>{let C;return x?C=w:b?C=j:p.route.Component?C=m.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,m.createElement(jT,{match:p,routeContext:{outlet:h,matches:_,isDataRoute:r!=null},children:C})};return r&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?m.createElement(wT,{location:r.location,revalidation:r.revalidation,component:w,error:x,children:N(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):N()},null)}function fg(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NT(e){let t=m.useContext(Gl);return an(t,fg(e)),t}function ST(e){let t=m.useContext(Kd);return an(t,fg(e)),t}function ET(e){let t=m.useContext(Xr);return an(t,fg(e)),t}function hg(e){let t=ET(e),r=t.matches[t.matches.length-1];return an(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function CT(){return hg("useRouteId")}function TT(){var a;let e=m.useContext(dg),t=ST("useRouteError"),r=hg("useRouteError");return e!==void 0?e:(a=t.errors)==null?void 0:a[r]}function RT(){let{router:e}=NT("useNavigate"),t=hg("useNavigate"),r=m.useRef(!1);return mj(()=>{r.current=!0}),m.useCallback(async(l,c={})=>{ns(r.current,hj),r.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...c}))},[e,t])}var j0={};function gj(e,t,r){!t&&!j0[e]&&(j0[e]=!0,ns(!1,r))}m.memo(MT);function MT({routes:e,future:t,state:r}){return pj(e,void 0,r,t)}function vj({to:e,replace:t,state:r,relative:a}){an(Wl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=m.useContext(ds);ns(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=m.useContext(Xr),{pathname:d}=sa(),f=ir(),h=ug(e,cg(c),d,a==="path"),p=JSON.stringify(h);return m.useEffect(()=>{f(JSON.parse(p),{replace:t,state:r,relative:a})},[f,p,a,t,r]),null}function xj(e){return vT(e.context)}function kt(e){an(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function AT({basename:e="/",children:t=null,location:r,navigationType:a="POP",navigator:l,static:c=!1}){an(!Wl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),f=m.useMemo(()=>({basename:d,navigator:l,static:c,future:{}}),[d,l,c]);typeof r=="string"&&(r=Yl(r));let{pathname:h="/",search:p="",hash:v="",state:x=null,key:b="default"}=r,w=m.useMemo(()=>{let j=ta(h,d);return j==null?null:{location:{pathname:j,search:p,hash:v,state:x,key:b},navigationType:a}},[d,h,p,v,x,b,a]);return ns(w!=null,`<Router basename="${d}"> is not able to match the URL "${h}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:m.createElement(ds.Provider,{value:f},m.createElement(Tc.Provider,{children:t,value:w}))}function kT({children:e,location:t}){return xT(Tp(e),t)}function Tp(e,t=[]){let r=[];return m.Children.forEach(e,(a,l)=>{if(!m.isValidElement(a))return;let c=[...t,l];if(a.type===m.Fragment){r.push.apply(r,Tp(a.props.children,c));return}an(a.type===kt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),an(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Tp(a.props.children,c)),r.push(d)}),r}var _d="get",Nd="application/x-www-form-urlencoded";function Qd(e){return e!=null&&typeof e.tagName=="string"}function DT(e){return Qd(e)&&e.tagName.toLowerCase()==="button"}function OT(e){return Qd(e)&&e.tagName.toLowerCase()==="form"}function PT(e){return Qd(e)&&e.tagName.toLowerCase()==="input"}function LT(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function IT(e,t){return e.button===0&&(!t||t==="_self")&&!LT(e)}var id=null;function zT(){if(id===null)try{new FormData(document.createElement("form"),0),id=!1}catch{id=!0}return id}var UT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vm(e){return e!=null&&!UT.has(e)?(ns(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nd}"`),null):e}function $T(e,t){let r,a,l,c,d;if(OT(e)){let f=e.getAttribute("action");a=f?ta(f,t):null,r=e.getAttribute("method")||_d,l=Vm(e.getAttribute("enctype"))||Nd,c=new FormData(e)}else if(DT(e)||PT(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||f.getAttribute("action");if(a=h?ta(h,t):null,r=e.getAttribute("formmethod")||f.getAttribute("method")||_d,l=Vm(e.getAttribute("formenctype"))||Vm(f.getAttribute("enctype"))||Nd,c=new FormData(f,e),!zT()){let{name:p,type:v,value:x}=e;if(v==="image"){let b=p?`${p}.`:"";c.append(`${b}x`,"0"),c.append(`${b}y`,"0")}else p&&c.append(p,x)}}else{if(Qd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=_d,a=null,l=Nd,d=e}return c&&l==="text/plain"&&(d=c,c=void 0),{action:a,method:r.toLowerCase(),encType:l,formData:c,body:d}}function mg(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function BT(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HT(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function qT(e,t,r){let a=await Promise.all(e.map(async l=>{let c=t.routes[l.route.id];if(c){let d=await BT(c,r);return d.links?d.links():[]}return[]}));return GT(a.flat(1).filter(HT).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function _0(e,t,r,a,l,c){let d=(h,p)=>r[p]?h.route.id!==r[p].route.id:!0,f=(h,p)=>{var v;return r[p].pathname!==h.pathname||((v=r[p].route.path)==null?void 0:v.endsWith("*"))&&r[p].params["*"]!==h.params["*"]};return c==="assets"?t.filter((h,p)=>d(h,p)||f(h,p)):c==="data"?t.filter((h,p)=>{var x;let v=a.routes[h.route.id];if(!v||!v.hasLoader)return!1;if(d(h,p)||f(h,p))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((x=r[0])==null?void 0:x.params)||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function FT(e,t,{includeHydrateFallback:r}={}){return VT(e.map(a=>{let l=t.routes[a.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function VT(e){return[...new Set(e)]}function YT(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}function GT(e,t){let r=new Set;return new Set(t),e.reduce((a,l)=>{let c=JSON.stringify(YT(l));return r.has(c)||(r.add(c),a.push({key:c,link:l})),a},[])}function WT(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&ta(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function yj(){let e=m.useContext(Gl);return mg(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function XT(){let e=m.useContext(Kd);return mg(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var pg=m.createContext(void 0);pg.displayName="FrameworkContext";function bj(){let e=m.useContext(pg);return mg(e,"You must render this element inside a <HydratedRouter> element"),e}function KT(e,t){let r=m.useContext(pg),[a,l]=m.useState(!1),[c,d]=m.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:p,onMouseLeave:v,onTouchStart:x}=t,b=m.useRef(null);m.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let _=C=>{C.forEach(E=>{d(E.isIntersecting)})},N=new IntersectionObserver(_,{threshold:.5});return b.current&&N.observe(b.current),()=>{N.disconnect()}}},[e]),m.useEffect(()=>{if(a){let _=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(_)}}},[a]);let w=()=>{l(!0)},j=()=>{l(!1),d(!1)};return r?e!=="intent"?[c,b,{}]:[c,b,{onFocus:tc(f,w),onBlur:tc(h,j),onMouseEnter:tc(p,w),onMouseLeave:tc(v,j),onTouchStart:tc(x,w)}]:[!1,b,{}]}function tc(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function QT({page:e,...t}){let{router:r}=yj(),a=m.useMemo(()=>oj(r.routes,e,r.basename),[r.routes,e,r.basename]);return a?m.createElement(JT,{page:e,matches:a,...t}):null}function ZT(e){let{manifest:t,routeModules:r}=bj(),[a,l]=m.useState([]);return m.useEffect(()=>{let c=!1;return qT(e,t,r).then(d=>{c||l(d)}),()=>{c=!0}},[e,t,r]),a}function JT({page:e,matches:t,...r}){let a=sa(),{manifest:l,routeModules:c}=bj(),{basename:d}=yj(),{loaderData:f,matches:h}=XT(),p=m.useMemo(()=>_0(e,t,h,l,a,"data"),[e,t,h,l,a]),v=m.useMemo(()=>_0(e,t,h,l,a,"assets"),[e,t,h,l,a]),x=m.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let j=new Set,_=!1;if(t.forEach(C=>{var T;let E=l.routes[C.route.id];!E||!E.hasLoader||(!p.some(M=>M.route.id===C.route.id)&&C.route.id in f&&((T=c[C.route.id])!=null&&T.shouldRevalidate)||E.hasClientLoader?_=!0:j.add(C.route.id))}),j.size===0)return[];let N=WT(e,d);return _&&j.size>0&&N.searchParams.set("_routes",t.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[N.pathname+N.search]},[d,f,a,l,p,t,e,c]),b=m.useMemo(()=>FT(v,l),[v,l]),w=ZT(v);return m.createElement(m.Fragment,null,x.map(j=>m.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),b.map(j=>m.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),w.map(({key:j,link:_})=>m.createElement("link",{key:j,..._})))}function eR(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var wj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wj&&(window.__reactRouterVersion="7.4.0")}catch{}function tR({basename:e,children:t,window:r}){let a=m.useRef();a.current==null&&(a.current=HC({window:r,v5Compat:!0}));let l=a.current,[c,d]=m.useState({action:l.action,location:l.location}),f=m.useCallback(h=>{m.startTransition(()=>d(h))},[d]);return m.useLayoutEffect(()=>l.listen(f),[l,f]),m.createElement(AT,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l})}var jj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,st=m.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:l,reloadDocument:c,replace:d,state:f,target:h,to:p,preventScrollReset:v,viewTransition:x,...b},w){let{basename:j}=m.useContext(ds),_=typeof p=="string"&&jj.test(p),N,C=!1;if(typeof p=="string"&&_&&(N=p,wj))try{let I=new URL(window.location.href),Y=p.startsWith("//")?new URL(I.protocol+p):new URL(p),ce=ta(Y.pathname,j);Y.origin===I.origin&&ce!=null?p=ce+Y.search+Y.hash:C=!0}catch{ns(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=mT(p,{relative:l}),[T,M,R]=KT(a,b),L=sR(p,{replace:d,state:f,target:h,preventScrollReset:v,relative:l,viewTransition:x});function H(I){t&&t(I),I.defaultPrevented||L(I)}let $=m.createElement("a",{...b,...R,href:N||E,onClick:C||c?t:H,ref:eR(w,M),target:h,"data-discover":!_&&r==="render"?"true":void 0});return T&&!_?m.createElement(m.Fragment,null,$,m.createElement(QT,{page:E})):$});st.displayName="Link";var _j=m.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:l=!1,style:c,to:d,viewTransition:f,children:h,...p},v){let x=Rc(d,{relative:p.relative}),b=sa(),w=m.useContext(Kd),{navigator:j,basename:_}=m.useContext(ds),N=w!=null&&cR(x)&&f===!0,C=j.encodeLocation?j.encodeLocation(x).pathname:x.pathname,E=b.pathname,T=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(E=E.toLowerCase(),T=T?T.toLowerCase():null,C=C.toLowerCase()),T&&_&&(T=ta(T,_)||T);const M=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let R=E===C||!l&&E.startsWith(C)&&E.charAt(M)==="/",L=T!=null&&(T===C||!l&&T.startsWith(C)&&T.charAt(C.length)==="/"),H={isActive:R,isPending:L,isTransitioning:N},$=R?t:void 0,I;typeof a=="function"?I=a(H):I=[a,R?"active":null,L?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let Y=typeof c=="function"?c(H):c;return m.createElement(st,{...p,"aria-current":$,className:I,ref:v,style:Y,to:d,viewTransition:f},typeof h=="function"?h(H):h)});_j.displayName="NavLink";var nR=m.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:l,state:c,method:d=_d,action:f,onSubmit:h,relative:p,preventScrollReset:v,viewTransition:x,...b},w)=>{let j=lR(),_=oR(f,{relative:p}),N=d.toLowerCase()==="get"?"get":"post",C=typeof f=="string"&&jj.test(f),E=T=>{if(h&&h(T),T.defaultPrevented)return;T.preventDefault();let M=T.nativeEvent.submitter,R=(M==null?void 0:M.getAttribute("formmethod"))||d;j(M||T.currentTarget,{fetcherKey:t,method:R,navigate:r,replace:l,state:c,relative:p,preventScrollReset:v,viewTransition:x})};return m.createElement("form",{ref:w,method:N,action:_,onSubmit:a?h:E,...b,"data-discover":!C&&e==="render"?"true":void 0})});nR.displayName="Form";function rR(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nj(e){let t=m.useContext(Gl);return an(t,rR(e)),t}function sR(e,{target:t,replace:r,state:a,preventScrollReset:l,relative:c,viewTransition:d}={}){let f=ir(),h=sa(),p=Rc(e,{relative:c});return m.useCallback(v=>{if(IT(v,t)){v.preventDefault();let x=r!==void 0?r:pc(h)===pc(p);f(e,{replace:x,state:a,preventScrollReset:l,relative:c,viewTransition:d})}},[h,f,p,r,a,t,e,l,c,d])}var aR=0,iR=()=>`__${String(++aR)}__`;function lR(){let{router:e}=Nj("useSubmit"),{basename:t}=m.useContext(ds),r=CT();return m.useCallback(async(a,l={})=>{let{action:c,method:d,encType:f,formData:h,body:p}=$T(a,t);if(l.navigate===!1){let v=l.fetcherKey||iR();await e.fetch(v,r,l.action||c,{preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||d,formEncType:l.encType||f,flushSync:l.flushSync})}else await e.navigate(l.action||c,{preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||d,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,r])}function oR(e,{relative:t}={}){let{basename:r}=m.useContext(ds),a=m.useContext(Xr);an(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),c={...Rc(e||".",{relative:t})},d=sa();if(e==null){c.search=d.search;let f=new URLSearchParams(c.search),h=f.getAll("index");if(h.some(v=>v==="")){f.delete("index"),h.filter(x=>x).forEach(x=>f.append("index",x));let v=f.toString();c.search=v?`?${v}`:""}}return(!e||e===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:Js([r,c.pathname])),pc(c)}function cR(e,t={}){let r=m.useContext(fj);an(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Nj("useViewTransitionState"),l=Rc(e,{relative:t.relative});if(!r.isTransitioning)return!1;let c=ta(r.currentLocation.pathname,a)||r.currentLocation.pathname,d=ta(r.nextLocation.pathname,a)||r.nextLocation.pathname;return Ad(l.pathname,d)!=null||Ad(l.pathname,c)!=null}new TextEncoder;var _s=lj();const Sj=Xd(_s),uR="modulepreload",dR=function(e){return"/"+e},N0={},Il=function(t,r,a){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));l=Promise.allSettled(r.map(h=>{if(h=dR(h),h in N0)return;N0[h]=!0;const p=h.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":uR,p||(x.as="script"),x.crossOrigin="",x.href=h,f&&x.setAttribute("nonce",f),document.head.appendChild(x),p)return new Promise((b,w)=>{x.addEventListener("load",b),x.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return l.then(d=>{for(const f of d||[])f.status==="rejected"&&c(f.reason);return t().catch(c)})},fR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Il(async()=>{const{default:a}=await Promise.resolve().then(()=>Xl);return{default:a}},[]).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)};class gg extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class hR extends gg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class mR extends gg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class pR extends gg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Rp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Rp||(Rp={}));var gR=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class vR{constructor(t,{headers:r={},customFetch:a,region:l=Rp.Any}={}){this.url=t,this.headers=r,this.region=l,this.fetch=fR(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var a;return gR(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:d}=r;let f={},{region:h}=r;h||(h=this.region),h&&h!=="any"&&(f["x-region"]=h);let p;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",p=d):typeof d=="string"?(f["Content-Type"]="text/plain",p=d):typeof FormData<"u"&&d instanceof FormData?p=d:(f["Content-Type"]="application/json",p=JSON.stringify(d)));const v=yield this.fetch(`${this.url}/${t}`,{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:p}).catch(j=>{throw new hR(j)}),x=v.headers.get("x-relay-error");if(x&&x==="true")throw new mR(v);if(!v.ok)throw new pR(v);let b=((a=v.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield v.json():b==="application/octet-stream"?w=yield v.blob():b==="text/event-stream"?w=v:b==="multipart/form-data"?w=yield v.formData():w=yield v.text(),{data:w,error:null}}catch(l){return{data:null,error:l}}})}}var zn={},gl={},vl={},xl={},yl={},bl={},xR=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zl=xR();const yR=zl.fetch,Ej=zl.fetch.bind(zl),Cj=zl.Headers,bR=zl.Request,wR=zl.Response,Xl=Object.freeze(Object.defineProperty({__proto__:null,Headers:Cj,Request:bR,Response:wR,default:Ej,fetch:yR},Symbol.toStringTag,{value:"Module"})),jR=RC(Xl);var ld={},S0;function Tj(){if(S0)return ld;S0=1,Object.defineProperty(ld,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ld.default=e,ld}var E0;function Rj(){if(E0)return bl;E0=1;var e=bl&&bl.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(bl,"__esModule",{value:!0});const t=e(jR),r=e(Tj());class a{constructor(c){this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=c.headers,this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=c.shouldThrowOnError,this.signal=c.signal,this.isMaybeSingle=c.isMaybeSingle,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,d){return this.headers=Object.assign({},this.headers),this.headers[c]=d,this}then(c,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const f=this.fetch;let h=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var v,x,b;let w=null,j=null,_=null,N=p.status,C=p.statusText;if(p.ok){if(this.method!=="HEAD"){const R=await p.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?j=R:j=JSON.parse(R))}const T=(v=this.headers.Prefer)===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),M=(x=p.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");T&&M&&M.length>1&&(_=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(w={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,_=null,N=406,C="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const T=await p.text();try{w=JSON.parse(T),Array.isArray(w)&&p.status===404&&(j=[],w=null,N=200,C="OK")}catch{p.status===404&&T===""?(N=204,C="No Content"):w={message:T}}if(w&&this.isMaybeSingle&&(!((b=w==null?void 0:w.details)===null||b===void 0)&&b.includes("0 rows"))&&(w=null,N=200,C="OK"),w&&this.shouldThrowOnError)throw new r.default(w)}return{error:w,data:j,count:_,status:N,statusText:C}});return this.shouldThrowOnError||(h=h.catch(p=>{var v,x,b;return{error:{message:`${(v=p==null?void 0:p.name)!==null&&v!==void 0?v:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(x=p==null?void 0:p.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(b=p==null?void 0:p.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),h.then(c,d)}returns(){return this}overrideTypes(){return this}}return bl.default=a,bl}var C0;function Mj(){if(C0)return yl;C0=1;var e=yl&&yl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(yl,"__esModule",{value:!0});const t=e(Rj());class r extends t.default{select(l){let c=!1;const d=(l??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",d),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(l,{ascending:c=!0,nullsFirst:d,foreignTable:f,referencedTable:h=f}={}){const p=h?`${h}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${l}.${c?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:d=c}={}){const f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${l}`),this}range(l,c,{foreignTable:d,referencedTable:f=d}={}){const h=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(h,`${l}`),this.url.searchParams.set(p,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:l=!1,verbose:c=!1,settings:d=!1,buffers:f=!1,wal:h=!1,format:p="text"}={}){var v;const x=[l?"analyze":null,c?"verbose":null,d?"settings":null,f?"buffers":null,h?"wal":null].filter(Boolean).join("|"),b=(v=this.headers.Accept)!==null&&v!==void 0?v:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${p}; for="${b}"; options=${x};`,p==="json"?this:this}rollback(){var l;return((l=this.headers.Prefer)!==null&&l!==void 0?l:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return yl.default=r,yl}var T0;function vg(){if(T0)return xl;T0=1;var e=xl&&xl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(xl,"__esModule",{value:!0});const t=e(Mj());class r extends t.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const d=Array.from(new Set(c)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:d,type:f}={}){let h="";f==="plain"?h="pl":f==="phrase"?h="ph":f==="websearch"&&(h="w");const p=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${h}fts${p}.${c}`),this}match(l){return Object.entries(l).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(l,c,d){return this.url.searchParams.append(l,`not.${c}.${d}`),this}or(l,{foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${l})`),this}filter(l,c,d){return this.url.searchParams.append(l,`${c}.${d}`),this}}return xl.default=r,xl}var R0;function Aj(){if(R0)return vl;R0=1;var e=vl&&vl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(vl,"__esModule",{value:!0});const t=e(vg());class r{constructor(l,{headers:c={},schema:d,fetch:f}){this.url=l,this.headers=c,this.schema=d,this.fetch=f}select(l,{head:c=!1,count:d}={}){const f=c?"HEAD":"GET";let h=!1;const p=(l??"*").split("").map(v=>/\s/.test(v)&&!h?"":(v==='"'&&(h=!h),v)).join("");return this.url.searchParams.set("select",p),d&&(this.headers.Prefer=`count=${d}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(l,{count:c,defaultToNull:d=!0}={}){const f="POST",h=[];if(this.headers.Prefer&&h.push(this.headers.Prefer),c&&h.push(`count=${c}`),d||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(l)){const p=l.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(p.length>0){const v=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}upsert(l,{onConflict:c,ignoreDuplicates:d=!1,count:f,defaultToNull:h=!0}={}){const p="POST",v=[`resolution=${d?"ignore":"merge"}-duplicates`];if(c!==void 0&&this.url.searchParams.set("on_conflict",c),this.headers.Prefer&&v.push(this.headers.Prefer),f&&v.push(`count=${f}`),h||v.push("missing=default"),this.headers.Prefer=v.join(","),Array.isArray(l)){const x=l.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(x.length>0){const b=[...new Set(x)].map(w=>`"${w}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}update(l,{count:c}={}){const d="PATCH",f=[];return this.headers.Prefer&&f.push(this.headers.Prefer),c&&f.push(`count=${c}`),this.headers.Prefer=f.join(","),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}delete({count:l}={}){const c="DELETE",d=[];return l&&d.push(`count=${l}`),this.headers.Prefer&&d.unshift(this.headers.Prefer),this.headers.Prefer=d.join(","),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return vl.default=r,vl}var nc={},rc={},M0;function _R(){return M0||(M0=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.version=void 0,rc.version="0.0.0-automated"),rc}var A0;function NR(){if(A0)return nc;A0=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.DEFAULT_HEADERS=void 0;const e=_R();return nc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},nc}var k0;function SR(){if(k0)return gl;k0=1;var e=gl&&gl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(gl,"__esModule",{value:!0});const t=e(Aj()),r=e(vg()),a=NR();class l{constructor(d,{headers:f={},schema:h,fetch:p}={}){this.url=d,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),f),this.schemaName=h,this.fetch=p}from(d){const f=new URL(`${this.url}/${d}`);return new t.default(f,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new l(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:h=!1,get:p=!1,count:v}={}){let x;const b=new URL(`${this.url}/rpc/${d}`);let w;h||p?(x=h?"HEAD":"GET",Object.entries(f).filter(([_,N])=>N!==void 0).map(([_,N])=>[_,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([_,N])=>{b.searchParams.append(_,N)})):(x="POST",w=f);const j=Object.assign({},this.headers);return v&&(j.Prefer=`count=${v}`),new r.default({method:x,url:b,headers:j,schema:this.schemaName,body:w,fetch:this.fetch,allowEmpty:!1})}}return gl.default=l,gl}var D0;function ER(){if(D0)return zn;D0=1;var e=zn&&zn.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(zn,"__esModule",{value:!0}),zn.PostgrestError=zn.PostgrestBuilder=zn.PostgrestTransformBuilder=zn.PostgrestFilterBuilder=zn.PostgrestQueryBuilder=zn.PostgrestClient=void 0;const t=e(SR());zn.PostgrestClient=t.default;const r=e(Aj());zn.PostgrestQueryBuilder=r.default;const a=e(vg());zn.PostgrestFilterBuilder=a.default;const l=e(Mj());zn.PostgrestTransformBuilder=l.default;const c=e(Rj());zn.PostgrestBuilder=c.default;const d=e(Tj());return zn.PostgrestError=d.default,zn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:d.default},zn}var CR=ER();const TR=Xd(CR),{PostgrestClient:RR,PostgrestQueryBuilder:BB,PostgrestFilterBuilder:HB,PostgrestTransformBuilder:qB,PostgrestBuilder:FB,PostgrestError:VB}=TR,MR="2.11.2",AR={"X-Client-Info":`realtime-js/${MR}`},kR="1.0.0",kj=1e4,DR=1e3;var Ml;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ml||(Ml={}));var Sr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Sr||(Sr={}));var ts;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ts||(ts={}));var Mp;(function(e){e.websocket="websocket"})(Mp||(Mp={}));var Si;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Si||(Si={}));class OR{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,r,a)}_decodeBroadcast(t,r,a){const l=r.getUint8(1),c=r.getUint8(2);let d=this.HEADER_LENGTH+2;const f=a.decode(t.slice(d,d+l));d=d+l;const h=a.decode(t.slice(d,d+c));d=d+c;const p=JSON.parse(a.decode(t.slice(d,t.byteLength)));return{ref:null,topic:f,event:h,payload:p}}}class Dj{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(nn||(nn={}));const O0=(e,t,r={})=>{var a;const l=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((c,d)=>(c[d]=PR(d,e,t,l),c),{})},PR=(e,t,r,a)=>{const l=t.find(f=>f.name===e),c=l==null?void 0:l.type,d=r[e];return c&&!a.includes(c)?Oj(c,d):Ap(d)},Oj=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return UR(t,r)}switch(e){case nn.bool:return LR(t);case nn.float4:case nn.float8:case nn.int2:case nn.int4:case nn.int8:case nn.numeric:case nn.oid:return IR(t);case nn.json:case nn.jsonb:return zR(t);case nn.timestamp:return $R(t);case nn.abstime:case nn.date:case nn.daterange:case nn.int4range:case nn.int8range:case nn.money:case nn.reltime:case nn.text:case nn.time:case nn.timestamptz:case nn.timetz:case nn.tsrange:case nn.tstzrange:return Ap(t);default:return Ap(t)}},Ap=e=>e,LR=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},IR=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},zR=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},UR=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let c;const d=e.slice(1,r);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(f=>Oj(t,f))}return e},$R=e=>typeof e=="string"?e.replace(" ","T"):e,Pj=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Ym{constructor(t,r,a={},l=kj){this.channel=t,this.event=r,this.payload=a,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var P0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(P0||(P0={}));class oc{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},l=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oc.syncState(this.state,l,c,d),this.pendingDiffs.forEach(h=>{this.state=oc.syncDiff(this.state,h,c,d)}),this.pendingDiffs=[],f()}),this.channel._on(a.diff,{},l=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=oc.syncDiff(this.state,l,c,d),f())}),this.onJoin((l,c,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:d})}),this.onLeave((l,c,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,l){const c=this.cloneDeep(t),d=this.transformState(r),f={},h={};return this.map(c,(p,v)=>{d[p]||(h[p]=v)}),this.map(d,(p,v)=>{const x=c[p];if(x){const b=v.map(N=>N.presence_ref),w=x.map(N=>N.presence_ref),j=v.filter(N=>w.indexOf(N.presence_ref)<0),_=x.filter(N=>b.indexOf(N.presence_ref)<0);j.length>0&&(f[p]=j),_.length>0&&(h[p]=_)}else f[p]=v}),this.syncDiff(c,{joins:f,leaves:h},a,l)}static syncDiff(t,r,a,l){const{joins:c,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),l||(l=()=>{}),this.map(c,(f,h)=>{var p;const v=(p=t[f])!==null&&p!==void 0?p:[];if(t[f]=this.cloneDeep(h),v.length>0){const x=t[f].map(w=>w.presence_ref),b=v.filter(w=>x.indexOf(w.presence_ref)<0);t[f].unshift(...b)}a(f,v,h)}),this.map(d,(f,h)=>{let p=t[f];if(!p)return;const v=h.map(x=>x.presence_ref);p=p.filter(x=>v.indexOf(x.presence_ref)<0),t[f]=p,l(f,p,h),p.length===0&&delete t[f]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const l=t[a];return"metas"in l?r[a]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[a]=l,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var L0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(L0||(L0={}));var I0;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(I0||(I0={}));var Zs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Zs||(Zs={}));class xg{constructor(t,r={config:{}},a){this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=Sr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ym(this,ts.join,this.params,this.timeout),this.rejoinTimer=new Dj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Sr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Sr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Sr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Sr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ts.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new oc(this),this.broadcastEndpointURL=Pj(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var a,l;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:c,presence:d,private:f}}=this.params;this._onError(v=>t==null?void 0:t(Zs.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(Zs.CLOSED));const h={},p={broadcast:c,presence:d,postgres_changes:(l=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(v=>v.filter))!==null&&l!==void 0?l:[],private:f};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var x;if(this.socket.setAuth(),v===void 0){t==null||t(Zs.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,w=(x=b==null?void 0:b.length)!==null&&x!==void 0?x:0,j=[];for(let _=0;_<w;_++){const N=b[_],{filter:{event:C,schema:E,table:T,filter:M}}=N,R=v&&v[_];if(R&&R.event===C&&R.schema===E&&R.table===T&&R.filter===M)j.push(Object.assign(Object.assign({},N),{id:R.id}));else{this.unsubscribe(),t==null||t(Zs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(Zs.SUBSCRIBED);return}}).receive("error",v=>{t==null||t(Zs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Zs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this._on(t,r,a)}async send(t,r={}){var a,l;if(!this._canPush()&&t.type==="broadcast"){const{event:c,payload:d}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((l=p.body)===null||l===void 0?void 0:l.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,f,h;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||h===void 0)&&h.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("error",()=>c("error")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Sr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ts.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(a=>{const l=new Ym(this,ts.leave,{},t);l.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),l.send(),this._canPush()||l.trigger("ok",{})})}async _fetchWithTimeout(t,r,a){const l=new AbortController,c=setTimeout(()=>l.abort(),a),d=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(c),d}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Ym(this,t,r,a);return this._canPush()?l.send():(l.startTimeout(),this.pushBuffer.push(l)),l}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var l,c;const d=t.toLocaleLowerCase(),{close:f,error:h,leave:p,join:v}=ts;if(a&&[f,h,p,v].indexOf(d)>=0&&a!==this._joinRef())return;let b=this._onMessage(d,r,a);if(r&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(w=>{var j,_,N;return((j=w.filter)===null||j===void 0?void 0:j.event)==="*"||((N=(_=w.filter)===null||_===void 0?void 0:_.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===d}).map(w=>w.callback(b,a)):(c=this.bindings[d])===null||c===void 0||c.filter(w=>{var j,_,N,C,E,T;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in w){const M=w.id,R=(j=w.filter)===null||j===void 0?void 0:j.event;return M&&((_=r.ids)===null||_===void 0?void 0:_.includes(M))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((N=r.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const M=(E=(C=w==null?void 0:w.filter)===null||C===void 0?void 0:C.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return M==="*"||M===((T=r==null?void 0:r.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===d}).map(w=>{if(typeof b=="object"&&"ids"in b){const j=b.data,{schema:_,table:N,commit_timestamp:C,type:E,errors:T}=j;b=Object.assign(Object.assign({},{schema:_,table:N,commit_timestamp:C,eventType:E,new:{},old:{},errors:T}),this._getPayloadRecords(j))}w.callback(b,a)})}_isClosed(){return this.state===Sr.closed}_isJoined(){return this.state===Sr.joined}_isJoining(){return this.state===Sr.joining}_isLeaving(){return this.state===Sr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const l=t.toLocaleLowerCase(),c={type:l,filter:r,callback:a};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&xg.isEqual(l.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ts.close,{},t)}_onError(t){this._on(ts.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Sr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=O0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=O0(t.columns,t.old_record)),r}}const BR=()=>{},HR=typeof WebSocket<"u",qR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class FR{constructor(t,r){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=AR,this.params={},this.timeout=kj,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=BR,this.conn=null,this.sendBuffer=[],this.serializer=new OR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=c=>{let d;return c?d=c:typeof fetch>"u"?d=(...f)=>Il(async()=>{const{default:h}=await Promise.resolve().then(()=>Xl);return{default:h}},void 0).then(({default:h})=>h(...f)):d=fetch,(...f)=>d(...f)},this.endPoint=`${t}/${Mp.websocket}`,this.httpEndpoint=Pj(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const l=(a=r==null?void 0:r.params)===null||a===void 0?void 0:a.apikey;if(l&&(this.accessTokenValue=l,this.apiKey=l),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:c=>[1e3,2e3,5e3,1e4][c-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(c,d)=>d(JSON.stringify(c)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Dj(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(HR){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new VR(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Il(async()=>{const{default:t}=await import("./browser-Rl0MUE8D.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kR}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Ml.connecting:return Si.Connecting;case Ml.open:return Si.Open;case Ml.closing:return Si.Closing;default:return Si.Closed}}isConnected(){return this.connectionState()===Si.Open}channel(t,r={config:{}}){const a=new xg(`realtime:${t}`,r,this);return this.channels.push(a),a}push(t){const{topic:r,event:a,payload:l,ref:c}=t,d=()=>{this.encode(t,f=>{var h;(h=this.conn)===null||h===void 0||h.send(f)})};this.log("push",`${r} ${a} (${c})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let a=null;try{a=JSON.parse(atob(r.split(".")[1]))}catch{}if(a&&a.exp&&!(Math.floor(Date.now()/1e3)-a.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`);this.accessTokenValue=r,this.channels.forEach(l=>{r&&l.updateJoinPayload({access_token:r}),l.joinedOnce&&l._isJoined()&&l._push(ts.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(DR,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:a,event:l,payload:c,ref:d}=r;d&&d===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${c.status||""} ${a} ${l} ${d&&"("+d+")"||""}`,c),this.channels.filter(f=>f._isMember(a)).forEach(f=>f._trigger(l,c,d)),this.stateChangeCallbacks.message.forEach(f=>f(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ts.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${t}${a}${l}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([qR],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}}class VR{constructor(t,r,a){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ml.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=a.close}}class yg extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function $n(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class YR extends yg{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class kp extends yg{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var GR=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const Lj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Il(async()=>{const{default:a}=await Promise.resolve().then(()=>Xl);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},WR=()=>GR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Il(()=>Promise.resolve().then(()=>Xl),void 0)).Response:Response}),Dp=e=>{if(Array.isArray(e))return e.map(r=>Dp(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,a])=>{const l=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));t[l]=Dp(a)}),t};var Oi=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const Gm=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XR=(e,t,r)=>Oi(void 0,void 0,void 0,function*(){const a=yield WR();e instanceof a&&!(r!=null&&r.noResolveJson)?e.json().then(l=>{t(new YR(Gm(l),e.status||500))}).catch(l=>{t(new kp(Gm(l),l))}):t(new kp(Gm(e),e))}),KR=(e,t,r,a)=>{const l={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a&&(l.body=JSON.stringify(a)),Object.assign(Object.assign({},l),r))};function Mc(e,t,r,a,l,c){return Oi(this,void 0,void 0,function*(){return new Promise((d,f)=>{e(r,KR(t,a,l,c)).then(h=>{if(!h.ok)throw h;return a!=null&&a.noResolveJson?h:h.json()}).then(h=>d(h)).catch(h=>XR(h,f,a))})})}function kd(e,t,r,a){return Oi(this,void 0,void 0,function*(){return Mc(e,"GET",t,r,a)})}function La(e,t,r,a,l){return Oi(this,void 0,void 0,function*(){return Mc(e,"POST",t,a,l,r)})}function QR(e,t,r,a,l){return Oi(this,void 0,void 0,function*(){return Mc(e,"PUT",t,a,l,r)})}function ZR(e,t,r,a){return Oi(this,void 0,void 0,function*(){return Mc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function Ij(e,t,r,a,l){return Oi(this,void 0,void 0,function*(){return Mc(e,"DELETE",t,a,l,r)})}var fr=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const JR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},z0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class eM{constructor(t,r={},a,l){this.url=t,this.headers=r,this.bucketId=a,this.fetch=Lj(l)}uploadOrUpdate(t,r,a,l){return fr(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},z0),l);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const h=d.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),h&&c.append("metadata",this.encodeMetadata(h)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl),h&&c.append("metadata",this.encodeMetadata(h))):(c=a,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,h&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),l!=null&&l.headers&&(f=Object.assign(Object.assign({},f),l.headers));const p=this._removeEmptyFolders(r),v=this._getFinalPath(p),x=yield this.fetch(`${this.url}/object/${v}`,Object.assign({method:t,body:c,headers:f},d!=null&&d.duplex?{duplex:d.duplex}:{})),b=yield x.json();return x.ok?{data:{path:p,id:b.Id,fullPath:b.Key},error:null}:{data:null,error:b}}catch(c){if($n(c))return{data:null,error:c};throw c}})}upload(t,r,a){return fr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,l){return fr(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),f=new URL(this.url+`/object/upload/sign/${d}`);f.searchParams.set("token",r);try{let h;const p=Object.assign({upsert:z0.upsert},l),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&a instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",a)):typeof FormData<"u"&&a instanceof FormData?(h=a,h.append("cacheControl",p.cacheControl)):(h=a,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const x=yield this.fetch(f.toString(),{method:"PUT",body:h,headers:v}),b=yield x.json();return x.ok?{data:{path:c,fullPath:b.Key},error:null}:{data:null,error:b}}catch(h){if($n(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,r){return fr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const l=Object.assign({},this.headers);r!=null&&r.upsert&&(l["x-upsert"]="true");const c=yield La(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:l}),d=new URL(this.url+c.url),f=d.searchParams.get("token");if(!f)throw new yg("No token returned by API");return{data:{signedUrl:d.toString(),path:t,token:f},error:null}}catch(a){if($n(a))return{data:null,error:a};throw a}})}update(t,r,a){return fr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return fr(this,void 0,void 0,function*(){try{return{data:yield La(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(l){if($n(l))return{data:null,error:l};throw l}})}copy(t,r,a){return fr(this,void 0,void 0,function*(){try{return{data:{path:(yield La(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if($n(l))return{data:null,error:l};throw l}})}createSignedUrl(t,r,a){return fr(this,void 0,void 0,function*(){try{let l=this._getFinalPath(t),c=yield La(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:r},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const d=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(l){if($n(l))return{data:null,error:l};throw l}})}createSignedUrls(t,r,a){return fr(this,void 0,void 0,function*(){try{const l=yield La(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),c=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:l.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${c}`):null})),error:null}}catch(l){if($n(l))return{data:null,error:l};throw l}})}download(t,r){return fr(this,void 0,void 0,function*(){const l=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),d=c?`?${c}`:"";try{const f=this._getFinalPath(t);return{data:yield(yield kd(this.fetch,`${this.url}/${l}/${f}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if($n(f))return{data:null,error:f};throw f}})}info(t){return fr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield kd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Dp(a),error:null}}catch(a){if($n(a))return{data:null,error:a};throw a}})}exists(t){return fr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield ZR(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if($n(a)&&a instanceof kp){const l=a.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),l=[],c=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&l.push(c);const f=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});h!==""&&l.push(h);let p=l.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${a}${p}`)}}}remove(t){return fr(this,void 0,void 0,function*(){try{return{data:yield Ij(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if($n(r))return{data:null,error:r};throw r}})}list(t,r,a){return fr(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},JR),r),{prefix:t||""});return{data:yield La(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},a),error:null}}catch(l){if($n(l))return{data:null,error:l};throw l}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const tM="2.7.1",nM={"X-Client-Info":`storage-js/${tM}`};var wl=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class rM{constructor(t,r={},a){this.url=t,this.headers=Object.assign(Object.assign({},nM),r),this.fetch=Lj(a)}listBuckets(){return wl(this,void 0,void 0,function*(){try{return{data:yield kd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if($n(t))return{data:null,error:t};throw t}})}getBucket(t){return wl(this,void 0,void 0,function*(){try{return{data:yield kd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if($n(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return wl(this,void 0,void 0,function*(){try{return{data:yield La(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if($n(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return wl(this,void 0,void 0,function*(){try{return{data:yield QR(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if($n(a))return{data:null,error:a};throw a}})}emptyBucket(t){return wl(this,void 0,void 0,function*(){try{return{data:yield La(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if($n(r))return{data:null,error:r};throw r}})}deleteBucket(t){return wl(this,void 0,void 0,function*(){try{return{data:yield Ij(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if($n(r))return{data:null,error:r};throw r}})}}class sM extends rM{constructor(t,r={},a){super(t,r,a)}from(t){return new eM(this.url,this.headers,t,this.fetch)}}const aM="2.49.3";let ac="";typeof Deno<"u"?ac="deno":typeof document<"u"?ac="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ac="react-native":ac="node";const iM={"X-Client-Info":`supabase-js-${ac}/${aM}`},lM={headers:iM},oM={schema:"public"},cM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uM={};var dM=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const fM=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ej:t=fetch,(...r)=>t(...r)},hM=()=>typeof Headers>"u"?Cj:Headers,mM=(e,t,r)=>{const a=fM(r),l=hM();return(c,d)=>dM(void 0,void 0,void 0,function*(){var f;const h=(f=yield t())!==null&&f!==void 0?f:e;let p=new l(d==null?void 0:d.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),a(c,Object.assign(Object.assign({},d),{headers:p}))})};var pM=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};function gM(e){return e.replace(/\/$/,"")}function vM(e,t){const{db:r,auth:a,realtime:l,global:c}=e,{db:d,auth:f,realtime:h,global:p}=t,v={db:Object.assign(Object.assign({},d),r),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},h),l),global:Object.assign(Object.assign({},p),c),accessToken:()=>pM(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}const zj="2.69.1",Rl=30*1e3,Op=3,Wm=Op*Rl,xM="http://localhost:9999",yM="supabase.auth.token",bM={"X-Client-Info":`gotrue-js/${zj}`},Pp="X-Supabase-Api-Version",Uj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jM=6e5;class bg extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function ut(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class _M extends bg{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function NM(e){return ut(e)&&e.name==="AuthApiError"}class $j extends bg{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Va extends bg{constructor(t,r,a,l){super(t,a,l),this.name=r,this.status=a}}class Da extends Va{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function SM(e){return ut(e)&&e.name==="AuthSessionMissingError"}class Xm extends Va{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class od extends Va{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class cd extends Va{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function EM(e){return ut(e)&&e.name==="AuthImplicitGrantRedirectError"}class U0 extends Va{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lp extends Va{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Km(e){return ut(e)&&e.name==="AuthRetryableFetchError"}class $0 extends Va{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class cc extends Va{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const B0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),H0=` 	
\r=`.split(""),CM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<H0.length;t+=1)e[H0[t].charCodeAt(0)]=-2;for(let t=0;t<B0.length;t+=1)e[B0[t].charCodeAt(0)]=t;return e})();function Bj(e,t,r){const a=CM[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function q0(e){const t=[],r=d=>{t.push(String.fromCodePoint(d))},a={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=d=>{MM(d,a,r)};for(let d=0;d<e.length;d+=1)Bj(e.charCodeAt(d),l,c);return t.join("")}function TM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function RM(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const l=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}TM(a,t)}}function MM(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function AM(e){const t=[],r={queue:0,queuedBits:0},a=l=>{t.push(l)};for(let l=0;l<e.length;l+=1)Bj(e.charCodeAt(l),r,a);return new Uint8Array(t)}function kM(e){const t=[];return RM(e,r=>t.push(r)),new Uint8Array(t)}function DM(e){return Math.round(Date.now()/1e3)+e}function OM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ys=()=>typeof window<"u"&&typeof document<"u",bi={tested:!1,writable:!1},uc=()=>{if(!ys())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bi.tested)return bi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),bi.tested=!0,bi.writable=!0}catch{bi.tested=!0,bi.writable=!1}return bi.writable};function PM(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,c)=>{t[c]=l})}catch{}return r.searchParams.forEach((a,l)=>{t[l]=a}),t}const Hj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Il(async()=>{const{default:a}=await Promise.resolve().then(()=>Xl);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},LM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",qj=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ud=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},dd=async(e,t)=>{await e.removeItem(t)};class Zd{constructor(){this.promise=new Zd.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Zd.promiseConstructor=Promise;function Qm(e){const t=e.split(".");if(t.length!==3)throw new cc("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!wM.test(t[a]))throw new cc("JWT not in base64url format");return{header:JSON.parse(q0(t[0])),payload:JSON.parse(q0(t[1])),signature:AM(t[2]),raw:{header:t[0],payload:t[1]}}}async function IM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function zM(e,t){return new Promise((a,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await e(c);if(!t(c,null,d)){a(d);return}}catch(d){if(!t(c,d)){l(d);return}}})()})}function UM(e){return("0"+e.toString(16)).substr(-2)}function $M(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let l="";for(let c=0;c<56;c++)l+=r.charAt(Math.floor(Math.random()*a));return l}return crypto.getRandomValues(t),Array.from(t,UM).join("")}async function BM(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(a);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function HM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await BM(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jl(e,t,r=!1){const a=$M();let l=a;r&&(l+="/PASSWORD_RECOVERY"),await qj(e,`${t}-code-verifier`,l);const c=await HM(a);return[c,a===c?"plain":"s256"]}const qM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function FM(e){const t=e.headers.get(Pp);if(!t||!t.match(qM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function VM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function YM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var GM=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const _i=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),WM=[502,503,504];async function F0(e){var t;if(!LM(e))throw new Lp(_i(e),0);if(WM.includes(e.status))throw new Lp(_i(e),e.status);let r;try{r=await e.json()}catch(c){throw new $j(_i(c),c)}let a;const l=FM(e);if(l&&l.getTime()>=Uj["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new $0(_i(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Da}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new $0(_i(r),e.status,r.weak_password.reasons);throw new _M(_i(r),e.status||500,a)}const XM=(e,t,r,a)=>{const l={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),l.body=JSON.stringify(a),Object.assign(Object.assign({},l),r))};async function jt(e,t,r,a){var l;const c=Object.assign({},a==null?void 0:a.headers);c[Pp]||(c[Pp]=Uj["2024-01-01"].name),a!=null&&a.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const d=(l=a==null?void 0:a.query)!==null&&l!==void 0?l:{};a!=null&&a.redirectTo&&(d.redirect_to=a.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",h=await KM(e,t,r+f,{headers:c,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(h):{data:Object.assign({},h),error:null}}async function KM(e,t,r,a,l,c){const d=XM(t,a,l,c);let f;try{f=await e(r,Object.assign({},d))}catch(h){throw console.error(h),new Lp(_i(h),0)}if(f.ok||await F0(f),a!=null&&a.noResolveJson)return f;try{return await f.json()}catch(h){await F0(h)}}function Oa(e){var t;let r=null;eA(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=DM(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:a},error:null}}function V0(e){const t=Oa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function za(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function QM(e){return{data:e,error:null}}function ZM(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:l,verification_type:c}=e,d=GM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:r,hashed_token:a,redirect_to:l,verification_type:c},h=Object.assign({},d);return{data:{properties:f,user:h},error:null}}function JM(e){return e}function eA(e){return e.access_token&&e.refresh_token&&e.expires_in}var tA=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};class nA{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=Hj(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await jt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(ut(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await jt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:za})}catch(a){if(ut(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=tA(t,["options"]),l=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(l.new_email=a==null?void 0:a.newEmail,delete l.newEmail),await jt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:ZM,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ut(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await jt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:za})}catch(r){if(ut(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,l,c,d,f,h;try{const p={nextPage:null,lastPage:0,total:0},v=await jt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(c=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:JM});if(v.error)throw v.error;const x=await v.json(),b=(d=v.headers.get("x-total-count"))!==null&&d!==void 0?d:0,w=(h=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(j=>{const _=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(j.split(";")[1].split("=")[1]);p[`${N}Page`]=_}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(ut(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){try{return await jt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:za})}catch(r){if(ut(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await jt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:za})}catch(a){if(ut(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){try{return await jt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:za})}catch(a){if(ut(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){try{const{data:r,error:a}=await jt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:a}}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await jt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}}}const rA={getItem:e=>uc()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{uc()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{uc()&&globalThis.localStorage.removeItem(e)}};function Y0(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function sA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _l={debug:!!(globalThis&&uc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Fj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class aA extends Fj{}async function iA(e,t,r){_l.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),_l.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async l=>{if(l){_l.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,l.name);try{return await r()}finally{_l.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,l.name)}}else{if(t===0)throw _l.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new aA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(_l.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}sA();const lA={url:xM,storageKey:yM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function G0(e,t,r){return await r()}class gc{constructor(t){var r,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=gc.nextInstanceID,gc.nextInstanceID+=1,this.instanceID>0&&ys()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},lA),t);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new nA({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Hj(l.fetch),this.lock=l.lock||G0,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:ys()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=iA:this.lock=G0,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?l.storage?this.storage=l.storage:uc()?this.storage=rA:(this.memoryStorage={},this.storage=Y0(this.memoryStorage)):(this.memoryStorage={},this.storage=Y0(this.memoryStorage)),ys()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${zj}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=PM(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),ys()&&this.detectSessionInUrl&&a!=="none"){const{data:l,error:c}=await this._getSessionFromURL(r,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),EM(c)){const h=(t=c.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:f}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ut(r)?{error:r}:{error:new $j("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,l;try{const c=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(l=t==null?void 0:t.options)===null||l===void 0?void 0:l.captchaToken}},xform:Oa}),{data:d,error:f}=c;if(f||!d)return{data:{user:null,session:null},error:f};const h=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(ut(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(t){var r,a,l;try{let c;if("email"in t){const{email:v,password:x,options:b}=t;let w=null,j=null;this.flowType==="pkce"&&([w,j]=await jl(this.storage,this.storageKey)),c=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:v,password:x,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:w,code_challenge_method:j},xform:Oa})}else if("phone"in t){const{phone:v,password:x,options:b}=t;c=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:x,data:(a=b==null?void 0:b.data)!==null&&a!==void 0?a:{},channel:(l=b==null?void 0:b.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Oa})}else throw new od("You must provide either an email or phone number and a password");const{data:d,error:f}=c;if(f||!d)return{data:{user:null,session:null},error:f};const h=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(ut(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(t){try{let r;if("email"in t){const{email:c,password:d,options:f}=t;r=await jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:V0})}else if("phone"in t){const{phone:c,password:d,options:f}=t;r=await jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:V0})}else throw new od("You must provide either an email or phone number and a password");const{data:a,error:l}=r;return l?{data:{user:null,session:null},error:l}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Xm}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:l})}catch(r){if(ut(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,a,l,c;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await ud(this.storage,`${this.storageKey}-code-verifier`),[a,l]=(r??"").split("/");try{const{data:c,error:d}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Oa});if(await dd(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new Xm}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:d})}catch(c){if(ut(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(t){try{const{options:r,provider:a,token:l,access_token:c,nonce:d}=t,f=await jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:l,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Oa}),{data:h,error:p}=f;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Xm}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(r){if(ut(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,a,l,c,d;try{if("email"in t){const{email:f,options:h}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await jl(this.storage,this.storageKey));const{error:x}=await jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in t){const{phone:f,options:h}=t,{data:p,error:v}=await jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(l=h==null?void 0:h.data)!==null&&l!==void 0?l:{},create_user:(c=h==null?void 0:h.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(d=h==null?void 0:h.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v}}throw new od("You must provide either an email or phone number.")}catch(f){if(ut(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(t){var r,a;try{let l,c;"options"in t&&(l=(r=t.options)===null||r===void 0?void 0:r.redirectTo,c=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:d,error:f}=await jt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:Oa});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const h=d.session,p=d.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(l){if(ut(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(t){var r,a,l;try{let c=null,d=null;return this.flowType==="pkce"&&([c,d]=await jl(this.storage,this.storageKey)),await jt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((l=t==null?void 0:t.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:QM})}catch(c){if(ut(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new Da;const{error:l}=await jt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:l}})}catch(t){if(ut(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:l,options:c}=t,{error:d}=await jt(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in t){const{phone:a,type:l,options:c}=t,{data:d,error:f}=await jt(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new od("You must provide either an email or phone number and a type")}catch(r){if(ut(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ud(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Wm:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.storage.isServer){let d=this.suppressGetSessionWarning;t=new Proxy(t,{get:(h,p,v)=>(!d&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,v))})}return{data:{session:t},error:null}}const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:za}):await this._useSession(async r=>{var a,l,c;const{data:d,error:f}=r;if(f)throw f;return!(!((a=d.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Da}:await jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:za})})}catch(r){if(ut(r))return SM(r)&&(await this._removeSession(),await dd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new Da;const d=l.session;let f=null,h=null;this.flowType==="pkce"&&t.email!=null&&([f,h]=await jl(this.storage,this.storageKey));const{data:p,error:v}=await jt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:h}),jwt:d.access_token,xform:za});if(v)throw v;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(a){if(ut(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Da;const r=Date.now()/1e3;let a=r,l=!0,c=null;const{payload:d}=Qm(t.access_token);if(d.exp&&(a=d.exp,l=a<=r),l){const{session:f,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:h}=await this._getUser(t.access_token);if(h)throw h;c={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(ut(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:d,error:f}=r;if(f)throw f;t=(a=d.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new Da;const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ut(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ys())throw new cd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new cd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new U0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new U0("No code detected.");const{data:E,error:T}=await this._exchangeCodeForSession(t.code);if(T)throw T;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:l,access_token:c,refresh_token:d,expires_in:f,expires_at:h,token_type:p}=t;if(!c||!f||!d||!p)throw new cd("No session defined in URL");const v=Math.round(Date.now()/1e3),x=parseInt(f);let b=v+x;h&&(b=parseInt(h));const w=b-v;w*1e3<=Rl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${x}s`);const j=b-x;v-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,b,v):v-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,b,v);const{data:_,error:N}=await this._getUser(c);if(N)throw N;const C={provider_token:a,provider_refresh_token:l,access_token:c,expires_in:x,expires_at:b,refresh_token:d,token_type:p,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:t.type},error:null}}catch(a){if(ut(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ud(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:l,error:c}=r;if(c)return{error:c};const d=(a=l.session)===null||a===void 0?void 0:a.access_token;if(d){const{error:f}=await this.admin.signOut(d,t);if(f&&!(NM(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return t!=="others"&&(await this._removeSession(),await dd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=OM(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,l;try{const{data:{session:c},error:d}=r;if(d)throw d;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,r={}){let a=null,l=null;this.flowType==="pkce"&&([a,l]=await jl(this.storage,this.storageKey,!0));try{return await jt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(ut(c))return{data:null,error:c};throw c}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:a,error:l}=await this._useSession(async c=>{var d,f,h,p,v;const{data:x,error:b}=c;if(b)throw b;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await jt(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(l)throw l;return ys()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(ut(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,l;const{data:c,error:d}=r;if(d)throw d;return await jt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await zM(async l=>(l>0&&await IM(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await jt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Oa})),(l,c)=>{const d=200*Math.pow(2,l);return c&&Km(c)&&Date.now()+d-a<Rl})}catch(a){if(this._debug(r,"error",a),ut(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),ys()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await ud(this.storage,this.storageKey);if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Wm;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${Wm}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Km(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new Da;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Zd;const{data:c,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!c.session)throw new Da;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={session:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(l,"error",c),ut(c)){const d={session:null,error:c};return Km(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(t,r,a=!0){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,r)}catch(h){c.push(h)}});if(await Promise.all(d),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await qj(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await dd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ys()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Rl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((a.expires_at*1e3-t)/Rl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Rl}ms, refresh threshold is ${Op} ticks`),l<=Op&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Fj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ys()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const l=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&l.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&l.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,d]=await jl(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(f.toString())}if(a!=null&&a.queryParams){const c=new URLSearchParams(a.queryParams);l.push(c.toString())}return a!=null&&a.skipBrowserRedirect&&l.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${l.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:l,error:c}=r;return c?{data:null,error:c}:await jt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=l==null?void 0:l.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,l;const{data:c,error:d}=r;if(d)return{data:null,error:d};const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:h,error:p}=await jt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(a=c==null?void 0:c.session)===null||a===void 0?void 0:a.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&(!((l=h==null?void 0:h.totp)===null||l===void 0)&&l.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:l,error:c}=r;if(c)return{data:null,error:c};const{data:d,error:f}=await jt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=l==null?void 0:l.session)===null||a===void 0?void 0:a.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(r){if(ut(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:l,error:c}=r;return c?{data:null,error:c}:await jt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=l==null?void 0:l.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(ut(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=(t==null?void 0:t.factors)||[],l=a.filter(d=>d.factor_type==="totp"&&d.status==="verified"),c=a.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:a,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,a;const{data:{session:l},error:c}=t;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Qm(l.access_token);let f=null;d.aal&&(f=d.aal);let h=f;((a=(r=l.user.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(h="aal2");const v=d.amr||[];return{data:{currentLevel:f,nextLevel:h,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(d=>d.kid===t);if(a||(a=this.jwks.keys.find(d=>d.kid===t),a&&this.jwks_cached_at+jM>Date.now()))return a;const{data:l,error:c}=await jt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;if(!l.keys||l.keys.length===0)throw new cc("JWKS is empty");if(this.jwks=l,this.jwks_cached_at=Date.now(),a=l.keys.find(d=>d.kid===t),!a)throw new cc("No matching signing key found in JWKS");return a}async getClaims(t,r={keys:[]}){try{let a=t;if(!a){const{data:w,error:j}=await this.getSession();if(j||!w.session)return{data:null,error:j};a=w.session.access_token}const{header:l,payload:c,signature:d,raw:{header:f,payload:h}}=Qm(a);if(VM(c.exp),!l.kid||l.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:w}=await this.getUser(a);if(w)throw w;return{data:{claims:c,header:l,signature:d},error:null}}const p=YM(l.alg),v=await this.fetchJwk(l.kid,r),x=await crypto.subtle.importKey("jwk",v,p,!0,["verify"]);if(!await crypto.subtle.verify(p,x,d,kM(`${f}.${h}`)))throw new cc("Invalid JWT signature");return{data:{claims:c,header:l,signature:d},error:null}}catch(a){if(ut(a))return{data:null,error:a};throw a}}}gc.nextInstanceID=0;const oA=gc;class cA extends oA{constructor(t){super(t)}}var uA=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class dA{constructor(t,r,a){var l,c,d;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const f=gM(t);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:oM,realtime:uM,auth:Object.assign(Object.assign({},cM),{storageKey:h}),global:lM},v=vM(a??{},p);this.storageKey=(l=v.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=v.global.headers)!==null&&c!==void 0?c:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(x,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=v.auth)!==null&&d!==void 0?d:{},this.headers,v.global.fetch),this.fetch=mM(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new RR(`${f}/rest/v1`,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),v.accessToken||this._listenForAuthEvents()}get functions(){return new vR(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new sM(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},a={}){return this.rest.rpc(t,r,a)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return uA(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:l,storageKey:c,flowType:d,lock:f,debug:h},p,v){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cA({url:this.authUrl,headers:Object.assign(Object.assign({},x),p),storageKey:c,autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:l,flowType:d,lock:f,debug:h,fetch:v,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new FR(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,r,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fA=(e,t,r)=>new dA(e,t,r),hA="http://127.0.0.1:54321",mA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0",se=fA(hA,mA),Vj=m.createContext({session:null,user:null,loading:!0}),pA=({children:e})=>{const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(!0);m.useEffect(()=>{se.auth.getSession().then(({data:{session:h}})=>{r(h),l((h==null?void 0:h.user)??null),d(!1);const{data:{subscription:p}}=se.auth.onAuthStateChange((v,x)=>{console.log("Auth state changed:",v,x),r(x),l((x==null?void 0:x.user)??null)});return()=>{p==null||p.unsubscribe()}}).catch(h=>{console.error("Error getting initial session:",h),d(!1)})},[]);const f={session:t,user:a,loading:c};return s.jsx(Vj.Provider,{value:f,children:e})},wg=()=>{const e=m.useContext(Vj);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};function gA(e,t){const r=m.createContext(t),a=c=>{const{children:d,...f}=c,h=m.useMemo(()=>f,Object.values(f));return s.jsx(r.Provider,{value:h,children:d})};a.displayName=e+"Provider";function l(c){const d=m.useContext(r);if(d)return d;if(t!==void 0)return t;throw new Error(`\`${c}\` must be used within \`${e}\``)}return[a,l]}function lr(e,t=[]){let r=[];function a(c,d){const f=m.createContext(d),h=r.length;r=[...r,d];const p=x=>{var C;const{scope:b,children:w,...j}=x,_=((C=b==null?void 0:b[e])==null?void 0:C[h])||f,N=m.useMemo(()=>j,Object.values(j));return s.jsx(_.Provider,{value:N,children:w})};p.displayName=c+"Provider";function v(x,b){var _;const w=((_=b==null?void 0:b[e])==null?void 0:_[h])||f,j=m.useContext(w);if(j)return j;if(d!==void 0)return d;throw new Error(`\`${x}\` must be used within \`${c}\``)}return[p,v]}const l=()=>{const c=r.map(d=>m.createContext(d));return function(f){const h=(f==null?void 0:f[e])||c;return m.useMemo(()=>({[`__scope${e}`]:{...f,[e]:h}}),[f,h])}};return l.scopeName=e,[a,vA(l,...t)]}function vA(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const a=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(c){const d=a.reduce((f,{useScope:h,scopeName:p})=>{const x=h(c)[`__scope${p}`];return{...f,...x}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return r.scopeName=t.scopeName,r}function Tr(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...r)=>{var a;return(a=t.current)==null?void 0:a.call(t,...r)},[])}var Gn=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{};function W0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Jd(...e){return t=>{let r=!1;const a=e.map(l=>{const c=W0(l,t);return!r&&typeof c=="function"&&(r=!0),c});if(r)return()=>{for(let l=0;l<a.length;l++){const c=a[l];typeof c=="function"?c():W0(e[l],null)}}}}function _t(...e){return m.useCallback(Jd(...e),e)}var Cs=m.forwardRef((e,t)=>{const{children:r,...a}=e,l=m.Children.toArray(r),c=l.find(xA);if(c){const d=c.props.children,f=l.map(h=>h===c?m.Children.count(d)>1?m.Children.only(null):m.isValidElement(d)?d.props.children:null:h);return s.jsx(Ip,{...a,ref:t,children:m.isValidElement(d)?m.cloneElement(d,void 0,f):null})}return s.jsx(Ip,{...a,ref:t,children:r})});Cs.displayName="Slot";var Ip=m.forwardRef((e,t)=>{const{children:r,...a}=e;if(m.isValidElement(r)){const l=bA(r),c=yA(a,r.props);return r.type!==m.Fragment&&(c.ref=t?Jd(t,l):l),m.cloneElement(r,c)}return m.Children.count(r)>1?m.Children.only(null):null});Ip.displayName="SlotClone";var jg=({children:e})=>s.jsx(s.Fragment,{children:e});function xA(e){return m.isValidElement(e)&&e.type===jg}function yA(e,t){const r={...t};for(const a in t){const l=e[a],c=t[a];/^on[A-Z]/.test(a)?l&&c?r[a]=(...f)=>{c(...f),l(...f)}:l&&(r[a]=l):a==="style"?r[a]={...l,...c}:a==="className"&&(r[a]=[l,c].filter(Boolean).join(" "))}return{...e,...r}}function bA(e){var a,l;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(l=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:l.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var wA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Je=wA.reduce((e,t)=>{const r=m.forwardRef((a,l)=>{const{asChild:c,...d}=a,f=c?Cs:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(f,{...d,ref:l})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Yj(e,t){e&&_s.flushSync(()=>e.dispatchEvent(t))}var _g="Avatar",[jA,YB]=lr(_g),[_A,Gj]=jA(_g),Wj=m.forwardRef((e,t)=>{const{__scopeAvatar:r,...a}=e,[l,c]=m.useState("idle");return s.jsx(_A,{scope:r,imageLoadingStatus:l,onImageLoadingStatusChange:c,children:s.jsx(Je.span,{...a,ref:t})})});Wj.displayName=_g;var Xj="AvatarImage",Kj=m.forwardRef((e,t)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:l=()=>{},...c}=e,d=Gj(Xj,r),f=NA(a,c.referrerPolicy),h=Tr(p=>{l(p),d.onImageLoadingStatusChange(p)});return Gn(()=>{f!=="idle"&&h(f)},[f,h]),f==="loaded"?s.jsx(Je.img,{...c,ref:t,src:a}):null});Kj.displayName=Xj;var Qj="AvatarFallback",Zj=m.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:a,...l}=e,c=Gj(Qj,r),[d,f]=m.useState(a===void 0);return m.useEffect(()=>{if(a!==void 0){const h=window.setTimeout(()=>f(!0),a);return()=>window.clearTimeout(h)}},[a]),d&&c.imageLoadingStatus!=="loaded"?s.jsx(Je.span,{...l,ref:t}):null});Zj.displayName=Qj;function NA(e,t){const[r,a]=m.useState("idle");return Gn(()=>{if(!e){a("error");return}let l=!0;const c=new window.Image,d=f=>()=>{l&&a(f)};return a("loading"),c.onload=d("loaded"),c.onerror=d("error"),c.src=e,t&&(c.referrerPolicy=t),()=>{l=!1}},[e,t]),r}var SA=Wj,EA=Kj,CA=Zj;function Jj(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=Jj(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function e1(){for(var e,t,r=0,a="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=Jj(e))&&(a&&(a+=" "),a+=t);return a}const Ng="-",TA=e=>{const t=MA(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:d=>{const f=d.split(Ng);return f[0]===""&&f.length!==1&&f.shift(),t1(f,t)||RA(d)},getConflictingClassGroupIds:(d,f)=>{const h=r[d]||[];return f&&a[d]?[...h,...a[d]]:h}}},t1=(e,t)=>{var d;if(e.length===0)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),l=a?t1(e.slice(1),a):void 0;if(l)return l;if(t.validators.length===0)return;const c=e.join(Ng);return(d=t.validators.find(({validator:f})=>f(c)))==null?void 0:d.classGroupId},X0=/^\[(.+)\]$/,RA=e=>{if(X0.test(e)){const t=X0.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},MA=e=>{const{theme:t,classGroups:r}=e,a={nextPart:new Map,validators:[]};for(const l in r)zp(r[l],a,l,t);return a},zp=(e,t,r,a)=>{e.forEach(l=>{if(typeof l=="string"){const c=l===""?t:K0(t,l);c.classGroupId=r;return}if(typeof l=="function"){if(AA(l)){zp(l(a),t,r,a);return}t.validators.push({validator:l,classGroupId:r});return}Object.entries(l).forEach(([c,d])=>{zp(d,K0(t,c),r,a)})})},K0=(e,t)=>{let r=e;return t.split(Ng).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},AA=e=>e.isThemeGetter,kA=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,a=new Map;const l=(c,d)=>{r.set(c,d),t++,t>e&&(t=0,a=r,r=new Map)};return{get(c){let d=r.get(c);if(d!==void 0)return d;if((d=a.get(c))!==void 0)return l(c,d),d},set(c,d){r.has(c)?r.set(c,d):l(c,d)}}},Up="!",$p=":",DA=$p.length,OA=e=>{const{prefix:t,experimentalParseClassName:r}=e;let a=l=>{const c=[];let d=0,f=0,h=0,p;for(let j=0;j<l.length;j++){let _=l[j];if(d===0&&f===0){if(_===$p){c.push(l.slice(h,j)),h=j+DA;continue}if(_==="/"){p=j;continue}}_==="["?d++:_==="]"?d--:_==="("?f++:_===")"&&f--}const v=c.length===0?l:l.substring(h),x=PA(v),b=x!==v,w=p&&p>h?p-h:void 0;return{modifiers:c,hasImportantModifier:b,baseClassName:x,maybePostfixModifierPosition:w}};if(t){const l=t+$p,c=a;a=d=>d.startsWith(l)?c(d.substring(l.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:d,maybePostfixModifierPosition:void 0}}if(r){const l=a;a=c=>r({className:c,parseClassName:l})}return a},PA=e=>e.endsWith(Up)?e.substring(0,e.length-1):e.startsWith(Up)?e.substring(1):e,LA=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const l=[];let c=[];return a.forEach(d=>{d[0]==="["||t[d]?(l.push(...c.sort(),d),c=[]):c.push(d)}),l.push(...c.sort()),l}},IA=e=>({cache:kA(e.cacheSize),parseClassName:OA(e),sortModifiers:LA(e),...TA(e)}),zA=/\s+/,UA=(e,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:l,sortModifiers:c}=t,d=[],f=e.trim().split(zA);let h="";for(let p=f.length-1;p>=0;p-=1){const v=f[p],{isExternal:x,modifiers:b,hasImportantModifier:w,baseClassName:j,maybePostfixModifierPosition:_}=r(v);if(x){h=v+(h.length>0?" "+h:h);continue}let N=!!_,C=a(N?j.substring(0,_):j);if(!C){if(!N){h=v+(h.length>0?" "+h:h);continue}if(C=a(j),!C){h=v+(h.length>0?" "+h:h);continue}N=!1}const E=c(b).join(":"),T=w?E+Up:E,M=T+C;if(d.includes(M))continue;d.push(M);const R=l(C,N);for(let L=0;L<R.length;++L){const H=R[L];d.push(T+H)}h=v+(h.length>0?" "+h:h)}return h};function $A(){let e=0,t,r,a="";for(;e<arguments.length;)(t=arguments[e++])&&(r=n1(t))&&(a&&(a+=" "),a+=r);return a}const n1=e=>{if(typeof e=="string")return e;let t,r="";for(let a=0;a<e.length;a++)e[a]&&(t=n1(e[a]))&&(r&&(r+=" "),r+=t);return r};function BA(e,...t){let r,a,l,c=d;function d(h){const p=t.reduce((v,x)=>x(v),e());return r=IA(p),a=r.cache.get,l=r.cache.set,c=f,f(h)}function f(h){const p=a(h);if(p)return p;const v=UA(h,r);return l(h,v),v}return function(){return c($A.apply(null,arguments))}}const Un=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},r1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,s1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,HA=/^\d+\/\d+$/,qA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,FA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,VA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,YA=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,GA=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Nl=e=>HA.test(e),wt=e=>!!e&&!Number.isNaN(Number(e)),wi=e=>!!e&&Number.isInteger(Number(e)),Q0=e=>e.endsWith("%")&&wt(e.slice(0,-1)),Aa=e=>qA.test(e),WA=()=>!0,XA=e=>FA.test(e)&&!VA.test(e),Sg=()=>!1,KA=e=>YA.test(e),QA=e=>GA.test(e),ZA=e=>!Ue(e)&&!$e(e),JA=e=>Kl(e,l1,Sg),Ue=e=>r1.test(e),ji=e=>Kl(e,o1,XA),Zm=e=>Kl(e,uk,wt),ek=e=>Kl(e,a1,Sg),tk=e=>Kl(e,i1,QA),nk=e=>Kl(e,Sg,KA),$e=e=>s1.test(e),fd=e=>Ql(e,o1),rk=e=>Ql(e,dk),sk=e=>Ql(e,a1),ak=e=>Ql(e,l1),ik=e=>Ql(e,i1),lk=e=>Ql(e,fk,!0),Kl=(e,t,r)=>{const a=r1.exec(e);return a?a[1]?t(a[1]):r(a[2]):!1},Ql=(e,t,r=!1)=>{const a=s1.exec(e);return a?a[1]?t(a[1]):r:!1},a1=e=>e==="position",ok=new Set(["image","url"]),i1=e=>ok.has(e),ck=new Set(["length","size","percentage"]),l1=e=>ck.has(e),o1=e=>e==="length",uk=e=>e==="number",dk=e=>e==="family-name",fk=e=>e==="shadow",hk=()=>{const e=Un("color"),t=Un("font"),r=Un("text"),a=Un("font-weight"),l=Un("tracking"),c=Un("leading"),d=Un("breakpoint"),f=Un("container"),h=Un("spacing"),p=Un("radius"),v=Un("shadow"),x=Un("inset-shadow"),b=Un("drop-shadow"),w=Un("blur"),j=Un("perspective"),_=Un("aspect"),N=Un("ease"),C=Un("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],L=()=>[$e,Ue,h],H=()=>[Nl,"full","auto",...L()],$=()=>[wi,"none","subgrid",$e,Ue],I=()=>["auto",{span:["full",wi,$e,Ue]},$e,Ue],Y=()=>[wi,"auto",$e,Ue],ce=()=>["auto","min","max","fr",$e,Ue],te=()=>["start","end","center","between","around","evenly","stretch","baseline"],q=()=>["start","end","center","stretch"],le=()=>["auto",...L()],ue=()=>[Nl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...L()],O=()=>[e,$e,Ue],G=()=>[Q0,ji],B=()=>["","none","full",p,$e,Ue],ee=()=>["",wt,fd,ji],k=()=>["solid","dashed","dotted","double"],P=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["","none",w,$e,Ue],X=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",$e,Ue],D=()=>["none",wt,$e,Ue],U=()=>["none",wt,$e,Ue],F=()=>[wt,$e,Ue],K=()=>[Nl,"full",...L()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Aa],breakpoint:[Aa],color:[WA],container:[Aa],"drop-shadow":[Aa],ease:["in","out","in-out"],font:[ZA],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Aa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Aa],shadow:[Aa],spacing:["px",wt],text:[Aa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Nl,Ue,$e,_]}],container:["container"],columns:[{columns:[wt,Ue,$e,f]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...T(),Ue,$e]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:H()}],"inset-x":[{"inset-x":H()}],"inset-y":[{"inset-y":H()}],start:[{start:H()}],end:[{end:H()}],top:[{top:H()}],right:[{right:H()}],bottom:[{bottom:H()}],left:[{left:H()}],visibility:["visible","invisible","collapse"],z:[{z:[wi,"auto",$e,Ue]}],basis:[{basis:[Nl,"full","auto",f,...L()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[wt,Nl,"auto","initial","none",Ue]}],grow:[{grow:["",wt,$e,Ue]}],shrink:[{shrink:["",wt,$e,Ue]}],order:[{order:[wi,"first","last","none",$e,Ue]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:I()}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:I()}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ce()}],"auto-rows":[{"auto-rows":ce()}],gap:[{gap:L()}],"gap-x":[{"gap-x":L()}],"gap-y":[{"gap-y":L()}],"justify-content":[{justify:[...te(),"normal"]}],"justify-items":[{"justify-items":[...q(),"normal"]}],"justify-self":[{"justify-self":["auto",...q()]}],"align-content":[{content:["normal",...te()]}],"align-items":[{items:[...q(),"baseline"]}],"align-self":[{self:["auto",...q(),"baseline"]}],"place-content":[{"place-content":te()}],"place-items":[{"place-items":[...q(),"baseline"]}],"place-self":[{"place-self":["auto",...q()]}],p:[{p:L()}],px:[{px:L()}],py:[{py:L()}],ps:[{ps:L()}],pe:[{pe:L()}],pt:[{pt:L()}],pr:[{pr:L()}],pb:[{pb:L()}],pl:[{pl:L()}],m:[{m:le()}],mx:[{mx:le()}],my:[{my:le()}],ms:[{ms:le()}],me:[{me:le()}],mt:[{mt:le()}],mr:[{mr:le()}],mb:[{mb:le()}],ml:[{ml:le()}],"space-x":[{"space-x":L()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":L()}],"space-y-reverse":["space-y-reverse"],size:[{size:ue()}],w:[{w:[f,"screen",...ue()]}],"min-w":[{"min-w":[f,"screen","none",...ue()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[d]},...ue()]}],h:[{h:["screen",...ue()]}],"min-h":[{"min-h":["screen","none",...ue()]}],"max-h":[{"max-h":["screen",...ue()]}],"font-size":[{text:["base",r,fd,ji]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,$e,Zm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Q0,Ue]}],"font-family":[{font:[rk,Ue,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,$e,Ue]}],"line-clamp":[{"line-clamp":[wt,"none",$e,Zm]}],leading:[{leading:[c,...L()]}],"list-image":[{"list-image":["none",$e,Ue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",$e,Ue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...k(),"wavy"]}],"text-decoration-thickness":[{decoration:[wt,"from-font","auto",$e,ji]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[wt,"auto",$e,Ue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$e,Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$e,Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...T(),sk,ek]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",ak,JA]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wi,$e,Ue],radial:["",$e,Ue],conic:[wi,$e,Ue]},ik,tk]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:B()}],"rounded-s":[{"rounded-s":B()}],"rounded-e":[{"rounded-e":B()}],"rounded-t":[{"rounded-t":B()}],"rounded-r":[{"rounded-r":B()}],"rounded-b":[{"rounded-b":B()}],"rounded-l":[{"rounded-l":B()}],"rounded-ss":[{"rounded-ss":B()}],"rounded-se":[{"rounded-se":B()}],"rounded-ee":[{"rounded-ee":B()}],"rounded-es":[{"rounded-es":B()}],"rounded-tl":[{"rounded-tl":B()}],"rounded-tr":[{"rounded-tr":B()}],"rounded-br":[{"rounded-br":B()}],"rounded-bl":[{"rounded-bl":B()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...k(),"hidden","none"]}],"divide-style":[{divide:[...k(),"hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[...k(),"none","hidden"]}],"outline-offset":[{"outline-offset":[wt,$e,Ue]}],"outline-w":[{outline:["",wt,fd,ji]}],"outline-color":[{outline:[e]}],shadow:[{shadow:["","none",v,lk,nk]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",$e,Ue,x]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[wt,ji]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":O()}],opacity:[{opacity:[wt,$e,Ue]}],"mix-blend":[{"mix-blend":[...P(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":P()}],filter:[{filter:["","none",$e,Ue]}],blur:[{blur:V()}],brightness:[{brightness:[wt,$e,Ue]}],contrast:[{contrast:[wt,$e,Ue]}],"drop-shadow":[{"drop-shadow":["","none",b,$e,Ue]}],grayscale:[{grayscale:["",wt,$e,Ue]}],"hue-rotate":[{"hue-rotate":[wt,$e,Ue]}],invert:[{invert:["",wt,$e,Ue]}],saturate:[{saturate:[wt,$e,Ue]}],sepia:[{sepia:["",wt,$e,Ue]}],"backdrop-filter":[{"backdrop-filter":["","none",$e,Ue]}],"backdrop-blur":[{"backdrop-blur":V()}],"backdrop-brightness":[{"backdrop-brightness":[wt,$e,Ue]}],"backdrop-contrast":[{"backdrop-contrast":[wt,$e,Ue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",wt,$e,Ue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[wt,$e,Ue]}],"backdrop-invert":[{"backdrop-invert":["",wt,$e,Ue]}],"backdrop-opacity":[{"backdrop-opacity":[wt,$e,Ue]}],"backdrop-saturate":[{"backdrop-saturate":[wt,$e,Ue]}],"backdrop-sepia":[{"backdrop-sepia":["",wt,$e,Ue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":L()}],"border-spacing-x":[{"border-spacing-x":L()}],"border-spacing-y":[{"border-spacing-y":L()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",$e,Ue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[wt,"initial",$e,Ue]}],ease:[{ease:["linear","initial",N,$e,Ue]}],delay:[{delay:[wt,$e,Ue]}],animate:[{animate:["none",C,$e,Ue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,$e,Ue]}],"perspective-origin":[{"perspective-origin":X()}],rotate:[{rotate:D()}],"rotate-x":[{"rotate-x":D()}],"rotate-y":[{"rotate-y":D()}],"rotate-z":[{"rotate-z":D()}],scale:[{scale:U()}],"scale-x":[{"scale-x":U()}],"scale-y":[{"scale-y":U()}],"scale-z":[{"scale-z":U()}],"scale-3d":["scale-3d"],skew:[{skew:F()}],"skew-x":[{"skew-x":F()}],"skew-y":[{"skew-y":F()}],transform:[{transform:[$e,Ue,"","none","gpu","cpu"]}],"transform-origin":[{origin:X()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:K()}],"translate-x":[{"translate-x":K()}],"translate-y":[{"translate-y":K()}],"translate-z":[{"translate-z":K()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$e,Ue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$e,Ue]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[wt,fd,ji,Zm]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},mk=BA(hk);function Ce(...e){return mk(e1(e))}function Ac({className:e,...t}){return s.jsx(SA,{"data-slot":"avatar",className:Ce("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function ef({className:e,...t}){return s.jsx(EA,{"data-slot":"avatar-image",className:Ce("aspect-square size-full",e),...t})}function kc({className:e,...t}){return s.jsx(CA,{"data-slot":"avatar-fallback",className:Ce("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}const Z0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,J0=e1,Eg=(e,t)=>r=>{var a;if((t==null?void 0:t.variants)==null)return J0(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:l,defaultVariants:c}=t,d=Object.keys(l).map(p=>{const v=r==null?void 0:r[p],x=c==null?void 0:c[p];if(v===null)return null;const b=Z0(v)||Z0(x);return l[p][b]}),f=r&&Object.entries(r).reduce((p,v)=>{let[x,b]=v;return b===void 0||(p[x]=b),p},{}),h=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((p,v)=>{let{class:x,className:b,...w}=v;return Object.entries(w).every(j=>{let[_,N]=j;return Array.isArray(N)?N.includes({...c,...f}[_]):{...c,...f}[_]===N})?[...p,x,b]:p},[]);return J0(e,d,h,r==null?void 0:r.class,r==null?void 0:r.className)},Ul=Eg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function ne({className:e,variant:t,size:r,asChild:a=!1,...l}){const c=a?Cs:"button";return s.jsx(c,{"data-slot":"button",className:Ce(Ul({variant:t,size:r,className:e})),...l})}function ke(e,t,{checkForDefaultPrevented:r=!0}={}){return function(l){if(e==null||e(l),r===!1||!l.defaultPrevented)return t==null?void 0:t(l)}}function $a({prop:e,defaultProp:t,onChange:r=()=>{}}){const[a,l]=pk({defaultProp:t,onChange:r}),c=e!==void 0,d=c?e:a,f=Tr(r),h=m.useCallback(p=>{if(c){const x=typeof p=="function"?p(e):p;x!==e&&f(x)}else l(p)},[c,e,l,f]);return[d,h]}function pk({defaultProp:e,onChange:t}){const r=m.useState(e),[a]=r,l=m.useRef(a),c=Tr(t);return m.useEffect(()=>{l.current!==a&&(c(a),l.current=a)},[a,l,c]),r}function Cg(e){const t=e+"CollectionProvider",[r,a]=lr(t),[l,c]=r(t,{collectionRef:{current:null},itemMap:new Map}),d=w=>{const{scope:j,children:_}=w,N=we.useRef(null),C=we.useRef(new Map).current;return s.jsx(l,{scope:j,itemMap:C,collectionRef:N,children:_})};d.displayName=t;const f=e+"CollectionSlot",h=we.forwardRef((w,j)=>{const{scope:_,children:N}=w,C=c(f,_),E=_t(j,C.collectionRef);return s.jsx(Cs,{ref:E,children:N})});h.displayName=f;const p=e+"CollectionItemSlot",v="data-radix-collection-item",x=we.forwardRef((w,j)=>{const{scope:_,children:N,...C}=w,E=we.useRef(null),T=_t(j,E),M=c(p,_);return we.useEffect(()=>(M.itemMap.set(E,{ref:E,...C}),()=>void M.itemMap.delete(E))),s.jsx(Cs,{[v]:"",ref:T,children:N})});x.displayName=p;function b(w){const j=c(e+"CollectionConsumer",w);return we.useCallback(()=>{const N=j.collectionRef.current;if(!N)return[];const C=Array.from(N.querySelectorAll(`[${v}]`));return Array.from(j.itemMap.values()).sort((M,R)=>C.indexOf(M.ref.current)-C.indexOf(R.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:d,Slot:h,ItemSlot:x},b,a]}var gk=m.createContext(void 0);function tf(e){const t=m.useContext(gk);return e||t||"ltr"}function vk(e,t=globalThis==null?void 0:globalThis.document){const r=Tr(e);m.useEffect(()=>{const a=l=>{l.key==="Escape"&&r(l)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[r,t])}var xk="DismissableLayer",Bp="dismissableLayer.update",yk="dismissableLayer.pointerDownOutside",bk="dismissableLayer.focusOutside",ew,c1=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zl=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,onDismiss:f,...h}=e,p=m.useContext(c1),[v,x]=m.useState(null),b=(v==null?void 0:v.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=m.useState({}),j=_t(t,H=>x(H)),_=Array.from(p.layers),[N]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),C=_.indexOf(N),E=v?_.indexOf(v):-1,T=p.layersWithOutsidePointerEventsDisabled.size>0,M=E>=C,R=_k(H=>{const $=H.target,I=[...p.branches].some(Y=>Y.contains($));!M||I||(l==null||l(H),d==null||d(H),H.defaultPrevented||f==null||f())},b),L=Nk(H=>{const $=H.target;[...p.branches].some(Y=>Y.contains($))||(c==null||c(H),d==null||d(H),H.defaultPrevented||f==null||f())},b);return vk(H=>{E===p.layers.size-1&&(a==null||a(H),!H.defaultPrevented&&f&&(H.preventDefault(),f()))},b),m.useEffect(()=>{if(v)return r&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(ew=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(v)),p.layers.add(v),tw(),()=>{r&&p.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=ew)}},[v,b,r,p]),m.useEffect(()=>()=>{v&&(p.layers.delete(v),p.layersWithOutsidePointerEventsDisabled.delete(v),tw())},[v,p]),m.useEffect(()=>{const H=()=>w({});return document.addEventListener(Bp,H),()=>document.removeEventListener(Bp,H)},[]),s.jsx(Je.div,{...h,ref:j,style:{pointerEvents:T?M?"auto":"none":void 0,...e.style},onFocusCapture:ke(e.onFocusCapture,L.onFocusCapture),onBlurCapture:ke(e.onBlurCapture,L.onBlurCapture),onPointerDownCapture:ke(e.onPointerDownCapture,R.onPointerDownCapture)})});Zl.displayName=xk;var wk="DismissableLayerBranch",jk=m.forwardRef((e,t)=>{const r=m.useContext(c1),a=m.useRef(null),l=_t(t,a);return m.useEffect(()=>{const c=a.current;if(c)return r.branches.add(c),()=>{r.branches.delete(c)}},[r.branches]),s.jsx(Je.div,{...e,ref:l})});jk.displayName=wk;function _k(e,t=globalThis==null?void 0:globalThis.document){const r=Tr(e),a=m.useRef(!1),l=m.useRef(()=>{});return m.useEffect(()=>{const c=f=>{if(f.target&&!a.current){let h=function(){u1(yk,r,p,{discrete:!0})};const p={originalEvent:f};f.pointerType==="touch"?(t.removeEventListener("click",l.current),l.current=h,t.addEventListener("click",l.current,{once:!0})):h()}else t.removeEventListener("click",l.current);a.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",c),t.removeEventListener("click",l.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function Nk(e,t=globalThis==null?void 0:globalThis.document){const r=Tr(e),a=m.useRef(!1);return m.useEffect(()=>{const l=c=>{c.target&&!a.current&&u1(bk,r,{originalEvent:c},{discrete:!1})};return t.addEventListener("focusin",l),()=>t.removeEventListener("focusin",l)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function tw(){const e=new CustomEvent(Bp);document.dispatchEvent(e)}function u1(e,t,r,{discrete:a}){const l=r.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&l.addEventListener(e,t,{once:!0}),a?Yj(l,c):l.dispatchEvent(c)}var Jm=0;function nf(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??nw()),document.body.insertAdjacentElement("beforeend",e[1]??nw()),Jm++,()=>{Jm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Jm--}},[])}function nw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ep="focusScope.autoFocusOnMount",tp="focusScope.autoFocusOnUnmount",rw={bubbles:!1,cancelable:!0},Sk="FocusScope",Dc=m.forwardRef((e,t)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:l,onUnmountAutoFocus:c,...d}=e,[f,h]=m.useState(null),p=Tr(l),v=Tr(c),x=m.useRef(null),b=_t(t,_=>h(_)),w=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(a){let _=function(T){if(w.paused||!f)return;const M=T.target;f.contains(M)?x.current=M:Pa(x.current,{select:!0})},N=function(T){if(w.paused||!f)return;const M=T.relatedTarget;M!==null&&(f.contains(M)||Pa(x.current,{select:!0}))},C=function(T){if(document.activeElement===document.body)for(const R of T)R.removedNodes.length>0&&Pa(f)};document.addEventListener("focusin",_),document.addEventListener("focusout",N);const E=new MutationObserver(C);return f&&E.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",N),E.disconnect()}}},[a,f,w.paused]),m.useEffect(()=>{if(f){aw.add(w);const _=document.activeElement;if(!f.contains(_)){const C=new CustomEvent(ep,rw);f.addEventListener(ep,p),f.dispatchEvent(C),C.defaultPrevented||(Ek(Ak(d1(f)),{select:!0}),document.activeElement===_&&Pa(f))}return()=>{f.removeEventListener(ep,p),setTimeout(()=>{const C=new CustomEvent(tp,rw);f.addEventListener(tp,v),f.dispatchEvent(C),C.defaultPrevented||Pa(_??document.body,{select:!0}),f.removeEventListener(tp,v),aw.remove(w)},0)}}},[f,p,v,w]);const j=m.useCallback(_=>{if(!r&&!a||w.paused)return;const N=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,C=document.activeElement;if(N&&C){const E=_.currentTarget,[T,M]=Ck(E);T&&M?!_.shiftKey&&C===M?(_.preventDefault(),r&&Pa(T,{select:!0})):_.shiftKey&&C===T&&(_.preventDefault(),r&&Pa(M,{select:!0})):C===E&&_.preventDefault()}},[r,a,w.paused]);return s.jsx(Je.div,{tabIndex:-1,...d,ref:b,onKeyDown:j})});Dc.displayName=Sk;function Ek(e,{select:t=!1}={}){const r=document.activeElement;for(const a of e)if(Pa(a,{select:t}),document.activeElement!==r)return}function Ck(e){const t=d1(e),r=sw(t,e),a=sw(t.reverse(),e);return[r,a]}function d1(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const l=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||l?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function sw(e,t){for(const r of e)if(!Tk(r,{upTo:t}))return r}function Tk(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Rk(e){return e instanceof HTMLInputElement&&"select"in e}function Pa(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Rk(e)&&t&&e.select()}}var aw=Mk();function Mk(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=iw(e,t),e.unshift(t)},remove(t){var r;e=iw(e,t),(r=e[0])==null||r.resume()}}}function iw(e,t){const r=[...e],a=r.indexOf(t);return a!==-1&&r.splice(a,1),r}function Ak(e){return e.filter(t=>t.tagName!=="A")}var kk=DC.useId||(()=>{}),Dk=0;function Ss(e){const[t,r]=m.useState(kk());return Gn(()=>{r(a=>a??String(Dk++))},[e]),e||(t?`radix-${t}`:"")}const Ok=["top","right","bottom","left"],Ba=Math.min,Er=Math.max,Dd=Math.round,hd=Math.floor,Es=e=>({x:e,y:e}),Pk={left:"right",right:"left",bottom:"top",top:"bottom"},Lk={start:"end",end:"start"};function Hp(e,t,r){return Er(e,Ba(t,r))}function na(e,t){return typeof e=="function"?e(t):e}function ra(e){return e.split("-")[0]}function Jl(e){return e.split("-")[1]}function Tg(e){return e==="x"?"y":"x"}function Rg(e){return e==="y"?"height":"width"}function Ha(e){return["top","bottom"].includes(ra(e))?"y":"x"}function Mg(e){return Tg(Ha(e))}function Ik(e,t,r){r===void 0&&(r=!1);const a=Jl(e),l=Mg(e),c=Rg(l);let d=l==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(d=Od(d)),[d,Od(d)]}function zk(e){const t=Od(e);return[qp(e),t,qp(t)]}function qp(e){return e.replace(/start|end/g,t=>Lk[t])}function Uk(e,t,r){const a=["left","right"],l=["right","left"],c=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return r?t?l:a:t?a:l;case"left":case"right":return t?c:d;default:return[]}}function $k(e,t,r,a){const l=Jl(e);let c=Uk(ra(e),r==="start",a);return l&&(c=c.map(d=>d+"-"+l),t&&(c=c.concat(c.map(qp)))),c}function Od(e){return e.replace(/left|right|bottom|top/g,t=>Pk[t])}function Bk(e){return{top:0,right:0,bottom:0,left:0,...e}}function f1(e){return typeof e!="number"?Bk(e):{top:e,right:e,bottom:e,left:e}}function Pd(e){const{x:t,y:r,width:a,height:l}=e;return{width:a,height:l,top:r,left:t,right:t+a,bottom:r+l,x:t,y:r}}function lw(e,t,r){let{reference:a,floating:l}=e;const c=Ha(t),d=Mg(t),f=Rg(d),h=ra(t),p=c==="y",v=a.x+a.width/2-l.width/2,x=a.y+a.height/2-l.height/2,b=a[f]/2-l[f]/2;let w;switch(h){case"top":w={x:v,y:a.y-l.height};break;case"bottom":w={x:v,y:a.y+a.height};break;case"right":w={x:a.x+a.width,y:x};break;case"left":w={x:a.x-l.width,y:x};break;default:w={x:a.x,y:a.y}}switch(Jl(t)){case"start":w[d]-=b*(r&&p?-1:1);break;case"end":w[d]+=b*(r&&p?-1:1);break}return w}const Hk=async(e,t,r)=>{const{placement:a="bottom",strategy:l="absolute",middleware:c=[],platform:d}=r,f=c.filter(Boolean),h=await(d.isRTL==null?void 0:d.isRTL(t));let p=await d.getElementRects({reference:e,floating:t,strategy:l}),{x:v,y:x}=lw(p,a,h),b=a,w={},j=0;for(let _=0;_<f.length;_++){const{name:N,fn:C}=f[_],{x:E,y:T,data:M,reset:R}=await C({x:v,y:x,initialPlacement:a,placement:b,strategy:l,middlewareData:w,rects:p,platform:d,elements:{reference:e,floating:t}});v=E??v,x=T??x,w={...w,[N]:{...w[N],...M}},R&&j<=50&&(j++,typeof R=="object"&&(R.placement&&(b=R.placement),R.rects&&(p=R.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:l}):R.rects),{x:v,y:x}=lw(p,b,h)),_=-1)}return{x:v,y:x,placement:b,strategy:l,middlewareData:w}};async function vc(e,t){var r;t===void 0&&(t={});const{x:a,y:l,platform:c,rects:d,elements:f,strategy:h}=e,{boundary:p="clippingAncestors",rootBoundary:v="viewport",elementContext:x="floating",altBoundary:b=!1,padding:w=0}=na(t,e),j=f1(w),N=f[b?x==="floating"?"reference":"floating":x],C=Pd(await c.getClippingRect({element:(r=await(c.isElement==null?void 0:c.isElement(N)))==null||r?N:N.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:p,rootBoundary:v,strategy:h})),E=x==="floating"?{x:a,y:l,width:d.floating.width,height:d.floating.height}:d.reference,T=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),M=await(c.isElement==null?void 0:c.isElement(T))?await(c.getScale==null?void 0:c.getScale(T))||{x:1,y:1}:{x:1,y:1},R=Pd(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:E,offsetParent:T,strategy:h}):E);return{top:(C.top-R.top+j.top)/M.y,bottom:(R.bottom-C.bottom+j.bottom)/M.y,left:(C.left-R.left+j.left)/M.x,right:(R.right-C.right+j.right)/M.x}}const qk=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:a,placement:l,rects:c,platform:d,elements:f,middlewareData:h}=t,{element:p,padding:v=0}=na(e,t)||{};if(p==null)return{};const x=f1(v),b={x:r,y:a},w=Mg(l),j=Rg(w),_=await d.getDimensions(p),N=w==="y",C=N?"top":"left",E=N?"bottom":"right",T=N?"clientHeight":"clientWidth",M=c.reference[j]+c.reference[w]-b[w]-c.floating[j],R=b[w]-c.reference[w],L=await(d.getOffsetParent==null?void 0:d.getOffsetParent(p));let H=L?L[T]:0;(!H||!await(d.isElement==null?void 0:d.isElement(L)))&&(H=f.floating[T]||c.floating[j]);const $=M/2-R/2,I=H/2-_[j]/2-1,Y=Ba(x[C],I),ce=Ba(x[E],I),te=Y,q=H-_[j]-ce,le=H/2-_[j]/2+$,ue=Hp(te,le,q),O=!h.arrow&&Jl(l)!=null&&le!==ue&&c.reference[j]/2-(le<te?Y:ce)-_[j]/2<0,G=O?le<te?le-te:le-q:0;return{[w]:b[w]+G,data:{[w]:ue,centerOffset:le-ue-G,...O&&{alignmentOffset:G}},reset:O}}}),Fk=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,a;const{placement:l,middlewareData:c,rects:d,initialPlacement:f,platform:h,elements:p}=t,{mainAxis:v=!0,crossAxis:x=!0,fallbackPlacements:b,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:_=!0,...N}=na(e,t);if((r=c.arrow)!=null&&r.alignmentOffset)return{};const C=ra(l),E=Ha(f),T=ra(f)===f,M=await(h.isRTL==null?void 0:h.isRTL(p.floating)),R=b||(T||!_?[Od(f)]:zk(f)),L=j!=="none";!b&&L&&R.push(...$k(f,_,j,M));const H=[f,...R],$=await vc(t,N),I=[];let Y=((a=c.flip)==null?void 0:a.overflows)||[];if(v&&I.push($[C]),x){const le=Ik(l,d,M);I.push($[le[0]],$[le[1]])}if(Y=[...Y,{placement:l,overflows:I}],!I.every(le=>le<=0)){var ce,te;const le=(((ce=c.flip)==null?void 0:ce.index)||0)+1,ue=H[le];if(ue)return{data:{index:le,overflows:Y},reset:{placement:ue}};let O=(te=Y.filter(G=>G.overflows[0]<=0).sort((G,B)=>G.overflows[1]-B.overflows[1])[0])==null?void 0:te.placement;if(!O)switch(w){case"bestFit":{var q;const G=(q=Y.filter(B=>{if(L){const ee=Ha(B.placement);return ee===E||ee==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(ee=>ee>0).reduce((ee,k)=>ee+k,0)]).sort((B,ee)=>B[1]-ee[1])[0])==null?void 0:q[0];G&&(O=G);break}case"initialPlacement":O=f;break}if(l!==O)return{reset:{placement:O}}}return{}}}};function ow(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function cw(e){return Ok.some(t=>e[t]>=0)}const Vk=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:a="referenceHidden",...l}=na(e,t);switch(a){case"referenceHidden":{const c=await vc(t,{...l,elementContext:"reference"}),d=ow(c,r.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:cw(d)}}}case"escaped":{const c=await vc(t,{...l,altBoundary:!0}),d=ow(c,r.floating);return{data:{escapedOffsets:d,escaped:cw(d)}}}default:return{}}}}};async function Yk(e,t){const{placement:r,platform:a,elements:l}=e,c=await(a.isRTL==null?void 0:a.isRTL(l.floating)),d=ra(r),f=Jl(r),h=Ha(r)==="y",p=["left","top"].includes(d)?-1:1,v=c&&h?-1:1,x=na(t,e);let{mainAxis:b,crossAxis:w,alignmentAxis:j}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return f&&typeof j=="number"&&(w=f==="end"?j*-1:j),h?{x:w*v,y:b*p}:{x:b*p,y:w*v}}const Gk=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,a;const{x:l,y:c,placement:d,middlewareData:f}=t,h=await Yk(t,e);return d===((r=f.offset)==null?void 0:r.placement)&&(a=f.arrow)!=null&&a.alignmentOffset?{}:{x:l+h.x,y:c+h.y,data:{...h,placement:d}}}}},Wk=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:a,placement:l}=t,{mainAxis:c=!0,crossAxis:d=!1,limiter:f={fn:N=>{let{x:C,y:E}=N;return{x:C,y:E}}},...h}=na(e,t),p={x:r,y:a},v=await vc(t,h),x=Ha(ra(l)),b=Tg(x);let w=p[b],j=p[x];if(c){const N=b==="y"?"top":"left",C=b==="y"?"bottom":"right",E=w+v[N],T=w-v[C];w=Hp(E,w,T)}if(d){const N=x==="y"?"top":"left",C=x==="y"?"bottom":"right",E=j+v[N],T=j-v[C];j=Hp(E,j,T)}const _=f.fn({...t,[b]:w,[x]:j});return{..._,data:{x:_.x-r,y:_.y-a,enabled:{[b]:c,[x]:d}}}}}},Xk=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:a,placement:l,rects:c,middlewareData:d}=t,{offset:f=0,mainAxis:h=!0,crossAxis:p=!0}=na(e,t),v={x:r,y:a},x=Ha(l),b=Tg(x);let w=v[b],j=v[x];const _=na(f,t),N=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(h){const T=b==="y"?"height":"width",M=c.reference[b]-c.floating[T]+N.mainAxis,R=c.reference[b]+c.reference[T]-N.mainAxis;w<M?w=M:w>R&&(w=R)}if(p){var C,E;const T=b==="y"?"width":"height",M=["top","left"].includes(ra(l)),R=c.reference[x]-c.floating[T]+(M&&((C=d.offset)==null?void 0:C[x])||0)+(M?0:N.crossAxis),L=c.reference[x]+c.reference[T]+(M?0:((E=d.offset)==null?void 0:E[x])||0)-(M?N.crossAxis:0);j<R?j=R:j>L&&(j=L)}return{[b]:w,[x]:j}}}},Kk=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,a;const{placement:l,rects:c,platform:d,elements:f}=t,{apply:h=()=>{},...p}=na(e,t),v=await vc(t,p),x=ra(l),b=Jl(l),w=Ha(l)==="y",{width:j,height:_}=c.floating;let N,C;x==="top"||x==="bottom"?(N=x,C=b===(await(d.isRTL==null?void 0:d.isRTL(f.floating))?"start":"end")?"left":"right"):(C=x,N=b==="end"?"top":"bottom");const E=_-v.top-v.bottom,T=j-v.left-v.right,M=Ba(_-v[N],E),R=Ba(j-v[C],T),L=!t.middlewareData.shift;let H=M,$=R;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&($=T),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(H=E),L&&!b){const Y=Er(v.left,0),ce=Er(v.right,0),te=Er(v.top,0),q=Er(v.bottom,0);w?$=j-2*(Y!==0||ce!==0?Y+ce:Er(v.left,v.right)):H=_-2*(te!==0||q!==0?te+q:Er(v.top,v.bottom))}await h({...t,availableWidth:$,availableHeight:H});const I=await d.getDimensions(f.floating);return j!==I.width||_!==I.height?{reset:{rects:!0}}:{}}}};function rf(){return typeof window<"u"}function eo(e){return h1(e)?(e.nodeName||"").toLowerCase():"#document"}function Cr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function As(e){var t;return(t=(h1(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function h1(e){return rf()?e instanceof Node||e instanceof Cr(e).Node:!1}function rs(e){return rf()?e instanceof Element||e instanceof Cr(e).Element:!1}function Ts(e){return rf()?e instanceof HTMLElement||e instanceof Cr(e).HTMLElement:!1}function uw(e){return!rf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Cr(e).ShadowRoot}function Oc(e){const{overflow:t,overflowX:r,overflowY:a,display:l}=ss(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!["inline","contents"].includes(l)}function Qk(e){return["table","td","th"].includes(eo(e))}function sf(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ag(e){const t=kg(),r=rs(e)?ss(e):e;return["transform","translate","scale","rotate","perspective"].some(a=>r[a]?r[a]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(r.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(r.contain||"").includes(a))}function Zk(e){let t=qa(e);for(;Ts(t)&&!$l(t);){if(Ag(t))return t;if(sf(t))return null;t=qa(t)}return null}function kg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $l(e){return["html","body","#document"].includes(eo(e))}function ss(e){return Cr(e).getComputedStyle(e)}function af(e){return rs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qa(e){if(eo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||uw(e)&&e.host||As(e);return uw(t)?t.host:t}function m1(e){const t=qa(e);return $l(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ts(t)&&Oc(t)?t:m1(t)}function xc(e,t,r){var a;t===void 0&&(t=[]),r===void 0&&(r=!0);const l=m1(e),c=l===((a=e.ownerDocument)==null?void 0:a.body),d=Cr(l);if(c){const f=Fp(d);return t.concat(d,d.visualViewport||[],Oc(l)?l:[],f&&r?xc(f):[])}return t.concat(l,xc(l,[],r))}function Fp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function p1(e){const t=ss(e);let r=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const l=Ts(e),c=l?e.offsetWidth:r,d=l?e.offsetHeight:a,f=Dd(r)!==c||Dd(a)!==d;return f&&(r=c,a=d),{width:r,height:a,$:f}}function Dg(e){return rs(e)?e:e.contextElement}function Al(e){const t=Dg(e);if(!Ts(t))return Es(1);const r=t.getBoundingClientRect(),{width:a,height:l,$:c}=p1(t);let d=(c?Dd(r.width):r.width)/a,f=(c?Dd(r.height):r.height)/l;return(!d||!Number.isFinite(d))&&(d=1),(!f||!Number.isFinite(f))&&(f=1),{x:d,y:f}}const Jk=Es(0);function g1(e){const t=Cr(e);return!kg()||!t.visualViewport?Jk:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function e4(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Cr(e)?!1:t}function Ei(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=!1);const l=e.getBoundingClientRect(),c=Dg(e);let d=Es(1);t&&(a?rs(a)&&(d=Al(a)):d=Al(e));const f=e4(c,r,a)?g1(c):Es(0);let h=(l.left+f.x)/d.x,p=(l.top+f.y)/d.y,v=l.width/d.x,x=l.height/d.y;if(c){const b=Cr(c),w=a&&rs(a)?Cr(a):a;let j=b,_=Fp(j);for(;_&&a&&w!==j;){const N=Al(_),C=_.getBoundingClientRect(),E=ss(_),T=C.left+(_.clientLeft+parseFloat(E.paddingLeft))*N.x,M=C.top+(_.clientTop+parseFloat(E.paddingTop))*N.y;h*=N.x,p*=N.y,v*=N.x,x*=N.y,h+=T,p+=M,j=Cr(_),_=Fp(j)}}return Pd({width:v,height:x,x:h,y:p})}function Og(e,t){const r=af(e).scrollLeft;return t?t.left+r:Ei(As(e)).left+r}function v1(e,t,r){r===void 0&&(r=!1);const a=e.getBoundingClientRect(),l=a.left+t.scrollLeft-(r?0:Og(e,a)),c=a.top+t.scrollTop;return{x:l,y:c}}function t4(e){let{elements:t,rect:r,offsetParent:a,strategy:l}=e;const c=l==="fixed",d=As(a),f=t?sf(t.floating):!1;if(a===d||f&&c)return r;let h={scrollLeft:0,scrollTop:0},p=Es(1);const v=Es(0),x=Ts(a);if((x||!x&&!c)&&((eo(a)!=="body"||Oc(d))&&(h=af(a)),Ts(a))){const w=Ei(a);p=Al(a),v.x=w.x+a.clientLeft,v.y=w.y+a.clientTop}const b=d&&!x&&!c?v1(d,h,!0):Es(0);return{width:r.width*p.x,height:r.height*p.y,x:r.x*p.x-h.scrollLeft*p.x+v.x+b.x,y:r.y*p.y-h.scrollTop*p.y+v.y+b.y}}function n4(e){return Array.from(e.getClientRects())}function r4(e){const t=As(e),r=af(e),a=e.ownerDocument.body,l=Er(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),c=Er(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let d=-r.scrollLeft+Og(e);const f=-r.scrollTop;return ss(a).direction==="rtl"&&(d+=Er(t.clientWidth,a.clientWidth)-l),{width:l,height:c,x:d,y:f}}function s4(e,t){const r=Cr(e),a=As(e),l=r.visualViewport;let c=a.clientWidth,d=a.clientHeight,f=0,h=0;if(l){c=l.width,d=l.height;const p=kg();(!p||p&&t==="fixed")&&(f=l.offsetLeft,h=l.offsetTop)}return{width:c,height:d,x:f,y:h}}function a4(e,t){const r=Ei(e,!0,t==="fixed"),a=r.top+e.clientTop,l=r.left+e.clientLeft,c=Ts(e)?Al(e):Es(1),d=e.clientWidth*c.x,f=e.clientHeight*c.y,h=l*c.x,p=a*c.y;return{width:d,height:f,x:h,y:p}}function dw(e,t,r){let a;if(t==="viewport")a=s4(e,r);else if(t==="document")a=r4(As(e));else if(rs(t))a=a4(t,r);else{const l=g1(e);a={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return Pd(a)}function x1(e,t){const r=qa(e);return r===t||!rs(r)||$l(r)?!1:ss(r).position==="fixed"||x1(r,t)}function i4(e,t){const r=t.get(e);if(r)return r;let a=xc(e,[],!1).filter(f=>rs(f)&&eo(f)!=="body"),l=null;const c=ss(e).position==="fixed";let d=c?qa(e):e;for(;rs(d)&&!$l(d);){const f=ss(d),h=Ag(d);!h&&f.position==="fixed"&&(l=null),(c?!h&&!l:!h&&f.position==="static"&&!!l&&["absolute","fixed"].includes(l.position)||Oc(d)&&!h&&x1(e,d))?a=a.filter(v=>v!==d):l=f,d=qa(d)}return t.set(e,a),a}function l4(e){let{element:t,boundary:r,rootBoundary:a,strategy:l}=e;const d=[...r==="clippingAncestors"?sf(t)?[]:i4(t,this._c):[].concat(r),a],f=d[0],h=d.reduce((p,v)=>{const x=dw(t,v,l);return p.top=Er(x.top,p.top),p.right=Ba(x.right,p.right),p.bottom=Ba(x.bottom,p.bottom),p.left=Er(x.left,p.left),p},dw(t,f,l));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function o4(e){const{width:t,height:r}=p1(e);return{width:t,height:r}}function c4(e,t,r){const a=Ts(t),l=As(t),c=r==="fixed",d=Ei(e,!0,c,t);let f={scrollLeft:0,scrollTop:0};const h=Es(0);if(a||!a&&!c)if((eo(t)!=="body"||Oc(l))&&(f=af(t)),a){const b=Ei(t,!0,c,t);h.x=b.x+t.clientLeft,h.y=b.y+t.clientTop}else l&&(h.x=Og(l));const p=l&&!a&&!c?v1(l,f):Es(0),v=d.left+f.scrollLeft-h.x-p.x,x=d.top+f.scrollTop-h.y-p.y;return{x:v,y:x,width:d.width,height:d.height}}function np(e){return ss(e).position==="static"}function fw(e,t){if(!Ts(e)||ss(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return As(e)===r&&(r=r.ownerDocument.body),r}function y1(e,t){const r=Cr(e);if(sf(e))return r;if(!Ts(e)){let l=qa(e);for(;l&&!$l(l);){if(rs(l)&&!np(l))return l;l=qa(l)}return r}let a=fw(e,t);for(;a&&Qk(a)&&np(a);)a=fw(a,t);return a&&$l(a)&&np(a)&&!Ag(a)?r:a||Zk(e)||r}const u4=async function(e){const t=this.getOffsetParent||y1,r=this.getDimensions,a=await r(e.floating);return{reference:c4(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function d4(e){return ss(e).direction==="rtl"}const f4={convertOffsetParentRelativeRectToViewportRelativeRect:t4,getDocumentElement:As,getClippingRect:l4,getOffsetParent:y1,getElementRects:u4,getClientRects:n4,getDimensions:o4,getScale:Al,isElement:rs,isRTL:d4};function b1(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function h4(e,t){let r=null,a;const l=As(e);function c(){var f;clearTimeout(a),(f=r)==null||f.disconnect(),r=null}function d(f,h){f===void 0&&(f=!1),h===void 0&&(h=1),c();const p=e.getBoundingClientRect(),{left:v,top:x,width:b,height:w}=p;if(f||t(),!b||!w)return;const j=hd(x),_=hd(l.clientWidth-(v+b)),N=hd(l.clientHeight-(x+w)),C=hd(v),T={rootMargin:-j+"px "+-_+"px "+-N+"px "+-C+"px",threshold:Er(0,Ba(1,h))||1};let M=!0;function R(L){const H=L[0].intersectionRatio;if(H!==h){if(!M)return d();H?d(!1,H):a=setTimeout(()=>{d(!1,1e-7)},1e3)}H===1&&!b1(p,e.getBoundingClientRect())&&d(),M=!1}try{r=new IntersectionObserver(R,{...T,root:l.ownerDocument})}catch{r=new IntersectionObserver(R,T)}r.observe(e)}return d(!0),c}function m4(e,t,r,a){a===void 0&&(a={});const{ancestorScroll:l=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:h=!1}=a,p=Dg(e),v=l||c?[...p?xc(p):[],...xc(t)]:[];v.forEach(C=>{l&&C.addEventListener("scroll",r,{passive:!0}),c&&C.addEventListener("resize",r)});const x=p&&f?h4(p,r):null;let b=-1,w=null;d&&(w=new ResizeObserver(C=>{let[E]=C;E&&E.target===p&&w&&(w.unobserve(t),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var T;(T=w)==null||T.observe(t)})),r()}),p&&!h&&w.observe(p),w.observe(t));let j,_=h?Ei(e):null;h&&N();function N(){const C=Ei(e);_&&!b1(_,C)&&r(),_=C,j=requestAnimationFrame(N)}return r(),()=>{var C;v.forEach(E=>{l&&E.removeEventListener("scroll",r),c&&E.removeEventListener("resize",r)}),x==null||x(),(C=w)==null||C.disconnect(),w=null,h&&cancelAnimationFrame(j)}}const p4=Gk,g4=Wk,v4=Fk,x4=Kk,y4=Vk,hw=qk,b4=Xk,w4=(e,t,r)=>{const a=new Map,l={platform:f4,...r},c={...l.platform,_c:a};return Hk(e,t,{...l,platform:c})};var Sd=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Ld(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,a,l;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(a=r;a--!==0;)if(!Ld(e[a],t[a]))return!1;return!0}if(l=Object.keys(e),r=l.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!{}.hasOwnProperty.call(t,l[a]))return!1;for(a=r;a--!==0;){const c=l[a];if(!(c==="_owner"&&e.$$typeof)&&!Ld(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function w1(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function mw(e,t){const r=w1(e);return Math.round(t*r)/r}function rp(e){const t=m.useRef(e);return Sd(()=>{t.current=e}),t}function j4(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:l,elements:{reference:c,floating:d}={},transform:f=!0,whileElementsMounted:h,open:p}=e,[v,x]=m.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[b,w]=m.useState(a);Ld(b,a)||w(a);const[j,_]=m.useState(null),[N,C]=m.useState(null),E=m.useCallback(B=>{B!==L.current&&(L.current=B,_(B))},[]),T=m.useCallback(B=>{B!==H.current&&(H.current=B,C(B))},[]),M=c||j,R=d||N,L=m.useRef(null),H=m.useRef(null),$=m.useRef(v),I=h!=null,Y=rp(h),ce=rp(l),te=rp(p),q=m.useCallback(()=>{if(!L.current||!H.current)return;const B={placement:t,strategy:r,middleware:b};ce.current&&(B.platform=ce.current),w4(L.current,H.current,B).then(ee=>{const k={...ee,isPositioned:te.current!==!1};le.current&&!Ld($.current,k)&&($.current=k,_s.flushSync(()=>{x(k)}))})},[b,t,r,ce,te]);Sd(()=>{p===!1&&$.current.isPositioned&&($.current.isPositioned=!1,x(B=>({...B,isPositioned:!1})))},[p]);const le=m.useRef(!1);Sd(()=>(le.current=!0,()=>{le.current=!1}),[]),Sd(()=>{if(M&&(L.current=M),R&&(H.current=R),M&&R){if(Y.current)return Y.current(M,R,q);q()}},[M,R,q,Y,I]);const ue=m.useMemo(()=>({reference:L,floating:H,setReference:E,setFloating:T}),[E,T]),O=m.useMemo(()=>({reference:M,floating:R}),[M,R]),G=m.useMemo(()=>{const B={position:r,left:0,top:0};if(!O.floating)return B;const ee=mw(O.floating,v.x),k=mw(O.floating,v.y);return f?{...B,transform:"translate("+ee+"px, "+k+"px)",...w1(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:ee,top:k}},[r,f,O.floating,v.x,v.y]);return m.useMemo(()=>({...v,update:q,refs:ue,elements:O,floatingStyles:G}),[v,q,ue,O,G])}const _4=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:a,padding:l}=typeof e=="function"?e(r):e;return a&&t(a)?a.current!=null?hw({element:a.current,padding:l}).fn(r):{}:a?hw({element:a,padding:l}).fn(r):{}}}},N4=(e,t)=>({...p4(e),options:[e,t]}),S4=(e,t)=>({...g4(e),options:[e,t]}),E4=(e,t)=>({...b4(e),options:[e,t]}),C4=(e,t)=>({...v4(e),options:[e,t]}),T4=(e,t)=>({...x4(e),options:[e,t]}),R4=(e,t)=>({...y4(e),options:[e,t]}),M4=(e,t)=>({..._4(e),options:[e,t]});var A4="Arrow",j1=m.forwardRef((e,t)=>{const{children:r,width:a=10,height:l=5,...c}=e;return s.jsx(Je.svg,{...c,ref:t,width:a,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});j1.displayName=A4;var k4=j1;function Pg(e){const[t,r]=m.useState(void 0);return Gn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const c=l[0];let d,f;if("borderBoxSize"in c){const h=c.borderBoxSize,p=Array.isArray(h)?h[0]:h;d=p.inlineSize,f=p.blockSize}else d=e.offsetWidth,f=e.offsetHeight;r({width:d,height:f})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else r(void 0)},[e]),t}var Lg="Popper",[_1,Ya]=lr(Lg),[D4,N1]=_1(Lg),S1=e=>{const{__scopePopper:t,children:r}=e,[a,l]=m.useState(null);return s.jsx(D4,{scope:t,anchor:a,onAnchorChange:l,children:r})};S1.displayName=Lg;var E1="PopperAnchor",C1=m.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:a,...l}=e,c=N1(E1,r),d=m.useRef(null),f=_t(t,d);return m.useEffect(()=>{c.onAnchorChange((a==null?void 0:a.current)||d.current)}),a?null:s.jsx(Je.div,{...l,ref:f})});C1.displayName=E1;var Ig="PopperContent",[O4,P4]=_1(Ig),T1=m.forwardRef((e,t)=>{var K,ae,ge,de,Se,Me;const{__scopePopper:r,side:a="bottom",sideOffset:l=0,align:c="center",alignOffset:d=0,arrowPadding:f=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:v=0,sticky:x="partial",hideWhenDetached:b=!1,updatePositionStrategy:w="optimized",onPlaced:j,..._}=e,N=N1(Ig,r),[C,E]=m.useState(null),T=_t(t,at=>E(at)),[M,R]=m.useState(null),L=Pg(M),H=(L==null?void 0:L.width)??0,$=(L==null?void 0:L.height)??0,I=a+(c!=="center"?"-"+c:""),Y=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},ce=Array.isArray(p)?p:[p],te=ce.length>0,q={padding:Y,boundary:ce.filter(I4),altBoundary:te},{refs:le,floatingStyles:ue,placement:O,isPositioned:G,middlewareData:B}=j4({strategy:"fixed",placement:I,whileElementsMounted:(...at)=>m4(...at,{animationFrame:w==="always"}),elements:{reference:N.anchor},middleware:[N4({mainAxis:l+$,alignmentAxis:d}),h&&S4({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?E4():void 0,...q}),h&&C4({...q}),T4({...q,apply:({elements:at,rects:nt,availableWidth:ve,availableHeight:pe})=>{const{width:Pe,height:be}=nt.reference,Ne=at.floating.style;Ne.setProperty("--radix-popper-available-width",`${ve}px`),Ne.setProperty("--radix-popper-available-height",`${pe}px`),Ne.setProperty("--radix-popper-anchor-width",`${Pe}px`),Ne.setProperty("--radix-popper-anchor-height",`${be}px`)}}),M&&M4({element:M,padding:f}),z4({arrowWidth:H,arrowHeight:$}),b&&R4({strategy:"referenceHidden",...q})]}),[ee,k]=A1(O),P=Tr(j);Gn(()=>{G&&(P==null||P())},[G,P]);const V=(K=B.arrow)==null?void 0:K.x,X=(ae=B.arrow)==null?void 0:ae.y,D=((ge=B.arrow)==null?void 0:ge.centerOffset)!==0,[U,F]=m.useState();return Gn(()=>{C&&F(window.getComputedStyle(C).zIndex)},[C]),s.jsx("div",{ref:le.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:G?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:U,"--radix-popper-transform-origin":[(de=B.transformOrigin)==null?void 0:de.x,(Se=B.transformOrigin)==null?void 0:Se.y].join(" "),...((Me=B.hide)==null?void 0:Me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(O4,{scope:r,placedSide:ee,onArrowChange:R,arrowX:V,arrowY:X,shouldHideArrow:D,children:s.jsx(Je.div,{"data-side":ee,"data-align":k,..._,ref:T,style:{..._.style,animation:G?void 0:"none"}})})})});T1.displayName=Ig;var R1="PopperArrow",L4={top:"bottom",right:"left",bottom:"top",left:"right"},M1=m.forwardRef(function(t,r){const{__scopePopper:a,...l}=t,c=P4(R1,a),d=L4[c.placedSide];return s.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:s.jsx(k4,{...l,ref:r,style:{...l.style,display:"block"}})})});M1.displayName=R1;function I4(e){return e!==null}var z4=e=>({name:"transformOrigin",options:e,fn(t){var N,C,E;const{placement:r,rects:a,middlewareData:l}=t,d=((N=l.arrow)==null?void 0:N.centerOffset)!==0,f=d?0:e.arrowWidth,h=d?0:e.arrowHeight,[p,v]=A1(r),x={start:"0%",center:"50%",end:"100%"}[v],b=(((C=l.arrow)==null?void 0:C.x)??0)+f/2,w=(((E=l.arrow)==null?void 0:E.y)??0)+h/2;let j="",_="";return p==="bottom"?(j=d?x:`${b}px`,_=`${-h}px`):p==="top"?(j=d?x:`${b}px`,_=`${a.floating.height+h}px`):p==="right"?(j=`${-h}px`,_=d?x:`${w}px`):p==="left"&&(j=`${a.floating.width+h}px`,_=d?x:`${w}px`),{data:{x:j,y:_}}}});function A1(e){const[t,r="center"]=e.split("-");return[t,r]}var zg=S1,Pc=C1,lf=T1,of=M1,U4="Portal",Lc=m.forwardRef((e,t)=>{var f;const{container:r,...a}=e,[l,c]=m.useState(!1);Gn(()=>c(!0),[]);const d=r||l&&((f=globalThis==null?void 0:globalThis.document)==null?void 0:f.body);return d?Sj.createPortal(s.jsx(Je.div,{...a,ref:t}),d):null});Lc.displayName=U4;function $4(e,t){return m.useReducer((r,a)=>t[r][a]??r,e)}var Ar=e=>{const{present:t,children:r}=e,a=B4(t),l=typeof r=="function"?r({present:a.isPresent}):m.Children.only(r),c=_t(a.ref,H4(l));return typeof r=="function"||a.isPresent?m.cloneElement(l,{ref:c}):null};Ar.displayName="Presence";function B4(e){const[t,r]=m.useState(),a=m.useRef({}),l=m.useRef(e),c=m.useRef("none"),d=e?"mounted":"unmounted",[f,h]=$4(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const p=md(a.current);c.current=f==="mounted"?p:"none"},[f]),Gn(()=>{const p=a.current,v=l.current;if(v!==e){const b=c.current,w=md(p);e?h("MOUNT"):w==="none"||(p==null?void 0:p.display)==="none"?h("UNMOUNT"):h(v&&b!==w?"ANIMATION_OUT":"UNMOUNT"),l.current=e}},[e,h]),Gn(()=>{if(t){let p;const v=t.ownerDocument.defaultView??window,x=w=>{const _=md(a.current).includes(w.animationName);if(w.target===t&&_&&(h("ANIMATION_END"),!l.current)){const N=t.style.animationFillMode;t.style.animationFillMode="forwards",p=v.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=N)})}},b=w=>{w.target===t&&(c.current=md(a.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",x),t.addEventListener("animationend",x),()=>{v.clearTimeout(p),t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",x),t.removeEventListener("animationend",x)}}else h("ANIMATION_END")},[t,h]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:m.useCallback(p=>{p&&(a.current=getComputedStyle(p)),r(p)},[])}}function md(e){return(e==null?void 0:e.animationName)||"none"}function H4(e){var a,l;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(l=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:l.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var sp="rovingFocusGroup.onEntryFocus",q4={bubbles:!1,cancelable:!0},cf="RovingFocusGroup",[Vp,k1,F4]=Cg(cf),[V4,uf]=lr(cf,[F4]),[Y4,G4]=V4(cf),D1=m.forwardRef((e,t)=>s.jsx(Vp.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Vp.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(W4,{...e,ref:t})})}));D1.displayName=cf;var W4=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:l=!1,dir:c,currentTabStopId:d,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:v=!1,...x}=e,b=m.useRef(null),w=_t(t,b),j=tf(c),[_=null,N]=$a({prop:d,defaultProp:f,onChange:h}),[C,E]=m.useState(!1),T=Tr(p),M=k1(r),R=m.useRef(!1),[L,H]=m.useState(0);return m.useEffect(()=>{const $=b.current;if($)return $.addEventListener(sp,T),()=>$.removeEventListener(sp,T)},[T]),s.jsx(Y4,{scope:r,orientation:a,dir:j,loop:l,currentTabStopId:_,onItemFocus:m.useCallback($=>N($),[N]),onItemShiftTab:m.useCallback(()=>E(!0),[]),onFocusableItemAdd:m.useCallback(()=>H($=>$+1),[]),onFocusableItemRemove:m.useCallback(()=>H($=>$-1),[]),children:s.jsx(Je.div,{tabIndex:C||L===0?-1:0,"data-orientation":a,...x,ref:w,style:{outline:"none",...e.style},onMouseDown:ke(e.onMouseDown,()=>{R.current=!0}),onFocus:ke(e.onFocus,$=>{const I=!R.current;if($.target===$.currentTarget&&I&&!C){const Y=new CustomEvent(sp,q4);if($.currentTarget.dispatchEvent(Y),!Y.defaultPrevented){const ce=M().filter(O=>O.focusable),te=ce.find(O=>O.active),q=ce.find(O=>O.id===_),ue=[te,q,...ce].filter(Boolean).map(O=>O.ref.current);L1(ue,v)}}R.current=!1}),onBlur:ke(e.onBlur,()=>E(!1))})})}),O1="RovingFocusGroupItem",P1=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:l=!1,tabStopId:c,...d}=e,f=Ss(),h=c||f,p=G4(O1,r),v=p.currentTabStopId===h,x=k1(r),{onFocusableItemAdd:b,onFocusableItemRemove:w}=p;return m.useEffect(()=>{if(a)return b(),()=>w()},[a,b,w]),s.jsx(Vp.ItemSlot,{scope:r,id:h,focusable:a,active:l,children:s.jsx(Je.span,{tabIndex:v?0:-1,"data-orientation":p.orientation,...d,ref:t,onMouseDown:ke(e.onMouseDown,j=>{a?p.onItemFocus(h):j.preventDefault()}),onFocus:ke(e.onFocus,()=>p.onItemFocus(h)),onKeyDown:ke(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){p.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const _=Q4(j,p.orientation,p.dir);if(_!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let C=x().filter(E=>E.focusable).map(E=>E.ref.current);if(_==="last")C.reverse();else if(_==="prev"||_==="next"){_==="prev"&&C.reverse();const E=C.indexOf(j.currentTarget);C=p.loop?Z4(C,E+1):C.slice(E+1)}setTimeout(()=>L1(C))}})})})});P1.displayName=O1;var X4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function K4(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Q4(e,t,r){const a=K4(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return X4[a]}function L1(e,t=!1){const r=document.activeElement;for(const a of e)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}function Z4(e,t){return e.map((r,a)=>e[(t+a)%e.length])}var I1=D1,z1=P1,J4=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Sl=new WeakMap,pd=new WeakMap,gd={},ap=0,U1=function(e){return e&&(e.host||U1(e.parentNode))},eD=function(e,t){return t.map(function(r){if(e.contains(r))return r;var a=U1(r);return a&&e.contains(a)?a:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},tD=function(e,t,r,a){var l=eD(t,Array.isArray(e)?e:[e]);gd[r]||(gd[r]=new WeakMap);var c=gd[r],d=[],f=new Set,h=new Set(l),p=function(x){!x||f.has(x)||(f.add(x),p(x.parentNode))};l.forEach(p);var v=function(x){!x||h.has(x)||Array.prototype.forEach.call(x.children,function(b){if(f.has(b))v(b);else try{var w=b.getAttribute(a),j=w!==null&&w!=="false",_=(Sl.get(b)||0)+1,N=(c.get(b)||0)+1;Sl.set(b,_),c.set(b,N),d.push(b),_===1&&j&&pd.set(b,!0),N===1&&b.setAttribute(r,"true"),j||b.setAttribute(a,"true")}catch(C){console.error("aria-hidden: cannot operate on ",b,C)}})};return v(t),f.clear(),ap++,function(){d.forEach(function(x){var b=Sl.get(x)-1,w=c.get(x)-1;Sl.set(x,b),c.set(x,w),b||(pd.has(x)||x.removeAttribute(a),pd.delete(x)),w||x.removeAttribute(r)}),ap--,ap||(Sl=new WeakMap,Sl=new WeakMap,pd=new WeakMap,gd={})}},df=function(e,t,r){r===void 0&&(r="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),l=J4(e);return l?(a.push.apply(a,Array.from(l.querySelectorAll("[aria-live]"))),tD(a,l,r,"aria-hidden")):function(){return null}},bs=function(){return bs=Object.assign||function(t){for(var r,a=1,l=arguments.length;a<l;a++){r=arguments[a];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])}return t},bs.apply(this,arguments)};function $1(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r}function nD(e,t,r){if(r||arguments.length===2)for(var a=0,l=t.length,c;a<l;a++)(c||!(a in t))&&(c||(c=Array.prototype.slice.call(t,0,a)),c[a]=t[a]);return e.concat(c||Array.prototype.slice.call(t))}var Ed="right-scroll-bar-position",Cd="width-before-scroll-bar",rD="with-scroll-bars-hidden",sD="--removed-body-scroll-bar-size";function ip(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function aD(e,t){var r=m.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(a){var l=r.value;l!==a&&(r.value=a,r.callback(a,l))}}}})[0];return r.callback=t,r.facade}var iD=typeof window<"u"?m.useLayoutEffect:m.useEffect,pw=new WeakMap;function lD(e,t){var r=aD(null,function(a){return e.forEach(function(l){return ip(l,a)})});return iD(function(){var a=pw.get(r);if(a){var l=new Set(a),c=new Set(e),d=r.current;l.forEach(function(f){c.has(f)||ip(f,null)}),c.forEach(function(f){l.has(f)||ip(f,d)})}pw.set(r,e)},[e]),r}function oD(e){return e}function cD(e,t){t===void 0&&(t=oD);var r=[],a=!1,l={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(c){var d=t(c,a);return r.push(d),function(){r=r.filter(function(f){return f!==d})}},assignSyncMedium:function(c){for(a=!0;r.length;){var d=r;r=[],d.forEach(c)}r={push:function(f){return c(f)},filter:function(){return r}}},assignMedium:function(c){a=!0;var d=[];if(r.length){var f=r;r=[],f.forEach(c),d=r}var h=function(){var v=d;d=[],v.forEach(c)},p=function(){return Promise.resolve().then(h)};p(),r={push:function(v){d.push(v),p()},filter:function(v){return d=d.filter(v),r}}}};return l}function uD(e){e===void 0&&(e={});var t=cD(null);return t.options=bs({async:!0,ssr:!1},e),t}var B1=function(e){var t=e.sideCar,r=$1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return m.createElement(a,bs({},r))};B1.isSideCarExport=!0;function dD(e,t){return e.useMedium(t),B1}var H1=uD(),lp=function(){},ff=m.forwardRef(function(e,t){var r=m.useRef(null),a=m.useState({onScrollCapture:lp,onWheelCapture:lp,onTouchMoveCapture:lp}),l=a[0],c=a[1],d=e.forwardProps,f=e.children,h=e.className,p=e.removeScrollBar,v=e.enabled,x=e.shards,b=e.sideCar,w=e.noIsolation,j=e.inert,_=e.allowPinchZoom,N=e.as,C=N===void 0?"div":N,E=e.gapMode,T=$1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=b,R=lD([r,t]),L=bs(bs({},T),l);return m.createElement(m.Fragment,null,v&&m.createElement(M,{sideCar:H1,removeScrollBar:p,shards:x,noIsolation:w,inert:j,setCallbacks:c,allowPinchZoom:!!_,lockRef:r,gapMode:E}),d?m.cloneElement(m.Children.only(f),bs(bs({},L),{ref:R})):m.createElement(C,bs({},L,{className:h,ref:R}),f))});ff.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ff.classNames={fullWidth:Cd,zeroRight:Ed};var fD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function hD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=fD();return t&&e.setAttribute("nonce",t),e}function mD(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function pD(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var gD=function(){var e=0,t=null;return{add:function(r){e==0&&(t=hD())&&(mD(t,r),pD(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},vD=function(){var e=gD();return function(t,r){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},q1=function(){var e=vD(),t=function(r){var a=r.styles,l=r.dynamic;return e(a,l),null};return t},xD={left:0,top:0,right:0,gap:0},op=function(e){return parseInt(e||"",10)||0},yD=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],a=t[e==="padding"?"paddingTop":"marginTop"],l=t[e==="padding"?"paddingRight":"marginRight"];return[op(r),op(a),op(l)]},bD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return xD;var t=yD(e),r=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-r+t[2]-t[0])}},wD=q1(),kl="data-scroll-locked",jD=function(e,t,r,a){var l=e.left,c=e.top,d=e.right,f=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(rD,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(f,"px ").concat(a,`;
  }
  body[`).concat(kl,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),r==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(a,`;
    `),r==="padding"&&"padding-right: ".concat(f,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ed,` {
    right: `).concat(f,"px ").concat(a,`;
  }
  
  .`).concat(Cd,` {
    margin-right: `).concat(f,"px ").concat(a,`;
  }
  
  .`).concat(Ed," .").concat(Ed,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Cd," .").concat(Cd,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(kl,`] {
    `).concat(sD,": ").concat(f,`px;
  }
`)},gw=function(){var e=parseInt(document.body.getAttribute(kl)||"0",10);return isFinite(e)?e:0},_D=function(){m.useEffect(function(){return document.body.setAttribute(kl,(gw()+1).toString()),function(){var e=gw()-1;e<=0?document.body.removeAttribute(kl):document.body.setAttribute(kl,e.toString())}},[])},ND=function(e){var t=e.noRelative,r=e.noImportant,a=e.gapMode,l=a===void 0?"margin":a;_D();var c=m.useMemo(function(){return bD(l)},[l]);return m.createElement(wD,{styles:jD(c,!t,l,r?"":"!important")})},Yp=!1;if(typeof window<"u")try{var vd=Object.defineProperty({},"passive",{get:function(){return Yp=!0,!0}});window.addEventListener("test",vd,vd),window.removeEventListener("test",vd,vd)}catch{Yp=!1}var El=Yp?{passive:!1}:!1,SD=function(e){return e.tagName==="TEXTAREA"},F1=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!SD(e)&&r[t]==="visible")},ED=function(e){return F1(e,"overflowY")},CD=function(e){return F1(e,"overflowX")},vw=function(e,t){var r=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var l=V1(e,a);if(l){var c=Y1(e,a),d=c[1],f=c[2];if(d>f)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},TD=function(e){var t=e.scrollTop,r=e.scrollHeight,a=e.clientHeight;return[t,r,a]},RD=function(e){var t=e.scrollLeft,r=e.scrollWidth,a=e.clientWidth;return[t,r,a]},V1=function(e,t){return e==="v"?ED(t):CD(t)},Y1=function(e,t){return e==="v"?TD(t):RD(t)},MD=function(e,t){return e==="h"&&t==="rtl"?-1:1},AD=function(e,t,r,a,l){var c=MD(e,window.getComputedStyle(t).direction),d=c*a,f=r.target,h=t.contains(f),p=!1,v=d>0,x=0,b=0;do{var w=Y1(e,f),j=w[0],_=w[1],N=w[2],C=_-N-c*j;(j||C)&&V1(e,f)&&(x+=C,b+=j),f instanceof ShadowRoot?f=f.host:f=f.parentNode}while(!h&&f!==document.body||h&&(t.contains(f)||t===f));return(v&&Math.abs(x)<1||!v&&Math.abs(b)<1)&&(p=!0),p},xd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},xw=function(e){return[e.deltaX,e.deltaY]},yw=function(e){return e&&"current"in e?e.current:e},kD=function(e,t){return e[0]===t[0]&&e[1]===t[1]},DD=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},OD=0,Cl=[];function PD(e){var t=m.useRef([]),r=m.useRef([0,0]),a=m.useRef(),l=m.useState(OD++)[0],c=m.useState(q1)[0],d=m.useRef(e);m.useEffect(function(){d.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(l));var _=nD([e.lockRef.current],(e.shards||[]).map(yw),!0).filter(Boolean);return _.forEach(function(N){return N.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),_.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(l))})}}},[e.inert,e.lockRef.current,e.shards]);var f=m.useCallback(function(_,N){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!d.current.allowPinchZoom;var C=xd(_),E=r.current,T="deltaX"in _?_.deltaX:E[0]-C[0],M="deltaY"in _?_.deltaY:E[1]-C[1],R,L=_.target,H=Math.abs(T)>Math.abs(M)?"h":"v";if("touches"in _&&H==="h"&&L.type==="range")return!1;var $=vw(H,L);if(!$)return!0;if($?R=H:(R=H==="v"?"h":"v",$=vw(H,L)),!$)return!1;if(!a.current&&"changedTouches"in _&&(T||M)&&(a.current=R),!R)return!0;var I=a.current||R;return AD(I,N,_,I==="h"?T:M)},[]),h=m.useCallback(function(_){var N=_;if(!(!Cl.length||Cl[Cl.length-1]!==c)){var C="deltaY"in N?xw(N):xd(N),E=t.current.filter(function(R){return R.name===N.type&&(R.target===N.target||N.target===R.shadowParent)&&kD(R.delta,C)})[0];if(E&&E.should){N.cancelable&&N.preventDefault();return}if(!E){var T=(d.current.shards||[]).map(yw).filter(Boolean).filter(function(R){return R.contains(N.target)}),M=T.length>0?f(N,T[0]):!d.current.noIsolation;M&&N.cancelable&&N.preventDefault()}}},[]),p=m.useCallback(function(_,N,C,E){var T={name:_,delta:N,target:C,should:E,shadowParent:LD(C)};t.current.push(T),setTimeout(function(){t.current=t.current.filter(function(M){return M!==T})},1)},[]),v=m.useCallback(function(_){r.current=xd(_),a.current=void 0},[]),x=m.useCallback(function(_){p(_.type,xw(_),_.target,f(_,e.lockRef.current))},[]),b=m.useCallback(function(_){p(_.type,xd(_),_.target,f(_,e.lockRef.current))},[]);m.useEffect(function(){return Cl.push(c),e.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:b}),document.addEventListener("wheel",h,El),document.addEventListener("touchmove",h,El),document.addEventListener("touchstart",v,El),function(){Cl=Cl.filter(function(_){return _!==c}),document.removeEventListener("wheel",h,El),document.removeEventListener("touchmove",h,El),document.removeEventListener("touchstart",v,El)}},[]);var w=e.removeScrollBar,j=e.inert;return m.createElement(m.Fragment,null,j?m.createElement(c,{styles:DD(l)}):null,w?m.createElement(ND,{gapMode:e.gapMode}):null)}function LD(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ID=dD(H1,PD);var Ic=m.forwardRef(function(e,t){return m.createElement(ff,bs({},e,{ref:t,sideCar:ID}))});Ic.classNames=ff.classNames;var Gp=["Enter"," "],zD=["ArrowDown","PageUp","Home"],G1=["ArrowUp","PageDown","End"],UD=[...zD,...G1],$D={ltr:[...Gp,"ArrowRight"],rtl:[...Gp,"ArrowLeft"]},BD={ltr:["ArrowLeft"],rtl:["ArrowRight"]},zc="Menu",[yc,HD,qD]=Cg(zc),[Pi,W1]=lr(zc,[qD,Ya,uf]),hf=Ya(),X1=uf(),[FD,Li]=Pi(zc),[VD,Uc]=Pi(zc),K1=e=>{const{__scopeMenu:t,open:r=!1,children:a,dir:l,onOpenChange:c,modal:d=!0}=e,f=hf(t),[h,p]=m.useState(null),v=m.useRef(!1),x=Tr(c),b=tf(l);return m.useEffect(()=>{const w=()=>{v.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>v.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),s.jsx(zg,{...f,children:s.jsx(FD,{scope:t,open:r,onOpenChange:x,content:h,onContentChange:p,children:s.jsx(VD,{scope:t,onClose:m.useCallback(()=>x(!1),[x]),isUsingKeyboardRef:v,dir:b,modal:d,children:a})})})};K1.displayName=zc;var YD="MenuAnchor",Ug=m.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e,l=hf(r);return s.jsx(Pc,{...l,...a,ref:t})});Ug.displayName=YD;var $g="MenuPortal",[GD,Q1]=Pi($g,{forceMount:void 0}),Z1=e=>{const{__scopeMenu:t,forceMount:r,children:a,container:l}=e,c=Li($g,t);return s.jsx(GD,{scope:t,forceMount:r,children:s.jsx(Ar,{present:r||c.open,children:s.jsx(Lc,{asChild:!0,container:l,children:a})})})};Z1.displayName=$g;var Yr="MenuContent",[WD,Bg]=Pi(Yr),J1=m.forwardRef((e,t)=>{const r=Q1(Yr,e.__scopeMenu),{forceMount:a=r.forceMount,...l}=e,c=Li(Yr,e.__scopeMenu),d=Uc(Yr,e.__scopeMenu);return s.jsx(yc.Provider,{scope:e.__scopeMenu,children:s.jsx(Ar,{present:a||c.open,children:s.jsx(yc.Slot,{scope:e.__scopeMenu,children:d.modal?s.jsx(XD,{...l,ref:t}):s.jsx(KD,{...l,ref:t})})})})}),XD=m.forwardRef((e,t)=>{const r=Li(Yr,e.__scopeMenu),a=m.useRef(null),l=_t(t,a);return m.useEffect(()=>{const c=a.current;if(c)return df(c)},[]),s.jsx(Hg,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ke(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),KD=m.forwardRef((e,t)=>{const r=Li(Yr,e.__scopeMenu);return s.jsx(Hg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Hg=m.forwardRef((e,t)=>{const{__scopeMenu:r,loop:a=!1,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:d,disableOutsidePointerEvents:f,onEntryFocus:h,onEscapeKeyDown:p,onPointerDownOutside:v,onFocusOutside:x,onInteractOutside:b,onDismiss:w,disableOutsideScroll:j,..._}=e,N=Li(Yr,r),C=Uc(Yr,r),E=hf(r),T=X1(r),M=HD(r),[R,L]=m.useState(null),H=m.useRef(null),$=_t(t,H,N.onContentChange),I=m.useRef(0),Y=m.useRef(""),ce=m.useRef(0),te=m.useRef(null),q=m.useRef("right"),le=m.useRef(0),ue=j?Ic:m.Fragment,O=j?{as:Cs,allowPinchZoom:!0}:void 0,G=ee=>{var K,ae;const k=Y.current+ee,P=M().filter(ge=>!ge.disabled),V=document.activeElement,X=(K=P.find(ge=>ge.ref.current===V))==null?void 0:K.textValue,D=P.map(ge=>ge.textValue),U=oO(D,k,X),F=(ae=P.find(ge=>ge.textValue===U))==null?void 0:ae.ref.current;(function ge(de){Y.current=de,window.clearTimeout(I.current),de!==""&&(I.current=window.setTimeout(()=>ge(""),1e3))})(k),F&&setTimeout(()=>F.focus())};m.useEffect(()=>()=>window.clearTimeout(I.current),[]),nf();const B=m.useCallback(ee=>{var P,V;return q.current===((P=te.current)==null?void 0:P.side)&&uO(ee,(V=te.current)==null?void 0:V.area)},[]);return s.jsx(WD,{scope:r,searchRef:Y,onItemEnter:m.useCallback(ee=>{B(ee)&&ee.preventDefault()},[B]),onItemLeave:m.useCallback(ee=>{var k;B(ee)||((k=H.current)==null||k.focus(),L(null))},[B]),onTriggerLeave:m.useCallback(ee=>{B(ee)&&ee.preventDefault()},[B]),pointerGraceTimerRef:ce,onPointerGraceIntentChange:m.useCallback(ee=>{te.current=ee},[]),children:s.jsx(ue,{...O,children:s.jsx(Dc,{asChild:!0,trapped:l,onMountAutoFocus:ke(c,ee=>{var k;ee.preventDefault(),(k=H.current)==null||k.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:s.jsx(Zl,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:p,onPointerDownOutside:v,onFocusOutside:x,onInteractOutside:b,onDismiss:w,children:s.jsx(I1,{asChild:!0,...T,dir:C.dir,orientation:"vertical",loop:a,currentTabStopId:R,onCurrentTabStopIdChange:L,onEntryFocus:ke(h,ee=>{C.isUsingKeyboardRef.current||ee.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(lf,{role:"menu","aria-orientation":"vertical","data-state":p_(N.open),"data-radix-menu-content":"",dir:C.dir,...E,..._,ref:$,style:{outline:"none",..._.style},onKeyDown:ke(_.onKeyDown,ee=>{const P=ee.target.closest("[data-radix-menu-content]")===ee.currentTarget,V=ee.ctrlKey||ee.altKey||ee.metaKey,X=ee.key.length===1;P&&(ee.key==="Tab"&&ee.preventDefault(),!V&&X&&G(ee.key));const D=H.current;if(ee.target!==D||!UD.includes(ee.key))return;ee.preventDefault();const F=M().filter(K=>!K.disabled).map(K=>K.ref.current);G1.includes(ee.key)&&F.reverse(),iO(F)}),onBlur:ke(e.onBlur,ee=>{ee.currentTarget.contains(ee.target)||(window.clearTimeout(I.current),Y.current="")}),onPointerMove:ke(e.onPointerMove,bc(ee=>{const k=ee.target,P=le.current!==ee.clientX;if(ee.currentTarget.contains(k)&&P){const V=ee.clientX>le.current?"right":"left";q.current=V,le.current=ee.clientX}}))})})})})})})});J1.displayName=Yr;var QD="MenuGroup",qg=m.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e;return s.jsx(Je.div,{role:"group",...a,ref:t})});qg.displayName=QD;var ZD="MenuLabel",e_=m.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e;return s.jsx(Je.div,{...a,ref:t})});e_.displayName=ZD;var Id="MenuItem",bw="menu.itemSelect",mf=m.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:a,...l}=e,c=m.useRef(null),d=Uc(Id,e.__scopeMenu),f=Bg(Id,e.__scopeMenu),h=_t(t,c),p=m.useRef(!1),v=()=>{const x=c.current;if(!r&&x){const b=new CustomEvent(bw,{bubbles:!0,cancelable:!0});x.addEventListener(bw,w=>a==null?void 0:a(w),{once:!0}),Yj(x,b),b.defaultPrevented?p.current=!1:d.onClose()}};return s.jsx(t_,{...l,ref:h,disabled:r,onClick:ke(e.onClick,v),onPointerDown:x=>{var b;(b=e.onPointerDown)==null||b.call(e,x),p.current=!0},onPointerUp:ke(e.onPointerUp,x=>{var b;p.current||(b=x.currentTarget)==null||b.click()}),onKeyDown:ke(e.onKeyDown,x=>{const b=f.searchRef.current!=="";r||b&&x.key===" "||Gp.includes(x.key)&&(x.currentTarget.click(),x.preventDefault())})})});mf.displayName=Id;var t_=m.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:a=!1,textValue:l,...c}=e,d=Bg(Id,r),f=X1(r),h=m.useRef(null),p=_t(t,h),[v,x]=m.useState(!1),[b,w]=m.useState("");return m.useEffect(()=>{const j=h.current;j&&w((j.textContent??"").trim())},[c.children]),s.jsx(yc.ItemSlot,{scope:r,disabled:a,textValue:l??b,children:s.jsx(z1,{asChild:!0,...f,focusable:!a,children:s.jsx(Je.div,{role:"menuitem","data-highlighted":v?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...c,ref:p,onPointerMove:ke(e.onPointerMove,bc(j=>{a?d.onItemLeave(j):(d.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ke(e.onPointerLeave,bc(j=>d.onItemLeave(j))),onFocus:ke(e.onFocus,()=>x(!0)),onBlur:ke(e.onBlur,()=>x(!1))})})})}),JD="MenuCheckboxItem",n_=m.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:a,...l}=e;return s.jsx(l_,{scope:e.__scopeMenu,checked:r,children:s.jsx(mf,{role:"menuitemcheckbox","aria-checked":zd(r)?"mixed":r,...l,ref:t,"data-state":Vg(r),onSelect:ke(l.onSelect,()=>a==null?void 0:a(zd(r)?!0:!r),{checkForDefaultPrevented:!1})})})});n_.displayName=JD;var r_="MenuRadioGroup",[eO,tO]=Pi(r_,{value:void 0,onValueChange:()=>{}}),s_=m.forwardRef((e,t)=>{const{value:r,onValueChange:a,...l}=e,c=Tr(a);return s.jsx(eO,{scope:e.__scopeMenu,value:r,onValueChange:c,children:s.jsx(qg,{...l,ref:t})})});s_.displayName=r_;var a_="MenuRadioItem",i_=m.forwardRef((e,t)=>{const{value:r,...a}=e,l=tO(a_,e.__scopeMenu),c=r===l.value;return s.jsx(l_,{scope:e.__scopeMenu,checked:c,children:s.jsx(mf,{role:"menuitemradio","aria-checked":c,...a,ref:t,"data-state":Vg(c),onSelect:ke(a.onSelect,()=>{var d;return(d=l.onValueChange)==null?void 0:d.call(l,r)},{checkForDefaultPrevented:!1})})})});i_.displayName=a_;var Fg="MenuItemIndicator",[l_,nO]=Pi(Fg,{checked:!1}),o_=m.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:a,...l}=e,c=nO(Fg,r);return s.jsx(Ar,{present:a||zd(c.checked)||c.checked===!0,children:s.jsx(Je.span,{...l,ref:t,"data-state":Vg(c.checked)})})});o_.displayName=Fg;var rO="MenuSeparator",c_=m.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e;return s.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...a,ref:t})});c_.displayName=rO;var sO="MenuArrow",u_=m.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e,l=hf(r);return s.jsx(of,{...l,...a,ref:t})});u_.displayName=sO;var aO="MenuSub",[GB,d_]=Pi(aO),ic="MenuSubTrigger",f_=m.forwardRef((e,t)=>{const r=Li(ic,e.__scopeMenu),a=Uc(ic,e.__scopeMenu),l=d_(ic,e.__scopeMenu),c=Bg(ic,e.__scopeMenu),d=m.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:h}=c,p={__scopeMenu:e.__scopeMenu},v=m.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return m.useEffect(()=>v,[v]),m.useEffect(()=>{const x=f.current;return()=>{window.clearTimeout(x),h(null)}},[f,h]),s.jsx(Ug,{asChild:!0,...p,children:s.jsx(t_,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":l.contentId,"data-state":p_(r.open),...e,ref:Jd(t,l.onTriggerChange),onClick:x=>{var b;(b=e.onClick)==null||b.call(e,x),!(e.disabled||x.defaultPrevented)&&(x.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ke(e.onPointerMove,bc(x=>{c.onItemEnter(x),!x.defaultPrevented&&!e.disabled&&!r.open&&!d.current&&(c.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{r.onOpenChange(!0),v()},100))})),onPointerLeave:ke(e.onPointerLeave,bc(x=>{var w,j;v();const b=(w=r.content)==null?void 0:w.getBoundingClientRect();if(b){const _=(j=r.content)==null?void 0:j.dataset.side,N=_==="right",C=N?-5:5,E=b[N?"left":"right"],T=b[N?"right":"left"];c.onPointerGraceIntentChange({area:[{x:x.clientX+C,y:x.clientY},{x:E,y:b.top},{x:T,y:b.top},{x:T,y:b.bottom},{x:E,y:b.bottom}],side:_}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(x),x.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:ke(e.onKeyDown,x=>{var w;const b=c.searchRef.current!=="";e.disabled||b&&x.key===" "||$D[a.dir].includes(x.key)&&(r.onOpenChange(!0),(w=r.content)==null||w.focus(),x.preventDefault())})})})});f_.displayName=ic;var h_="MenuSubContent",m_=m.forwardRef((e,t)=>{const r=Q1(Yr,e.__scopeMenu),{forceMount:a=r.forceMount,...l}=e,c=Li(Yr,e.__scopeMenu),d=Uc(Yr,e.__scopeMenu),f=d_(h_,e.__scopeMenu),h=m.useRef(null),p=_t(t,h);return s.jsx(yc.Provider,{scope:e.__scopeMenu,children:s.jsx(Ar,{present:a||c.open,children:s.jsx(yc.Slot,{scope:e.__scopeMenu,children:s.jsx(Hg,{id:f.contentId,"aria-labelledby":f.triggerId,...l,ref:p,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:v=>{var x;d.isUsingKeyboardRef.current&&((x=h.current)==null||x.focus()),v.preventDefault()},onCloseAutoFocus:v=>v.preventDefault(),onFocusOutside:ke(e.onFocusOutside,v=>{v.target!==f.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:ke(e.onEscapeKeyDown,v=>{d.onClose(),v.preventDefault()}),onKeyDown:ke(e.onKeyDown,v=>{var w;const x=v.currentTarget.contains(v.target),b=BD[d.dir].includes(v.key);x&&b&&(c.onOpenChange(!1),(w=f.trigger)==null||w.focus(),v.preventDefault())})})})})})});m_.displayName=h_;function p_(e){return e?"open":"closed"}function zd(e){return e==="indeterminate"}function Vg(e){return zd(e)?"indeterminate":e?"checked":"unchecked"}function iO(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function lO(e,t){return e.map((r,a)=>e[(t+a)%e.length])}function oO(e,t,r){const l=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,c=r?e.indexOf(r):-1;let d=lO(e,Math.max(c,0));l.length===1&&(d=d.filter(p=>p!==r));const h=d.find(p=>p.toLowerCase().startsWith(l.toLowerCase()));return h!==r?h:void 0}function cO(e,t){const{x:r,y:a}=e;let l=!1;for(let c=0,d=t.length-1;c<t.length;d=c++){const f=t[c].x,h=t[c].y,p=t[d].x,v=t[d].y;h>a!=v>a&&r<(p-f)*(a-h)/(v-h)+f&&(l=!l)}return l}function uO(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return cO(r,t)}function bc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var dO=K1,fO=Ug,hO=Z1,mO=J1,pO=qg,gO=e_,vO=mf,xO=n_,yO=s_,bO=i_,wO=o_,jO=c_,_O=u_,NO=f_,SO=m_,Yg="DropdownMenu",[EO,WB]=lr(Yg,[W1]),or=W1(),[CO,g_]=EO(Yg),v_=e=>{const{__scopeDropdownMenu:t,children:r,dir:a,open:l,defaultOpen:c,onOpenChange:d,modal:f=!0}=e,h=or(t),p=m.useRef(null),[v=!1,x]=$a({prop:l,defaultProp:c,onChange:d});return s.jsx(CO,{scope:t,triggerId:Ss(),triggerRef:p,contentId:Ss(),open:v,onOpenChange:x,onOpenToggle:m.useCallback(()=>x(b=>!b),[x]),modal:f,children:s.jsx(dO,{...h,open:v,onOpenChange:x,dir:a,modal:f,children:r})})};v_.displayName=Yg;var x_="DropdownMenuTrigger",y_=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:a=!1,...l}=e,c=g_(x_,r),d=or(r);return s.jsx(fO,{asChild:!0,...d,children:s.jsx(Je.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...l,ref:Jd(t,c.triggerRef),onPointerDown:ke(e.onPointerDown,f=>{!a&&f.button===0&&f.ctrlKey===!1&&(c.onOpenToggle(),c.open||f.preventDefault())}),onKeyDown:ke(e.onKeyDown,f=>{a||(["Enter"," "].includes(f.key)&&c.onOpenToggle(),f.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())})})})});y_.displayName=x_;var TO="DropdownMenuPortal",b_=e=>{const{__scopeDropdownMenu:t,...r}=e,a=or(t);return s.jsx(hO,{...a,...r})};b_.displayName=TO;var w_="DropdownMenuContent",j_=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=g_(w_,r),c=or(r),d=m.useRef(!1);return s.jsx(mO,{id:l.contentId,"aria-labelledby":l.triggerId,...c,...a,ref:t,onCloseAutoFocus:ke(e.onCloseAutoFocus,f=>{var h;d.current||(h=l.triggerRef.current)==null||h.focus(),d.current=!1,f.preventDefault()}),onInteractOutside:ke(e.onInteractOutside,f=>{const h=f.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0,v=h.button===2||p;(!l.modal||v)&&(d.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});j_.displayName=w_;var RO="DropdownMenuGroup",MO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=or(r);return s.jsx(pO,{...l,...a,ref:t})});MO.displayName=RO;var AO="DropdownMenuLabel",__=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=or(r);return s.jsx(gO,{...l,...a,ref:t})});__.displayName=AO;var kO="DropdownMenuItem",N_=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=or(r);return s.jsx(vO,{...l,...a,ref:t})});N_.displayName=kO;var DO="DropdownMenuCheckboxItem",OO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=or(r);return s.jsx(xO,{...l,...a,ref:t})});OO.displayName=DO;var PO="DropdownMenuRadioGroup",LO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=or(r);return s.jsx(yO,{...l,...a,ref:t})});LO.displayName=PO;var IO="DropdownMenuRadioItem",zO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=or(r);return s.jsx(bO,{...l,...a,ref:t})});zO.displayName=IO;var UO="DropdownMenuItemIndicator",$O=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=or(r);return s.jsx(wO,{...l,...a,ref:t})});$O.displayName=UO;var BO="DropdownMenuSeparator",S_=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=or(r);return s.jsx(jO,{...l,...a,ref:t})});S_.displayName=BO;var HO="DropdownMenuArrow",qO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=or(r);return s.jsx(_O,{...l,...a,ref:t})});qO.displayName=HO;var FO="DropdownMenuSubTrigger",VO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=or(r);return s.jsx(NO,{...l,...a,ref:t})});VO.displayName=FO;var YO="DropdownMenuSubContent",GO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=or(r);return s.jsx(SO,{...l,...a,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});GO.displayName=YO;var WO=v_,XO=y_,KO=b_,QO=j_,ZO=__,JO=N_,eP=S_;/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nP=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),ww=e=>{const t=nP(e);return t.charAt(0).toUpperCase()+t.slice(1)},E_=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:l="",children:c,iconNode:d,...f},h)=>m.createElement("svg",{ref:h,...rP,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:E_("lucide",l),...f},[...d.map(([p,v])=>m.createElement(p,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=(e,t)=>{const r=m.forwardRef(({className:a,...l},c)=>m.createElement(sP,{ref:c,iconNode:t,className:E_(`lucide-${tP(ww(e))}`,`lucide-${e}`,a),...l}));return r.displayName=ww(e),r};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],iP=et("arrow-down-to-line",aP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],En=et("arrow-left",lP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],C_=et("banknote",oP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],vn=et("calendar-days",cP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],T_=et("calendar",uP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Gg=et("check",dP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],R_=et("chevron-down",fP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],M_=et("chevron-left",hP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],A_=et("chevron-right",mP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],gP=et("chevron-up",pP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ut=et("circle-alert",vP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ii=et("circle-check-big",xP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Fa=et("circle-plus",yP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wP=et("circle",bP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ud=et("clipboard-list",jP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]],pf=et("database-zap",_P);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],SP=et("download",NP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],as=et("file-text",EP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Wg=et("flask-conical",CP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],RP=et("grip-vertical",TP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],Rr=et("hourglass",MP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],gf=et("image",AP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Xe=et("info",kP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],dc=et("layers",DP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],PP=et("layout-template",OP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Ga=et("list-checks",LP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$t=et("loader-circle",IP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],UP=et("log-out",zP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],BP=et("menu",$P);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],k_=et("pencil",HP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],xn=et("phone",qP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Td=et("plus",FP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],vf=et("printer",VP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Bl=et("save",YP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],$c=et("search",GP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],XP=et("settings",WP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Wr=et("square-pen",KP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Kn=et("stethoscope",QP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Bc=et("trash-2",ZP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Dl=et("trash",JP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],t3=et("upload",e3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],D_=et("user-plus",n3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Bt=et("user",r3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],O_=et("users",s3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],i3=et("workflow",a3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xf=et("x",l3);function o3({...e}){return s.jsx(WO,{"data-slot":"dropdown-menu",...e})}function c3({...e}){return s.jsx(XO,{"data-slot":"dropdown-menu-trigger",...e})}function u3({className:e,sideOffset:t=4,...r}){return s.jsx(KO,{children:s.jsx(QO,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Ce("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...r})})}function d3({className:e,inset:t,variant:r="default",...a}){return s.jsx(JO,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":r,className:Ce("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function f3({className:e,inset:t,...r}){return s.jsx(ZO,{"data-slot":"dropdown-menu-label","data-inset":t,className:Ce("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...r})}function h3({className:e,...t}){return s.jsx(eP,{"data-slot":"dropdown-menu-separator",className:Ce("bg-border -mx-1 my-1 h-px",e),...t})}var Xg="Dialog",[P_,L_]=lr(Xg),[m3,fs]=P_(Xg),I_=e=>{const{__scopeDialog:t,children:r,open:a,defaultOpen:l,onOpenChange:c,modal:d=!0}=e,f=m.useRef(null),h=m.useRef(null),[p=!1,v]=$a({prop:a,defaultProp:l,onChange:c});return s.jsx(m3,{scope:t,triggerRef:f,contentRef:h,contentId:Ss(),titleId:Ss(),descriptionId:Ss(),open:p,onOpenChange:v,onOpenToggle:m.useCallback(()=>v(x=>!x),[v]),modal:d,children:r})};I_.displayName=Xg;var z_="DialogTrigger",U_=m.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,l=fs(z_,r),c=_t(t,l.triggerRef);return s.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":Zg(l.open),...a,ref:c,onClick:ke(e.onClick,l.onOpenToggle)})});U_.displayName=z_;var Kg="DialogPortal",[p3,$_]=P_(Kg,{forceMount:void 0}),B_=e=>{const{__scopeDialog:t,forceMount:r,children:a,container:l}=e,c=fs(Kg,t);return s.jsx(p3,{scope:t,forceMount:r,children:m.Children.map(a,d=>s.jsx(Ar,{present:r||c.open,children:s.jsx(Lc,{asChild:!0,container:l,children:d})}))})};B_.displayName=Kg;var $d="DialogOverlay",H_=m.forwardRef((e,t)=>{const r=$_($d,e.__scopeDialog),{forceMount:a=r.forceMount,...l}=e,c=fs($d,e.__scopeDialog);return c.modal?s.jsx(Ar,{present:a||c.open,children:s.jsx(g3,{...l,ref:t})}):null});H_.displayName=$d;var g3=m.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,l=fs($d,r);return s.jsx(Ic,{as:Cs,allowPinchZoom:!0,shards:[l.contentRef],children:s.jsx(Je.div,{"data-state":Zg(l.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),Ci="DialogContent",q_=m.forwardRef((e,t)=>{const r=$_(Ci,e.__scopeDialog),{forceMount:a=r.forceMount,...l}=e,c=fs(Ci,e.__scopeDialog);return s.jsx(Ar,{present:a||c.open,children:c.modal?s.jsx(v3,{...l,ref:t}):s.jsx(x3,{...l,ref:t})})});q_.displayName=Ci;var v3=m.forwardRef((e,t)=>{const r=fs(Ci,e.__scopeDialog),a=m.useRef(null),l=_t(t,r.contentRef,a);return m.useEffect(()=>{const c=a.current;if(c)return df(c)},[]),s.jsx(F_,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(e.onCloseAutoFocus,c=>{var d;c.preventDefault(),(d=r.triggerRef.current)==null||d.focus()}),onPointerDownOutside:ke(e.onPointerDownOutside,c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0;(d.button===2||f)&&c.preventDefault()}),onFocusOutside:ke(e.onFocusOutside,c=>c.preventDefault())})}),x3=m.forwardRef((e,t)=>{const r=fs(Ci,e.__scopeDialog),a=m.useRef(!1),l=m.useRef(!1);return s.jsx(F_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var d,f;(d=e.onCloseAutoFocus)==null||d.call(e,c),c.defaultPrevented||(a.current||(f=r.triggerRef.current)==null||f.focus(),c.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:c=>{var h,p;(h=e.onInteractOutside)==null||h.call(e,c),c.defaultPrevented||(a.current=!0,c.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const d=c.target;((p=r.triggerRef.current)==null?void 0:p.contains(d))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&l.current&&c.preventDefault()}})}),F_=m.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:c,...d}=e,f=fs(Ci,r),h=m.useRef(null),p=_t(t,h);return nf(),s.jsxs(s.Fragment,{children:[s.jsx(Dc,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:c,children:s.jsx(Zl,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":Zg(f.open),...d,ref:p,onDismiss:()=>f.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(b3,{titleId:f.titleId}),s.jsx(j3,{contentRef:h,descriptionId:f.descriptionId})]})]})}),Qg="DialogTitle",V_=m.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,l=fs(Qg,r);return s.jsx(Je.h2,{id:l.titleId,...a,ref:t})});V_.displayName=Qg;var Y_="DialogDescription",G_=m.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,l=fs(Y_,r);return s.jsx(Je.p,{id:l.descriptionId,...a,ref:t})});G_.displayName=Y_;var W_="DialogClose",X_=m.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,l=fs(W_,r);return s.jsx(Je.button,{type:"button",...a,ref:t,onClick:ke(e.onClick,()=>l.onOpenChange(!1))})});X_.displayName=W_;function Zg(e){return e?"open":"closed"}var K_="DialogTitleWarning",[y3,Q_]=gA(K_,{contentName:Ci,titleName:Qg,docsSlug:"dialog"}),b3=({titleId:e})=>{const t=Q_(K_),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},w3="DialogDescriptionWarning",j3=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Q_(w3).contentName}}.`;return m.useEffect(()=>{var c;const l=(c=e.current)==null?void 0:c.getAttribute("aria-describedby");t&&l&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},Jg=I_,Z_=U_,ev=B_,tv=H_,nv=q_,J_=V_,eN=G_,Hc=X_;function _3({...e}){return s.jsx(Jg,{"data-slot":"sheet",...e})}function N3({...e}){return s.jsx(Z_,{"data-slot":"sheet-trigger",...e})}function S3({...e}){return s.jsx(ev,{"data-slot":"sheet-portal",...e})}function E3({className:e,...t}){return s.jsx(tv,{"data-slot":"sheet-overlay",className:Ce("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function C3({className:e,children:t,side:r="right",...a}){return s.jsxs(S3,{children:[s.jsx(E3,{}),s.jsxs(nv,{"data-slot":"sheet-content",className:Ce("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",r==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",r==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",r==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",r==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...a,children:[t,s.jsxs(Hc,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[s.jsx(xf,{className:"size-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}var T3="VisuallyHidden",rv=m.forwardRef((e,t)=>s.jsx(Je.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));rv.displayName=T3;var R3=rv,[yf,XB]=lr("Tooltip",[Ya]),sv=Ya(),tN="TooltipProvider",M3=700,jw="tooltip.open",[A3,nN]=yf(tN),rN=e=>{const{__scopeTooltip:t,delayDuration:r=M3,skipDelayDuration:a=300,disableHoverableContent:l=!1,children:c}=e,[d,f]=m.useState(!0),h=m.useRef(!1),p=m.useRef(0);return m.useEffect(()=>{const v=p.current;return()=>window.clearTimeout(v)},[]),s.jsx(A3,{scope:t,isOpenDelayed:d,delayDuration:r,onOpen:m.useCallback(()=>{window.clearTimeout(p.current),f(!1)},[]),onClose:m.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>f(!0),a)},[a]),isPointerInTransitRef:h,onPointerInTransitChange:m.useCallback(v=>{h.current=v},[]),disableHoverableContent:l,children:c})};rN.displayName=tN;var sN="Tooltip",[KB,bf]=yf(sN),Wp="TooltipTrigger",k3=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...a}=e,l=bf(Wp,r),c=nN(Wp,r),d=sv(r),f=m.useRef(null),h=_t(t,f,l.onTriggerChange),p=m.useRef(!1),v=m.useRef(!1),x=m.useCallback(()=>p.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),s.jsx(Pc,{asChild:!0,...d,children:s.jsx(Je.button,{"aria-describedby":l.open?l.contentId:void 0,"data-state":l.stateAttribute,...a,ref:h,onPointerMove:ke(e.onPointerMove,b=>{b.pointerType!=="touch"&&!v.current&&!c.isPointerInTransitRef.current&&(l.onTriggerEnter(),v.current=!0)}),onPointerLeave:ke(e.onPointerLeave,()=>{l.onTriggerLeave(),v.current=!1}),onPointerDown:ke(e.onPointerDown,()=>{p.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:ke(e.onFocus,()=>{p.current||l.onOpen()}),onBlur:ke(e.onBlur,l.onClose),onClick:ke(e.onClick,l.onClose)})})});k3.displayName=Wp;var D3="TooltipPortal",[QB,O3]=yf(D3,{forceMount:void 0}),Hl="TooltipContent",P3=m.forwardRef((e,t)=>{const r=O3(Hl,e.__scopeTooltip),{forceMount:a=r.forceMount,side:l="top",...c}=e,d=bf(Hl,e.__scopeTooltip);return s.jsx(Ar,{present:a||d.open,children:d.disableHoverableContent?s.jsx(aN,{side:l,...c,ref:t}):s.jsx(L3,{side:l,...c,ref:t})})}),L3=m.forwardRef((e,t)=>{const r=bf(Hl,e.__scopeTooltip),a=nN(Hl,e.__scopeTooltip),l=m.useRef(null),c=_t(t,l),[d,f]=m.useState(null),{trigger:h,onClose:p}=r,v=l.current,{onPointerInTransitChange:x}=a,b=m.useCallback(()=>{f(null),x(!1)},[x]),w=m.useCallback((j,_)=>{const N=j.currentTarget,C={x:j.clientX,y:j.clientY},E=$3(C,N.getBoundingClientRect()),T=B3(C,E),M=H3(_.getBoundingClientRect()),R=F3([...T,...M]);f(R),x(!0)},[x]);return m.useEffect(()=>()=>b(),[b]),m.useEffect(()=>{if(h&&v){const j=N=>w(N,v),_=N=>w(N,h);return h.addEventListener("pointerleave",j),v.addEventListener("pointerleave",_),()=>{h.removeEventListener("pointerleave",j),v.removeEventListener("pointerleave",_)}}},[h,v,w,b]),m.useEffect(()=>{if(d){const j=_=>{const N=_.target,C={x:_.clientX,y:_.clientY},E=(h==null?void 0:h.contains(N))||(v==null?void 0:v.contains(N)),T=!q3(C,d);E?b():T&&(b(),p())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[h,v,d,p,b]),s.jsx(aN,{...e,ref:c})}),[I3,z3]=yf(sN,{isInside:!1}),aN=m.forwardRef((e,t)=>{const{__scopeTooltip:r,children:a,"aria-label":l,onEscapeKeyDown:c,onPointerDownOutside:d,...f}=e,h=bf(Hl,r),p=sv(r),{onClose:v}=h;return m.useEffect(()=>(document.addEventListener(jw,v),()=>document.removeEventListener(jw,v)),[v]),m.useEffect(()=>{if(h.trigger){const x=b=>{const w=b.target;w!=null&&w.contains(h.trigger)&&v()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[h.trigger,v]),s.jsx(Zl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:x=>x.preventDefault(),onDismiss:v,children:s.jsxs(lf,{"data-state":h.stateAttribute,...p,...f,ref:t,style:{...f.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(jg,{children:a}),s.jsx(I3,{scope:r,isInside:!0,children:s.jsx(R3,{id:h.contentId,role:"tooltip",children:l||a})})]})})});P3.displayName=Hl;var iN="TooltipArrow",U3=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...a}=e,l=sv(r);return z3(iN,r).isInside?null:s.jsx(of,{...l,...a,ref:t})});U3.displayName=iN;function $3(e,t){const r=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),l=Math.abs(t.right-e.x),c=Math.abs(t.left-e.x);switch(Math.min(r,a,l,c)){case c:return"left";case l:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function B3(e,t,r=5){const a=[];switch(t){case"top":a.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":a.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":a.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":a.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return a}function H3(e){const{top:t,right:r,bottom:a,left:l}=e;return[{x:l,y:t},{x:r,y:t},{x:r,y:a},{x:l,y:a}]}function q3(e,t){const{x:r,y:a}=e;let l=!1;for(let c=0,d=t.length-1;c<t.length;d=c++){const f=t[c].x,h=t[c].y,p=t[d].x,v=t[d].y;h>a!=v>a&&r<(p-f)*(a-h)/(v-h)+f&&(l=!l)}return l}function F3(e){const t=e.slice();return t.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),V3(t)}function V3(e){if(e.length<=1)return e.slice();const t=[];for(let a=0;a<e.length;a++){const l=e[a];for(;t.length>=2;){const c=t[t.length-1],d=t[t.length-2];if((c.x-d.x)*(l.y-d.y)>=(c.y-d.y)*(l.x-d.x))t.pop();else break}t.push(l)}t.pop();const r=[];for(let a=e.length-1;a>=0;a--){const l=e[a];for(;r.length>=2;){const c=r[r.length-1],d=r[r.length-2];if((c.x-d.x)*(l.y-d.y)>=(c.y-d.y)*(l.x-d.x))r.pop();else break}r.push(l)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Y3=rN;function G3({delayDuration:e=0,...t}){return s.jsx(Y3,{"data-slot":"tooltip-provider",delayDuration:e,...t})}const W3=()=>{const{user:e}=wg(),t=async()=>{const{error:c}=await se.auth.signOut();c&&console.error("Erreur de déconnexion:",c)},r=c=>c?c.substring(0,2).toUpperCase():"??",a=[{to:"/patients",label:"Patients",icon:O_},{to:"/doctors",label:"Médecins",icon:Kn},{to:"/test-types",label:"Types de Tests",icon:Ud},{to:"/categories",label:"Catégories",icon:dc},{to:"/ristournes",label:"Ristournes",icon:C_},{to:"/settings/print-header",label:"En-tête Impression",icon:as},{to:"/skip-range-management",label:"Parametres Validations",icon:XP},{to:"/ecb-models",label:"Modèles ECB",icon:dc},{to:"/atbs",label:"Gestion ATBs",icon:dc}],l=s.jsx("nav",{className:"flex flex-col gap-2 px-2 sm:px-4 py-4",children:a.map(c=>s.jsxs(_j,{to:c.to,className:({isActive:d})=>`flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors ${d?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,children:[s.jsx(c.icon,{className:"h-5 w-5"}),s.jsx("span",{children:c.label})]},c.label))});return s.jsxs("div",{className:"flex h-screen w-full bg-muted/40",children:[s.jsxs("aside",{className:"hidden sm:flex flex-col w-64 border-r bg-background",children:[s.jsxs("div",{className:"flex items-center gap-2 h-16 border-b px-6",children:[s.jsx(Wg,{className:"h-6 w-6 text-primary"}),s.jsx("span",{className:"font-semibold tracking-tight",children:"LRMS"})]}),l]}),s.jsxs("div",{className:"flex flex-1 flex-col",children:[s.jsxs("header",{className:"sticky top-0 z-10 flex h-16 items-center justify-between border-b bg-background px-4 sm:px-6",children:[s.jsx("div",{className:"sm:hidden",children:s.jsxs(_3,{children:[s.jsx(N3,{asChild:!0,children:s.jsxs(ne,{variant:"outline",size:"icon",children:[s.jsx(BP,{className:"h-5 w-5"}),s.jsx("span",{className:"sr-only",children:"Ouvrir le menu"})]})}),s.jsxs(C3,{side:"left",className:"w-64 p-0 pt-10",children:[" ",l]})]})}),s.jsx("div",{className:"flex-1"}),s.jsxs(o3,{children:[s.jsx(c3,{asChild:!0,children:s.jsx(ne,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:s.jsx(Ac,{className:"h-9 w-9",children:s.jsx(kc,{children:r(e==null?void 0:e.email)})})})}),s.jsxs(u3,{className:"w-56",align:"end",forceMount:!0,children:[s.jsx(f3,{className:"font-normal",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:"Connecté en tant que"}),s.jsx("p",{className:"text-xs leading-none text-muted-foreground truncate",children:(e==null?void 0:e.email)||"Utilisateur"})]})}),s.jsx(h3,{}),s.jsxs(d3,{onClick:t,className:"text-destructive focus:text-destructive focus:bg-destructive/10 cursor-pointer",children:[s.jsx(UP,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Se déconnecter"})]})]})]})]}),s.jsx(G3,{children:s.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-4 sm:p-6 bg-white",children:s.jsx(xj,{})})})]})]})},X3=()=>{const{session:e,loading:t}=wg(),r=sa();return t?s.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-200",children:[s.jsx($t,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-2 text-muted-foreground",children:"Chargement de l'application..."})]}):e?s.jsx(xj,{}):s.jsx(vj,{to:"/login",state:{from:r},replace:!0})};function Ge({className:e,type:t,...r}){return s.jsx("input",{type:t,"data-slot":"input",className:Ce("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}var K3="Label",lN=m.forwardRef((e,t)=>s.jsx(Je.label,{...e,ref:t,onMouseDown:r=>{var l;r.target.closest("button, input, select, textarea")||((l=e.onMouseDown)==null||l.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));lN.displayName=K3;var Q3=lN;function Ie({className:e,...t}){return s.jsx(Q3,{"data-slot":"label",className:Ce("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function Te({className:e,...t}){return s.jsx("div",{"data-slot":"card",className:Ce("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function Ae({className:e,...t}){return s.jsx("div",{"data-slot":"card-header",className:Ce("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function xt({className:e,...t}){return s.jsx("div",{"data-slot":"card-title",className:Ce("leading-none font-semibold",e),...t})}function mr({className:e,...t}){return s.jsx("div",{"data-slot":"card-description",className:Ce("text-muted-foreground text-sm",e),...t})}function Re({className:e,...t}){return s.jsx("div",{"data-slot":"card-content",className:Ce("px-6",e),...t})}function is({className:e,...t}){return s.jsx("div",{"data-slot":"card-footer",className:Ce("flex items-center px-6 [.border-t]:pt-6",e),...t})}const Z3=Eg("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Dt({className:e,variant:t,...r}){return s.jsx("div",{"data-slot":"alert",role:"alert",className:Ce(Z3({variant:t}),e),...r})}function Ot({className:e,...t}){return s.jsx("div",{"data-slot":"alert-title",className:Ce("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function Pt({className:e,...t}){return s.jsx("div",{"data-slot":"alert-description",className:Ce("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}const J3=()=>{const[e,t]=m.useState(""),[r,a]=m.useState(""),[l,c]=m.useState(!1),[d,f]=m.useState(null),{session:h,loading:p}=wg(),v=async x=>{x.preventDefault(),c(!0),f(null);try{const{error:b}=await se.auth.signInWithPassword({email:e,password:r});if(b)throw b}catch(b){console.error("Login error:",b),f(b instanceof Error&&b.message==="Invalid login credentials"?"Identifiants invalides. Veuillez vérifier votre email et mot de passe.":"Échec de la connexion. Une erreur est survenue.")}finally{c(!1)}};return p?s.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-200",children:[s.jsx($t,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-2 text-muted-foreground",children:"Chargement..."})]}):h?s.jsx(vj,{to:"/patients",replace:!0}):s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-100 via-gray-50 to-blue-100 p-4",children:s.jsxs(Te,{className:"w-full max-w-md shadow-xl border-t-4 border-primary rounded-lg overflow-hidden",children:[s.jsxs(Ae,{className:"text-center p-6 bg-muted/30",children:[s.jsxs("div",{className:"mx-auto mb-4",children:[s.jsx(Wg,{className:"h-12 w-12 text-primary"})," "]}),s.jsx(xt,{className:"text-2xl font-bold tracking-tight",children:"Connexion LRMS "}),s.jsxs(mr,{className:"text-muted-foreground",children:["Accédez à votre espace laboratoire sécurisé."," "]})]}),s.jsxs("form",{onSubmit:v,children:[s.jsxs(Re,{className:"p-6 space-y-6",children:[" ",d&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsx(Pt,{children:d})]}),s.jsxs("div",{className:"space-y-2",children:[" ",s.jsx(Ie,{htmlFor:"email",className:"font-semibold",children:"Adresse e-mail"}),s.jsx(Ge,{id:"email",type:"email",placeholder:"votreadresse@email.com",required:!0,value:e,onChange:x=>t(x.target.value),disabled:l,className:"h-10"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"password",className:"font-semibold",children:"Mot de passe"}),s.jsx(Ge,{id:"password",type:"password",placeholder:"Votre mot de passe",required:!0,value:r,onChange:x=>a(x.target.value),disabled:l,className:"h-10"})]})]}),s.jsx(is,{className:"p-6 bg-muted/30",children:s.jsx(ne,{type:"submit",className:"w-full h-11 text-base font-semibold",disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx($t,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion en cours..."]}):"Se connecter"})})]})]})})};function aa({className:e,...t}){return s.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:s.jsx("table",{"data-slot":"table",className:Ce("w-full caption-bottom text-sm",e),...t})})}function ia({className:e,...t}){return s.jsx("thead",{"data-slot":"table-header",className:Ce("[&_tr]:border-b",e),...t})}function la({className:e,...t}){return s.jsx("tbody",{"data-slot":"table-body",className:Ce("[&_tr:last-child]:border-0",e),...t})}function Vt({className:e,...t}){return s.jsx("tr",{"data-slot":"table-row",className:Ce("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function pt({className:e,...t}){return s.jsx("th",{"data-slot":"table-head",className:Ce("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Qe({className:e,...t}){return s.jsx("td",{"data-slot":"table-cell",className:Ce("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function W({className:e,...t}){return s.jsx("div",{"data-slot":"skeleton",className:Ce("bg-accent animate-pulse rounded-md",e),...t})}function qc(e,t){const[r,a]=m.useState(e);return m.useEffect(()=>{const l=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(l)}},[e,t]),r}var oN="AlertDialog",[e5,ZB]=lr(oN,[L_]),oa=L_(),cN=e=>{const{__scopeAlertDialog:t,...r}=e,a=oa(t);return s.jsx(Jg,{...a,...r,modal:!0})};cN.displayName=oN;var t5="AlertDialogTrigger",uN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,l=oa(r);return s.jsx(Z_,{...l,...a,ref:t})});uN.displayName=t5;var n5="AlertDialogPortal",dN=e=>{const{__scopeAlertDialog:t,...r}=e,a=oa(t);return s.jsx(ev,{...a,...r})};dN.displayName=n5;var r5="AlertDialogOverlay",fN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,l=oa(r);return s.jsx(tv,{...l,...a,ref:t})});fN.displayName=r5;var Ol="AlertDialogContent",[s5,a5]=e5(Ol),hN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:a,...l}=e,c=oa(r),d=m.useRef(null),f=_t(t,d),h=m.useRef(null);return s.jsx(y3,{contentName:Ol,titleName:mN,docsSlug:"alert-dialog",children:s.jsx(s5,{scope:r,cancelRef:h,children:s.jsxs(nv,{role:"alertdialog",...c,...l,ref:f,onOpenAutoFocus:ke(l.onOpenAutoFocus,p=>{var v;p.preventDefault(),(v=h.current)==null||v.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[s.jsx(jg,{children:a}),s.jsx(l5,{contentRef:d})]})})})});hN.displayName=Ol;var mN="AlertDialogTitle",pN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,l=oa(r);return s.jsx(J_,{...l,...a,ref:t})});pN.displayName=mN;var gN="AlertDialogDescription",vN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,l=oa(r);return s.jsx(eN,{...l,...a,ref:t})});vN.displayName=gN;var i5="AlertDialogAction",xN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,l=oa(r);return s.jsx(Hc,{...l,...a,ref:t})});xN.displayName=i5;var yN="AlertDialogCancel",bN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,{cancelRef:l}=a5(yN,r),c=oa(r),d=_t(t,l);return s.jsx(Hc,{...c,...a,ref:d})});bN.displayName=yN;var l5=({contentRef:e})=>{const t=`\`${Ol}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ol}\` by passing a \`${gN}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ol}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var a;document.getElementById((a=e.current)==null?void 0:a.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},o5=cN,c5=uN,u5=dN,d5=fN,f5=hN,h5=xN,m5=bN,p5=pN,g5=vN;function wc({...e}){return s.jsx(o5,{"data-slot":"alert-dialog",...e})}function wf({...e}){return s.jsx(c5,{"data-slot":"alert-dialog-trigger",...e})}function v5({...e}){return s.jsx(u5,{"data-slot":"alert-dialog-portal",...e})}function x5({className:e,...t}){return s.jsx(d5,{"data-slot":"alert-dialog-overlay",className:Ce("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function jf({className:e,...t}){return s.jsxs(v5,{children:[s.jsx(x5,{}),s.jsx(f5,{"data-slot":"alert-dialog-content",className:Ce("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function _f({className:e,...t}){return s.jsx("div",{"data-slot":"alert-dialog-header",className:Ce("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Nf({className:e,...t}){return s.jsx("div",{"data-slot":"alert-dialog-footer",className:Ce("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Sf({className:e,...t}){return s.jsx(p5,{"data-slot":"alert-dialog-title",className:Ce("text-lg font-semibold",e),...t})}function Ef({className:e,...t}){return s.jsx(g5,{"data-slot":"alert-dialog-description",className:Ce("text-muted-foreground text-sm",e),...t})}function av({className:e,...t}){return s.jsx(h5,{className:Ce(Ul(),e),...t})}function Cf({className:e,...t}){return s.jsx(m5,{className:Ce(Ul({variant:"outline"}),e),...t})}const cp=10,_w=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(!0),[l,c]=m.useState(null),[d,f]=m.useState(""),[h,p]=m.useState(1),[v,x]=m.useState(0),[b,w]=m.useState(null),[j,_]=m.useState(!1),[N,C]=m.useState([]),[E,T]=m.useState(""),M=qc(d,300),R=Math.ceil(v/cp);m.useEffect(()=>{(async()=>{const{data:ce,error:te}=await se.from("doctor").select("id, full_name").order("full_name",{ascending:!0});te||C(ce||[])})()},[]);const L=m.useCallback(async()=>{a(!0),c(null);try{const Y=(h-1)*cp,ce=Y+cp-1;let te=se.from("patient").select("*",{count:"exact"});if(M){const O=`%${M}%`;te=te.or(`full_name.ilike.${O},patient_unique_id.ilike.${O}`)}if(E){const{data:O,error:G}=await se.from("patient_result").select("patient_id").eq("doctor_id",E);if(G)throw console.error("Supabase error while fetching patient_result:",G),G;const B=(O||[]).map(ee=>ee.patient_id);if(B.length===0){t([]),x(0),a(!1);return}te=te.in("id",B)}te=te.order("created_at",{ascending:!1}).range(Y,ce);const{data:q,error:le,count:ue}=await te;if(le)throw console.error("Supabase error while fetching patients:",le),le;t(q||[]),x(ue??0)}catch(Y){console.error("Erreur lors de la récupération des patients:",Y),c(Y instanceof Error?Y.message:"Une erreur est survenue lors du chargement des patients."),t([]),x(0)}finally{a(!1)}},[h,M,E]);m.useEffect(()=>{L()},[L]),m.useEffect(()=>{p(1)},[M,E]);const H=()=>{p(Y=>Math.max(Y-1,1))},$=()=>{p(Y=>Math.min(Y+1,R))},I=async()=>{if(b){_(!0),c(null);try{const{error:Y}=await se.from("patient").delete().eq("id",b.id);if(Y)throw Y;t(ce=>ce.filter(te=>te.id!==b.id)),x(ce=>ce-1),w(null)}catch(Y){c((Y instanceof Error?Y.message:"")||"Erreur lors de la suppression du patient.")}finally{_(!1)}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(O_,{className:"h-6 w-6"}),"Gestion des Patients"]}),s.jsx(st,{to:"/patients/new",children:s.jsxs(ne,{children:[s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Ajouter un Patient"]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx($c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ge,{type:"search",placeholder:"Rechercher par nom ou ID unique...",value:d,onChange:Y=>f(Y.target.value),className:"pl-10 w-full md:w-1/3"})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[s.jsx(Ie,{htmlFor:"doctor-filter",children:"Filtrer par médecin :"}),s.jsxs("select",{id:"doctor-filter",value:E,onChange:Y=>T(Y.target.value),className:"border rounded px-2 py-1 text-sm",children:[s.jsx("option",{value:"",children:"Tous les médecins"}),N.map(Y=>s.jsx("option",{value:Y.id,children:Y.full_name},Y.id))]})]}),r&&s.jsxs("div",{className:"space-y-2 pt-4",children:[s.jsx(W,{className:"h-12 w-full"}),s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"})]}),!r&&l&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur de Chargement"}),s.jsx(Pt,{children:l})]}),!r&&!l&&s.jsxs("div",{className:"space-y-4",children:[" ",s.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Vt,{children:[s.jsx(pt,{className:"w-[150px]",children:"ID Unique"}),s.jsx(pt,{children:"Nom Complet"}),s.jsx(pt,{children:"Date de Naissance"}),s.jsx(pt,{className:"hidden md:table-cell",children:"Genre"}),s.jsx(pt,{className:"hidden lg:table-cell",children:"Téléphone"}),s.jsx(pt,{className:"text-right",children:"Actions"})]})}),s.jsx(la,{children:e.length>0?e.map(Y=>s.jsxs(Vt,{children:[s.jsx(Qe,{className:"font-medium",children:Y.patient_unique_id}),s.jsx(Qe,{children:Y.full_name}),s.jsx(Qe,{children:Y.date_of_birth?new Date(Y.date_of_birth).toLocaleDateString("fr-FR"):"N/A"}),s.jsx(Qe,{className:"hidden md:table-cell",children:Y.gender||"N/A"}),s.jsx(Qe,{className:"hidden lg:table-cell",children:Y.phone||"N/A"}),s.jsxs(Qe,{className:"text-right",children:[s.jsx(st,{to:`/patients/${Y.id}`,children:s.jsx(ne,{variant:"outline",size:"sm",children:"Voir Détails"})}),s.jsxs(wc,{children:[s.jsx(wf,{asChild:!0,children:s.jsxs(ne,{variant:"destructive",size:"sm",className:"ml-2",title:"Supprimer le patient",onClick:()=>w(Y),disabled:r,children:[s.jsx(Bc,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Supprimer"})]})}),s.jsxs(jf,{children:[s.jsxs(_f,{children:[s.jsx(Sf,{children:"Supprimer ce patient ?"}),s.jsx(Ef,{children:"Cette action est irréversible. Voulez-vous vraiment supprimer ce patient ?"})]}),s.jsxs(Nf,{children:[s.jsx(Cf,{onClick:()=>w(null),disabled:j,children:"Annuler"}),s.jsx(av,{onClick:I,disabled:j,className:"bg-destructive text-destructive-foreground",children:"Supprimer"})]})]})]})]})]},Y.id)):s.jsx(Vt,{children:s.jsx(Qe,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:d?"Aucun patient ne correspond à votre recherche.":s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[s.jsx(pf,{className:"h-8 w-8 text-muted-foreground/50"}),"Aucun patient trouvé. Commencez par en ajouter un."]})})})})]})}),R>1&&s.jsxs("div",{className:"flex items-center justify-between space-x-2 pt-2",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",h," sur ",R," (",v," ",v===1?"résultat":"résultats",")"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(ne,{variant:"outline",size:"sm",onClick:H,disabled:h<=1,children:[s.jsx(M_,{className:"h-4 w-4 mr-1 sm:mr-2"})," ",s.jsx("span",{className:"hidden sm:inline",children:"Précédent"})," "]}),s.jsxs(ne,{variant:"outline",size:"sm",onClick:$,disabled:h>=R,children:[s.jsx("span",{className:"hidden sm:inline",children:"Suivant"})," ",s.jsx(A_,{className:"h-4 w-4 ml-1 sm:ml-2"})," "]})]})]})]})]})};function Ti({...e}){return s.jsx(Jg,{"data-slot":"dialog",...e})}function y5({...e}){return s.jsx(ev,{"data-slot":"dialog-portal",...e})}function wN({...e}){return s.jsx(Hc,{"data-slot":"dialog-close",...e})}function b5({className:e,...t}){return s.jsx(tv,{"data-slot":"dialog-overlay",className:Ce("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Ri({className:e,children:t,...r}){return s.jsxs(y5,{"data-slot":"dialog-portal",children:[s.jsx(b5,{}),s.jsxs(nv,{"data-slot":"dialog-content",className:Ce("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[t,s.jsxs(Hc,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[s.jsx(xf,{}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Mi({className:e,...t}){return s.jsx("div",{"data-slot":"dialog-header",className:Ce("flex flex-col gap-2 text-center sm:text-left",e),...t})}function ql({className:e,...t}){return s.jsx("div",{"data-slot":"dialog-footer",className:Ce("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Ai({className:e,...t}){return s.jsx(J_,{"data-slot":"dialog-title",className:Ce("text-lg leading-none font-semibold",e),...t})}function jN({className:e,...t}){return s.jsx(eN,{"data-slot":"dialog-description",className:Ce("text-muted-foreground text-sm",e),...t})}const w5=Eg("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ls({className:e,variant:t,asChild:r=!1,...a}){const l=r?Cs:"span";return s.jsx(l,{"data-slot":"badge",className:Ce(w5({variant:t}),e),...a})}function Lt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Mr(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ar(e,t){const r=Lt(e);return isNaN(t)?Mr(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function os(e,t){const r=Lt(e);if(isNaN(t))return Mr(e,NaN);if(!t)return r;const a=r.getDate(),l=Mr(e,r.getTime());l.setMonth(r.getMonth()+t+1,0);const c=l.getDate();return a>=c?l:(r.setFullYear(l.getFullYear(),l.getMonth(),a),r)}const iv=6048e5,j5=864e5,_N=6e4,NN=36e5;let _5={};function Fc(){return _5}function Rs(e,t){var f,h,p,v;const r=Fc(),a=(t==null?void 0:t.weekStartsOn)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??r.weekStartsOn??((v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,l=Lt(e),c=l.getDay(),d=(c<a?7:0)+c-a;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function ki(e){return Rs(e,{weekStartsOn:1})}function SN(e){const t=Lt(e),r=t.getFullYear(),a=Mr(e,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const l=ki(a),c=Mr(e,0);c.setFullYear(r,0,4),c.setHours(0,0,0,0);const d=ki(c);return t.getTime()>=l.getTime()?r+1:t.getTime()>=d.getTime()?r:r-1}function Fl(e){const t=Lt(e);return t.setHours(0,0,0,0),t}function Bd(e){const t=Lt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Ns(e,t){const r=Fl(e),a=Fl(t),l=+r-Bd(r),c=+a-Bd(a);return Math.round((l-c)/j5)}function N5(e){const t=SN(e),r=Mr(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ki(r)}function Xp(e,t){const r=t*7;return ar(e,r)}function S5(e,t){return os(e,t*12)}function E5(e){let t;return e.forEach(function(r){const a=Lt(r);(t===void 0||t<a||isNaN(Number(a)))&&(t=a)}),t||new Date(NaN)}function C5(e){let t;return e.forEach(r=>{const a=Lt(r);(!t||t>a||isNaN(+a))&&(t=a)}),t||new Date(NaN)}function pr(e,t){const r=Fl(e),a=Fl(t);return+r==+a}function lv(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function T5(e){if(!lv(e)&&typeof e!="number")return!1;const t=Lt(e);return!isNaN(Number(t))}function jc(e,t){const r=Lt(e),a=Lt(t),l=r.getFullYear()-a.getFullYear(),c=r.getMonth()-a.getMonth();return l*12+c}function R5(e,t,r){const a=Rs(e,r),l=Rs(t,r),c=+a-Bd(a),d=+l-Bd(l);return Math.round((c-d)/iv)}function ov(e){const t=Lt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function gr(e){const t=Lt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function EN(e){const t=Lt(e),r=Mr(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function cv(e,t){var f,h,p,v;const r=Fc(),a=(t==null?void 0:t.weekStartsOn)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??r.weekStartsOn??((v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,l=Lt(e),c=l.getDay(),d=(c<a?-7:0)+6-(c-a);return l.setDate(l.getDate()+d),l.setHours(23,59,59,999),l}function CN(e){return cv(e,{weekStartsOn:1})}const M5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},A5=(e,t,r)=>{let a;const l=M5[e];return typeof l=="string"?a=l:t===1?a=l.one:a=l.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function Pl(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const k5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},D5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},O5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},P5={date:Pl({formats:k5,defaultWidth:"full"}),time:Pl({formats:D5,defaultWidth:"full"}),dateTime:Pl({formats:O5,defaultWidth:"full"})},L5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},I5=(e,t,r,a)=>L5[e];function ws(e){return(t,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let l;if(a==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,f=r!=null&&r.width?String(r.width):d;l=e.formattingValues[f]||e.formattingValues[d]}else{const d=e.defaultWidth,f=r!=null&&r.width?String(r.width):e.defaultWidth;l=e.values[f]||e.values[d]}const c=e.argumentCallback?e.argumentCallback(t):t;return l[c]}}const z5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},U5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},B5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},H5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},q5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},F5=(e,t)=>{const r=Number(e),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},V5={ordinalNumber:F5,era:ws({values:z5,defaultWidth:"wide"}),quarter:ws({values:U5,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ws({values:$5,defaultWidth:"wide"}),day:ws({values:B5,defaultWidth:"wide"}),dayPeriod:ws({values:H5,defaultWidth:"wide",formattingValues:q5,defaultFormattingWidth:"wide"})};function js(e){return(t,r={})=>{const a=r.width,l=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],c=t.match(l);if(!c)return null;const d=c[0],f=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(f)?G5(f,x=>x.test(d)):Y5(f,x=>x.test(d));let p;p=e.valueCallback?e.valueCallback(h):h,p=r.valueCallback?r.valueCallback(p):p;const v=t.slice(d.length);return{value:p,rest:v}}}function Y5(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function G5(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function TN(e){return(t,r={})=>{const a=t.match(e.matchPattern);if(!a)return null;const l=a[0],c=t.match(e.parsePattern);if(!c)return null;let d=e.valueCallback?e.valueCallback(c[0]):c[0];d=r.valueCallback?r.valueCallback(d):d;const f=t.slice(l.length);return{value:d,rest:f}}}const W5=/^(\d+)(th|st|nd|rd)?/i,X5=/\d+/i,K5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Q5={any:[/^b/i,/^(a|c)/i]},Z5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},J5={any:[/1/i,/2/i,/3/i,/4/i]},eL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},aL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iL={ordinalNumber:TN({matchPattern:W5,parsePattern:X5,valueCallback:e=>parseInt(e,10)}),era:js({matchPatterns:K5,defaultMatchWidth:"wide",parsePatterns:Q5,defaultParseWidth:"any"}),quarter:js({matchPatterns:Z5,defaultMatchWidth:"wide",parsePatterns:J5,defaultParseWidth:"any",valueCallback:e=>e+1}),month:js({matchPatterns:eL,defaultMatchWidth:"wide",parsePatterns:tL,defaultParseWidth:"any"}),day:js({matchPatterns:nL,defaultMatchWidth:"wide",parsePatterns:rL,defaultParseWidth:"any"}),dayPeriod:js({matchPatterns:sL,defaultMatchWidth:"any",parsePatterns:aL,defaultParseWidth:"any"})},RN={code:"en-US",formatDistance:A5,formatLong:P5,formatRelative:I5,localize:V5,match:iL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lL(e){const t=Lt(e);return Ns(t,EN(t))+1}function MN(e){const t=Lt(e),r=+ki(t)-+N5(t);return Math.round(r/iv)+1}function AN(e,t){var v,x,b,w;const r=Lt(e),a=r.getFullYear(),l=Fc(),c=(t==null?void 0:t.firstWeekContainsDate)??((x=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??l.firstWeekContainsDate??((w=(b=l.locale)==null?void 0:b.options)==null?void 0:w.firstWeekContainsDate)??1,d=Mr(e,0);d.setFullYear(a+1,0,c),d.setHours(0,0,0,0);const f=Rs(d,t),h=Mr(e,0);h.setFullYear(a,0,c),h.setHours(0,0,0,0);const p=Rs(h,t);return r.getTime()>=f.getTime()?a+1:r.getTime()>=p.getTime()?a:a-1}function oL(e,t){var f,h,p,v;const r=Fc(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,l=AN(e,t),c=Mr(e,0);return c.setFullYear(l,0,a),c.setHours(0,0,0,0),Rs(c,t)}function kN(e,t){const r=Lt(e),a=+Rs(r,t)-+oL(r,t);return Math.round(a/iv)+1}function Ft(e,t){const r=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return r+a}const ka={y(e,t){const r=e.getFullYear(),a=r>0?r:1-r;return Ft(t==="yy"?a%100:a,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Ft(r+1,2)},d(e,t){return Ft(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Ft(e.getHours()%12||12,t.length)},H(e,t){return Ft(e.getHours(),t.length)},m(e,t){return Ft(e.getMinutes(),t.length)},s(e,t){return Ft(e.getSeconds(),t.length)},S(e,t){const r=t.length,a=e.getMilliseconds(),l=Math.trunc(a*Math.pow(10,r-3));return Ft(l,t.length)}},Tl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Nw={G:function(e,t,r){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const a=e.getFullYear(),l=a>0?a:1-a;return r.ordinalNumber(l,{unit:"year"})}return ka.y(e,t)},Y:function(e,t,r,a){const l=AN(e,a),c=l>0?l:1-l;if(t==="YY"){const d=c%100;return Ft(d,2)}return t==="Yo"?r.ordinalNumber(c,{unit:"year"}):Ft(c,t.length)},R:function(e,t){const r=SN(e);return Ft(r,t.length)},u:function(e,t){const r=e.getFullYear();return Ft(r,t.length)},Q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return Ft(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return Ft(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){const a=e.getMonth();switch(t){case"M":case"MM":return ka.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return Ft(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,r,a){const l=kN(e,a);return t==="wo"?r.ordinalNumber(l,{unit:"week"}):Ft(l,t.length)},I:function(e,t,r){const a=MN(e);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):Ft(a,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ka.d(e,t)},D:function(e,t,r){const a=lL(e);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):Ft(a,t.length)},E:function(e,t,r){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){const l=e.getDay(),c=(l-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(c);case"ee":return Ft(c,2);case"eo":return r.ordinalNumber(c,{unit:"day"});case"eee":return r.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(l,{width:"short",context:"formatting"});case"eeee":default:return r.day(l,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){const l=e.getDay(),c=(l-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(c);case"cc":return Ft(c,t.length);case"co":return r.ordinalNumber(c,{unit:"day"});case"ccc":return r.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(l,{width:"narrow",context:"standalone"});case"cccccc":return r.day(l,{width:"short",context:"standalone"});case"cccc":default:return r.day(l,{width:"wide",context:"standalone"})}},i:function(e,t,r){const a=e.getDay(),l=a===0?7:a;switch(t){case"i":return String(l);case"ii":return Ft(l,t.length);case"io":return r.ordinalNumber(l,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){const l=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,t,r){const a=e.getHours();let l;switch(a===12?l=Tl.noon:a===0?l=Tl.midnight:l=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,t,r){const a=e.getHours();let l;switch(a>=17?l=Tl.evening:a>=12?l=Tl.afternoon:a>=4?l=Tl.morning:l=Tl.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return ka.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ka.H(e,t)},K:function(e,t,r){const a=e.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):Ft(a,t.length)},k:function(e,t,r){let a=e.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):Ft(a,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ka.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ka.s(e,t)},S:function(e,t){return ka.S(e,t)},X:function(e,t,r){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return Ew(a);case"XXXX":case"XX":return Ni(a);case"XXXXX":case"XXX":default:return Ni(a,":")}},x:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"x":return Ew(a);case"xxxx":case"xx":return Ni(a);case"xxxxx":case"xxx":default:return Ni(a,":")}},O:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Sw(a,":");case"OOOO":default:return"GMT"+Ni(a,":")}},z:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Sw(a,":");case"zzzz":default:return"GMT"+Ni(a,":")}},t:function(e,t,r){const a=Math.trunc(e.getTime()/1e3);return Ft(a,t.length)},T:function(e,t,r){const a=e.getTime();return Ft(a,t.length)}};function Sw(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),l=Math.trunc(a/60),c=a%60;return c===0?r+String(l):r+String(l)+t+Ft(c,2)}function Ew(e,t){return e%60===0?(e>0?"-":"+")+Ft(Math.abs(e)/60,2):Ni(e,t)}function Ni(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),l=Ft(Math.trunc(a/60),2),c=Ft(a%60,2);return r+l+t+c}const Cw=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},DN=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},cL=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],a=r[1],l=r[2];if(!l)return Cw(e,t);let c;switch(a){case"P":c=t.dateTime({width:"short"});break;case"PP":c=t.dateTime({width:"medium"});break;case"PPP":c=t.dateTime({width:"long"});break;case"PPPP":default:c=t.dateTime({width:"full"});break}return c.replace("{{date}}",Cw(a,t)).replace("{{time}}",DN(l,t))},uL={p:DN,P:cL},dL=/^D+$/,fL=/^Y+$/,hL=["D","DD","YY","YYYY"];function mL(e){return dL.test(e)}function pL(e){return fL.test(e)}function gL(e,t,r){const a=vL(e,t,r);if(console.warn(a),hL.includes(e))throw new RangeError(a)}function vL(e,t,r){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bL=/^'([^]*?)'?$/,wL=/''/g,jL=/[a-zA-Z]/;function dt(e,t,r){var v,x,b,w,j,_,N,C;const a=Fc(),l=(r==null?void 0:r.locale)??a.locale??RN,c=(r==null?void 0:r.firstWeekContainsDate)??((x=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??a.firstWeekContainsDate??((w=(b=a.locale)==null?void 0:b.options)==null?void 0:w.firstWeekContainsDate)??1,d=(r==null?void 0:r.weekStartsOn)??((_=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:_.weekStartsOn)??a.weekStartsOn??((C=(N=a.locale)==null?void 0:N.options)==null?void 0:C.weekStartsOn)??0,f=Lt(e);if(!T5(f))throw new RangeError("Invalid time value");let h=t.match(yL).map(E=>{const T=E[0];if(T==="p"||T==="P"){const M=uL[T];return M(E,l.formatLong)}return E}).join("").match(xL).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const T=E[0];if(T==="'")return{isToken:!1,value:_L(E)};if(Nw[T])return{isToken:!0,value:E};if(T.match(jL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:E}});l.localize.preprocessor&&(h=l.localize.preprocessor(f,h));const p={firstWeekContainsDate:c,weekStartsOn:d,locale:l};return h.map(E=>{if(!E.isToken)return E.value;const T=E.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&pL(T)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&mL(T))&&gL(T,t,String(e));const M=Nw[T[0]];return M(f,T,l.localize,p)}).join("")}function _L(e){const t=e.match(bL);return t?t[1].replace(wL,"'"):e}function NL(e){const t=Lt(e),r=t.getFullYear(),a=t.getMonth(),l=Mr(e,0);return l.setFullYear(r,a+1,0),l.setHours(0,0,0,0),l.getDate()}function SL(e){return Math.trunc(+Lt(e)/1e3)}function EL(e){const t=Lt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function CL(e,t){return R5(EL(e),gr(e),t)+1}function Kp(e,t){const r=Lt(e),a=Lt(t);return r.getTime()>a.getTime()}function ON(e,t){const r=Lt(e),a=Lt(t);return+r<+a}function uv(e,t){const r=Lt(e),a=Lt(t);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}function TL(e,t){const r=Lt(e),a=Lt(t);return r.getFullYear()===a.getFullYear()}function up(e,t){return ar(e,-t)}function Qt(e,t){const a=kL(e);let l;if(a.date){const h=DL(a.date,2);l=OL(h.restDateString,h.year)}if(!l||isNaN(l.getTime()))return new Date(NaN);const c=l.getTime();let d=0,f;if(a.time&&(d=PL(a.time),isNaN(d)))return new Date(NaN);if(a.timezone){if(f=LL(a.timezone),isNaN(f))return new Date(NaN)}else{const h=new Date(c+d),p=new Date(0);return p.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),p.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),p}return new Date(c+d+f)}const yd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},RL=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ML=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,AL=/^([+-])(\d{2})(?::?(\d{2}))?$/;function kL(e){const t={},r=e.split(yd.dateTimeDelimiter);let a;if(r.length>2)return t;if(/:/.test(r[0])?a=r[0]:(t.date=r[0],a=r[1],yd.timeZoneDelimiter.test(t.date)&&(t.date=e.split(yd.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){const l=yd.timezone.exec(a);l?(t.time=a.replace(l[1],""),t.timezone=l[1]):t.time=a}return t}function DL(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(r);if(!a)return{year:NaN,restDateString:""};const l=a[1]?parseInt(a[1]):null,c=a[2]?parseInt(a[2]):null;return{year:c===null?l:c*100,restDateString:e.slice((a[1]||a[2]).length)}}function OL(e,t){if(t===null)return new Date(NaN);const r=e.match(RL);if(!r)return new Date(NaN);const a=!!r[4],l=sc(r[1]),c=sc(r[2])-1,d=sc(r[3]),f=sc(r[4]),h=sc(r[5])-1;if(a)return BL(t,f,h)?IL(t,f,h):new Date(NaN);{const p=new Date(0);return!UL(t,c,d)||!$L(t,l)?new Date(NaN):(p.setUTCFullYear(t,c,Math.max(l,d)),p)}}function sc(e){return e?parseInt(e):1}function PL(e){const t=e.match(ML);if(!t)return NaN;const r=dp(t[1]),a=dp(t[2]),l=dp(t[3]);return HL(r,a,l)?r*NN+a*_N+l*1e3:NaN}function dp(e){return e&&parseFloat(e.replace(",","."))||0}function LL(e){if(e==="Z")return 0;const t=e.match(AL);if(!t)return 0;const r=t[1]==="+"?-1:1,a=parseInt(t[2]),l=t[3]&&parseInt(t[3])||0;return qL(a,l)?r*(a*NN+l*_N):NaN}function IL(e,t,r){const a=new Date(0);a.setUTCFullYear(e,0,4);const l=a.getUTCDay()||7,c=(t-1)*7+r+1-l;return a.setUTCDate(a.getUTCDate()+c),a}const zL=[31,null,31,30,31,30,31,31,30,31,30,31];function PN(e){return e%400===0||e%4===0&&e%100!==0}function UL(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(zL[t]||(PN(e)?29:28))}function $L(e,t){return t>=1&&t<=(PN(e)?366:365)}function BL(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function HL(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function qL(e,t){return t>=0&&t<=59}function fp(e,t){const r=Lt(e),a=r.getFullYear(),l=r.getDate(),c=Mr(e,0);c.setFullYear(a,t,15),c.setHours(0,0,0,0);const d=NL(c);return r.setMonth(t,Math.min(l,d)),r}function Tw(e,t){const r=Lt(e);return isNaN(+r)?Mr(e,NaN):(r.setFullYear(t),r)}const FL={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},VL=(e,t,r)=>{let a;const l=FL[e];return typeof l=="string"?a=l:t===1?a=l.one:a=l.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+a:"il y a "+a:a},YL={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},GL={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},WL={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XL={date:Pl({formats:YL,defaultWidth:"full"}),time:Pl({formats:GL,defaultWidth:"full"}),dateTime:Pl({formats:WL,defaultWidth:"full"})},KL={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},QL=(e,t,r,a)=>KL[e],ZL={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},JL={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},e6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},t6={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},n6={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},r6=(e,t)=>{const r=Number(e),a=t==null?void 0:t.unit;if(r===0)return"0";const l=["year","week","hour","minute","second"];let c;return r===1?c=a&&l.includes(a)?"ère":"er":c="ème",r+c},s6=["MMM","MMMM"],a6={preprocessor:(e,t)=>e.getDate()===1||!t.some(a=>a.isToken&&s6.includes(a.value))?t:t.map(a=>a.isToken&&a.value==="do"?{isToken:!0,value:"d"}:a),ordinalNumber:r6,era:ws({values:ZL,defaultWidth:"wide"}),quarter:ws({values:JL,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ws({values:e6,defaultWidth:"wide"}),day:ws({values:t6,defaultWidth:"wide"}),dayPeriod:ws({values:n6,defaultWidth:"wide"})},i6=/^(\d+)(ième|ère|ème|er|e)?/i,l6=/\d+/i,o6={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},c6={any:[/^av/i,/^ap/i]},u6={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},d6={any:[/1/i,/2/i,/3/i,/4/i]},f6={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},h6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},m6={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},p6={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},g6={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},v6={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},x6={ordinalNumber:TN({matchPattern:i6,parsePattern:l6,valueCallback:e=>parseInt(e)}),era:js({matchPatterns:o6,defaultMatchWidth:"wide",parsePatterns:c6,defaultParseWidth:"any"}),quarter:js({matchPatterns:u6,defaultMatchWidth:"wide",parsePatterns:d6,defaultParseWidth:"any",valueCallback:e=>e+1}),month:js({matchPatterns:f6,defaultMatchWidth:"wide",parsePatterns:h6,defaultParseWidth:"any"}),day:js({matchPatterns:m6,defaultMatchWidth:"wide",parsePatterns:p6,defaultParseWidth:"any"}),dayPeriod:js({matchPatterns:g6,defaultMatchWidth:"any",parsePatterns:v6,defaultParseWidth:"any"})},Xt={code:"fr",formatDistance:VL,formatLong:XL,formatRelative:QL,localize:a6,match:x6,options:{weekStartsOn:1,firstWeekContainsDate:4}},y6=e=>{switch(e==null?void 0:e.toLowerCase()){case"completed":return"default";case"in progress":return"secondary";case"pending":return"outline";default:return"secondary"}},b6=()=>{const{patientId:e}=vr(),t=ir(),[r,a]=m.useState(null),[l,c]=m.useState([]),[d,f]=m.useState(!0),[h,p]=m.useState(!0),[v,x]=m.useState(null),[b,w]=m.useState(!1),[j,_]=m.useState(null),[N,C]=m.useState(null),[E,T]=m.useState(!1),M=m.useCallback(async()=>{if(e){f(!0);try{const{data:I,error:Y}=await se.from("patient").select("*").eq("id",e).single();if(Y)throw Y;if(!I)throw new Error("Patient non trouvé.");a(I)}catch(I){console.error("Erreur chargement détails patient:",I),x(Y=>Y||(I instanceof Error?I.message:"Erreur inconnue")||"Impossible de charger les détails du patient.")}finally{f(!1)}}},[e]),R=m.useCallback(async()=>{if(e){p(!0);try{const{data:I,error:Y}=await se.from("patient_result").select(`
          id,
          result_date,
          status,
          doctor:doctor_id ( full_name )
        `).eq("patient_id",e).order("result_date",{ascending:!1});if(Y)throw Y;c(I||[])}catch(I){console.error("Erreur chargement résultats patient:",I),x(Y=>Y||(I instanceof Error?I.message:"Erreur inconnue")||"Impossible de charger les résultats du patient.")}finally{p(!1)}}},[e]),L=m.useCallback(async()=>{if(T(!0),C(null),!!j)try{const{error:I}=await se.from("patient_result").delete().eq("id",j);if(I)throw I;R(),w(!1),_(null)}catch(I){console.error("Error deleting result:",I),C(`Impossible de supprimer le résultat. 
 ${I.message}`)}finally{T(!1)}},[j,R]);m.useEffect(()=>{x(null),(async()=>{a(null),c([]),f(!0),p(!0),await Promise.all([M(),R()])})()},[M,R]);const H=d||h,$=(I,Y,ce)=>{const te=I;return s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(te,{className:"h-5 w-5 text-muted-foreground mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:Y}),s.jsx("p",{className:"text-base",children:ce||s.jsx("span",{className:"text-muted-foreground italic",children:"Non spécifié"})})]})]})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[s.jsx("div",{children:s.jsx(st,{to:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour à la liste"]})})}),!H&&r&&!v&&s.jsx(st,{to:`/patients/${e}/edit`,children:s.jsxs(ne,{variant:"secondary",children:[s.jsx(Wr,{className:"mr-2 h-4 w-4"}),"Modifier le Patient"]})})]}),d&&s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-6 w-3/5"}),s.jsx(W,{className:"h-4 w-4/5"})]}),s.jsxs(Re,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"})]})]}),v&&!H&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsxs(Pt,{children:[v," ",s.jsx(ne,{variant:"link",onClick:()=>{M(),R()},className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),!d&&r&&!v&&s.jsxs(Te,{className:"overflow-hidden",children:[s.jsxs(Ae,{className:"bg-muted/30",children:[s.jsxs(xt,{className:"text-xl font-semibold flex items-center gap-2",children:[s.jsx(Bt,{className:"h-5 w-5"}),"Informations du Patient"]}),s.jsx(mr,{children:"Détails démographiques."})]}),s.jsxs(Re,{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[$(Bt,"Nom Complet",r.full_name),$(Xe,"ID Unique",r.patient_unique_id),$(vn,"Date de Naissance",r.date_of_birth?dt(Qt(r.date_of_birth),"PPP",{locale:Xt}):null),$(Xe,"Genre",r.gender),$(xn,"Téléphone",r.phone)]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold tracking-tight flex items-center gap-2",children:[s.jsx(Ga,{className:"h-6 w-6"}),"Historique des Résultats"]}),!H&&r&&!v&&s.jsxs(ne,{onClick:()=>t(`/patients/${e}/results/new`),children:[" ",s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Ajouter un Résultat"]})]}),h&&s.jsxs("div",{className:"border rounded-lg overflow-hidden bg-background",children:[s.jsx(W,{className:"h-12 w-full"})," ",s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"})]}),!h&&!v&&s.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Vt,{children:[s.jsx(pt,{className:"w-[180px]",children:"Date du Résultat"}),s.jsx(pt,{children:"Médecin Prescripteur"}),s.jsx(pt,{className:"w-[130px]",children:"Statut"}),s.jsx(pt,{className:"text-right w-[150px]",children:"Actions"})]})}),s.jsx(la,{children:l.length>0?l.map(I=>{var Y,ce,te;return s.jsxs(Vt,{children:[s.jsx(Qe,{children:I.result_date?dt(Qt(I.result_date),"PPP 'à' HH:mm",{locale:Xt}):"N/A"}),s.jsx(Qe,{children:((Y=I.doctor)==null?void 0:Y.full_name)||s.jsx("span",{className:"italic text-muted-foreground",children:"Inconnu"})}),s.jsx(Qe,{children:s.jsx(ls,{variant:y6(I.status),children:((ce=I.status)==null?void 0:ce.charAt(0).toUpperCase())+((te=I.status)==null?void 0:te.slice(1))||"N/A"})}),s.jsxs(Qe,{className:"text-right",children:[s.jsxs(st,{to:`/results/${I.id}`,children:[" ",s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(as,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"})," ",s.jsx("span",{className:"hidden sm:inline",children:"Voir Résultat"})," ",s.jsx("span",{className:"sm:hidden",children:"Voir"})," "]})]}),s.jsxs(ne,{variant:"destructive",size:"sm",className:"ml-2",onClick:q=>{q.preventDefault(),_(I.id),w(!0)},children:[s.jsx(Dl,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"})," ",s.jsx("span",{className:"hidden sm:inline",children:"Supprimer"})," ",s.jsx("span",{className:"sm:hidden",children:"Suppr"})," "]})]})]},I.id)}):s.jsx(Vt,{children:s.jsx(Qe,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"Aucun résultat trouvé pour ce patient."})})})]})})]})]}),s.jsx(Ti,{open:b,onOpenChange:w,children:s.jsxs(Ri,{children:[s.jsx(Mi,{children:s.jsx(Ai,{children:"Confirmer la suppression"})}),s.jsxs("div",{className:"py-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Êtes-vous sûr de vouloir supprimer ce résultat ? Cette action est irréversible."}),N&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ot,{children:"Erreur"}),s.jsx(Pt,{children:N})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx(ne,{variant:"outline",onClick:()=>w(!1),children:"Annuler"}),s.jsx(ne,{variant:"destructive",onClick:L,children:E?"Suppression...":"Supprimer"})]})]})]})})]})},w6=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(!0),[l,c]=m.useState(null),[d,f]=m.useState(""),[h,p]=m.useState(null),[v,x]=m.useState(!1),b=qc(d,300),w=m.useCallback(async()=>{a(!0),c(null);try{const{data:N,error:C}=await se.from("doctor").select("*").order("full_name",{ascending:!0});if(C)throw C;t(N||[])}catch(N){console.error("Erreur lors de la récupération des médecins:",N),c((N instanceof Error?N.message:"")||"Une erreur est survenue lors du chargement des médecins."),t([])}finally{a(!1)}},[]);m.useEffect(()=>{w()},[w]);const j=m.useMemo(()=>{if(!b)return e;const N=b.toLowerCase();return e.filter(C=>C.full_name.toLowerCase().includes(N)||C.hospital&&C.hospital.toLowerCase().includes(N))},[e,b]),_=async()=>{if(h){x(!0),c(null);try{const{error:N}=await se.from("doctor").delete().eq("id",h.id);if(N)throw N;t(C=>C.filter(E=>E.id!==h.id)),p(null)}catch(N){c((N instanceof Error?N.message:"")||"Erreur lors de la suppression du médecin.")}finally{x(!1)}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(Kn,{className:"h-6 w-6"}),"Gestion des Médecins"]}),s.jsx(st,{to:"/doctors/new",children:s.jsxs(ne,{children:[s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Ajouter un Médecin"]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx($c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ge,{type:"search",placeholder:"Rechercher par nom ou hôpital...",value:d,onChange:N=>f(N.target.value),className:"pl-10 w-full md:w-1/3 h-10",disabled:r})]}),r&&s.jsxs("div",{className:"border rounded-lg",children:[s.jsx(W,{className:"h-12 w-full rounded-t-lg"}),s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"})]})]}),!r&&l&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur de Chargement"}),s.jsxs(Pt,{children:[l," ",s.jsx(ne,{variant:"link",onClick:w,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),!r&&!l&&s.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Vt,{children:[s.jsx(pt,{children:"Nom Complet"}),s.jsx(pt,{className:"w-[200px]",children:"Téléphone"}),s.jsx(pt,{className:"w-[300px]",children:"Hôpital / Clinique"}),s.jsx(pt,{className:"text-right w-[150px]",children:"Actions"})]})}),s.jsx(la,{children:j.length>0?j.map(N=>s.jsxs(Vt,{children:[s.jsx(Qe,{className:"font-medium",children:N.full_name}),s.jsx(Qe,{children:N.phone||s.jsx("span",{className:"italic text-muted-foreground",children:"N/A"})}),s.jsx(Qe,{children:N.hospital||s.jsx("span",{className:"italic text-muted-foreground",children:"N/A"})}),s.jsxs(Qe,{className:"text-right",children:[s.jsx(st,{to:`/doctors/${N.id}/edit`,children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(Wr,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Modifier"}),s.jsx("span",{className:"sm:hidden",children:"Éditer"})]})}),s.jsxs(wc,{children:[s.jsx(wf,{asChild:!0,children:s.jsxs(ne,{variant:"destructive",size:"sm",className:"ml-2",title:"Supprimer le médecin",onClick:()=>p(N),disabled:r,children:[s.jsx(Bc,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Supprimer"})]})}),s.jsxs(jf,{children:[s.jsxs(_f,{children:[s.jsx(Sf,{children:"Supprimer ce médecin ?"}),s.jsx(Ef,{children:"Cette action est irréversible. Voulez-vous vraiment supprimer ce médecin ?"})]}),s.jsxs(Nf,{children:[s.jsx(Cf,{onClick:()=>p(null),disabled:v,children:"Annuler"}),s.jsx(av,{onClick:_,disabled:v,className:"bg-destructive text-destructive-foreground",children:"Supprimer"})]})]})]})]})]},N.id)):s.jsx(Vt,{children:s.jsx(Qe,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:d?"Aucun médecin ne correspond à votre recherche.":s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[s.jsx(pf,{className:"h-8 w-8 text-muted-foreground/50"}),"Aucun médecin trouvé. Commencez par en ajouter un."]})})})})]})})]})},j6=()=>s.jsx("div",{children:"404 - Page Not Found"});var dv="Popover",[LN,JB]=lr(dv,[Ya]),Vc=Ya(),[_6,Wa]=LN(dv),IN=e=>{const{__scopePopover:t,children:r,open:a,defaultOpen:l,onOpenChange:c,modal:d=!1}=e,f=Vc(t),h=m.useRef(null),[p,v]=m.useState(!1),[x=!1,b]=$a({prop:a,defaultProp:l,onChange:c});return s.jsx(zg,{...f,children:s.jsx(_6,{scope:t,contentId:Ss(),triggerRef:h,open:x,onOpenChange:b,onOpenToggle:m.useCallback(()=>b(w=>!w),[b]),hasCustomAnchor:p,onCustomAnchorAdd:m.useCallback(()=>v(!0),[]),onCustomAnchorRemove:m.useCallback(()=>v(!1),[]),modal:d,children:r})})};IN.displayName=dv;var zN="PopoverAnchor",N6=m.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,l=Wa(zN,r),c=Vc(r),{onCustomAnchorAdd:d,onCustomAnchorRemove:f}=l;return m.useEffect(()=>(d(),()=>f()),[d,f]),s.jsx(Pc,{...c,...a,ref:t})});N6.displayName=zN;var UN="PopoverTrigger",$N=m.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,l=Wa(UN,r),c=Vc(r),d=_t(t,l.triggerRef),f=s.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":VN(l.open),...a,ref:d,onClick:ke(e.onClick,l.onOpenToggle)});return l.hasCustomAnchor?f:s.jsx(Pc,{asChild:!0,...c,children:f})});$N.displayName=UN;var fv="PopoverPortal",[S6,E6]=LN(fv,{forceMount:void 0}),BN=e=>{const{__scopePopover:t,forceMount:r,children:a,container:l}=e,c=Wa(fv,t);return s.jsx(S6,{scope:t,forceMount:r,children:s.jsx(Ar,{present:r||c.open,children:s.jsx(Lc,{asChild:!0,container:l,children:a})})})};BN.displayName=fv;var Vl="PopoverContent",HN=m.forwardRef((e,t)=>{const r=E6(Vl,e.__scopePopover),{forceMount:a=r.forceMount,...l}=e,c=Wa(Vl,e.__scopePopover);return s.jsx(Ar,{present:a||c.open,children:c.modal?s.jsx(C6,{...l,ref:t}):s.jsx(T6,{...l,ref:t})})});HN.displayName=Vl;var C6=m.forwardRef((e,t)=>{const r=Wa(Vl,e.__scopePopover),a=m.useRef(null),l=_t(t,a),c=m.useRef(!1);return m.useEffect(()=>{const d=a.current;if(d)return df(d)},[]),s.jsx(Ic,{as:Cs,allowPinchZoom:!0,children:s.jsx(qN,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(e.onCloseAutoFocus,d=>{var f;d.preventDefault(),c.current||(f=r.triggerRef.current)==null||f.focus()}),onPointerDownOutside:ke(e.onPointerDownOutside,d=>{const f=d.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,p=f.button===2||h;c.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:ke(e.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})})})}),T6=m.forwardRef((e,t)=>{const r=Wa(Vl,e.__scopePopover),a=m.useRef(!1),l=m.useRef(!1);return s.jsx(qN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var d,f;(d=e.onCloseAutoFocus)==null||d.call(e,c),c.defaultPrevented||(a.current||(f=r.triggerRef.current)==null||f.focus(),c.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:c=>{var h,p;(h=e.onInteractOutside)==null||h.call(e,c),c.defaultPrevented||(a.current=!0,c.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const d=c.target;((p=r.triggerRef.current)==null?void 0:p.contains(d))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&l.current&&c.preventDefault()}})}),qN=m.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:c,disableOutsidePointerEvents:d,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:v,...x}=e,b=Wa(Vl,r),w=Vc(r);return nf(),s.jsx(Dc,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:c,children:s.jsx(Zl,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:v,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onDismiss:()=>b.onOpenChange(!1),children:s.jsx(lf,{"data-state":VN(b.open),role:"dialog",id:b.contentId,...w,...x,ref:t,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),FN="PopoverClose",R6=m.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,l=Wa(FN,r);return s.jsx(Je.button,{type:"button",...a,ref:t,onClick:ke(e.onClick,()=>l.onOpenChange(!1))})});R6.displayName=FN;var M6="PopoverArrow",A6=m.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,l=Vc(r);return s.jsx(of,{...l,...a,ref:t})});A6.displayName=M6;function VN(e){return e?"open":"closed"}var k6=IN,D6=$N,O6=BN,P6=HN;function YN({...e}){return s.jsx(k6,{"data-slot":"popover",...e})}function GN({...e}){return s.jsx(D6,{"data-slot":"popover-trigger",...e})}function WN({className:e,align:t="center",sideOffset:r=4,...a}){return s.jsx(O6,{children:s.jsx(P6,{"data-slot":"popover-content",align:t,sideOffset:r,className:Ce("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...a})})}var Ze=function(){return Ze=Object.assign||function(t){for(var r,a=1,l=arguments.length;a<l;a++){r=arguments[a];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])}return t},Ze.apply(this,arguments)};function L6(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r}function XN(e,t,r){for(var a=0,l=t.length,c;a<l;a++)(c||!(a in t))&&(c||(c=Array.prototype.slice.call(t,0,a)),c[a]=t[a]);return e.concat(c||Array.prototype.slice.call(t))}function Yc(e){return e.mode==="multiple"}function Gc(e){return e.mode==="range"}function Tf(e){return e.mode==="single"}var I6={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function z6(e,t){return dt(e,"LLLL y",t)}function U6(e,t){return dt(e,"d",t)}function $6(e,t){return dt(e,"LLLL",t)}function B6(e){return"".concat(e)}function H6(e,t){return dt(e,"cccccc",t)}function q6(e,t){return dt(e,"yyyy",t)}var F6=Object.freeze({__proto__:null,formatCaption:z6,formatDay:U6,formatMonthCaption:$6,formatWeekNumber:B6,formatWeekdayName:H6,formatYearCaption:q6}),V6=function(e,t,r){return dt(e,"do MMMM (EEEE)",r)},Y6=function(){return"Month: "},G6=function(){return"Go to next month"},W6=function(){return"Go to previous month"},X6=function(e,t){return dt(e,"cccc",t)},K6=function(e){return"Week n. ".concat(e)},Q6=function(){return"Year: "},Z6=Object.freeze({__proto__:null,labelDay:V6,labelMonthDropdown:Y6,labelNext:G6,labelPrevious:W6,labelWeekNumber:K6,labelWeekday:X6,labelYearDropdown:Q6});function J6(){var e="buttons",t=I6,r=RN,a={},l={},c=1,d={},f=new Date;return{captionLayout:e,classNames:t,formatters:F6,labels:Z6,locale:r,modifiersClassNames:a,modifiers:l,numberOfMonths:c,styles:d,today:f,mode:"default"}}function e8(e){var t=e.fromYear,r=e.toYear,a=e.fromMonth,l=e.toMonth,c=e.fromDate,d=e.toDate;return a?c=gr(a):t&&(c=new Date(t,0,1)),l?d=ov(l):r&&(d=new Date(r,11,31)),{fromDate:c?Fl(c):void 0,toDate:d?Fl(d):void 0}}var KN=m.createContext(void 0);function t8(e){var t,r=e.initialProps,a=J6(),l=e8(r),c=l.fromDate,d=l.toDate,f=(t=r.captionLayout)!==null&&t!==void 0?t:a.captionLayout;f!=="buttons"&&(!c||!d)&&(f="buttons");var h;(Tf(r)||Yc(r)||Gc(r))&&(h=r.onSelect);var p=Ze(Ze(Ze({},a),r),{captionLayout:f,classNames:Ze(Ze({},a.classNames),r.classNames),components:Ze({},r.components),formatters:Ze(Ze({},a.formatters),r.formatters),fromDate:c,labels:Ze(Ze({},a.labels),r.labels),mode:r.mode||a.mode,modifiers:Ze(Ze({},a.modifiers),r.modifiers),modifiersClassNames:Ze(Ze({},a.modifiersClassNames),r.modifiersClassNames),onSelect:h,styles:Ze(Ze({},a.styles),r.styles),toDate:d});return s.jsx(KN.Provider,{value:p,children:e.children})}function rn(){var e=m.useContext(KN);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function QN(e){var t=rn(),r=t.locale,a=t.classNames,l=t.styles,c=t.formatters.formatCaption;return s.jsx("div",{className:a.caption_label,style:l.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:c(e.displayMonth,{locale:r})})}function n8(e){return s.jsx("svg",Ze({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function ZN(e){var t,r,a=e.onChange,l=e.value,c=e.children,d=e.caption,f=e.className,h=e.style,p=rn(),v=(r=(t=p.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:n8;return s.jsxs("div",{className:f,style:h,children:[s.jsx("span",{className:p.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:p.classNames.dropdown,style:p.styles.dropdown,value:l,onChange:a,children:c}),s.jsxs("div",{className:p.classNames.caption_label,style:p.styles.caption_label,"aria-hidden":"true",children:[d,s.jsx(v,{className:p.classNames.dropdown_icon,style:p.styles.dropdown_icon})]})]})}function r8(e){var t,r=rn(),a=r.fromDate,l=r.toDate,c=r.styles,d=r.locale,f=r.formatters.formatMonthCaption,h=r.classNames,p=r.components,v=r.labels.labelMonthDropdown;if(!a)return s.jsx(s.Fragment,{});if(!l)return s.jsx(s.Fragment,{});var x=[];if(TL(a,l))for(var b=gr(a),w=a.getMonth();w<=l.getMonth();w++)x.push(fp(b,w));else for(var b=gr(new Date),w=0;w<=11;w++)x.push(fp(b,w));var j=function(N){var C=Number(N.target.value),E=fp(gr(e.displayMonth),C);e.onChange(E)},_=(t=p==null?void 0:p.Dropdown)!==null&&t!==void 0?t:ZN;return s.jsx(_,{name:"months","aria-label":v(),className:h.dropdown_month,style:c.dropdown_month,onChange:j,value:e.displayMonth.getMonth(),caption:f(e.displayMonth,{locale:d}),children:x.map(function(N){return s.jsx("option",{value:N.getMonth(),children:f(N,{locale:d})},N.getMonth())})})}function s8(e){var t,r=e.displayMonth,a=rn(),l=a.fromDate,c=a.toDate,d=a.locale,f=a.styles,h=a.classNames,p=a.components,v=a.formatters.formatYearCaption,x=a.labels.labelYearDropdown,b=[];if(!l)return s.jsx(s.Fragment,{});if(!c)return s.jsx(s.Fragment,{});for(var w=l.getFullYear(),j=c.getFullYear(),_=w;_<=j;_++)b.push(Tw(EN(new Date),_));var N=function(E){var T=Tw(gr(r),Number(E.target.value));e.onChange(T)},C=(t=p==null?void 0:p.Dropdown)!==null&&t!==void 0?t:ZN;return s.jsx(C,{name:"years","aria-label":x(),className:h.dropdown_year,style:f.dropdown_year,onChange:N,value:r.getFullYear(),caption:v(r,{locale:d}),children:b.map(function(E){return s.jsx("option",{value:E.getFullYear(),children:v(E,{locale:d})},E.getFullYear())})})}function a8(e,t){var r=m.useState(e),a=r[0],l=r[1],c=t===void 0?a:t;return[c,l]}function i8(e){var t=e.month,r=e.defaultMonth,a=e.today,l=t||r||a||new Date,c=e.toDate,d=e.fromDate,f=e.numberOfMonths,h=f===void 0?1:f;if(c&&jc(c,l)<0){var p=-1*(h-1);l=os(c,p)}return d&&jc(l,d)<0&&(l=d),gr(l)}function l8(){var e=rn(),t=i8(e),r=a8(t,e.month),a=r[0],l=r[1],c=function(d){var f;if(!e.disableNavigation){var h=gr(d);l(h),(f=e.onMonthChange)===null||f===void 0||f.call(e,h)}};return[a,c]}function o8(e,t){for(var r=t.reverseMonths,a=t.numberOfMonths,l=gr(e),c=gr(os(l,a)),d=jc(c,l),f=[],h=0;h<d;h++){var p=os(l,h);f.push(p)}return r&&(f=f.reverse()),f}function c8(e,t){if(!t.disableNavigation){var r=t.toDate,a=t.pagedNavigation,l=t.numberOfMonths,c=l===void 0?1:l,d=a?c:1,f=gr(e);if(!r)return os(f,d);var h=jc(r,e);if(!(h<c))return os(f,d)}}function u8(e,t){if(!t.disableNavigation){var r=t.fromDate,a=t.pagedNavigation,l=t.numberOfMonths,c=l===void 0?1:l,d=a?c:1,f=gr(e);if(!r)return os(f,-d);var h=jc(f,r);if(!(h<=0))return os(f,-d)}}var JN=m.createContext(void 0);function d8(e){var t=rn(),r=l8(),a=r[0],l=r[1],c=o8(a,t),d=c8(a,t),f=u8(a,t),h=function(x){return c.some(function(b){return uv(x,b)})},p=function(x,b){h(x)||(b&&ON(x,b)?l(os(x,1+t.numberOfMonths*-1)):l(x))},v={currentMonth:a,displayMonths:c,goToMonth:l,goToDate:p,previousMonth:f,nextMonth:d,isDateDisplayed:h};return s.jsx(JN.Provider,{value:v,children:e.children})}function Wc(){var e=m.useContext(JN);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Rw(e){var t,r=rn(),a=r.classNames,l=r.styles,c=r.components,d=Wc().goToMonth,f=function(v){d(os(v,e.displayIndex?-e.displayIndex:0))},h=(t=c==null?void 0:c.CaptionLabel)!==null&&t!==void 0?t:QN,p=s.jsx(h,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:a.caption_dropdowns,style:l.caption_dropdowns,children:[s.jsx("div",{className:a.vhidden,children:p}),s.jsx(r8,{onChange:f,displayMonth:e.displayMonth}),s.jsx(s8,{onChange:f,displayMonth:e.displayMonth})]})}function f8(e){return s.jsx("svg",Ze({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function h8(e){return s.jsx("svg",Ze({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Hd=m.forwardRef(function(e,t){var r=rn(),a=r.classNames,l=r.styles,c=[a.button_reset,a.button];e.className&&c.push(e.className);var d=c.join(" "),f=Ze(Ze({},l.button_reset),l.button);return e.style&&Object.assign(f,e.style),s.jsx("button",Ze({},e,{ref:t,type:"button",className:d,style:f}))});function m8(e){var t,r,a=rn(),l=a.dir,c=a.locale,d=a.classNames,f=a.styles,h=a.labels,p=h.labelPrevious,v=h.labelNext,x=a.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var b=p(e.previousMonth,{locale:c}),w=[d.nav_button,d.nav_button_previous].join(" "),j=v(e.nextMonth,{locale:c}),_=[d.nav_button,d.nav_button_next].join(" "),N=(t=x==null?void 0:x.IconRight)!==null&&t!==void 0?t:h8,C=(r=x==null?void 0:x.IconLeft)!==null&&r!==void 0?r:f8;return s.jsxs("div",{className:d.nav,style:f.nav,children:[!e.hidePrevious&&s.jsx(Hd,{name:"previous-month","aria-label":b,className:w,style:f.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:l==="rtl"?s.jsx(N,{className:d.nav_icon,style:f.nav_icon}):s.jsx(C,{className:d.nav_icon,style:f.nav_icon})}),!e.hideNext&&s.jsx(Hd,{name:"next-month","aria-label":j,className:_,style:f.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:l==="rtl"?s.jsx(C,{className:d.nav_icon,style:f.nav_icon}):s.jsx(N,{className:d.nav_icon,style:f.nav_icon})})]})}function Mw(e){var t=rn().numberOfMonths,r=Wc(),a=r.previousMonth,l=r.nextMonth,c=r.goToMonth,d=r.displayMonths,f=d.findIndex(function(j){return uv(e.displayMonth,j)}),h=f===0,p=f===d.length-1,v=t>1&&(h||!p),x=t>1&&(p||!h),b=function(){a&&c(a)},w=function(){l&&c(l)};return s.jsx(m8,{displayMonth:e.displayMonth,hideNext:v,hidePrevious:x,nextMonth:l,previousMonth:a,onPreviousClick:b,onNextClick:w})}function p8(e){var t,r=rn(),a=r.classNames,l=r.disableNavigation,c=r.styles,d=r.captionLayout,f=r.components,h=(t=f==null?void 0:f.CaptionLabel)!==null&&t!==void 0?t:QN,p;return l?p=s.jsx(h,{id:e.id,displayMonth:e.displayMonth}):d==="dropdown"?p=s.jsx(Rw,{displayMonth:e.displayMonth,id:e.id}):d==="dropdown-buttons"?p=s.jsxs(s.Fragment,{children:[s.jsx(Rw,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(Mw,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):p=s.jsxs(s.Fragment,{children:[s.jsx(h,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(Mw,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:a.caption,style:c.caption,children:p})}function g8(e){var t=rn(),r=t.footer,a=t.styles,l=t.classNames.tfoot;return r?s.jsx("tfoot",{className:l,style:a.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function v8(e,t,r){for(var a=r?ki(new Date):Rs(new Date,{locale:e,weekStartsOn:t}),l=[],c=0;c<7;c++){var d=ar(a,c);l.push(d)}return l}function x8(){var e=rn(),t=e.classNames,r=e.styles,a=e.showWeekNumber,l=e.locale,c=e.weekStartsOn,d=e.ISOWeek,f=e.formatters.formatWeekdayName,h=e.labels.labelWeekday,p=v8(l,c,d);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[a&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),p.map(function(v,x){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":h(v,{locale:l}),children:f(v,{locale:l})},x)})]})}function y8(){var e,t=rn(),r=t.classNames,a=t.styles,l=t.components,c=(e=l==null?void 0:l.HeadRow)!==null&&e!==void 0?e:x8;return s.jsx("thead",{style:a.head,className:r.head,children:s.jsx(c,{})})}function b8(e){var t=rn(),r=t.locale,a=t.formatters.formatDay;return s.jsx(s.Fragment,{children:a(e.date,{locale:r})})}var hv=m.createContext(void 0);function w8(e){if(!Yc(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(hv.Provider,{value:t,children:e.children})}return s.jsx(j8,{initialProps:e.initialProps,children:e.children})}function j8(e){var t=e.initialProps,r=e.children,a=t.selected,l=t.min,c=t.max,d=function(p,v,x){var b,w;(b=t.onDayClick)===null||b===void 0||b.call(t,p,v,x);var j=!!(v.selected&&l&&(a==null?void 0:a.length)===l);if(!j){var _=!!(!v.selected&&c&&(a==null?void 0:a.length)===c);if(!_){var N=a?XN([],a):[];if(v.selected){var C=N.findIndex(function(E){return pr(p,E)});N.splice(C,1)}else N.push(p);(w=t.onSelect)===null||w===void 0||w.call(t,N,p,v,x)}}},f={disabled:[]};a&&f.disabled.push(function(p){var v=c&&a.length>c-1,x=a.some(function(b){return pr(b,p)});return!!(v&&!x)});var h={selected:a,onDayClick:d,modifiers:f};return s.jsx(hv.Provider,{value:h,children:r})}function mv(){var e=m.useContext(hv);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function _8(e,t){var r=t||{},a=r.from,l=r.to;return a&&l?pr(l,e)&&pr(a,e)?void 0:pr(l,e)?{from:l,to:void 0}:pr(a,e)?void 0:Kp(a,e)?{from:e,to:l}:{from:a,to:e}:l?Kp(e,l)?{from:l,to:e}:{from:e,to:l}:a?ON(e,a)?{from:e,to:a}:{from:a,to:e}:{from:e,to:void 0}}var pv=m.createContext(void 0);function N8(e){if(!Gc(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(pv.Provider,{value:t,children:e.children})}return s.jsx(S8,{initialProps:e.initialProps,children:e.children})}function S8(e){var t=e.initialProps,r=e.children,a=t.selected,l=a||{},c=l.from,d=l.to,f=t.min,h=t.max,p=function(w,j,_){var N,C;(N=t.onDayClick)===null||N===void 0||N.call(t,w,j,_);var E=_8(w,a);(C=t.onSelect)===null||C===void 0||C.call(t,E,w,j,_)},v={range_start:[],range_end:[],range_middle:[],disabled:[]};if(c?(v.range_start=[c],d?(v.range_end=[d],pr(c,d)||(v.range_middle=[{after:c,before:d}])):v.range_end=[c]):d&&(v.range_start=[d],v.range_end=[d]),f&&(c&&!d&&v.disabled.push({after:up(c,f-1),before:ar(c,f-1)}),c&&d&&v.disabled.push({after:c,before:ar(c,f-1)}),!c&&d&&v.disabled.push({after:up(d,f-1),before:ar(d,f-1)})),h){if(c&&!d&&(v.disabled.push({before:ar(c,-h+1)}),v.disabled.push({after:ar(c,h-1)})),c&&d){var x=Ns(d,c)+1,b=h-x;v.disabled.push({before:up(c,b)}),v.disabled.push({after:ar(d,b)})}!c&&d&&(v.disabled.push({before:ar(d,-h+1)}),v.disabled.push({after:ar(d,h-1)}))}return s.jsx(pv.Provider,{value:{selected:a,onDayClick:p,modifiers:v},children:r})}function gv(){var e=m.useContext(pv);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Rd(e){return Array.isArray(e)?XN([],e):e!==void 0?[e]:[]}function E8(e){var t={};return Object.entries(e).forEach(function(r){var a=r[0],l=r[1];t[a]=Rd(l)}),t}var cs;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(cs||(cs={}));var C8=cs.Selected,Qs=cs.Disabled,T8=cs.Hidden,R8=cs.Today,hp=cs.RangeEnd,mp=cs.RangeMiddle,pp=cs.RangeStart,M8=cs.Outside;function A8(e,t,r){var a,l=(a={},a[C8]=Rd(e.selected),a[Qs]=Rd(e.disabled),a[T8]=Rd(e.hidden),a[R8]=[e.today],a[hp]=[],a[mp]=[],a[pp]=[],a[M8]=[],a);return e.fromDate&&l[Qs].push({before:e.fromDate}),e.toDate&&l[Qs].push({after:e.toDate}),Yc(e)?l[Qs]=l[Qs].concat(t.modifiers[Qs]):Gc(e)&&(l[Qs]=l[Qs].concat(r.modifiers[Qs]),l[pp]=r.modifiers[pp],l[mp]=r.modifiers[mp],l[hp]=r.modifiers[hp]),l}var eS=m.createContext(void 0);function k8(e){var t=rn(),r=mv(),a=gv(),l=A8(t,r,a),c=E8(t.modifiers),d=Ze(Ze({},l),c);return s.jsx(eS.Provider,{value:d,children:e.children})}function tS(){var e=m.useContext(eS);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function D8(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function O8(e){return!!(e&&typeof e=="object"&&"from"in e)}function P8(e){return!!(e&&typeof e=="object"&&"after"in e)}function L8(e){return!!(e&&typeof e=="object"&&"before"in e)}function I8(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function z8(e,t){var r,a=t.from,l=t.to;if(a&&l){var c=Ns(l,a)<0;c&&(r=[l,a],a=r[0],l=r[1]);var d=Ns(e,a)>=0&&Ns(l,e)>=0;return d}return l?pr(l,e):a?pr(a,e):!1}function U8(e){return lv(e)}function $8(e){return Array.isArray(e)&&e.every(lv)}function B8(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(U8(r))return pr(e,r);if($8(r))return r.includes(e);if(O8(r))return z8(e,r);if(I8(r))return r.dayOfWeek.includes(e.getDay());if(D8(r)){var a=Ns(r.before,e),l=Ns(r.after,e),c=a>0,d=l<0,f=Kp(r.before,r.after);return f?d&&c:c||d}return P8(r)?Ns(e,r.after)>0:L8(r)?Ns(r.before,e)>0:typeof r=="function"?r(e):!1})}function vv(e,t,r){var a=Object.keys(t).reduce(function(c,d){var f=t[d];return B8(e,f)&&c.push(d),c},[]),l={};return a.forEach(function(c){return l[c]=!0}),r&&!uv(e,r)&&(l.outside=!0),l}function H8(e,t){for(var r=gr(e[0]),a=ov(e[e.length-1]),l,c,d=r;d<=a;){var f=vv(d,t),h=!f.disabled&&!f.hidden;if(!h){d=ar(d,1);continue}if(f.selected)return d;f.today&&!c&&(c=d),l||(l=d),d=ar(d,1)}return c||l}var q8=365;function nS(e,t){var r=t.moveBy,a=t.direction,l=t.context,c=t.modifiers,d=t.retry,f=d===void 0?{count:0,lastFocused:e}:d,h=l.weekStartsOn,p=l.fromDate,v=l.toDate,x=l.locale,b={day:ar,week:Xp,month:os,year:S5,startOfWeek:function(N){return l.ISOWeek?ki(N):Rs(N,{locale:x,weekStartsOn:h})},endOfWeek:function(N){return l.ISOWeek?CN(N):cv(N,{locale:x,weekStartsOn:h})}},w=b[r](e,a==="after"?1:-1);a==="before"&&p?w=E5([p,w]):a==="after"&&v&&(w=C5([v,w]));var j=!0;if(c){var _=vv(w,c);j=!_.disabled&&!_.hidden}return j?w:f.count>q8?f.lastFocused:nS(w,{moveBy:r,direction:a,context:l,modifiers:c,retry:Ze(Ze({},f),{count:f.count+1})})}var rS=m.createContext(void 0);function F8(e){var t=Wc(),r=tS(),a=m.useState(),l=a[0],c=a[1],d=m.useState(),f=d[0],h=d[1],p=H8(t.displayMonths,r),v=l??(f&&t.isDateDisplayed(f))?f:p,x=function(){h(l),c(void 0)},b=function(N){c(N)},w=rn(),j=function(N,C){if(l){var E=nS(l,{moveBy:N,direction:C,context:w,modifiers:r});pr(l,E)||(t.goToDate(E,l),b(E))}},_={focusedDay:l,focusTarget:v,blur:x,focus:b,focusDayAfter:function(){return j("day","after")},focusDayBefore:function(){return j("day","before")},focusWeekAfter:function(){return j("week","after")},focusWeekBefore:function(){return j("week","before")},focusMonthBefore:function(){return j("month","before")},focusMonthAfter:function(){return j("month","after")},focusYearBefore:function(){return j("year","before")},focusYearAfter:function(){return j("year","after")},focusStartOfWeek:function(){return j("startOfWeek","before")},focusEndOfWeek:function(){return j("endOfWeek","after")}};return s.jsx(rS.Provider,{value:_,children:e.children})}function xv(){var e=m.useContext(rS);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function V8(e,t){var r=tS(),a=vv(e,r,t);return a}var yv=m.createContext(void 0);function Y8(e){if(!Tf(e.initialProps)){var t={selected:void 0};return s.jsx(yv.Provider,{value:t,children:e.children})}return s.jsx(G8,{initialProps:e.initialProps,children:e.children})}function G8(e){var t=e.initialProps,r=e.children,a=function(c,d,f){var h,p,v;if((h=t.onDayClick)===null||h===void 0||h.call(t,c,d,f),d.selected&&!t.required){(p=t.onSelect)===null||p===void 0||p.call(t,void 0,c,d,f);return}(v=t.onSelect)===null||v===void 0||v.call(t,c,c,d,f)},l={selected:t.selected,onDayClick:a};return s.jsx(yv.Provider,{value:l,children:r})}function sS(){var e=m.useContext(yv);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function W8(e,t){var r=rn(),a=sS(),l=mv(),c=gv(),d=xv(),f=d.focusDayAfter,h=d.focusDayBefore,p=d.focusWeekAfter,v=d.focusWeekBefore,x=d.blur,b=d.focus,w=d.focusMonthBefore,j=d.focusMonthAfter,_=d.focusYearBefore,N=d.focusYearAfter,C=d.focusStartOfWeek,E=d.focusEndOfWeek,T=function(G){var B,ee,k,P;Tf(r)?(B=a.onDayClick)===null||B===void 0||B.call(a,e,t,G):Yc(r)?(ee=l.onDayClick)===null||ee===void 0||ee.call(l,e,t,G):Gc(r)?(k=c.onDayClick)===null||k===void 0||k.call(c,e,t,G):(P=r.onDayClick)===null||P===void 0||P.call(r,e,t,G)},M=function(G){var B;b(e),(B=r.onDayFocus)===null||B===void 0||B.call(r,e,t,G)},R=function(G){var B;x(),(B=r.onDayBlur)===null||B===void 0||B.call(r,e,t,G)},L=function(G){var B;(B=r.onDayMouseEnter)===null||B===void 0||B.call(r,e,t,G)},H=function(G){var B;(B=r.onDayMouseLeave)===null||B===void 0||B.call(r,e,t,G)},$=function(G){var B;(B=r.onDayPointerEnter)===null||B===void 0||B.call(r,e,t,G)},I=function(G){var B;(B=r.onDayPointerLeave)===null||B===void 0||B.call(r,e,t,G)},Y=function(G){var B;(B=r.onDayTouchCancel)===null||B===void 0||B.call(r,e,t,G)},ce=function(G){var B;(B=r.onDayTouchEnd)===null||B===void 0||B.call(r,e,t,G)},te=function(G){var B;(B=r.onDayTouchMove)===null||B===void 0||B.call(r,e,t,G)},q=function(G){var B;(B=r.onDayTouchStart)===null||B===void 0||B.call(r,e,t,G)},le=function(G){var B;(B=r.onDayKeyUp)===null||B===void 0||B.call(r,e,t,G)},ue=function(G){var B;switch(G.key){case"ArrowLeft":G.preventDefault(),G.stopPropagation(),r.dir==="rtl"?f():h();break;case"ArrowRight":G.preventDefault(),G.stopPropagation(),r.dir==="rtl"?h():f();break;case"ArrowDown":G.preventDefault(),G.stopPropagation(),p();break;case"ArrowUp":G.preventDefault(),G.stopPropagation(),v();break;case"PageUp":G.preventDefault(),G.stopPropagation(),G.shiftKey?_():w();break;case"PageDown":G.preventDefault(),G.stopPropagation(),G.shiftKey?N():j();break;case"Home":G.preventDefault(),G.stopPropagation(),C();break;case"End":G.preventDefault(),G.stopPropagation(),E();break}(B=r.onDayKeyDown)===null||B===void 0||B.call(r,e,t,G)},O={onClick:T,onFocus:M,onBlur:R,onKeyDown:ue,onKeyUp:le,onMouseEnter:L,onMouseLeave:H,onPointerEnter:$,onPointerLeave:I,onTouchCancel:Y,onTouchEnd:ce,onTouchMove:te,onTouchStart:q};return O}function X8(){var e=rn(),t=sS(),r=mv(),a=gv(),l=Tf(e)?t.selected:Yc(e)?r.selected:Gc(e)?a.selected:void 0;return l}function K8(e){return Object.values(cs).includes(e)}function Q8(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(a){var l=e.modifiersClassNames[a];if(l)r.push(l);else if(K8(a)){var c=e.classNames["day_".concat(a)];c&&r.push(c)}}),r}function Z8(e,t){var r=Ze({},e.styles.day);return Object.keys(t).forEach(function(a){var l;r=Ze(Ze({},r),(l=e.modifiersStyles)===null||l===void 0?void 0:l[a])}),r}function J8(e,t,r){var a,l,c,d=rn(),f=xv(),h=V8(e,t),p=W8(e,h),v=X8(),x=!!(d.onDayClick||d.mode!=="default");m.useEffect(function(){var L;h.outside||f.focusedDay&&x&&pr(f.focusedDay,e)&&((L=r.current)===null||L===void 0||L.focus())},[f.focusedDay,e,r,x,h.outside]);var b=Q8(d,h).join(" "),w=Z8(d,h),j=!!(h.outside&&!d.showOutsideDays||h.hidden),_=(c=(l=d.components)===null||l===void 0?void 0:l.DayContent)!==null&&c!==void 0?c:b8,N=s.jsx(_,{date:e,displayMonth:t,activeModifiers:h}),C={style:w,className:b,children:N,role:"gridcell"},E=f.focusTarget&&pr(f.focusTarget,e)&&!h.outside,T=f.focusedDay&&pr(f.focusedDay,e),M=Ze(Ze(Ze({},C),(a={disabled:h.disabled,role:"gridcell"},a["aria-selected"]=h.selected,a.tabIndex=T||E?0:-1,a)),p),R={isButton:x,isHidden:j,activeModifiers:h,selectedDays:v,buttonProps:M,divProps:C};return R}function eI(e){var t=m.useRef(null),r=J8(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(Hd,Ze({name:"day",ref:t},r.buttonProps)):s.jsx("div",Ze({},r.divProps))}function tI(e){var t=e.number,r=e.dates,a=rn(),l=a.onWeekNumberClick,c=a.styles,d=a.classNames,f=a.locale,h=a.labels.labelWeekNumber,p=a.formatters.formatWeekNumber,v=p(Number(t),{locale:f});if(!l)return s.jsx("span",{className:d.weeknumber,style:c.weeknumber,children:v});var x=h(Number(t),{locale:f}),b=function(w){l(t,r,w)};return s.jsx(Hd,{name:"week-number","aria-label":x,className:d.weeknumber,style:c.weeknumber,onClick:b,children:v})}function nI(e){var t,r,a=rn(),l=a.styles,c=a.classNames,d=a.showWeekNumber,f=a.components,h=(t=f==null?void 0:f.Day)!==null&&t!==void 0?t:eI,p=(r=f==null?void 0:f.WeekNumber)!==null&&r!==void 0?r:tI,v;return d&&(v=s.jsx("td",{className:c.cell,style:l.cell,children:s.jsx(p,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:c.row,style:l.row,children:[v,e.dates.map(function(x){return s.jsx("td",{className:c.cell,style:l.cell,role:"presentation",children:s.jsx(h,{displayMonth:e.displayMonth,date:x})},SL(x))})]})}function Aw(e,t,r){for(var a=r!=null&&r.ISOWeek?CN(t):cv(t,r),l=r!=null&&r.ISOWeek?ki(e):Rs(e,r),c=Ns(a,l),d=[],f=0;f<=c;f++)d.push(ar(l,f));var h=d.reduce(function(p,v){var x=r!=null&&r.ISOWeek?MN(v):kN(v,r),b=p.find(function(w){return w.weekNumber===x});return b?(b.dates.push(v),p):(p.push({weekNumber:x,dates:[v]}),p)},[]);return h}function rI(e,t){var r=Aw(gr(e),ov(e),t);if(t!=null&&t.useFixedWeeks){var a=CL(e,t);if(a<6){var l=r[r.length-1],c=l.dates[l.dates.length-1],d=Xp(c,6-a),f=Aw(Xp(c,1),d,t);r.push.apply(r,f)}}return r}function sI(e){var t,r,a,l=rn(),c=l.locale,d=l.classNames,f=l.styles,h=l.hideHead,p=l.fixedWeeks,v=l.components,x=l.weekStartsOn,b=l.firstWeekContainsDate,w=l.ISOWeek,j=rI(e.displayMonth,{useFixedWeeks:!!p,ISOWeek:w,locale:c,weekStartsOn:x,firstWeekContainsDate:b}),_=(t=v==null?void 0:v.Head)!==null&&t!==void 0?t:y8,N=(r=v==null?void 0:v.Row)!==null&&r!==void 0?r:nI,C=(a=v==null?void 0:v.Footer)!==null&&a!==void 0?a:g8;return s.jsxs("table",{id:e.id,className:d.table,style:f.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!h&&s.jsx(_,{}),s.jsx("tbody",{className:d.tbody,style:f.tbody,children:j.map(function(E){return s.jsx(N,{displayMonth:e.displayMonth,dates:E.dates,weekNumber:E.weekNumber},E.weekNumber)})}),s.jsx(C,{displayMonth:e.displayMonth})]})}function aI(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var iI=aI()?m.useLayoutEffect:m.useEffect,gp=!1,lI=0;function kw(){return"react-day-picker-".concat(++lI)}function oI(e){var t,r=e??(gp?kw():null),a=m.useState(r),l=a[0],c=a[1];return iI(function(){l===null&&c(kw())},[]),m.useEffect(function(){gp===!1&&(gp=!0)},[]),(t=e??l)!==null&&t!==void 0?t:void 0}function cI(e){var t,r,a=rn(),l=a.dir,c=a.classNames,d=a.styles,f=a.components,h=Wc().displayMonths,p=oI(a.id?"".concat(a.id,"-").concat(e.displayIndex):void 0),v=a.id?"".concat(a.id,"-grid-").concat(e.displayIndex):void 0,x=[c.month],b=d.month,w=e.displayIndex===0,j=e.displayIndex===h.length-1,_=!w&&!j;l==="rtl"&&(t=[w,j],j=t[0],w=t[1]),w&&(x.push(c.caption_start),b=Ze(Ze({},b),d.caption_start)),j&&(x.push(c.caption_end),b=Ze(Ze({},b),d.caption_end)),_&&(x.push(c.caption_between),b=Ze(Ze({},b),d.caption_between));var N=(r=f==null?void 0:f.Caption)!==null&&r!==void 0?r:p8;return s.jsxs("div",{className:x.join(" "),style:b,children:[s.jsx(N,{id:p,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(sI,{id:v,"aria-labelledby":p,displayMonth:e.displayMonth})]},e.displayIndex)}function uI(e){var t=rn(),r=t.classNames,a=t.styles;return s.jsx("div",{className:r.months,style:a.months,children:e.children})}function dI(e){var t,r,a=e.initialProps,l=rn(),c=xv(),d=Wc(),f=m.useState(!1),h=f[0],p=f[1];m.useEffect(function(){l.initialFocus&&c.focusTarget&&(h||(c.focus(c.focusTarget),p(!0)))},[l.initialFocus,h,c.focus,c.focusTarget,c]);var v=[l.classNames.root,l.className];l.numberOfMonths>1&&v.push(l.classNames.multiple_months),l.showWeekNumber&&v.push(l.classNames.with_weeknumber);var x=Ze(Ze({},l.styles.root),l.style),b=Object.keys(a).filter(function(j){return j.startsWith("data-")}).reduce(function(j,_){var N;return Ze(Ze({},j),(N={},N[_]=a[_],N))},{}),w=(r=(t=a.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:uI;return s.jsx("div",Ze({className:v.join(" "),style:x,dir:l.dir,id:l.id,nonce:a.nonce,title:a.title,lang:a.lang},b,{children:s.jsx(w,{children:d.displayMonths.map(function(j,_){return s.jsx(cI,{displayIndex:_,displayMonth:j},_)})})}))}function fI(e){var t=e.children,r=L6(e,["children"]);return s.jsx(t8,{initialProps:r,children:s.jsx(d8,{children:s.jsx(Y8,{initialProps:r,children:s.jsx(w8,{initialProps:r,children:s.jsx(N8,{initialProps:r,children:s.jsx(k8,{children:s.jsx(F8,{children:t})})})})})})})}function hI(e){return s.jsx(fI,Ze({},e,{children:s.jsx(dI,{initialProps:e})}))}function aS({className:e,classNames:t,showOutsideDays:r=!0,...a}){return s.jsx(hI,{showOutsideDays:r,className:Ce("p-3",e),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:Ce(Ul({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Ce("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md",a.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Ce(Ul({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:l,...c})=>s.jsx(M_,{className:Ce("size-4",l),...c}),IconRight:({className:l,...c})=>s.jsx(A_,{className:Ce("size-4",l),...c})},...a})}function Dw(e,[t,r]){return Math.min(r,Math.max(t,e))}function bv(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var mI=[" ","Enter","ArrowUp","ArrowDown"],pI=[" ","Enter"],Xc="Select",[Rf,Mf,gI]=Cg(Xc),[to,eH]=lr(Xc,[gI,Ya]),Af=Ya(),[vI,Xa]=to(Xc),[xI,yI]=to(Xc),iS=e=>{const{__scopeSelect:t,children:r,open:a,defaultOpen:l,onOpenChange:c,value:d,defaultValue:f,onValueChange:h,dir:p,name:v,autoComplete:x,disabled:b,required:w,form:j}=e,_=Af(t),[N,C]=m.useState(null),[E,T]=m.useState(null),[M,R]=m.useState(!1),L=tf(p),[H=!1,$]=$a({prop:a,defaultProp:l,onChange:c}),[I,Y]=$a({prop:d,defaultProp:f,onChange:h}),ce=m.useRef(null),te=N?j||!!N.closest("form"):!0,[q,le]=m.useState(new Set),ue=Array.from(q).map(O=>O.props.value).join(";");return s.jsx(zg,{..._,children:s.jsxs(vI,{required:w,scope:t,trigger:N,onTriggerChange:C,valueNode:E,onValueNodeChange:T,valueNodeHasChildren:M,onValueNodeHasChildrenChange:R,contentId:Ss(),value:I,onValueChange:Y,open:H,onOpenChange:$,dir:L,triggerPointerDownPosRef:ce,disabled:b,children:[s.jsx(Rf.Provider,{scope:t,children:s.jsx(xI,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback(O=>{le(G=>new Set(G).add(O))},[]),onNativeOptionRemove:m.useCallback(O=>{le(G=>{const B=new Set(G);return B.delete(O),B})},[]),children:r})}),te?s.jsxs(RS,{"aria-hidden":!0,required:w,tabIndex:-1,name:v,autoComplete:x,value:I,onChange:O=>Y(O.target.value),disabled:b,form:j,children:[I===void 0?s.jsx("option",{value:""}):null,Array.from(q)]},ue):null]})})};iS.displayName=Xc;var lS="SelectTrigger",oS=m.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:a=!1,...l}=e,c=Af(r),d=Xa(lS,r),f=d.disabled||a,h=_t(t,d.onTriggerChange),p=Mf(r),v=m.useRef("touch"),[x,b,w]=MS(_=>{const N=p().filter(T=>!T.disabled),C=N.find(T=>T.value===d.value),E=AS(N,_,C);E!==void 0&&d.onValueChange(E.value)}),j=_=>{f||(d.onOpenChange(!0),w()),_&&(d.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return s.jsx(Pc,{asChild:!0,...c,children:s.jsx(Je.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:f,"data-disabled":f?"":void 0,"data-placeholder":TS(d.value)?"":void 0,...l,ref:h,onClick:ke(l.onClick,_=>{_.currentTarget.focus(),v.current!=="mouse"&&j(_)}),onPointerDown:ke(l.onPointerDown,_=>{v.current=_.pointerType;const N=_.target;N.hasPointerCapture(_.pointerId)&&N.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(j(_),_.preventDefault())}),onKeyDown:ke(l.onKeyDown,_=>{const N=x.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&b(_.key),!(N&&_.key===" ")&&mI.includes(_.key)&&(j(),_.preventDefault())})})})});oS.displayName=lS;var cS="SelectValue",uS=m.forwardRef((e,t)=>{const{__scopeSelect:r,className:a,style:l,children:c,placeholder:d="",...f}=e,h=Xa(cS,r),{onValueNodeHasChildrenChange:p}=h,v=c!==void 0,x=_t(t,h.onValueNodeChange);return Gn(()=>{p(v)},[p,v]),s.jsx(Je.span,{...f,ref:x,style:{pointerEvents:"none"},children:TS(h.value)?s.jsx(s.Fragment,{children:d}):c})});uS.displayName=cS;var bI="SelectIcon",dS=m.forwardRef((e,t)=>{const{__scopeSelect:r,children:a,...l}=e;return s.jsx(Je.span,{"aria-hidden":!0,...l,ref:t,children:a||"▼"})});dS.displayName=bI;var wI="SelectPortal",fS=e=>s.jsx(Lc,{asChild:!0,...e});fS.displayName=wI;var Di="SelectContent",hS=m.forwardRef((e,t)=>{const r=Xa(Di,e.__scopeSelect),[a,l]=m.useState();if(Gn(()=>{l(new DocumentFragment)},[]),!r.open){const c=a;return c?_s.createPortal(s.jsx(mS,{scope:e.__scopeSelect,children:s.jsx(Rf.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),c):null}return s.jsx(pS,{...e,ref:t})});hS.displayName=Di;var es=10,[mS,Ka]=to(Di),jI="SelectContentImpl",pS=m.forwardRef((e,t)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,side:f,sideOffset:h,align:p,alignOffset:v,arrowPadding:x,collisionBoundary:b,collisionPadding:w,sticky:j,hideWhenDetached:_,avoidCollisions:N,...C}=e,E=Xa(Di,r),[T,M]=m.useState(null),[R,L]=m.useState(null),H=_t(t,K=>M(K)),[$,I]=m.useState(null),[Y,ce]=m.useState(null),te=Mf(r),[q,le]=m.useState(!1),ue=m.useRef(!1);m.useEffect(()=>{if(T)return df(T)},[T]),nf();const O=m.useCallback(K=>{const[ae,...ge]=te().map(Me=>Me.ref.current),[de]=ge.slice(-1),Se=document.activeElement;for(const Me of K)if(Me===Se||(Me==null||Me.scrollIntoView({block:"nearest"}),Me===ae&&R&&(R.scrollTop=0),Me===de&&R&&(R.scrollTop=R.scrollHeight),Me==null||Me.focus(),document.activeElement!==Se))return},[te,R]),G=m.useCallback(()=>O([$,T]),[O,$,T]);m.useEffect(()=>{q&&G()},[q,G]);const{onOpenChange:B,triggerPointerDownPosRef:ee}=E;m.useEffect(()=>{if(T){let K={x:0,y:0};const ae=de=>{var Se,Me;K={x:Math.abs(Math.round(de.pageX)-(((Se=ee.current)==null?void 0:Se.x)??0)),y:Math.abs(Math.round(de.pageY)-(((Me=ee.current)==null?void 0:Me.y)??0))}},ge=de=>{K.x<=10&&K.y<=10?de.preventDefault():T.contains(de.target)||B(!1),document.removeEventListener("pointermove",ae),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",ge,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",ge,{capture:!0})}}},[T,B,ee]),m.useEffect(()=>{const K=()=>B(!1);return window.addEventListener("blur",K),window.addEventListener("resize",K),()=>{window.removeEventListener("blur",K),window.removeEventListener("resize",K)}},[B]);const[k,P]=MS(K=>{const ae=te().filter(Se=>!Se.disabled),ge=ae.find(Se=>Se.ref.current===document.activeElement),de=AS(ae,K,ge);de&&setTimeout(()=>de.ref.current.focus())}),V=m.useCallback((K,ae,ge)=>{const de=!ue.current&&!ge;(E.value!==void 0&&E.value===ae||de)&&(I(K),de&&(ue.current=!0))},[E.value]),X=m.useCallback(()=>T==null?void 0:T.focus(),[T]),D=m.useCallback((K,ae,ge)=>{const de=!ue.current&&!ge;(E.value!==void 0&&E.value===ae||de)&&ce(K)},[E.value]),U=a==="popper"?Qp:gS,F=U===Qp?{side:f,sideOffset:h,align:p,alignOffset:v,arrowPadding:x,collisionBoundary:b,collisionPadding:w,sticky:j,hideWhenDetached:_,avoidCollisions:N}:{};return s.jsx(mS,{scope:r,content:T,viewport:R,onViewportChange:L,itemRefCallback:V,selectedItem:$,onItemLeave:X,itemTextRefCallback:D,focusSelectedItem:G,selectedItemText:Y,position:a,isPositioned:q,searchRef:k,children:s.jsx(Ic,{as:Cs,allowPinchZoom:!0,children:s.jsx(Dc,{asChild:!0,trapped:E.open,onMountAutoFocus:K=>{K.preventDefault()},onUnmountAutoFocus:ke(l,K=>{var ae;(ae=E.trigger)==null||ae.focus({preventScroll:!0}),K.preventDefault()}),children:s.jsx(Zl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:K=>K.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:s.jsx(U,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:K=>K.preventDefault(),...C,...F,onPlaced:()=>le(!0),ref:H,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:ke(C.onKeyDown,K=>{const ae=K.ctrlKey||K.altKey||K.metaKey;if(K.key==="Tab"&&K.preventDefault(),!ae&&K.key.length===1&&P(K.key),["ArrowUp","ArrowDown","Home","End"].includes(K.key)){let de=te().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);if(["ArrowUp","End"].includes(K.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(K.key)){const Se=K.target,Me=de.indexOf(Se);de=de.slice(Me+1)}setTimeout(()=>O(de)),K.preventDefault()}})})})})})})});pS.displayName=jI;var _I="SelectItemAlignedPosition",gS=m.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:a,...l}=e,c=Xa(Di,r),d=Ka(Di,r),[f,h]=m.useState(null),[p,v]=m.useState(null),x=_t(t,H=>v(H)),b=Mf(r),w=m.useRef(!1),j=m.useRef(!0),{viewport:_,selectedItem:N,selectedItemText:C,focusSelectedItem:E}=d,T=m.useCallback(()=>{if(c.trigger&&c.valueNode&&f&&p&&_&&N&&C){const H=c.trigger.getBoundingClientRect(),$=p.getBoundingClientRect(),I=c.valueNode.getBoundingClientRect(),Y=C.getBoundingClientRect();if(c.dir!=="rtl"){const Se=Y.left-$.left,Me=I.left-Se,at=H.left-Me,nt=H.width+at,ve=Math.max(nt,$.width),pe=window.innerWidth-es,Pe=Dw(Me,[es,Math.max(es,pe-ve)]);f.style.minWidth=nt+"px",f.style.left=Pe+"px"}else{const Se=$.right-Y.right,Me=window.innerWidth-I.right-Se,at=window.innerWidth-H.right-Me,nt=H.width+at,ve=Math.max(nt,$.width),pe=window.innerWidth-es,Pe=Dw(Me,[es,Math.max(es,pe-ve)]);f.style.minWidth=nt+"px",f.style.right=Pe+"px"}const ce=b(),te=window.innerHeight-es*2,q=_.scrollHeight,le=window.getComputedStyle(p),ue=parseInt(le.borderTopWidth,10),O=parseInt(le.paddingTop,10),G=parseInt(le.borderBottomWidth,10),B=parseInt(le.paddingBottom,10),ee=ue+O+q+B+G,k=Math.min(N.offsetHeight*5,ee),P=window.getComputedStyle(_),V=parseInt(P.paddingTop,10),X=parseInt(P.paddingBottom,10),D=H.top+H.height/2-es,U=te-D,F=N.offsetHeight/2,K=N.offsetTop+F,ae=ue+O+K,ge=ee-ae;if(ae<=D){const Se=ce.length>0&&N===ce[ce.length-1].ref.current;f.style.bottom="0px";const Me=p.clientHeight-_.offsetTop-_.offsetHeight,at=Math.max(U,F+(Se?X:0)+Me+G),nt=ae+at;f.style.height=nt+"px"}else{const Se=ce.length>0&&N===ce[0].ref.current;f.style.top="0px";const at=Math.max(D,ue+_.offsetTop+(Se?V:0)+F)+ge;f.style.height=at+"px",_.scrollTop=ae-D+_.offsetTop}f.style.margin=`${es}px 0`,f.style.minHeight=k+"px",f.style.maxHeight=te+"px",a==null||a(),requestAnimationFrame(()=>w.current=!0)}},[b,c.trigger,c.valueNode,f,p,_,N,C,c.dir,a]);Gn(()=>T(),[T]);const[M,R]=m.useState();Gn(()=>{p&&R(window.getComputedStyle(p).zIndex)},[p]);const L=m.useCallback(H=>{H&&j.current===!0&&(T(),E==null||E(),j.current=!1)},[T,E]);return s.jsx(SI,{scope:r,contentWrapper:f,shouldExpandOnScrollRef:w,onScrollButtonChange:L,children:s.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:s.jsx(Je.div,{...l,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});gS.displayName=_I;var NI="SelectPopperPosition",Qp=m.forwardRef((e,t)=>{const{__scopeSelect:r,align:a="start",collisionPadding:l=es,...c}=e,d=Af(r);return s.jsx(lf,{...d,...c,ref:t,align:a,collisionPadding:l,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Qp.displayName=NI;var[SI,wv]=to(Di,{}),Zp="SelectViewport",vS=m.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:a,...l}=e,c=Ka(Zp,r),d=wv(Zp,r),f=_t(t,c.onViewportChange),h=m.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(Rf.Slot,{scope:r,children:s.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:f,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:ke(l.onScroll,p=>{const v=p.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:b}=d;if(b!=null&&b.current&&x){const w=Math.abs(h.current-v.scrollTop);if(w>0){const j=window.innerHeight-es*2,_=parseFloat(x.style.minHeight),N=parseFloat(x.style.height),C=Math.max(_,N);if(C<j){const E=C+w,T=Math.min(j,E),M=E-T;x.style.height=T+"px",x.style.bottom==="0px"&&(v.scrollTop=M>0?M:0,x.style.justifyContent="flex-end")}}}h.current=v.scrollTop})})})]})});vS.displayName=Zp;var xS="SelectGroup",[EI,CI]=to(xS),TI=m.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,l=Ss();return s.jsx(EI,{scope:r,id:l,children:s.jsx(Je.div,{role:"group","aria-labelledby":l,...a,ref:t})})});TI.displayName=xS;var yS="SelectLabel",RI=m.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,l=CI(yS,r);return s.jsx(Je.div,{id:l.id,...a,ref:t})});RI.displayName=yS;var qd="SelectItem",[MI,bS]=to(qd),wS=m.forwardRef((e,t)=>{const{__scopeSelect:r,value:a,disabled:l=!1,textValue:c,...d}=e,f=Xa(qd,r),h=Ka(qd,r),p=f.value===a,[v,x]=m.useState(c??""),[b,w]=m.useState(!1),j=_t(t,E=>{var T;return(T=h.itemRefCallback)==null?void 0:T.call(h,E,a,l)}),_=Ss(),N=m.useRef("touch"),C=()=>{l||(f.onValueChange(a),f.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(MI,{scope:r,value:a,disabled:l,textId:_,isSelected:p,onItemTextChange:m.useCallback(E=>{x(T=>T||((E==null?void 0:E.textContent)??"").trim())},[]),children:s.jsx(Rf.ItemSlot,{scope:r,value:a,disabled:l,textValue:v,children:s.jsx(Je.div,{role:"option","aria-labelledby":_,"data-highlighted":b?"":void 0,"aria-selected":p&&b,"data-state":p?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...d,ref:j,onFocus:ke(d.onFocus,()=>w(!0)),onBlur:ke(d.onBlur,()=>w(!1)),onClick:ke(d.onClick,()=>{N.current!=="mouse"&&C()}),onPointerUp:ke(d.onPointerUp,()=>{N.current==="mouse"&&C()}),onPointerDown:ke(d.onPointerDown,E=>{N.current=E.pointerType}),onPointerMove:ke(d.onPointerMove,E=>{var T;N.current=E.pointerType,l?(T=h.onItemLeave)==null||T.call(h):N.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ke(d.onPointerLeave,E=>{var T;E.currentTarget===document.activeElement&&((T=h.onItemLeave)==null||T.call(h))}),onKeyDown:ke(d.onKeyDown,E=>{var M;((M=h.searchRef)==null?void 0:M.current)!==""&&E.key===" "||(pI.includes(E.key)&&C(),E.key===" "&&E.preventDefault())})})})})});wS.displayName=qd;var lc="SelectItemText",jS=m.forwardRef((e,t)=>{const{__scopeSelect:r,className:a,style:l,...c}=e,d=Xa(lc,r),f=Ka(lc,r),h=bS(lc,r),p=yI(lc,r),[v,x]=m.useState(null),b=_t(t,C=>x(C),h.onItemTextChange,C=>{var E;return(E=f.itemTextRefCallback)==null?void 0:E.call(f,C,h.value,h.disabled)}),w=v==null?void 0:v.textContent,j=m.useMemo(()=>s.jsx("option",{value:h.value,disabled:h.disabled,children:w},h.value),[h.disabled,h.value,w]),{onNativeOptionAdd:_,onNativeOptionRemove:N}=p;return Gn(()=>(_(j),()=>N(j)),[_,N,j]),s.jsxs(s.Fragment,{children:[s.jsx(Je.span,{id:h.textId,...c,ref:b}),h.isSelected&&d.valueNode&&!d.valueNodeHasChildren?_s.createPortal(c.children,d.valueNode):null]})});jS.displayName=lc;var _S="SelectItemIndicator",NS=m.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e;return bS(_S,r).isSelected?s.jsx(Je.span,{"aria-hidden":!0,...a,ref:t}):null});NS.displayName=_S;var Jp="SelectScrollUpButton",SS=m.forwardRef((e,t)=>{const r=Ka(Jp,e.__scopeSelect),a=wv(Jp,e.__scopeSelect),[l,c]=m.useState(!1),d=_t(t,a.onScrollButtonChange);return Gn(()=>{if(r.viewport&&r.isPositioned){let f=function(){const p=h.scrollTop>0;c(p)};const h=r.viewport;return f(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[r.viewport,r.isPositioned]),l?s.jsx(CS,{...e,ref:d,onAutoScroll:()=>{const{viewport:f,selectedItem:h}=r;f&&h&&(f.scrollTop=f.scrollTop-h.offsetHeight)}}):null});SS.displayName=Jp;var eg="SelectScrollDownButton",ES=m.forwardRef((e,t)=>{const r=Ka(eg,e.__scopeSelect),a=wv(eg,e.__scopeSelect),[l,c]=m.useState(!1),d=_t(t,a.onScrollButtonChange);return Gn(()=>{if(r.viewport&&r.isPositioned){let f=function(){const p=h.scrollHeight-h.clientHeight,v=Math.ceil(h.scrollTop)<p;c(v)};const h=r.viewport;return f(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[r.viewport,r.isPositioned]),l?s.jsx(CS,{...e,ref:d,onAutoScroll:()=>{const{viewport:f,selectedItem:h}=r;f&&h&&(f.scrollTop=f.scrollTop+h.offsetHeight)}}):null});ES.displayName=eg;var CS=m.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:a,...l}=e,c=Ka("SelectScrollButton",r),d=m.useRef(null),f=Mf(r),h=m.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return m.useEffect(()=>()=>h(),[h]),Gn(()=>{var v;const p=f().find(x=>x.ref.current===document.activeElement);(v=p==null?void 0:p.ref.current)==null||v.scrollIntoView({block:"nearest"})},[f]),s.jsx(Je.div,{"aria-hidden":!0,...l,ref:t,style:{flexShrink:0,...l.style},onPointerDown:ke(l.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(a,50))}),onPointerMove:ke(l.onPointerMove,()=>{var p;(p=c.onItemLeave)==null||p.call(c),d.current===null&&(d.current=window.setInterval(a,50))}),onPointerLeave:ke(l.onPointerLeave,()=>{h()})})}),AI="SelectSeparator",kI=m.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e;return s.jsx(Je.div,{"aria-hidden":!0,...a,ref:t})});kI.displayName=AI;var tg="SelectArrow",DI=m.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,l=Af(r),c=Xa(tg,r),d=Ka(tg,r);return c.open&&d.position==="popper"?s.jsx(of,{...l,...a,ref:t}):null});DI.displayName=tg;function TS(e){return e===""||e===void 0}var RS=m.forwardRef((e,t)=>{const{value:r,...a}=e,l=m.useRef(null),c=_t(t,l),d=bv(r);return m.useEffect(()=>{const f=l.current,h=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(h,"value").set;if(d!==r&&v){const x=new Event("change",{bubbles:!0});v.call(f,r),f.dispatchEvent(x)}},[d,r]),s.jsx(rv,{asChild:!0,children:s.jsx("select",{...a,ref:c,defaultValue:r})})});RS.displayName="BubbleSelect";function MS(e){const t=Tr(e),r=m.useRef(""),a=m.useRef(0),l=m.useCallback(d=>{const f=r.current+d;t(f),function h(p){r.current=p,window.clearTimeout(a.current),p!==""&&(a.current=window.setTimeout(()=>h(""),1e3))}(f)},[t]),c=m.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,l,c]}function AS(e,t,r){const l=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,c=r?e.indexOf(r):-1;let d=OI(e,Math.max(c,0));l.length===1&&(d=d.filter(p=>p!==r));const h=d.find(p=>p.textValue.toLowerCase().startsWith(l.toLowerCase()));return h!==r?h:void 0}function OI(e,t){return e.map((r,a)=>e[(t+a)%e.length])}var PI=iS,LI=oS,II=uS,zI=dS,UI=fS,$I=hS,BI=vS,HI=wS,qI=jS,FI=NS,VI=SS,YI=ES;function Qn({...e}){return s.jsx(PI,{"data-slot":"select",...e})}function Zn({...e}){return s.jsx(II,{"data-slot":"select-value",...e})}function Jn({className:e,size:t="default",children:r,...a}){return s.jsxs(LI,{"data-slot":"select-trigger","data-size":t,className:Ce("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a,children:[r,s.jsx(zI,{asChild:!0,children:s.jsx(R_,{className:"size-4 opacity-50"})})]})}function er({className:e,children:t,position:r="popper",...a}){return s.jsx(UI,{children:s.jsxs($I,{"data-slot":"select-content",className:Ce("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[s.jsx(GI,{}),s.jsx(BI,{className:Ce("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),s.jsx(WI,{})]})})}function yt({className:e,children:t,...r}){return s.jsxs(HI,{"data-slot":"select-item",className:Ce("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...r,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(FI,{children:s.jsx(Gg,{className:"size-4"})})}),s.jsx(qI,{children:t})]})}function GI({className:e,...t}){return s.jsx(VI,{"data-slot":"select-scroll-up-button",className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(gP,{className:"size-4"})})}function WI({className:e,...t}){return s.jsx(YI,{"data-slot":"select-scroll-down-button",className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(R_,{className:"size-4"})})}const Ow=()=>{const e=ir(),{patientId:t}=vr(),r=!!t,[a,l]=m.useState({}),[c,d]=m.useState(!1),[f,h]=m.useState(r),[p,v]=m.useState(null),[x,b]=m.useState(!1),w=m.useCallback(async()=>{if(!r||!t){h(!1);return}h(!0),v(null);try{const{data:E,error:T}=await se.from("patient").select("*").eq("id",t).single();if(T)throw T;E?l({patient_unique_id:E.patient_unique_id||"",full_name:E.full_name||"",date_of_birth:E.date_of_birth?dt(Qt(E.date_of_birth),"yyyy-MM-dd"):void 0,gender:E.gender||void 0,phone:E.phone||""}):v("Patient non trouvé.")}catch(E){console.error("Erreur lors de la récupération du patient:",E),v((E instanceof Error?E.message:null)||"Impossible de charger les données du patient.")}finally{h(!1)}},[r,t]);m.useEffect(()=>{w()},[w]);const j=E=>{const{name:T,value:M}=E.target;l(R=>({...R,[T]:M}))},_=(E,T)=>{l(M=>({...M,[E]:T===""?void 0:T}))},N=E=>{l(T=>({...T,date_of_birth:E?dt(E,"yyyy-MM-dd"):void 0})),b(!1)},C=async E=>{var T;if(E.preventDefault(),v(null),!a.patient_unique_id||!a.full_name){v("L'ID Unique et le Nom Complet sont requis.");return}d(!0);try{const M={patient_unique_id:a.patient_unique_id.trim(),full_name:a.full_name.trim(),date_of_birth:a.date_of_birth||null,gender:a.gender||null,phone:((T=a.phone)==null?void 0:T.trim())||null};let R=null;if(r){const{error:L}=await se.from("patient").update(M).eq("id",t);R=L}else{const{error:L}=await se.from("patient").insert(M);R=L}if(R)if(R.code==="23505")v("Cet ID Unique de patient existe déjà. Veuillez en utiliser un autre.");else throw R;else e("/patients")}catch(M){console.error(`Erreur lors de ${r?"la mise à jour":"la création"} du patient:`,M),v((M instanceof Error?M.message:null)||`Une erreur est survenue lors de ${r?"la mise à jour":"l'enregistrement"}.`)}finally{d(!1)}};return f?s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsx(W,{className:"h-8 w-32"})," ",s.jsxs(Te,{className:"shadow-md",children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-6 w-3/4"}),s.jsx(W,{className:"h-4 w-full"})]}),s.jsxs(Re,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-10 w-full"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-10 w-full"})]})]})]}),s.jsxs(is,{className:"border-t px-6 py-4",children:[s.jsx(W,{className:"h-10 w-32"}),s.jsx(W,{className:"h-10 w-24 ml-auto"})]})]})]}):s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("div",{className:"mb-4",children:s.jsx(st,{to:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour à la liste"]})})}),s.jsxs(Te,{className:"shadow-md",children:[s.jsxs(Ae,{children:[s.jsxs(xt,{className:"text-xl font-semibold flex items-center gap-2",children:[r?s.jsx(Wr,{className:"h-5 w-5"}):s.jsx(D_,{className:"h-5 w-5"}),r?"Modifier le Patient":"Ajouter un Nouveau Patient"]}),s.jsx(mr,{children:r?"Mettez à jour les informations du patient ci-dessous.":"Remplissez les informations ci-dessous pour enregistrer un nouveau patient."})]}),s.jsxs("form",{onSubmit:C,children:[s.jsxs(Re,{className:"space-y-6",children:[p&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsx(Pt,{children:p})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ie,{htmlFor:"patient_unique_id",className:"font-semibold",children:["ID Unique Patient ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ge,{id:"patient_unique_id",name:"patient_unique_id",placeholder:"Ex: PID-00051",required:!0,value:a.patient_unique_id||"",onChange:j,disabled:c||r,className:Ce(r&&"bg-muted/50 cursor-not-allowed")}),r&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"L'ID Unique ne peut pas être modifié."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ie,{htmlFor:"full_name",className:"font-semibold",children:["Nom Complet ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ge,{id:"full_name",name:"full_name",placeholder:"Ex: Jean Dupont",required:!0,value:a.full_name||"",onChange:j,disabled:c})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"hidden space-y-2",children:[s.jsx(Ie,{htmlFor:"date_of_birth",className:"font-semibold",children:"Date de Naissance"}),s.jsxs(YN,{open:x,onOpenChange:b,children:[s.jsx(GN,{asChild:!0,children:s.jsxs(ne,{variant:"outline",className:Ce("w-full justify-start text-left font-normal h-10",!a.date_of_birth&&"text-muted-foreground"),disabled:c,children:[s.jsx(T_,{className:"mr-2 h-4 w-4"}),a.date_of_birth?dt(Qt(a.date_of_birth),"PPP",{locale:Xt}):s.jsx("span",{children:"Choisir une date"})]})}),s.jsx(WN,{className:"w-auto p-0",align:"start",children:s.jsx(aS,{mode:"single",selected:a.date_of_birth?Qt(a.date_of_birth):void 0,onSelect:N,initialFocus:!0,locale:Xt,captionLayout:"dropdown-buttons",fromYear:1900,toYear:new Date().getFullYear(),disabled:E=>E>new Date||E<new Date("1900-01-01")})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"gender",className:"font-semibold",children:"Genre"}),s.jsxs(Qn,{name:"gender",value:a.gender||"",onValueChange:E=>_("gender",E),disabled:c,children:[s.jsx(Jn,{id:"gender",className:"h-10",children:s.jsx(Zn,{placeholder:"Sélectionner..."})}),s.jsxs(er,{children:[s.jsx(yt,{value:"Masculin",children:"Masculin"}),s.jsx(yt,{value:"Féminin",children:"Féminin"}),s.jsx(yt,{value:"Autre",children:"Autre"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"phone",className:"font-semibold",children:"Téléphone"}),s.jsx(Ge,{id:"phone",name:"phone",type:"tel",placeholder:"Ex: +33 6 12 34 56 78",value:a.phone||"",onChange:j,disabled:c})]})]})]}),s.jsxs(is,{className:"border-t px-6 py-4 flex justify-between",children:[s.jsx(ne,{type:"submit",disabled:c,children:c?s.jsxs(s.Fragment,{children:[s.jsx($t,{className:"mr-2 h-4 w-4 animate-spin"}),r?"Mise à jour...":"Enregistrement..."]}):r?"Mettre à jour le Patient":"Enregistrer le Patient"}),s.jsx(st,{to:"/patients",children:s.jsx(ne,{type:"button",variant:"outline",disabled:c,children:"Annuler"})})]})]})]})]})};var jv="Checkbox",[XI,tH]=lr(jv),[KI,QI]=XI(jv),kS=m.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:a,checked:l,defaultChecked:c,required:d,disabled:f,value:h="on",onCheckedChange:p,form:v,...x}=e,[b,w]=m.useState(null),j=_t(t,M=>w(M)),_=m.useRef(!1),N=b?v||!!b.closest("form"):!0,[C=!1,E]=$a({prop:l,defaultProp:c,onChange:p}),T=m.useRef(C);return m.useEffect(()=>{const M=b==null?void 0:b.form;if(M){const R=()=>E(T.current);return M.addEventListener("reset",R),()=>M.removeEventListener("reset",R)}},[b,E]),s.jsxs(KI,{scope:r,state:C,disabled:f,children:[s.jsx(Je.button,{type:"button",role:"checkbox","aria-checked":Ua(C)?"mixed":C,"aria-required":d,"data-state":PS(C),"data-disabled":f?"":void 0,disabled:f,value:h,...x,ref:j,onKeyDown:ke(e.onKeyDown,M=>{M.key==="Enter"&&M.preventDefault()}),onClick:ke(e.onClick,M=>{E(R=>Ua(R)?!0:!R),N&&(_.current=M.isPropagationStopped(),_.current||M.stopPropagation())})}),N&&s.jsx(ZI,{control:b,bubbles:!_.current,name:a,value:h,checked:C,required:d,disabled:f,form:v,style:{transform:"translateX(-100%)"},defaultChecked:Ua(c)?!1:c})]})});kS.displayName=jv;var DS="CheckboxIndicator",OS=m.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:a,...l}=e,c=QI(DS,r);return s.jsx(Ar,{present:a||Ua(c.state)||c.state===!0,children:s.jsx(Je.span,{"data-state":PS(c.state),"data-disabled":c.disabled?"":void 0,...l,ref:t,style:{pointerEvents:"none",...e.style}})})});OS.displayName=DS;var ZI=e=>{const{control:t,checked:r,bubbles:a=!0,defaultChecked:l,...c}=e,d=m.useRef(null),f=bv(r),h=Pg(t);m.useEffect(()=>{const v=d.current,x=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(x,"checked").set;if(f!==r&&w){const j=new Event("click",{bubbles:a});v.indeterminate=Ua(r),w.call(v,Ua(r)?!1:r),v.dispatchEvent(j)}},[f,r,a]);const p=m.useRef(Ua(r)?!1:r);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l??p.current,...c,tabIndex:-1,ref:d,style:{...e.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ua(e){return e==="indeterminate"}function PS(e){return Ua(e)?"indeterminate":e?"checked":"unchecked"}var JI=kS,ez=OS;function ea({className:e,...t}){return s.jsx(JI,{"data-slot":"checkbox",className:Ce("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(ez,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:s.jsx(Gg,{className:"size-3.5"})})})}var tz="Separator",Pw="horizontal",nz=["horizontal","vertical"],LS=m.forwardRef((e,t)=>{const{decorative:r,orientation:a=Pw,...l}=e,c=rz(a)?a:Pw,f=r?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return s.jsx(Je.div,{"data-orientation":c,...f,...l,ref:t})});LS.displayName=tz;function rz(e){return nz.includes(e)}var sz=LS;function Gr({className:e,orientation:t="horizontal",decorative:r=!0,...a}){return s.jsx(sz,{"data-slot":"separator-root",decorative:r,orientation:t,className:Ce("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...a})}const tr=({data:e,isPreview:t})=>{const{labName:r,addressLine1:a,addressLine2:l,cityPostalCode:c,phone:d,email:f,website:h}=e;return s.jsx("div",{className:`flex flex-col items-center text-center gap-2  ${t?"p-4 border rounded-md bg-white min-h-[100px]":" "}`,children:s.jsx("div",{className:" template-heading-shadow w-full py-4 flex items-center justify-center flex-col border-slate-600 border-[1px] shadow-lg mb-2 rounded-[50%] ",children:s.jsxs("div",{className:"text-xs space-y-0.5",children:[s.jsx("p",{className:"font-bold text-sm",children:r||"[Nom Laboratoire]"}),s.jsx("p",{children:a||"[Adresse Ligne 1]"}),l&&s.jsx("p",{children:l}),c&&s.jsx("p",{children:c}),s.jsxs("p",{children:[d&&s.jsxs("span",{children:["Tél : ",d]}),d&&f&&s.jsx("span",{children:" | "}),f&&s.jsxs("span",{children:["Email : ",f]})]}),h&&s.jsx("p",{children:h})]})})})},Qa=({data:e,isPreview:t})=>{const{logoUrl:r,labName:a,addressLine1:l,addressLine2:c,cityPostalCode:d,phone:f,email:h,website:p}=e;return s.jsxs("div",{className:`flex flex-col items-center text-center gap-2 ${t?"p-4 border rounded-md bg-white min-h-[100px]":""}`,children:[s.jsx("div",{className:"mb-2",children:s.jsxs(Ac,{className:"h-16 w-16 rounded-md border",children:[s.jsx(ef,{src:r||void 0,alt:"Logo",className:"object-contain"}),s.jsx(kc,{className:"rounded-md bg-muted",children:s.jsx(gf,{className:"h-8 w-8 text-muted-foreground"})})]})}),s.jsxs("div",{className:"text-xs space-y-0.5",children:[s.jsx("p",{className:"font-bold text-sm",children:a||"[Nom Laboratoire]"}),s.jsx("p",{children:l||"[Adresse Ligne 1]"}),c&&s.jsx("p",{children:c}),d&&s.jsx("p",{children:d}),s.jsxs("p",{children:[f&&s.jsxs("span",{children:["Tél : ",f]}),f&&h&&s.jsx("span",{children:" | "}),h&&s.jsxs("span",{children:["Email : ",h]})]}),p&&s.jsx("p",{children:p})]})]})},Za=({data:e,isPreview:t})=>{const{logoUrl:r,labName:a,addressLine1:l,addressLine2:c,cityPostalCode:d,phone:f,email:h,website:p}=e;return s.jsx("div",{className:`flex flex-col items-center text-center gap-2  ${t?"p-4 border rounded-md bg-white min-h-[100px]":" "}`,children:s.jsxs("div",{className:" w-full py-2 flex items-center flex-col border-slate-600 border-[1px] shadow-lg mb-2 rounded-md ",children:[s.jsx("div",{className:"mb-2",children:s.jsxs(Ac,{className:"h-16 w-16 rounded-md border",children:[s.jsx(ef,{src:r||void 0,alt:"Logo",className:"object-contain"}),s.jsx(kc,{className:"rounded-md bg-muted",children:s.jsx(gf,{className:"h-8 w-8 text-muted-foreground"})})]})}),s.jsxs("div",{className:"text-xs space-y-0.5",children:[s.jsx("p",{className:"font-bold text-sm",children:a||"[Nom Laboratoire]"}),s.jsx("p",{children:l||"[Adresse Ligne 1]"}),c&&s.jsx("p",{children:c}),d&&s.jsx("p",{children:d}),s.jsxs("p",{children:[f&&s.jsxs("span",{children:["Tél : ",f]}),f&&h&&s.jsx("span",{children:" | "}),h&&s.jsxs("span",{children:["Email : ",h]})]}),p&&s.jsx("p",{children:p})]})]})})},Ja=({data:e,isPreview:t})=>{const{logoUrl:r,labName:a,addressLine1:l,addressLine2:c,cityPostalCode:d,phone:f,email:h,website:p}=e;return s.jsx("div",{className:`flex flex-col items-center text-center gap-2  ${t?"p-4 border rounded-md bg-white min-h-[100px]":" "}`,children:s.jsxs("div",{className:" template-heading-shadow w-full py-4 flex items-center justify-center flex-col border-slate-600 border-[1px] shadow-lg mb-2 rounded-[50%] ",children:[s.jsx("div",{className:"mb-2",children:s.jsxs(Ac,{className:"h-16 w-16 rounded-md border",children:[s.jsx(ef,{src:r||void 0,alt:"Logo",className:"object-contain"}),s.jsx(kc,{className:"rounded-md bg-muted",children:s.jsx(gf,{className:"h-8 w-8 text-muted-foreground"})})]})}),s.jsxs("div",{className:"text-xs space-y-0.5",children:[s.jsx("p",{className:"font-bold text-sm",children:a||"[Nom Laboratoire]"}),s.jsx("p",{children:l||"[Adresse Ligne 1]"}),c&&s.jsx("p",{children:c}),d&&s.jsx("p",{children:d}),s.jsxs("p",{children:[f&&s.jsxs("span",{children:["Tél : ",f]}),f&&h&&s.jsx("span",{children:" | "}),h&&s.jsxs("span",{children:["Email : ",h]})]}),p&&s.jsx("p",{children:p})]})]})})};function vp(e,t){const r=t.trim();try{if(r.startsWith("<")&&!r.startsWith("<=")){const l=parseFloat(r.substring(1).trim().replace(",","."));if(!isNaN(l))return e<l?"in-range":"out-of-range"}else if(r.startsWith(">")&&!r.startsWith(">=")){const l=parseFloat(r.substring(1).trim().replace(",","."));if(!isNaN(l))return e>l?"in-range":"out-of-range"}else if(r.startsWith("<=")||r.startsWith("≤")){const l=parseFloat(r.substring(2).trim().replace(",","."));if(!isNaN(l))return e<=l?"in-range":"out-of-range"}else if(r.startsWith(">=")||r.startsWith("≥")){const l=parseFloat(r.substring(2).trim().replace(",","."));if(!isNaN(l))return e>=l?"in-range":"out-of-range"}else if(r.includes("-")){const l=r.split("-").map(c=>parseFloat(c.trim().replace(",",".")));if(l.length===2&&!isNaN(l[0])&&!isNaN(l[1])){const c=Math.min(l[0],l[1]),d=Math.max(l[0],l[1]);return e>=c&&e<=d?"in-range":"out-of-range"}}const a=parseFloat(r.replace(",","."));if(!isNaN(a))return"indeterminate"}catch(a){console.error("Error parsing single range line:",t,a)}return"indeterminate"}function Lw(e,t,r,a,l){if(l.includes(r)||l.includes(a))return"in-range";if(e==null||t===null||t===void 0||t.trim()==="")return"indeterminate";if(t.trim()==="-"){switch(e.trim().toLocaleLowerCase()){case"0 negatif":case"0 négatif":case"negatif":case"négatif":case"négative":case"neant":case"néant":case"0":return"in-range";case"positif":case"positive":return"out-of-range"}if(!isNaN(parseFloat(e)))return"out-of-range"}const c=parseFloat(e.replace(",",".")),d=t.trim(),f=e.trim().toLowerCase(),h=!isNaN(c);if(d.includes("Homme")||d.includes("HOMME")||d.match(/^(<|>|<=|>=)\s*\d+\s*(y|a|ans?)/i))return"indeterminate";const v=d.match(/^([a-zA-Z\s][a-zA-Z\s\d]*):\s*(.*)$/),x=d.includes(":")&&d.includes(";");if(v&&!x)return"indeterminate";if(d.toLowerCase().includes("negatif:")&&d.toLowerCase().includes("positif:")&&d.includes(";")){const w=d.split(";").map(N=>N.trim()).filter(N=>N.length>0);let j=null,_=null;for(const N of w){const C=N.match(/^(.+?):\s*(.*)$/);if(C){const E=C[1].trim().toLowerCase(),T=C[2].trim();E==="negatif"?j=T:E==="positif"&&(_=T)}else return"indeterminate"}return!j||!_?(console.warn("NEGATIF/POSITIF format detected, but couldn't extract both range segments."),"indeterminate"):f==="negatif"?"in-range":f==="positif"?"out-of-range":h?vp(c,j)==="in-range"?"in-range":vp(c,_)==="in-range"?"out-of-range":"indeterminate":"indeterminate"}if(!h)return isNaN(parseFloat(d.charAt(0)))&&!["<",">","-"].some(w=>d.includes(w))?f===d.toLowerCase()?"in-range":"out-of-range":"indeterminate";try{return vp(c,d)}catch(w){return console.error("Error parsing simple range string:",d,w),"indeterminate"}}function az(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.useMemo(()=>a=>{t.forEach(l=>l(a))},t)}const kf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function no(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function _v(e){return"nodeType"in e}function xr(e){var t,r;return e?no(e)?e:_v(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Nv(e){const{Document:t}=xr(e);return e instanceof t}function Kc(e){return no(e)?!1:e instanceof xr(e).HTMLElement}function IS(e){return e instanceof xr(e).SVGElement}function ro(e){return e?no(e)?e.document:_v(e)?Nv(e)?e:Kc(e)||IS(e)?e.ownerDocument:document:document:document}const Ms=kf?m.useLayoutEffect:m.useEffect;function Sv(e){const t=m.useRef(e);return Ms(()=>{t.current=e}),m.useCallback(function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t.current==null?void 0:t.current(...a)},[])}function iz(){const e=m.useRef(null),t=m.useCallback((a,l)=>{e.current=setInterval(a,l)},[]),r=m.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function _c(e,t){t===void 0&&(t=[e]);const r=m.useRef(e);return Ms(()=>{r.current!==e&&(r.current=e)},t),r}function Qc(e,t){const r=m.useRef();return m.useMemo(()=>{const a=e(r.current);return r.current=a,a},[...t])}function Fd(e){const t=Sv(e),r=m.useRef(null),a=m.useCallback(l=>{l!==r.current&&(t==null||t(l,r.current)),r.current=l},[]);return[r,a]}function ng(e){const t=m.useRef();return m.useEffect(()=>{t.current=e},[e]),t.current}let xp={};function Zc(e,t){return m.useMemo(()=>{if(t)return t;const r=xp[e]==null?0:xp[e]+1;return xp[e]=r,e+"-"+r},[e,t])}function zS(e){return function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return a.reduce((c,d)=>{const f=Object.entries(d);for(const[h,p]of f){const v=c[h];v!=null&&(c[h]=v+e*p)}return c},{...t})}}const Ll=zS(1),Nc=zS(-1);function lz(e){return"clientX"in e&&"clientY"in e}function Ev(e){if(!e)return!1;const{KeyboardEvent:t}=xr(e.target);return t&&e instanceof t}function oz(e){if(!e)return!1;const{TouchEvent:t}=xr(e.target);return t&&e instanceof t}function rg(e){if(oz(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return lz(e)?{x:e.clientX,y:e.clientY}:null}const Sc=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Sc.Translate.toString(e),Sc.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),Iw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function cz(e){return e.matches(Iw)?e:e.querySelector(Iw)}const uz={display:"none"};function dz(e){let{id:t,value:r}=e;return we.createElement("div",{id:t,style:uz},r)}function fz(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return we.createElement("div",{id:t,style:l,role:"status","aria-live":a,"aria-atomic":!0},r)}function hz(){const[e,t]=m.useState("");return{announce:m.useCallback(a=>{a!=null&&t(a)},[]),announcement:e}}const US=m.createContext(null);function mz(e){const t=m.useContext(US);m.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function pz(){const[e]=m.useState(()=>new Set),t=m.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[m.useCallback(a=>{let{type:l,event:c}=a;e.forEach(d=>{var f;return(f=d[l])==null?void 0:f.call(d,c)})},[e]),t]}const gz={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},vz={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function xz(e){let{announcements:t=vz,container:r,hiddenTextDescribedById:a,screenReaderInstructions:l=gz}=e;const{announce:c,announcement:d}=hz(),f=Zc("DndLiveRegion"),[h,p]=m.useState(!1);if(m.useEffect(()=>{p(!0)},[]),mz(m.useMemo(()=>({onDragStart(x){let{active:b}=x;c(t.onDragStart({active:b}))},onDragMove(x){let{active:b,over:w}=x;t.onDragMove&&c(t.onDragMove({active:b,over:w}))},onDragOver(x){let{active:b,over:w}=x;c(t.onDragOver({active:b,over:w}))},onDragEnd(x){let{active:b,over:w}=x;c(t.onDragEnd({active:b,over:w}))},onDragCancel(x){let{active:b,over:w}=x;c(t.onDragCancel({active:b,over:w}))}}),[c,t])),!h)return null;const v=we.createElement(we.Fragment,null,we.createElement(dz,{id:a,value:l.draggable}),we.createElement(fz,{id:f,announcement:d}));return r?_s.createPortal(v,r):v}var An;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(An||(An={}));function Vd(){}function zw(e,t){return m.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function yz(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.useMemo(()=>[...t].filter(a=>a!=null),[...t])}const us=Object.freeze({x:0,y:0});function $S(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function BS(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function bz(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function Uw(e){let{left:t,top:r,height:a,width:l}=e;return[{x:t,y:r},{x:t+l,y:r},{x:t,y:r+a},{x:t+l,y:r+a}]}function HS(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function $w(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const wz=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const l=$w(t,t.left,t.top),c=[];for(const d of a){const{id:f}=d,h=r.get(f);if(h){const p=$S($w(h),l);c.push({id:f,data:{droppableContainer:d,value:p}})}}return c.sort(BS)},jz=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const l=Uw(t),c=[];for(const d of a){const{id:f}=d,h=r.get(f);if(h){const p=Uw(h),v=l.reduce((b,w,j)=>b+$S(p[j],w),0),x=Number((v/4).toFixed(4));c.push({id:f,data:{droppableContainer:d,value:x}})}}return c.sort(BS)};function _z(e,t){const r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),c=Math.min(t.top+t.height,e.top+e.height),d=l-a,f=c-r;if(a<l&&r<c){const h=t.width*t.height,p=e.width*e.height,v=d*f,x=v/(h+p-v);return Number(x.toFixed(4))}return 0}const Nz=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const l=[];for(const c of a){const{id:d}=c,f=r.get(d);if(f){const h=_z(f,t);h>0&&l.push({id:d,data:{droppableContainer:c,value:h}})}}return l.sort(bz)};function Sz(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function qS(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:us}function Ez(e){return function(r){for(var a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];return l.reduce((d,f)=>({...d,top:d.top+e*f.y,bottom:d.bottom+e*f.y,left:d.left+e*f.x,right:d.right+e*f.x}),{...r})}}const Cz=Ez(1);function Tz(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Rz(e,t,r){const a=Tz(t);if(!a)return e;const{scaleX:l,scaleY:c,x:d,y:f}=a,h=e.left-d-(1-l)*parseFloat(r),p=e.top-f-(1-c)*parseFloat(r.slice(r.indexOf(" ")+1)),v=l?e.width/l:e.width,x=c?e.height/c:e.height;return{width:v,height:x,top:p,right:h+v,bottom:p+x,left:h}}const Mz={ignoreTransform:!1};function so(e,t){t===void 0&&(t=Mz);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:v}=xr(e).getComputedStyle(e);p&&(r=Rz(r,p,v))}const{top:a,left:l,width:c,height:d,bottom:f,right:h}=r;return{top:a,left:l,width:c,height:d,bottom:f,right:h}}function Bw(e){return so(e,{ignoreTransform:!0})}function Az(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function kz(e,t){return t===void 0&&(t=xr(e).getComputedStyle(e)),t.position==="fixed"}function Dz(e,t){t===void 0&&(t=xr(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const c=t[l];return typeof c=="string"?r.test(c):!1})}function Df(e,t){const r=[];function a(l){if(t!=null&&r.length>=t||!l)return r;if(Nv(l)&&l.scrollingElement!=null&&!r.includes(l.scrollingElement))return r.push(l.scrollingElement),r;if(!Kc(l)||IS(l)||r.includes(l))return r;const c=xr(e).getComputedStyle(l);return l!==e&&Dz(l,c)&&r.push(l),kz(l,c)?r:a(l.parentNode)}return e?a(e):r}function FS(e){const[t]=Df(e,1);return t??null}function yp(e){return!kf||!e?null:no(e)?e:_v(e)?Nv(e)||e===ro(e).scrollingElement?window:Kc(e)?e:null:null}function VS(e){return no(e)?e.scrollX:e.scrollLeft}function YS(e){return no(e)?e.scrollY:e.scrollTop}function sg(e){return{x:VS(e),y:YS(e)}}var Bn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Bn||(Bn={}));function GS(e){return!kf||!e?!1:e===document.scrollingElement}function WS(e){const t={x:0,y:0},r=GS(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},l=e.scrollTop<=t.y,c=e.scrollLeft<=t.x,d=e.scrollTop>=a.y,f=e.scrollLeft>=a.x;return{isTop:l,isLeft:c,isBottom:d,isRight:f,maxScroll:a,minScroll:t}}const Oz={x:.2,y:.2};function Pz(e,t,r,a,l){let{top:c,left:d,right:f,bottom:h}=r;a===void 0&&(a=10),l===void 0&&(l=Oz);const{isTop:p,isBottom:v,isLeft:x,isRight:b}=WS(e),w={x:0,y:0},j={x:0,y:0},_={height:t.height*l.y,width:t.width*l.x};return!p&&c<=t.top+_.height?(w.y=Bn.Backward,j.y=a*Math.abs((t.top+_.height-c)/_.height)):!v&&h>=t.bottom-_.height&&(w.y=Bn.Forward,j.y=a*Math.abs((t.bottom-_.height-h)/_.height)),!b&&f>=t.right-_.width?(w.x=Bn.Forward,j.x=a*Math.abs((t.right-_.width-f)/_.width)):!x&&d<=t.left+_.width&&(w.x=Bn.Backward,j.x=a*Math.abs((t.left+_.width-d)/_.width)),{direction:w,speed:j}}function Lz(e){if(e===document.scrollingElement){const{innerWidth:c,innerHeight:d}=window;return{top:0,left:0,right:c,bottom:d,width:c,height:d}}const{top:t,left:r,right:a,bottom:l}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:l,width:e.clientWidth,height:e.clientHeight}}function XS(e){return e.reduce((t,r)=>Ll(t,sg(r)),us)}function Iz(e){return e.reduce((t,r)=>t+VS(r),0)}function zz(e){return e.reduce((t,r)=>t+YS(r),0)}function Uz(e,t){if(t===void 0&&(t=so),!e)return;const{top:r,left:a,bottom:l,right:c}=t(e);FS(e)&&(l<=0||c<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const $z=[["x",["left","right"],Iz],["y",["top","bottom"],zz]];class Cv{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=Df(r),l=XS(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[c,d,f]of $z)for(const h of d)Object.defineProperty(this,h,{get:()=>{const p=f(a),v=l[c]-p;return this.rect[h]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class fc{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...r)})},this.target=t}add(t,r,a){var l;(l=this.target)==null||l.addEventListener(t,r,a),this.listeners.push([t,r,a])}}function Bz(e){const{EventTarget:t}=xr(e);return e instanceof t?e:ro(e)}function bp(e,t){const r=Math.abs(e.x),a=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t?a>t.y:!1}var Vr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Vr||(Vr={}));function Hw(e){e.preventDefault()}function Hz(e){e.stopPropagation()}var Et;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Et||(Et={}));const KS={start:[Et.Space,Et.Enter],cancel:[Et.Esc],end:[Et.Space,Et.Enter,Et.Tab]},qz=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Et.Right:return{...r,x:r.x+25};case Et.Left:return{...r,x:r.x-25};case Et.Down:return{...r,y:r.y+25};case Et.Up:return{...r,y:r.y-25}}};class Tv{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new fc(ro(r)),this.windowListeners=new fc(xr(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vr.Resize,this.handleCancel),this.windowListeners.add(Vr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,a=t.node.current;a&&Uz(a),r(us)}handleKeyDown(t){if(Ev(t)){const{active:r,context:a,options:l}=this.props,{keyboardCodes:c=KS,coordinateGetter:d=qz,scrollBehavior:f="smooth"}=l,{code:h}=t;if(c.end.includes(h)){this.handleEnd(t);return}if(c.cancel.includes(h)){this.handleCancel(t);return}const{collisionRect:p}=a.current,v=p?{x:p.left,y:p.top}:us;this.referenceCoordinates||(this.referenceCoordinates=v);const x=d(t,{active:r,context:a.current,currentCoordinates:v});if(x){const b=Nc(x,v),w={x:0,y:0},{scrollableAncestors:j}=a.current;for(const _ of j){const N=t.code,{isTop:C,isRight:E,isLeft:T,isBottom:M,maxScroll:R,minScroll:L}=WS(_),H=Lz(_),$={x:Math.min(N===Et.Right?H.right-H.width/2:H.right,Math.max(N===Et.Right?H.left:H.left+H.width/2,x.x)),y:Math.min(N===Et.Down?H.bottom-H.height/2:H.bottom,Math.max(N===Et.Down?H.top:H.top+H.height/2,x.y))},I=N===Et.Right&&!E||N===Et.Left&&!T,Y=N===Et.Down&&!M||N===Et.Up&&!C;if(I&&$.x!==x.x){const ce=_.scrollLeft+b.x,te=N===Et.Right&&ce<=R.x||N===Et.Left&&ce>=L.x;if(te&&!b.y){_.scrollTo({left:ce,behavior:f});return}te?w.x=_.scrollLeft-ce:w.x=N===Et.Right?_.scrollLeft-R.x:_.scrollLeft-L.x,w.x&&_.scrollBy({left:-w.x,behavior:f});break}else if(Y&&$.y!==x.y){const ce=_.scrollTop+b.y,te=N===Et.Down&&ce<=R.y||N===Et.Up&&ce>=L.y;if(te&&!b.x){_.scrollTo({top:ce,behavior:f});return}te?w.y=_.scrollTop-ce:w.y=N===Et.Down?_.scrollTop-R.y:_.scrollTop-L.y,w.y&&_.scrollBy({top:-w.y,behavior:f});break}}this.handleMove(t,Ll(Nc(x,this.referenceCoordinates),w))}}}handleMove(t,r){const{onMove:a}=this.props;t.preventDefault(),a(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Tv.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=KS,onActivation:l}=t,{active:c}=r;const{code:d}=e.nativeEvent;if(a.start.includes(d)){const f=c.activatorNode.current;return f&&e.target!==f?!1:(e.preventDefault(),l==null||l({event:e.nativeEvent}),!0)}return!1}}];function qw(e){return!!(e&&"distance"in e)}function Fw(e){return!!(e&&"delay"in e)}class Rv{constructor(t,r,a){var l;a===void 0&&(a=Bz(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:c}=t,{target:d}=c;this.props=t,this.events=r,this.document=ro(d),this.documentListeners=new fc(this.document),this.listeners=new fc(a),this.windowListeners=new fc(xr(d)),this.initialCoordinates=(l=rg(c))!=null?l:us,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Vr.Resize,this.handleCancel),this.windowListeners.add(Vr.DragStart,Hw),this.windowListeners.add(Vr.VisibilityChange,this.handleCancel),this.windowListeners.add(Vr.ContextMenu,Hw),this.documentListeners.add(Vr.Keydown,this.handleKeydown),r){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Fw(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(qw(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:a,onPending:l}=this.props;l(a,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Vr.Click,Hz,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vr.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:a,initialCoordinates:l,props:c}=this,{onMove:d,options:{activationConstraint:f}}=c;if(!l)return;const h=(r=rg(t))!=null?r:us,p=Nc(l,h);if(!a&&f){if(qw(f)){if(f.tolerance!=null&&bp(p,f.tolerance))return this.handleCancel();if(bp(p,f.distance))return this.handleStart()}if(Fw(f)&&bp(p,f.tolerance))return this.handleCancel();this.handlePending(f,p);return}t.cancelable&&t.preventDefault(),d(h)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Et.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Fz={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Mv extends Rv{constructor(t){const{event:r}=t,a=ro(r.target);super(t,Fz,a)}}Mv.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!r.isPrimary||r.button!==0?!1:(a==null||a({event:r}),!0)}}];const Vz={move:{name:"mousemove"},end:{name:"mouseup"}};var ag;(function(e){e[e.RightClick=2]="RightClick"})(ag||(ag={}));class Yz extends Rv{constructor(t){super(t,Vz,ro(t.event.target))}}Yz.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return r.button===ag.RightClick?!1:(a==null||a({event:r}),!0)}}];const wp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Gz extends Rv{constructor(t){super(t,wp)}static setup(){return window.addEventListener(wp.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(wp.move.name,t)};function t(){}}}Gz.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;const{touches:l}=r;return l.length>1?!1:(a==null||a({event:r}),!0)}}];var hc;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(hc||(hc={}));var Yd;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Yd||(Yd={}));function Wz(e){let{acceleration:t,activator:r=hc.Pointer,canScroll:a,draggingRect:l,enabled:c,interval:d=5,order:f=Yd.TreeOrder,pointerCoordinates:h,scrollableAncestors:p,scrollableAncestorRects:v,delta:x,threshold:b}=e;const w=Kz({delta:x,disabled:!c}),[j,_]=iz(),N=m.useRef({x:0,y:0}),C=m.useRef({x:0,y:0}),E=m.useMemo(()=>{switch(r){case hc.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case hc.DraggableRect:return l}},[r,l,h]),T=m.useRef(null),M=m.useCallback(()=>{const L=T.current;if(!L)return;const H=N.current.x*C.current.x,$=N.current.y*C.current.y;L.scrollBy(H,$)},[]),R=m.useMemo(()=>f===Yd.TreeOrder?[...p].reverse():p,[f,p]);m.useEffect(()=>{if(!c||!p.length||!E){_();return}for(const L of R){if((a==null?void 0:a(L))===!1)continue;const H=p.indexOf(L),$=v[H];if(!$)continue;const{direction:I,speed:Y}=Pz(L,$,E,t,b);for(const ce of["x","y"])w[ce][I[ce]]||(Y[ce]=0,I[ce]=0);if(Y.x>0||Y.y>0){_(),T.current=L,j(M,d),N.current=Y,C.current=I;return}}N.current={x:0,y:0},C.current={x:0,y:0},_()},[t,M,a,_,c,d,JSON.stringify(E),JSON.stringify(w),j,p,R,v,JSON.stringify(b)])}const Xz={x:{[Bn.Backward]:!1,[Bn.Forward]:!1},y:{[Bn.Backward]:!1,[Bn.Forward]:!1}};function Kz(e){let{delta:t,disabled:r}=e;const a=ng(t);return Qc(l=>{if(r||!a||!l)return Xz;const c={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[Bn.Backward]:l.x[Bn.Backward]||c.x===-1,[Bn.Forward]:l.x[Bn.Forward]||c.x===1},y:{[Bn.Backward]:l.y[Bn.Backward]||c.y===-1,[Bn.Forward]:l.y[Bn.Forward]||c.y===1}}},[r,t,a])}function Qz(e,t){const r=t!=null?e.get(t):void 0,a=r?r.node.current:null;return Qc(l=>{var c;return t==null?null:(c=a??l)!=null?c:null},[a,t])}function Zz(e,t){return m.useMemo(()=>e.reduce((r,a)=>{const{sensor:l}=a,c=l.activators.map(d=>({eventName:d.eventName,handler:t(d.handler,a)}));return[...r,...c]},[]),[e,t])}var Ec;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ec||(Ec={}));var ig;(function(e){e.Optimized="optimized"})(ig||(ig={}));const Vw=new Map;function Jz(e,t){let{dragging:r,dependencies:a,config:l}=t;const[c,d]=m.useState(null),{frequency:f,measure:h,strategy:p}=l,v=m.useRef(e),x=N(),b=_c(x),w=m.useCallback(function(C){C===void 0&&(C=[]),!b.current&&d(E=>E===null?C:E.concat(C.filter(T=>!E.includes(T))))},[b]),j=m.useRef(null),_=Qc(C=>{if(x&&!r)return Vw;if(!C||C===Vw||v.current!==e||c!=null){const E=new Map;for(let T of e){if(!T)continue;if(c&&c.length>0&&!c.includes(T.id)&&T.rect.current){E.set(T.id,T.rect.current);continue}const M=T.node.current,R=M?new Cv(h(M),M):null;T.rect.current=R,R&&E.set(T.id,R)}return E}return C},[e,c,r,x,h]);return m.useEffect(()=>{v.current=e},[e]),m.useEffect(()=>{x||w()},[r,x]),m.useEffect(()=>{c&&c.length>0&&d(null)},[JSON.stringify(c)]),m.useEffect(()=>{x||typeof f!="number"||j.current!==null||(j.current=setTimeout(()=>{w(),j.current=null},f))},[f,x,w,...a]),{droppableRects:_,measureDroppableContainers:w,measuringScheduled:c!=null};function N(){switch(p){case Ec.Always:return!1;case Ec.BeforeDragging:return r;default:return!r}}}function QS(e,t){return Qc(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function eU(e,t){return QS(e,t)}function tU(e){let{callback:t,disabled:r}=e;const a=Sv(t),l=m.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(a)},[a,r]);return m.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function Of(e){let{callback:t,disabled:r}=e;const a=Sv(t),l=m.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(a)},[r]);return m.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function nU(e){return new Cv(so(e),e)}function Yw(e,t,r){t===void 0&&(t=nU);const[a,l]=m.useState(null);function c(){l(h=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=h??r)!=null?p:null}const v=t(e);return JSON.stringify(h)===JSON.stringify(v)?h:v})}const d=tU({callback(h){if(e)for(const p of h){const{type:v,target:x}=p;if(v==="childList"&&x instanceof HTMLElement&&x.contains(e)){c();break}}}}),f=Of({callback:c});return Ms(()=>{c(),e?(f==null||f.observe(e),d==null||d.observe(document.body,{childList:!0,subtree:!0})):(f==null||f.disconnect(),d==null||d.disconnect())},[e]),a}function rU(e){const t=QS(e);return qS(e,t)}const Gw=[];function sU(e){const t=m.useRef(e),r=Qc(a=>e?a&&a!==Gw&&e&&t.current&&e.parentNode===t.current.parentNode?a:Df(e):Gw,[e]);return m.useEffect(()=>{t.current=e},[e]),r}function aU(e){const[t,r]=m.useState(null),a=m.useRef(e),l=m.useCallback(c=>{const d=yp(c.target);d&&r(f=>f?(f.set(d,sg(d)),new Map(f)):null)},[]);return m.useEffect(()=>{const c=a.current;if(e!==c){d(c);const f=e.map(h=>{const p=yp(h);return p?(p.addEventListener("scroll",l,{passive:!0}),[p,sg(p)]):null}).filter(h=>h!=null);r(f.length?new Map(f):null),a.current=e}return()=>{d(e),d(c)};function d(f){f.forEach(h=>{const p=yp(h);p==null||p.removeEventListener("scroll",l)})}},[l,e]),m.useMemo(()=>e.length?t?Array.from(t.values()).reduce((c,d)=>Ll(c,d),us):XS(e):us,[e,t])}function Ww(e,t){t===void 0&&(t=[]);const r=m.useRef(null);return m.useEffect(()=>{r.current=null},t),m.useEffect(()=>{const a=e!==us;a&&!r.current&&(r.current=e),!a&&r.current&&(r.current=null)},[e]),r.current?Nc(e,r.current):us}function iU(e){m.useEffect(()=>{if(!kf)return;const t=e.map(r=>{let{sensor:a}=r;return a.setup==null?void 0:a.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function lU(e,t){return m.useMemo(()=>e.reduce((r,a)=>{let{eventName:l,handler:c}=a;return r[l]=d=>{c(d,t)},r},{}),[e,t])}function ZS(e){return m.useMemo(()=>e?Az(e):null,[e])}const Xw=[];function oU(e,t){t===void 0&&(t=so);const[r]=e,a=ZS(r?xr(r):null),[l,c]=m.useState(Xw);function d(){c(()=>e.length?e.map(h=>GS(h)?a:new Cv(t(h),h)):Xw)}const f=Of({callback:d});return Ms(()=>{f==null||f.disconnect(),d(),e.forEach(h=>f==null?void 0:f.observe(h))},[e]),l}function cU(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Kc(t)?t:e}function uU(e){let{measure:t}=e;const[r,a]=m.useState(null),l=m.useCallback(p=>{for(const{target:v}of p)if(Kc(v)){a(x=>{const b=t(v);return x?{...x,width:b.width,height:b.height}:b});break}},[t]),c=Of({callback:l}),d=m.useCallback(p=>{const v=cU(p);c==null||c.disconnect(),v&&(c==null||c.observe(v)),a(v?t(v):null)},[t,c]),[f,h]=Fd(d);return m.useMemo(()=>({nodeRef:f,rect:r,setRef:h}),[r,f,h])}const dU=[{sensor:Mv,options:{}},{sensor:Tv,options:{}}],fU={current:{}},Md={draggable:{measure:Bw},droppable:{measure:Bw,strategy:Ec.WhileDragging,frequency:ig.Optimized},dragOverlay:{measure:so}};class mc extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,a;return(r=(a=this.get(t))==null?void 0:a.node.current)!=null?r:void 0}}const hU={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new mc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Vd},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Md,measureDroppableContainers:Vd,windowRect:null,measuringScheduled:!1},mU={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Vd,draggableNodes:new Map,over:null,measureDroppableContainers:Vd},Pf=m.createContext(mU),JS=m.createContext(hU);function pU(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new mc}}}function gU(e,t){switch(t.type){case An.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case An.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case An.DragEnd:case An.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case An.RegisterDroppable:{const{element:r}=t,{id:a}=r,l=new mc(e.droppable.containers);return l.set(a,r),{...e,droppable:{...e.droppable,containers:l}}}case An.SetDroppableDisabled:{const{id:r,key:a,disabled:l}=t,c=e.droppable.containers.get(r);if(!c||a!==c.key)return e;const d=new mc(e.droppable.containers);return d.set(r,{...c,disabled:l}),{...e,droppable:{...e.droppable,containers:d}}}case An.UnregisterDroppable:{const{id:r,key:a}=t,l=e.droppable.containers.get(r);if(!l||a!==l.key)return e;const c=new mc(e.droppable.containers);return c.delete(r),{...e,droppable:{...e.droppable,containers:c}}}default:return e}}function vU(e){let{disabled:t}=e;const{active:r,activatorEvent:a,draggableNodes:l}=m.useContext(Pf),c=ng(a),d=ng(r==null?void 0:r.id);return m.useEffect(()=>{if(!t&&!a&&c&&d!=null){if(!Ev(c)||document.activeElement===c.target)return;const f=l.get(d);if(!f)return;const{activatorNode:h,node:p}=f;if(!h.current&&!p.current)return;requestAnimationFrame(()=>{for(const v of[h.current,p.current]){if(!v)continue;const x=cz(v);if(x){x.focus();break}}})}},[a,t,l,d,c]),null}function xU(e,t){let{transform:r,...a}=t;return e!=null&&e.length?e.reduce((l,c)=>c({transform:l,...a}),r):r}function yU(e){return m.useMemo(()=>({draggable:{...Md.draggable,...e==null?void 0:e.draggable},droppable:{...Md.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Md.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function bU(e){let{activeNode:t,measure:r,initialRect:a,config:l=!0}=e;const c=m.useRef(!1),{x:d,y:f}=typeof l=="boolean"?{x:l,y:l}:l;Ms(()=>{if(!d&&!f||!t){c.current=!1;return}if(c.current||!a)return;const p=t==null?void 0:t.node.current;if(!p||p.isConnected===!1)return;const v=r(p),x=qS(v,a);if(d||(x.x=0),f||(x.y=0),c.current=!0,Math.abs(x.x)>0||Math.abs(x.y)>0){const b=FS(p);b&&b.scrollBy({top:x.y,left:x.x})}},[t,d,f,a,r])}const eE=m.createContext({...us,scaleX:1,scaleY:1});var Ia;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ia||(Ia={}));const wU=m.memo(function(t){var r,a,l,c;let{id:d,accessibility:f,autoScroll:h=!0,children:p,sensors:v=dU,collisionDetection:x=Nz,measuring:b,modifiers:w,...j}=t;const _=m.useReducer(gU,void 0,pU),[N,C]=_,[E,T]=pz(),[M,R]=m.useState(Ia.Uninitialized),L=M===Ia.Initialized,{draggable:{active:H,nodes:$,translate:I},droppable:{containers:Y}}=N,ce=H!=null?$.get(H):null,te=m.useRef({initial:null,translated:null}),q=m.useMemo(()=>{var Yt;return H!=null?{id:H,data:(Yt=ce==null?void 0:ce.data)!=null?Yt:fU,rect:te}:null},[H,ce]),le=m.useRef(null),[ue,O]=m.useState(null),[G,B]=m.useState(null),ee=_c(j,Object.values(j)),k=Zc("DndDescribedBy",d),P=m.useMemo(()=>Y.getEnabled(),[Y]),V=yU(b),{droppableRects:X,measureDroppableContainers:D,measuringScheduled:U}=Jz(P,{dragging:L,dependencies:[I.x,I.y],config:V.droppable}),F=Qz($,H),K=m.useMemo(()=>G?rg(G):null,[G]),ae=kr(),ge=eU(F,V.draggable.measure);bU({activeNode:H!=null?$.get(H):null,config:ae.layoutShiftCompensation,initialRect:ge,measure:V.draggable.measure});const de=Yw(F,V.draggable.measure,ge),Se=Yw(F?F.parentElement:null),Me=m.useRef({activatorEvent:null,active:null,activeNode:F,collisionRect:null,collisions:null,droppableRects:X,draggableNodes:$,draggingNode:null,draggingNodeRect:null,droppableContainers:Y,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),at=Y.getNodeFor((r=Me.current.over)==null?void 0:r.id),nt=uU({measure:V.dragOverlay.measure}),ve=(a=nt.nodeRef.current)!=null?a:F,pe=L?(l=nt.rect)!=null?l:de:null,Pe=!!(nt.nodeRef.current&&nt.rect),be=rU(Pe?null:de),Ne=ZS(ve?xr(ve):null),Oe=sU(L?at??F:null),We=oU(Oe),Fe=xU(w,{transform:{x:I.x-be.x,y:I.y-be.y,scaleX:1,scaleY:1},activatorEvent:G,active:q,activeNodeRect:de,containerNodeRect:Se,draggingNodeRect:pe,over:Me.current.over,overlayNodeRect:nt.rect,scrollableAncestors:Oe,scrollableAncestorRects:We,windowRect:Ne}),bt=K?Ll(K,I):null,Nt=aU(Oe),Ht=Ww(Nt),Be=Ww(Nt,[de]),tt=Ll(Fe,Ht),Zt=pe?Cz(pe,Fe):null,kn=q&&Zt?x({active:q,collisionRect:Zt,droppableRects:X,droppableContainers:P,pointerCoordinates:bt}):null,Cn=HS(kn,"id"),[fn,ln]=m.useState(null),Jt=Pe?Fe:Ll(Fe,Be),qt=Sz(Jt,(c=fn==null?void 0:fn.rect)!=null?c:null,de),nr=m.useRef(null),Tn=m.useCallback((Yt,it)=>{let{sensor:J,options:xe}=it;if(le.current==null)return;const _e=$.get(le.current);if(!_e)return;const De=Yt.nativeEvent,qe=new J({active:le.current,activeNode:_e,event:De,options:xe,context:Me,onAbort(Ye){if(!$.get(Ye))return;const{onDragAbort:ot}=ee.current,ht={id:Ye};ot==null||ot(ht),E({type:"onDragAbort",event:ht})},onPending(Ye,ft,ot,ht){if(!$.get(Ye))return;const{onDragPending:Mt}=ee.current,sn={id:Ye,constraint:ft,initialCoordinates:ot,offset:ht};Mt==null||Mt(sn),E({type:"onDragPending",event:sn})},onStart(Ye){const ft=le.current;if(ft==null)return;const ot=$.get(ft);if(!ot)return;const{onDragStart:ht}=ee.current,Rt={activatorEvent:De,active:{id:ft,data:ot.data,rect:te}};_s.unstable_batchedUpdates(()=>{ht==null||ht(Rt),R(Ia.Initializing),C({type:An.DragStart,initialCoordinates:Ye,active:ft}),E({type:"onDragStart",event:Rt}),O(nr.current),B(De)})},onMove(Ye){C({type:An.DragMove,coordinates:Ye})},onEnd:lt(An.DragEnd),onCancel:lt(An.DragCancel)});nr.current=qe;function lt(Ye){return async function(){const{active:ot,collisions:ht,over:Rt,scrollAdjustedTranslate:Mt}=Me.current;let sn=null;if(ot&&Mt){const{cancelDrop:Dn}=ee.current;sn={activatorEvent:De,active:ot,collisions:ht,delta:Mt,over:Rt},Ye===An.DragEnd&&typeof Dn=="function"&&await Promise.resolve(Dn(sn))&&(Ye=An.DragCancel)}le.current=null,_s.unstable_batchedUpdates(()=>{C({type:Ye}),R(Ia.Uninitialized),ln(null),O(null),B(null),nr.current=null;const Dn=Ye===An.DragEnd?"onDragEnd":"onDragCancel";if(sn){const on=ee.current[Dn];on==null||on(sn),E({type:Dn,event:sn})}})}}},[$]),hn=m.useCallback((Yt,it)=>(J,xe)=>{const _e=J.nativeEvent,De=$.get(xe);if(le.current!==null||!De||_e.dndKit||_e.defaultPrevented)return;const qe={active:De};Yt(J,it.options,qe)===!0&&(_e.dndKit={capturedBy:it.sensor},le.current=xe,Tn(J,it))},[$,Tn]),yr=Zz(v,hn);iU(v),Ms(()=>{de&&M===Ia.Initializing&&R(Ia.Initialized)},[de,M]),m.useEffect(()=>{const{onDragMove:Yt}=ee.current,{active:it,activatorEvent:J,collisions:xe,over:_e}=Me.current;if(!it||!J)return;const De={active:it,activatorEvent:J,collisions:xe,delta:{x:tt.x,y:tt.y},over:_e};_s.unstable_batchedUpdates(()=>{Yt==null||Yt(De),E({type:"onDragMove",event:De})})},[tt.x,tt.y]),m.useEffect(()=>{const{active:Yt,activatorEvent:it,collisions:J,droppableContainers:xe,scrollAdjustedTranslate:_e}=Me.current;if(!Yt||le.current==null||!it||!_e)return;const{onDragOver:De}=ee.current,qe=xe.get(Cn),lt=qe&&qe.rect.current?{id:qe.id,rect:qe.rect.current,data:qe.data,disabled:qe.disabled}:null,Ye={active:Yt,activatorEvent:it,collisions:J,delta:{x:_e.x,y:_e.y},over:lt};_s.unstable_batchedUpdates(()=>{ln(lt),De==null||De(Ye),E({type:"onDragOver",event:Ye})})},[Cn]),Ms(()=>{Me.current={activatorEvent:G,active:q,activeNode:F,collisionRect:Zt,collisions:kn,droppableRects:X,draggableNodes:$,draggingNode:ve,draggingNodeRect:pe,droppableContainers:Y,over:fn,scrollableAncestors:Oe,scrollAdjustedTranslate:tt},te.current={initial:pe,translated:Zt}},[q,F,kn,Zt,$,ve,pe,X,Y,fn,Oe,tt]),Wz({...ae,delta:I,draggingRect:Zt,pointerCoordinates:bt,scrollableAncestors:Oe,scrollableAncestorRects:We});const bn=m.useMemo(()=>({active:q,activeNode:F,activeNodeRect:de,activatorEvent:G,collisions:kn,containerNodeRect:Se,dragOverlay:nt,draggableNodes:$,droppableContainers:Y,droppableRects:X,over:fn,measureDroppableContainers:D,scrollableAncestors:Oe,scrollableAncestorRects:We,measuringConfiguration:V,measuringScheduled:U,windowRect:Ne}),[q,F,de,G,kn,Se,nt,$,Y,X,fn,D,Oe,We,V,U,Ne]),ks=m.useMemo(()=>({activatorEvent:G,activators:yr,active:q,activeNodeRect:de,ariaDescribedById:{draggable:k},dispatch:C,draggableNodes:$,over:fn,measureDroppableContainers:D}),[G,yr,q,de,C,k,$,fn,D]);return we.createElement(US.Provider,{value:T},we.createElement(Pf.Provider,{value:ks},we.createElement(JS.Provider,{value:bn},we.createElement(eE.Provider,{value:qt},p)),we.createElement(vU,{disabled:(f==null?void 0:f.restoreFocus)===!1})),we.createElement(xz,{...f,hiddenTextDescribedById:k}));function kr(){const Yt=(ue==null?void 0:ue.autoScrollEnabled)===!1,it=typeof h=="object"?h.enabled===!1:h===!1,J=L&&!Yt&&!it;return typeof h=="object"?{...h,enabled:J}:{enabled:J}}}),jU=m.createContext(null),Kw="button",_U="Draggable";function NU(e){let{id:t,data:r,disabled:a=!1,attributes:l}=e;const c=Zc(_U),{activators:d,activatorEvent:f,active:h,activeNodeRect:p,ariaDescribedById:v,draggableNodes:x,over:b}=m.useContext(Pf),{role:w=Kw,roleDescription:j="draggable",tabIndex:_=0}=l??{},N=(h==null?void 0:h.id)===t,C=m.useContext(N?eE:jU),[E,T]=Fd(),[M,R]=Fd(),L=lU(d,t),H=_c(r);Ms(()=>(x.set(t,{id:t,key:c,node:E,activatorNode:M,data:H}),()=>{const I=x.get(t);I&&I.key===c&&x.delete(t)}),[x,t]);const $=m.useMemo(()=>({role:w,tabIndex:_,"aria-disabled":a,"aria-pressed":N&&w===Kw?!0:void 0,"aria-roledescription":j,"aria-describedby":v.draggable}),[a,w,_,N,j,v.draggable]);return{active:h,activatorEvent:f,activeNodeRect:p,attributes:$,isDragging:N,listeners:a?void 0:L,node:E,over:b,setNodeRef:T,setActivatorNodeRef:R,transform:C}}function SU(){return m.useContext(JS)}const EU="Droppable",CU={timeout:25};function TU(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:l}=e;const c=Zc(EU),{active:d,dispatch:f,over:h,measureDroppableContainers:p}=m.useContext(Pf),v=m.useRef({disabled:r}),x=m.useRef(!1),b=m.useRef(null),w=m.useRef(null),{disabled:j,updateMeasurementsFor:_,timeout:N}={...CU,...l},C=_c(_??a),E=m.useCallback(()=>{if(!x.current){x.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{p(Array.isArray(C.current)?C.current:[C.current]),w.current=null},N)},[N]),T=Of({callback:E,disabled:j||!d}),M=m.useCallback(($,I)=>{T&&(I&&(T.unobserve(I),x.current=!1),$&&T.observe($))},[T]),[R,L]=Fd(M),H=_c(t);return m.useEffect(()=>{!T||!R.current||(T.disconnect(),x.current=!1,T.observe(R.current))},[R,T]),m.useEffect(()=>(f({type:An.RegisterDroppable,element:{id:a,key:c,disabled:r,node:R,rect:b,data:H}}),()=>f({type:An.UnregisterDroppable,key:c,id:a})),[a]),m.useEffect(()=>{r!==v.current.disabled&&(f({type:An.SetDroppableDisabled,id:a,key:c,disabled:r}),v.current.disabled=r)},[a,c,r,f]),{active:d,rect:b,isOver:(h==null?void 0:h.id)===a,node:R,over:h,setNodeRef:L}}function Av(e,t,r){const a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function RU(e,t){return e.reduce((r,a,l)=>{const c=t.get(a);return c&&(r[l]=c),r},Array(e.length))}function bd(e){return e!==null&&e>=0}function MU(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function AU(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const wd={scaleX:1,scaleY:1},kU=e=>{var t;let{rects:r,activeNodeRect:a,activeIndex:l,overIndex:c,index:d}=e;const f=(t=r[l])!=null?t:a;if(!f)return null;const h=DU(r,d,l);if(d===l){const p=r[c];return p?{x:l<c?p.left+p.width-(f.left+f.width):p.left-f.left,y:0,...wd}:null}return d>l&&d<=c?{x:-f.width-h,y:0,...wd}:d<l&&d>=c?{x:f.width+h,y:0,...wd}:{x:0,y:0,...wd}};function DU(e,t,r){const a=e[t],l=e[t-1],c=e[t+1];return!a||!l&&!c?0:r<t?l?a.left-(l.left+l.width):c.left-(a.left+a.width):c?c.left-(a.left+a.width):a.left-(l.left+l.width)}const tE=e=>{let{rects:t,activeIndex:r,overIndex:a,index:l}=e;const c=Av(t,a,r),d=t[l],f=c[l];return!f||!d?null:{x:f.left-d.left,y:f.top-d.top,scaleX:f.width/d.width,scaleY:f.height/d.height}},nE="Sortable",rE=we.createContext({activeIndex:-1,containerId:nE,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:tE,disabled:{draggable:!1,droppable:!1}});function OU(e){let{children:t,id:r,items:a,strategy:l=tE,disabled:c=!1}=e;const{active:d,dragOverlay:f,droppableRects:h,over:p,measureDroppableContainers:v}=SU(),x=Zc(nE,r),b=f.rect!==null,w=m.useMemo(()=>a.map(L=>typeof L=="object"&&"id"in L?L.id:L),[a]),j=d!=null,_=d?w.indexOf(d.id):-1,N=p?w.indexOf(p.id):-1,C=m.useRef(w),E=!MU(w,C.current),T=N!==-1&&_===-1||E,M=AU(c);Ms(()=>{E&&j&&v(w)},[E,w,j,v]),m.useEffect(()=>{C.current=w},[w]);const R=m.useMemo(()=>({activeIndex:_,containerId:x,disabled:M,disableTransforms:T,items:w,overIndex:N,useDragOverlay:b,sortedRects:RU(w,h),strategy:l}),[_,x,M.draggable,M.droppable,T,w,N,h,b,l]);return we.createElement(rE.Provider,{value:R},t)}const PU=e=>{let{id:t,items:r,activeIndex:a,overIndex:l}=e;return Av(r,a,l).indexOf(t)},LU=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:l,items:c,newIndex:d,previousItems:f,previousContainerId:h,transition:p}=e;return!p||!a||f!==c&&l===d?!1:r?!0:d!==l&&t===h},IU={duration:200,easing:"ease"},sE="transform",zU=Sc.Transition.toString({property:sE,duration:0,easing:"linear"}),UU={roleDescription:"sortable"};function $U(e){let{disabled:t,index:r,node:a,rect:l}=e;const[c,d]=m.useState(null),f=m.useRef(r);return Ms(()=>{if(!t&&r!==f.current&&a.current){const h=l.current;if(h){const p=so(a.current,{ignoreTransform:!0}),v={x:h.left-p.left,y:h.top-p.top,scaleX:h.width/p.width,scaleY:h.height/p.height};(v.x||v.y)&&d(v)}}r!==f.current&&(f.current=r)},[t,r,a,l]),m.useEffect(()=>{c&&d(null)},[c]),c}function BU(e){let{animateLayoutChanges:t=LU,attributes:r,disabled:a,data:l,getNewIndex:c=PU,id:d,strategy:f,resizeObserverConfig:h,transition:p=IU}=e;const{items:v,containerId:x,activeIndex:b,disabled:w,disableTransforms:j,sortedRects:_,overIndex:N,useDragOverlay:C,strategy:E}=m.useContext(rE),T=HU(a,w),M=v.indexOf(d),R=m.useMemo(()=>({sortable:{containerId:x,index:M,items:v},...l}),[x,l,M,v]),L=m.useMemo(()=>v.slice(v.indexOf(d)),[v,d]),{rect:H,node:$,isOver:I,setNodeRef:Y}=TU({id:d,data:R,disabled:T.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...h}}),{active:ce,activatorEvent:te,activeNodeRect:q,attributes:le,setNodeRef:ue,listeners:O,isDragging:G,over:B,setActivatorNodeRef:ee,transform:k}=NU({id:d,data:R,attributes:{...UU,...r},disabled:T.draggable}),P=az(Y,ue),V=!!ce,X=V&&!j&&bd(b)&&bd(N),D=!C&&G,U=D&&X?k:null,K=X?U??(f??E)({rects:_,activeNodeRect:q,activeIndex:b,overIndex:N,index:M}):null,ae=bd(b)&&bd(N)?c({id:d,items:v,activeIndex:b,overIndex:N}):M,ge=ce==null?void 0:ce.id,de=m.useRef({activeId:ge,items:v,newIndex:ae,containerId:x}),Se=v!==de.current.items,Me=t({active:ce,containerId:x,isDragging:G,isSorting:V,id:d,index:M,items:v,newIndex:de.current.newIndex,previousItems:de.current.items,previousContainerId:de.current.containerId,transition:p,wasDragging:de.current.activeId!=null}),at=$U({disabled:!Me,index:M,node:$,rect:H});return m.useEffect(()=>{V&&de.current.newIndex!==ae&&(de.current.newIndex=ae),x!==de.current.containerId&&(de.current.containerId=x),v!==de.current.items&&(de.current.items=v)},[V,ae,x,v]),m.useEffect(()=>{if(ge===de.current.activeId)return;if(ge!=null&&de.current.activeId==null){de.current.activeId=ge;return}const ve=setTimeout(()=>{de.current.activeId=ge},50);return()=>clearTimeout(ve)},[ge]),{active:ce,activeIndex:b,attributes:le,data:R,rect:H,index:M,newIndex:ae,items:v,isOver:I,isSorting:V,isDragging:G,listeners:O,node:$,overIndex:N,over:B,setNodeRef:P,setActivatorNodeRef:ee,setDroppableNodeRef:Y,setDraggableNodeRef:ue,transform:at??K,transition:nt()};function nt(){if(at||Se&&de.current.newIndex===M)return zU;if(!(D&&!Ev(te)||!p)&&(V||Me))return Sc.Transition.toString({...p,property:sE})}}function HU(e,t){var r,a;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(a=e==null?void 0:e.droppable)!=null?a:t.droppable}}function Gd(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const qU=[Et.Down,Et.Right,Et.Up,Et.Left],FU=(e,t)=>{let{context:{active:r,collisionRect:a,droppableRects:l,droppableContainers:c,over:d,scrollableAncestors:f}}=t;if(qU.includes(e.code)){if(e.preventDefault(),!r||!a)return;const h=[];c.getEnabled().forEach(x=>{if(!x||x!=null&&x.disabled)return;const b=l.get(x.id);if(b)switch(e.code){case Et.Down:a.top<b.top&&h.push(x);break;case Et.Up:a.top>b.top&&h.push(x);break;case Et.Left:a.left>b.left&&h.push(x);break;case Et.Right:a.left<b.left&&h.push(x);break}});const p=jz({collisionRect:a,droppableRects:l,droppableContainers:h});let v=HS(p,"id");if(v===(d==null?void 0:d.id)&&p.length>1&&(v=p[1].id),v!=null){const x=c.get(r.id),b=c.get(v),w=b?l.get(b.id):null,j=b==null?void 0:b.node.current;if(j&&w&&x&&b){const N=Df(j).some((L,H)=>f[H]!==L),C=aE(x,b),E=VU(x,b),T=N||!C?{x:0,y:0}:{x:E?a.width-w.width:0,y:E?a.height-w.height:0},M={x:w.left,y:w.top};return T.x&&T.y?M:Nc(M,T)}}}};function aE(e,t){return!Gd(e)||!Gd(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function VU(e,t){return!Gd(e)||!Gd(t)||!aE(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function YU(e){const t=new Date(e);return{day:t.getDate().toString().padStart(2,"0"),month:(t.getMonth()+1).toString().padStart(2,"0"),year:t.getFullYear().toString()}}function ao({date:e}){const[t,r]=m.useState(!1),[a,l]=m.useState(YU(e)),c=m.useRef(null);let d;const f=()=>r(!0),h=w=>{const{name:j,value:_}=w.target;l(N=>({...N,[j]:_.replace(/\D/g,"")}))},p=w=>{w.key==="Enter"&&r(!1)},v=()=>{d=setTimeout(()=>r(!1),0)},x=()=>{d&&clearTimeout(d)},b=`${a.year}-${a.month}-${a.day}`;return s.jsxs("div",{className:"flex items-center justify-between  font-bold",children:[s.jsxs("p",{children:["Bamako, le"," ",t?s.jsxs("span",{ref:c,tabIndex:-1,onBlur:v,onFocus:x,children:[s.jsx("input",{type:"text",name:"day",value:a.day,onChange:h,onKeyDown:p,maxLength:2,size:2,className:"border-b border-gray-400 focus:outline-none bg-transparent w-6 text-center mx-0.5",autoFocus:!0}),"/",s.jsx("input",{type:"text",name:"month",value:a.month,onChange:h,onKeyDown:p,maxLength:2,size:2,className:"border-b border-gray-400 focus:outline-none bg-transparent w-6 text-center mx-0.5"}),"/",s.jsx("input",{type:"text",name:"year",value:a.year,onChange:h,onKeyDown:p,maxLength:4,size:4,className:"border-b border-gray-400 focus:outline-none bg-transparent w-10 text-center mx-0.5"})]}):s.jsx("span",{onClick:f,style:{cursor:"pointer"},title:"Click to edit date",children:dt(new Date(b),"dd/MM/yyyy")})]}),s.jsx("p",{children:"Le Biologiste"})]})}const GU=[{id:"template1",component:tr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],WU="template1",XU=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},KU=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},QU=()=>{const{resultId:e}=vr(),t=ir(),[r,a]=m.useState(null),[l,c]=m.useState(null),[d,f]=m.useState(null),[h,p]=m.useState([]),[v,x]=m.useState(!0),[b,w]=m.useState(!1),[j,_]=m.useState(null),[N,C]=m.useState(null),[E,T]=m.useState(null),[M,R]=m.useState(!0),L=m.useRef(null),H=yz(zw(Mv),zw(Tv,{coordinateGetter:FU})),[$,I]=m.useState({}),[Y,ce]=m.useState({}),[te,q]=m.useState(""),[le,ue]=m.useState(!1),[O,G]=m.useState(!1),[B,ee]=m.useState(""),[k,P]=m.useState(""),[V,X]=m.useState(!1),[D,U]=m.useState(null),[F,K]=m.useState([]);m.useEffect(()=>{(async()=>{const{data:xe,error:_e}=await se.from("skip_range_check").select("value, type");!_e&&xe&&K(xe)})()},[]);const[ae,ge]=m.useState(5),[de,Se]=m.useState(40),[Me,at]=m.useState(15),[nt,ve]=m.useState(10),[pe,Pe]=m.useState(35);m.useEffect(()=>{async function J(){const{data:xe,error:_e}=await se.from("result_column_widths").select("*").order("updated_at",{ascending:!1}).limit(1).single();xe&&(Se(xe.param_width),at(xe.value_width),ve(xe.unit_width),Pe(xe.ref_width))}J()},[]);const[be,Ne]=m.useState([]),[Oe,We]=m.useState([]),[Fe,bt]=m.useState([]),[Nt,Ht]=m.useState([]),[Be,tt]=m.useState([]);m.useEffect(()=>{h.length>0&&Ne(J=>{if(J.length===0)return h.map(_e=>_e.category.id);const xe=new Set(J);return h.forEach(_e=>xe.add(_e.category.id)),Array.from(xe)})},[h]),m.useEffect(()=>{h.length>0&&Ht(J=>{if(J.length===0)return h.map(_e=>_e.category.id);const xe=new Set(J);return h.forEach(_e=>xe.add(_e.category.id)),Array.from(xe)}),console.log("categoriesUnitToShow:",Nt)},[h]),m.useEffect(()=>{h.length>0&&tt(J=>{if(J.length===0)return h.map(_e=>_e.category.id);const xe=new Set(J);return h.forEach(_e=>xe.add(_e.category.id)),Array.from(xe)}),console.log("categoriesRefToShow:",Be)},[h]);const Zt=J=>{Ht(xe=>xe.includes(J)?xe.filter(_e=>_e!==J):[...xe,J])},kn=J=>{tt(xe=>xe.includes(J)?xe.filter(_e=>_e!==J):[...xe,J])},Cn=J=>{Ne(xe=>xe.includes(J)?xe.filter(_e=>_e!==J):[...xe,J])};m.useEffect(()=>{if(h.length>0){console.log("groupedResults:",h);const J=h.flatMap(xe=>xe.testTypes.flatMap(_e=>_e.parameters.map(De=>De.id)));console.log("parametersIds:",J)}},[h]);const fn=J=>{We(xe=>xe.includes(J)?xe.filter(_e=>_e!==J):[...xe,J])};m.useEffect(()=>{if(h.length>0){const J=h.flatMap(xe=>xe.category.id);console.log("testTypesIds:",J),bt(J)}console.log("testTypesToPrint:",Fe)},[h]);const ln=J=>{bt(xe=>xe.includes(J)?xe.filter(_e=>_e!==J):[...xe,J])},Jt=m.useMemo(()=>{var xe;const J=(E==null?void 0:E.selected_template)||WU;return((xe=GU.find(_e=>_e.id===J))==null?void 0:xe.component)||tr},[E]),qt=m.useMemo(()=>({logoUrl:(E==null?void 0:E.logo_url)||null,labName:E==null?void 0:E.lab_name,addressLine1:E==null?void 0:E.address_line1,addressLine2:E==null?void 0:E.address_line2,cityPostalCode:E==null?void 0:E.city_postal_code,phone:E==null?void 0:E.phone,email:E==null?void 0:E.email,website:E==null?void 0:E.website}),[E]),nr=m.useCallback(async()=>{if(!e){_("ID du résultat manquant."),x(!1);return}x(!0),_(null),C(null),a(null),c(null),f(null),p([]),T(null);try{const{data:J,error:xe}=await se.from("patient_result").select("*").eq("id",e).single();if(xe)throw xe;if(!J)throw new Error("Résultat non trouvé.");a(J);const[_e,De,qe]=await Promise.all([se.from("patient").select("*").eq("id",J.patient_id).single(),se.from("doctor").select("*").eq("id",J.doctor_id).single(),se.from("print_header_config").select("*").limit(1).maybeSingle()]);_e.error&&console.warn("Erreur chargement patient:",_e.error.message),De.error&&console.warn("Erreur chargement médecin:",De.error.message),c(_e.data),f(De.data),qe.error&&console.warn("Erreur chargement config en-tête:",qe.error.message),T(qe.data),R(!1);const{data:lt,error:Ye}=await se.from("result_value").select(`
                    value,
                    test_parameter: test_parameter_id (
                        *,
                        test_type: test_type_id (
                            *,
                            category: category_id (id, name)
                        )
                    )
                `).eq("patient_result_id",e);if(Ye)throw Ye;const ft=new Map;(lt||[]).forEach(ht=>{const Rt=ht.test_parameter;if(Rt&&Rt.test_type&&Rt.test_type.category){const Mt=Rt.test_type.category.id,sn=Rt.test_type.category.name,Dn=Rt.test_type.id,on=Rt.test_type.name;ft.has(Mt)||ft.set(Mt,{category:{...Rt.test_type.category,created_at:"",updated_at:""},testTypes:[]});const wn=ft.get(Mt);let fe=wn.testTypes.find(Ee=>Ee.testType.id===Dn);fe||(fe={testType:{...Rt.test_type,category_id:Mt,category:null},parameters:[]},wn.testTypes.push(fe)),fe.parameters.push({...Rt,resultValue:ht.value,test_type:null})}else console.warn("Données de paramètre/type/catégorie manquantes pour une valeur:",ht)}),ft.forEach(ht=>{ht.testTypes.forEach(Rt=>{Rt.parameters.sort((Mt,sn)=>Mt.order!==sn.order?Mt.order-sn.order:Mt.name.localeCompare(sn.name))}),ht.testTypes.sort((Rt,Mt)=>Rt.testType.name.localeCompare(Mt.testType.name))});const ot=Array.from(ft.values()).sort((ht,Rt)=>ht.category.name.localeCompare(Rt.category.name));p(ot)}catch(J){console.error("Erreur chargement détails du résultat:",J),_(J.message||"Une erreur est survenue lors du chargement du résultat.")}finally{x(!1)}},[e]);m.useEffect(()=>{nr()},[nr]),m.useEffect(()=>{r!=null&&r.description&&q(r.description)},[r]),m.useEffect(()=>{ee((r==null?void 0:r.normal_price)!=null?String(r.normal_price):""),P((r==null?void 0:r.insurance_price)!=null?String(r.insurance_price):"")},[r]);const Tn=m.useCallback(async J=>{if(e){ue(!0);try{const{error:xe}=await se.from("patient_result").update({description:J}).eq("id",e);if(xe)throw xe}catch(xe){console.error("Error saving description:",xe)}finally{ue(!1)}}},[e]);m.useEffect(()=>{const J=setTimeout(()=>{te!==(r==null?void 0:r.description)&&Tn(te)},1e3);return()=>clearTimeout(J)},[te,r==null?void 0:r.description,Tn]);const hn=m.useCallback(async()=>{X(!0),U(null);try{const J=B!==""?Number(B):null,xe=k!==""?Number(k):null;if(B!==""&&isNaN(J)||k!==""&&isNaN(xe)){U("Les prix doivent être des nombres valides."),X(!1);return}const{error:_e,data:De}=await se.from("patient_result").update({normal_price:J,insurance_price:xe}).eq("id",r.id).select().single();if(_e)throw _e;a(qe=>qe&&{...qe,normal_price:J,insurance_price:xe}),G(!1)}catch(J){U(J.message||"Erreur lors de la sauvegarde des prix.")}finally{X(!1)}},[r,B,k]),yr=async J=>{if(!(!r||J===r.status)){w(!0),C(null);try{const{data:xe,error:_e}=await se.from("patient_result").update({status:J}).eq("id",r.id).select().single();if(_e)throw _e;a(xe||(De=>De?{...De,status:J}:null))}catch(xe){console.error("Erreur mise à jour statut:",xe),C(xe.message||"Impossible de mettre à jour le statut.")}finally{w(!1)}}},bn=()=>{window.print()},ks=J=>{const{active:xe,over:_e}=J;_e&&xe.id!==_e.id&&p(De=>{const qe=De.findIndex(Ye=>Ye.category.id===xe.id),lt=De.findIndex(Ye=>Ye.category.id===_e.id);return qe===-1||lt===-1?De:Av(De,qe,lt)})},kr=(J,xe)=>{I(_e=>({..._e,[J]:xe}))},Yt=J=>{ce(xe=>{const _e=xe[J],De={...xe};let qe="indeterminate";for(const lt of h){for(const Ye of lt.testTypes){const ft=Ye.parameters.find(ot=>ot.id===J);if(ft){qe=Lw(ft.resultValue,ft.reference_range,lt.category.name,Ye.testType.name,F.map(({value:ot})=>ot));break}}if(qe!=="indeterminate")break}return _e===void 0?De[J]="off":_e==="off"?De[J]="on":_e==="on"?De[J]="warn":delete De[J],De})},it=(J,xe,_e,De)=>{const qe=J;return s.jsxs("div",{className:Ce("flex items-start space-x-3",De),children:[s.jsx(qe,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:xe}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:_e||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})};return v||M?s.jsxs("div",{className:"space-y-6",children:[s.jsx(W,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-20 w-full"})})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-20 w-full"})})]})]}):j?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(st,{to:r!=null&&r.patient_id?`/patients/${r.patient_id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsxs(Pt,{children:[j," ",s.jsx(ne,{variant:"link",onClick:nr,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):r?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(st,{to:l?`/patients/${l.id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour ",l?`à ${l.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(as,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(st,{to:`/results/${e}/edit`,children:s.jsxs(ne,{variant:"secondary",size:"sm",children:[s.jsx(Wr,{className:"mr-2 h-4 w-4"})," Modifier"]})}),s.jsxs(ne,{variant:"outline",size:"sm",onClick:bn,disabled:v,children:[s.jsx(vf,{className:"mr-2 h-4 w-4"})," Imprimer"]}),s.jsxs(ne,{variant:"outline",size:"sm",disabled:!0,children:[s.jsx(SP,{className:"mr-2 h-4 w-4"})," Télécharger"]})]})]}),s.jsxs("div",{ref:L,className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[E?s.jsx("div",{className:"mb-6 print:mb-4",children:s.jsx(Jt,{data:qt,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Dt,{variant:"default",className:"mb-6 print:hidden",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"En-tête Manquant"}),s.jsxs(Pt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(st,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Gr,{className:"my-4 print:hidden"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs(Te,{className:"overflow-hidden print:shadow-none",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[it(Xe,"NOM PRENOM",l==null?void 0:l.full_name),it(Xe,"IDENTIFIANT Unique",l==null?void 0:l.patient_unique_id),it(vn,"Date Naissance",l!=null&&l.date_of_birth?dt(Qt(l.date_of_birth),"P",{locale:Xt}):null),s.jsx("div",{className:"hidden print:block",children:it(vn,"Date Résultat",r.result_date?dt(Qt(r.result_date),"Pp",{locale:Xt}):null)})]})]}),s.jsxs(Te,{className:"overflow-hidden print:shadow-none _print:border-none",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[it(Bt,"NOM PRENOM",d==null?void 0:d.full_name),it(xn,"Téléphone",d==null?void 0:d.phone),it(Xe,"Provenance",d==null?void 0:d.hospital)]})]}),s.jsxs(Te,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[it(vn,"Date Résultat",r.result_date?dt(Qt(r.result_date),"Pp",{locale:Xt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),O?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:B,onChange:J=>ee(J.target.value),disabled:V}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:B,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),O?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:k,onChange:J=>P(J.target.value),disabled:V}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:k,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:O?s.jsxs(s.Fragment,{children:[s.jsxs(ne,{size:"xs",variant:"secondary",onClick:hn,disabled:V,children:[V?s.jsx($t,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>G(!1),disabled:V,children:"Annuler"})]}):s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>G(!0),children:"Modifier Prix"})}),D&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:D})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Xe,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Qn,{value:r.status??"",onValueChange:J=>yr(J),disabled:b,children:[s.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",s.jsx(Zn,{placeholder:"Changer statut..."})," "]}),s.jsxs(er,{children:[s.jsx(yt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i3,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(yt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(yt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ii,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),b&&s.jsx($t,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),N&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:N}),s.jsx(ls,{variant:XU(r.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:KU(r.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 hidden print:grid",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Bt,{className:"h-4 w-4"})," Patient"]}),it(Xe,"NOM PRENOM",l==null?void 0:l.full_name),it(Xe,"ID Unique",l==null?void 0:l.patient_unique_id),it(xn,"Téléphone",l==null?void 0:l.phone)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),it(Bt,"NOM PRENOM",d==null?void 0:d.full_name),it(xn,"Téléphone",d==null?void 0:d.phone),it(Xe,"Provenance",d==null?void 0:d.hospital)]})]}),h.length>1&&s.jsxs("div",{className:"my-6 print:hidden",children:[s.jsx(Ie,{className:"text-sm font-medium text-muted-foreground mb-2 block",children:"Réorganiser les Catégories (Glisser-Déposer) :"}),s.jsx(wU,{sensors:H,collisionDetection:wz,onDragEnd:ks,children:s.jsx(OU,{items:h.map(J=>J.category.id),strategy:kU,children:s.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(J=>s.jsx(ZU,{category:J.category},J.category.id))})})}),s.jsx(Gr,{className:"mt-6"})]}),s.jsxs("div",{className:"flex gap-4 mb-2 print:hidden items-end",children:[s.jsxs("div",{className:"flex flex-col text-xs",children:[s.jsx("label",{htmlFor:"paramWidth",children:"Paramètre (%)"}),s.jsx("input",{id:"paramWidth",type:"number",min:5,max:80,value:de,onChange:J=>Se(Number(J.target.value)),className:"border px-2 py-1 w-16 rounded"})]}),s.jsxs("div",{className:"flex flex-col text-xs",children:[s.jsx("label",{htmlFor:"valueWidth",children:"Valeur (%)"}),s.jsx("input",{id:"valueWidth",type:"number",min:5,max:80,value:Me,onChange:J=>at(Number(J.target.value)),className:"border px-2 py-1 w-16 rounded"})]}),s.jsxs("div",{className:"flex flex-col text-xs",children:[s.jsx("label",{htmlFor:"unitWidth",children:"Unité (%)"}),s.jsx("input",{id:"unitWidth",type:"number",min:5,max:80,value:nt,onChange:J=>ve(Number(J.target.value)),className:"border px-2 py-1 w-16 rounded"})]}),s.jsxs("div",{className:"flex flex-col text-xs",children:[s.jsx("label",{htmlFor:"refWidth",children:"Réf. (%)"}),s.jsx("input",{id:"refWidth",type:"number",min:5,max:80,value:pe,onChange:J=>Pe(Number(J.target.value)),className:"border px-2 py-1 w-16 rounded"})]})]}),s.jsx("div",{className:"space-y-8 print:space-y-4",children:h.map(J=>{const xe=$[J.category.id]??!1,_e=be.includes(J.category.id);return s.jsxs("div",{className:Ce(xe&&"print-force-break-before",!_e&&"print:hidden"),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3 print:mb-2",children:[" ",s.jsxs("h2",{className:"text-xl font-bold uppercase mx-auto tracking-tight  print:text-center",children:[" ",J.category.name]}),s.jsx(Gr,{className:"flex-1 print:hidden"}),s.jsxs("div",{className:"flex items-center space-x-2 ml-auto print:hidden pl-4",children:[s.jsx(ea,{id:`break-${J.category.id}`,checked:xe,onCheckedChange:De=>{const qe=De===!0;kr(J.category.id,qe)},"aria-label":"Forcer saut de page avant"}),s.jsxs(Ie,{htmlFor:`break-${J.category.id}`,className:"text-xs font-medium text-muted-foreground cursor-pointer flex items-center gap-1",title:"Forcer un saut de page avant cette catégorie à l'impression",children:[s.jsx(iP,{className:"h-3.5 w-3.5"})," Saut Page Avant"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-auto print:hidden pl-4",children:[s.jsx(ea,{id:`print-${J.category.id}`,checked:be.includes(J.category.id),onCheckedChange:De=>{Cn(J.category.id)},"aria-label":"Inclure dans l'impression"}),s.jsx(Ie,{htmlFor:`print-${J.category.id}`,className:"text-xs font-medium text-muted-foreground cursor-pointer flex items-center gap-1",title:"Inclure cette catégorie dans l'impression",children:"Imprimer"})]})]}),s.jsxs(aa,{className:"print:text-xs",children:[s.jsx(ia,{className:"bg-muted/10 print:bg-gray-300 text-black",children:s.jsxs(Vt,{children:[s.jsx(pt,{style:{width:`${de}%`},className:"pl-4 print:pl-1",children:"Paramètre"}),s.jsx(pt,{style:{width:`${Me}%`},className:Ce("pl-2 print:pl-1",Nt.includes(J.category.id)&&Be.includes(J.category.id)?"":"do-something"),children:"Valeur"}),s.jsx(pt,{style:{width:`${nt}%`},className:"pl-2 print:pl-1 cursor-pointer",onClick:()=>{Zt(J.category.id)},children:Nt.includes(J.category.id)?"Unité":""}),s.jsx(pt,{style:{width:`${pe}%`},className:"pr-4 print:pr-1 cursor-pointer",onClick:()=>{kn(J.category.id)},children:Be.includes(J.category.id)?"Réf.":""})]})}),s.jsxs(la,{children:[J.testTypes.length===0&&s.jsx(Vt,{children:s.jsx(Qe,{colSpan:4,className:"h-10 text-center text-xs italic text-muted-foreground",children:"(Aucun type de test dans cette catégorie)"})}),J.testTypes.map(De=>s.jsxs(we.Fragment,{children:[De.parameters.length>1&&s.jsx(Vt,{className:Ce("bg-muted/50 print:bg-gray-100  print:break-inside-avoid",Fe.includes(De.testType.id)&&"!bg-red-400 print:hidden"),children:s.jsx(Qe,{colSpan:4,className:"py-1.5 px-4 print:px-1 font-semibold text-sm print:text-xs text-foreground print:text-black cursor-pointer",onClick:()=>ln(De.testType.id),children:De.testType.name})}),De.parameters.length>0?s.jsxs(s.Fragment,{children:[De.parameters.map(qe=>{var ht,Rt;const lt=Lw(qe.resultValue,qe.reference_range,J.category.name,De.testType.name,F.map(({value:Mt})=>Mt)),Ye=Y[qe.id];let ft="",ot="";return Ye==="on"?(ft="result-out-of-range",ot="font-bold text-red-700 dark:text-red-400 print:text-red-700"):Ye==="off"?ft="":Ye==="warn"?ft="result-indeterminate-range":lt==="out-of-range"?(ft="result-out-of-range",ot="font-bold text-red-700 dark:text-red-400 print:text-red-700"):lt==="indeterminate"?ft="result-indeterminate-range":ft="",s.jsxs(Vt,{className:Ce("print:even:bg-white print:break-inside-avoid  ",Oe.length>0&&Oe.includes(qe.id)?"print:hidden":""),children:[s.jsx(Qe,{style:{width:`${de}%`},className:Ce("font-medium text-black pl-6 print:pl-2 cursor-pointer",Oe.includes(qe.id)?"text-red-400":""),dangerouslySetInnerHTML:{__html:qe.name},onClick:()=>fn(qe.id)}),s.jsx(Qe,{style:{width:`${Me}%`},className:Ce("pl-2 print:pl-1 cursor-pointer hover:bg-muted/50","cursor-pointer hover:bg-black/5 dark:hover:bg-white/5",ot,ft==="result-indeterminate-range"&&ft),onClick:()=>Yt(qe.id),title:"Cliquer pour changer le surlignage",children:s.jsx("p",{className:` inline-block px-2 mx-auto ${ft}`,children:qe.resultValue})}),s.jsx(Qe,{style:{width:`${nt}%`},className:"pl-2 print:pl-1 text-black",dangerouslySetInnerHTML:{__html:qe.unit||"-"}}),s.jsxs(Qe,{style:{width:`${pe}%`},className:"text-black pr-4 print:pr-1 !whitespace-pre-line",children:[!qe.reference_range&&"-",qe.reference_range==="NEGATIF"&&"-",((ht=qe.reference_range)==null?void 0:ht.includes("style"))&&s.jsx("div",{dangerouslySetInnerHTML:{__html:qe.reference_range}}),qe.reference_range!=="NEGATIF"&&!((Rt=qe.reference_range)!=null&&Rt.includes("style"))&&qe.reference_range&&qe.reference_range.split(";").map((Mt,sn)=>s.jsx("div",{children:Mt},sn))]})]},qe.id)}),De.testType.description&&s.jsx(Vt,{children:s.jsx(Qe,{colSpan:4,className:"py-2 px-6 print:px-2 text-sm print:text-xs",children:s.jsx("div",{dangerouslySetInnerHTML:{__html:De.testType.description}})})})]}):s.jsx(s.Fragment,{})]},De.testType.id)),J.testTypes.length>0&&J.testTypes.every(De=>De.parameters.length===0)&&s.jsx(Vt,{children:s.jsx(Qe,{colSpan:4,className:"h-10 text-center text-xs italic text-muted-foreground",children:"(Aucun paramètre défini pour les tests de cette catégorie)"})})]})]})]},J.category.id)})}),s.jsxs(Te,{className:"mt-8 print:hidden",children:[s.jsx(Ae,{className:"pb-2",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(as,{className:"h-4 w-4"}),"Description du résultat"]})}),s.jsx(Re,{children:s.jsxs("div",{className:"relative",children:[s.jsx("textarea",{value:te,onChange:J=>q(J.target.value),className:"w-full min-h-[100px] p-2 border rounded-md resize-y",placeholder:"Entrez une description pour ce résultat..."}),le&&s.jsx("div",{className:"absolute right-2 top-2",children:s.jsx($t,{className:"h-4 w-4 animate-spin text-muted-foreground"})})]})})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-2 print:hidden",children:[s.jsx("label",{htmlFor:"marginTopControl",className:"text-xs",children:"Décalage vertical (mt):"}),s.jsx("input",{id:"marginTopControl",type:"number",min:0,max:20,value:ae,onChange:J=>ge(Number(J.target.value)),className:"border px-2 py-1 text-xs w-16 rounded"})]}),s.jsxs("div",{className:"text-sm text-black print:block print:mt-4",style:{marginTop:`${ae*.25}rem`},children:[s.jsx("div",{className:"font-bold",children:te.split(`
`).map((J,xe)=>s.jsx("div",{children:J},xe))}),s.jsx("div",{className:"mt-4",children:s.jsx(ao,{date:r.result_date})}),s.jsxs("div",{className:"mt-[200px] flex flex-wrap flex-row items-center space-x-2 print:hidden",children:[s.jsx("div",{className:"",children:s.jsx(ne,{onClick:()=>t(`/protidogramme/${e}`),children:"Protidogramme"})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(ne,{onClick:()=>t(`/atb/${e}`),children:"ATB"})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(ne,{onClick:()=>t(`/ecb/${e}`),children:"ECB"})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(ne,{onClick:()=>t(`/vhb/${e}`),children:"VHB"})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(ne,{onClick:()=>t(`/vih/${e}`),children:"VIH"})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(ne,{onClick:()=>t(`/anapath/${e}`),children:"Anapath"})})]})]})]})," "]}):s.jsx("div",{children:"Résultat non trouvé."})},ZU=({category:e})=>{const{attributes:t,listeners:r,setNodeRef:a,transform:l,transition:c,isDragging:d}=BU({id:e.id}),f={transform:Sc.Transform.toString(l),transition:c,opacity:d?.7:1,zIndex:d?10:void 0};return s.jsx("div",{ref:a,style:f,...t,children:s.jsxs(ne,{variant:"secondary",size:"sm",className:"cursor-grab touch-none flex items-center gap-1.5",children:[s.jsx("span",{...r,"aria-label":`Réorganiser ${e.name}`,children:s.jsx(RP,{className:"h-4 w-4 text-muted-foreground"})}),e.name]})})},Qw=()=>{const{patientId:e,resultId:t}=vr(),r=ir(),a=!!t,[l,c]=m.useState(null),[d,f]=m.useState(!1),[h,p]=m.useState(""),[v,x]=m.useState(e||null),[b,w]=m.useState([]),[j,_]=m.useState([]),[N,C]=m.useState([]),[E,T]=m.useState(void 0),[M,R]=m.useState(void 0),[L,H]=m.useState(new Date),[$,I]=m.useState(new Map),[Y,ce]=m.useState(""),[te,q]=m.useState(!0),[le,ue]=m.useState(!1),[O,G]=m.useState(null),[B,ee]=m.useState(!1),[k,P]=m.useState([]),[V,X]=m.useState(""),[D,U]=m.useState(""),F=qc(Y,250),K=m.useCallback(async()=>{if(t){q(!0),G(null);try{const[ve,pe,Pe,be]=await Promise.all([se.from("patient_result").select("*").eq("id",t).single(),se.from("result_value").select("id, value, test_parameter_id, test_parameter:test_parameter_id(test_type_id, test_type:test_type_id(id, name))").eq("patient_result_id",t),se.from("doctor").select("id, full_name").order("full_name"),se.from("test_type").select("id, name, category_id").order("name")]);if(ve.error)throw ve.error;if(!ve.data)throw new Error("Résultat non trouvé.");const Ne=ve.data;if(c(ve.data.patient),R(ve.data.doctor_id),H(ve.data.result_date?new Date(ve.data.result_date):void 0),x(ve.data.patient_id),P(pe.data||[]),X(ve.data.normal_price??""),U(ve.data.insurance_price??""),f(!!ve.data.isFree),p(ve.data.notes??""),Pe.error)throw Pe.error;if(be.error)throw be.error;if(w(Pe.data||[]),_(be.data||[]),pe.error)throw pe.error;const Oe=pe.data||[],We=new Map,Fe=[...new Set(Oe.map(Ht=>{var Be,tt;return(tt=(Be=Ht.test_parameter)==null?void 0:Be.test_type)==null?void 0:tt.id}).filter(Boolean))],{data:bt,error:Nt}=await se.from("test_parameter").select("*, test_type:test_type_id(id, name), order").in("test_type_id",Fe);if(Nt)throw Nt;Fe.forEach(Ht=>{var kn,Cn,fn;const Be=Oe.find(ln=>{var Jt,qt;return((qt=(Jt=ln.test_parameter)==null?void 0:Jt.test_type)==null?void 0:qt.id)===Ht}),tt=((Cn=(kn=Be==null?void 0:Be.test_parameter)==null?void 0:kn.test_type)==null?void 0:Cn.name)||"Type Inconnu",Zt=(bt||[]).filter(ln=>ln.test_type_id===Ht);We.set(Ht,{id:Ht,name:tt,category_id:((fn=Zt[0])==null?void 0:fn.test_type_id)||"",created_at:"",updated_at:"",parameters:Zt.map(ln=>{const Jt=Oe.find(qt=>qt.test_parameter_id===ln.id);return{...ln,resultValue:(Jt==null?void 0:Jt.value)||"",isVisible:!0,originalValueId:(Jt==null?void 0:Jt.id)||null}}),loadingParams:!1,errorLoadingParams:!1})}),I(We)}catch(ve){console.error("Erreur chargement données pour modification:",ve),G(ve.message||"Impossible de charger les données pour la modification.")}finally{q(!1)}}},[t]),ae=m.useCallback(async()=>{if(e){q(!0),G(null);try{const[ve,pe,Pe]=await Promise.all([se.from("patient").select("*").eq("id",e).single(),se.from("doctor").select("id, full_name").order("full_name"),se.from("test_type").select("id, name, category_id").order("name")]);if(ve.error)throw ve.error;if(!ve.data)throw new Error("Patient non trouvé pour la création.");if(pe.error)throw pe.error;if(Pe.error)throw Pe.error;c(ve.data),x(e),w(pe.data||[]),_(Pe.data||[]),X(""),U("")}catch(ve){console.error("Erreur chargement données pour création:",ve),G(ve.message||"Impossible de charger les informations nécessaires.")}finally{q(!1)}}},[e]);m.useEffect(()=>{(async()=>{const{data:pe,error:Pe}=await se.from("category").select("id, name").order("name");if(Pe){G("Erreur lors du chargement des catégories");return}C(pe||[])})()},[]),m.useEffect(()=>{a?K():ae()},[a,K,ae]);const ge=m.useMemo(()=>{if(E)return j.filter(ve=>ve.category_id===E);{if(!F)return j;const ve=F.toLowerCase();return j.filter(pe=>pe.name.toLowerCase().includes(ve))}},[j,F,E]),de=m.useCallback(async(ve,pe)=>{const Pe=j.find(be=>be.id===pe);if(Pe)if(ve===!0){I(be=>{const Ne=new Map(be),Oe=Ne.get(pe),We={...Oe||Pe,parameters:(Oe==null?void 0:Oe.parameters)||[],loadingParams:!0,errorLoadingParams:!1};return Ne.set(pe,We),Ne});try{const{data:be,error:Ne}=await se.from("test_parameter").select("*, test_type:test_type_id(id, name), order").eq("test_type_id",pe).order("order");if(Ne)throw Ne;I(Oe=>{const We=new Map(Oe),Fe=We.get(pe);if(Fe){const bt=new Map(Fe.parameters.map(Be=>[Be.id,Be])),Nt=(be||[]).map(Be=>{const tt=bt.get(Be.id);return{...Be,resultValue:(tt==null?void 0:tt.resultValue)||"",isVisible:(tt==null?void 0:tt.isVisible)!==!1,originalValueId:(tt==null?void 0:tt.originalValueId)||null}}),Ht={...Fe,parameters:Nt,loadingParams:!1,errorLoadingParams:!1};return We.set(pe,Ht),We}return Oe})}catch(be){console.error(`Erreur chargement paramètres pour ${Pe.name}:`,be),I(Ne=>{const Oe=new Map(Ne),We=Oe.get(pe);if(We){const Fe={...We,loadingParams:!1,errorLoadingParams:!0};return Oe.set(pe,Fe),Oe}return Ne}),G(Ne=>Ne?`${Ne}
Impossible de charger les paramètres pour ${Pe.name}.`:`Impossible de charger les paramètres pour ${Pe.name}.`)}}else I(be=>{const Ne=new Map(be);return Ne.delete(pe),Ne})},[j]),Se=(ve,pe,Pe)=>{I(be=>{const Ne=new Map(be),Oe=Ne.get(ve);if(Oe){const We=Oe.parameters.map(bt=>bt.id===pe?{...bt,resultValue:Pe}:bt),Fe={...Oe,parameters:We};return Ne.set(ve,Fe),Ne}return be})},Me=(ve,pe)=>{I(Pe=>{const be=new Map(Pe),Ne=be.get(ve);if(Ne){const Oe=Ne.parameters.map(Fe=>Fe.id===pe?{...Fe,isVisible:!1}:Fe),We={...Ne,parameters:Oe};return be.set(ve,We),be}return Pe})},at=async ve=>{if(ve.preventDefault(),G(null),!v){G("Erreur: ID du patient non défini.");return}if(!M){G("Veuillez sélectionner un médecin prescripteur.");return}if(!L){G("Veuillez sélectionner la date du résultat.");return}if($.size===0&&!a){G("Veuillez sélectionner au moins un type de test.");return}if(V!==""&&isNaN(Number(V))){G("Le prix normal doit être un nombre valide.");return}if(D!==""&&isNaN(Number(D))){G("Le prix assurance doit être un nombre valide.");return}ue(!0);try{const pe={patient_id:v,doctor_id:M,result_date:dt(L,"yyyy-MM-dd'T'HH:mm:ssXXX")};V!==""&&(pe.normal_price=Number(V)),D!==""&&(pe.insurance_price=Number(D)),pe.isFree=d,pe.notes=h;const{data:Pe,error:be}=await(a?se.from("patient_result").update(pe).eq("id",t).select().single():se.from("patient_result").insert(pe).select().single());if(be)throw be;const Ne=Pe==null?void 0:Pe.id;if(!Ne)throw new Error("Erreur lors de l'enregistrement de l'en-tête du résultat (ID manquant).");const Oe=new Map,We=new Set;$.forEach(Be=>{Be.parameters.forEach(tt=>{tt.isVisible!==!1&&(We.add(tt.id),tt.resultValue!==void 0&&tt.resultValue.trim()!==""&&Oe.set(tt.id,{value:tt.resultValue.trim(),test_parameter_id:tt.id}))})});const Fe=new Map(k.map(Be=>[Be.test_parameter_id,Be])),bt=[],Nt=[],Ht=[];if(k.forEach(Be=>{(!We.has(Be.test_parameter_id)||!Oe.has(Be.test_parameter_id))&&bt.push(Be.id)}),Oe.forEach((Be,tt)=>{const Zt=Fe.get(tt);Zt!=null&&Zt.id?Nt.push({id:Zt.id,patient_result_id:Ne,test_parameter_id:Be.test_parameter_id,value:Be.value}):Ht.push({patient_result_id:Ne,test_parameter_id:Be.test_parameter_id,value:Be.value})}),bt.length>0){const{error:Be}=await se.from("result_value").delete().in("id",bt);if(Be)throw Be}for(const Be of Nt){const{error:tt}=await se.from("result_value").update({value:Be.value,test_parameter_id:Be.test_parameter_id,patient_result_id:Be.patient_result_id}).eq("id",Be.id);if(tt)throw tt}if(Ht.length>0){const{error:Be}=await se.from("result_value").insert(Ht);if(Be)throw Be}r(a?`/results/${Ne}`:`/patients/${v}`)}catch(pe){console.error(`Erreur lors de ${a?"la mise à jour":"la création"} du résultat:`,pe),G((pe==null?void 0:pe.message)||`Une erreur est survenue lors de ${a?"la mise à jour":"l'enregistrement"}.`)}finally{ue(!1)}};if(te)return s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsx(W,{className:"h-8 w-32"}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/2"})}),s.jsxs(Re,{className:"space-y-6",children:[s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-20 w-full"})]}),s.jsx(is,{children:s.jsx(W,{className:"h-10 w-32"})})]})]});const nt=a?`/results/${t}`:`/patients/${v}`;return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"mb-4",children:s.jsx(st,{to:nt,children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),a?"Retour au Résultat":"Retour au Patient"]})})}),s.jsxs(Te,{className:"shadow-md",children:[s.jsxs(Ae,{children:[s.jsxs(xt,{className:"text-xl font-semibold flex items-center gap-2",children:[a?s.jsx(Wr,{className:"h-5 w-5 text-primary"}):s.jsx(Wg,{className:"h-5 w-5 text-primary"}),a?"Modifier le Résultat":"Ajouter un Nouveau Résultat"]}),l&&s.jsxs(mr,{children:["Pour le patient :"," ",s.jsx("span",{className:"font-medium",children:l.full_name})," (ID:"," ",l.patient_unique_id,")"]})]}),s.jsxs("form",{onSubmit:at,children:[s.jsxs(Re,{className:"space-y-6",children:[O&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsx(Pt,{className:"whitespace-pre-line",children:O})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ie,{htmlFor:"doctor",className:"font-semibold",children:["Médecin Prescripteur"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(Qn,{name:"doctor",value:M,onValueChange:ve=>R(ve),required:!0,disabled:le||b.length===0,children:[s.jsx(Jn,{id:"doctor",className:"h-10",children:s.jsx(Zn,{placeholder:b.length===0?"Aucun médecin...":"Sélectionner..."})}),s.jsx(er,{children:b.length>0?b.map(ve=>s.jsx(yt,{value:ve.id,children:ve.full_name},ve.id)):s.jsx(yt,{value:"no-doctors",disabled:!0,children:"Aucun médecin disponible"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ie,{htmlFor:"resultDate",className:"font-semibold",children:["Date du Résultat ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(YN,{open:B,onOpenChange:ee,children:[s.jsx(GN,{asChild:!0,children:s.jsxs(ne,{variant:"outline",className:Ce("w-full justify-start text-left font-normal h-10",!L&&"text-muted-foreground"),disabled:le,children:[s.jsx(T_,{className:"mr-2 h-4 w-4"}),L?dt(L,"PPP",{locale:Xt}):s.jsx("span",{children:"Choisir une date"})]})}),s.jsx(WN,{className:"w-auto p-0",children:s.jsx(aS,{mode:"single",selected:L,onSelect:ve=>{H(ve||new Date),ee(!1)},initialFocus:!0,locale:Xt,disabled:ve=>ve>new Date})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"normal_price",className:"font-semibold",children:"Prix Normal"}),s.jsx(Ge,{id:"normal_price",name:"normal_price",type:"number",required:!0,min:"0",step:"0.01",placeholder:"Prix normal du test (ex: 1000)",value:V,onChange:ve=>X(ve.target.value),disabled:le})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"insurance_price",className:"font-semibold",children:"Prix Assurance"}),s.jsx(Ge,{id:"insurance_price",name:"insurance_price",type:"number",required:!0,min:"0",step:"0.01",placeholder:"Prix avec assurance (ex: 800)",value:D,onChange:ve=>U(ve.target.value),disabled:le})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx(ea,{id:"isFree",checked:d,onCheckedChange:ve=>f(!!ve),disabled:le}),s.jsx(Ie,{htmlFor:"isFree",className:"font-semibold",children:"Gratuit"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx(Ie,{htmlFor:"notes",className:"font-semibold",children:"Notes"}),s.jsx("textarea",{id:"notes",value:h,onChange:ve=>p(ve.target.value),rows:3,className:"w-full border rounded-md p-2 mt-1 focus:outline-none focus:ring focus:border-blue-300",placeholder:"Ajouter des notes ou des commentaires...",disabled:le})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsx(Ie,{htmlFor:"category-filter",children:"Catégorie"}),s.jsxs(Qn,{value:E??"all",onValueChange:ve=>T(ve==="all"?void 0:ve),children:[s.jsx(Jn,{id:"category-filter",children:s.jsx(Zn,{placeholder:"Filtrer par catégorie"})}),s.jsxs(er,{children:[s.jsx(yt,{value:"all",children:"Toutes les catégories"}),N.map(ve=>s.jsx(yt,{value:ve.id,children:ve.name},ve.id))]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ie,{className:"font-semibold text-base",children:"Types de Tests Inclus"}),s.jsxs("div",{className:"relative",children:[s.jsx($c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ge,{type:"search",placeholder:"Rechercher et ajouter un type de test...",value:Y,onChange:ve=>ce(ve.target.value),className:"pl-10 w-full md:w-1/2 h-9",disabled:j.length===0})]}),j.length>0?s.jsx("div",{className:"grid grid-cols-2 _sm:grid-cols-3 _md:grid-cols-4 gap-x-4 gap-y-3 rounded-md border p-4 max-h-80 overflow-y-auto",children:ge.length>0?ge.map(ve=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ea,{id:`test-type-${ve.id}`,checked:$.has(ve.id),onCheckedChange:pe=>de(pe,ve.id),disabled:le}),s.jsx("label",{htmlFor:`test-type-${ve.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:ve.name})]},ve.id)):s.jsx("p",{className:"col-span-full text-sm text-muted-foreground text-center py-4",children:"Aucun type de test ne correspond."})}):s.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Aucun type de test configuré."})]}),$.size>0&&s.jsx(Gr,{}),Array.from($.values()).map(ve=>s.jsxs("div",{className:"space-y-4 py-4 border-b last:border-b-0",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center justify-between gap-2",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Gg,{className:"h-5 w-5 text-green-600"}),ve.name]}),s.jsx(ne,{type:"button",variant:"ghost",size:"sm",className:"h-7 text-xs text-destructive hover:bg-destructive/10",onClick:()=>de(!1,ve.id),disabled:le,children:"Retirer ce Test"})]}),ve.loadingParams?s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 pl-7",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(W,{className:"h-5 w-20"}),s.jsx(W,{className:"h-9 w-full"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(W,{className:"h-5 w-20"}),s.jsx(W,{className:"h-9 w-full"})]})]}):ve.errorLoadingParams?s.jsxs(Dt,{variant:"destructive",className:"ml-7",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur Paramètres"}),s.jsx(Pt,{children:"Impossible de charger les paramètres pour ce test."})]}):ve.parameters.length>0?s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-3 pl-7",children:[ve.parameters.filter(pe=>pe.isVisible!==!1).sort((pe,Pe)=>(pe.order??0)-(Pe.order??0)).map(pe=>s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs(Ie,{htmlFor:`param-${pe.id}`,className:"text-sm font-medium flex items-center gap-1",children:[s.jsx("span",{dangerouslySetInnerHTML:{__html:pe.name}}),pe.unit&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",pe.unit,")"]})]}),s.jsx(ne,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:()=>Me(ve.id,pe.id),disabled:le,"aria-label":`Retirer ${pe.name}`,children:s.jsx(xf,{className:"h-4 w-4"})})]}),s.jsx(Ge,{id:`param-${pe.id}`,name:`param-${pe.id}`,value:pe.resultValue||"",onChange:Pe=>Se(ve.id,pe.id,Pe.target.value),placeholder:`Valeur ${pe.reference_range?`(Réf: ${pe.reference_range})`:""}`,disabled:le,className:"h-9"}),pe.description&&s.jsx("p",{className:"text-xs text-muted-foreground pt-1",children:pe.description})]},pe.id)),ve.parameters.every(pe=>pe.isVisible===!1)&&s.jsx("p",{className:"col-span-full text-sm text-muted-foreground italic",children:"Tous les paramètres pour ce test sont masqués."})]}):s.jsx("p",{className:"text-sm text-muted-foreground italic pl-7",children:"Aucun paramètre défini pour ce type de test."})]},ve.id))]}),s.jsxs(is,{className:"border-t px-6 py-4 flex justify-between",children:[s.jsx(ne,{type:"submit",disabled:le||te,children:le?s.jsxs(s.Fragment,{children:[s.jsx($t,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Mise à jour...":"Enregistrement..."]}):a?"Mettre à jour le Résultat":"Enregistrer le Résultat"}),s.jsx(st,{to:nt,children:s.jsx(ne,{type:"button",variant:"outline",disabled:le,children:"Annuler"})})]})]})]})]})},JU=()=>{const[e,t]=m.useState([]),[r,a]=m.useState([]),[l,c]=m.useState(!0),[d,f]=m.useState(null),[h,p]=m.useState(""),[v,x]=m.useState("all"),[b,w]=m.useState(!1),[j,_]=m.useState(null),N=qc(h,300),C=m.useCallback(async()=>{c(!0),f(null);try{const[M,R]=await Promise.all([se.from("test_type").select(`
            id,
            name,
            created_at,
            updated_at,
            category:category_id (id, name)
          `).order("name",{ascending:!0}),se.from("category").select("*").order("name",{ascending:!0})]);if(M.error)throw M.error;if(t(M.data||[]),R.error)throw R.error;a(R.data||[])}catch(M){console.error("Erreur lors de la récupération des données:",M),f((M==null?void 0:M.message)||"Une erreur est survenue lors du chargement."),t([]),a([])}finally{c(!1)}},[]);m.useEffect(()=>{C()},[C]);const E=m.useMemo(()=>{let M=e;if(v!=="all"&&(M=M.filter(R=>{var L;return((L=R.category)==null?void 0:L.id)===v})),N){const R=N.toLowerCase();M=M.filter(L=>L.name.toLowerCase().includes(R))}return M},[e,v,N]),T=async M=>{c(!0),f(null);try{const{error:R}=await se.from("test_type").delete().eq("id",M);if(R)throw R;C()}catch(R){f((R==null?void 0:R.message)||"Erreur lors de la suppression.")}finally{c(!1),w(!1),_(null)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(Ud,{className:"h-6 w-6"}),"Gestion des Types de Test"]}),s.jsx(st,{to:"/test-types/new",children:s.jsxs(ne,{children:[s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Ajouter un Type de Test"]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 sm:flex-none sm:w-64 space-y-1.5",children:[s.jsx(Ie,{htmlFor:"categoryFilter",className:"text-xs font-medium text-muted-foreground",children:"Filtrer par Catégorie"}),s.jsxs(Qn,{value:v,onValueChange:M=>x(M||"all"),disabled:l||r.length===0,children:[s.jsx(Jn,{id:"categoryFilter",className:"h-10",children:s.jsx(Zn,{placeholder:"Toutes les catégories"})}),s.jsxs(er,{children:[s.jsx(yt,{value:"all",children:"Toutes les catégories"}),r.map(M=>s.jsx(yt,{value:M.id,children:M.name},M.id))]})]})]}),s.jsxs("div",{className:"flex-1 space-y-1.5",children:[s.jsx(Ie,{htmlFor:"testTypeSearch",className:"text-xs font-medium text-muted-foreground",children:"Rechercher par Nom"}),s.jsxs("div",{className:"relative",children:[s.jsx($c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ge,{id:"testTypeSearch",type:"search",placeholder:"Nom du type de test...",value:h,onChange:M=>p(M.target.value),className:"pl-10 h-10 w-full",disabled:l})]})]})]}),l&&s.jsxs("div",{className:"border rounded-lg",children:[s.jsx(W,{className:"h-12 w-full rounded-t-lg"})," ",s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"})]})]}),!l&&d&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur de Chargement"}),s.jsxs(Pt,{children:[d," ",s.jsx(ne,{variant:"link",onClick:C,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),!l&&!d&&s.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Vt,{children:[s.jsx(pt,{children:"Nom du Type de Test"}),s.jsx(pt,{className:"w-[250px]",children:"Catégorie"}),s.jsx(pt,{className:"text-right w-[150px]",children:"Actions"})]})}),s.jsx(la,{children:E.length>0?E.map(M=>s.jsxs(Vt,{children:[s.jsx(Qe,{className:"font-medium",children:M.name}),s.jsx(Qe,{children:s.jsx("div",{className:"flex items-center gap-2",children:M.category?s.jsxs(s.Fragment,{children:[s.jsx(dc,{className:"h-4 w-4 text-muted-foreground"}),M.category.name]}):s.jsx("span",{className:"italic text-muted-foreground",children:"N/A"})})}),s.jsxs(Qe,{className:"text-right",children:[s.jsx(st,{to:`/test-types/${M.id}/edit`,children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(Wr,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Modifier"}),s.jsx("span",{className:"sm:hidden",children:"Éditer"})]})}),s.jsxs(ne,{variant:"destructive",size:"sm",className:"ml-2",title:"Supprimer",onClick:()=>{_(M.id),w(!0)},children:[s.jsx(Dl,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Supprimer"}),s.jsx("span",{className:"sm:hidden",children:"Del"})]})]})]},M.id)):s.jsx(Vt,{children:s.jsx(Qe,{colSpan:3,className:"h-24 text-center text-muted-foreground",children:h||v!=="all"?"Aucun type de test ne correspond à vos filtres.":s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[s.jsx(pf,{className:"h-8 w-8 text-muted-foreground/50"}),"Aucun type de test défini."]})})})})]})}),s.jsx(Ti,{open:b,onOpenChange:w,children:s.jsxs(Ri,{children:[s.jsxs(Mi,{children:[s.jsx(Ai,{children:"Confirmer la suppression"}),s.jsx(jN,{children:"Êtes-vous sûr de vouloir supprimer ce type de test ? Cette action est irréversible."})]}),s.jsxs(ql,{children:[s.jsx(wN,{asChild:!0,children:s.jsx(ne,{variant:"outline",children:"Annuler"})}),s.jsx(ne,{variant:"destructive",onClick:()=>{j&&T(j)},disabled:l,children:"Supprimer"})]})]})})]})},Yn=[];for(let e=0;e<256;++e)Yn.push((e+256).toString(16).slice(1));function e$(e,t=0){return(Yn[e[t+0]]+Yn[e[t+1]]+Yn[e[t+2]]+Yn[e[t+3]]+"-"+Yn[e[t+4]]+Yn[e[t+5]]+"-"+Yn[e[t+6]]+Yn[e[t+7]]+"-"+Yn[e[t+8]]+Yn[e[t+9]]+"-"+Yn[e[t+10]]+Yn[e[t+11]]+Yn[e[t+12]]+Yn[e[t+13]]+Yn[e[t+14]]+Yn[e[t+15]]).toLowerCase()}let jp;const t$=new Uint8Array(16);function n$(){if(!jp){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jp=crypto.getRandomValues.bind(crypto)}return jp(t$)}const r$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Zw={randomUUID:r$};function Jw(e,t,r){var l;if(Zw.randomUUID&&!e)return Zw.randomUUID();e=e||{};const a=e.random??((l=e.rng)==null?void 0:l.call(e))??n$();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,e$(a)}function Cc({className:e,...t}){return s.jsx("textarea",{"data-slot":"textarea",className:Ce("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const ej=()=>{const{testTypeId:e}=vr(),t=ir(),r=!!e,[a,l]=m.useState(""),[c,d]=m.useState(""),[f,h]=m.useState(void 0),[p,v]=m.useState([]),[x,b]=m.useState([]),[w,j]=m.useState(null),[_,N]=m.useState([]),[C,E]=m.useState(!0),[T,M]=m.useState(!1),[R,L]=m.useState(null),H=m.useCallback(async()=>{E(!0),L(null),v([]),N([]),j(null),l(""),d(""),h(void 0);try{const{data:te,error:q}=await se.from("category").select("*").order("name");if(q)throw q;if(b(te||[]),r&&e){const{data:le,error:ue}=await se.from("test_type").select("*").eq("id",e).single();if(ue)throw ue;if(!le)throw new Error("Type de test non trouvé.");const{data:O,error:G}=await se.from("test_parameter").select("*").eq("test_type_id",e).order("name");if(G)throw G;j(le),l(le.name),d(le.description||""),h(le.category_id);const B=(O||[]).map(ee=>({...ee,tempId:ee.id||Jw()}));v(B),N(JSON.parse(JSON.stringify(B)))}}catch(te){console.error("Erreur chargement données:",te),L(te.message||"Impossible de charger les données.")}finally{E(!1)}},[r,e]);m.useEffect(()=>{H()},[H]);const $=(te,q,le)=>{v(ue=>ue.map(O=>O.tempId===te?{...O,[q]:q==="order"?Number(le):le}:O))},I=()=>{const te=p.reduce((le,ue)=>Math.max(le,ue.order??0),0),q={tempId:Jw(),name:"",unit:"",reference_range:"",description:"",order:te+1,id:void 0,test_type_id:void 0};v(le=>[...le,q])},Y=te=>{v(q=>q.filter(le=>le.tempId!==te))},ce=async te=>{if(te.preventDefault(),L(null),!a.trim()){L("Le nom du type de test est requis.");return}if(!f){L("Veuillez sélectionner une catégorie.");return}const q=p.find(le=>{var ue;return!((ue=le.name)!=null&&ue.trim())});if(q){L(`Le nom est requis pour tous les paramètres (problème avec paramètre temporaire ID ${q.tempId}).`);return}M(!0);try{let le=e;const ue={name:a.trim(),category_id:f,description:c.trim()||null};if(r){const{error:P}=await se.from("test_type").update(ue).eq("id",le);if(P)throw P}else{const{data:P,error:V}=await se.from("test_type").insert(ue).select("id").single();if(V)throw V;if(!(P!=null&&P.id))throw new Error("Impossible d'obtenir l'ID du nouveau type de test.");le=P.id}const O=new Map(p.map(P=>[P.tempId,P])),G=new Map(_.map(P=>[P.tempId,P])),B=[],ee=[],k=[];if(_.forEach(P=>{!O.has(P.tempId)&&P.id&&B.push(P.id)}),p.forEach(P=>{const V=G.get(P.tempId),X={test_type_id:le,name:P.name,unit:P.unit||null,reference_range:P.reference_range||null,description:P.description||null,order:P.order??0};if(V!=null&&V.id){const D={test_type_id:V.test_type_id||le,name:V.name,unit:V.unit||null,reference_range:V.reference_range||null,description:V.description||null,order:V.order??0};JSON.stringify(X)!==JSON.stringify(D)&&k.push({id:V.id,...X})}else ee.push(X)}),B.length>0){console.log("Deleting parameters:",B);const{error:P}=await se.from("test_parameter").delete().in("id",B);if(P)throw new Error(`Erreur suppression paramètres: ${P.message}`)}if(ee.length>0){console.log("Inserting parameters:",ee);const{error:P}=await se.from("test_parameter").insert(ee);if(P)throw new Error(`Erreur insertion paramètres: ${P.message}`)}if(k.length>0){console.log("Updating parameters:",k);const{error:P}=await se.from("test_parameter").upsert(k);if(P)throw new Error(`Erreur mise à jour paramètres: ${P.message}`)}console.log("Save successful"),t("/test-types")}catch(le){console.error("Erreur sauvegarde type de test:",le),L(le.message||`Une erreur est survenue lors de ${r?"la mise à jour":"l'enregistrement"}.`)}finally{M(!1)}};return C?s.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[s.jsx(W,{className:"h-8 w-32"})," ",s.jsxs(Te,{children:[s.jsxs(Ae,{children:[" ",s.jsx(W,{className:"h-6 w-1/2"})," ",s.jsx(W,{className:"h-4 w-3/4"})," "]}),s.jsxs(Re,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-10 w-full"})]}),s.jsx(Gr,{}),s.jsx(W,{className:"h-6 w-1/3"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(W,{className:"h-20 w-full"}),s.jsx(W,{className:"h-20 w-full"})]}),s.jsx(W,{className:"h-9 w-36"})]}),s.jsx(is,{children:s.jsx(W,{className:"h-10 w-32"})})]})]}):s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("div",{className:"mb-4",children:s.jsx(st,{to:"/test-types",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour à la liste"]})})}),s.jsx("form",{onSubmit:ce,children:s.jsxs(Te,{className:"shadow-md",children:[s.jsxs(Ae,{children:[s.jsxs(xt,{className:"text-xl font-semibold flex items-center gap-2",children:[r?s.jsx(Ud,{className:"h-5 w-5"}):s.jsx(Ud,{className:"h-5 w-5"}),r?"Modifier le Type de Test":"Ajouter un Type de Test"]}),s.jsx(mr,{children:"Définissez le nom, la catégorie et les paramètres pour ce type de test."})]}),s.jsxs(Re,{className:"space-y-6",children:[R&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsx(Pt,{className:"whitespace-pre-line",children:R})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ie,{htmlFor:"testTypeName",className:"font-semibold",children:["Nom du Type ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ge,{id:"testTypeName",value:a,onChange:te=>l(te.target.value),placeholder:"Ex: Numération Formule Sanguine",disabled:T,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"testTypeDescription",className:"font-semibold",children:"Description"}),s.jsx(Cc,{id:"testTypeDescription",value:c,onChange:te=>d(te.target.value),placeholder:"Description du type de test, instructions de préparation, etc.",disabled:T,rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ie,{htmlFor:"category",className:"font-semibold",children:["Catégorie ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(Qn,{value:f,onValueChange:te=>h(te),disabled:T||x.length===0,required:!0,children:[s.jsx(Jn,{id:"category",className:"h-10",children:s.jsx(Zn,{placeholder:"Sélectionner une catégorie..."})}),s.jsxs(er,{children:[x.map(te=>s.jsx(yt,{value:te.id,children:te.name},te.id)),x.length===0&&s.jsx(yt,{value:"-",disabled:!0,children:"Aucune catégorie"})]})]})]})]}),s.jsx(Gr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Paramètres Associés"}),p.length>0&&s.jsx("div",{className:"space-y-4",children:p.map((te,q)=>s.jsxs(Te,{className:"bg-muted/30 p-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[s.jsxs(Ie,{htmlFor:`param-name-${te.tempId}`,className:"text-sm",children:["Nom du Paramètre"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ge,{id:`param-name-${te.tempId}`,value:te.name||"",onChange:le=>$(te.tempId,"name",le.target.value),placeholder:"Ex: Hémoglobine",disabled:T,required:!0,className:"bg-background h-9"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Ie,{htmlFor:`param-unit-${te.tempId}`,className:"text-sm",children:"Unité"}),s.jsx(Ge,{id:`param-unit-${te.tempId}`,value:te.unit||"",onChange:le=>$(te.tempId,"unit",le.target.value),placeholder:"Ex: g/dL",disabled:T,className:"bg-background h-9"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Ie,{htmlFor:`param-ref-${te.tempId}`,className:"text-sm",children:"Valeurs de Référence"}),s.jsx(Ge,{id:`param-ref-${te.tempId}`,value:te.reference_range||"",onChange:le=>$(te.tempId,"reference_range",le.target.value),placeholder:"Ex: 12.0 - 16.0",disabled:T,className:"bg-background h-9"})]}),s.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[s.jsx(Ie,{htmlFor:`param-desc-${te.tempId}`,className:"text-sm",children:"Description (Optionnel)"}),s.jsx(Cc,{id:`param-desc-${te.tempId}`,value:te.description||"",onChange:le=>$(te.tempId,"description",le.target.value),placeholder:"Explication du paramètre ou des valeurs...",disabled:T,className:"bg-background",rows:2})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Ie,{htmlFor:`param-order-${te.tempId}`,className:"text-sm",children:"Ordre"}),s.jsx(Ge,{id:`param-order-${te.tempId}`,value:te.order||"",onChange:le=>$(te.tempId,"order",le.target.value),type:"number",disabled:T,className:"bg-background h-9"})]})]}),s.jsx("div",{className:"mt-3 text-right",children:s.jsxs(ne,{type:"button",variant:"destructive",size:"sm",onClick:()=>Y(te.tempId),disabled:T,className:"h-8 px-2 py-1 text-xs",children:[s.jsx(Bc,{className:"h-3.5 w-3.5 mr-1"}),"Retirer Param. #",q+1]})})]},te.tempId))}),p.length===0&&s.jsx("p",{className:"text-sm text-muted-foreground italic text-center py-4",children:"Aucun paramètre défini pour ce type de test."}),s.jsxs(ne,{type:"button",variant:"outline",onClick:I,disabled:T,className:"mt-4",children:[s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Ajouter un Paramètre"]})]})]}),s.jsxs(is,{className:"border-t px-6 py-4 flex justify-between",children:[s.jsx(ne,{type:"submit",disabled:T||C,children:T?s.jsxs(s.Fragment,{children:[s.jsx($t,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bl,{className:"mr-2 h-4 w-4"}),r?"Enregistrer les Modifications":"Enregistrer le Type de Test"]})}),s.jsx(st,{to:"/test-types",children:s.jsx(ne,{type:"button",variant:"outline",disabled:T,children:"Annuler"})})]})]})})]})},tj=()=>{const{doctorId:e}=vr(),t=ir(),r=!!e,[a,l]=m.useState({full_name:"",phone:"",hospital:"",bio:""}),[c,d]=m.useState(r),[f,h]=m.useState(!1),[p,v]=m.useState(null),x=m.useCallback(async()=>{if(!r||!e){d(!1);return}d(!0),v(null);try{const{data:j,error:_}=await se.from("doctor").select("*").eq("id",e).single();if(_)throw _;if(!j)throw new Error("Médecin non trouvé.");l({full_name:j.full_name||"",phone:j.phone||"",hospital:j.hospital||"",bio:j.bio||""})}catch(j){console.error("Erreur chargement médecin:",j),j instanceof Error?v(j.message||"Impossible de charger les données du médecin."):v("Une erreur inconnue est survenue.")}finally{d(!1)}},[r,e]);m.useEffect(()=>{x()},[x]);const b=j=>{const{name:_,value:N}=j.target;l(C=>({...C,[_]:N}))},w=async j=>{var _,N,C;if(j.preventDefault(),v(null),!a.full_name||!a.full_name.trim()){v("Le nom complet du médecin est requis.");return}h(!0);try{const E={full_name:a.full_name.trim(),phone:((_=a.phone)==null?void 0:_.trim())||null,hospital:((N=a.hospital)==null?void 0:N.trim())||null,bio:((C=a.bio)==null?void 0:C.trim())||null};let T=null;if(r){const{error:M}=await se.from("doctor").update(E).eq("id",e);T=M}else{const{error:M}=await se.from("doctor").insert(E);T=M}if(T)if(T.code==="23505")v("Un médecin avec ces informations (ex: nom) existe peut-être déjà.");else throw T;else t("/doctors")}catch(E){console.error(`Erreur ${r?"mise à jour":"création"} médecin:`,E),E instanceof Error?v(E.message||`Une erreur est survenue lors de ${r?"la mise à jour":"l'enregistrement"}.`):v(`Une erreur inconnue est survenue lors de ${r?"la mise à jour":"l'enregistrement"}.`)}finally{h(!1)}};return c?s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsx(W,{className:"h-8 w-32"})," ",s.jsxs(Te,{children:[s.jsxs(Ae,{children:[" ",s.jsx(W,{className:"h-6 w-1/2"})," ",s.jsx(W,{className:"h-4 w-3/4"})," "]}),s.jsxs(Re,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-20 w-full"})]})]}),s.jsx(is,{children:s.jsx(W,{className:"h-10 w-32"})})]})]}):s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("div",{className:"mb-4",children:s.jsx(st,{to:"/doctors",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour à la liste"]})})}),s.jsx("form",{onSubmit:w,children:s.jsxs(Te,{className:"shadow-md",children:[s.jsxs(Ae,{children:[s.jsxs(xt,{className:"text-xl font-semibold flex items-center gap-2",children:[r?s.jsx(Wr,{className:"h-5 w-5"}):s.jsx(D_,{className:"h-5 w-5"}),r?"Modifier le Médecin":"Ajouter un Nouveau Médecin"]}),s.jsx(mr,{children:r?"Mettez à jour les informations du médecin.":"Entrez les informations du nouveau médecin."})]}),s.jsxs(Re,{className:"space-y-6",children:[p&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsx(Pt,{className:"whitespace-pre-line",children:p})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ie,{htmlFor:"full_name",className:"font-semibold",children:["Nom Complet ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ge,{id:"full_name",name:"full_name",value:a.full_name||"",onChange:b,placeholder:"Ex: Dr. Alain Dupont",disabled:f,required:!0,className:"h-10"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"phone",className:"font-semibold",children:"Téléphone"}),s.jsx(Ge,{id:"phone",name:"phone",type:"tel",value:a.phone||"",onChange:b,placeholder:"Ex: +33 6 11 22 33 44",disabled:f,className:"h-10"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"hospital",className:"font-semibold",children:"Hôpital / Clinique"}),s.jsx(Ge,{id:"hospital",name:"hospital",value:a.hospital||"",onChange:b,placeholder:"Ex: Hôpital Central",disabled:f,className:"h-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"bio",className:"font-semibold",children:"Bio / Notes (Optionnel)"}),s.jsx(Cc,{id:"bio",name:"bio",value:a.bio||"",onChange:b,placeholder:"Spécialité, notes importantes...",disabled:f,rows:4})]})]}),s.jsxs(is,{className:"border-t px-6 py-4 flex justify-between",children:[s.jsx(ne,{type:"submit",disabled:f||c,children:f?s.jsxs(s.Fragment,{children:[s.jsx($t,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bl,{className:"mr-2 h-4 w-4"}),r?"Enregistrer les Modifications":"Enregistrer le Médecin"]})}),s.jsx(st,{to:"/doctors",children:s.jsx(ne,{type:"button",variant:"outline",disabled:f,children:"Annuler"})})]})]})})]})},s$=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(!0),[l,c]=m.useState(null),[d,f]=m.useState(null),[h,p]=m.useState(!1),[v,x]=m.useState(!1),[b,w]=m.useState(null),[j,_]=m.useState({name:""}),[N,C]=m.useState(null),E=m.useCallback(async($=!0)=>{$&&a(!0),c(null);try{const{data:I,error:Y}=await se.from("category").select("*").order("name",{ascending:!0});if(Y)throw Y;t(I||[])}catch(I){console.error("Erreur chargement catégories:",I),I instanceof Error?c(I.message||"Impossible de charger les catégories."):c("Impossible de charger les catégories."),t([])}finally{$&&a(!1)}},[]);m.useEffect(()=>{E()},[E]);const T=($=null)=>{w($),_({name:($==null?void 0:$.name)||""}),f(null),x(!0)},M=()=>{x(!1),setTimeout(()=>{w(null),_({name:""})},150)},R=$=>{_({name:$.target.value})},L=async $=>{if($.preventDefault(),f(null),!j.name||!j.name.trim()){f("Le nom de la catégorie est requis.");return}p(!0);const I={name:j.name.trim()};try{let Y=null;if(b){const{error:ce}=await se.from("category").update(I).eq("id",b.id);Y=ce}else{const{error:ce}=await se.from("category").insert(I);Y=ce}if(Y)if(Y.code==="23505")f("Ce nom de catégorie existe déjà.");else throw Y;else M(),await E(!1)}catch(Y){console.error("Erreur sauvegarde catégorie:",Y),Y instanceof Error?f(Y.message||"Une erreur est survenue."):f("Une erreur est survenue.")}finally{p(!1)}},H=async()=>{if(N){p(!0),c(null);try{const{error:$}=await se.from("category").delete().eq("id",N.id);if($)if($.code==="23503")c(`Impossible de supprimer la catégorie "${N.name}" car elle est utilisée par un ou plusieurs types de test.`),C(null);else throw $;else C(null),await E(!1)}catch($){console.error("Erreur suppression catégorie:",$),$ instanceof Error?c($.message||"Une erreur est survenue lors de la suppression."):c("Une erreur est survenue lors de la suppression."),C(null)}finally{p(!1)}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(dc,{className:"h-6 w-6"}),"Gestion des Catégories"]}),s.jsxs(ne,{onClick:()=>T(null),children:[s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Ajouter une Catégorie"]})]}),l&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsx(Pt,{children:l})]}),r&&s.jsxs("div",{className:"border rounded-lg",children:[s.jsx(W,{className:"h-12 w-full rounded-t-lg"})," ",s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"})]})]}),!r&&!l&&s.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Vt,{children:[s.jsx(pt,{children:"Nom de la Catégorie"}),s.jsx(pt,{className:"text-right w-[200px]",children:"Actions"})]})}),s.jsx(la,{children:e.length>0?e.map($=>s.jsxs(Vt,{children:[s.jsx(Qe,{className:"font-medium",children:$.name}),s.jsxs(Qe,{className:"text-right space-x-2",children:[s.jsx(ne,{variant:"outline",size:"sm",onClick:()=>T($),children:s.jsx(Wr,{className:"h-4 w-4"})}),s.jsx(wc,{children:s.jsx(wf,{asChild:!0,children:s.jsx(ne,{variant:"destructive",size:"sm",onClick:I=>{I.stopPropagation(),C($)},children:s.jsx(Bc,{className:"h-4 w-4"})})})})]})]},$.id)):s.jsx(Vt,{children:s.jsx(Qe,{colSpan:2,className:"h-24 text-center text-muted-foreground",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[s.jsx(pf,{className:"h-8 w-8 text-muted-foreground/50"}),"Aucune catégorie définie."]})})})})]})}),s.jsx(Ti,{open:v,onOpenChange:x,children:s.jsx(Ri,{className:"sm:max-w-[425px]",children:s.jsxs("form",{onSubmit:L,children:[s.jsxs(Mi,{children:[s.jsx(Ai,{children:b?"Modifier la Catégorie":"Ajouter une Catégorie"}),s.jsx(jN,{children:b?"Modifiez le nom de la catégorie ci-dessous.":"Entrez le nom de la nouvelle catégorie."})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[d&&s.jsxs(Dt,{variant:"destructive",className:"text-xs",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsx(Pt,{children:d})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsxs(Ie,{htmlFor:"category-name",className:"text-right col-span-1",children:["Nom ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ge,{id:"category-name",name:"name",value:j.name,onChange:R,className:"col-span-3 h-9",disabled:h,required:!0,autoFocus:!0})]})]}),s.jsxs(ql,{children:[s.jsx(wN,{asChild:!0,children:s.jsx(ne,{type:"button",variant:"outline",disabled:h,children:"Annuler"})}),s.jsxs(ne,{type:"submit",disabled:h,children:[h&&s.jsx($t,{className:"mr-2 h-4 w-4 animate-spin"}),b?"Enregistrer Modifications":"Ajouter Catégorie"]})]})]})})}),s.jsx(wc,{open:!!N,onOpenChange:$=>!$&&C(null),children:s.jsxs(jf,{children:[s.jsxs(_f,{children:[s.jsx(Sf,{children:"Êtes-vous sûr(e) ?"}),s.jsxs(Ef,{children:["Cette action est irréversible. Voulez-vous vraiment supprimer la catégorie",s.jsxs("span",{className:"font-medium",children:[' "',N==null?void 0:N.name,'"']})," ?",s.jsx("br",{}),s.jsx("span",{className:"text-destructive/80 font-medium",children:"Attention :"})," ","La suppression échouera si des types de test utilisent encore cette catégorie."]})]}),s.jsxs(Nf,{children:[s.jsx(Cf,{disabled:h,onClick:()=>C(null),children:"Annuler"}),s.jsxs(ne,{variant:"destructive",onClick:H,disabled:h,children:[h&&s.jsx($t,{className:"mr-2 h-4 w-4 animate-spin"}),"Supprimer"]})]})]})})]})};function a$(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const i$=e=>{switch(e){case"success":return c$;case"info":return d$;case"warning":return u$;case"error":return f$;default:return null}},l$=Array(12).fill(0),o$=({visible:e,className:t})=>we.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},we.createElement("div",{className:"sonner-spinner"},l$.map((r,a)=>we.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),c$=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),u$=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),d$=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),f$=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),h$=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},we.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),we.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),m$=()=>{const[e,t]=we.useState(document.hidden);return we.useEffect(()=>{const r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e};let lg=1;class p${constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:a,...l}=t,c=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:lg++,d=this.toasts.find(h=>h.id===c),f=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),d?this.toasts=this.toasts.map(h=>h.id===c?(this.publish({...h,...t,id:c,title:a}),{...h,...t,id:c,dismissible:f,title:a}):h):this.addToast({title:a,...l,dismissible:f,id:c}),c},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(a=>a({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let a;r.loading!==void 0&&(a=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const l=Promise.resolve(t instanceof Function?t():t);let c=a!==void 0,d;const f=l.then(async p=>{if(d=["resolve",p],we.isValidElement(p))c=!1,this.create({id:a,type:"default",message:p});else if(v$(p)&&!p.ok){c=!1;const x=typeof r.error=="function"?await r.error(`HTTP error! status: ${p.status}`):r.error,b=typeof r.description=="function"?await r.description(`HTTP error! status: ${p.status}`):r.description,j=typeof x=="object"&&!we.isValidElement(x)?x:{message:x};this.create({id:a,type:"error",description:b,...j})}else if(p instanceof Error){c=!1;const x=typeof r.error=="function"?await r.error(p):r.error,b=typeof r.description=="function"?await r.description(p):r.description,j=typeof x=="object"&&!we.isValidElement(x)?x:{message:x};this.create({id:a,type:"error",description:b,...j})}else if(r.success!==void 0){c=!1;const x=typeof r.success=="function"?await r.success(p):r.success,b=typeof r.description=="function"?await r.description(p):r.description,j=typeof x=="object"&&!we.isValidElement(x)?x:{message:x};this.create({id:a,type:"success",description:b,...j})}}).catch(async p=>{if(d=["reject",p],r.error!==void 0){c=!1;const v=typeof r.error=="function"?await r.error(p):r.error,x=typeof r.description=="function"?await r.description(p):r.description,w=typeof v=="object"&&!we.isValidElement(v)?v:{message:v};this.create({id:a,type:"error",description:x,...w})}}).finally(()=>{c&&(this.dismiss(a),a=void 0),r.finally==null||r.finally.call(r)}),h=()=>new Promise((p,v)=>f.then(()=>d[0]==="reject"?v(d[1]):p(d[1])).catch(v));return typeof a!="string"&&typeof a!="number"?{unwrap:h}:Object.assign(a,{unwrap:h})},this.custom=(t,r)=>{const a=(r==null?void 0:r.id)||lg++;return this.create({jsx:t(a),id:a,...r}),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const hr=new p$,g$=(e,t)=>{const r=(t==null?void 0:t.id)||lg++;return hr.addToast({title:e,...t,id:r}),r},v$=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",x$=g$,y$=()=>hr.toasts,b$=()=>hr.getActiveToasts(),_p=Object.assign(x$,{success:hr.success,info:hr.info,warning:hr.warning,error:hr.error,custom:hr.custom,message:hr.message,promise:hr.promise,dismiss:hr.dismiss,loading:hr.loading},{getHistory:y$,getToasts:b$});a$("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function jd(e){return e.label!==void 0}const w$=3,j$="24px",_$="16px",nj=4e3,N$=356,S$=14,E$=45,C$=200;function xs(...e){return e.filter(Boolean).join(" ")}function T$(e){const[t,r]=e.split("-"),a=[];return t&&a.push(t),r&&a.push(r),a}const R$=e=>{var t,r,a,l,c,d,f,h,p;const{invert:v,toast:x,unstyled:b,interacting:w,setHeights:j,visibleToasts:_,heights:N,index:C,toasts:E,expanded:T,removeToast:M,defaultRichColors:R,closeButton:L,style:H,cancelButtonStyle:$,actionButtonStyle:I,className:Y="",descriptionClassName:ce="",duration:te,position:q,gap:le,expandByDefault:ue,classNames:O,icons:G,closeButtonAriaLabel:B="Close toast"}=e,[ee,k]=we.useState(null),[P,V]=we.useState(null),[X,D]=we.useState(!1),[U,F]=we.useState(!1),[K,ae]=we.useState(!1),[ge,de]=we.useState(!1),[Se,Me]=we.useState(!1),[at,nt]=we.useState(0),[ve,pe]=we.useState(0),Pe=we.useRef(x.duration||te||nj),be=we.useRef(null),Ne=we.useRef(null),Oe=C===0,We=C+1<=_,Fe=x.type,bt=x.dismissible!==!1,Nt=x.className||"",Ht=x.descriptionClassName||"",Be=we.useMemo(()=>N.findIndex(J=>J.toastId===x.id)||0,[N,x.id]),tt=we.useMemo(()=>{var J;return(J=x.closeButton)!=null?J:L},[x.closeButton,L]),Zt=we.useMemo(()=>x.duration||te||nj,[x.duration,te]),kn=we.useRef(0),Cn=we.useRef(0),fn=we.useRef(0),ln=we.useRef(null),[Jt,qt]=q.split("-"),nr=we.useMemo(()=>N.reduce((J,xe,_e)=>_e>=Be?J:J+xe.height,0),[N,Be]),Tn=m$(),hn=x.invert||v,yr=Fe==="loading";Cn.current=we.useMemo(()=>Be*le+nr,[Be,nr]),we.useEffect(()=>{Pe.current=Zt},[Zt]),we.useEffect(()=>{D(!0)},[]),we.useEffect(()=>{const J=Ne.current;if(J){const xe=J.getBoundingClientRect().height;return pe(xe),j(_e=>[{toastId:x.id,height:xe,position:x.position},..._e]),()=>j(_e=>_e.filter(De=>De.toastId!==x.id))}},[j,x.id]),we.useLayoutEffect(()=>{if(!X)return;const J=Ne.current,xe=J.style.height;J.style.height="auto";const _e=J.getBoundingClientRect().height;J.style.height=xe,pe(_e),j(De=>De.find(lt=>lt.toastId===x.id)?De.map(lt=>lt.toastId===x.id?{...lt,height:_e}:lt):[{toastId:x.id,height:_e,position:x.position},...De])},[X,x.title,x.description,j,x.id]);const bn=we.useCallback(()=>{F(!0),nt(Cn.current),j(J=>J.filter(xe=>xe.toastId!==x.id)),setTimeout(()=>{M(x)},C$)},[x,M,j,Cn]);we.useEffect(()=>{if(x.promise&&Fe==="loading"||x.duration===1/0||x.type==="loading")return;let J;return T||w||Tn?(()=>{if(fn.current<kn.current){const De=new Date().getTime()-kn.current;Pe.current=Pe.current-De}fn.current=new Date().getTime()})():(()=>{Pe.current!==1/0&&(kn.current=new Date().getTime(),J=setTimeout(()=>{x.onAutoClose==null||x.onAutoClose.call(x,x),bn()},Pe.current))})(),()=>clearTimeout(J)},[T,w,x,Fe,Tn,bn]),we.useEffect(()=>{x.delete&&bn()},[bn,x.delete]);function ks(){var J;if(G!=null&&G.loading){var xe;return we.createElement("div",{className:xs(O==null?void 0:O.loader,x==null||(xe=x.classNames)==null?void 0:xe.loader,"sonner-loader"),"data-visible":Fe==="loading"},G.loading)}return we.createElement(o$,{className:xs(O==null?void 0:O.loader,x==null||(J=x.classNames)==null?void 0:J.loader),visible:Fe==="loading"})}const kr=x.icon||(G==null?void 0:G[Fe])||i$(Fe);var Yt,it;return we.createElement("li",{tabIndex:0,ref:Ne,className:xs(Y,Nt,O==null?void 0:O.toast,x==null||(t=x.classNames)==null?void 0:t.toast,O==null?void 0:O.default,O==null?void 0:O[Fe],x==null||(r=x.classNames)==null?void 0:r[Fe]),"data-sonner-toast":"","data-rich-colors":(Yt=x.richColors)!=null?Yt:R,"data-styled":!(x.jsx||x.unstyled||b),"data-mounted":X,"data-promise":!!x.promise,"data-swiped":Se,"data-removed":U,"data-visible":We,"data-y-position":Jt,"data-x-position":qt,"data-index":C,"data-front":Oe,"data-swiping":K,"data-dismissible":bt,"data-type":Fe,"data-invert":hn,"data-swipe-out":ge,"data-swipe-direction":P,"data-expanded":!!(T||ue&&X),style:{"--index":C,"--toasts-before":C,"--z-index":E.length-C,"--offset":`${U?at:Cn.current}px`,"--initial-height":ue?"auto":`${ve}px`,...H,...x.style},onDragEnd:()=>{ae(!1),k(null),ln.current=null},onPointerDown:J=>{yr||!bt||(be.current=new Date,nt(Cn.current),J.target.setPointerCapture(J.pointerId),J.target.tagName!=="BUTTON"&&(ae(!0),ln.current={x:J.clientX,y:J.clientY}))},onPointerUp:()=>{var J,xe,_e;if(ge||!bt)return;ln.current=null;const De=Number(((J=Ne.current)==null?void 0:J.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),qe=Number(((xe=Ne.current)==null?void 0:xe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),lt=new Date().getTime()-((_e=be.current)==null?void 0:_e.getTime()),Ye=ee==="x"?De:qe,ft=Math.abs(Ye)/lt;if(Math.abs(Ye)>=E$||ft>.11){nt(Cn.current),x.onDismiss==null||x.onDismiss.call(x,x),V(ee==="x"?De>0?"right":"left":qe>0?"down":"up"),bn(),de(!0);return}else{var ot,ht;(ot=Ne.current)==null||ot.style.setProperty("--swipe-amount-x","0px"),(ht=Ne.current)==null||ht.style.setProperty("--swipe-amount-y","0px")}Me(!1),ae(!1),k(null)},onPointerMove:J=>{var xe,_e,De;if(!ln.current||!bt||((xe=window.getSelection())==null?void 0:xe.toString().length)>0)return;const lt=J.clientY-ln.current.y,Ye=J.clientX-ln.current.x;var ft;const ot=(ft=e.swipeDirections)!=null?ft:T$(q);!ee&&(Math.abs(Ye)>1||Math.abs(lt)>1)&&k(Math.abs(Ye)>Math.abs(lt)?"x":"y");let ht={x:0,y:0};const Rt=Mt=>1/(1.5+Math.abs(Mt)/20);if(ee==="y"){if(ot.includes("top")||ot.includes("bottom"))if(ot.includes("top")&&lt<0||ot.includes("bottom")&&lt>0)ht.y=lt;else{const Mt=lt*Rt(lt);ht.y=Math.abs(Mt)<Math.abs(lt)?Mt:lt}}else if(ee==="x"&&(ot.includes("left")||ot.includes("right")))if(ot.includes("left")&&Ye<0||ot.includes("right")&&Ye>0)ht.x=Ye;else{const Mt=Ye*Rt(Ye);ht.x=Math.abs(Mt)<Math.abs(Ye)?Mt:Ye}(Math.abs(ht.x)>0||Math.abs(ht.y)>0)&&Me(!0),(_e=Ne.current)==null||_e.style.setProperty("--swipe-amount-x",`${ht.x}px`),(De=Ne.current)==null||De.style.setProperty("--swipe-amount-y",`${ht.y}px`)}},tt&&!x.jsx&&Fe!=="loading"?we.createElement("button",{"aria-label":B,"data-disabled":yr,"data-close-button":!0,onClick:yr||!bt?()=>{}:()=>{bn(),x.onDismiss==null||x.onDismiss.call(x,x)},className:xs(O==null?void 0:O.closeButton,x==null||(a=x.classNames)==null?void 0:a.closeButton)},(it=G==null?void 0:G.close)!=null?it:h$):null,(Fe||x.icon||x.promise)&&x.icon!==null&&((G==null?void 0:G[Fe])!==null||x.icon)?we.createElement("div",{"data-icon":"",className:xs(O==null?void 0:O.icon,x==null||(l=x.classNames)==null?void 0:l.icon)},x.promise||x.type==="loading"&&!x.icon?x.icon||ks():null,x.type!=="loading"?kr:null):null,we.createElement("div",{"data-content":"",className:xs(O==null?void 0:O.content,x==null||(c=x.classNames)==null?void 0:c.content)},we.createElement("div",{"data-title":"",className:xs(O==null?void 0:O.title,x==null||(d=x.classNames)==null?void 0:d.title)},x.jsx?x.jsx:typeof x.title=="function"?x.title():x.title),x.description?we.createElement("div",{"data-description":"",className:xs(ce,Ht,O==null?void 0:O.description,x==null||(f=x.classNames)==null?void 0:f.description)},typeof x.description=="function"?x.description():x.description):null),we.isValidElement(x.cancel)?x.cancel:x.cancel&&jd(x.cancel)?we.createElement("button",{"data-button":!0,"data-cancel":!0,style:x.cancelButtonStyle||$,onClick:J=>{jd(x.cancel)&&bt&&(x.cancel.onClick==null||x.cancel.onClick.call(x.cancel,J),bn())},className:xs(O==null?void 0:O.cancelButton,x==null||(h=x.classNames)==null?void 0:h.cancelButton)},x.cancel.label):null,we.isValidElement(x.action)?x.action:x.action&&jd(x.action)?we.createElement("button",{"data-button":!0,"data-action":!0,style:x.actionButtonStyle||I,onClick:J=>{jd(x.action)&&(x.action.onClick==null||x.action.onClick.call(x.action,J),!J.defaultPrevented&&bn())},className:xs(O==null?void 0:O.actionButton,x==null||(p=x.classNames)==null?void 0:p.actionButton)},x.action.label):null)};function rj(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function M$(e,t){const r={};return[e,t].forEach((a,l)=>{const c=l===1,d=c?"--mobile-offset":"--offset",f=c?_$:j$;function h(p){["top","right","bottom","left"].forEach(v=>{r[`${d}-${v}`]=typeof p=="number"?`${p}px`:p})}typeof a=="number"||typeof a=="string"?h(a):typeof a=="object"?["top","right","bottom","left"].forEach(p=>{a[p]===void 0?r[`${d}-${p}`]=f:r[`${d}-${p}`]=typeof a[p]=="number"?`${a[p]}px`:a[p]}):h(f)}),r}const A$=we.forwardRef(function(t,r){const{invert:a,position:l="bottom-right",hotkey:c=["altKey","KeyT"],expand:d,closeButton:f,className:h,offset:p,mobileOffset:v,theme:x="light",richColors:b,duration:w,style:j,visibleToasts:_=w$,toastOptions:N,dir:C=rj(),gap:E=S$,icons:T,containerAriaLabel:M="Notifications"}=t,[R,L]=we.useState([]),H=we.useMemo(()=>Array.from(new Set([l].concat(R.filter(P=>P.position).map(P=>P.position)))),[R,l]),[$,I]=we.useState([]),[Y,ce]=we.useState(!1),[te,q]=we.useState(!1),[le,ue]=we.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=we.useRef(null),G=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=we.useRef(null),ee=we.useRef(!1),k=we.useCallback(P=>{L(V=>{var X;return(X=V.find(D=>D.id===P.id))!=null&&X.delete||hr.dismiss(P.id),V.filter(({id:D})=>D!==P.id)})},[]);return we.useEffect(()=>hr.subscribe(P=>{if(P.dismiss){requestAnimationFrame(()=>{L(V=>V.map(X=>X.id===P.id?{...X,delete:!0}:X))});return}setTimeout(()=>{Sj.flushSync(()=>{L(V=>{const X=V.findIndex(D=>D.id===P.id);return X!==-1?[...V.slice(0,X),{...V[X],...P},...V.slice(X+1)]:[P,...V]})})})}),[R]),we.useEffect(()=>{if(x!=="system"){ue(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ue("dark"):ue("light")),typeof window>"u")return;const P=window.matchMedia("(prefers-color-scheme: dark)");try{P.addEventListener("change",({matches:V})=>{ue(V?"dark":"light")})}catch{P.addListener(({matches:X})=>{try{ue(X?"dark":"light")}catch(D){console.error(D)}})}},[x]),we.useEffect(()=>{R.length<=1&&ce(!1)},[R]),we.useEffect(()=>{const P=V=>{var X;if(c.every(F=>V[F]||V.code===F)){var U;ce(!0),(U=O.current)==null||U.focus()}V.code==="Escape"&&(document.activeElement===O.current||(X=O.current)!=null&&X.contains(document.activeElement))&&ce(!1)};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[c]),we.useEffect(()=>{if(O.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,ee.current=!1)}},[O.current]),we.createElement("section",{ref:r,"aria-label":`${M} ${G}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},H.map((P,V)=>{var X;const[D,U]=P.split("-");return R.length?we.createElement("ol",{key:P,dir:C==="auto"?rj():C,tabIndex:-1,ref:O,className:h,"data-sonner-toaster":!0,"data-sonner-theme":le,"data-y-position":D,"data-lifted":Y&&R.length>1&&!d,"data-x-position":U,style:{"--front-toast-height":`${((X=$[0])==null?void 0:X.height)||0}px`,"--width":`${N$}px`,"--gap":`${E}px`,...j,...M$(p,v)},onBlur:F=>{ee.current&&!F.currentTarget.contains(F.relatedTarget)&&(ee.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||ee.current||(ee.current=!0,B.current=F.relatedTarget)},onMouseEnter:()=>ce(!0),onMouseMove:()=>ce(!0),onMouseLeave:()=>{te||ce(!1)},onDragEnd:()=>ce(!1),onPointerDown:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||q(!0)},onPointerUp:()=>q(!1)},R.filter(F=>!F.position&&V===0||F.position===P).map((F,K)=>{var ae,ge;return we.createElement(R$,{key:F.id,icons:T,index:K,toast:F,defaultRichColors:b,duration:(ae=N==null?void 0:N.duration)!=null?ae:w,className:N==null?void 0:N.className,descriptionClassName:N==null?void 0:N.descriptionClassName,invert:a,visibleToasts:_,closeButton:(ge=N==null?void 0:N.closeButton)!=null?ge:f,interacting:te,position:P,style:N==null?void 0:N.style,unstyled:N==null?void 0:N.unstyled,classNames:N==null?void 0:N.classNames,cancelButtonStyle:N==null?void 0:N.cancelButtonStyle,actionButtonStyle:N==null?void 0:N.actionButtonStyle,closeButtonAriaLabel:N==null?void 0:N.closeButtonAriaLabel,removeToast:k,toasts:R.filter(de=>de.position==F.position),heights:$.filter(de=>de.position==F.position),setHeights:I,expandByDefault:d,gap:E,expanded:Y,swipeDirections:t.swipeDirections})})):null}))});var kv="Progress",Dv=100,[k$,nH]=lr(kv),[D$,O$]=k$(kv),iE=m.forwardRef((e,t)=>{const{__scopeProgress:r,value:a=null,max:l,getValueLabel:c=P$,...d}=e;(l||l===0)&&!sj(l)&&console.error(L$(`${l}`,"Progress"));const f=sj(l)?l:Dv;a!==null&&!aj(a,f)&&console.error(I$(`${a}`,"Progress"));const h=aj(a,f)?a:null,p=Wd(h)?c(h,f):void 0;return s.jsx(D$,{scope:r,value:h,max:f,children:s.jsx(Je.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":Wd(h)?h:void 0,"aria-valuetext":p,role:"progressbar","data-state":cE(h,f),"data-value":h??void 0,"data-max":f,...d,ref:t})})});iE.displayName=kv;var lE="ProgressIndicator",oE=m.forwardRef((e,t)=>{const{__scopeProgress:r,...a}=e,l=O$(lE,r);return s.jsx(Je.div,{"data-state":cE(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...a,ref:t})});oE.displayName=lE;function P$(e,t){return`${Math.round(e/t*100)}%`}function cE(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Wd(e){return typeof e=="number"}function sj(e){return Wd(e)&&!isNaN(e)&&e>0}function aj(e,t){return Wd(e)&&!isNaN(e)&&e<=t&&e>=0}function L$(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Dv}\`.`}function I$(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Dv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var z$=iE,U$=oE;function $$({className:e,value:t,...r}){return s.jsx(z$,{"data-slot":"progress",className:Ce("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:s.jsx(U$,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}var Ov="Radio",[B$,uE]=lr(Ov),[H$,q$]=B$(Ov),dE=m.forwardRef((e,t)=>{const{__scopeRadio:r,name:a,checked:l=!1,required:c,disabled:d,value:f="on",onCheck:h,form:p,...v}=e,[x,b]=m.useState(null),w=_t(t,N=>b(N)),j=m.useRef(!1),_=x?p||!!x.closest("form"):!0;return s.jsxs(H$,{scope:r,checked:l,disabled:d,children:[s.jsx(Je.button,{type:"button",role:"radio","aria-checked":l,"data-state":mE(l),"data-disabled":d?"":void 0,disabled:d,value:f,...v,ref:w,onClick:ke(e.onClick,N=>{l||h==null||h(),_&&(j.current=N.isPropagationStopped(),j.current||N.stopPropagation())})}),_&&s.jsx(F$,{control:x,bubbles:!j.current,name:a,value:f,checked:l,required:c,disabled:d,form:p,style:{transform:"translateX(-100%)"}})]})});dE.displayName=Ov;var fE="RadioIndicator",hE=m.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:a,...l}=e,c=q$(fE,r);return s.jsx(Ar,{present:a||c.checked,children:s.jsx(Je.span,{"data-state":mE(c.checked),"data-disabled":c.disabled?"":void 0,...l,ref:t})})});hE.displayName=fE;var F$=e=>{const{control:t,checked:r,bubbles:a=!0,...l}=e,c=m.useRef(null),d=bv(r),f=Pg(t);return m.useEffect(()=>{const h=c.current,p=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(p,"checked").set;if(d!==r&&x){const b=new Event("click",{bubbles:a});x.call(h,r),h.dispatchEvent(b)}},[d,r,a]),s.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...l,tabIndex:-1,ref:c,style:{...e.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function mE(e){return e?"checked":"unchecked"}var V$=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Pv="RadioGroup",[Y$,rH]=lr(Pv,[uf,uE]),pE=uf(),gE=uE(),[G$,W$]=Y$(Pv),vE=m.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:a,defaultValue:l,value:c,required:d=!1,disabled:f=!1,orientation:h,dir:p,loop:v=!0,onValueChange:x,...b}=e,w=pE(r),j=tf(p),[_,N]=$a({prop:c,defaultProp:l,onChange:x});return s.jsx(G$,{scope:r,name:a,required:d,disabled:f,value:_,onValueChange:N,children:s.jsx(I1,{asChild:!0,...w,orientation:h,dir:j,loop:v,children:s.jsx(Je.div,{role:"radiogroup","aria-required":d,"aria-orientation":h,"data-disabled":f?"":void 0,dir:j,...b,ref:t})})})});vE.displayName=Pv;var xE="RadioGroupItem",yE=m.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:a,...l}=e,c=W$(xE,r),d=c.disabled||a,f=pE(r),h=gE(r),p=m.useRef(null),v=_t(t,p),x=c.value===l.value,b=m.useRef(!1);return m.useEffect(()=>{const w=_=>{V$.includes(_.key)&&(b.current=!0)},j=()=>b.current=!1;return document.addEventListener("keydown",w),document.addEventListener("keyup",j),()=>{document.removeEventListener("keydown",w),document.removeEventListener("keyup",j)}},[]),s.jsx(z1,{asChild:!0,...f,focusable:!d,active:x,children:s.jsx(dE,{disabled:d,required:c.required,checked:x,...h,...l,name:c.name,ref:v,onCheck:()=>c.onValueChange(l.value),onKeyDown:ke(w=>{w.key==="Enter"&&w.preventDefault()}),onFocus:ke(l.onFocus,()=>{var w;b.current&&((w=p.current)==null||w.click())})})})});yE.displayName=xE;var X$="RadioGroupIndicator",bE=m.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...a}=e,l=gE(r);return s.jsx(hE,{...l,...a,ref:t})});bE.displayName=X$;var K$=vE,Q$=yE,Z$=bE;function J$({className:e,...t}){return s.jsx(K$,{"data-slot":"radio-group",className:Ce("grid gap-3",e),...t})}function eB({className:e,...t}){return s.jsx(Q$,{"data-slot":"radio-group-item",className:Ce("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(Z$,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:s.jsx(wP,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}const tB={logoUrl:null,labName:"Laboratoire XYZ",addressLine1:"123 Rue Principale",cityPostalCode:"75001 Paris",phone:"01 23 45 67 89"},nB=({templates:e,selectedTemplateId:t,onSelectTemplate:r,disabled:a=!1})=>s.jsx(J$,{value:t,onValueChange:r,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",disabled:a,children:e.map(l=>s.jsxs(Ie,{htmlFor:l.id,className:Ce("border-2 rounded-lg p-4 flex flex-col items-center gap-4 cursor-pointer transition-colors hover:border-primary/80",t===l.id&&"border-primary ring-2 ring-primary ring-offset-2",a&&"cursor-not-allowed opacity-50"),children:[s.jsx(eB,{value:l.id,id:l.id,className:"sr-only"}),s.jsx("span",{className:"font-medium text-sm text-center",children:l.name}),s.jsxs(Te,{className:"w-full scale-75 origin-top border-dashed",children:[" ",s.jsx(Re,{className:"p-2",children:s.jsx(l.component,{data:tB,isPreview:!0})})]})]},l.id))}),rB="public",sB="header-logo",Np=[{id:"template1",name:"Classique (Sans Logo)",component:tr},{id:"template2",name:"Centré (Logo au Dessus)",component:Qa},{id:"template3",name:"Centré (encercle)",component:Za},{id:"template4",name:"Centré (encercle en %)",component:Ja}],Sp="template1",aB=()=>{var ue;const[e,t]=m.useState(null),[r,a]=m.useState({}),[l,c]=m.useState(null),[d,f]=m.useState(Sp),[h,p]=m.useState(null),[v,x]=m.useState(null),[b,w]=m.useState(!1),[j,_]=m.useState(null),[N,C]=m.useState(null),[E,T]=m.useState(!0),[M,R]=m.useState(!1),[L,H]=m.useState(null),$=m.useCallback(async()=>{T(!0),H(null);try{const{data:O,error:G}=await se.from("print_header_config").select("*").limit(1).maybeSingle();if(G)throw G;O?(t(O.id),a({lab_name:O.lab_name,address_line1:O.address_line1,address_line2:O.address_line2,city_postal_code:O.city_postal_code,phone:O.phone,email:O.email,website:O.website}),c(O.logo_url),f(O.selected_template||Sp)):(t(null),a({}),c(null),f(Sp))}catch(O){console.error("Erreur chargement configuration:",O),H(O instanceof Error?O.message:"Impossible de charger la configuration de l'en-tête.")}finally{T(!1)}},[]);m.useEffect(()=>{$()},[$]);const I=O=>{const{name:G,value:B}=O.target;a(ee=>({...ee,[G]:B}))},Y=O=>{var B;const G=(B=O.target.files)==null?void 0:B[0];if(h&&(URL.revokeObjectURL(h),p(null)),G){x(G),C(null);const ee=URL.createObjectURL(G);p(ee)}else x(null)};m.useEffect(()=>()=>{h&&URL.revokeObjectURL(h)},[h]);const ce=async()=>{var O;if(!v)return l;w(!0),C(null),_(0);try{const G=((O=v.name.split(".").pop())==null?void 0:O.toLowerCase())||"png",B=`${rB}/${sB}.${G}`,{error:ee}=await se.storage.from("logos").upload(B,v,{cacheControl:"3600",upsert:!0});if(ee)throw ee;const{data:k}=se.storage.from("logos").getPublicUrl(B);if(!(k!=null&&k.publicUrl))throw new Error("Impossible d'obtenir l'URL publique du logo.");const P=`${k.publicUrl}?t=${new Date().getTime()}`;return c(P),x(null),h&&(URL.revokeObjectURL(h),p(null)),P}catch(G){console.error("Erreur upload logo:",G);const B=G instanceof Error?G.message:"Échec de l'upload du logo.";return C(B),_p.error("Erreur Upload Logo",{description:B}),l}finally{w(!1),_(null)}},te=async O=>{var G,B,ee,k,P,V,X;O.preventDefault(),H(null),C(null),R(!0);try{let D=l;if(v&&(D=await ce(),!D||N)){H(N||"L'upload du logo a échoué. Veuillez réessayer."),R(!1);return}const U={lab_name:((G=r.lab_name)==null?void 0:G.trim())||null,address_line1:((B=r.address_line1)==null?void 0:B.trim())||null,address_line2:((ee=r.address_line2)==null?void 0:ee.trim())||null,city_postal_code:((k=r.city_postal_code)==null?void 0:k.trim())||null,phone:((P=r.phone)==null?void 0:P.trim())||null,email:((V=r.email)==null?void 0:V.trim())||null,website:((X=r.website)==null?void 0:X.trim())||null,logo_url:D,selected_template:d};let F=null,K=null;if(e){const{data:ae,error:ge}=await se.from("print_header_config").update(U).eq("id",e).select().single();F=ge,K=ae}else{const{data:ae,error:ge}=await se.from("print_header_config").insert(U).select().single();F=ge,K=ae,K!=null&&K.id&&t(K.id)}if(F)throw F;_p.success("Configuration Enregistrée",{description:"L'en-tête d'impression a été mis à jour avec succès.",duration:3e3})}catch(D){console.error("Erreur sauvegarde configuration:",D);const U=D instanceof Error?D.message:"Une erreur est survenue lors de l'enregistrement.";H(U),_p.error("Erreur Sauvegarde",{description:U})}finally{R(!1)}},q=m.useMemo(()=>{var O;return((O=Np.find(G=>G.id===d))==null?void 0:O.component)||tr},[d]),le=m.useMemo(()=>({logoUrl:h||l,labName:r.lab_name,addressLine1:r.address_line1,addressLine2:r.address_line2,cityPostalCode:r.city_postal_code,phone:r.phone,email:r.email,website:r.website}),[r,l,h]);return E?s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsx(W,{className:"h-8 w-3/4 mb-4"}),s.jsx(W,{className:"h-32 w-full"})," ",s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/2"})}),s.jsxs(Re,{className:"space-y-4",children:[s.jsx(W,{className:"h-9 w-full"}),s.jsx(W,{className:"h-9 w-full"}),s.jsx(W,{className:"h-9 w-full"})]})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/2"})}),s.jsxs(Re,{className:"space-y-4",children:[s.jsx(W,{className:"h-16 w-32 mx-auto"}),s.jsx(W,{className:"h-9 w-full"})]})]})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/2"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-24 w-full"})})]}),s.jsx(W,{className:"h-10 w-36 ml-auto"})," "]}):s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(as,{className:"h-6 w-6"}),"Configuration En-tête Impression/PDF"]}),L&&!M&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsxs(Pt,{children:[L," ",s.jsx(ne,{variant:"link",onClick:$,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),s.jsxs("form",{onSubmit:te,className:"space-y-6",children:[s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsxs(xt,{className:"flex items-center gap-2",children:[s.jsx(PP,{className:"h-5 w-5"})," Modèle d'En-tête"]}),s.jsx(mr,{children:"Choisissez la disposition de l'en-tête pour vos rapports."})]}),s.jsx(Re,{children:s.jsx(nB,{templates:Np,selectedTemplateId:d,onSelectTemplate:f,disabled:M||b})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(xt,{children:"Informations du Laboratoire"}),s.jsx(mr,{children:"Ces informations apparaîtront dans l'en-tête choisi."})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Ie,{htmlFor:"lab_name",children:"Nom du Laboratoire"}),s.jsx(Ge,{id:"lab_name",name:"lab_name",value:r.lab_name||"",onChange:I,disabled:M})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Ie,{htmlFor:"address_line1",children:"Adresse Ligne 1"}),s.jsx(Ge,{id:"address_line1",name:"address_line1",value:r.address_line1||"",onChange:I,disabled:M})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Ie,{htmlFor:"address_line2",children:"Adresse Ligne 2"}),s.jsx(Ge,{id:"address_line2",name:"address_line2",value:r.address_line2||"",onChange:I,disabled:M})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Ie,{htmlFor:"city_postal_code",children:"Ville & Code Postal"}),s.jsx(Ge,{id:"city_postal_code",name:"city_postal_code",value:r.city_postal_code||"",onChange:I,disabled:M})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Ie,{htmlFor:"phone",children:"Téléphone"}),s.jsx(Ge,{id:"phone",name:"phone",type:"tel",value:r.phone||"",onChange:I,disabled:M})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Ie,{htmlFor:"email",children:"E-mail"}),s.jsx(Ge,{id:"email",name:"email",type:"email",value:r.email||"",onChange:I,disabled:M})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Ie,{htmlFor:"website",children:"Site Web"}),s.jsx(Ge,{id:"website",name:"website",type:"url",value:r.website||"",onChange:I,disabled:M})]})]})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(xt,{children:"Logo du Laboratoire"})}),s.jsxs(Re,{className:"space-y-4",children:[s.jsx(Ie,{children:"Aperçu Actuel / Nouveau"}),s.jsxs(Ac,{className:"h-20 w-20 rounded-md border",children:[s.jsx(ef,{src:h||l||void 0,alt:"Logo",className:"object-contain"}),s.jsx(kc,{className:"rounded-md text-muted-foreground",children:s.jsx(gf,{})})]}),s.jsxs(Ie,{htmlFor:"logo-upload",className:Ce(Ul({variant:"outline"}),"cursor-pointer w-full",b||M&&"cursor-not-allowed opacity-50"),children:[" ",s.jsx(t3,{className:"mr-2 h-4 w-4"})," ",v?"Changer le logo...":"Choisir un logo..."," "]}),s.jsx(Ge,{id:"logo-upload",type:"file",accept:"image/png, image/jpeg, image/gif, image/svg+xml",onChange:Y,className:"hidden",disabled:b||M}),v&&!b&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Fichier : ",v.name]}),b&&s.jsx($$,{value:j,className:"w-full h-2"}),N&&!b&&s.jsxs(Dt,{variant:"destructive",className:"text-xs",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur Upload Précédente"}),s.jsx(Pt,{children:N})]})]})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsxs(xt,{children:["Aperçu de l'En-tête (Modèle:"," ",((ue=Np.find(O=>O.id===d))==null?void 0:ue.name)||d,")"]}),s.jsx(mr,{children:"Ceci est une prévisualisation basée sur le modèle sélectionné et les informations saisies."})]}),s.jsx(Re,{children:s.jsx(q,{data:le,isPreview:!0})})]}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsxs(ne,{type:"submit",disabled:M||b,children:[M?s.jsx($t,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(Bl,{className:"mr-2 h-4 w-4"}),"Enregistrer la Configuration"]})})]})]})},iB={pending:"default",approved:"warning",paid:"success"},lB={pending:"En attente",approved:"Approuvé",paid:"Payé"},Ep=10,oB=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(!0),[l,c]=m.useState(null),[d,f]=m.useState(""),[h,p]=m.useState(1),[v,x]=m.useState(0),b=qc(d,300),[w,j]=m.useState(null),[_,N]=m.useState(!1),[C,E]=m.useState(null),[T,M]=m.useState(()=>!sessionStorage.getItem("ristourne_access_granted")),[R,L]=m.useState(""),[H,$]=m.useState(null),[I,Y]=m.useState(null),[ce,te]=m.useState(!0);m.useEffect(()=>{(async()=>{te(!0);const{data:X,error:D}=await se.from("settings").select("ristourne_access_code").limit(1).single();!D&&X&&X.ristourne_access_code?Y(X.ristourne_access_code):Y(null),te(!1)})()},[]);const q=V=>{V.preventDefault(),R===I?(M(!1),L(""),$(null),sessionStorage.setItem("ristourne_access_granted","1")):$("Code incorrect. Veuillez réessayer.")},le=async()=>{a(!0),c(null);try{const{count:V}=await se.from("ristourne").select("id",{count:"exact",head:!0});x(V||0);const X=(h-1)*Ep,D=X+Ep-1,{data:U,error:F}=await se.from("ristourne").select(`
          *,
          doctor:doctor_id (
            id,
            full_name,
            hospital
          )
        `).order("created_date",{ascending:!1}).range(X,D);if(F)throw F;t(U||[])}catch(V){console.error("Erreur lors de la récupération des ristournes:",V),c((V instanceof Error?V.message:"")||"Une erreur est survenue lors du chargement des ristournes."),t([])}finally{a(!1)}};m.useEffect(()=>{le()},[h]);const ue=m.useMemo(()=>{let V=e;if(b){const X=b.toLowerCase();V=e.filter(D=>{var U,F;return((U=D.doctor)==null?void 0:U.full_name.toLowerCase().includes(X))||((F=D.doctor)==null?void 0:F.hospital)&&D.doctor.hospital.toLowerCase().includes(X)})}return V.slice().sort((X,D)=>new Date(D.created_date).getTime()-new Date(X.created_date).getTime())},[e,b]),O=Math.ceil(v/Ep),G=h>1,B=h<O,ee=V=>new Date(V).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),k=V=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(V),P=async()=>{if(w){N(!0),E(null);try{const{error:V}=await se.from("ristourne").delete().eq("id",w.id);if(V)throw V;j(null),le()}catch(V){E(V.message||"Erreur lors de la suppression")}finally{N(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsx(Ti,{open:T,children:s.jsxs(Ri,{className:"max-w-[350px]",children:[s.jsx(Mi,{children:s.jsx(Ai,{children:"Code d'accès requis"})}),s.jsxs("form",{onSubmit:q,className:"space-y-4",children:[s.jsx(Ge,{type:"password",placeholder:"Entrer le code d'accès",value:R,onChange:V=>L(V.target.value),disabled:ce,autoFocus:!0}),H&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsx(Pt,{children:H})]}),s.jsx(ql,{children:s.jsx(ne,{type:"submit",disabled:ce||!R,children:ce?"Chargement...":"Valider"})})]})]})}),!T&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(C_,{className:"h-6 w-6"}),"Gestion des Ristournes"]}),s.jsx(st,{to:"/ristournes/new",children:s.jsxs(ne,{children:[s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Nouvelle Ristourne"]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx($c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ge,{type:"search",placeholder:"Rechercher par médecin ou hôpital...",value:d,onChange:V=>f(V.target.value),className:"pl-10 w-full md:w-1/3 h-10",disabled:r})]}),r&&s.jsxs("div",{className:"border rounded-lg",children:[s.jsx(W,{className:"h-12 w-full rounded-t-lg"}),s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"})]})]}),!r&&l&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur de Chargement"}),s.jsxs(Pt,{children:[l," ",s.jsx(ne,{variant:"link",onClick:le,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),!r&&!l&&s.jsxs("div",{className:"border rounded-lg overflow-hidden bg-background",children:[s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Vt,{children:[s.jsx(pt,{children:"Date"}),s.jsx(pt,{children:"Médecin"}),s.jsx(pt,{children:"Hôpital"}),s.jsx(pt,{children:"Montant Total"}),s.jsx(pt,{children:"Statut"}),s.jsx(pt,{className:"text-right",children:"Actions"})]})}),s.jsx(la,{children:ue.length>0?ue.map(V=>{var X,D;return s.jsxs(Vt,{children:[s.jsx(Qe,{children:ee(V.created_date)}),s.jsx(Qe,{className:"font-medium",children:(X=V.doctor)==null?void 0:X.full_name}),s.jsx(Qe,{children:((D=V.doctor)==null?void 0:D.hospital)||s.jsx("span",{className:"italic text-muted-foreground",children:"N/A"})}),s.jsx(Qe,{children:k(V.total_fee)}),s.jsx(Qe,{children:s.jsx(ls,{variant:iB[V.status],children:lB[V.status]})}),s.jsxs(Qe,{className:"text-right",children:[s.jsx(st,{to:`/ristournes/${V.id}`,children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(Wr,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Modifier"}),s.jsx("span",{className:"sm:hidden",children:"Éditer"})]})}),s.jsxs(ne,{variant:"destructive",size:"sm",className:"ml-2",onClick:()=>j(V),disabled:_,children:[s.jsx(Bc,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Supprimer"}),s.jsx("span",{className:"sm:hidden",children:"Del"})]})]})]},V.id)}):s.jsx(Vt,{children:s.jsx(Qe,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:d?"Aucune ristourne ne correspond à votre recherche.":s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[s.jsx("p",{children:"Aucune ristourne n'a été créée."}),s.jsx(st,{to:"/ristournes/new",children:s.jsxs(ne,{variant:"link",className:"gap-2",children:[s.jsx(Fa,{className:"h-4 w-4"}),"Créer une ristourne"]})})]})})})})]}),s.jsxs("div",{className:"flex justify-between items-center py-3 px-2 border-t bg-muted text-xs",children:[s.jsxs("div",{children:["Page ",h," sur ",O]}),s.jsxs("div",{className:"space-x-2",children:[s.jsx(ne,{size:"sm",variant:"outline",onClick:()=>p(h-1),disabled:!G,children:"Précédent"}),s.jsx(ne,{size:"sm",variant:"outline",onClick:()=>p(h+1),disabled:!B,children:"Suivant"})]}),s.jsxs("div",{children:[v," résultats"]})]})]}),s.jsx(Ti,{open:!!w,onOpenChange:()=>j(null),children:s.jsxs(Ri,{children:[s.jsx(Mi,{children:s.jsx(Ai,{children:"Confirmer la suppression"})}),s.jsxs("div",{children:["Voulez-vous vraiment supprimer cette ristourne ? Cette action est irréversible.",C&&s.jsxs(Dt,{variant:"destructive",className:"mt-2",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsx(Pt,{children:C})]})]}),s.jsxs(ql,{children:[s.jsx(ne,{variant:"outline",onClick:()=>j(null),disabled:_,children:"Annuler"}),s.jsx(ne,{variant:"destructive",onClick:P,loading:_,children:"Supprimer"})]})]})})]})]})},ij=()=>{const e=ir(),{ristourneId:t}=vr(),r=!!t,[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(40),[p,v]=m.useState(100),[x,b]=m.useState(!1),[w,j]=m.useState([]),[_,N]=m.useState(""),[C,E]=m.useState(0),[T,M]=m.useState("pending"),[R,L]=m.useState([]),[H,$]=m.useState(!0),[I,Y]=m.useState(!1),[ce,te]=m.useState(null),q=[{value:"pending",label:"En attente"},{value:"paid",label:"Payé"}];m.useEffect(()=>{(async()=>{try{const{data:F,error:K}=await se.from("doctor").select("*");if(K){te("Erreur lors du chargement des médecins"),console.error("Error fetching doctors:",K);return}if(L(F||[]),r&&t){const{data:ae,error:ge}=await se.from("ristourne").select(`
              *,
              doctor:doctor_id(*),
              ristourne_patient_result(
                *,
                patient_result:patient_result_id(
                  *,
                  patient:patient_id(*)
                )
              )
            `).eq("id",t).single();if(ge){te("Erreur lors du chargement de la ristourne"),console.error("Error fetching ristourne:",ge);return}if(ae){l(ae.doctor),N(ae.notes||""),E(ae.total_fee),M(ae.status);const de=ae.ristourne_patient_result.map(Se=>({...Se.patient_result,calculatedFee:Se.fee_amount,isSelected:!0,isSelectedInitial:!0,patient:Se.patient_result.patient}));if(j(de),ae.doctor){const{data:Se}=await se.from("doctor_fee_config").select("*").eq("doctor_id",ae.doctor.id).order("effective_date",{ascending:!1}).limit(1).single();Se&&(d(Se),h(Se.normal_price_percentage),v(Se.insurance_price_percentage),await B(ae.doctor.id,Se,de))}}}}catch(F){console.error("Error:",F),te("Une erreur est survenue lors du chargement des données")}finally{$(!1)}})()},[r,t]);const le=(U,F)=>{const K=U.normal_price?U.normal_price*F.normal_price_percentage/100:0,ae=U.insurance_price?U.insurance_price*F.insurance_price_percentage/100:0;return Math.round(K+ae)},ue=m.useCallback((U,F)=>{if(!F)return U;const K=U.map(ge=>({...ge,calculatedFee:le(ge,F)})),ae=K.filter(ge=>ge.isSelected).reduce((ge,de)=>ge+de.calculatedFee,0);return E(ae),K},[]),O=(U,F)=>{j(K=>{const ae=K.map(ge=>ge.id===U?{...ge,isSelected:F}:ge);if(c){const ge=ae.filter(de=>de.isSelected).reduce((de,Se)=>de+Se.calculatedFee,0);E(ge)}return ae})},G=async()=>{if(a){b(!0);try{const U={doctor_id:a.id,normal_price_percentage:f,insurance_price_percentage:p,effective_date:new Date().toISOString()},{data:F,error:K}=await se.from("doctor_fee_config").insert(U).select().single();if(K)throw K;d(F),j(ae=>ue(ae,F)),await B(a.id,F,w.filter(ae=>ae.isSelected))}catch(U){console.error("Error saving fee config:",U),te(U.message||"Une erreur est survenue lors de la sauvegarde de la configuration")}finally{b(!1)}}},B=async(U,F,K)=>{let ae=[];K&&K.length>0&&(ae=K.map(pe=>pe.id));let ge=[];if(r&&t){const{data:pe,error:Pe}=await se.from("ristourne_patient_result").select("patient_result_id, ristourne(status, id)");!Pe&&Array.isArray(pe)&&(ge=pe.filter(be=>be.ristourne&&["paid","pending"].includes(be.ristourne.status)&&be.ristourne.id!==t).map(be=>be.patient_result_id))}else{const{data:pe,error:Pe}=await se.from("ristourne_patient_result").select("patient_result_id, ristourne(status)");!Pe&&Array.isArray(pe)&&(ge=pe.filter(be=>be.ristourne&&["paid","pending"].includes(be.ristourne.status)).map(be=>be.patient_result_id))}let de=se.from("patient_result").select("*, patient:patient_id(*)");if(de=de.eq("isFree",!1),ae.length>0?(de=de.or(`paid_status.eq.unpaid,or(paid_status.eq.paid,id.in.(${ae.join(",")}))`),de=de.eq("doctor_id",U)):de=de.eq("doctor_id",U).eq("paid_status","unpaid"),ge.length>0){const pe=ge.filter(Pe=>!ae.includes(Pe));pe.length>0&&(de=de.not("id","in",`(${pe.join(",")})`))}const{data:Se,error:Me}=await de;if(Me){te("Erreur lors du chargement des résultats"),console.error("Error fetching patient results:",Me);return}const at=new Map((K==null?void 0:K.map(pe=>[pe.id,pe]))||[]),nt=(Se||[]).map(pe=>{const Pe=at.get(pe.id);return{...pe,calculatedFee:(Pe==null?void 0:Pe.calculatedFee)||le(pe,F),isSelected:!!Pe}});j(nt);const ve=nt.filter(pe=>pe.isSelected).reduce((pe,Pe)=>pe+Pe.calculatedFee,0);E(ve)};m.useEffect(()=>{a?(async F=>{const{data:K,error:ae}=await se.from("doctor_fee_config").select("*").eq("doctor_id",F).order("effective_date",{ascending:!1}).limit(1).single();if(ae&&ae.code!=="PGRST116"){te("Erreur lors du chargement de la configuration des frais"),console.error("Error fetching doctor fee config:",ae);return}K?(d(K),h(K.normal_price_percentage),v(K.insurance_price_percentage),await B(F,K,w)):(d(null),h(40),v(100),j([]))})(a.id):(d(null),j([]),E(0))},[a]);const ee=U=>{const F=R.find(K=>K.id===U);l(F||null)},k=U=>{M(U)},P=async U=>{if(U.preventDefault(),!a){te("Veuillez sélectionner un médecin");return}const F=w.filter(K=>K.isSelected);Y(!0),te(null);try{if(r){const de=w.filter(Se=>Se.isSelectedInitial).map(Se=>Se.id).filter(Se=>!F.some(Me=>Me.id===Se));de.length>0&&await se.from("patient_result").update({paid_status:"unpaid"}).in("id",de)}const{data:K,error:ae}=await se.rpc("handle_ristourne_upsert",{p_ristourne_id:t||null,p_doctor_id:a.id,p_notes:_,p_total_fee:C,p_status:T,p_patient_results:F.map(ge=>({patient_result_id:ge.id,fee_amount:ge.calculatedFee}))});if(ae)throw ae;e("/ristournes",{state:{message:`Ristourne ${r?"modifiée":"créée"} avec succès.`}})}catch(K){console.error("Error saving ristourne:",K),te(K.message||"Une erreur est survenue lors de la sauvegarde")}finally{Y(!1)}};m.useEffect(()=>{r&&w.length>0&&j(U=>U.map(F=>({...F,isSelectedInitial:F.isSelectedInitial??F.isSelected})))},[r,w.length]);const V=w.length>0&&w.every(U=>U.isSelected),X=w.some(U=>U.isSelected),D=U=>{if(j(F=>F.map(K=>({...K,isSelected:U}))),c){const F=w.map(K=>({...K,isSelected:U})).filter(K=>K.isSelected).reduce((K,ae)=>K+ae.calculatedFee,0);E(F)}};return H?s.jsxs("div",{className:"container mx-auto p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(W,{className:"h-10 w-10"}),s.jsx(W,{className:"h-10 w-40"})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-8 w-3/4"}),s.jsx(W,{className:"h-4 w-1/2"})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-10 w-full"}),s.jsx(W,{className:"h-32 w-full"})]})]})]}):s.jsxs("div",{className:"ristourne-print-root container mx-auto p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsx(ne,{variant:"outline",size:"icon",onClick:()=>e("/ristournes"),children:s.jsx(En,{className:"h-4 w-4"})}),s.jsxs("h1",{className:"text-2xl font-bold",children:[r?"Modifier":"Nouvelle"," Ristourne"]}),s.jsx(ne,{variant:"default",className:"ml-auto",onClick:()=>window.print(),children:"Imprimer"})]}),ce&&s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsx(Pt,{children:ce})]}),s.jsxs("div",{className:"ristourne-print-summary  hidden print:block",children:[s.jsxs("h1",{children:["Ristourne: ",(a==null?void 0:a.full_name)||"-"]}),s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Patient"}),s.jsx("th",{children:"Date"}),s.jsx("th",{children:"Prix"}),s.jsx("th",{children:"Prix AMO"}),s.jsx("th",{children:"Montant"})]})}),s.jsx("tbody",{children:w.filter(U=>U.isSelected&&U.paid_status==="paid").length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,children:"Aucun résultat payé sélectionné"})}):w.filter(U=>U.isSelected&&U.paid_status==="paid").map(U=>{var F,K;return s.jsxs("tr",{children:[s.jsx("td",{children:U.patient.full_name}),s.jsx("td",{children:U.result_date?dt(new Date(U.result_date),"dd/MM/yyyy"):""}),s.jsxs("td",{children:[(F=U.normal_price)==null?void 0:F.toLocaleString()," "]}),s.jsxs("td",{children:[(K=U.insurance_price)==null?void 0:K.toLocaleString()," "]}),s.jsxs("td",{children:[U.calculatedFee.toLocaleString()," "]})]},U.id)})})]}),s.jsx("div",{className:"flex items-center justify-end",children:s.jsxs(ls,{variant:"secondary",className:"text-lg px-4 py-2",children:["Total: ",C.toLocaleString()," FCFA"]})})]}),s.jsxs("form",{className:"ristourne-print-area print:hidden",onSubmit:P,children:[s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(xt,{children:"Sélection du Médecin"}),s.jsx(mr,{children:"Sélectionnez le médecin pour lequel vous souhaitez créer une ristourne"})]}),s.jsx(Re,{children:s.jsxs(Qn,{value:a==null?void 0:a.id,onValueChange:ee,disabled:I,children:[s.jsx(Jn,{children:s.jsx(Zn,{placeholder:"Sélectionner un médecin..."})}),s.jsx(er,{children:R.map(U=>s.jsx(yt,{value:U.id,children:U.full_name},U.id))})]})})]}),a&&s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(xt,{children:"Configuration des Frais"}),s.jsx(mr,{children:c?"Modifier la configuration des frais du médecin":"Créer une nouvelle configuration des frais pour le médecin"})]}),s.jsx(Re,{children:s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"normalPrice",children:"Pourcentage Prix Normal"}),s.jsx(Ge,{id:"normalPrice",type:"number",min:"0",max:"100",value:f,onChange:U=>h(Number(U.target.value))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ie,{htmlFor:"insurancePrice",children:"Pourcentage Prix Assurance"}),s.jsx(Ge,{id:"insurancePrice",type:"number",min:"0",max:"100",value:p,onChange:U=>v(Number(U.target.value))})]})]})}),s.jsx(is,{children:s.jsxs(ne,{type:"button",onClick:G,disabled:x,children:[x&&s.jsx($t,{className:"mr-2 h-4 w-4 animate-spin"}),s.jsx(Bl,{className:"mr-2 h-4 w-4"}),c?"Mettre à jour":"Enregistrer"]})})]}),a&&c&&s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(xt,{children:"Sélection des Résultats"}),s.jsx(mr,{children:"Sélectionnez les résultats à inclure dans la ristourne"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"rounded-md border",children:s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Vt,{children:[s.jsx(pt,{className:"w-12",children:s.jsx(ea,{checked:V,indeterminate:X&&!V,onCheckedChange:U=>D(!!U),disabled:I||w.length===0,"aria-label":"Tout sélectionner"})}),s.jsx(pt,{children:"Patient"}),s.jsx(pt,{children:"Date"}),s.jsx(pt,{children:"Prix Normal"}),s.jsx(pt,{children:"Prix Assurance"}),s.jsx(pt,{className:"text-right",children:"Frais Calculés"})]})}),s.jsx(la,{children:w.length===0?s.jsx(Vt,{children:s.jsx(Qe,{colSpan:6,className:"text-center text-muted-foreground",children:"Aucun résultat non payé trouvé pour ce médecin"})}):w.map(U=>{var F,K;return s.jsxs(Vt,{children:[s.jsx(Qe,{children:s.jsx(ea,{checked:U.isSelected,onCheckedChange:ae=>O(U.id,ae),disabled:I})}),s.jsx(Qe,{children:U.patient.full_name}),s.jsx(Qe,{children:U.result_date?dt(new Date(U.result_date),"dd/MM/yyyy"):""}),s.jsxs(Qe,{children:[(F=U.normal_price)==null?void 0:F.toLocaleString()," FCFA"]}),s.jsxs(Qe,{children:[(K=U.insurance_price)==null?void 0:K.toLocaleString()," FCFA"]}),s.jsxs(Qe,{className:"text-right font-medium",children:[U.calculatedFee.toLocaleString()," FCFA"]})]},U.id)})})]})}),s.jsx("div",{className:"mt-4 flex justify-end items-center gap-2 print:block",children:s.jsxs(ls,{variant:"secondary",className:"text-lg px-4 py-2",children:["Total: ",C.toLocaleString()," FCFA"]})})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(xt,{children:"Statut"}),s.jsx(mr,{children:"Sélectionnez le statut de la ristourne"})]}),s.jsx(Re,{children:s.jsxs(Qn,{value:T,onValueChange:k,children:[s.jsx(Jn,{children:s.jsx(Zn,{placeholder:"Sélectionner un statut"})}),s.jsx(er,{children:q.map(U=>s.jsx(yt,{value:U.value,children:U.label},U.value))})]})})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(xt,{children:"Notes"}),s.jsx(mr,{children:"Ajoutez des notes ou commentaires optionnels"})]}),s.jsx(Re,{children:s.jsx(Cc,{value:_,onChange:U=>N(U.target.value),placeholder:"Notes ou commentaires...",disabled:I})})]}),s.jsx(Te,{children:s.jsxs(is,{className:"flex justify-end space-x-4",children:[s.jsx(ne,{type:"button",variant:"outline",onClick:()=>e("/ristournes"),disabled:I,children:"Annuler"}),s.jsxs(ne,{type:"submit",disabled:I||!c,children:[I&&s.jsx($t,{className:"mr-2 h-4 w-4 animate-spin"}),s.jsx(Bl,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})]})})]})]})},cB=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(""),[l,c]=m.useState("category"),[d,f]=m.useState(!1),[h,p]=m.useState(null),[v,x]=m.useState(null),b=async()=>{f(!0),p(null);const{data:_,error:N}=await se.from("skip_range_check").select("id, value, type").order("type").order("value");!N&&_?t(_):p("Erreur lors du chargement des valeurs."),f(!1)};m.useEffect(()=>{b()},[]);const w=async _=>{if(_.preventDefault(),!r.trim())return;f(!0),p(null);const{error:N}=await se.from("skip_range_check").insert({value:r.trim(),type:l});N?p("Erreur lors de l'ajout."):(a(""),b()),f(!1)},j=async _=>{f(!0),p(null);const{error:N}=await se.from("skip_range_check").delete().eq("id",_);N?p("Erreur lors de la suppression."):b(),f(!1)};return s.jsx("div",{className:"max-w-xl mx-auto mt-10",children:s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(xt,{children:"Gestion des valeurs à ignorer pour le contrôle des plages"})}),s.jsxs(Re,{children:[s.jsxs("form",{onSubmit:w,className:"flex gap-2 mb-6",children:[s.jsx(Ge,{placeholder:"Nom de la catégorie ou du test type",value:r,onChange:_=>a(_.target.value),disabled:d,required:!0}),s.jsxs(Qn,{value:l,onValueChange:_=>c(_),children:[s.jsx(Jn,{className:"w-32",children:s.jsx(Zn,{})}),s.jsxs(er,{children:[s.jsx(yt,{value:"category",children:"Catégorie"}),s.jsx(yt,{value:"test_type",children:"Test Type"})]})]}),s.jsx(ne,{type:"submit",disabled:d,children:"Ajouter"})]}),h&&s.jsx("div",{className:"text-red-500 mb-2",children:h}),d?s.jsx("div",{children:"Chargement…"}):s.jsx("ul",{className:"space-y-2",children:e.map(({id:_,value:N,type:C})=>s.jsxs("li",{className:"flex items-center justify-between border-b pb-2",children:[s.jsxs("span",{children:[s.jsxs("span",{className:"font-semibold",children:[C==="category"?"Catégorie":"Test Type",":"]})," ",N]}),s.jsxs(wc,{children:[s.jsx(wf,{asChild:!0,children:s.jsx(ne,{variant:"destructive",size:"sm",disabled:d,onClick:()=>x(_),children:"Supprimer"})}),s.jsxs(jf,{children:[s.jsxs(_f,{children:[s.jsx(Sf,{children:"Confirmer la suppression"}),s.jsx(Ef,{children:"Voulez-vous vraiment supprimer cette valeur à ignorer ? Cette action est irréversible."})]}),s.jsxs(Nf,{children:[s.jsx(Cf,{asChild:!0,children:s.jsx(ne,{variant:"outline",onClick:()=>x(null),children:"Annuler"})}),s.jsx(av,{asChild:!0,children:s.jsx(ne,{variant:"destructive",onClick:async()=>{await j(_),x(null)},children:"Supprimer"})})]})]})]})]},_))})]})]})})},uB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},dB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},fB=()=>{const{resultId:e}=vr();ir();const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(null),[p,v]=m.useState(!0),[x,b]=m.useState(!1),[w,j]=m.useState(null),[_,N]=m.useState(null),[C,E]=m.useState(""),[T,M]=m.useState(!1),[R,L]=m.useState(""),[H,$]=m.useState(""),[I,Y]=m.useState(!1),[ce,te]=m.useState(null),q=[{id:"template1",component:tr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],le="template1",[ue,O]=m.useState(null),[G,B]=m.useState(!0),ee=async()=>{if(!e){j("ID du résultat manquant."),v(!1);return}v(!0),j(null),N(null),r(null),l(null),d(null),h(null),B(!0),O(null);try{const{data:F,error:K}=await se.from("patient_result").select("*").eq("id",e).single();if(K)throw K;if(!F)throw new Error("Résultat non trouvé.");r(F);const[ae,ge,de,Se]=await Promise.all([se.from("patient").select("*").eq("id",F.patient_id).single(),se.from("doctor").select("*").eq("id",F.doctor_id).single(),se.from("protidogramme").select("*").eq("result_id",e).maybeSingle(),se.from("print_header_config").select("*").limit(1).maybeSingle()]);ae.error&&console.warn("Erreur chargement patient:",ae.error.message),ge.error&&console.warn("Erreur chargement médecin:",ge.error.message),l(ae.data),d(ge.data),h(de.data||null),O(Se.data),B(!1)}catch(F){console.error("Erreur chargement détails du résultat:",F),j(F.message||"Une erreur est survenue lors du chargement du résultat.")}finally{v(!1)}};m.useEffect(()=>{ee()},[e]),m.useEffect(()=>{L((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),$((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const k=m.useCallback(async F=>{if(e)try{const{error:K}=await se.from("patient_result").update({description:F}).eq("id",e);if(K)throw K}catch(K){console.error("Error saving description:",K)}},[e]);m.useEffect(()=>{const F=setTimeout(()=>{C!==(t==null?void 0:t.description)&&k(C)},1e3);return()=>clearTimeout(F)},[C,t==null?void 0:t.description,k]);const P=m.useCallback(async()=>{Y(!0),te(null);try{const F=R!==""?Number(R):null,K=H!==""?Number(H):null;if(R!==""&&isNaN(F)||H!==""&&isNaN(K)){te("Les prix doivent être des nombres valides."),Y(!1);return}const{error:ae,data:ge}=await se.from("patient_result").update({normal_price:F,insurance_price:K}).eq("id",t.id).select().single();if(ae)throw ae;r(de=>de&&{...de,normal_price:F,insurance_price:K}),M(!1)}catch(F){te(F.message||"Erreur lors de la sauvegarde des prix.")}finally{Y(!1)}},[t,R,H]),V=async F=>{if(!(!t||F===t.status)){b(!0),N(null);try{const{data:K,error:ae}=await se.from("patient_result").update({status:F}).eq("id",t.id).select().single();if(ae)throw ae;r(K||(ge=>ge?{...ge,status:F}:null))}catch(K){console.error("Erreur mise à jour statut:",K),N(K.message||"Impossible de mettre à jour le statut.")}finally{b(!1)}}},X=(F,K,ae,ge)=>{const de=F;return s.jsxs("div",{className:Ce("flex items-start space-x-3",ge),children:[s.jsx(de,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:K}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:ae||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},D=m.useMemo(()=>{var K;const F=(ue==null?void 0:ue.selected_template)||le;return((K=q.find(ae=>ae.id===F))==null?void 0:K.component)||tr},[ue]),U=m.useMemo(()=>({logoUrl:(ue==null?void 0:ue.logo_url)||null,labName:ue==null?void 0:ue.lab_name,addressLine1:ue==null?void 0:ue.address_line1,addressLine2:ue==null?void 0:ue.address_line2,cityPostalCode:ue==null?void 0:ue.city_postal_code,phone:ue==null?void 0:ue.phone,email:ue==null?void 0:ue.email,website:ue==null?void 0:ue.website}),[ue]);return p?s.jsxs("div",{className:"space-y-6",children:[s.jsx(W,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-20 w-full"})})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-20 w-full"})})]})]}):w?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(st,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsxs(Pt,{children:[w," ",s.jsx(ne,{variant:"link",onClick:ee,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(st,{to:a?`/patients/${a.id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(as,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),s.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[ue?s.jsx("div",{className:"mb-2 print:mb-0",children:s.jsx(D,{data:U,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Dt,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"En-tête Manquant"}),s.jsxs(Pt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(st,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Gr,{className:"my-2 print:my-0 print:border-none"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs(Te,{className:"overflow-hidden print:shadow-none",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[X(Xe,"NOM PRENOM",a==null?void 0:a.full_name),X(Xe,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),X(vn,"Date Naissance",a!=null&&a.date_of_birth?dt(Qt(a.date_of_birth),"P",{locale:Xt}):null),s.jsx("div",{className:"hidden print:block",children:X(vn,"Date Résultat",t.result_date?dt(Qt(t.result_date),"Pp",{locale:Xt}):null)})]})]}),s.jsxs(Te,{className:"overflow-hidden print:shadow-none _print:border-none",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[X(Bt,"NOM PRENOM",c==null?void 0:c.full_name),X(xn,"Téléphone",c==null?void 0:c.phone),X(Xe,"Provenance",c==null?void 0:c.hospital)]})]}),s.jsxs(Te,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[X(vn,"Date Résultat",t.result_date?dt(Qt(t.result_date),"Pp",{locale:Xt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),T?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:R,onChange:F=>L(F.target.value),disabled:I}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:R,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),T?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:H,onChange:F=>$(F.target.value),disabled:I}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:H,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:T?s.jsxs(s.Fragment,{children:[s.jsxs(ne,{size:"xs",variant:"secondary",onClick:P,disabled:I,children:[I?s.jsx($t,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>M(!1),disabled:I,children:"Annuler"})]}):s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>M(!0),children:"Modifier Prix"})}),ce&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:ce})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Xe,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Qn,{value:t.status??"",onValueChange:F=>V(F),disabled:x,children:[s.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",s.jsx(Zn,{placeholder:"Changer statut..."})," "]}),s.jsxs(er,{children:[s.jsx(yt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(yt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(yt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ii,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),x&&s.jsx($t,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),_&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:_}),s.jsx(ls,{variant:uB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:dB(t.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]}),X(Xe,"NOM PRENOM",a==null?void 0:a.full_name),X(Xe,"ID Unique",a==null?void 0:a.patient_unique_id),X(xn,"Téléphone",a==null?void 0:a.phone)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),X(Bt,"NOM PRENOM",c==null?void 0:c.full_name),X(xn,"Téléphone",c==null?void 0:c.phone),X(Xe,"Hôpital",c==null?void 0:c.hospital)]})]}),s.jsxs(Te,{className:"shadow print:shadow-none print:border-none",children:[s.jsx(Ae,{className:"flex-row items-center gap-2 print:hidden",children:s.jsx(xt,{className:"flex-1 text-lg",children:"Protidogramme"})}),s.jsx(Re,{children:s.jsx(hB,{})})]})]})," "]}):s.jsx("div",{children:"Résultat non trouvé."})},hB=()=>{const{resultId:e}=vr(),[t,r]=m.useState(null),[a,l]=m.useState(!0),[c,d]=m.useState(null),[f,h]=m.useState(!1),[p,v]=m.useState(""),[x,b]=m.useState(null),[w,j]=m.useState(null),[_,N]=m.useState(!1),[C,E]=m.useState(null),T=m.useRef(null);m.useEffect(()=>{e&&(l(!0),d(null),se.from("protidogramme").select("*").eq("result_id",e).single().then(({data:$,error:I})=>{I&&I.code!=="PGRST116"&&d("Erreur de chargement"),r($),v(($==null?void 0:$.description)||""),j($!=null&&$.image?M($.image):null),l(!1)}))},[e,f]);function M($){return se.storage.from("images").getPublicUrl($).data.publicUrl}function R($){var Y;const I=((Y=$.target.files)==null?void 0:Y[0])||null;b(I),j(I?URL.createObjectURL(I):null)}async function L($){if($.preventDefault(),!e)return;N(!0),E(null);let I=(t==null?void 0:t.image)||null;try{if(x){const ce=x.name.split(".").pop(),te=`protidogramme/${e}_${Date.now()}.${ce}`,{error:q}=await se.storage.from("images").upload(te,x,{upsert:!0});if(q){E("Erreur lors de l'upload de l'image"),N(!1),console.error(q);return}I=te}const{error:Y}=await se.from("protidogramme").upsert({result_id:e,image:I,description:p,updated_at:new Date().toISOString()},{onConflict:"result_id"});if(Y){E("Erreur lors de la sauvegarde"),N(!1),console.error(Y);return}h(!1),b(null)}catch(Y){E("Erreur inattendue lors de la sauvegarde"),console.error(Y)}finally{N(!1)}}function H(){window.print()}return a?s.jsxs("div",{className:"max-w-xl mx-auto py-10",children:[s.jsx(W,{className:"h-40 w-full mb-4"}),s.jsx(W,{className:"h-6 w-1/2"})]}):s.jsxs("div",{className:"max-w-xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 print:hidden",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Protidogramme"}),s.jsx("div",{className:"flex gap-2",children:!f&&s.jsxs(ne,{variant:"outline",size:"sm",onClick:H,children:[s.jsx(vf,{className:"w-4 h-4 mr-1"})," Imprimer"]})})]}),s.jsxs(Te,{className:"shadow print:shadow-none print:border-none",children:[s.jsxs(Ae,{className:"flex-row items-center gap-2 print:hidden",children:[s.jsx(xt,{className:"flex-1 text-lg",children:f?t?"Modifier":"Ajouter":"Aperçu"}),!f&&s.jsxs(ne,{size:"sm",variant:"secondary",onClick:()=>h(!0),children:[s.jsx(Wr,{className:"w-4 h-4 mr-1"})," Modifier"]})]}),s.jsx(Re,{children:f?s.jsxs("form",{className:"space-y-4",onSubmit:L,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block mb-1 font-medium",children:"Image"}),w&&s.jsx("img",{src:w,alt:"Aperçu",className:"max-h-60 rounded  mb-2"}),s.jsx(Ge,{type:"file",accept:"image/*",onChange:R,ref:T}),C&&s.jsx("div",{className:"text-red-500 text-sm mt-1",children:C})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block mb-1 font-medium",children:"Description"}),s.jsx(Cc,{value:p,onChange:$=>v($.target.value),rows:4,required:!0,className:"resize-vertical"})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx(ne,{type:"submit",disabled:_,children:_?s.jsxs(s.Fragment,{children:[s.jsx($t,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bl,{className:"mr-2 h-4 w-4"}),"Sauvegarder"]})}),s.jsxs(ne,{type:"button",variant:"outline",onClick:()=>{h(!1),E(null),b(null),j(t!=null&&t.image?M(t.image):null),v((t==null?void 0:t.description)||"")},children:[s.jsx(xf,{className:"w-4 h-4 mr-1"})," Annuler"]})]})]}):s.jsxs("div",{className:"print:block",children:[(t==null?void 0:t.image)&&s.jsx("img",{src:M(t.image),alt:"Protidogramme",className:"max-h-96 mb-4 rounded border mx-auto print:max-h-[450px]",style:{maxWidth:"100%"}}),s.jsx("div",{className:"prose prose-sm print:prose print:max-w-full print:break-words",children:t!=null&&t.description?s.jsxs("div",{children:[" ",t.description.split(`
`).map($=>s.jsxs("div",{children:[" ",$," "]},$))," "]}):s.jsx("span",{className:"text-muted-foreground",children:"Aucune description"})}),s.jsx("div",{className:"mt-4",children:s.jsx(ao,{date:new Date().toISOString()||""})})]})})]})]})},mB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},pB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},gB=()=>{const{resultId:e}=vr();ir();const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(!0),[p,v]=m.useState(!1),[x,b]=m.useState(null),[w,j]=m.useState(null),[_,N]=m.useState(""),[C,E]=m.useState(!1),[T,M]=m.useState(""),[R,L]=m.useState(""),[H,$]=m.useState(!1),[I,Y]=m.useState(null),ce=[{id:"template1",component:tr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],te="template1",[q,le]=m.useState(null),[ue,O]=m.useState(!0),[G,B]=m.useState(null),[ee,k]=m.useState(!0);m.useEffect(()=>{(async()=>{if(k(!0),!e)return;const{data:Ne,error:Oe}=await se.from("atbs_result").select("id, nature_prelevement, souche").eq("result_id",e).single();Ne&&B(Ne.id),k(!1)})()},[e]);const P=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),r(null),l(null),d(null),O(!0),le(null);try{const{data:be,error:Ne}=await se.from("patient_result").select("*").eq("id",e).single();if(Ne)throw Ne;if(!be)throw new Error("Résultat non trouvé.");r(be);const[Oe,We,Fe]=await Promise.all([se.from("patient").select("*").eq("id",be.patient_id).single(),se.from("doctor").select("*").eq("id",be.doctor_id).single(),se.from("print_header_config").select("*").limit(1).maybeSingle()]);Oe.error&&console.warn("Erreur chargement patient:",Oe.error.message),We.error&&console.warn("Erreur chargement médecin:",We.error.message),l(Oe.data),d(We.data),le(Fe.data),O(!1)}catch(be){console.error("Erreur chargement détails du résultat:",be),b(be.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{P()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),L((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const V=m.useCallback(async be=>{if(e)try{const{error:Ne}=await se.from("patient_result").update({description:be}).eq("id",e);if(Ne)throw Ne}catch(Ne){console.error("Error saving description:",Ne)}},[e]);m.useEffect(()=>{const be=setTimeout(()=>{_!==(t==null?void 0:t.description)&&V(_)},1e3);return()=>clearTimeout(be)},[_,t==null?void 0:t.description,V]);const X=m.useCallback(async()=>{$(!0),Y(null);try{const be=T!==""?Number(T):null,Ne=R!==""?Number(R):null;if(T!==""&&isNaN(be)||R!==""&&isNaN(Ne)){Y("Les prix doivent être des nombres valides."),$(!1);return}const{error:Oe,data:We}=await se.from("patient_result").update({normal_price:be,insurance_price:Ne}).eq("id",t.id).select().single();if(Oe)throw Oe;r(Fe=>Fe&&{...Fe,normal_price:be,insurance_price:Ne}),E(!1)}catch(be){Y(be.message||"Erreur lors de la sauvegarde des prix.")}finally{$(!1)}},[t,T,R]),D=async be=>{if(!(!t||be===t.status)){v(!0),j(null);try{const{data:Ne,error:Oe}=await se.from("patient_result").update({status:be}).eq("id",t.id).select().single();if(Oe)throw Oe;r(Ne||(We=>We?{...We,status:be}:null))}catch(Ne){console.error("Erreur mise à jour statut:",Ne),j(Ne.message||"Impossible de mettre à jour le statut.")}finally{v(!1)}}},[U,F]=m.useState([]),[K,ae]=m.useState(!1);m.useEffect(()=>{e&&(ae(!0),se.from("atbs_result").select("*").eq("result_id",e).then(({data:be})=>{F(be||[]),ae(!1)}))},[e]);const[ge,de]=m.useState([]),Se=be=>{de(Ne=>Ne.includes(be)?Ne.filter(Oe=>Oe!==be):[...Ne,be])},Me=(be,Ne,Oe,We)=>{const Fe=be;return s.jsxs("div",{className:Ce("flex items-start space-x-3",We),children:[s.jsx(Fe,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:Ne}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:Oe||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},at=m.useMemo(()=>{var Ne;const be=(q==null?void 0:q.selected_template)||te;return((Ne=ce.find(Oe=>Oe.id===be))==null?void 0:Ne.component)||tr},[q]),nt=m.useMemo(()=>({logoUrl:(q==null?void 0:q.logo_url)||null,labName:q==null?void 0:q.lab_name,addressLine1:q==null?void 0:q.address_line1,addressLine2:q==null?void 0:q.address_line2,cityPostalCode:q==null?void 0:q.city_postal_code,phone:q==null?void 0:q.phone,email:q==null?void 0:q.email,website:q==null?void 0:q.website}),[q]),[ve,pe]=m.useState(!1),Pe=async()=>{if(e){pe(!0);try{const{data:be,error:Ne}=await se.from("atbs_result").insert({result_id:e}).select("id");if(Ne||!be||!be[0])throw Ne;const Oe=be[0].id,{data:We,error:Fe}=await se.from("atbs").select("id");if(Fe||!We)throw Fe;const bt=We.map(Nt=>({atbs_result_id:Oe,atb_id:Nt.id}));bt.length>0&&await se.from("atbs_result_atb").insert(bt),window.location.reload()}catch{pe(!1)}}};return m.useEffect(()=>!e||f?void 0:((async()=>{const{data:Ne,error:Oe}=await se.from("atbs_result").select("id").eq("result_id",e);if(Oe){console.error("Erreur lors de la vérification d'atbs_result:",Oe);return}if(Ne&&Ne.length>0)return;const{data:We,error:Fe}=await se.from("atbs_result").insert({result_id:e}).select("id").single();if(Fe||!We){console.error("Erreur lors de la création d'atbs_result:",Fe);return}const{data:bt,error:Nt}=await se.from("atbs").select("id");if(Nt||!bt){console.error("Erreur lors de la récupération des ATBs:",Nt);return}const Ht=bt.map(Be=>({atbs_result_id:We.id,atb_id:Be.id}));if(Ht.length>0){const{error:Be}=await se.from("atbs_result_atb").insert(Ht);Be&&console.error("Erreur lors de la création des atbs_result_atb:",Be)}})(),()=>{}),[e,f]),f?s.jsxs("div",{className:"space-y-6",children:[s.jsx(W,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-20 w-full"})})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-20 w-full"})})]})]}):x?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(st,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsxs(Pt,{children:[x," ",s.jsx(ne,{variant:"link",onClick:P,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(st,{to:a?`/patients/${a.id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(as,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]}),s.jsxs("div",{className:"flex justify-end",children:[s.jsx(ne,{variant:"default",onClick:()=>window.print(),children:"Imprimer"}),s.jsx(ne,{variant:"secondary",onClick:Pe,disabled:ve,children:ve?"Création...":"Créer un nouvel ATB Résultat"})]})]}),s.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[q?s.jsx("div",{className:"mb-2 print:mb-0",children:s.jsx(at,{data:nt,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Dt,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"En-tête Manquant"}),s.jsxs(Pt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(st,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Gr,{className:"my-2 print:my-0 print:border-none print:hidden"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs(Te,{className:"overflow-hidden print:shadow-none",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Me(Xe,"NOM PRENOM",a==null?void 0:a.full_name),Me(Xe,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),Me(vn,"Date Naissance",a!=null&&a.date_of_birth?dt(Qt(a.date_of_birth),"P",{locale:Xt}):null),s.jsx("div",{className:"hidden print:block",children:Me(vn,"Date Résultat",t.result_date?dt(Qt(t.result_date),"Pp",{locale:Xt}):null)})]})]}),s.jsxs(Te,{className:"overflow-hidden print:shadow-none _print:border-none",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Me(Bt,"NOM PRENOM",c==null?void 0:c.full_name),Me(xn,"Téléphone",c==null?void 0:c.phone),Me(Xe,"Provenance",c==null?void 0:c.hospital)]})]}),s.jsxs(Te,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Me(vn,"Date Résultat",t.result_date?dt(Qt(t.result_date),"Pp",{locale:Xt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),C?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:be=>M(be.target.value),disabled:H}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),C?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:R,onChange:be=>L(be.target.value),disabled:H}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:R,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:C?s.jsxs(s.Fragment,{children:[s.jsxs(ne,{size:"xs",variant:"secondary",onClick:X,disabled:H,children:[H?s.jsx($t,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:H,children:"Annuler"})]}):s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),I&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:I})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Xe,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Qn,{value:t.status??"",onValueChange:be=>D(be),disabled:p,children:[s.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[s.jsx(Zn,{placeholder:"Changer statut..."})," "]}),s.jsxs(er,{children:[s.jsx(yt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(yt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(yt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ii,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&s.jsx($t,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),s.jsx(ls,{variant:mB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:pB(t.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden ",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]}),Me(Xe,"NOM PRENOM",a==null?void 0:a.full_name),Me(Xe,"ID Unique",a==null?void 0:a.patient_unique_id),Me(xn,"Téléphone",a==null?void 0:a.phone)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),Me(Bt,"NOM PRENOM",c==null?void 0:c.full_name),Me(xn,"Téléphone",c==null?void 0:c.phone),Me(Xe,"Hôpital",c==null?void 0:c.hospital)]})]}),s.jsxs("div",{className:"flex flex-col items-center gap-2 mt-2",children:[s.jsx(Ge,{className:"text-2xl font-bold text-center w-auto",value:_||"ANTIBIOGRAMME",onChange:be=>N(be.target.value),style:{maxWidth:400}}),s.jsx("div",{className:"w-full mt-0",children:K?s.jsx("div",{className:"text-center",children:"Chargement des antibiogrammes..."}):U.length===0?s.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[s.jsx("div",{className:"text-center text-muted-foreground",children:"Aucun antibiogramme trouvé."}),s.jsx(ne,{onClick:()=>window.location.reload(),className:"mx-auto",children:"Creer"})]}):s.jsx("div",{className:"flex flex-col gap-8 mt-0",children:U.map(be=>s.jsxs("div",{className:ge.length>0&&!ge.includes(be.id)?"print:hidden":"",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 print:hidden",children:[s.jsx("input",{type:"checkbox",checked:ge.length===0||ge.includes(be.id),onChange:()=>Se(be.id),id:`print-checkbox-${be.id}`}),s.jsx("label",{htmlFor:`print-checkbox-${be.id}`,className:"text-sm",children:"Inclure pour impression"})]}),s.jsx(vB,{resultId:be.id})]},be.id))})})]})," ",s.jsx("style",{children:`
        @media print {
          .report-content table {
            font-size: 16px;
            width: 100%;
          }
          .report-content th, .report-content td {
            padding: 4px 4px !important;
            font-size: 16px;
          }
          .report-content {
            padding: 2px !important;
            margin: 0 !important;
          }
          .report-content table {
            border-collapse: collapse;
          }
          .report-content th, .report-content td {
            border: 1px solid #ccc;
          }
        }
      `})]})]}):s.jsx("div",{children:"Résultat non trouvé."})},vB=({resultId:e})=>{const[t,r]=m.useState([]),[a,l]=m.useState(null),[c,d]=m.useState([]),[f,h]=m.useState({}),[p,v]=m.useState(!0),[x,b]=m.useState(!1),[w,j]=m.useState(null),[_,N]=m.useState(""),[C,E]=m.useState("");m.useEffect(()=>{(async()=>{if(v(!0),!e)return;const{data:L}=await se.from("atbs_result").select("*").eq("id",e);if(!L||L.length===0){v(!1);return}const H=L[0].id;l(H),N(L[0].nature_prelement),E(L[0].souche);const{data:$}=await se.from("atbs").select("id, name");r($||[]);const{data:I}=await se.from("atbs_result_atb").select("id, atb_id, sensible, intermediaire, resistant").eq("atbs_result_id",H);d(I||[]);const Y={};(I||[]).forEach(ce=>{Y[ce.atb_id]={S:!!ce.sensible,I:!!ce.intermediaire,R:!!ce.resistant}}),h(Y),v(!1)})()},[e]);const T=(R,L)=>{h(H=>{var $;return{...H,[R]:{...H[R],[L]:!(($=H[R])!=null&&$[L])}}})},M=async()=>{var R,L,H;if(a){b(!0),j(null);try{for(const $ of t){const I=c.find(Y=>Y.atb_id===$.id);I&&await se.from("atbs_result_atb").update({sensible:((R=f[$.id])==null?void 0:R.S)||!1,intermediaire:((L=f[$.id])==null?void 0:L.I)||!1,resistant:((H=f[$.id])==null?void 0:H.R)||!1}).eq("id",I.id)}await se.from("atbs_result").update({nature_prelement:_,souche:C}).eq("id",a),j("success")}catch{j("error")}b(!1)}};return p?s.jsx("div",{className:"text-center",children:"Chargement du tableau..."}):a?s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("div",{className:"flex gap-4 w-full justify-center",children:[s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx(Ie,{htmlFor:"nature_prelevement",className:"text-lg font-bold print:-mb-2",children:"Nature du prélèvement"}),s.jsx(Ge,{id:"nature_prelevement",value:_,onChange:R=>N(R.target.value),style:{minWidth:220},className:"print:border-none print:bg-transparent"})]}),s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx(Ie,{htmlFor:"souche",className:"text-lg font-bold print:-mb-2",children:"Souche étudiée"}),s.jsx(Ge,{id:"souche",value:C,onChange:R=>E(R.target.value),style:{minWidth:180},className:"print:border-none print:bg-transparent"})]})]}),s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Vt,{children:[s.jsx(pt,{className:"text-left",children:"Dénomination"}),s.jsx(pt,{className:"text-center",children:"S"}),s.jsx(pt,{className:"text-center",children:"I"}),s.jsx(pt,{className:"text-center",children:"R"})]})}),s.jsx(la,{children:t.map((R,L)=>{var H,$,I,Y,ce,te;return s.jsxs(Vt,{className:L%2===0?"bg-muted/50":"",children:[s.jsx(Qe,{children:R.name}),s.jsxs(Qe,{className:"text-center",children:[s.jsx(ea,{className:"print:hidden",checked:!!((H=f[R.id])!=null&&H.S),onCheckedChange:()=>T(R.id,"S")}),s.jsx("p",{className:"hidden print:inline",children:(($=f[R.id])==null?void 0:$.S)&&s.jsx(s.Fragment,{children:"S"})})]}),s.jsxs(Qe,{className:"text-center",children:[s.jsx(ea,{className:"print:hidden",checked:!!((I=f[R.id])!=null&&I.I),onCheckedChange:()=>T(R.id,"I")}),s.jsx("p",{className:"hidden print:inline",children:((Y=f[R.id])==null?void 0:Y.I)&&s.jsx(s.Fragment,{children:"I"})})]}),s.jsxs(Qe,{className:"text-center",children:[s.jsx(ea,{checked:!!((ce=f[R.id])!=null&&ce.R),onCheckedChange:()=>T(R.id,"R"),className:"print:hidden"}),s.jsx("p",{className:"hidden print:inline",children:((te=f[R.id])==null?void 0:te.R)&&s.jsx(s.Fragment,{children:"R"})})]})]},R.id)})})]}),s.jsx("div",{className:"mt-2 text-sm  font-semibold text-center",children:"S = sensible   |   I = intermédiaire   |   R = résistant"}),s.jsxs("div",{className:"flex flex-col items-center mt-4 print:hidden",children:[s.jsx(ne,{disabled:x,onClick:M,children:x?"Enregistrement...":"Enregistrer les modifications"}),w==="success"&&s.jsx("span",{className:"text-green-600 mt-2 print:hidden",children:"Modifications enregistrées !"}),w==="error"&&s.jsx("span",{className:"text-red-600 mt-2 print:hidden",children:"Erreur lors de l'enregistrement."})]}),s.jsx("div",{className:"mt-4",children:s.jsx(ao,{date:new Date().toISOString()||""})})]}):s.jsx("div",{className:"text-center text-muted-foreground",children:"Aucun antibiogramme trouvé."})},xB=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(!1),[l,c]=m.useState(""),[d,f]=m.useState(null),[h,p]=m.useState(""),[v,x]=m.useState(null),[b,w]=m.useState(null),j=async()=>{a(!0);const{data:T,error:M}=await se.from("atbs").select("*").order("name");M?x(M.message):t(T||[]),a(!1)};m.useEffect(()=>{j()},[]);const _=async()=>{if(!l.trim())return;a(!0);const{error:T}=await se.from("atbs").insert({name:l.trim()});T&&x(T.message),c(""),j(),a(!1)},N=T=>{f(T.id),p(T.name),x(null)},C=async T=>{if(!h.trim())return;a(!0);const{error:M}=await se.from("atbs").update({name:h.trim()}).eq("id",T);M&&x(M.message),f(null),p(""),j(),a(!1)},E=async T=>{a(!0);const{error:M}=await se.from("atbs").delete().eq("id",T);M&&x(M.message),j(),a(!1),w(null)};return s.jsxs("div",{className:"max-w-xl mx-auto mt-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Gestion des ATBs"}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx(Ge,{value:l,onChange:T=>c(T.target.value),placeholder:"Nom de l'ATB",disabled:r,onKeyDown:T=>{T.key==="Enter"&&_()}}),s.jsxs(ne,{onClick:_,disabled:r||!l.trim(),children:[s.jsx(Td,{className:"w-4 h-4 mr-1"})," Ajouter"]})]}),v&&s.jsx("div",{className:"text-red-500 mb-2",children:v}),s.jsxs("table",{className:"min-w-full border",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-2 border",children:"Nom"}),s.jsx("th",{className:"text-left p-2 border",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(T=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-2 border",children:d===T.id?s.jsx(Ge,{value:h,onChange:M=>p(M.target.value),onKeyDown:M=>{M.key==="Enter"&&C(T.id),M.key==="Escape"&&f(null)},autoFocus:!0}):T.name}),s.jsx("td",{className:"p-2 border",children:d===T.id?s.jsx(ne,{size:"sm",onClick:()=>C(T.id),disabled:r||!h.trim(),children:"Enregistrer"}):s.jsxs(s.Fragment,{children:[s.jsx(ne,{size:"icon",variant:"ghost",onClick:()=>N(T),children:s.jsx(k_,{className:"w-4 h-4"})}),s.jsx(ne,{size:"icon",variant:"destructive",onClick:()=>w(T.id),disabled:r,children:s.jsx(Dl,{className:"w-4 h-4"})})]})})]},T.id))})]}),s.jsx(Ti,{open:!!b,onOpenChange:T=>!T&&w(null),children:s.jsxs(Ri,{children:[s.jsx(Mi,{children:s.jsx(Ai,{children:"Confirmer la suppression"})}),s.jsx("div",{children:"Êtes-vous sûr de vouloir supprimer cet ATB ?"}),s.jsxs(ql,{children:[s.jsx(ne,{variant:"destructive",onClick:()=>b&&E(b),disabled:r,children:"Supprimer"}),s.jsx(ne,{variant:"ghost",onClick:()=>w(null),disabled:r,children:"Annuler"})]})]})})]})},yB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},bB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},wB=()=>{var wn;const{resultId:e}=vr();ir();const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(!0),[p,v]=m.useState(!1),[x,b]=m.useState(null),[w,j]=m.useState(null),[_,N]=m.useState(""),[C,E]=m.useState(!1),[T,M]=m.useState(""),[R,L]=m.useState(""),[H,$]=m.useState(!1),[I,Y]=m.useState(null),[ce,te]=m.useState([]),[q,le]=m.useState(!0),[ue,O]=m.useState(""),[G,B]=m.useState(!1),[ee,k]=m.useState(null);m.useEffect(()=>{(async()=>{le(!0);const{data:Ee,error:Le}=await se.from("ecb_model").select("id, name, description, structure");Le||te(Ee||[]),le(!1)})()},[]);const P=[{id:"template1",component:tr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],V="template1",[X,D]=m.useState(null),[U,F]=m.useState(!0),K=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),r(null),l(null),d(null),F(!0),D(null);try{const{data:fe,error:Ee}=await se.from("patient_result").select("*").eq("id",e).single();if(Ee)throw Ee;if(!fe)throw new Error("Résultat non trouvé.");r(fe);const[Le,Ct,cn]=await Promise.all([se.from("patient").select("*").eq("id",fe.patient_id).single(),se.from("doctor").select("*").eq("id",fe.doctor_id).single(),se.from("print_header_config").select("*").limit(1).maybeSingle()]);Le.error&&console.warn("Erreur chargement patient:",Le.error.message),Ct.error&&console.warn("Erreur chargement médecin:",Ct.error.message),l(Le.data),d(Ct.data),D(cn.data),F(!1)}catch(fe){console.error("Erreur chargement détails du résultat:",fe),b(fe.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{K()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),L((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const ae=m.useCallback(async fe=>{if(e)try{const{error:Ee}=await se.from("patient_result").update({description:fe}).eq("id",e);if(Ee)throw Ee}catch(Ee){console.error("Error saving description:",Ee)}},[e]);m.useEffect(()=>{const fe=setTimeout(()=>{_!==(t==null?void 0:t.description)&&ae(_)},1e3);return()=>clearTimeout(fe)},[_,t==null?void 0:t.description,ae]);const ge=m.useCallback(async()=>{$(!0),Y(null);try{const fe=T!==""?Number(T):null,Ee=R!==""?Number(R):null;if(T!==""&&isNaN(fe)||R!==""&&isNaN(Ee)){Y("Les prix doivent être des nombres valides."),$(!1);return}const{error:Le,data:Ct}=await se.from("patient_result").update({normal_price:fe,insurance_price:Ee}).eq("id",t.id).select().single();if(Le)throw Le;r(cn=>cn&&{...cn,normal_price:fe,insurance_price:Ee}),E(!1)}catch(fe){Y(fe.message||"Erreur lors de la sauvegarde des prix.")}finally{$(!1)}},[t,T,R]),de=async fe=>{if(!(!t||fe===t.status)){v(!0),j(null);try{const{data:Ee,error:Le}=await se.from("patient_result").update({status:fe}).eq("id",t.id).select().single();if(Le)throw Le;r(Ee||(Ct=>Ct?{...Ct,status:fe}:null))}catch(Ee){console.error("Erreur mise à jour statut:",Ee),j(Ee.message||"Impossible de mettre à jour le statut.")}finally{v(!1)}}},Se=(fe,Ee,Le,Ct)=>{const cn=fe;return s.jsxs("div",{className:Ce("flex items-start space-x-3",Ct),children:[s.jsx(cn,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:Ee}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:Le||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},Me=m.useMemo(()=>{var Ee;const fe=(X==null?void 0:X.selected_template)||V;return((Ee=P.find(Le=>Le.id===fe))==null?void 0:Ee.component)||tr},[X]),at=m.useMemo(()=>({logoUrl:(X==null?void 0:X.logo_url)||null,labName:X==null?void 0:X.lab_name,addressLine1:X==null?void 0:X.address_line1,addressLine2:X==null?void 0:X.address_line2,cityPostalCode:X==null?void 0:X.city_postal_code,phone:X==null?void 0:X.phone,email:X==null?void 0:X.email,website:X==null?void 0:X.website}),[X]),[nt,ve]=m.useState([]),[pe,Pe]=m.useState({}),[be,Ne]=m.useState({}),[Oe,We]=m.useState(!0),[Fe,bt]=m.useState(null),[Nt,Ht]=m.useState({}),[Be,tt]=m.useState(null),[Zt,kn]=m.useState(null),[Cn,fn]=m.useState(null),[ln,Jt]=m.useState(""),[qt,nr]=m.useState(null),Tn=(fe,Ee)=>{fn(fe),Jt(Ee)},hn=()=>{fn(null),Jt("")},yr=async fe=>{nr(fe),await se.from("ecb").update({title:ln}).eq("id",fe),nr(null),fn(null),Jt(""),await bn()},bn=m.useCallback(async()=>{if(!e)return;We(!0);const{data:fe,error:Ee}=await se.from("ecb").select("*").eq("result_id",e).order("created_at",{ascending:!0});if(Ee){We(!1);return}ve(fe||[]);const Le=(fe||[]).map(At=>At.id),{data:Ct}=await se.from("ecb_section").select("*").in("ecb_id",Le.length?Le:["00000000-0000-0000-0000-000000000000"]).order("position",{ascending:!0}),cn={};(Ct||[]).forEach(At=>{cn[At.ecb_id]||(cn[At.ecb_id]=[]),cn[At.ecb_id].push(At)}),Pe(cn);const Hn=(Ct||[]).map(At=>At.id),{data:cr}=await se.from("ecb_value").select("*").in("section_id",Hn.length?Hn:["00000000-0000-0000-0000-000000000000"]).order("position",{ascending:!0}),On={};(cr||[]).forEach(At=>{On[At.section_id]||(On[At.section_id]=[]),On[At.section_id].push(At)}),Ne(On),We(!1)},[e]);m.useEffect(()=>{bn()},[bn,G]);const ks=fe=>{bt(fe);let Ee={};(pe[fe]||[]).forEach(Le=>{(be[Le.id]||[]).forEach(Ct=>{Ee[Ct.id]=Ct.value??""})}),Ht(Ee)},kr=()=>{bt(null),Ht({})},Yt=(fe,Ee)=>{Ht(Le=>({...Le,[fe]:Ee}))},it=async fe=>{tt(fe);const Ee=Object.entries(Nt).map(([Le,Ct])=>se.from("ecb_value").update({value:Ct}).eq("id",Le));await Promise.all(Ee),tt(null),bt(null),Ht({}),await bn()},J=fe=>{kn(fe),setTimeout(()=>window.print(),100)};function xe(){if(typeof window<"u")try{const fe=window.localStorage.getItem("ecb_bold_toggles");return fe?JSON.parse(fe):{}}catch{return{}}return{}}const[_e,De]=m.useState(xe);m.useEffect(()=>{window.localStorage.setItem("ecb_bold_toggles",JSON.stringify(_e))},[_e]);const qe=fe=>{De(Ee=>{var Le;return{...Ee,[fe]:{...Ee[fe],labelBold:!((Le=Ee[fe])!=null&&Le.labelBold)}}})},lt=fe=>{De(Ee=>{var Le;return{...Ee,[fe]:{...Ee[fe],valueBold:!((Le=Ee[fe])!=null&&Le.valueBold)}}})};function Ye(fe){if(typeof window<"u")try{const Ee=window.localStorage.getItem("ecb_section_bold_toggles"),Le=Ee?JSON.parse(Ee):{};for(const Ct of fe)Ct in Le||(Le[Ct]=!0);return Le}catch{return Object.fromEntries(fe.map(Ee=>[Ee,!0]))}return Object.fromEntries(fe.map(Ee=>[Ee,!0]))}const ft=Object.values(pe||{}).flat().map(fe=>fe.id),[ot,ht]=m.useState(()=>Ye(ft));m.useEffect(()=>{window.localStorage.setItem("ecb_section_bold_toggles",JSON.stringify(ot))},[ot]),m.useEffect(()=>{ht(fe=>{let Ee=!1;const Le={...fe};for(const Ct of ft)Ct in Le||(Le[Ct]=!0,Ee=!0);return Ee?Le:fe})},[ft.length]);const Rt=fe=>{ht(Ee=>({...Ee,[fe]:!Ee[fe]}))};function Mt(){if(typeof window<"u")try{const fe=window.localStorage.getItem("ecb_abnormal_cells");return fe?JSON.parse(fe):{}}catch{return{}}return{}}const[sn,Dn]=m.useState(Mt);m.useEffect(()=>{window.localStorage.setItem("ecb_abnormal_cells",JSON.stringify(sn))},[sn]);const on=fe=>{Dn(Ee=>({...Ee,[fe]:!Ee[fe]}))};return f?s.jsxs("div",{className:"space-y-6",children:[s.jsx(W,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsxs("div",{className:"pb-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsxs("div",{className:"pb-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsxs("div",{className:"pb-2",children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]})]}),s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsx("div",{className:"pb-2",children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx("div",{children:s.jsx(W,{className:"h-20 w-full"})})]}),s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsx("div",{className:"pb-2",children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx("div",{children:s.jsx(W,{className:"h-20 w-full"})})]})]}):x?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(st,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsxs(Pt,{children:[x," ",s.jsx(ne,{variant:"link",onClick:K,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(st,{to:a?`/patients/${a.id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(as,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),s.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[X?s.jsx("div",{className:"mb-2 print:mb-0",children:s.jsx(Me,{data:at,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Dt,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"En-tête Manquant"}),s.jsxs(Pt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(st,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Gr,{className:"my-2 print:my-0 print:border-none"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs("div",{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Se(Xe,"NOM PRENOM",a==null?void 0:a.full_name),Se(Xe,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),Se(vn,"Date Naissance",a!=null&&a.date_of_birth?dt(Qt(a.date_of_birth),"P",{locale:Xt}):null),s.jsx("div",{className:"hidden print:block",children:Se(vn,"Date Résultat",t.result_date?dt(Qt(t.result_date),"Pp",{locale:Xt}):null)})]})]}),s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs("div",{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Se(Bt,"NOM PRENOM",c==null?void 0:c.full_name),Se(xn,"Téléphone",c==null?void 0:c.phone),Se(Xe,"Provenance",c==null?void 0:c.hospital)]})]}),s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4 print:hidden",children:[s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs("div",{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Se(vn,"Date Résultat",t.result_date?dt(Qt(t.result_date),"Pp",{locale:Xt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),C?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:fe=>M(fe.target.value),disabled:H}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),C?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:R,onChange:fe=>L(fe.target.value),disabled:H}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:R,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:C?s.jsxs(s.Fragment,{children:[s.jsxs(ne,{size:"xs",variant:"secondary",onClick:ge,disabled:H,children:[H?s.jsx($t,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:H,children:"Annuler"})]}):s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),I&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:I})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Xe,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Qn,{value:t.status??"",onValueChange:fe=>de(fe),disabled:p,children:[s.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",s.jsx(Zn,{placeholder:"Changer statut..."})," "]}),s.jsxs(er,{children:[s.jsx(yt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(yt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(yt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ii,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&s.jsx($t,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),s.jsx(ls,{variant:yB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:bB(t.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]}),Se(Xe,"NOM PRENOM",a==null?void 0:a.full_name),Se(Xe,"ID Unique",a==null?void 0:a.patient_unique_id),Se(xn,"Téléphone",a==null?void 0:a.phone)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),Se(Bt,"NOM PRENOM",c==null?void 0:c.full_name),Se(xn,"Téléphone",c==null?void 0:c.phone),Se(Xe,"Hôpital",c==null?void 0:c.hospital)]})]}),s.jsxs("div",{className:"page-content",children:[s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx("div",{className:"font-semibold",children:"Créer un nouvel ECB"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Ie,{htmlFor:"ecb-model-select",children:"Sélectionner un modèle"}),s.jsxs(Qn,{value:ue,onValueChange:O,disabled:q||G,children:[s.jsx(Jn,{id:"ecb-model-select",className:"w-full",children:s.jsx(Zn,{placeholder:q?"Chargement...":"Choisir un modèle"})}),s.jsx(er,{children:ce.map(fe=>s.jsx(yt,{value:fe.id,children:fe.name},fe.id))})]}),ue&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:(wn=ce.find(fe=>fe.id===ue))==null?void 0:wn.description})]}),s.jsxs(ne,{onClick:async()=>{var fe;B(!0),k(null);try{if(!ue||!e)throw new Error("Sélectionner un modèle.");const Ee=ce.find(At=>At.id===ue);if(!Ee)throw new Error("Modèle non trouvé.");const{data:Le,error:Ct}=await se.from("ecb").insert({result_id:e,model_id:Ee.id,title:Ee.name,created_by:((fe=(await se.auth.getUser()).data.user)==null?void 0:fe.id)||null}).select().single();if(Ct)throw Ct;const cn=Ee.structure;let Hn=[],cr=[],On=0;for(const At of cn){const ca=crypto.randomUUID();Hn.push({id:ca,ecb_id:Le.id,section_title:At.title,position:On});let Ds=0;for(const jn of At.labels)cr.push({section_id:ca,label:jn,value:null,position:Ds}),Ds++;On++}if(Hn.length){const{error:At}=await se.from("ecb_section").insert(Hn);if(At)throw At}if(cr.length){const{error:At}=await se.from("ecb_value").insert(cr);if(At)throw At}await bn(),O("")}catch(Ee){k(Ee.message||"Erreur lors de la création de l''ECB.")}finally{B(!1)}},disabled:!ue||G,className:"min-w-[120px]",children:[G?s.jsx($t,{className:"h-4 w-4 animate-spin mr-2"}):null,"Créer"]})]}),ee&&s.jsx("div",{className:"text-xs text-destructive mt-2",children:ee})]})]}),Oe?s.jsx(W,{className:"h-12 w-full"}):nt.length===0?s.jsx("div",{className:"text-muted-foreground text-sm",children:"Aucun ECB trouvé pour ce résultat."}):s.jsx("div",{className:"space-y-6 print:space-y-0",children:nt.map(fe=>s.jsxs("div",{className:"relative  p-4",children:[s.jsxs("div",{className:"print:hidden flex flex-row items-center justify-between border-b pb-2 mb-2 print:mb-0",children:[s.jsxs("div",{className:"print:hidden",children:[s.jsx("div",{className:"font-semibold text-base flex items-center gap-2",children:Cn===fe.id?s.jsxs(s.Fragment,{children:[s.jsx(Ge,{value:ln,onChange:Ee=>Jt(Ee.target.value),onKeyDown:Ee=>{Ee.key==="Enter"&&yr(fe.id),Ee.key==="Escape"&&hn()},disabled:qt===fe.id,className:"text-base w-48",autoFocus:!0}),s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>yr(fe.id),disabled:qt===fe.id,children:qt===fe.id?s.jsx($t,{className:"h-3 w-3 animate-spin"}):"Enregistrer"}),s.jsx(ne,{size:"xs",variant:"ghost",onClick:hn,disabled:qt===fe.id,children:"Annuler"})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:fe.title}),s.jsx(ne,{size:"xs",variant:"ghost",onClick:()=>Tn(fe.id,fe.title),className:"ml-1",children:s.jsx(Wr,{className:"h-3 w-3"})})]})}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Créé le"," ",dt(Qt(fe.created_at),"Pp",{locale:Xt})]})]}),s.jsx("div",{className:"flex gap-2 print:hidden",children:Fe===fe.id?s.jsxs(s.Fragment,{children:[s.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>it(fe.id),disabled:Be===fe.id,children:[Be===fe.id?s.jsx($t,{className:"h-4 w-4 animate-spin mr-2"}):null,"Enregistrer toutes les modifications"]}),s.jsx(ne,{size:"sm",variant:"ghost",onClick:kr,disabled:Be===fe.id,children:"Annuler"})]}):s.jsxs(s.Fragment,{children:[s.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>ks(fe.id),children:[s.jsx(Wr,{className:"h-4 w-4 mr-1"})," Modifier"]}),s.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>J(fe.id),children:[s.jsx(vf,{className:"h-4 w-4 mr-1"})," Imprimer"]})]})})]}),s.jsx("div",{className:"print:hidden",children:(pe[fe.id]||[]).map(Ee=>s.jsxs("div",{className:"mb-4 print:mb-0",children:[s.jsxs("div",{className:"font-semibold mb-2 text-lg flex items-center gap-1",children:[Ee.section_title,s.jsx(ne,{size:"icon",variant:ot[Ee.id]?"default":"ghost",className:"h-5 w-5 p-0",title:ot[Ee.id]?"Définir en normal":"Mettre en gras",onClick:()=>Rt(Ee.id),type:"button",tabIndex:-1,children:s.jsx("b",{children:"B"})})]}),s.jsx("div",{className:"grid grid-cols-1  gap-2",children:(be[Ee.id]||[]).map(Le=>{var Ct,cn,Hn,cr,On;return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ie,{className:"w-40 text-md font-medium flex items-center gap-1",children:[Le.label,s.jsx(ne,{size:"icon",variant:(Ct=_e[Le.id])!=null&&Ct.labelBold?"default":"ghost",className:"h-5 w-5 p-0",title:(cn=_e[Le.id])!=null&&cn.labelBold?"Définir en normal":"Mettre en gras",onClick:()=>qe(Le.id),type:"button",tabIndex:-1,children:s.jsx("b",{children:"B"})})]}),Fe===fe.id?s.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[s.jsx(Ge,{value:Nt[Le.id]??"",onChange:At=>Yt(Le.id,At.target.value),disabled:Be===fe.id,className:"text-xs flex-1"}),s.jsx(ne,{size:"icon",variant:(Hn=_e[Le.id])!=null&&Hn.valueBold?"default":"ghost",className:"h-5 w-5 p-0",title:(cr=_e[Le.id])!=null&&cr.valueBold?"Définir en normal":"Mettre en gras",onClick:()=>lt(Le.id),type:"button",tabIndex:-1,children:s.jsx("b",{children:"B"})}),s.jsx(ne,{size:"icon",variant:sn[Le.id]?"destructive":"ghost",className:"h-5 w-5 p-0",title:sn[Le.id]?"Cellule anormale":"Marquer comme anormale",onClick:()=>on(Le.id),type:"button",tabIndex:-1,children:s.jsx("span",{style:{fontWeight:"bold"},children:"!"})})]}):s.jsx("span",{className:`text-xs flex-1 ${(On=_e[Le.id])!=null&&On.valueBold?"font-bold":""} ${sn[Le.id]?"bg-gray-200 font-bold":""}`,children:Le.value??s.jsx("span",{className:"italic text-muted-foreground",children:"(vide)"})})]},Le.id)})})]},Ee.id))}),Zt===fe.id&&s.jsxs("div",{className:"hidden print:block bg-white p-4 print:p-0",children:[s.jsx("div",{className:"font-semibold text-lg text-center mb-1",children:fe.title}),s.jsx("table",{className:"w-full border-collapse print-ecb-table",children:s.jsx("tbody",{children:(pe[fe.id]||[]).map(Ee=>s.jsxs(we.Fragment,{children:[s.jsx("tr",{children:s.jsx("td",{colSpan:2,className:`text-xs mb-1 py-2 print-ecb-section-title ${ot[Ee.id]?"font-bold":"font-normal"}`,children:Ee.section_title})}),(be[Ee.id]||[]).map(Le=>{var Ct,cn;return s.jsxs("tr",{children:[s.jsx("td",{className:`align-top pr-4 pb-1 text-xs print-ecb-label ${(Ct=_e[Le.id])!=null&&Ct.labelBold?"font-bold":"font-normal"}`,style:{width:"35%"},children:Le.label}),s.jsx("td",{className:`align-top pb-1 text-xs print-ecb-value ${(cn=_e[Le.id])!=null&&cn.valueBold?"font-bold":"font-normal"} ${sn[Le.id]?"print-ecb-abnormal-cell":""}`,children:Le.value?s.jsx("div",{className:"flex items-center justify-between",children:Le.value.split(";").map((Hn,cr)=>s.jsx("div",{children:Hn},cr))}):s.jsx("span",{className:"italic text-muted-foreground",children:"(vide)"})})]},Le.id)})]},Ee.id))})}),s.jsx("div",{className:"mt-4",children:s.jsx(ao,{date:new Date().toISOString()})}),s.jsx("style",{jsx:!0,global:!0,children:`
                        @media print {
                          .print-ecb-table {
                            width: 100%;
                            border-collapse: collapse;
                            font-size: 13.5px;
                          }
                          .print-ecb-label {
                            text-align: left;
                            padding-right: 16px;
                            vertical-align: top;
                            width: 35%;
                            font-size: 13.5px;
                          }
                          .print-ecb-section-title {
                            background: #f6f6f6;
                            font-size: 14px;
                            font-weight: bold;
                            padding-top: 12px;
                            padding-bottom: 6px;
                            text-align: left;
                            border-bottom: 1px solid #e5e5e5;
                          }
                          .print-ecb-value {
                            text-align: left;
                            vertical-align: top;
                            word-break: break-word;
                            font-size: 13.5px;
                          }
                          .print-ecb-abnormal-cell {
                            background: #e5e5e5 !important;
                            font-weight: bold !important;
                          }
                          .print-ecb-table td {
                            padding-top: 3px;
                            padding-bottom: 3px;
                          }
                        }
                      `})]})]},fe.id))})]})]})," "]}):s.jsx("div",{children:"Résultat non trouvé."})},jB=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(!1),[l,c]=m.useState(null),[d,f]=m.useState(""),[h,p]=m.useState(""),[v,x]=m.useState(""),[b,w]=m.useState(""),[j,_]=m.useState(!1),[N,C]=m.useState(null),[E,T]=m.useState([]),[M,R]=m.useState(null),[L,H]=m.useState(null),$=async()=>{a(!0);const{data:V,error:X}=await se.from("ecb_model").select("id, name, description, structure, created_at").order("created_at");X||t(V||[]),a(!1)};m.useEffect(()=>{$()},[]);const I=V=>{c(V.id),f(V.name),p(V.description||"")},Y=async V=>{_(!0),await se.from("ecb_model").update({name:d,description:h}).eq("id",V),c(null),f(""),p(""),_(!1),$()},ce=async V=>{_(!0),await se.from("ecb_model").delete().eq("id",V),$(),_(!1),H(null)},te=async()=>{v.trim()&&(_(!0),await se.from("ecb_model").insert({name:v.trim(),description:b.trim(),structure:JSON.stringify([])}),x(""),w(""),_(!1),$())},q=V=>{C(V),T(Array.isArray(V.structure)?V.structure:[]),R(null)},le=()=>{C(null),T([]),R(null)},ue=async()=>{if(N){for(const V of E){if(!V.title.trim()){R("Titre de section requis");return}if(!Array.isArray(V.labels)||V.labels.some(X=>!X.trim())){R("Chaque section doit avoir des labels non vides");return}}_(!0),await se.from("ecb_model").update({structure:E}).eq("id",N.id),_(!1),le(),$()}},O=()=>T([...E,{title:"Nouvelle section",labels:["Label 1"]}]),G=V=>T(E.filter((X,D)=>D!==V)),B=(V,X)=>T(E.map((D,U)=>U===V?{...D,title:X}:D)),ee=V=>T(E.map((X,D)=>D===V?{...X,labels:[...X.labels,"Nouveau label"]}:X)),k=(V,X,D)=>T(E.map((U,F)=>F===V?{...U,labels:U.labels.map((K,ae)=>ae===X?D:K)}:U)),P=(V,X)=>T(E.map((D,U)=>U===V?{...D,labels:D.labels.filter((F,K)=>K!==X)}:D));return s.jsxs("div",{className:"w-full mx-auto p-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Gestion des Modèles ECB"}),s.jsxs("div",{className:"mb-6 flex gap-2",children:[s.jsx(Ge,{value:v,onChange:V=>x(V.target.value),placeholder:"Nouveau modèle",className:"flex-1"}),s.jsx(Ge,{value:b,onChange:V=>w(V.target.value),placeholder:"Description (optionnelle)",className:"flex-1"}),s.jsxs(ne,{onClick:te,disabled:j||!v.trim(),children:[s.jsx(Td,{className:"w-4 h-4 mr-1"})," Ajouter"]})]}),s.jsx("div",{className:"bg-white rounded shadow p-4",children:r?s.jsx("div",{children:"Chargement..."}):s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-2",children:"Nom du modèle"}),s.jsx("th",{className:"text-left py-2",children:"Description"}),s.jsx("th",{className:"text-left py-2",children:"Structure"}),s.jsx("th",{className:"w-48"})]})}),s.jsx("tbody",{children:e.map(V=>s.jsxs(we.Fragment,{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-2",children:l===V.id?s.jsx(Ge,{value:d,onChange:X=>f(X.target.value),className:"inline-block w-auto",onKeyDown:X=>{X.key==="Enter"&&Y(V.id),X.key==="Escape"&&c(null)},autoFocus:!0}):s.jsx("span",{children:V.name})}),s.jsx("td",{className:"py-2",children:l===V.id?s.jsx(Ge,{value:h,onChange:X=>p(X.target.value),className:"inline-block w-auto",onKeyDown:X=>{X.key==="Enter"&&Y(V.id),X.key==="Escape"&&c(null)}}):s.jsx("span",{children:V.description})}),s.jsx("td",{className:"py-2",children:s.jsx(ne,{size:"sm",variant:"outline",onClick:()=>q(V),children:"Éditer Structure"})}),s.jsx("td",{children:l===V.id?s.jsx(ne,{size:"sm",onClick:()=>Y(V.id),disabled:j||!d.trim(),children:"Enregistrer"}):s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{size:"icon",variant:"ghost",onClick:()=>I(V),children:s.jsx(k_,{className:"w-4 h-4"})}),s.jsx(ne,{size:"icon",variant:"destructive",onClick:()=>H(V.id),children:s.jsx(Dl,{className:"w-4 h-4"})})]})})]}),N&&N.id===V.id&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,children:s.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2 border rounded p-4 bg-muted",children:[s.jsx("div",{className:"mb-2 font-semibold text-lg",children:"Éditer la structure du modèle"}),E.map((X,D)=>s.jsxs("div",{className:"border rounded p-3 mb-2",children:[s.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[s.jsx(Ge,{value:X.title,onChange:U=>B(D,U.target.value),placeholder:"Titre de section",className:"flex-1"}),s.jsx(ne,{size:"icon",variant:"destructive",onClick:()=>G(D),children:s.jsx(Dl,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"ml-4 space-y-1",children:[X.labels.map((U,F)=>s.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[s.jsx(Ge,{value:U,onChange:K=>k(D,F,K.target.value),placeholder:"Label",className:"flex-1"}),s.jsx(ne,{size:"icon",variant:"destructive",onClick:()=>P(D,F),children:s.jsx(Dl,{className:"w-4 h-4"})})]},F)),s.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>ee(D),children:[s.jsx(Td,{className:"w-4 h-4 mr-1"})," Ajouter Label"]})]})]},D)),s.jsxs(ne,{size:"sm",variant:"secondary",onClick:O,children:[s.jsx(Td,{className:"w-4 h-4 mr-1"})," Ajouter Section"]}),M&&s.jsx("div",{className:"text-red-500 text-sm",children:M}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx(ne,{onClick:ue,disabled:j,children:"Enregistrer la structure"}),s.jsx(ne,{variant:"ghost",onClick:le,children:"Annuler"})]})]})})})]},V.id))})]})}),s.jsx(Ti,{open:!!L,onOpenChange:V=>!V&&H(null),children:s.jsxs(Ri,{children:[s.jsx(Mi,{children:s.jsx(Ai,{children:"Confirmer la suppression"})}),s.jsx("div",{children:"Êtes-vous sûr de vouloir supprimer ce modèle ECB ?"}),s.jsxs(ql,{children:[s.jsx(ne,{variant:"destructive",onClick:()=>L&&ce(L),disabled:j,children:"Supprimer"}),s.jsx(ne,{variant:"ghost",onClick:()=>H(null),disabled:j,children:"Annuler"})]})]})})]})},_B=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},NB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},SB=()=>{const{resultId:e}=vr();ir();const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(!0),[p,v]=m.useState(!1),[x,b]=m.useState(null),[w,j]=m.useState(null),[_,N]=m.useState(""),[C,E]=m.useState(!1),[T,M]=m.useState(""),[R,L]=m.useState(""),[H,$]=m.useState(!1),[I,Y]=m.useState(null),ce=[{id:"template1",component:tr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],te="template1",[q,le]=m.useState(null),[ue,O]=m.useState(!0),G=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),r(null),l(null),d(null),O(!0),le(null);try{const{data:D,error:U}=await se.from("patient_result").select("*").eq("id",e).single();if(U)throw U;if(!D)throw new Error("Résultat non trouvé.");r(D);const[F,K,ae]=await Promise.all([se.from("patient").select("*").eq("id",D.patient_id).single(),se.from("doctor").select("*").eq("id",D.doctor_id).single(),se.from("print_header_config").select("*").limit(1).maybeSingle()]);F.error&&console.warn("Erreur chargement patient:",F.error.message),K.error&&console.warn("Erreur chargement médecin:",K.error.message),l(F.data),d(K.data),le(ae.data),O(!1)}catch(D){console.error("Erreur chargement détails du résultat:",D),b(D.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{G()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),L((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const B=m.useCallback(async D=>{if(e)try{const{error:U}=await se.from("patient_result").update({description:D}).eq("id",e);if(U)throw U}catch(U){console.error("Error saving description:",U)}},[e]);m.useEffect(()=>{const D=setTimeout(()=>{_!==(t==null?void 0:t.description)&&B(_)},1e3);return()=>clearTimeout(D)},[_,t==null?void 0:t.description,B]);const ee=m.useCallback(async()=>{$(!0),Y(null);try{const D=T!==""?Number(T):null,U=R!==""?Number(R):null;if(T!==""&&isNaN(D)||R!==""&&isNaN(U)){Y("Les prix doivent être des nombres valides."),$(!1);return}const{error:F,data:K}=await se.from("patient_result").update({normal_price:D,insurance_price:U}).eq("id",t.id).select().single();if(F)throw F;r(ae=>ae&&{...ae,normal_price:D,insurance_price:U}),E(!1)}catch(D){Y(D.message||"Erreur lors de la sauvegarde des prix.")}finally{$(!1)}},[t,T,R]),k=async D=>{if(!(!t||D===t.status)){v(!0),j(null);try{const{data:U,error:F}=await se.from("patient_result").update({status:D}).eq("id",t.id).select().single();if(F)throw F;r(U||(K=>K?{...K,status:D}:null))}catch(U){console.error("Erreur mise à jour statut:",U),j(U.message||"Impossible de mettre à jour le statut.")}finally{v(!1)}}},P=(D,U,F,K)=>{const ae=D;return s.jsxs("div",{className:Ce("flex items-start space-x-3",K),children:[s.jsx(ae,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:U}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:F||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},V=m.useMemo(()=>{var U;const D=(q==null?void 0:q.selected_template)||te;return((U=ce.find(F=>F.id===D))==null?void 0:U.component)||tr},[q]),X=m.useMemo(()=>({logoUrl:(q==null?void 0:q.logo_url)||null,labName:q==null?void 0:q.lab_name,addressLine1:q==null?void 0:q.address_line1,addressLine2:q==null?void 0:q.address_line2,cityPostalCode:q==null?void 0:q.city_postal_code,phone:q==null?void 0:q.phone,email:q==null?void 0:q.email,website:q==null?void 0:q.website}),[q]);return f?s.jsxs("div",{className:"space-y-6",children:[s.jsx(W,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-20 w-full"})})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-20 w-full"})})]})]}):x?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(st,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsxs(Pt,{children:[x," ",s.jsx(ne,{variant:"link",onClick:G,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(st,{to:a?`/patients/${a.id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(as,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),s.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[q?s.jsx("div",{className:"mb-2 print:mb-0",children:s.jsx(V,{data:X,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Dt,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"En-tête Manquant"}),s.jsxs(Pt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(st,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Gr,{className:"my-2 print:my-0 print:border-none"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs(Te,{className:"overflow-hidden print:shadow-none",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(Xe,"NOM PRENOM",a==null?void 0:a.full_name),P(Xe,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),P(vn,"Date Naissance",a!=null&&a.date_of_birth?dt(Qt(a.date_of_birth),"P",{locale:Xt}):null),s.jsx("div",{className:"hidden print:block",children:P(vn,"Date Résultat",t.result_date?dt(Qt(t.result_date),"Pp",{locale:Xt}):null)})]})]}),s.jsxs(Te,{className:"overflow-hidden print:shadow-none _print:border-none",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(Bt,"NOM PRENOM",c==null?void 0:c.full_name),P(xn,"Téléphone",c==null?void 0:c.phone),P(Xe,"Provenance",c==null?void 0:c.hospital)]})]}),s.jsxs(Te,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(vn,"Date Résultat",t.result_date?dt(Qt(t.result_date),"Pp",{locale:Xt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),C?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:D=>M(D.target.value),disabled:H}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),C?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:R,onChange:D=>L(D.target.value),disabled:H}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:R,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:C?s.jsxs(s.Fragment,{children:[s.jsxs(ne,{size:"xs",variant:"secondary",onClick:ee,disabled:H,children:[H?s.jsx($t,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:H,children:"Annuler"})]}):s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),I&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:I})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Xe,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Qn,{value:t.status??"",onValueChange:D=>k(D),disabled:p,children:[s.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",s.jsx(Zn,{placeholder:"Changer statut..."})," "]}),s.jsxs(er,{children:[s.jsx(yt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(yt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(yt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ii,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&s.jsx($t,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),s.jsx(ls,{variant:_B(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:NB(t.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]}),P(Xe,"NOM PRENOM",a==null?void 0:a.full_name),P(Xe,"ID Unique",a==null?void 0:a.patient_unique_id),P(xn,"Téléphone",a==null?void 0:a.phone)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),P(Bt,"NOM PRENOM",c==null?void 0:c.full_name),P(xn,"Téléphone",c==null?void 0:c.phone),P(Xe,"Hôpital",c==null?void 0:c.hospital)]})]}),s.jsx(EB,{resultId:e})]})," "]}):s.jsx("div",{children:"Résultat non trouvé."})},EB=({resultId:e})=>{var N,C,E,T;const[t,r]=m.useState(null),[a,l]=m.useState(!0),[c,d]=m.useState(null),f="Pas de virus détecté ou 366 copies/ml; 1.82 log",[h,p]=m.useState((t==null?void 0:t.value)??f),[v,x]=m.useState(!1),[b,w]=m.useState(!1);m.useEffect(()=>{(async()=>{l(!0),d(null);try{const{data:R,error:L}=await se.from("vhb").select("*").eq("result_id",e).maybeSingle();if(L)throw L;r(R),p((R==null?void 0:R.value)||f)}catch(R){d(R.message||"Erreur lors du chargement du VHB.")}finally{l(!1)}})()},[e]);const j=async()=>{w(!0),d(null);try{const{data:M,error:R}=await se.from("vhb").insert({result_id:e,value:h}).select().single();if(R)throw R;r(M),x(!1)}catch(M){d(M.message||"Erreur lors de la création du VHB.")}finally{w(!1)}},_=async()=>{if(t){w(!0),d(null);try{const{data:M,error:R}=await se.from("vhb").update({value:h}).eq("id",t.id).select().single();if(R)throw R;r(M),x(!1)}catch(M){d(M.message||"Erreur lors de la mise à jour du VHB.")}finally{w(!1)}}};return a?s.jsx("div",{children:"Chargement du VHB..."}):c?s.jsx("div",{className:"text-destructive",children:c}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"print:hidden flex justify-end",children:s.jsx(ne,{onClick:()=>window.print(),variant:"outline",size:"sm",children:"Imprimer"})}),s.jsx("div",{className:"print:hidden",children:t?s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-lg font-semibold",children:"VHB"}),v?s.jsxs(s.Fragment,{children:[s.jsx(Ge,{value:h,onChange:M=>p(M.target.value),disabled:b,placeholder:"Pas de virus détecté ou 366 copies/ml; 1.82 log"}),s.jsx("p",{className:"text-muted-foreground text-lg",children:"(Pas de virus détecté ou 366 copies/ml; 1.82 log)"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx(ne,{onClick:_,disabled:b||!h,children:b?"Sauvegarde...":"Sauvegarder"}),s.jsx(ne,{variant:"outline",onClick:()=>{x(!1),p(t.value)},disabled:b,children:"Annuler"})]})]}):s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"font-mono text-lg",children:t.value}),s.jsx(ne,{variant:"outline",size:"sm",onClick:()=>x(!0),children:"Modifier"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Créer VHB"}),s.jsx(Ge,{value:h,onChange:M=>p(M.target.value),placeholder:"Pas de virus détecté ou 366 copies/ml; 1.82 log",disabled:b}),s.jsx("p",{className:"text-muted-foreground text-lg",children:"(Pas de virus détecté ou 366 copies/ml; 1.82 log)"}),s.jsx(ne,{onClick:j,disabled:b||!h,className:"mt-2",children:b?"Création...":"Créer"})]})}),s.jsx("h2",{className:" text-3xl text-center mb-4 print:pt-4 font-bold uppercase mx-auto tracking-tight print:block  print:text-center",children:"VIROLOGIE"}),t!=null&&t.value&&(t.value.includes("Pas de virus")||t.value.includes("virus"))?s.jsxs("div",{className:" print:block mt-8 text-black text-lg",children:[s.jsxs("div",{className:"flex flex-row justify-between mb-4",children:[s.jsx("span",{className:"font-bold underline",children:"EXAMENS"}),s.jsx("span",{className:"font-bold underline",children:"RESULTATS"})]}),s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"font-bold text-xl underline",children:"CHARGE VIRALE HEPATITE B"})}),s.jsxs("div",{className:"flex flex-row justify-between items-start mt-8",children:[s.jsxs("div",{className:"flex flex-col items-start gap-2 text-lg",style:{minWidth:"340px"},children:[s.jsx("span",{className:"font-semibold",children:"Charge virale  VHB"}),s.jsx("span",{className:"text-xs mt-1 whitespace-nowrap",children:"(Abbott m2000rt et m2000sp Technique PCR en temps réel)"})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2 text-lg text-right",style:{minWidth:"340px"},children:[s.jsx("span",{className:"font-bold text-2xl",children:((N=t.value.match(/([\d,.]+\s*copies\/ml)/i))==null?void 0:N[1])||t.value}),s.jsx("span",{className:"text-xs mt-1",children:"( Pour 0.5 ml d'échantillon )"}),s.jsx("span",{className:"font-bold text-2xl mt-8",children:((C=t.value.split(";")[1])==null?void 0:C.trim())||""})]})]})]}):t!=null&&t.value?s.jsxs("div",{className:" mt-8 text-black text-lg positive format",children:[s.jsxs("div",{className:"flex flex-row justify-between mb-2",children:[s.jsx("span",{className:"font-bold underline text-xl",children:"EXAMENS"}),s.jsx("span",{className:"font-bold underline text-xl",children:"RESULTATS"})]}),s.jsx("div",{className:"w-full mb-6",children:s.jsx("div",{className:"font-bold text-2xl underline",children:"CHARGE VIRALE HEPATITE B"})}),s.jsxs("div",{className:"flex flex-row justify-between items-start mt-8",children:[s.jsxs("div",{className:"flex flex-col items-start gap-2 text-lg",style:{minWidth:"340px"},children:[s.jsx("span",{className:"font-semibold text-xl",children:"Charge virale  VHB"}),s.jsx("span",{className:"text-xs mt-1 whitespace-nowrap",children:"(Abbott m2000rt et m2000sp Technique PCR en temps réel)"}),s.jsx("span",{className:"font-semibold mt-13 text-2xl",children:"Soit"})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2 text-lg text-right",style:{minWidth:"340px"},children:[s.jsx("span",{className:"font-bold text-2xl",children:((E=t.value.match(/([\d,.]+\s*copies\/ml)/i))==null?void 0:E[1])||t.value}),s.jsx("span",{className:"text-xs mt-1",children:"(limite de détection <35 pour 0.5 ml)"}),s.jsx("span",{className:"text-xs",children:"(d'échantillon, 1 UI= 3.41 copie/ml)"}),s.jsx("span",{className:"font-bold text-2xl mt-5",children:((T=t.value.split(";")[1])==null?void 0:T.trim())||""})]})]})]}):null,s.jsx("div",{className:" mt-20",children:s.jsx(ao,{date:new Date().toISOString()})})]})},CB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},TB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},RB=()=>{const{resultId:e}=vr();ir();const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(!0),[p,v]=m.useState(!1),[x,b]=m.useState(null),[w,j]=m.useState(null),[_,N]=m.useState(""),[C,E]=m.useState(!1),[T,M]=m.useState(""),[R,L]=m.useState(""),[H,$]=m.useState(!1),[I,Y]=m.useState(null),ce=[{id:"template1",component:tr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],te="template1",[q,le]=m.useState(null),[ue,O]=m.useState(!0),G=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),r(null),l(null),d(null),O(!0),le(null);try{const{data:D,error:U}=await se.from("patient_result").select("*").eq("id",e).single();if(U)throw U;if(!D)throw new Error("Résultat non trouvé.");r(D);const[F,K,ae]=await Promise.all([se.from("patient").select("*").eq("id",D.patient_id).single(),se.from("doctor").select("*").eq("id",D.doctor_id).single(),se.from("print_header_config").select("*").limit(1).maybeSingle()]);F.error&&console.warn("Erreur chargement patient:",F.error.message),K.error&&console.warn("Erreur chargement médecin:",K.error.message),l(F.data),d(K.data),le(ae.data),O(!1)}catch(D){console.error("Erreur chargement détails du résultat:",D),b(D.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{G()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),L((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const B=m.useCallback(async D=>{if(e)try{const{error:U}=await se.from("patient_result").update({description:D}).eq("id",e);if(U)throw U}catch(U){console.error("Error saving description:",U)}},[e]);m.useEffect(()=>{const D=setTimeout(()=>{_!==(t==null?void 0:t.description)&&B(_)},1e3);return()=>clearTimeout(D)},[_,t==null?void 0:t.description,B]);const ee=m.useCallback(async()=>{$(!0),Y(null);try{const D=T!==""?Number(T):null,U=R!==""?Number(R):null;if(T!==""&&isNaN(D)||R!==""&&isNaN(U)){Y("Les prix doivent être des nombres valides."),$(!1);return}const{error:F,data:K}=await se.from("patient_result").update({normal_price:D,insurance_price:U}).eq("id",t.id).select().single();if(F)throw F;r(ae=>ae&&{...ae,normal_price:D,insurance_price:U}),E(!1)}catch(D){Y(D.message||"Erreur lors de la sauvegarde des prix.")}finally{$(!1)}},[t,T,R]),k=async D=>{if(!(!t||D===t.status)){v(!0),j(null);try{const{data:U,error:F}=await se.from("patient_result").update({status:D}).eq("id",t.id).select().single();if(F)throw F;r(U||(K=>K?{...K,status:D}:null))}catch(U){console.error("Erreur mise à jour statut:",U),j(U.message||"Impossible de mettre à jour le statut.")}finally{v(!1)}}},P=(D,U,F,K)=>{const ae=D;return s.jsxs("div",{className:Ce("flex items-start space-x-3",K),children:[s.jsx(ae,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:U}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:F||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},V=m.useMemo(()=>{var U;const D=(q==null?void 0:q.selected_template)||te;return((U=ce.find(F=>F.id===D))==null?void 0:U.component)||tr},[q]),X=m.useMemo(()=>({logoUrl:(q==null?void 0:q.logo_url)||null,labName:q==null?void 0:q.lab_name,addressLine1:q==null?void 0:q.address_line1,addressLine2:q==null?void 0:q.address_line2,cityPostalCode:q==null?void 0:q.city_postal_code,phone:q==null?void 0:q.phone,email:q==null?void 0:q.email,website:q==null?void 0:q.website}),[q]);return f?s.jsxs("div",{className:"space-y-6",children:[s.jsx(W,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-20 w-full"})})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-20 w-full"})})]})]}):x?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(st,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsxs(Pt,{children:[x," ",s.jsx(ne,{variant:"link",onClick:G,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(st,{to:a?`/patients/${a.id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(as,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),s.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[q?s.jsx("div",{className:"mb-2 print:mb-0",children:s.jsx(V,{data:X,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Dt,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"En-tête Manquant"}),s.jsxs(Pt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(st,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Gr,{className:"my-2 print:my-0 print:border-none"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs(Te,{className:"overflow-hidden print:shadow-none",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(Xe,"NOM PRENOM",a==null?void 0:a.full_name),P(Xe,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),P(vn,"Date Naissance",a!=null&&a.date_of_birth?dt(Qt(a.date_of_birth),"P",{locale:Xt}):null),s.jsx("div",{className:"hidden print:block",children:P(vn,"Date Résultat",t.result_date?dt(Qt(t.result_date),"Pp",{locale:Xt}):null)})]})]}),s.jsxs(Te,{className:"overflow-hidden print:shadow-none _print:border-none",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(Bt,"NOM PRENOM",c==null?void 0:c.full_name),P(xn,"Téléphone",c==null?void 0:c.phone),P(Xe,"Provenance",c==null?void 0:c.hospital)]})]}),s.jsxs(Te,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(vn,"Date Résultat",t.result_date?dt(Qt(t.result_date),"Pp",{locale:Xt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),C?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:D=>M(D.target.value),disabled:H}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),C?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:R,onChange:D=>L(D.target.value),disabled:H}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:R,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:C?s.jsxs(s.Fragment,{children:[s.jsxs(ne,{size:"xs",variant:"secondary",onClick:ee,disabled:H,children:[H?s.jsx($t,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:H,children:"Annuler"})]}):s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),I&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:I})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Xe,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Qn,{value:t.status??"",onValueChange:D=>k(D),disabled:p,children:[s.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",s.jsx(Zn,{placeholder:"Changer statut..."})," "]}),s.jsxs(er,{children:[s.jsx(yt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(yt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(yt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ii,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&s.jsx($t,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),s.jsx(ls,{variant:CB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:TB(t.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]}),P(Xe,"NOM PRENOM",a==null?void 0:a.full_name),P(Xe,"ID Unique",a==null?void 0:a.patient_unique_id),P(xn,"Téléphone",a==null?void 0:a.phone)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),P(Bt,"NOM PRENOM",c==null?void 0:c.full_name),P(xn,"Téléphone",c==null?void 0:c.phone),P(Xe,"Hôpital",c==null?void 0:c.hospital)]})]}),s.jsx(MB,{resultId:e})]})," "]}):s.jsx("div",{children:"Résultat non trouvé."})},MB=({resultId:e})=>{const[t,r]=m.useState(null),[a,l]=m.useState(!0),[c,d]=m.useState(null),[f,h]=m.useState((t==null?void 0:t.value)??"1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté"),[p,v]=m.useState(!1),[x,b]=m.useState(!1);m.useEffect(()=>{(async()=>{l(!0),d(null);try{const{data:N,error:C}=await se.from("vih").select("*").eq("result_id",e).maybeSingle();if(C)throw C;r(N),h((N==null?void 0:N.value)||"1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté")}catch(N){d(N.message||"Erreur lors du chargement du VIH.")}finally{l(!1)}})()},[e]);const w=async()=>{b(!0),d(null);try{const{data:_,error:N}=await se.from("vih").insert({result_id:e,value:f}).select().single();if(N)throw N;r(_),v(!1)}catch(_){d(_.message||"Erreur lors de la création du VIH.")}finally{b(!1)}},j=async()=>{if(t){b(!0),d(null);try{const{data:_,error:N}=await se.from("vih").update({value:f}).eq("id",t.id).select().single();if(N)throw N;r(_),v(!1)}catch(_){d(_.message||"Erreur lors de la mise à jour du VIH.")}finally{b(!1)}}};return a?s.jsx("div",{children:"Chargement du VIH..."}):c?s.jsx("div",{className:"text-destructive",children:c}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"print:hidden flex justify-end",children:s.jsx(ne,{onClick:()=>window.print(),variant:"outline",size:"sm",children:"Imprimer"})}),s.jsx("div",{className:"print:hidden",children:t?s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-lg font-semibold",children:"VIH"}),p?s.jsxs(s.Fragment,{children:[s.jsx(Ge,{value:f,onChange:_=>h(_.target.value),disabled:x,placeholder:"ex: 1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté"}),s.jsx("p",{className:"text-muted-foreground text-lg",children:"(ex: 1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté)"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx(ne,{onClick:j,disabled:x||!f,children:x?"Sauvegarde...":"Sauvegarder"}),s.jsx(ne,{variant:"outline",onClick:()=>{v(!1),h(t.value)},disabled:x,children:"Annuler"})]})]}):s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"font-mono text-lg",children:t.value}),s.jsx(ne,{variant:"outline",size:"sm",onClick:()=>v(!0),children:"Modifier"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Créer VIH"}),s.jsx(Ge,{value:f,onChange:_=>h(_.target.value),placeholder:"ex: 1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté",disabled:x}),s.jsx("p",{className:"text-muted-foreground text-lg",children:"(ex: 1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté)"}),s.jsx(ne,{onClick:w,disabled:x||!f,className:"mt-2",children:x?"Création...":"Créer"})]})}),s.jsx("h2",{className:" text-3xl text-center mb-4 print:pt-4 font-bold uppercase mx-auto tracking-tight print:block  print:text-center",children:"VIROLOGIE"}),t!=null&&t.value?s.jsxs("div",{className:"print:block mt-8 text-black text-lg",children:[s.jsxs("div",{className:"flex flex-row justify-between mb-4",children:[s.jsx("span",{className:"font-bold underline",children:"EXAMENS"}),s.jsx("span",{className:"font-bold underline",children:"RESULTATS"})]}),s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"font-bold text-xl underline",children:"CHARGE VIRALE VIH"})}),s.jsxs("div",{className:"flex flex-row justify-between items-start mt-8",children:[s.jsxs("div",{className:"flex flex-col items-start gap-2 text-lg",style:{minWidth:"340px"},children:[s.jsx("span",{className:"font-semibold",children:"Charge virale  VIH"}),s.jsx("span",{className:"text-xs mt-1 whitespace-nowrap",children:"(Abbott m2000rt et m2000sp Technique PCR en temps réel)"}),!t.value.includes("virus")&&s.jsx("span",{className:"font-semibold mt-20",children:"Soit"})]}),s.jsx("div",{className:"flex flex-col items-end gap-2 text-lg text-right",style:{minWidth:"340px"},children:(()=>{if(/pas de virus détecté/i.test(t.value))return s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-bold text-2xl",children:"Pas de virus détecté"}),s.jsx("span",{className:"text-xs mt-1",children:"(pour 1 ml d'échantillon)"})]});const _=t.value.match(/([\d\s]+copies\/ml)/i),N=t.value.match(/;\s*([\d.]+)\s*log10/i);return s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-bold text-2xl",children:_?_[1].trim():t.value}),s.jsxs("span",{className:"text-xs font-normal",children:[" ","(limite de détection <40 pour 0.6 ml)"]}),s.jsx("span",{className:"text-xs mt-1",children:"(d'échantillon, 1 copie /ml = 0.58* 1UI/ml)"}),s.jsxs("div",{className:"flex flex-row justify-between w-full mt-8 ",children:[s.jsx("span",{}),s.jsxs("span",{className:"font-bold text-2xl",children:[N?N[1]:""," log",s.jsx("sub",{children:"10"})]})]})]})})()})]})]}):null,s.jsx("div",{className:" mt-20",children:s.jsx(ao,{date:new Date().toISOString()})})]})},AB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},kB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},DB=()=>{const{resultId:e}=vr();ir();const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(!0),[p,v]=m.useState(!1),[x,b]=m.useState(null),[w,j]=m.useState(null),[_,N]=m.useState(""),[C,E]=m.useState(!1),[T,M]=m.useState(""),[R,L]=m.useState(""),[H,$]=m.useState(!1),[I,Y]=m.useState(null),ce=[{id:"template1",component:tr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],te="template1",[q,le]=m.useState(null),[ue,O]=m.useState(!0),G=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),r(null),l(null),d(null),O(!0),le(null);try{const{data:D,error:U}=await se.from("patient_result").select("*").eq("id",e).single();if(U)throw U;if(!D)throw new Error("Résultat non trouvé.");r(D);const[F,K,ae]=await Promise.all([se.from("patient").select("*").eq("id",D.patient_id).single(),se.from("doctor").select("*").eq("id",D.doctor_id).single(),se.from("print_header_config").select("*").limit(1).maybeSingle()]);F.error&&console.warn("Erreur chargement patient:",F.error.message),K.error&&console.warn("Erreur chargement médecin:",K.error.message),l(F.data),d(K.data),le(ae.data),O(!1)}catch(D){console.error("Erreur chargement détails du résultat:",D),b(D.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{G()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),L((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const B=m.useCallback(async D=>{if(e)try{const{error:U}=await se.from("patient_result").update({description:D}).eq("id",e);if(U)throw U}catch(U){console.error("Error saving description:",U)}},[e]);m.useEffect(()=>{const D=setTimeout(()=>{_!==(t==null?void 0:t.description)&&B(_)},1e3);return()=>clearTimeout(D)},[_,t==null?void 0:t.description,B]);const ee=m.useCallback(async()=>{$(!0),Y(null);try{const D=T!==""?Number(T):null,U=R!==""?Number(R):null;if(T!==""&&isNaN(D)||R!==""&&isNaN(U)){Y("Les prix doivent être des nombres valides."),$(!1);return}const{error:F,data:K}=await se.from("patient_result").update({normal_price:D,insurance_price:U}).eq("id",t.id).select().single();if(F)throw F;r(ae=>ae&&{...ae,normal_price:D,insurance_price:U}),E(!1)}catch(D){Y(D.message||"Erreur lors de la sauvegarde des prix.")}finally{$(!1)}},[t,T,R]),k=async D=>{if(!(!t||D===t.status)){v(!0),j(null);try{const{data:U,error:F}=await se.from("patient_result").update({status:D}).eq("id",t.id).select().single();if(F)throw F;r(U||(K=>K?{...K,status:D}:null))}catch(U){console.error("Erreur mise à jour statut:",U),j(U.message||"Impossible de mettre à jour le statut.")}finally{v(!1)}}},P=(D,U,F,K)=>{const ae=D;return s.jsxs("div",{className:Ce("flex items-start space-x-3",K),children:[s.jsx(ae,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:U}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:F||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},V=m.useMemo(()=>{var U;const D=(q==null?void 0:q.selected_template)||te;return((U=ce.find(F=>F.id===D))==null?void 0:U.component)||tr},[q]),X=m.useMemo(()=>({logoUrl:(q==null?void 0:q.logo_url)||null,labName:q==null?void 0:q.lab_name,addressLine1:q==null?void 0:q.address_line1,addressLine2:q==null?void 0:q.address_line2,cityPostalCode:q==null?void 0:q.city_postal_code,phone:q==null?void 0:q.phone,email:q==null?void 0:q.email,website:q==null?void 0:q.website}),[q]);return f?s.jsxs("div",{className:"space-y-6",children:[s.jsx(W,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]}),s.jsxs(Te,{children:[s.jsxs(Ae,{children:[s.jsx(W,{className:"h-5 w-24"}),s.jsx(W,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx(W,{className:"h-8 w-full"}),s.jsx(W,{className:"h-8 w-full"})]})]})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-20 w-full"})})]}),s.jsxs(Te,{children:[s.jsx(Ae,{children:s.jsx(W,{className:"h-6 w-1/3"})}),s.jsx(Re,{children:s.jsx(W,{className:"h-20 w-full"})})]})]}):x?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(st,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Dt,{variant:"destructive",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"Erreur"}),s.jsxs(Pt,{children:[x," ",s.jsx(ne,{variant:"link",onClick:G,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(st,{to:a?`/patients/${a.id}`:"/patients",children:s.jsxs(ne,{variant:"outline",size:"sm",children:[s.jsx(En,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(as,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),s.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[q?s.jsx("div",{className:"mb-2 print:mb-0",children:s.jsx(V,{data:X,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Dt,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx(Ot,{children:"En-tête Manquant"}),s.jsxs(Pt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(st,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Gr,{className:"my-2 print:my-0 print:border-none"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs(Te,{className:"overflow-hidden print:shadow-none",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(Xe,"NOM PRENOM",a==null?void 0:a.full_name),P(Xe,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),P(vn,"Date Naissance",a!=null&&a.date_of_birth?dt(Qt(a.date_of_birth),"P",{locale:Xt}):null),s.jsx("div",{className:"hidden print:block",children:P(vn,"Date Résultat",t.result_date?dt(Qt(t.result_date),"Pp",{locale:Xt}):null)})]})]}),s.jsxs(Te,{className:"overflow-hidden print:shadow-none _print:border-none",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Kn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(Bt,"NOM PRENOM",c==null?void 0:c.full_name),P(xn,"Téléphone",c==null?void 0:c.phone),P(Xe,"Provenance",c==null?void 0:c.hospital)]})]}),s.jsxs(Te,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[s.jsx(Ae,{className:"pb-2 print:pb-1",children:s.jsxs(xt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs(Re,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(vn,"Date Résultat",t.result_date?dt(Qt(t.result_date),"Pp",{locale:Xt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),C?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:D=>M(D.target.value),disabled:H}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),C?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:R,onChange:D=>L(D.target.value),disabled:H}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:R,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:C?s.jsxs(s.Fragment,{children:[s.jsxs(ne,{size:"xs",variant:"secondary",onClick:ee,disabled:H,children:[H?s.jsx($t,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:H,children:"Annuler"})]}):s.jsx(ne,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),I&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:I})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Xe,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Qn,{value:t.status??"",onValueChange:D=>k(D),disabled:p,children:[s.jsxs(Jn,{id:"resultStatus",className:"h-9 flex-1",children:[" ",s.jsx(Zn,{placeholder:"Changer statut..."})," "]}),s.jsxs(er,{children:[s.jsx(yt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(yt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(yt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ii,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&s.jsx($t,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),s.jsx(ls,{variant:AB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:kB(t.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Bt,{className:"h-4 w-4"}),"Patient"]}),P(Xe,"NOM PRENOM",a==null?void 0:a.full_name),P(Xe,"ID Unique",a==null?void 0:a.patient_unique_id),P(xn,"Téléphone",a==null?void 0:a.phone)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Kn,{className:"h-4 w-4"})," Médecin"]}),P(Bt,"NOM PRENOM",c==null?void 0:c.full_name),P(xn,"Téléphone",c==null?void 0:c.phone),P(Xe,"Hôpital",c==null?void 0:c.hospital)]})]}),s.jsx(OB,{resultId:e})]})]}):s.jsx("div",{children:"Résultat non trouvé."})};function OB({resultId:e}){const[t,r]=m.useState(!0),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(!1),[p,v]=m.useState(null),[x,b]=m.useState({diagnostic_clinique:"",biopsie_chirurgicale:"",fixateur_utilise:"",etude_macroscopique:"",etude_histologique:"",conclusion:"",bottom_text:""}),[w,j]=m.useState({cityDate:`BAMAKO, LE ${dt(new Date,"dd/MM/yyyy")}`,doctor:"Dr, Bourama COULIBALY"});m.useEffect(()=>{const E=localStorage.getItem("anapath_city_date"),T=localStorage.getItem("anapath_doctor");j({cityDate:E||"BAMAKO, LE 4/06/2024",doctor:T||"Dr, Bourama COULIBALY"})},[]),m.useEffect(()=>{localStorage.setItem("anapath_city_date",w.cityDate),localStorage.setItem("anapath_doctor",w.doctor)},[w]);const _=E=>{const{name:T,value:M}=E.target;j(R=>({...R,[T]:M}))};m.useEffect(()=>{async function E(){r(!0),l(null);const{data:T,error:M}=await se.from("anapath").select("*").eq("result_id",e).maybeSingle();if(M){l("Erreur lors du chargement: "+M.message),r(!1);return}if(T){d(T),b({diagnostic_clinique:T.diagnostic_clinique||"",biopsie_chirurgicale:T.biopsie_chirurgicale||"",fixateur_utilise:T.fixateur_utilise||"",etude_macroscopique:T.etude_macroscopique||"",etude_histologique:T.etude_histologique||"",conclusion:T.conclusion||"",bottom_text:T.bottom_text||""}),r(!1);return}const{data:R,error:L}=await se.from("anapath").insert([{result_id:e}]).select().maybeSingle();if(L)if(L.code==="23505"||L.message&&L.message.includes("duplicate key value")){const{data:H,error:$}=await se.from("anapath").select("*").eq("result_id",e).maybeSingle();$?l("Erreur lors du chargement après duplication: "+$.message):H?(d(H),b({diagnostic_clinique:H.diagnostic_clinique||"",biopsie_chirurgicale:H.biopsie_chirurgicale||"",fixateur_utilise:H.fixateur_utilise||"",etude_macroscopique:H.etude_macroscopique||"",etude_histologique:H.etude_histologique||"",conclusion:H.conclusion||"",bottom_text:H.bottom_text||""})):l("Erreur inattendue lors de la récupération après duplication.")}else l("Erreur lors de la création: "+L.message);else d(R),b({diagnostic_clinique:R.diagnostic_clinique||"",biopsie_chirurgicale:R.biopsie_chirurgicale||"",fixateur_utilise:R.fixateur_utilise||"",etude_macroscopique:R.etude_macroscopique||"",etude_histologique:R.etude_histologique||"",conclusion:R.conclusion||"",bottom_text:R.bottom_text||""});r(!1)}e&&E()},[e]);const N=E=>{const{name:T,value:M}=E.target;b(R=>({...R,[T]:M}))},C=async()=>{if(!c)return;h(!0),v(null);const{error:E}=await se.from("anapath").update(x).eq("id",c.id);h(!1),v(E?"Erreur lors de la sauvegarde: "+E.message:"Modifications enregistrées !")};return t?s.jsx("div",{children:"Chargement..."}):a?s.jsx("div",{className:"text-red-500",children:a}):c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-end mb-4 print:hidden",children:s.jsxs(ne,{onClick:()=>window.print(),variant:"outline",children:[s.jsx(vf,{className:"mr-2 h-4 w-4"})," Imprimer"]})}),s.jsxs("div",{className:"w-full mx-auto bg-white p-8 rounded shadow print:bg-white print:shadow-none print:p-0 print:max-w-full print:text-black print:font-serif print:leading-relaxed print:text-[16pt] print:rounded-none",style:{minHeight:"29.7cm",minWidth:"21cm"},children:[s.jsx("h1",{className:"text-2xl font-bold text-center mb-6 uppercase print:text-[20pt] print:mb-8 print:font-bold",children:"EXAMEN ANATOMO-PATHOLOGIQUE"}),s.jsxs("div",{className:"mb-4 print:mb-6",children:[s.jsx("h2",{className:"font-bold mb-2 print:mb-1 print:text-[17pt] uppercase",children:"Résumé de l’Observation Clinique :"}),s.jsxs("div",{className:"ml-4 space-y-2 print:ml-0 print:space-y-1",children:[s.jsxs("div",{children:["Diagnostic Clinique :",s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.diagnostic_clinique}),s.jsx("input",{name:"diagnostic_clinique",value:x.diagnostic_clinique,onChange:N,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Diagnostic Clinique",disabled:f})]})]}),s.jsxs("div",{children:["Biopsie Chirurgicale :",s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.biopsie_chirurgicale}),s.jsx("input",{name:"biopsie_chirurgicale",value:x.biopsie_chirurgicale,onChange:N,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Biopsie Chirurgicale",disabled:f})]})]}),s.jsxs("div",{children:["Fixateur Utilisé :",s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.fixateur_utilise}),s.jsx("input",{name:"fixateur_utilise",value:x.fixateur_utilise,onChange:N,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Fixateur Utilisé",disabled:f})]})]})]})]}),s.jsxs("div",{className:"mb-4 print:mb-6",children:[s.jsx("h2",{className:"font-bold mb-2 uppercase print:mb-1 print:text-[17pt]",children:"COMPTE –RENDU HISTOPATHOLOGIQUE :"}),s.jsxs("div",{className:"ml-4 space-y-2 print:ml-0 print:space-y-1",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold print:text-[16pt]",children:"I. Etude Macroscopique :"}),s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.etude_macroscopique}),s.jsx("textarea",{name:"etude_macroscopique",value:x.etude_macroscopique,onChange:N,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Etude Macroscopique",rows:2,disabled:f})]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold print:text-[16pt]",children:"2-Etude Histologique :"}),s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.etude_histologique}),s.jsx("textarea",{name:"etude_histologique",value:x.etude_histologique,onChange:N,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Etude Histologique",rows:2,disabled:f})]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold underline print:text-[16pt]",children:"3-Conclusion :"}),s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.conclusion}),s.jsx("textarea",{name:"conclusion",value:x.conclusion,onChange:N,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Conclusion",rows:2,disabled:f})]})]}),s.jsx("div",{children:s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.bottom_text}),s.jsx("textarea",{name:"bottom_text",value:x.bottom_text,onChange:N,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"OLGA/OLGIM...",rows:1,disabled:f})]})})]})]}),s.jsxs("div",{className:"mt-8 flex flex-col items-end print:mt-12 print:items-end",children:[s.jsxs("span",{className:"print:text-[15pt]",children:[s.jsx("span",{className:"hidden print:inline",children:w.cityDate}),s.jsx("input",{name:"cityDate",value:w.cityDate,onChange:_,className:"border-b border-gray-300 focus:outline-none bg-transparent w-auto text-right print:hidden"})]}),s.jsxs("span",{className:"print:text-[15pt]",children:[s.jsx("span",{className:"hidden print:inline",children:w.doctor}),s.jsx("input",{name:"doctor",value:w.doctor,onChange:_,className:"border-b border-gray-300 focus:outline-none bg-transparent w-auto text-right print:hidden"})]})]}),s.jsxs("div",{className:"mt-6 flex items-center gap-4 print:hidden",children:[s.jsx(ne,{onClick:C,disabled:f,variant:"default",children:f?"Enregistrement...":"Enregistrer"}),p&&s.jsx("span",{className:p.startsWith("Erreur")?"text-red-500":"text-green-600",children:p})]})]}),s.jsx("div",{className:"print:block hidden page-break-after"})]}):s.jsx("div",{children:"Entrée Anapath non trouvée."})}function PB(){return s.jsx(s.Fragment,{children:s.jsxs(kT,{children:[s.jsx(kt,{path:"/login",element:s.jsx(J3,{})}),s.jsx(kt,{element:s.jsx(X3,{}),children:s.jsxs(kt,{element:s.jsx(W3,{}),children:[s.jsx(kt,{index:!0,element:s.jsx(_w,{})}),s.jsx(kt,{path:"/patients",element:s.jsx(_w,{})}),s.jsx(kt,{path:"/patients/new",element:s.jsx(Ow,{})})," ",s.jsx(kt,{path:"/patients/:patientId",element:s.jsx(b6,{})}),s.jsx(kt,{path:"/patients/:patientId/edit",element:s.jsx(Ow,{})})," ",s.jsx(kt,{path:"/patients/:patientId/results/new",element:s.jsx(Qw,{})}),s.jsx(kt,{path:"/results/:resultId",element:s.jsx(QU,{})}),s.jsx(kt,{path:"/results/:resultId/edit",element:s.jsx(Qw,{})}),s.jsx(kt,{path:"/doctors",element:s.jsx(w6,{})}),s.jsx(kt,{path:"/doctors/new",element:s.jsx(tj,{})})," ",s.jsx(kt,{path:"/doctors/:doctorId/edit",element:s.jsx(tj,{})})," ",s.jsx(kt,{path:"/test-types",element:s.jsx(JU,{})}),s.jsx(kt,{path:"/test-types/new",element:s.jsx(ej,{})}),s.jsx(kt,{path:"/test-types/:testTypeId/edit",element:s.jsx(ej,{})}),s.jsx(kt,{path:"/categories",element:s.jsx(s$,{})})," ",s.jsx(kt,{path:"/ristournes",element:s.jsx(oB,{})}),s.jsx(kt,{path:"/ristournes/new",element:s.jsx(ij,{})}),s.jsx(kt,{path:"/ristournes/:ristourneId",element:s.jsx(ij,{})}),s.jsx(kt,{path:"/settings/print-header",element:s.jsx(aB,{})}),s.jsx(kt,{path:"/protidogramme/:resultId",element:s.jsx(fB,{})}),s.jsx(kt,{path:"/skip-range-management",element:s.jsx(cB,{})}),s.jsx(kt,{path:"/atbs",element:s.jsx(xB,{})}),s.jsx(kt,{path:"/atb/:resultId",element:s.jsx(gB,{})}),s.jsx(kt,{path:"/ecb/:resultId",element:s.jsx(wB,{})}),s.jsx(kt,{path:"/ecb-models",element:s.jsx(jB,{})}),s.jsx(kt,{path:"/vhb/:resultId",element:s.jsx(SB,{})}),s.jsx(kt,{path:"/vih/:resultId",element:s.jsx(RB,{})}),s.jsx(kt,{path:"/anapath/:resultId",element:s.jsx(DB,{})})]})}),s.jsx(kt,{path:"*",element:s.jsx(j6,{})})]})})}var LB=(e,t,r,a,l,c,d,f)=>{let h=document.documentElement,p=["light","dark"];function v(w){(Array.isArray(e)?e:[e]).forEach(j=>{let _=j==="class",N=_&&c?l.map(C=>c[C]||C):l;_?(h.classList.remove(...N),h.classList.add(c&&c[w]?c[w]:w)):h.setAttribute(j,w)}),x(w)}function x(w){f&&p.includes(w)&&(h.style.colorScheme=w)}function b(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(a)v(a);else try{let w=localStorage.getItem(t)||r,j=d&&w==="system"?b():w;v(j)}catch{}},IB=m.createContext(void 0),zB={setTheme:e=>{},themes:[]},UB=()=>{var e;return(e=m.useContext(IB))!=null?e:zB};m.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:a,enableColorScheme:l,defaultTheme:c,value:d,themes:f,nonce:h,scriptProps:p})=>{let v=JSON.stringify([r,t,c,e,f,d,a,l]).slice(1,-1);return m.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(${LB.toString()})(${v})`}})});const $B=({...e})=>{const{theme:t="system"}=UB();return s.jsx(A$,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};$C.createRoot(document.getElementById("root")).render(s.jsx(we.StrictMode,{children:s.jsx(tR,{children:s.jsxs(pA,{children:[s.jsx($B,{richColors:!0,position:"top-right"})," ",s.jsx(PB,{})]})})}));export{Xd as g};
