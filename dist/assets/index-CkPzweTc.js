function RC(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in e)){const c=Object.getOwnPropertyDescriptor(a,l);c&&Object.defineProperty(e,l,c.get?c:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function Xd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function TC(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var l=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:function(){return e[a]}})}),r}var zm={exports:{}},Qo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function MC(){if(o0)return Qo;o0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:e,type:a,key:d,ref:l!==void 0?l:null,props:c}}return Qo.Fragment=t,Qo.jsx=r,Qo.jsxs=r,Qo}var c0;function AC(){return c0||(c0=1,zm.exports=MC()),zm.exports}var s=AC(),Um={exports:{}},ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function kC(){if(u0)return ut;u0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function b(k){return k===null||typeof k!="object"?null:(k=x&&k[x]||k["@@iterator"],typeof k=="function"?k:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,N={};function _(k,P,F){this.props=k,this.context=P,this.refs=N,this.updater=F||w}_.prototype.isReactComponent={},_.prototype.setState=function(k,P){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,P,"setState")},_.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function C(){}C.prototype=_.prototype;function E(k,P,F){this.props=k,this.context=P,this.refs=N,this.updater=F||w}var R=E.prototype=new C;R.constructor=E,j(R,_.prototype),R.isPureReactComponent=!0;var M=Array.isArray,T={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function H(k,P,F,X,D,z){return F=z.ref,{$$typeof:e,type:k,key:P,ref:F!==void 0?F:null,props:z}}function q(k,P){return H(k.type,P,void 0,void 0,void 0,k.props)}function G(k){return typeof k=="object"&&k!==null&&k.$$typeof===e}function W(k){var P={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(F){return P[F]})}var ce=/\/+/g;function se(k,P){return typeof k=="object"&&k!==null&&k.key!=null?W(""+k.key):P.toString(36)}function B(){}function ie(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(B,B):(k.status="pending",k.then(function(P){k.status==="pending"&&(k.status="fulfilled",k.value=P)},function(P){k.status==="pending"&&(k.status="rejected",k.reason=P)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function oe(k,P,F,X,D){var z=typeof k;(z==="undefined"||z==="boolean")&&(k=null);var $=!1;if(k===null)$=!0;else switch(z){case"bigint":case"string":case"number":$=!0;break;case"object":switch(k.$$typeof){case e:case t:$=!0;break;case v:return $=k._init,oe($(k._payload),P,F,X,D)}}if($)return D=D(k),$=X===""?"."+se(k,0):X,M(D)?(F="",$!=null&&(F=$.replace(ce,"$&/")+"/"),oe(D,P,F,"",function(pe){return pe})):D!=null&&(G(D)&&(D=q(D,F+(D.key==null||k&&k.key===D.key?"":(""+D.key).replace(ce,"$&/")+"/")+$)),P.push(D)),1;$=0;var K=X===""?".":X+":";if(M(k))for(var re=0;re<k.length;re++)X=k[re],z=K+se(X,re),$+=oe(X,P,F,z,D);else if(re=b(k),typeof re=="function")for(k=re.call(k),re=0;!(X=k.next()).done;)X=X.value,z=K+se(X,re++),$+=oe(X,P,F,z,D);else if(z==="object"){if(typeof k.then=="function")return oe(ie(k),P,F,X,D);throw P=String(k),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return $}function O(k,P,F){if(k==null)return k;var X=[],D=0;return oe(k,X,"","",function(z){return P.call(F,z,D++)}),X}function V(k){if(k._status===-1){var P=k._result;P=P(),P.then(function(F){(k._status===0||k._status===-1)&&(k._status=1,k._result=F)},function(F){(k._status===0||k._status===-1)&&(k._status=2,k._result=F)}),k._status===-1&&(k._status=0,k._result=P)}if(k._status===1)return k._result.default;throw k._result}var U=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function J(){}return ut.Children={map:O,forEach:function(k,P,F){O(k,function(){P.apply(this,arguments)},F)},count:function(k){var P=0;return O(k,function(){P++}),P},toArray:function(k){return O(k,function(P){return P})||[]},only:function(k){if(!G(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},ut.Component=_,ut.Fragment=r,ut.Profiler=l,ut.PureComponent=E,ut.StrictMode=a,ut.Suspense=h,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,ut.act=function(){throw Error("act(...) is not supported in production builds of React.")},ut.cache=function(k){return function(){return k.apply(null,arguments)}},ut.cloneElement=function(k,P,F){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var X=j({},k.props),D=k.key,z=void 0;if(P!=null)for($ in P.ref!==void 0&&(z=void 0),P.key!==void 0&&(D=""+P.key),P)!L.call(P,$)||$==="key"||$==="__self"||$==="__source"||$==="ref"&&P.ref===void 0||(X[$]=P[$]);var $=arguments.length-2;if($===1)X.children=F;else if(1<$){for(var K=Array($),re=0;re<$;re++)K[re]=arguments[re+2];X.children=K}return H(k.type,D,void 0,void 0,z,X)},ut.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:c,_context:k},k},ut.createElement=function(k,P,F){var X,D={},z=null;if(P!=null)for(X in P.key!==void 0&&(z=""+P.key),P)L.call(P,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(D[X]=P[X]);var $=arguments.length-2;if($===1)D.children=F;else if(1<$){for(var K=Array($),re=0;re<$;re++)K[re]=arguments[re+2];D.children=K}if(k&&k.defaultProps)for(X in $=k.defaultProps,$)D[X]===void 0&&(D[X]=$[X]);return H(k,z,void 0,void 0,null,D)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(k){return{$$typeof:f,render:k}},ut.isValidElement=G,ut.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:V}},ut.memo=function(k,P){return{$$typeof:p,type:k,compare:P===void 0?null:P}},ut.startTransition=function(k){var P=T.T,F={};T.T=F;try{var X=k(),D=T.S;D!==null&&D(F,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(J,U)}catch(z){U(z)}finally{T.T=P}},ut.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},ut.use=function(k){return T.H.use(k)},ut.useActionState=function(k,P,F){return T.H.useActionState(k,P,F)},ut.useCallback=function(k,P){return T.H.useCallback(k,P)},ut.useContext=function(k){return T.H.useContext(k)},ut.useDebugValue=function(){},ut.useDeferredValue=function(k,P){return T.H.useDeferredValue(k,P)},ut.useEffect=function(k,P){return T.H.useEffect(k,P)},ut.useId=function(){return T.H.useId()},ut.useImperativeHandle=function(k,P,F){return T.H.useImperativeHandle(k,P,F)},ut.useInsertionEffect=function(k,P){return T.H.useInsertionEffect(k,P)},ut.useLayoutEffect=function(k,P){return T.H.useLayoutEffect(k,P)},ut.useMemo=function(k,P){return T.H.useMemo(k,P)},ut.useOptimistic=function(k,P){return T.H.useOptimistic(k,P)},ut.useReducer=function(k,P,F){return T.H.useReducer(k,P,F)},ut.useRef=function(k){return T.H.useRef(k)},ut.useState=function(k){return T.H.useState(k)},ut.useSyncExternalStore=function(k,P,F){return T.H.useSyncExternalStore(k,P,F)},ut.useTransition=function(){return T.H.useTransition()},ut.version="19.0.0",ut}var d0;function og(){return d0||(d0=1,Um.exports=kC()),Um.exports}var m=og();const be=Xd(m),DC=RC({__proto__:null,default:be},[m]);var $m={exports:{}},Zo={},Bm={exports:{}},Hm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function OC(){return f0||(f0=1,function(e){function t(O,V){var U=O.length;O.push(V);e:for(;0<U;){var J=U-1>>>1,k=O[J];if(0<l(k,V))O[J]=V,O[U]=k,U=J;else break e}}function r(O){return O.length===0?null:O[0]}function a(O){if(O.length===0)return null;var V=O[0],U=O.pop();if(U!==V){O[0]=U;e:for(var J=0,k=O.length,P=k>>>1;J<P;){var F=2*(J+1)-1,X=O[F],D=F+1,z=O[D];if(0>l(X,U))D<k&&0>l(z,X)?(O[J]=z,O[D]=U,J=D):(O[J]=X,O[F]=U,J=F);else if(D<k&&0>l(z,U))O[J]=z,O[D]=U,J=D;else break e}}return V}function l(O,V){var U=O.sortIndex-V.sortIndex;return U!==0?U:O.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var h=[],p=[],v=1,x=null,b=3,w=!1,j=!1,N=!1,_=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function R(O){for(var V=r(p);V!==null;){if(V.callback===null)a(p);else if(V.startTime<=O)a(p),V.sortIndex=V.expirationTime,t(h,V);else break;V=r(p)}}function M(O){if(N=!1,R(O),!j)if(r(h)!==null)j=!0,ie();else{var V=r(p);V!==null&&oe(M,V.startTime-O)}}var T=!1,L=-1,H=5,q=-1;function G(){return!(e.unstable_now()-q<H)}function W(){if(T){var O=e.unstable_now();q=O;var V=!0;try{e:{j=!1,N&&(N=!1,C(L),L=-1),w=!0;var U=b;try{t:{for(R(O),x=r(h);x!==null&&!(x.expirationTime>O&&G());){var J=x.callback;if(typeof J=="function"){x.callback=null,b=x.priorityLevel;var k=J(x.expirationTime<=O);if(O=e.unstable_now(),typeof k=="function"){x.callback=k,R(O),V=!0;break t}x===r(h)&&a(h),R(O)}else a(h);x=r(h)}if(x!==null)V=!0;else{var P=r(p);P!==null&&oe(M,P.startTime-O),V=!1}}break e}finally{x=null,b=U,w=!1}V=void 0}}finally{V?ce():T=!1}}}var ce;if(typeof E=="function")ce=function(){E(W)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,B=se.port2;se.port1.onmessage=W,ce=function(){B.postMessage(null)}}else ce=function(){_(W,0)};function ie(){T||(T=!0,ce())}function oe(O,V){L=_(function(){O(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){j||w||(j=!0,ie())},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(O){switch(b){case 1:case 2:case 3:var V=3;break;default:V=b}var U=b;b=V;try{return O()}finally{b=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=b;b=O;try{return V()}finally{b=U}},e.unstable_scheduleCallback=function(O,V,U){var J=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?J+U:J):U=J,O){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=U+k,O={id:v++,callback:V,priorityLevel:O,startTime:U,expirationTime:k,sortIndex:-1},U>J?(O.sortIndex=U,t(p,O),r(h)===null&&O===r(p)&&(N?(C(L),L=-1):N=!0,oe(M,U-J))):(O.sortIndex=k,t(h,O),j||w||(j=!0,ie())),O},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(O){var V=b;return function(){var U=b;b=V;try{return O.apply(this,arguments)}finally{b=U}}}}(Hm)),Hm}var h0;function PC(){return h0||(h0=1,Bm.exports=OC()),Bm.exports}var qm={exports:{}},Qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function LC(){if(m0)return Qn;m0=1;var e=og();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(h,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:x==null?null:""+x,children:h,containerInfo:p,implementation:v}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Qn.createPortal=function(h,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return c(h,p,null,v)},Qn.flushSync=function(h){var p=d.T,v=a.p;try{if(d.T=null,a.p=2,h)return h()}finally{d.T=p,a.p=v,a.d.f()}},Qn.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(h,p))},Qn.prefetchDNS=function(h){typeof h=="string"&&a.d.D(h)},Qn.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var v=p.as,x=f(v,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?a.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:w}):v==="script"&&a.d.X(h,{crossOrigin:x,integrity:b,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Qn.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=f(p.as,p.crossOrigin);a.d.M(h,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(h)},Qn.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=f(v,p.crossOrigin);a.d.L(h,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Qn.preloadModule=function(h,p){if(typeof h=="string")if(p){var v=f(p.as,p.crossOrigin);a.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(h)},Qn.requestFormReset=function(h){a.d.r(h)},Qn.unstable_batchedUpdates=function(h,p){return h(p)},Qn.useFormState=function(h,p,v){return d.H.useFormState(h,p,v)},Qn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Qn.version="19.0.0",Qn}var p0;function lj(){if(p0)return qm.exports;p0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),qm.exports=LC(),qm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function IC(){if(g0)return Zo;g0=1;var e=PC(),t=og(),r=lj();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var c=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),M=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=T&&n[T]||n["@@iterator"],typeof n=="function"?n:null)}var H=Symbol.for("react.client.reference");function q(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===H?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case h:return"Fragment";case f:return"Portal";case v:return"Profiler";case p:return"StrictMode";case N:return"Suspense";case _:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case w:return(n.displayName||"Context")+".Provider";case b:return(n._context.displayName||"Context")+".Consumer";case j:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return i=n.displayName||null,i!==null?i:q(n.type)||"Memo";case E:i=n._payload,n=n._init;try{return q(n(i))}catch{}}return null}var G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=Object.assign,ce,se;function B(n){if(ce===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);ce=i&&i[1]||"",se=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+n+se}var ie=!1;function oe(n,i){if(!n||ie)return"";ie=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(de){var le=de}Reflect.construct(n,[],we)}else{try{we.call()}catch(de){le=de}n.call(we.prototype)}}else{try{throw Error()}catch(de){le=de}(we=n())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(de){if(de&&le&&typeof de.stack=="string")return[de.stack,le.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),S=y[0],A=y[1];if(S&&A){var I=S.split(`
`),Z=A.split(`
`);for(g=u=0;u<I.length&&!I[u].includes("DetermineComponentFrameRoot");)u++;for(;g<Z.length&&!Z[g].includes("DetermineComponentFrameRoot");)g++;if(u===I.length||g===Z.length)for(u=I.length-1,g=Z.length-1;1<=u&&0<=g&&I[u]!==Z[g];)g--;for(;1<=u&&0<=g;u--,g--)if(I[u]!==Z[g]){if(u!==1||g!==1)do if(u--,g--,0>g||I[u]!==Z[g]){var fe=`
`+I[u].replace(" at new "," at ");return n.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",n.displayName)),fe}while(1<=u&&0<=g);break}}}finally{ie=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?B(o):""}function O(n){switch(n.tag){case 26:case 27:case 5:return B(n.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 15:return n=oe(n.type,!1),n;case 11:return n=oe(n.type.render,!1),n;case 1:return n=oe(n.type,!0),n;default:return""}}function V(n){try{var i="";do i+=O(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function U(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function J(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function k(n){if(U(n)!==n)throw Error(a(188))}function P(n){var i=n.alternate;if(!i){if(i=U(n),i===null)throw Error(a(188));return i!==n?null:n}for(var o=n,u=i;;){var g=o.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===o)return k(g),n;if(y===u)return k(g),i;y=y.sibling}throw Error(a(188))}if(o.return!==u.return)o=g,u=y;else{for(var S=!1,A=g.child;A;){if(A===o){S=!0,o=g,u=y;break}if(A===u){S=!0,u=g,o=y;break}A=A.sibling}if(!S){for(A=y.child;A;){if(A===o){S=!0,o=y,u=g;break}if(A===u){S=!0,u=y,o=g;break}A=A.sibling}if(!S)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?n:i}function F(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=F(n),i!==null)return i;n=n.sibling}return null}var X=Array.isArray,D=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},$=[],K=-1;function re(n){return{current:n}}function pe(n){0>K||(n.current=$[K],$[K]=null,K--)}function ue(n,i){K++,$[K]=n.current,n.current=i}var _e=re(null),Re=re(null),lt=re(null),rt=re(null);function ge(n,i){switch(ue(lt,i),ue(Re,n),ue(_e,null),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?Ib(i):0;break;default:if(n=n===8?i.parentNode:i,i=n.tagName,n=n.namespaceURI)n=Ib(n),i=zb(n,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}pe(_e),ue(_e,i)}function me(){pe(_e),pe(Re),pe(lt)}function De(n){n.memoizedState!==null&&ue(rt,n);var i=_e.current,o=zb(i,n.type);i!==o&&(ue(Re,n),ue(_e,o))}function ye(n){Re.current===n&&(pe(_e),pe(Re)),rt.current===n&&(pe(rt),Yo._currentValue=z)}var je=Object.prototype.hasOwnProperty,Pe=e.unstable_scheduleCallback,Ye=e.unstable_cancelCallback,qe=e.unstable_shouldYield,gt=e.unstable_requestPaint,Mt=e.unstable_now,Qt=e.unstable_getCurrentPriorityLevel,Be=e.unstable_ImmediatePriority,st=e.unstable_UserBlockingPriority,nn=e.unstable_NormalPriority,Mn=e.unstable_LowPriority,Sn=e.unstable_IdlePriority,Et=e.log,xe=e.unstable_setDisableYieldValue,Te=null,$e=null;function et(n){if($e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(Te,n,void 0,(n.current.flags&128)===128)}catch{}}function Ge(n){if(typeof Et=="function"&&xe(n),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(Te,n)}catch{}}var Ft=Math.clz32?Math.clz32:Bn,on=Math.log,wt=Math.LN2;function Bn(n){return n>>>=0,n===0?32:31-(on(n)/wt|0)|0}var mn=128,tt=4194304;function ct(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ke(n,i){var o=n.pendingLanes;if(o===0)return 0;var u=0,g=n.suspendedLanes,y=n.pingedLanes,S=n.warmLanes;n=n.finishedLanes!==0;var A=o&134217727;return A!==0?(o=A&~g,o!==0?u=ct(o):(y&=A,y!==0?u=ct(y):n||(S=A&~S,S!==0&&(u=ct(S))))):(A=o&~g,A!==0?u=ct(A):y!==0?u=ct(y):n||(S=o&~S,S!==0&&(u=ct(S)))),u===0?0:i!==0&&i!==u&&(i&g)===0&&(g=u&-u,S=i&-i,g>=S||g===32&&(S&4194176)!==0)?i:u}function vt(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function ot(n,i){switch(n){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jt(){var n=mn;return mn<<=1,(mn&4194176)===0&&(mn=128),n}function cn(){var n=tt;return tt<<=1,(tt&62914560)===0&&(tt=4194304),n}function It(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function mt(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function En(n,i,o,u,g,y){var S=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,I=n.expirationTimes,Z=n.hiddenUpdates;for(o=S&~o;0<o;){var fe=31-Ft(o),we=1<<fe;A[fe]=0,I[fe]=-1;var le=Z[fe];if(le!==null)for(Z[fe]=null,fe=0;fe<le.length;fe++){var de=le[fe];de!==null&&(de.lane&=-536870913)}o&=~we}u!==0&&Vt(n,u,0),y!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=y&~(S&~i))}function Vt(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-Ft(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194218}function en(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-Ft(o),g=1<<u;g&i|n[u]&i&&(n[u]|=i),o&=~g}}function wr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function An(){var n=D.p;return n!==0?n:(n=window.event,n===void 0?32:n0(n.type))}function kn(n,i){var o=D.p;try{return D.p=n,i()}finally{D.p=o}}var Xn=Math.random().toString(36).slice(2),pn="__reactFiber$"+Xn,Hn="__reactProps$"+Xn,he="__reactContainer$"+Xn,Ne="__reactEvents$"+Xn,Oe="__reactListeners$"+Xn,At="__reactHandles$"+Xn,dn="__reactResources$"+Xn,qn="__reactMarker$"+Xn;function dr(n){delete n[pn],delete n[Hn],delete n[Ne],delete n[Oe],delete n[At]}function Dn(n){var i=n[pn];if(i)return i;for(var o=n.parentNode;o;){if(i=o[he]||o[pn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=Bb(n);n!==null;){if(o=n[pn])return o;n=Bb(n)}return i}n=o,o=n.parentNode}return null}function Ot(n){if(n=n[pn]||n[he]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function ca(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function Ds(n){var i=n[dn];return i||(i=n[dn]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function bn(n){n[qn]=!0}var Lv=new Set,Iv={};function ei(n,i){Oi(n,i),Oi(n+"Capture",i)}function Oi(n,i){for(Iv[n]=i,n=0;n<i.length;n++)Lv.add(i[n])}var Os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zv={},Uv={};function jE(n){return je.call(Uv,n)?!0:je.call(zv,n)?!1:wE.test(n)?Uv[n]=!0:(zv[n]=!0,!1)}function Jc(n,i,o){if(jE(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function eu(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Ps(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}function Or(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $v(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function _E(n){var i=$v(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,y=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return g.call(this)},set:function(S){u=""+S,y.call(this,S)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(S){u=""+S},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function tu(n){n._valueTracker||(n._valueTracker=_E(n))}function Bv(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=$v(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function nu(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var NE=/[\n"\\]/g;function Pr(n){return n.replace(NE,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Lf(n,i,o,u,g,y,S,A){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),i!=null?S==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Or(i)):n.value!==""+Or(i)&&(n.value=""+Or(i)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),i!=null?If(n,S,Or(i)):o!=null?If(n,S,Or(o)):u!=null&&n.removeAttribute("value"),g==null&&y!=null&&(n.defaultChecked=!!y),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+Or(A):n.removeAttribute("name")}function Hv(n,i,o,u,g,y,S,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null))return;o=o!=null?""+Or(o):"",i=i!=null?""+Or(i):o,A||i===n.value||(n.value=i),n.defaultValue=i}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S)}function If(n,i,o){i==="number"&&nu(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Pi(n,i,o,u){if(n=n.options,i){i={};for(var g=0;g<o.length;g++)i["$"+o[g]]=!0;for(o=0;o<n.length;o++)g=i.hasOwnProperty("$"+n[o].value),n[o].selected!==g&&(n[o].selected=g),g&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Or(o),i=null,g=0;g<n.length;g++){if(n[g].value===o){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}i!==null||n[g].disabled||(i=n[g])}i!==null&&(i.selected=!0)}}function qv(n,i,o){if(i!=null&&(i=""+Or(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Or(o):""}function Fv(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(X(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Or(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Li(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var SE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vv(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||SE.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Yv(n,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in i)u=i[g],i.hasOwnProperty(g)&&o[g]!==u&&Vv(n,g,u)}else for(var y in i)i.hasOwnProperty(y)&&Vv(n,y,i[y])}function zf(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var EE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),CE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ru(n){return CE.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Uf=null;function $f(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ii=null,zi=null;function Gv(n){var i=Ot(n);if(i&&(n=i.stateNode)){var o=n[Hn]||null;e:switch(n=i.stateNode,i.type){case"input":if(Lf(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pr(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var g=u[Hn]||null;if(!g)throw Error(a(90));Lf(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Bv(u)}break e;case"textarea":qv(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Pi(n,!!o.multiple,i,!1)}}}var Bf=!1;function Wv(n,i,o){if(Bf)return n(i,o);Bf=!0;try{var u=n(i);return u}finally{if(Bf=!1,(Ii!==null||zi!==null)&&($u(),Ii&&(i=Ii,n=zi,zi=Ii=null,Gv(i),n)))for(i=0;i<n.length;i++)Gv(n[i])}}function ao(n,i){var o=n.stateNode;if(o===null)return null;var u=o[Hn]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var Hf=!1;if(Os)try{var io={};Object.defineProperty(io,"passive",{get:function(){Hf=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{Hf=!1}var ua=null,qf=null,su=null;function Xv(){if(su)return su;var n,i=qf,o=i.length,u,g="value"in ua?ua.value:ua.textContent,y=g.length;for(n=0;n<o&&i[n]===g[n];n++);var S=o-n;for(u=1;u<=S&&i[o-u]===g[y-u];u++);return su=g.slice(n,1<u?1-u:void 0)}function au(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function iu(){return!0}function Kv(){return!1}function fr(n){function i(o,u,g,y,S){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?iu:Kv,this.isPropagationStopped=Kv,this}return W(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=iu)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=iu)},persist:function(){},isPersistent:iu}),i}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lu=fr(ti),lo=W({},ti,{view:0,detail:0}),RE=fr(lo),Ff,Vf,oo,ou=W({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==oo&&(oo&&n.type==="mousemove"?(Ff=n.screenX-oo.screenX,Vf=n.screenY-oo.screenY):Vf=Ff=0,oo=n),Ff)},movementY:function(n){return"movementY"in n?n.movementY:Vf}}),Qv=fr(ou),TE=W({},ou,{dataTransfer:0}),ME=fr(TE),AE=W({},lo,{relatedTarget:0}),Yf=fr(AE),kE=W({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),DE=fr(kE),OE=W({},ti,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),PE=fr(OE),LE=W({},ti,{data:0}),Zv=fr(LE),IE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $E(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=UE[n])?!!i[n]:!1}function Gf(){return $E}var BE=W({},lo,{key:function(n){if(n.key){var i=IE[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=au(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zE[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gf,charCode:function(n){return n.type==="keypress"?au(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?au(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),HE=fr(BE),qE=W({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jv=fr(qE),FE=W({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gf}),VE=fr(FE),YE=W({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),GE=fr(YE),WE=W({},ou,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),XE=fr(WE),KE=W({},ti,{newState:0,oldState:0}),QE=fr(KE),ZE=[9,13,27,32],Wf=Os&&"CompositionEvent"in window,co=null;Os&&"documentMode"in document&&(co=document.documentMode);var JE=Os&&"TextEvent"in window&&!co,ex=Os&&(!Wf||co&&8<co&&11>=co),tx=" ",nx=!1;function rx(n,i){switch(n){case"keyup":return ZE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sx(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ui=!1;function e2(n,i){switch(n){case"compositionend":return sx(i);case"keypress":return i.which!==32?null:(nx=!0,tx);case"textInput":return n=i.data,n===tx&&nx?null:n;default:return null}}function t2(n,i){if(Ui)return n==="compositionend"||!Wf&&rx(n,i)?(n=Xv(),su=qf=ua=null,Ui=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ex&&i.locale!=="ko"?null:i.data;default:return null}}var n2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ax(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!n2[n.type]:i==="textarea"}function ix(n,i,o,u){Ii?zi?zi.push(u):zi=[u]:Ii=u,i=Vu(i,"onChange"),0<i.length&&(o=new lu("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var uo=null,fo=null;function r2(n){kb(n,0)}function cu(n){var i=ca(n);if(Bv(i))return n}function lx(n,i){if(n==="change")return i}var ox=!1;if(Os){var Xf;if(Os){var Kf="oninput"in document;if(!Kf){var cx=document.createElement("div");cx.setAttribute("oninput","return;"),Kf=typeof cx.oninput=="function"}Xf=Kf}else Xf=!1;ox=Xf&&(!document.documentMode||9<document.documentMode)}function ux(){uo&&(uo.detachEvent("onpropertychange",dx),fo=uo=null)}function dx(n){if(n.propertyName==="value"&&cu(fo)){var i=[];ix(i,fo,n,$f(n)),Wv(r2,i)}}function s2(n,i,o){n==="focusin"?(ux(),uo=i,fo=o,uo.attachEvent("onpropertychange",dx)):n==="focusout"&&ux()}function a2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return cu(fo)}function i2(n,i){if(n==="click")return cu(i)}function l2(n,i){if(n==="input"||n==="change")return cu(i)}function o2(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var jr=typeof Object.is=="function"?Object.is:o2;function ho(n,i){if(jr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!je.call(i,g)||!jr(n[g],i[g]))return!1}return!0}function fx(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function hx(n,i){var o=fx(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=fx(o)}}function mx(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?mx(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function px(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=nu(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=nu(n.document)}return i}function Qf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function c2(n,i){var o=px(i);i=n.focusedElem;var u=n.selectionRange;if(o!==i&&i&&i.ownerDocument&&mx(i.ownerDocument.documentElement,i)){if(u!==null&&Qf(i)){if(n=u.start,o=u.end,o===void 0&&(o=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(o,i.value.length);else if(o=(n=i.ownerDocument||document)&&n.defaultView||window,o.getSelection){o=o.getSelection();var g=i.textContent.length,y=Math.min(u.start,g);u=u.end===void 0?y:Math.min(u.end,g),!o.extend&&y>u&&(g=u,u=y,y=g),g=hx(i,y);var S=hx(i,u);g&&S&&(o.rangeCount!==1||o.anchorNode!==g.node||o.anchorOffset!==g.offset||o.focusNode!==S.node||o.focusOffset!==S.offset)&&(n=n.createRange(),n.setStart(g.node,g.offset),o.removeAllRanges(),y>u?(o.addRange(n),o.extend(S.node,S.offset)):(n.setEnd(S.node,S.offset),o.addRange(n)))}}for(n=[],o=i;o=o.parentNode;)o.nodeType===1&&n.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)o=n[i],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var u2=Os&&"documentMode"in document&&11>=document.documentMode,$i=null,Zf=null,mo=null,Jf=!1;function gx(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Jf||$i==null||$i!==nu(u)||(u=$i,"selectionStart"in u&&Qf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),mo&&ho(mo,u)||(mo=u,u=Vu(Zf,"onSelect"),0<u.length&&(i=new lu("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=$i)))}function ni(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Bi={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionrun:ni("Transition","TransitionRun"),transitionstart:ni("Transition","TransitionStart"),transitioncancel:ni("Transition","TransitionCancel"),transitionend:ni("Transition","TransitionEnd")},eh={},vx={};Os&&(vx=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function ri(n){if(eh[n])return eh[n];if(!Bi[n])return n;var i=Bi[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in vx)return eh[n]=i[o];return n}var xx=ri("animationend"),yx=ri("animationiteration"),bx=ri("animationstart"),d2=ri("transitionrun"),f2=ri("transitionstart"),h2=ri("transitioncancel"),wx=ri("transitionend"),jx=new Map,_x="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Qr(n,i){jx.set(n,i),ei(i,[n])}var Lr=[],Hi=0,th=0;function uu(){for(var n=Hi,i=th=Hi=0;i<n;){var o=Lr[i];Lr[i++]=null;var u=Lr[i];Lr[i++]=null;var g=Lr[i];Lr[i++]=null;var y=Lr[i];if(Lr[i++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}y!==0&&Nx(o,g,y)}}function du(n,i,o,u){Lr[Hi++]=n,Lr[Hi++]=i,Lr[Hi++]=o,Lr[Hi++]=u,th|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function nh(n,i,o,u){return du(n,i,o,u),fu(n)}function da(n,i){return du(n,null,null,i),fu(n)}function Nx(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var g=!1,y=n.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(g=!0)),n=y,y=y.return;g&&i!==null&&n.tag===3&&(y=n.stateNode,g=31-Ft(o),y=y.hiddenUpdates,n=y[g],n===null?y[g]=[i]:n.push(i),i.lane=o|536870912)}function fu(n){if(50<Uo)throw Uo=0,om=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var qi={},Sx=new WeakMap;function Ir(n,i){if(typeof n=="object"&&n!==null){var o=Sx.get(n);return o!==void 0?o:(i={value:n,source:i,stack:V(i)},Sx.set(n,i),i)}return{value:n,source:i,stack:V(i)}}var Fi=[],Vi=0,hu=null,mu=0,zr=[],Ur=0,si=null,Ls=1,Is="";function ai(n,i){Fi[Vi++]=mu,Fi[Vi++]=hu,hu=n,mu=i}function Ex(n,i,o){zr[Ur++]=Ls,zr[Ur++]=Is,zr[Ur++]=si,si=n;var u=Ls;n=Is;var g=32-Ft(u)-1;u&=~(1<<g),o+=1;var y=32-Ft(i)+g;if(30<y){var S=g-g%5;y=(u&(1<<S)-1).toString(32),u>>=S,g-=S,Ls=1<<32-Ft(i)+g|o<<g|u,Is=y+n}else Ls=1<<y|o<<g|u,Is=n}function rh(n){n.return!==null&&(ai(n,1),Ex(n,1,0))}function sh(n){for(;n===hu;)hu=Fi[--Vi],Fi[Vi]=null,mu=Fi[--Vi],Fi[Vi]=null;for(;n===si;)si=zr[--Ur],zr[Ur]=null,Is=zr[--Ur],zr[Ur]=null,Ls=zr[--Ur],zr[Ur]=null}var sr=null,Fn=null,zt=!1,Zr=null,ms=!1,ah=Error(a(519));function ii(n){var i=Error(a(418,""));throw vo(Ir(i,n)),ah}function Cx(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[pn]=n,i[Hn]=u,o){case"dialog":Ct("cancel",i),Ct("close",i);break;case"iframe":case"object":case"embed":Ct("load",i);break;case"video":case"audio":for(o=0;o<Bo.length;o++)Ct(Bo[o],i);break;case"source":Ct("error",i);break;case"img":case"image":case"link":Ct("error",i),Ct("load",i);break;case"details":Ct("toggle",i);break;case"input":Ct("invalid",i),Hv(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),tu(i);break;case"select":Ct("invalid",i);break;case"textarea":Ct("invalid",i),Fv(i,u.value,u.defaultValue,u.children),tu(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||Lb(i.textContent,o)?(u.popover!=null&&(Ct("beforetoggle",i),Ct("toggle",i)),u.onScroll!=null&&Ct("scroll",i),u.onScrollEnd!=null&&Ct("scrollend",i),u.onClick!=null&&(i.onclick=Yu),i=!0):i=!1,i||ii(n)}function Rx(n){for(sr=n.return;sr;)switch(sr.tag){case 3:case 27:ms=!0;return;case 5:case 13:ms=!1;return;default:sr=sr.return}}function po(n){if(n!==sr)return!1;if(!zt)return Rx(n),zt=!0,!1;var i=!1,o;if((o=n.tag!==3&&n.tag!==27)&&((o=n.tag===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Sm(n.type,n.memoizedProps)),o=!o),o&&(i=!0),i&&Fn&&ii(n),Rx(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){Fn=es(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}Fn=null}}else Fn=sr?es(n.stateNode.nextSibling):null;return!0}function go(){Fn=sr=null,zt=!1}function vo(n){Zr===null?Zr=[n]:Zr.push(n)}var xo=Error(a(460)),Tx=Error(a(474)),ih={then:function(){}};function Mx(n){return n=n.status,n==="fulfilled"||n==="rejected"}function pu(){}function Ax(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(pu,pu),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,n===xo?Error(a(483)):n;default:if(typeof i.status=="string")i.then(pu,pu);else{if(n=rn,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=u}},function(u){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,n===xo?Error(a(483)):n}throw yo=i,xo}}var yo=null;function kx(){if(yo===null)throw Error(a(459));var n=yo;return yo=null,n}var Yi=null,bo=0;function gu(n){var i=bo;return bo+=1,Yi===null&&(Yi=[]),Ax(Yi,n,i)}function wo(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function vu(n,i){throw i.$$typeof===c?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Dx(n){var i=n._init;return i(n._payload)}function Ox(n){function i(ee,Q){if(n){var ae=ee.deletions;ae===null?(ee.deletions=[Q],ee.flags|=16):ae.push(Q)}}function o(ee,Q){if(!n)return null;for(;Q!==null;)i(ee,Q),Q=Q.sibling;return null}function u(ee){for(var Q=new Map;ee!==null;)ee.key!==null?Q.set(ee.key,ee):Q.set(ee.index,ee),ee=ee.sibling;return Q}function g(ee,Q){return ee=_a(ee,Q),ee.index=0,ee.sibling=null,ee}function y(ee,Q,ae){return ee.index=ae,n?(ae=ee.alternate,ae!==null?(ae=ae.index,ae<Q?(ee.flags|=33554434,Q):ae):(ee.flags|=33554434,Q)):(ee.flags|=1048576,Q)}function S(ee){return n&&ee.alternate===null&&(ee.flags|=33554434),ee}function A(ee,Q,ae,ve){return Q===null||Q.tag!==6?(Q=em(ae,ee.mode,ve),Q.return=ee,Q):(Q=g(Q,ae),Q.return=ee,Q)}function I(ee,Q,ae,ve){var Ie=ae.type;return Ie===h?fe(ee,Q,ae.props.children,ve,ae.key):Q!==null&&(Q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===E&&Dx(Ie)===Q.type)?(Q=g(Q,ae.props),wo(Q,ae),Q.return=ee,Q):(Q=Pu(ae.type,ae.key,ae.props,null,ee.mode,ve),wo(Q,ae),Q.return=ee,Q)}function Z(ee,Q,ae,ve){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ae.containerInfo||Q.stateNode.implementation!==ae.implementation?(Q=tm(ae,ee.mode,ve),Q.return=ee,Q):(Q=g(Q,ae.children||[]),Q.return=ee,Q)}function fe(ee,Q,ae,ve,Ie){return Q===null||Q.tag!==7?(Q=gi(ae,ee.mode,ve,Ie),Q.return=ee,Q):(Q=g(Q,ae),Q.return=ee,Q)}function we(ee,Q,ae){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=em(""+Q,ee.mode,ae),Q.return=ee,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case d:return ae=Pu(Q.type,Q.key,Q.props,null,ee.mode,ae),wo(ae,Q),ae.return=ee,ae;case f:return Q=tm(Q,ee.mode,ae),Q.return=ee,Q;case E:var ve=Q._init;return Q=ve(Q._payload),we(ee,Q,ae)}if(X(Q)||L(Q))return Q=gi(Q,ee.mode,ae,null),Q.return=ee,Q;if(typeof Q.then=="function")return we(ee,gu(Q),ae);if(Q.$$typeof===w)return we(ee,ku(ee,Q),ae);vu(ee,Q)}return null}function le(ee,Q,ae,ve){var Ie=Q!==null?Q.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Ie!==null?null:A(ee,Q,""+ae,ve);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case d:return ae.key===Ie?I(ee,Q,ae,ve):null;case f:return ae.key===Ie?Z(ee,Q,ae,ve):null;case E:return Ie=ae._init,ae=Ie(ae._payload),le(ee,Q,ae,ve)}if(X(ae)||L(ae))return Ie!==null?null:fe(ee,Q,ae,ve,null);if(typeof ae.then=="function")return le(ee,Q,gu(ae),ve);if(ae.$$typeof===w)return le(ee,Q,ku(ee,ae),ve);vu(ee,ae)}return null}function de(ee,Q,ae,ve,Ie){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ee=ee.get(ae)||null,A(Q,ee,""+ve,Ie);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case d:return ee=ee.get(ve.key===null?ae:ve.key)||null,I(Q,ee,ve,Ie);case f:return ee=ee.get(ve.key===null?ae:ve.key)||null,Z(Q,ee,ve,Ie);case E:var pt=ve._init;return ve=pt(ve._payload),de(ee,Q,ae,ve,Ie)}if(X(ve)||L(ve))return ee=ee.get(ae)||null,fe(Q,ee,ve,Ie,null);if(typeof ve.then=="function")return de(ee,Q,ae,gu(ve),Ie);if(ve.$$typeof===w)return de(ee,Q,ae,ku(Q,ve),Ie);vu(Q,ve)}return null}function He(ee,Q,ae,ve){for(var Ie=null,pt=null,Fe=Q,Xe=Q=0,Ln=null;Fe!==null&&Xe<ae.length;Xe++){Fe.index>Xe?(Ln=Fe,Fe=null):Ln=Fe.sibling;var Ut=le(ee,Fe,ae[Xe],ve);if(Ut===null){Fe===null&&(Fe=Ln);break}n&&Fe&&Ut.alternate===null&&i(ee,Fe),Q=y(Ut,Q,Xe),pt===null?Ie=Ut:pt.sibling=Ut,pt=Ut,Fe=Ln}if(Xe===ae.length)return o(ee,Fe),zt&&ai(ee,Xe),Ie;if(Fe===null){for(;Xe<ae.length;Xe++)Fe=we(ee,ae[Xe],ve),Fe!==null&&(Q=y(Fe,Q,Xe),pt===null?Ie=Fe:pt.sibling=Fe,pt=Fe);return zt&&ai(ee,Xe),Ie}for(Fe=u(Fe);Xe<ae.length;Xe++)Ln=de(Fe,ee,Xe,ae[Xe],ve),Ln!==null&&(n&&Ln.alternate!==null&&Fe.delete(Ln.key===null?Xe:Ln.key),Q=y(Ln,Q,Xe),pt===null?Ie=Ln:pt.sibling=Ln,pt=Ln);return n&&Fe.forEach(function(Ma){return i(ee,Ma)}),zt&&ai(ee,Xe),Ie}function at(ee,Q,ae,ve){if(ae==null)throw Error(a(151));for(var Ie=null,pt=null,Fe=Q,Xe=Q=0,Ln=null,Ut=ae.next();Fe!==null&&!Ut.done;Xe++,Ut=ae.next()){Fe.index>Xe?(Ln=Fe,Fe=null):Ln=Fe.sibling;var Ma=le(ee,Fe,Ut.value,ve);if(Ma===null){Fe===null&&(Fe=Ln);break}n&&Fe&&Ma.alternate===null&&i(ee,Fe),Q=y(Ma,Q,Xe),pt===null?Ie=Ma:pt.sibling=Ma,pt=Ma,Fe=Ln}if(Ut.done)return o(ee,Fe),zt&&ai(ee,Xe),Ie;if(Fe===null){for(;!Ut.done;Xe++,Ut=ae.next())Ut=we(ee,Ut.value,ve),Ut!==null&&(Q=y(Ut,Q,Xe),pt===null?Ie=Ut:pt.sibling=Ut,pt=Ut);return zt&&ai(ee,Xe),Ie}for(Fe=u(Fe);!Ut.done;Xe++,Ut=ae.next())Ut=de(Fe,ee,Xe,Ut.value,ve),Ut!==null&&(n&&Ut.alternate!==null&&Fe.delete(Ut.key===null?Xe:Ut.key),Q=y(Ut,Q,Xe),pt===null?Ie=Ut:pt.sibling=Ut,pt=Ut);return n&&Fe.forEach(function(CC){return i(ee,CC)}),zt&&ai(ee,Xe),Ie}function xn(ee,Q,ae,ve){if(typeof ae=="object"&&ae!==null&&ae.type===h&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case d:e:{for(var Ie=ae.key;Q!==null;){if(Q.key===Ie){if(Ie=ae.type,Ie===h){if(Q.tag===7){o(ee,Q.sibling),ve=g(Q,ae.props.children),ve.return=ee,ee=ve;break e}}else if(Q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===E&&Dx(Ie)===Q.type){o(ee,Q.sibling),ve=g(Q,ae.props),wo(ve,ae),ve.return=ee,ee=ve;break e}o(ee,Q);break}else i(ee,Q);Q=Q.sibling}ae.type===h?(ve=gi(ae.props.children,ee.mode,ve,ae.key),ve.return=ee,ee=ve):(ve=Pu(ae.type,ae.key,ae.props,null,ee.mode,ve),wo(ve,ae),ve.return=ee,ee=ve)}return S(ee);case f:e:{for(Ie=ae.key;Q!==null;){if(Q.key===Ie)if(Q.tag===4&&Q.stateNode.containerInfo===ae.containerInfo&&Q.stateNode.implementation===ae.implementation){o(ee,Q.sibling),ve=g(Q,ae.children||[]),ve.return=ee,ee=ve;break e}else{o(ee,Q);break}else i(ee,Q);Q=Q.sibling}ve=tm(ae,ee.mode,ve),ve.return=ee,ee=ve}return S(ee);case E:return Ie=ae._init,ae=Ie(ae._payload),xn(ee,Q,ae,ve)}if(X(ae))return He(ee,Q,ae,ve);if(L(ae)){if(Ie=L(ae),typeof Ie!="function")throw Error(a(150));return ae=Ie.call(ae),at(ee,Q,ae,ve)}if(typeof ae.then=="function")return xn(ee,Q,gu(ae),ve);if(ae.$$typeof===w)return xn(ee,Q,ku(ee,ae),ve);vu(ee,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,Q!==null&&Q.tag===6?(o(ee,Q.sibling),ve=g(Q,ae),ve.return=ee,ee=ve):(o(ee,Q),ve=em(ae,ee.mode,ve),ve.return=ee,ee=ve),S(ee)):o(ee,Q)}return function(ee,Q,ae,ve){try{bo=0;var Ie=xn(ee,Q,ae,ve);return Yi=null,Ie}catch(Fe){if(Fe===xo)throw Fe;var pt=qr(29,Fe,null,ee.mode);return pt.lanes=ve,pt.return=ee,pt}finally{}}}var li=Ox(!0),Px=Ox(!1),Gi=re(null),xu=re(0);function Lx(n,i){n=Ws,ue(xu,n),ue(Gi,i),Ws=n|i.baseLanes}function lh(){ue(xu,Ws),ue(Gi,Gi.current)}function oh(){Ws=xu.current,pe(Gi),pe(xu)}var $r=re(null),ps=null;function fa(n){var i=n.alternate;ue(Cn,Cn.current&1),ue($r,n),ps===null&&(i===null||Gi.current!==null||i.memoizedState!==null)&&(ps=n)}function Ix(n){if(n.tag===22){if(ue(Cn,Cn.current),ue($r,n),ps===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(ps=n)}}else ha()}function ha(){ue(Cn,Cn.current),ue($r,$r.current)}function zs(n){pe($r),ps===n&&(ps=null),pe(Cn)}var Cn=re(0);function yu(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var m2=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},p2=e.unstable_scheduleCallback,g2=e.unstable_NormalPriority,Rn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ch(){return{controller:new m2,data:new Map,refCount:0}}function jo(n){n.refCount--,n.refCount===0&&p2(g2,function(){n.controller.abort()})}var _o=null,uh=0,Wi=0,Xi=null;function v2(n,i){if(_o===null){var o=_o=[];uh=0,Wi=gm(),Xi={status:"pending",value:void 0,then:function(u){o.push(u)}}}return uh++,i.then(zx,zx),i}function zx(){if(--uh===0&&_o!==null){Xi!==null&&(Xi.status="fulfilled");var n=_o;_o=null,Wi=0,Xi=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function x2(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var g=0;g<o.length;g++)(0,o[g])(i)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var Ux=G.S;G.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&v2(n,i),Ux!==null&&Ux(n,i)};var oi=re(null);function dh(){var n=oi.current;return n!==null?n:rn.pooledCache}function bu(n,i){i===null?ue(oi,oi.current):ue(oi,i.pool)}function $x(){var n=dh();return n===null?null:{parent:Rn._currentValue,pool:n}}var ma=0,ft=null,Zt=null,wn=null,wu=!1,Ki=!1,ci=!1,ju=0,No=0,Qi=null,y2=0;function yn(){throw Error(a(321))}function fh(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!jr(n[o],i[o]))return!1;return!0}function hh(n,i,o,u,g,y){return ma=y,ft=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=n===null||n.memoizedState===null?ui:pa,ci=!1,y=o(u,g),ci=!1,Ki&&(y=Hx(i,o,u,g)),Bx(n),y}function Bx(n){G.H=gs;var i=Zt!==null&&Zt.next!==null;if(ma=0,wn=Zt=ft=null,wu=!1,No=0,Qi=null,i)throw Error(a(300));n===null||On||(n=n.dependencies,n!==null&&Au(n)&&(On=!0))}function Hx(n,i,o,u){ft=n;var g=0;do{if(Ki&&(Qi=null),No=0,Ki=!1,25<=g)throw Error(a(301));if(g+=1,wn=Zt=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}G.H=di,y=i(o,u)}while(Ki);return y}function b2(){var n=G.H,i=n.useState()[0];return i=typeof i.then=="function"?So(i):i,n=n.useState()[0],(Zt!==null?Zt.memoizedState:null)!==n&&(ft.flags|=1024),i}function mh(){var n=ju!==0;return ju=0,n}function ph(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function gh(n){if(wu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}wu=!1}ma=0,wn=Zt=ft=null,Ki=!1,No=ju=0,Qi=null}function hr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?ft.memoizedState=wn=n:wn=wn.next=n,wn}function jn(){if(Zt===null){var n=ft.alternate;n=n!==null?n.memoizedState:null}else n=Zt.next;var i=wn===null?ft.memoizedState:wn.next;if(i!==null)wn=i,Zt=n;else{if(n===null)throw ft.alternate===null?Error(a(467)):Error(a(310));Zt=n,n={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},wn===null?ft.memoizedState=wn=n:wn=wn.next=n}return wn}var _u;_u=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function So(n){var i=No;return No+=1,Qi===null&&(Qi=[]),n=Ax(Qi,n,i),i=ft,(wn===null?i.memoizedState:wn.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?ui:pa),n}function Nu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return So(n);if(n.$$typeof===w)return Kn(n)}throw Error(a(438,String(n)))}function vh(n){var i=null,o=ft.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=ft.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=_u(),ft.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=M;return i.index++,o}function Us(n,i){return typeof i=="function"?i(n):i}function Su(n){var i=jn();return xh(i,Zt,n)}function xh(n,i,o){var u=n.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var g=n.baseQueue,y=u.pending;if(y!==null){if(g!==null){var S=g.next;g.next=y.next,y.next=S}i.baseQueue=g=y,u.pending=null}if(y=n.baseState,g===null)n.memoizedState=y;else{i=g.next;var A=S=null,I=null,Z=i,fe=!1;do{var we=Z.lane&-536870913;if(we!==Z.lane?(kt&we)===we:(ma&we)===we){var le=Z.revertLane;if(le===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),we===Wi&&(fe=!0);else if((ma&le)===le){Z=Z.next,le===Wi&&(fe=!0);continue}else we={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},I===null?(A=I=we,S=y):I=I.next=we,ft.lanes|=le,Na|=le;we=Z.action,ci&&o(y,we),y=Z.hasEagerState?Z.eagerState:o(y,we)}else le={lane:we,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},I===null?(A=I=le,S=y):I=I.next=le,ft.lanes|=we,Na|=we;Z=Z.next}while(Z!==null&&Z!==i);if(I===null?S=y:I.next=A,!jr(y,n.memoizedState)&&(On=!0,fe&&(o=Xi,o!==null)))throw o;n.memoizedState=y,n.baseState=S,n.baseQueue=I,u.lastRenderedState=y}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function yh(n){var i=jn(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=n;var u=o.dispatch,g=o.pending,y=i.memoizedState;if(g!==null){o.pending=null;var S=g=g.next;do y=n(y,S.action),S=S.next;while(S!==g);jr(y,i.memoizedState)||(On=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function qx(n,i,o){var u=ft,g=jn(),y=zt;if(y){if(o===void 0)throw Error(a(407));o=o()}else o=i();var S=!jr((Zt||g).memoizedState,o);if(S&&(g.memoizedState=o,On=!0),g=g.queue,jh(Yx.bind(null,u,g,n),[n]),g.getSnapshot!==i||S||wn!==null&&wn.memoizedState.tag&1){if(u.flags|=2048,Zi(9,Vx.bind(null,u,g,o,i),{destroy:void 0},null),rn===null)throw Error(a(349));y||(ma&60)!==0||Fx(u,i,o)}return o}function Fx(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=ft.updateQueue,i===null?(i=_u(),ft.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function Vx(n,i,o,u){i.value=o,i.getSnapshot=u,Gx(i)&&Wx(n)}function Yx(n,i,o){return o(function(){Gx(i)&&Wx(n)})}function Gx(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!jr(n,o)}catch{return!0}}function Wx(n){var i=da(n,2);i!==null&&ar(i,n,2)}function bh(n){var i=hr();if(typeof n=="function"){var o=n;if(n=o(),ci){Ge(!0);try{o()}finally{Ge(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:n},i}function Xx(n,i,o,u){return n.baseState=o,xh(n,Zt,typeof u=="function"?u:Us)}function w2(n,i,o,u,g){if(Ru(n))throw Error(a(485));if(n=i.action,n!==null){var y={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};G.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,Kx(i,y)):(y.next=o.next,i.pending=o.next=y)}}function Kx(n,i){var o=i.action,u=i.payload,g=n.state;if(i.isTransition){var y=G.T,S={};G.T=S;try{var A=o(g,u),I=G.S;I!==null&&I(S,A),Qx(n,i,A)}catch(Z){wh(n,i,Z)}finally{G.T=y}}else try{y=o(g,u),Qx(n,i,y)}catch(Z){wh(n,i,Z)}}function Qx(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Zx(n,i,u)},function(u){return wh(n,i,u)}):Zx(n,i,o)}function Zx(n,i,o){i.status="fulfilled",i.value=o,Jx(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,Kx(n,o)))}function wh(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Jx(i),i=i.next;while(i!==u)}n.action=null}function Jx(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function ey(n,i){return i}function ty(n,i){if(zt){var o=rn.formState;if(o!==null){e:{var u=ft;if(zt){if(Fn){t:{for(var g=Fn,y=ms;g.nodeType!==8;){if(!y){g=null;break t}if(g=es(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Fn=es(g.nextSibling),u=g.data==="F!";break e}}ii(u)}u=!1}u&&(i=o[0])}}return o=hr(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ey,lastRenderedState:i},o.queue=u,o=yy.bind(null,ft,u),u.dispatch=o,u=bh(!1),y=Ch.bind(null,ft,!1,u.queue),u=hr(),g={state:i,dispatch:null,action:n,pending:null},u.queue=g,o=w2.bind(null,ft,g,y,o),g.dispatch=o,u.memoizedState=n,[i,o,!1]}function ny(n){var i=jn();return ry(i,Zt,n)}function ry(n,i,o){i=xh(n,i,ey)[0],n=Su(Us)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?So(i):i;var u=jn(),g=u.queue,y=g.dispatch;return o!==u.memoizedState&&(ft.flags|=2048,Zi(9,j2.bind(null,g,o),{destroy:void 0},null)),[i,y,n]}function j2(n,i){n.action=i}function sy(n){var i=jn(),o=Zt;if(o!==null)return ry(i,o,n);jn(),i=i.memoizedState,o=jn();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function Zi(n,i,o,u){return n={tag:n,create:i,inst:o,deps:u,next:null},i=ft.updateQueue,i===null&&(i=_u(),ft.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function ay(){return jn().memoizedState}function Eu(n,i,o,u){var g=hr();ft.flags|=n,g.memoizedState=Zi(1|i,o,{destroy:void 0},u===void 0?null:u)}function Cu(n,i,o,u){var g=jn();u=u===void 0?null:u;var y=g.memoizedState.inst;Zt!==null&&u!==null&&fh(u,Zt.memoizedState.deps)?g.memoizedState=Zi(i,o,y,u):(ft.flags|=n,g.memoizedState=Zi(1|i,o,y,u))}function iy(n,i){Eu(8390656,8,n,i)}function jh(n,i){Cu(2048,8,n,i)}function ly(n,i){return Cu(4,2,n,i)}function oy(n,i){return Cu(4,4,n,i)}function cy(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function uy(n,i,o){o=o!=null?o.concat([n]):null,Cu(4,4,cy.bind(null,i,n),o)}function _h(){}function dy(n,i){var o=jn();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&fh(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function fy(n,i){var o=jn();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&fh(i,u[1]))return u[0];if(u=n(),ci){Ge(!0);try{n()}finally{Ge(!1)}}return o.memoizedState=[u,i],u}function Nh(n,i,o){return o===void 0||(ma&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=mb(),ft.lanes|=n,Na|=n,o)}function hy(n,i,o,u){return jr(o,i)?o:Gi.current!==null?(n=Nh(n,o,u),jr(n,i)||(On=!0),n):(ma&42)===0?(On=!0,n.memoizedState=o):(n=mb(),ft.lanes|=n,Na|=n,i)}function my(n,i,o,u,g){var y=D.p;D.p=y!==0&&8>y?y:8;var S=G.T,A={};G.T=A,Ch(n,!1,i,o);try{var I=g(),Z=G.S;if(Z!==null&&Z(A,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var fe=x2(I,u);Eo(n,i,fe,Er(n))}else Eo(n,i,u,Er(n))}catch(we){Eo(n,i,{then:function(){},status:"rejected",reason:we},Er())}finally{D.p=y,G.T=S}}function _2(){}function Sh(n,i,o,u){if(n.tag!==5)throw Error(a(476));var g=py(n).queue;my(n,g,i,z,o===null?_2:function(){return gy(n),o(u)})}function py(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:z},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function gy(n){var i=py(n).next.queue;Eo(n,i,{},Er())}function Eh(){return Kn(Yo)}function vy(){return jn().memoizedState}function xy(){return jn().memoizedState}function N2(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Er();n=xa(o);var u=ya(i,n,o);u!==null&&(ar(u,i,o),To(u,i,o)),i={cache:ch()},n.payload=i;return}i=i.return}}function S2(n,i,o){var u=Er();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Ru(n)?by(i,o):(o=nh(n,i,o,u),o!==null&&(ar(o,n,u),wy(o,i,u)))}function yy(n,i,o){var u=Er();Eo(n,i,o,u)}function Eo(n,i,o,u){var g={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ru(n))by(i,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var S=i.lastRenderedState,A=y(S,o);if(g.hasEagerState=!0,g.eagerState=A,jr(A,S))return du(n,i,g,0),rn===null&&uu(),!1}catch{}finally{}if(o=nh(n,i,g,u),o!==null)return ar(o,n,u),wy(o,i,u),!0}return!1}function Ch(n,i,o,u){if(u={lane:2,revertLane:gm(),action:u,hasEagerState:!1,eagerState:null,next:null},Ru(n)){if(i)throw Error(a(479))}else i=nh(n,o,u,2),i!==null&&ar(i,n,2)}function Ru(n){var i=n.alternate;return n===ft||i!==null&&i===ft}function by(n,i){Ki=wu=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function wy(n,i,o){if((o&4194176)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,en(n,o)}}var gs={readContext:Kn,use:Nu,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn};gs.useCacheRefresh=yn,gs.useMemoCache=yn,gs.useHostTransitionStatus=yn,gs.useFormState=yn,gs.useActionState=yn,gs.useOptimistic=yn;var ui={readContext:Kn,use:Nu,useCallback:function(n,i){return hr().memoizedState=[n,i===void 0?null:i],n},useContext:Kn,useEffect:iy,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Eu(4194308,4,cy.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Eu(4194308,4,n,i)},useInsertionEffect:function(n,i){Eu(4,2,n,i)},useMemo:function(n,i){var o=hr();i=i===void 0?null:i;var u=n();if(ci){Ge(!0);try{n()}finally{Ge(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=hr();if(o!==void 0){var g=o(i);if(ci){Ge(!0);try{o(i)}finally{Ge(!1)}}}else g=i;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=S2.bind(null,ft,n),[u.memoizedState,n]},useRef:function(n){var i=hr();return n={current:n},i.memoizedState=n},useState:function(n){n=bh(n);var i=n.queue,o=yy.bind(null,ft,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:_h,useDeferredValue:function(n,i){var o=hr();return Nh(o,n,i)},useTransition:function(){var n=bh(!1);return n=my.bind(null,ft,n.queue,!0,!1),hr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=ft,g=hr();if(zt){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),rn===null)throw Error(a(349));(kt&60)!==0||Fx(u,i,o)}g.memoizedState=o;var y={value:o,getSnapshot:i};return g.queue=y,iy(Yx.bind(null,u,y,n),[n]),u.flags|=2048,Zi(9,Vx.bind(null,u,y,o,i),{destroy:void 0},null),o},useId:function(){var n=hr(),i=rn.identifierPrefix;if(zt){var o=Is,u=Ls;o=(u&~(1<<32-Ft(u)-1)).toString(32)+o,i=":"+i+"R"+o,o=ju++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=y2++,i=":"+i+"r"+o.toString(32)+":";return n.memoizedState=i},useCacheRefresh:function(){return hr().memoizedState=N2.bind(null,ft)}};ui.useMemoCache=vh,ui.useHostTransitionStatus=Eh,ui.useFormState=ty,ui.useActionState=ty,ui.useOptimistic=function(n){var i=hr();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Ch.bind(null,ft,!0,o),o.dispatch=i,[n,i]};var pa={readContext:Kn,use:Nu,useCallback:dy,useContext:Kn,useEffect:jh,useImperativeHandle:uy,useInsertionEffect:ly,useLayoutEffect:oy,useMemo:fy,useReducer:Su,useRef:ay,useState:function(){return Su(Us)},useDebugValue:_h,useDeferredValue:function(n,i){var o=jn();return hy(o,Zt.memoizedState,n,i)},useTransition:function(){var n=Su(Us)[0],i=jn().memoizedState;return[typeof n=="boolean"?n:So(n),i]},useSyncExternalStore:qx,useId:vy};pa.useCacheRefresh=xy,pa.useMemoCache=vh,pa.useHostTransitionStatus=Eh,pa.useFormState=ny,pa.useActionState=ny,pa.useOptimistic=function(n,i){var o=jn();return Xx(o,Zt,n,i)};var di={readContext:Kn,use:Nu,useCallback:dy,useContext:Kn,useEffect:jh,useImperativeHandle:uy,useInsertionEffect:ly,useLayoutEffect:oy,useMemo:fy,useReducer:yh,useRef:ay,useState:function(){return yh(Us)},useDebugValue:_h,useDeferredValue:function(n,i){var o=jn();return Zt===null?Nh(o,n,i):hy(o,Zt.memoizedState,n,i)},useTransition:function(){var n=yh(Us)[0],i=jn().memoizedState;return[typeof n=="boolean"?n:So(n),i]},useSyncExternalStore:qx,useId:vy};di.useCacheRefresh=xy,di.useMemoCache=vh,di.useHostTransitionStatus=Eh,di.useFormState=sy,di.useActionState=sy,di.useOptimistic=function(n,i){var o=jn();return Zt!==null?Xx(o,Zt,n,i):(o.baseState=n,[n,o.queue.dispatch])};function Rh(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:W({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Th={isMounted:function(n){return(n=n._reactInternals)?U(n)===n:!1},enqueueSetState:function(n,i,o){n=n._reactInternals;var u=Er(),g=xa(u);g.payload=i,o!=null&&(g.callback=o),i=ya(n,g,u),i!==null&&(ar(i,n,u),To(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=Er(),g=xa(u);g.tag=1,g.payload=i,o!=null&&(g.callback=o),i=ya(n,g,u),i!==null&&(ar(i,n,u),To(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Er(),u=xa(o);u.tag=2,i!=null&&(u.callback=i),i=ya(n,u,o),i!==null&&(ar(i,n,o),To(i,n,o))}};function jy(n,i,o,u,g,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,S):i.prototype&&i.prototype.isPureReactComponent?!ho(o,u)||!ho(g,y):!0}function _y(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&Th.enqueueReplaceState(i,i.state,null)}function fi(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=W({},o));for(var g in n)o[g]===void 0&&(o[g]=n[g])}return o}var Tu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Ny(n){Tu(n)}function Sy(n){console.error(n)}function Ey(n){Tu(n)}function Mu(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Cy(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Mh(n,i,o){return o=xa(o),o.tag=3,o.payload={element:null},o.callback=function(){Mu(n,i)},o}function Ry(n){return n=xa(n),n.tag=3,n}function Ty(n,i,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;n.payload=function(){return g(y)},n.callback=function(){Cy(i,o,u)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){Cy(i,o,u),typeof g!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function E2(n,i,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Ro(i,o,g,!0),o=$r.current,o!==null){switch(o.tag){case 13:return ps===null?dm():o.alternate===null&&vn===0&&(vn=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===ih?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),hm(n,u,g)),!1;case 22:return o.flags|=65536,u===ih?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),hm(n,u,g)),!1}throw Error(a(435,o.tag))}return hm(n,u,g),dm(),!1}if(zt)return i=$r.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,u!==ah&&(n=Error(a(422),{cause:u}),vo(Ir(n,o)))):(u!==ah&&(i=Error(a(423),{cause:u}),vo(Ir(i,o))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=Ir(u,o),g=Mh(n.stateNode,u,g),Vh(n,g),vn!==4&&(vn=2)),!1;var y=Error(a(520),{cause:u});if(y=Ir(y,o),Io===null?Io=[y]:Io.push(y),vn!==4&&(vn=2),i===null)return!0;u=Ir(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=g&-g,o.lanes|=n,n=Mh(o.stateNode,u,n),Vh(o,n),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Sa===null||!Sa.has(y))))return o.flags|=65536,g&=-g,o.lanes|=g,g=Ry(g),Ty(g,n,o,u),Vh(o,g),!1}o=o.return}while(o!==null);return!1}var My=Error(a(461)),On=!1;function Vn(n,i,o,u){i.child=n===null?Px(i,null,o,u):li(i,n.child,o,u)}function Ay(n,i,o,u,g){o=o.render;var y=i.ref;if("ref"in u){var S={};for(var A in u)A!=="ref"&&(S[A]=u[A])}else S=u;return mi(i),u=hh(n,i,o,S,y,g),A=mh(),n!==null&&!On?(ph(n,i,g),$s(n,i,g)):(zt&&A&&rh(i),i.flags|=1,Vn(n,i,u,g),i.child)}function ky(n,i,o,u,g){if(n===null){var y=o.type;return typeof y=="function"&&!Jh(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,Dy(n,i,y,u,g)):(n=Pu(o.type,null,u,i,i.mode,g),n.ref=i.ref,n.return=i,i.child=n)}if(y=n.child,!Uh(n,g)){var S=y.memoizedProps;if(o=o.compare,o=o!==null?o:ho,o(S,u)&&n.ref===i.ref)return $s(n,i,g)}return i.flags|=1,n=_a(y,u),n.ref=i.ref,n.return=i,i.child=n}function Dy(n,i,o,u,g){if(n!==null){var y=n.memoizedProps;if(ho(y,u)&&n.ref===i.ref)if(On=!1,i.pendingProps=u=y,Uh(n,g))(n.flags&131072)!==0&&(On=!0);else return i.lanes=n.lanes,$s(n,i,g)}return Ah(n,i,o,u,g)}function Oy(n,i,o){var u=i.pendingProps,g=u.children,y=(i.stateNode._pendingVisibility&2)!==0,S=n!==null?n.memoizedState:null;if(Co(n,i),u.mode==="hidden"||y){if((i.flags&128)!==0){if(u=S!==null?S.baseLanes|o:o,n!==null){for(g=i.child=n.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;i.childLanes=y&~u}else i.childLanes=0,i.child=null;return Py(n,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&bu(i,S!==null?S.cachePool:null),S!==null?Lx(i,S):lh(),Ix(i);else return i.lanes=i.childLanes=536870912,Py(n,i,S!==null?S.baseLanes|o:o,o)}else S!==null?(bu(i,S.cachePool),Lx(i,S),ha(),i.memoizedState=null):(n!==null&&bu(i,null),lh(),ha());return Vn(n,i,g,o),i.child}function Py(n,i,o,u){var g=dh();return g=g===null?null:{parent:Rn._currentValue,pool:g},i.memoizedState={baseLanes:o,cachePool:g},n!==null&&bu(i,null),lh(),Ix(i),n!==null&&Ro(n,i,u,!0),null}function Co(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(n===null||n.ref!==o)&&(i.flags|=2097664)}}function Ah(n,i,o,u,g){return mi(i),o=hh(n,i,o,u,void 0,g),u=mh(),n!==null&&!On?(ph(n,i,g),$s(n,i,g)):(zt&&u&&rh(i),i.flags|=1,Vn(n,i,o,g),i.child)}function Ly(n,i,o,u,g,y){return mi(i),i.updateQueue=null,o=Hx(i,u,o,g),Bx(n),u=mh(),n!==null&&!On?(ph(n,i,y),$s(n,i,y)):(zt&&u&&rh(i),i.flags|=1,Vn(n,i,o,y),i.child)}function Iy(n,i,o,u,g){if(mi(i),i.stateNode===null){var y=qi,S=o.contextType;typeof S=="object"&&S!==null&&(y=Kn(S)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Th,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},qh(i),S=o.contextType,y.context=typeof S=="object"&&S!==null?Kn(S):qi,y.state=i.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(Rh(i,o,S,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&Th.enqueueReplaceState(y,y.state,null),Ao(i,u,y,g),Mo(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){y=i.stateNode;var A=i.memoizedProps,I=fi(o,A);y.props=I;var Z=y.context,fe=o.contextType;S=qi,typeof fe=="object"&&fe!==null&&(S=Kn(fe));var we=o.getDerivedStateFromProps;fe=typeof we=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,fe||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||Z!==S)&&_y(i,y,u,S),va=!1;var le=i.memoizedState;y.state=le,Ao(i,u,y,g),Mo(),Z=i.memoizedState,A||le!==Z||va?(typeof we=="function"&&(Rh(i,o,we,u),Z=i.memoizedState),(I=va||jy(i,o,I,u,le,Z,S))?(fe||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Z),y.props=u,y.state=Z,y.context=S,u=I):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,Fh(n,i),S=i.memoizedProps,fe=fi(o,S),y.props=fe,we=i.pendingProps,le=y.context,Z=o.contextType,I=qi,typeof Z=="object"&&Z!==null&&(I=Kn(Z)),A=o.getDerivedStateFromProps,(Z=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==we||le!==I)&&_y(i,y,u,I),va=!1,le=i.memoizedState,y.state=le,Ao(i,u,y,g),Mo();var de=i.memoizedState;S!==we||le!==de||va||n!==null&&n.dependencies!==null&&Au(n.dependencies)?(typeof A=="function"&&(Rh(i,o,A,u),de=i.memoizedState),(fe=va||jy(i,o,fe,u,le,de,I)||n!==null&&n.dependencies!==null&&Au(n.dependencies))?(Z||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,de,I),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,de,I)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&le===n.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&le===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=de),y.props=u,y.state=de,y.context=I,u=fe):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&le===n.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&le===n.memoizedState||(i.flags|=1024),u=!1)}return y=u,Co(n,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,n!==null&&u?(i.child=li(i,n.child,null,g),i.child=li(i,null,o,g)):Vn(n,i,o,g),i.memoizedState=y.state,n=i.child):n=$s(n,i,g),n}function zy(n,i,o,u){return go(),i.flags|=256,Vn(n,i,o,u),i.child}var kh={dehydrated:null,treeContext:null,retryLane:0};function Dh(n){return{baseLanes:n,cachePool:$x()}}function Oh(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Fr),n}function Uy(n,i,o){var u=i.pendingProps,g=!1,y=(i.flags&128)!==0,S;if((S=y)||(S=n!==null&&n.memoizedState===null?!1:(Cn.current&2)!==0),S&&(g=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,n===null){if(zt){if(g?fa(i):ha(),zt){var A=Fn,I;if(I=A){e:{for(I=A,A=ms;I.nodeType!==8;){if(!A){A=null;break e}if(I=es(I.nextSibling),I===null){A=null;break e}}A=I}A!==null?(i.memoizedState={dehydrated:A,treeContext:si!==null?{id:Ls,overflow:Is}:null,retryLane:536870912},I=qr(18,null,null,0),I.stateNode=A,I.return=i,i.child=I,sr=i,Fn=null,I=!0):I=!1}I||ii(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return A.data==="$!"?i.lanes=16:i.lanes=536870912,null;zs(i)}return A=u.children,u=u.fallback,g?(ha(),g=i.mode,A=Lh({mode:"hidden",children:A},g),u=gi(u,g,o,null),A.return=i,u.return=i,A.sibling=u,i.child=A,g=i.child,g.memoizedState=Dh(o),g.childLanes=Oh(n,S,o),i.memoizedState=kh,u):(fa(i),Ph(i,A))}if(I=n.memoizedState,I!==null&&(A=I.dehydrated,A!==null)){if(y)i.flags&256?(fa(i),i.flags&=-257,i=Ih(n,i,o)):i.memoizedState!==null?(ha(),i.child=n.child,i.flags|=128,i=null):(ha(),g=u.fallback,A=i.mode,u=Lh({mode:"visible",children:u.children},A),g=gi(g,A,o,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,li(i,n.child,null,o),u=i.child,u.memoizedState=Dh(o),u.childLanes=Oh(n,S,o),i.memoizedState=kh,i=g);else if(fa(i),A.data==="$!"){if(S=A.nextSibling&&A.nextSibling.dataset,S)var Z=S.dgst;S=Z,u=Error(a(419)),u.stack="",u.digest=S,vo({value:u,source:null,stack:null}),i=Ih(n,i,o)}else if(On||Ro(n,i,o,!1),S=(o&n.childLanes)!==0,On||S){if(S=rn,S!==null){if(u=o&-o,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(S.suspendedLanes|o))!==0?0:u,u!==0&&u!==I.retryLane)throw I.retryLane=u,da(n,u),ar(S,n,u),My}A.data==="$?"||dm(),i=Ih(n,i,o)}else A.data==="$?"?(i.flags|=128,i.child=n.child,i=B2.bind(null,n),A._reactRetry=i,i=null):(n=I.treeContext,Fn=es(A.nextSibling),sr=i,zt=!0,Zr=null,ms=!1,n!==null&&(zr[Ur++]=Ls,zr[Ur++]=Is,zr[Ur++]=si,Ls=n.id,Is=n.overflow,si=i),i=Ph(i,u.children),i.flags|=4096);return i}return g?(ha(),g=u.fallback,A=i.mode,I=n.child,Z=I.sibling,u=_a(I,{mode:"hidden",children:u.children}),u.subtreeFlags=I.subtreeFlags&31457280,Z!==null?g=_a(Z,g):(g=gi(g,A,o,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,A=n.child.memoizedState,A===null?A=Dh(o):(I=A.cachePool,I!==null?(Z=Rn._currentValue,I=I.parent!==Z?{parent:Z,pool:Z}:I):I=$x(),A={baseLanes:A.baseLanes|o,cachePool:I}),g.memoizedState=A,g.childLanes=Oh(n,S,o),i.memoizedState=kh,u):(fa(i),o=n.child,n=o.sibling,o=_a(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(S=i.deletions,S===null?(i.deletions=[n],i.flags|=16):S.push(n)),i.child=o,i.memoizedState=null,o)}function Ph(n,i){return i=Lh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Lh(n,i){return db(n,i,0,null)}function Ih(n,i,o){return li(i,n.child,null,o),n=Ph(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function $y(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Bh(n.return,i,o)}function zh(n,i,o,u,g){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=o,y.tailMode=g)}function By(n,i,o){var u=i.pendingProps,g=u.revealOrder,y=u.tail;if(Vn(n,i,u.children,o),u=Cn.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$y(n,o,i);else if(n.tag===19)$y(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(ue(Cn,u),g){case"forwards":for(o=i.child,g=null;o!==null;)n=o.alternate,n!==null&&yu(n)===null&&(g=o),o=o.sibling;o=g,o===null?(g=i.child,i.child=null):(g=o.sibling,o.sibling=null),zh(i,!1,g,o,y);break;case"backwards":for(o=null,g=i.child,i.child=null;g!==null;){if(n=g.alternate,n!==null&&yu(n)===null){i.child=g;break}n=g.sibling,g.sibling=o,o=g,g=n}zh(i,!0,o,null,y);break;case"together":zh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function $s(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Na|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Ro(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,o=_a(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=_a(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Uh(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Au(n)))}function C2(n,i,o){switch(i.tag){case 3:ge(i,i.stateNode.containerInfo),ga(i,Rn,n.memoizedState.cache),go();break;case 27:case 5:De(i);break;case 4:ge(i,i.stateNode.containerInfo);break;case 10:ga(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(fa(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Uy(n,i,o):(fa(i),n=$s(n,i,o),n!==null?n.sibling:null);fa(i);break;case 19:var g=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Ro(n,i,o,!1),u=(o&i.childLanes)!==0),g){if(u)return By(n,i,o);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ue(Cn,Cn.current),u)break;return null;case 22:case 23:return i.lanes=0,Oy(n,i,o);case 24:ga(i,Rn,n.memoizedState.cache)}return $s(n,i,o)}function Hy(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)On=!0;else{if(!Uh(n,o)&&(i.flags&128)===0)return On=!1,C2(n,i,o);On=(n.flags&131072)!==0}else On=!1,zt&&(i.flags&1048576)!==0&&Ex(i,mu,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,g=u._init;if(u=g(u._payload),i.type=u,typeof u=="function")Jh(u)?(n=fi(u,n),i.tag=1,i=Iy(null,i,u,n,o)):(i.tag=0,i=Ah(null,i,u,n,o));else{if(u!=null){if(g=u.$$typeof,g===j){i.tag=11,i=Ay(null,i,u,n,o);break e}else if(g===C){i.tag=14,i=ky(null,i,u,n,o);break e}}throw i=q(u)||u,Error(a(306,i,""))}}return i;case 0:return Ah(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,g=fi(u,i.pendingProps),Iy(n,i,u,g,o);case 3:e:{if(ge(i,i.stateNode.containerInfo),n===null)throw Error(a(387));var y=i.pendingProps;g=i.memoizedState,u=g.element,Fh(n,i),Ao(i,y,null,o);var S=i.memoizedState;if(y=S.cache,ga(i,Rn,y),y!==g.cache&&Hh(i,[Rn],o,!0),Mo(),y=S.element,g.isDehydrated)if(g={element:y,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=zy(n,i,y,o);break e}else if(y!==u){u=Ir(Error(a(424)),i),vo(u),i=zy(n,i,y,o);break e}else for(Fn=es(i.stateNode.containerInfo.firstChild),sr=i,zt=!0,Zr=null,ms=!0,o=Px(i,null,y,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(go(),y===u){i=$s(n,i,o);break e}Vn(n,i,y,o)}i=i.child}return i;case 26:return Co(n,i),n===null?(o=Vb(i.type,null,i.pendingProps,null))?i.memoizedState=o:zt||(o=i.type,n=i.pendingProps,u=Gu(lt.current).createElement(o),u[pn]=i,u[Hn]=n,Yn(u,o,n),bn(u),i.stateNode=u):i.memoizedState=Vb(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return De(i),n===null&&zt&&(u=i.stateNode=Hb(i.type,i.pendingProps,lt.current),sr=i,ms=!0,Fn=es(u.firstChild)),u=i.pendingProps.children,n!==null||zt?Vn(n,i,u,o):i.child=li(i,null,u,o),Co(n,i),i.child;case 5:return n===null&&zt&&((g=u=Fn)&&(u=rC(u,i.type,i.pendingProps,ms),u!==null?(i.stateNode=u,sr=i,Fn=es(u.firstChild),ms=!1,g=!0):g=!1),g||ii(i)),De(i),g=i.type,y=i.pendingProps,S=n!==null?n.memoizedProps:null,u=y.children,Sm(g,y)?u=null:S!==null&&Sm(g,S)&&(i.flags|=32),i.memoizedState!==null&&(g=hh(n,i,b2,null,null,o),Yo._currentValue=g),Co(n,i),Vn(n,i,u,o),i.child;case 6:return n===null&&zt&&((n=o=Fn)&&(o=sC(o,i.pendingProps,ms),o!==null?(i.stateNode=o,sr=i,Fn=null,n=!0):n=!1),n||ii(i)),null;case 13:return Uy(n,i,o);case 4:return ge(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=li(i,null,u,o):Vn(n,i,u,o),i.child;case 11:return Ay(n,i,i.type,i.pendingProps,o);case 7:return Vn(n,i,i.pendingProps,o),i.child;case 8:return Vn(n,i,i.pendingProps.children,o),i.child;case 12:return Vn(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,ga(i,i.type,u.value),Vn(n,i,u.children,o),i.child;case 9:return g=i.type._context,u=i.pendingProps.children,mi(i),g=Kn(g),u=u(g),i.flags|=1,Vn(n,i,u,o),i.child;case 14:return ky(n,i,i.type,i.pendingProps,o);case 15:return Dy(n,i,i.type,i.pendingProps,o);case 19:return By(n,i,o);case 22:return Oy(n,i,o);case 24:return mi(i),u=Kn(Rn),n===null?(g=dh(),g===null&&(g=rn,y=ch(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=o),g=y),i.memoizedState={parent:u,cache:g},qh(i),ga(i,Rn,g)):((n.lanes&o)!==0&&(Fh(n,i),Ao(i,null,null,o),Mo()),g=n.memoizedState,y=i.memoizedState,g.parent!==u?(g={parent:u,cache:u},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),ga(i,Rn,u)):(u=y.cache,ga(i,Rn,u),u!==g.cache&&Hh(i,[Rn],o,!0))),Vn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}var $h=re(null),hi=null,Bs=null;function ga(n,i,o){ue($h,i._currentValue),i._currentValue=o}function Hs(n){n._currentValue=$h.current,pe($h)}function Bh(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function Hh(n,i,o,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var y=g.dependencies;if(y!==null){var S=g.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=g;for(var I=0;I<i.length;I++)if(A.context===i[I]){y.lanes|=o,A=y.alternate,A!==null&&(A.lanes|=o),Bh(y.return,o,n),u||(S=null);break e}y=A.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(a(341));S.lanes|=o,y=S.alternate,y!==null&&(y.lanes|=o),Bh(S,o,n),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===n){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function Ro(n,i,o,u){n=null;for(var g=i,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(a(387));if(S=S.memoizedProps,S!==null){var A=g.type;jr(g.pendingProps.value,S.value)||(n!==null?n.push(A):n=[A])}}else if(g===rt.current){if(S=g.alternate,S===null)throw Error(a(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Yo):n=[Yo])}g=g.return}n!==null&&Hh(i,n,o,u),i.flags|=262144}function Au(n){for(n=n.firstContext;n!==null;){if(!jr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function mi(n){hi=n,Bs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Kn(n){return qy(hi,n)}function ku(n,i){return hi===null&&mi(n),qy(n,i)}function qy(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Bs===null){if(n===null)throw Error(a(308));Bs=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Bs=Bs.next=i;return o}var va=!1;function qh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fh(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function xa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ya(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(hn&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,i=fu(n),Nx(n,null,o),i}return du(n,u,i,o),fu(n)}function To(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194176)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,en(n,o)}}function Vh(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?g=y=S:y=y.next=S,o=o.next}while(o!==null);y===null?g=y=i:y=y.next=i}else g=y=i;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Yh=!1;function Mo(){if(Yh){var n=Xi;if(n!==null)throw n}}function Ao(n,i,o,u){Yh=!1;var g=n.updateQueue;va=!1;var y=g.firstBaseUpdate,S=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var I=A,Z=I.next;I.next=null,S===null?y=Z:S.next=Z,S=I;var fe=n.alternate;fe!==null&&(fe=fe.updateQueue,A=fe.lastBaseUpdate,A!==S&&(A===null?fe.firstBaseUpdate=Z:A.next=Z,fe.lastBaseUpdate=I))}if(y!==null){var we=g.baseState;S=0,fe=Z=I=null,A=y;do{var le=A.lane&-536870913,de=le!==A.lane;if(de?(kt&le)===le:(u&le)===le){le!==0&&le===Wi&&(Yh=!0),fe!==null&&(fe=fe.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var He=n,at=A;le=i;var xn=o;switch(at.tag){case 1:if(He=at.payload,typeof He=="function"){we=He.call(xn,we,le);break e}we=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=at.payload,le=typeof He=="function"?He.call(xn,we,le):He,le==null)break e;we=W({},we,le);break e;case 2:va=!0}}le=A.callback,le!==null&&(n.flags|=64,de&&(n.flags|=8192),de=g.callbacks,de===null?g.callbacks=[le]:de.push(le))}else de={lane:le,tag:A.tag,payload:A.payload,callback:A.callback,next:null},fe===null?(Z=fe=de,I=we):fe=fe.next=de,S|=le;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;de=A,A=de.next,de.next=null,g.lastBaseUpdate=de,g.shared.pending=null}}while(!0);fe===null&&(I=we),g.baseState=I,g.firstBaseUpdate=Z,g.lastBaseUpdate=fe,y===null&&(g.shared.lanes=0),Na|=S,n.lanes=S,n.memoizedState=we}}function Fy(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function Vy(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Fy(o[n],i)}function ko(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&n)===n){u=void 0;var y=o.create,S=o.inst;u=y(),S.destroy=u}o=o.next}while(o!==g)}}catch(A){tn(i,i.return,A)}}function ba(n,i,o){try{var u=i.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&n)===n){var S=u.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,g=i;var I=o;try{A()}catch(Z){tn(g,I,Z)}}}u=u.next}while(u!==y)}}catch(Z){tn(i,i.return,Z)}}function Yy(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Vy(i,o)}catch(u){tn(n,n.return,u)}}}function Gy(n,i,o){o.props=fi(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){tn(n,i,u)}}function pi(n,i){try{var o=n.ref;if(o!==null){var u=n.stateNode;switch(n.tag){case 26:case 27:case 5:var g=u;break;default:g=u}typeof o=="function"?n.refCleanup=o(g):o.current=g}}catch(y){tn(n,i,y)}}function _r(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){tn(n,i,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){tn(n,i,g)}else o.current=null}function Wy(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){tn(n,n.return,g)}}function Xy(n,i,o){try{var u=n.stateNode;Z2(u,n.type,o,i),u[Hn]=i}catch(g){tn(n,n.return,g)}}function Ky(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Gh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ky(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wh(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(n,i):o.insertBefore(n,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(n,o)):(i=o,i.appendChild(n)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Yu));else if(u!==4&&u!==27&&(n=n.child,n!==null))for(Wh(n,i,o),n=n.sibling;n!==null;)Wh(n,i,o),n=n.sibling}function Du(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&u!==27&&(n=n.child,n!==null))for(Du(n,i,o),n=n.sibling;n!==null;)Du(n,i,o),n=n.sibling}var qs=!1,gn=!1,Xh=!1,Qy=typeof WeakSet=="function"?WeakSet:Set,Pn=null,Zy=!1;function R2(n,i){if(n=n.containerInfo,_m=Ju,n=px(n),Qf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var S=0,A=-1,I=-1,Z=0,fe=0,we=n,le=null;t:for(;;){for(var de;we!==o||g!==0&&we.nodeType!==3||(A=S+g),we!==y||u!==0&&we.nodeType!==3||(I=S+u),we.nodeType===3&&(S+=we.nodeValue.length),(de=we.firstChild)!==null;)le=we,we=de;for(;;){if(we===n)break t;if(le===o&&++Z===g&&(A=S),le===y&&++fe===u&&(I=S),(de=we.nextSibling)!==null)break;we=le,le=we.parentNode}we=de}o=A===-1||I===-1?null:{start:A,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(Nm={focusedElem:n,selectionRange:o},Ju=!1,Pn=i;Pn!==null;)if(i=Pn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Pn=n;else for(;Pn!==null;){switch(i=Pn,y=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,o=i,g=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var He=fi(o.type,g,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(He,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(at){tn(o,o.return,at)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Rm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Rm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,Pn=n;break}Pn=i.return}return He=Zy,Zy=!1,He}function Jy(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Vs(n,o),u&4&&ko(5,o);break;case 1:if(Vs(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(A){tn(o,o.return,A)}else{var g=fi(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(g,i,n.__reactInternalSnapshotBeforeUpdate)}catch(A){tn(o,o.return,A)}}u&64&&Yy(o),u&512&&pi(o,o.return);break;case 3:if(Vs(n,o),u&64&&(u=o.updateQueue,u!==null)){if(n=null,o.child!==null)switch(o.child.tag){case 27:case 5:n=o.child.stateNode;break;case 1:n=o.child.stateNode}try{Vy(u,n)}catch(A){tn(o,o.return,A)}}break;case 26:Vs(n,o),u&512&&pi(o,o.return);break;case 27:case 5:Vs(n,o),i===null&&u&4&&Wy(o),u&512&&pi(o,o.return);break;case 12:Vs(n,o);break;case 13:Vs(n,o),u&4&&nb(n,o);break;case 22:if(g=o.memoizedState!==null||qs,!g){i=i!==null&&i.memoizedState!==null||gn;var y=qs,S=gn;qs=g,(gn=i)&&!S?wa(n,o,(o.subtreeFlags&8772)!==0):Vs(n,o),qs=y,gn=S}u&512&&(o.memoizedProps.mode==="manual"?pi(o,o.return):_r(o,o.return));break;default:Vs(n,o)}}function eb(n){var i=n.alternate;i!==null&&(n.alternate=null,eb(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&dr(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var _n=null,Nr=!1;function Fs(n,i,o){for(o=o.child;o!==null;)tb(n,i,o),o=o.sibling}function tb(n,i,o){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(Te,o)}catch{}switch(o.tag){case 26:gn||_r(o,i),Fs(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:gn||_r(o,i);var u=_n,g=Nr;for(_n=o.stateNode,Fs(n,i,o),o=o.stateNode,i=o.attributes;i.length;)o.removeAttributeNode(i[0]);dr(o),_n=u,Nr=g;break;case 5:gn||_r(o,i);case 6:g=_n;var y=Nr;if(_n=null,Fs(n,i,o),_n=g,Nr=y,_n!==null)if(Nr)try{n=_n,u=o.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)}catch(S){tn(o,i,S)}else try{_n.removeChild(o.stateNode)}catch(S){tn(o,i,S)}break;case 18:_n!==null&&(Nr?(i=_n,o=o.stateNode,i.nodeType===8?Cm(i.parentNode,o):i.nodeType===1&&Cm(i,o),Ko(i)):Cm(_n,o.stateNode));break;case 4:u=_n,g=Nr,_n=o.stateNode.containerInfo,Nr=!0,Fs(n,i,o),_n=u,Nr=g;break;case 0:case 11:case 14:case 15:gn||ba(2,o,i),gn||ba(4,o,i),Fs(n,i,o);break;case 1:gn||(_r(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Gy(o,i,u)),Fs(n,i,o);break;case 21:Fs(n,i,o);break;case 22:gn||_r(o,i),gn=(u=gn)||o.memoizedState!==null,Fs(n,i,o),gn=u;break;default:Fs(n,i,o)}}function nb(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ko(n)}catch(o){tn(i,i.return,o)}}function T2(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Qy),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Qy),i;default:throw Error(a(435,n.tag))}}function Kh(n,i){var o=T2(n);i.forEach(function(u){var g=H2.bind(null,n,u);o.has(u)||(o.add(u),u.then(g,g))})}function Br(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],y=n,S=i,A=S;e:for(;A!==null;){switch(A.tag){case 27:case 5:_n=A.stateNode,Nr=!1;break e;case 3:_n=A.stateNode.containerInfo,Nr=!0;break e;case 4:_n=A.stateNode.containerInfo,Nr=!0;break e}A=A.return}if(_n===null)throw Error(a(160));tb(y,S,g),_n=null,Nr=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)rb(i,n),i=i.sibling}var Jr=null;function rb(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Br(i,n),Hr(n),u&4&&(ba(3,n,n.return),ko(3,n),ba(5,n,n.return));break;case 1:Br(i,n),Hr(n),u&512&&(gn||o===null||_r(o,o.return)),u&64&&qs&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=Jr;if(Br(i,n),Hr(n),u&512&&(gn||o===null||_r(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[qn]||y[pn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),Yn(y,u,o),y[pn]=n,bn(y),u=y;break e;case"link":var S=Wb("link","href",g).get(u+(o.href||""));if(S){for(var A=0;A<S.length;A++)if(y=S[A],y.getAttribute("href")===(o.href==null?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(A,1);break t}}y=g.createElement(u),Yn(y,u,o),g.head.appendChild(y);break;case"meta":if(S=Wb("meta","content",g).get(u+(o.content||""))){for(A=0;A<S.length;A++)if(y=S[A],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(A,1);break t}}y=g.createElement(u),Yn(y,u,o),g.head.appendChild(y);break;default:throw Error(a(468,u))}y[pn]=n,bn(y),u=y}n.stateNode=u}else Xb(g,n.type,n.stateNode);else n.stateNode=Gb(g,u,n.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?Xb(g,n.type,n.stateNode):Gb(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Xy(n,n.memoizedProps,o.memoizedProps)}break;case 27:if(u&4&&n.alternate===null){g=n.stateNode,y=n.memoizedProps;try{for(var I=g.firstChild;I;){var Z=I.nextSibling,fe=I.nodeName;I[qn]||fe==="HEAD"||fe==="BODY"||fe==="SCRIPT"||fe==="STYLE"||fe==="LINK"&&I.rel.toLowerCase()==="stylesheet"||g.removeChild(I),I=Z}for(var we=n.type,le=g.attributes;le.length;)g.removeAttributeNode(le[0]);Yn(g,we,y),g[pn]=n,g[Hn]=y}catch(He){tn(n,n.return,He)}}case 5:if(Br(i,n),Hr(n),u&512&&(gn||o===null||_r(o,o.return)),n.flags&32){g=n.stateNode;try{Li(g,"")}catch(He){tn(n,n.return,He)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,Xy(n,g,o!==null?o.memoizedProps:g)),u&1024&&(Xh=!0);break;case 6:if(Br(i,n),Hr(n),u&4){if(n.stateNode===null)throw Error(a(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(He){tn(n,n.return,He)}}break;case 3:if(Ku=null,g=Jr,Jr=Wu(i.containerInfo),Br(i,n),Jr=g,Hr(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ko(i.containerInfo)}catch(He){tn(n,n.return,He)}Xh&&(Xh=!1,sb(n));break;case 4:u=Jr,Jr=Wu(n.stateNode.containerInfo),Br(i,n),Hr(n),Jr=u;break;case 12:Br(i,n),Hr(n);break;case 13:Br(i,n),Hr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(am=Mt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kh(n,u)));break;case 22:if(u&512&&(gn||o===null||_r(o,o.return)),I=n.memoizedState!==null,Z=o!==null&&o.memoizedState!==null,fe=qs,we=gn,qs=fe||I,gn=we||Z,Br(i,n),gn=we,qs=fe,Hr(n),i=n.stateNode,i._current=n,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,u&8192&&(i._visibility=I?i._visibility&-2:i._visibility|1,I&&(i=qs||gn,o===null||Z||i||Ji(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(o=null,i=n;;){if(i.tag===5||i.tag===26||i.tag===27){if(o===null){Z=o=i;try{if(g=Z.stateNode,I)y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=Z.stateNode,A=Z.memoizedProps.style;var de=A!=null&&A.hasOwnProperty("display")?A.display:null;S.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(He){tn(Z,Z.return,He)}}}else if(i.tag===6){if(o===null){Z=i;try{Z.stateNode.nodeValue=I?"":Z.memoizedProps}catch(He){tn(Z,Z.return,He)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Kh(n,o))));break;case 19:Br(i,n),Hr(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kh(n,u)));break;case 21:break;default:Br(i,n),Hr(n)}}function Hr(n){var i=n.flags;if(i&2){try{if(n.tag!==27){e:{for(var o=n.return;o!==null;){if(Ky(o)){var u=o;break e}o=o.return}throw Error(a(160))}switch(u.tag){case 27:var g=u.stateNode,y=Gh(n);Du(n,y,g);break;case 5:var S=u.stateNode;u.flags&32&&(Li(S,""),u.flags&=-33);var A=Gh(n);Du(n,A,S);break;case 3:case 4:var I=u.stateNode.containerInfo,Z=Gh(n);Wh(n,Z,I);break;default:throw Error(a(161))}}}catch(fe){tn(n,n.return,fe)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function sb(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;sb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Vs(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Jy(n,i.alternate,i),i=i.sibling}function Ji(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:ba(4,i,i.return),Ji(i);break;case 1:_r(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Gy(i,i.return,o),Ji(i);break;case 26:case 27:case 5:_r(i,i.return),Ji(i);break;case 22:_r(i,i.return),i.memoizedState===null&&Ji(i);break;default:Ji(i)}n=n.sibling}}function wa(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,g=n,y=i,S=y.flags;switch(y.tag){case 0:case 11:case 15:wa(g,y,o),ko(4,y);break;case 1:if(wa(g,y,o),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Z){tn(u,u.return,Z)}if(u=y,g=u.updateQueue,g!==null){var A=u.stateNode;try{var I=g.shared.hiddenCallbacks;if(I!==null)for(g.shared.hiddenCallbacks=null,g=0;g<I.length;g++)Fy(I[g],A)}catch(Z){tn(u,u.return,Z)}}o&&S&64&&Yy(y),pi(y,y.return);break;case 26:case 27:case 5:wa(g,y,o),o&&u===null&&S&4&&Wy(y),pi(y,y.return);break;case 12:wa(g,y,o);break;case 13:wa(g,y,o),o&&S&4&&nb(g,y);break;case 22:y.memoizedState===null&&wa(g,y,o),pi(y,y.return);break;default:wa(g,y,o)}i=i.sibling}}function Qh(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&jo(o))}function Zh(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jo(n))}function ja(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ab(n,i,o,u),i=i.sibling}function ab(n,i,o,u){var g=i.flags;switch(i.tag){case 0:case 11:case 15:ja(n,i,o,u),g&2048&&ko(9,i);break;case 3:ja(n,i,o,u),g&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jo(n)));break;case 12:if(g&2048){ja(n,i,o,u),n=i.stateNode;try{var y=i.memoizedProps,S=y.id,A=y.onPostCommit;typeof A=="function"&&A(S,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){tn(i,i.return,I)}}else ja(n,i,o,u);break;case 23:break;case 22:y=i.stateNode,i.memoizedState!==null?y._visibility&4?ja(n,i,o,u):Do(n,i):y._visibility&4?ja(n,i,o,u):(y._visibility|=4,el(n,i,o,u,(i.subtreeFlags&10256)!==0)),g&2048&&Qh(i.alternate,i);break;case 24:ja(n,i,o,u),g&2048&&Zh(i.alternate,i);break;default:ja(n,i,o,u)}}function el(n,i,o,u,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var y=n,S=i,A=o,I=u,Z=S.flags;switch(S.tag){case 0:case 11:case 15:el(y,S,A,I,g),ko(8,S);break;case 23:break;case 22:var fe=S.stateNode;S.memoizedState!==null?fe._visibility&4?el(y,S,A,I,g):Do(y,S):(fe._visibility|=4,el(y,S,A,I,g)),g&&Z&2048&&Qh(S.alternate,S);break;case 24:el(y,S,A,I,g),g&&Z&2048&&Zh(S.alternate,S);break;default:el(y,S,A,I,g)}i=i.sibling}}function Do(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,g=u.flags;switch(u.tag){case 22:Do(o,u),g&2048&&Qh(u.alternate,u);break;case 24:Do(o,u),g&2048&&Zh(u.alternate,u);break;default:Do(o,u)}i=i.sibling}}var Oo=8192;function tl(n){if(n.subtreeFlags&Oo)for(n=n.child;n!==null;)ib(n),n=n.sibling}function ib(n){switch(n.tag){case 26:tl(n),n.flags&Oo&&n.memoizedState!==null&&vC(Jr,n.memoizedState,n.memoizedProps);break;case 5:tl(n);break;case 3:case 4:var i=Jr;Jr=Wu(n.stateNode.containerInfo),tl(n),Jr=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Oo,Oo=16777216,tl(n),Oo=i):tl(n));break;default:tl(n)}}function lb(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Po(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Pn=u,cb(u,n)}lb(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ob(n),n=n.sibling}function ob(n){switch(n.tag){case 0:case 11:case 15:Po(n),n.flags&2048&&ba(9,n,n.return);break;case 3:Po(n);break;case 12:Po(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&4&&(n.return===null||n.return.tag!==13)?(i._visibility&=-5,Ou(n)):Po(n);break;default:Po(n)}}function Ou(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Pn=u,cb(u,n)}lb(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:ba(8,i,i.return),Ou(i);break;case 22:o=i.stateNode,o._visibility&4&&(o._visibility&=-5,Ou(i));break;default:Ou(i)}n=n.sibling}}function cb(n,i){for(;Pn!==null;){var o=Pn;switch(o.tag){case 0:case 11:case 15:ba(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:jo(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Pn=u;else e:for(o=n;Pn!==null;){u=Pn;var g=u.sibling,y=u.return;if(eb(u),u===o){Pn=null;break e}if(g!==null){g.return=y,Pn=g;break e}Pn=y}}}function M2(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(n,i,o,u){return new M2(n,i,o,u)}function Jh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function _a(n,i){var o=n.alternate;return o===null?(o=qr(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&31457280,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function ub(n,i){n.flags&=31457282;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Pu(n,i,o,u,g,y){var S=0;if(u=n,typeof n=="function")Jh(n)&&(S=1);else if(typeof n=="string")S=pC(n,o,_e.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case h:return gi(o.children,g,y,i);case p:S=8,g|=24;break;case v:return n=qr(12,o,i,g|2),n.elementType=v,n.lanes=y,n;case N:return n=qr(13,o,i,g),n.elementType=N,n.lanes=y,n;case _:return n=qr(19,o,i,g),n.elementType=_,n.lanes=y,n;case R:return db(o,g,y,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:case w:S=10;break e;case b:S=9;break e;case j:S=11;break e;case C:S=14;break e;case E:S=16,u=null;break e}S=29,o=Error(a(130,n===null?"null":typeof n,"")),u=null}return i=qr(S,o,i,g),i.elementType=n,i.type=u,i.lanes=y,i}function gi(n,i,o,u){return n=qr(7,n,u,i),n.lanes=o,n}function db(n,i,o,u){n=qr(22,n,u,i),n.elementType=R,n.lanes=o;var g={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=g._current;if(y===null)throw Error(a(456));if((g._pendingVisibility&2)===0){var S=da(y,2);S!==null&&(g._pendingVisibility|=2,ar(S,y,2))}},attach:function(){var y=g._current;if(y===null)throw Error(a(456));if((g._pendingVisibility&2)!==0){var S=da(y,2);S!==null&&(g._pendingVisibility&=-3,ar(S,y,2))}}};return n.stateNode=g,n}function em(n,i,o){return n=qr(6,n,null,i),n.lanes=o,n}function tm(n,i,o){return i=qr(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Ys(n){n.flags|=4}function fb(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Kb(i)){if(i=$r.current,i!==null&&((kt&4194176)===kt?ps!==null:(kt&62914560)!==kt&&(kt&536870912)===0||i!==ps))throw yo=ih,Tx;n.flags|=8192}}function Lu(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?cn():536870912,n.lanes|=i,rl|=i)}function Lo(n,i){if(!zt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function fn(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var g=n.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&31457280,u|=g.flags&31457280,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function A2(n,i,o){var u=i.pendingProps;switch(sh(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(i),null;case 1:return fn(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Hs(Rn),me(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(po(i)?Ys(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zr!==null&&(cm(Zr),Zr=null))),fn(i),null;case 26:return o=i.memoizedState,n===null?(Ys(i),o!==null?(fn(i),fb(i,o)):(fn(i),i.flags&=-16777217)):o?o!==n.memoizedState?(Ys(i),fn(i),fb(i,o)):(fn(i),i.flags&=-16777217):(n.memoizedProps!==u&&Ys(i),fn(i),i.flags&=-16777217),null;case 27:ye(i),o=lt.current;var g=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ys(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return fn(i),null}n=_e.current,po(i)?Cx(i):(n=Hb(g,u,o),i.stateNode=n,Ys(i))}return fn(i),null;case 5:if(ye(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ys(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return fn(i),null}if(n=_e.current,po(i))Cx(i);else{switch(g=Gu(lt.current),n){case 1:n=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=g.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?g.createElement(o,{is:u.is}):g.createElement(o)}}n[pn]=i,n[Hn]=u;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)n.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=n;e:switch(Yn(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ys(i)}}return fn(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&Ys(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(n=lt.current,po(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,g=sr,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[pn]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Lb(n.nodeValue,o)),n||ii(i)}else n=Gu(n).createTextNode(u),n[pn]=i,i.stateNode=n}return fn(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=po(i),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(a(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(a(317));g[pn]=i}else go(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;fn(i),g=!1}else Zr!==null&&(cm(Zr),Zr=null),g=!0;if(!g)return i.flags&256?(zs(i),i):(zs(i),null)}if(zs(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=i.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var y=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),Lu(i,i.updateQueue),fn(i),null;case 4:return me(),n===null&&bm(i.stateNode.containerInfo),fn(i),null;case 10:return Hs(i.type),fn(i),null;case 19:if(pe(Cn),g=i.memoizedState,g===null)return fn(i),null;if(u=(i.flags&128)!==0,y=g.rendering,y===null)if(u)Lo(g,!1);else{if(vn!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(y=yu(n),y!==null){for(i.flags|=128,Lo(g,!1),n=y.updateQueue,i.updateQueue=n,Lu(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)ub(o,n),o=o.sibling;return ue(Cn,Cn.current&1|2),i.child}n=n.sibling}g.tail!==null&&Mt()>Iu&&(i.flags|=128,u=!0,Lo(g,!1),i.lanes=4194304)}else{if(!u)if(n=yu(y),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Lu(i,n),Lo(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!zt)return fn(i),null}else 2*Mt()-g.renderingStartTime>Iu&&o!==536870912&&(i.flags|=128,u=!0,Lo(g,!1),i.lanes=4194304);g.isBackwards?(y.sibling=i.child,i.child=y):(n=g.last,n!==null?n.sibling=y:i.child=y,g.last=y)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Mt(),i.sibling=null,n=Cn.current,ue(Cn,u?n&1|2:n&1),i):(fn(i),null);case 22:case 23:return zs(i),oh(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(fn(i),i.subtreeFlags&6&&(i.flags|=8192)):fn(i),o=i.updateQueue,o!==null&&Lu(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&pe(oi),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Hs(Rn),fn(i),null;case 25:return null}throw Error(a(156,i.tag))}function k2(n,i){switch(sh(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Hs(Rn),me(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return ye(i),null;case 13:if(zs(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));go()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return pe(Cn),null;case 4:return me(),null;case 10:return Hs(i.type),null;case 22:case 23:return zs(i),oh(),n!==null&&pe(oi),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Hs(Rn),null;case 25:return null;default:return null}}function hb(n,i){switch(sh(i),i.tag){case 3:Hs(Rn),me();break;case 26:case 27:case 5:ye(i);break;case 4:me();break;case 13:zs(i);break;case 19:pe(Cn);break;case 10:Hs(i.type);break;case 22:case 23:zs(i),oh(),n!==null&&pe(oi);break;case 24:Hs(Rn)}}var D2={getCacheForType:function(n){var i=Kn(Rn),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},O2=typeof WeakMap=="function"?WeakMap:Map,hn=0,rn=null,xt=null,kt=0,sn=0,Sr=null,Gs=!1,nl=!1,nm=!1,Ws=0,vn=0,Na=0,vi=0,rm=0,Fr=0,rl=0,Io=null,vs=null,sm=!1,am=0,Iu=1/0,zu=null,Sa=null,Uu=!1,xi=null,zo=0,im=0,lm=null,Uo=0,om=null;function Er(){if((hn&2)!==0&&kt!==0)return kt&-kt;if(G.T!==null){var n=Wi;return n!==0?n:gm()}return An()}function mb(){Fr===0&&(Fr=(kt&536870912)===0||zt?jt():536870912);var n=$r.current;return n!==null&&(n.flags|=32),Fr}function ar(n,i,o){(n===rn&&sn===2||n.cancelPendingCommit!==null)&&(sl(n,0),Xs(n,kt,Fr,!1)),mt(n,o),((hn&2)===0||n!==rn)&&(n===rn&&((hn&2)===0&&(vi|=o),vn===4&&Xs(n,kt,Fr,!1)),xs(n))}function pb(n,i,o){if((hn&6)!==0)throw Error(a(327));var u=!o&&(i&60)===0&&(i&n.expiredLanes)===0||vt(n,i),g=u?I2(n,i):fm(n,i,!0),y=u;do{if(g===0){nl&&!u&&Xs(n,i,0,!1);break}else if(g===6)Xs(n,i,0,!Gs);else{if(o=n.current.alternate,y&&!P2(o)){g=fm(n,i,!1),y=!1;continue}if(g===2){if(y=i,n.errorRecoveryDisabledLanes&y)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var A=n;g=Io;var I=A.current.memoizedState.isDehydrated;if(I&&(sl(A,S).flags|=256),S=fm(A,S,!1),S!==2){if(nm&&!I){A.errorRecoveryDisabledLanes|=y,vi|=y,g=4;break e}y=vs,vs=g,y!==null&&cm(y)}g=S}if(y=!1,g!==2)continue}}if(g===1){sl(n,0),Xs(n,i,0,!0);break}e:{switch(u=n,g){case 0:case 1:throw Error(a(345));case 4:if((i&4194176)===i){Xs(u,i,Fr,!Gs);break e}break;case 2:vs=null;break;case 3:case 5:break;default:throw Error(a(329))}if(u.finishedWork=o,u.finishedLanes=i,(i&62914560)===i&&(y=am+300-Mt(),10<y)){if(Xs(u,i,Fr,!Gs),ke(u,0)!==0)break e;u.timeoutHandle=Ub(gb.bind(null,u,o,vs,zu,sm,i,Fr,vi,rl,Gs,2,-0,0),y);break e}gb(u,o,vs,zu,sm,i,Fr,vi,rl,Gs,0,-0,0)}}break}while(!0);xs(n)}function cm(n){vs===null?vs=n:vs.push.apply(vs,n)}function gb(n,i,o,u,g,y,S,A,I,Z,fe,we,le){var de=i.subtreeFlags;if((de&8192||(de&16785408)===16785408)&&(Vo={stylesheets:null,count:0,unsuspend:gC},ib(i),i=xC(),i!==null)){n.cancelPendingCommit=i(_b.bind(null,n,o,u,g,S,A,I,1,we,le)),Xs(n,y,S,!Z);return}_b(n,o,u,g,S,A,I,fe,we,le)}function P2(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],y=g.getSnapshot;g=g.value;try{if(!jr(y(),g))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Xs(n,i,o,u){i&=~rm,i&=~vi,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var g=i;0<g;){var y=31-Ft(g),S=1<<y;u[y]=-1,g&=~S}o!==0&&Vt(n,o,i)}function $u(){return(hn&6)===0?($o(0),!1):!0}function um(){if(xt!==null){if(sn===0)var n=xt.return;else n=xt,Bs=hi=null,gh(n),Yi=null,bo=0,n=xt;for(;n!==null;)hb(n.alternate,n),n=n.return;xt=null}}function sl(n,i){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,eC(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),um(),rn=n,xt=o=_a(n.current,null),kt=i,sn=0,Sr=null,Gs=!1,nl=vt(n,i),nm=!1,rl=Fr=rm=vi=Na=vn=0,vs=Io=null,sm=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var g=31-Ft(u),y=1<<g;i|=n[g],u&=~y}return Ws=i,uu(),o}function vb(n,i){ft=null,G.H=gs,i===xo?(i=kx(),sn=3):i===Tx?(i=kx(),sn=4):sn=i===My?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Sr=i,xt===null&&(vn=1,Mu(n,Ir(i,n.current)))}function xb(){var n=G.H;return G.H=gs,n===null?gs:n}function yb(){var n=G.A;return G.A=D2,n}function dm(){vn=4,Gs||(kt&4194176)!==kt&&$r.current!==null||(nl=!0),(Na&134217727)===0&&(vi&134217727)===0||rn===null||Xs(rn,kt,Fr,!1)}function fm(n,i,o){var u=hn;hn|=2;var g=xb(),y=yb();(rn!==n||kt!==i)&&(zu=null,sl(n,i)),i=!1;var S=vn;e:do try{if(sn!==0&&xt!==null){var A=xt,I=Sr;switch(sn){case 8:um(),S=6;break e;case 3:case 2:case 6:$r.current===null&&(i=!0);var Z=sn;if(sn=0,Sr=null,al(n,A,I,Z),o&&nl){S=0;break e}break;default:Z=sn,sn=0,Sr=null,al(n,A,I,Z)}}L2(),S=vn;break}catch(fe){vb(n,fe)}while(!0);return i&&n.shellSuspendCounter++,Bs=hi=null,hn=u,G.H=g,G.A=y,xt===null&&(rn=null,kt=0,uu()),S}function L2(){for(;xt!==null;)bb(xt)}function I2(n,i){var o=hn;hn|=2;var u=xb(),g=yb();rn!==n||kt!==i?(zu=null,Iu=Mt()+500,sl(n,i)):nl=vt(n,i);e:do try{if(sn!==0&&xt!==null){i=xt;var y=Sr;t:switch(sn){case 1:sn=0,Sr=null,al(n,i,y,1);break;case 2:if(Mx(y)){sn=0,Sr=null,wb(i);break}i=function(){sn===2&&rn===n&&(sn=7),xs(n)},y.then(i,i);break e;case 3:sn=7;break e;case 4:sn=5;break e;case 7:Mx(y)?(sn=0,Sr=null,wb(i)):(sn=0,Sr=null,al(n,i,y,7));break;case 5:var S=null;switch(xt.tag){case 26:S=xt.memoizedState;case 5:case 27:var A=xt;if(!S||Kb(S)){sn=0,Sr=null;var I=A.sibling;if(I!==null)xt=I;else{var Z=A.return;Z!==null?(xt=Z,Bu(Z)):xt=null}break t}}sn=0,Sr=null,al(n,i,y,5);break;case 6:sn=0,Sr=null,al(n,i,y,6);break;case 8:um(),vn=6;break e;default:throw Error(a(462))}}z2();break}catch(fe){vb(n,fe)}while(!0);return Bs=hi=null,G.H=u,G.A=g,hn=o,xt!==null?0:(rn=null,kt=0,uu(),vn)}function z2(){for(;xt!==null&&!qe();)bb(xt)}function bb(n){var i=Hy(n.alternate,n,Ws);n.memoizedProps=n.pendingProps,i===null?Bu(n):xt=i}function wb(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Ly(o,i,i.pendingProps,i.type,void 0,kt);break;case 11:i=Ly(o,i,i.pendingProps,i.type.render,i.ref,kt);break;case 5:gh(i);default:hb(o,i),i=xt=ub(i,Ws),i=Hy(o,i,Ws)}n.memoizedProps=n.pendingProps,i===null?Bu(n):xt=i}function al(n,i,o,u){Bs=hi=null,gh(i),Yi=null,bo=0;var g=i.return;try{if(E2(n,g,i,o,kt)){vn=1,Mu(n,Ir(o,n.current)),xt=null;return}}catch(y){if(g!==null)throw xt=g,y;vn=1,Mu(n,Ir(o,n.current)),xt=null;return}i.flags&32768?(zt||u===1?n=!0:nl||(kt&536870912)!==0?n=!1:(Gs=n=!0,(u===2||u===3||u===6)&&(u=$r.current,u!==null&&u.tag===13&&(u.flags|=16384))),jb(i,n)):Bu(i)}function Bu(n){var i=n;do{if((i.flags&32768)!==0){jb(i,Gs);return}n=i.return;var o=A2(i.alternate,i,Ws);if(o!==null){xt=o;return}if(i=i.sibling,i!==null){xt=i;return}xt=i=n}while(i!==null);vn===0&&(vn=5)}function jb(n,i){do{var o=k2(n.alternate,n);if(o!==null){o.flags&=32767,xt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){xt=n;return}xt=n=o}while(n!==null);vn=6,xt=null}function _b(n,i,o,u,g,y,S,A,I,Z){var fe=G.T,we=D.p;try{D.p=2,G.T=null,U2(n,i,o,u,we,g,y,S,A,I,Z)}finally{G.T=fe,D.p=we}}function U2(n,i,o,u,g,y,S,A){do il();while(xi!==null);if((hn&6)!==0)throw Error(a(327));var I=n.finishedWork;if(u=n.finishedLanes,I===null)return null;if(n.finishedWork=null,n.finishedLanes=0,I===n.current)throw Error(a(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var Z=I.lanes|I.childLanes;if(Z|=th,En(n,u,Z,y,S,A),n===rn&&(xt=rn=null,kt=0),(I.subtreeFlags&10256)===0&&(I.flags&10256)===0||Uu||(Uu=!0,im=Z,lm=o,q2(nn,function(){return il(),null})),o=(I.flags&15990)!==0,(I.subtreeFlags&15990)!==0||o?(o=G.T,G.T=null,y=D.p,D.p=2,S=hn,hn|=4,R2(n,I),rb(I,n),c2(Nm,n.containerInfo),Ju=!!_m,Nm=_m=null,n.current=I,Jy(n,I.alternate,I),gt(),hn=S,D.p=y,G.T=o):n.current=I,Uu?(Uu=!1,xi=n,zo=u):Nb(n,Z),Z=n.pendingLanes,Z===0&&(Sa=null),et(I.stateNode),xs(n),i!==null)for(g=n.onRecoverableError,I=0;I<i.length;I++)Z=i[I],g(Z.value,{componentStack:Z.stack});return(zo&3)!==0&&il(),Z=n.pendingLanes,(u&4194218)!==0&&(Z&42)!==0?n===om?Uo++:(Uo=0,om=n):Uo=0,$o(0),null}function Nb(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,jo(i)))}function il(){if(xi!==null){var n=xi,i=im;im=0;var o=wr(zo),u=G.T,g=D.p;try{if(D.p=32>o?32:o,G.T=null,xi===null)var y=!1;else{o=lm,lm=null;var S=xi,A=zo;if(xi=null,zo=0,(hn&6)!==0)throw Error(a(331));var I=hn;if(hn|=4,ob(S.current),ab(S,S.current,A,o),hn=I,$o(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(Te,S)}catch{}y=!0}return y}finally{D.p=g,G.T=u,Nb(n,i)}}return!1}function Sb(n,i,o){i=Ir(o,i),i=Mh(n.stateNode,i,2),n=ya(n,i,2),n!==null&&(mt(n,2),xs(n))}function tn(n,i,o){if(n.tag===3)Sb(n,n,o);else for(;i!==null;){if(i.tag===3){Sb(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Sa===null||!Sa.has(u))){n=Ir(o,n),o=Ry(2),u=ya(i,o,2),u!==null&&(Ty(o,u,i,n),mt(u,2),xs(u));break}}i=i.return}}function hm(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new O2;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(o)||(nm=!0,g.add(o),n=$2.bind(null,n,i,o),i.then(n,n))}function $2(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,rn===n&&(kt&o)===o&&(vn===4||vn===3&&(kt&62914560)===kt&&300>Mt()-am?(hn&2)===0&&sl(n,0):rm|=o,rl===kt&&(rl=0)),xs(n)}function Eb(n,i){i===0&&(i=cn()),n=da(n,i),n!==null&&(mt(n,i),xs(n))}function B2(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Eb(n,o)}function H2(n,i){var o=0;switch(n.tag){case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),Eb(n,o)}function q2(n,i){return Pe(n,i)}var Hu=null,ll=null,mm=!1,qu=!1,pm=!1,yi=0;function xs(n){n!==ll&&n.next===null&&(ll===null?Hu=ll=n:ll=ll.next=n),qu=!0,mm||(mm=!0,V2(F2))}function $o(n,i){if(!pm&&qu){pm=!0;do for(var o=!1,u=Hu;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var S=u.suspendedLanes,A=u.pingedLanes;y=(1<<31-Ft(42|n)+1)-1,y&=g&~(S&~A),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(o=!0,Tb(u,y))}else y=kt,y=ke(u,u===rn?y:0),(y&3)===0||vt(u,y)||(o=!0,Tb(u,y));u=u.next}while(o);pm=!1}}function F2(){qu=mm=!1;var n=0;yi!==0&&(J2()&&(n=yi),yi=0);for(var i=Mt(),o=null,u=Hu;u!==null;){var g=u.next,y=Cb(u,i);y===0?(u.next=null,o===null?Hu=g:o.next=g,g===null&&(ll=o)):(o=u,(n!==0||(y&3)!==0)&&(qu=!0)),u=g}$o(n)}function Cb(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var S=31-Ft(y),A=1<<S,I=g[S];I===-1?((A&o)===0||(A&u)!==0)&&(g[S]=ot(A,i)):I<=i&&(n.expiredLanes|=A),y&=~A}if(i=rn,o=kt,o=ke(n,n===i?o:0),u=n.callbackNode,o===0||n===i&&sn===2||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ye(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||vt(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&Ye(u),wr(o)){case 2:case 8:o=st;break;case 32:o=nn;break;case 268435456:o=Sn;break;default:o=nn}return u=Rb.bind(null,n),o=Pe(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&Ye(u),n.callbackPriority=2,n.callbackNode=null,2}function Rb(n,i){var o=n.callbackNode;if(il()&&n.callbackNode!==o)return null;var u=kt;return u=ke(n,n===rn?u:0),u===0?null:(pb(n,u,i),Cb(n,Mt()),n.callbackNode!=null&&n.callbackNode===o?Rb.bind(null,n):null)}function Tb(n,i){if(il())return null;pb(n,i,!0)}function V2(n){tC(function(){(hn&6)!==0?Pe(Be,n):n()})}function gm(){return yi===0&&(yi=jt()),yi}function Mb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ru(""+n)}function Ab(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function Y2(n,i,o,u,g){if(i==="submit"&&o&&o.stateNode===g){var y=Mb((g[Hn]||null).action),S=u.submitter;S&&(i=(i=S[Hn]||null)?Mb(i.formAction):S.getAttribute("formAction"),i!==null&&(y=i,S=null));var A=new lu("action","action",null,u,g);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(yi!==0){var I=S?Ab(g,S):new FormData(g);Sh(o,{pending:!0,data:I,method:g.method,action:y},null,I)}}else typeof y=="function"&&(A.preventDefault(),I=S?Ab(g,S):new FormData(g),Sh(o,{pending:!0,data:I,method:g.method,action:y},y,I))},currentTarget:g}]})}}for(var vm=0;vm<_x.length;vm++){var xm=_x[vm],G2=xm.toLowerCase(),W2=xm[0].toUpperCase()+xm.slice(1);Qr(G2,"on"+W2)}Qr(xx,"onAnimationEnd"),Qr(yx,"onAnimationIteration"),Qr(bx,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(d2,"onTransitionRun"),Qr(f2,"onTransitionStart"),Qr(h2,"onTransitionCancel"),Qr(wx,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bo));function kb(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],g=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var S=u.length-1;0<=S;S--){var A=u[S],I=A.instance,Z=A.currentTarget;if(A=A.listener,I!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=Z;try{y(g)}catch(fe){Tu(fe)}g.currentTarget=null,y=I}else for(S=0;S<u.length;S++){if(A=u[S],I=A.instance,Z=A.currentTarget,A=A.listener,I!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=Z;try{y(g)}catch(fe){Tu(fe)}g.currentTarget=null,y=I}}}}function Ct(n,i){var o=i[Ne];o===void 0&&(o=i[Ne]=new Set);var u=n+"__bubble";o.has(u)||(Db(i,n,2,!1),o.add(u))}function ym(n,i,o){var u=0;i&&(u|=4),Db(o,n,u,i)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function bm(n){if(!n[Fu]){n[Fu]=!0,Lv.forEach(function(o){o!=="selectionchange"&&(X2.has(o)||ym(o,!1,n),ym(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Fu]||(i[Fu]=!0,ym("selectionchange",!1,i))}}function Db(n,i,o,u){switch(n0(i)){case 2:var g=wC;break;case 8:g=jC;break;default:g=Dm}o=g.bind(null,i,o,n),g=void 0,!Hf||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(i,o,{capture:!0,passive:g}):n.addEventListener(i,o,!0):g!==void 0?n.addEventListener(i,o,{passive:g}):n.addEventListener(i,o,!1)}function wm(n,i,o,u,g){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var A=u.stateNode.containerInfo;if(A===g||A.nodeType===8&&A.parentNode===g)break;if(S===4)for(S=u.return;S!==null;){var I=S.tag;if((I===3||I===4)&&(I=S.stateNode.containerInfo,I===g||I.nodeType===8&&I.parentNode===g))return;S=S.return}for(;A!==null;){if(S=Dn(A),S===null)return;if(I=S.tag,I===5||I===6||I===26||I===27){u=y=S;continue e}A=A.parentNode}}u=u.return}Wv(function(){var Z=y,fe=$f(o),we=[];e:{var le=jx.get(n);if(le!==void 0){var de=lu,He=n;switch(n){case"keypress":if(au(o)===0)break e;case"keydown":case"keyup":de=HE;break;case"focusin":He="focus",de=Yf;break;case"focusout":He="blur",de=Yf;break;case"beforeblur":case"afterblur":de=Yf;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Qv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=ME;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=VE;break;case xx:case yx:case bx:de=DE;break;case wx:de=GE;break;case"scroll":case"scrollend":de=RE;break;case"wheel":de=XE;break;case"copy":case"cut":case"paste":de=PE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=Jv;break;case"toggle":case"beforetoggle":de=QE}var at=(i&4)!==0,xn=!at&&(n==="scroll"||n==="scrollend"),ee=at?le!==null?le+"Capture":null:le;at=[];for(var Q=Z,ae;Q!==null;){var ve=Q;if(ae=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||ae===null||ee===null||(ve=ao(Q,ee),ve!=null&&at.push(Ho(Q,ve,ae))),xn)break;Q=Q.return}0<at.length&&(le=new de(le,He,null,o,fe),we.push({event:le,listeners:at}))}}if((i&7)===0){e:{if(le=n==="mouseover"||n==="pointerover",de=n==="mouseout"||n==="pointerout",le&&o!==Uf&&(He=o.relatedTarget||o.fromElement)&&(Dn(He)||He[he]))break e;if((de||le)&&(le=fe.window===fe?fe:(le=fe.ownerDocument)?le.defaultView||le.parentWindow:window,de?(He=o.relatedTarget||o.toElement,de=Z,He=He?Dn(He):null,He!==null&&(xn=U(He),at=He.tag,He!==xn||at!==5&&at!==27&&at!==6)&&(He=null)):(de=null,He=Z),de!==He)){if(at=Qv,ve="onMouseLeave",ee="onMouseEnter",Q="mouse",(n==="pointerout"||n==="pointerover")&&(at=Jv,ve="onPointerLeave",ee="onPointerEnter",Q="pointer"),xn=de==null?le:ca(de),ae=He==null?le:ca(He),le=new at(ve,Q+"leave",de,o,fe),le.target=xn,le.relatedTarget=ae,ve=null,Dn(fe)===Z&&(at=new at(ee,Q+"enter",He,o,fe),at.target=ae,at.relatedTarget=xn,ve=at),xn=ve,de&&He)t:{for(at=de,ee=He,Q=0,ae=at;ae;ae=ol(ae))Q++;for(ae=0,ve=ee;ve;ve=ol(ve))ae++;for(;0<Q-ae;)at=ol(at),Q--;for(;0<ae-Q;)ee=ol(ee),ae--;for(;Q--;){if(at===ee||ee!==null&&at===ee.alternate)break t;at=ol(at),ee=ol(ee)}at=null}else at=null;de!==null&&Ob(we,le,de,at,!1),He!==null&&xn!==null&&Ob(we,xn,He,at,!0)}}e:{if(le=Z?ca(Z):window,de=le.nodeName&&le.nodeName.toLowerCase(),de==="select"||de==="input"&&le.type==="file")var Ie=lx;else if(ax(le))if(ox)Ie=l2;else{Ie=a2;var pt=s2}else de=le.nodeName,!de||de.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?Z&&zf(Z.elementType)&&(Ie=lx):Ie=i2;if(Ie&&(Ie=Ie(n,Z))){ix(we,Ie,o,fe);break e}pt&&pt(n,le,Z),n==="focusout"&&Z&&le.type==="number"&&Z.memoizedProps.value!=null&&If(le,"number",le.value)}switch(pt=Z?ca(Z):window,n){case"focusin":(ax(pt)||pt.contentEditable==="true")&&($i=pt,Zf=Z,mo=null);break;case"focusout":mo=Zf=$i=null;break;case"mousedown":Jf=!0;break;case"contextmenu":case"mouseup":case"dragend":Jf=!1,gx(we,o,fe);break;case"selectionchange":if(u2)break;case"keydown":case"keyup":gx(we,o,fe)}var Fe;if(Wf)e:{switch(n){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Ui?rx(n,o)&&(Xe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Xe="onCompositionStart");Xe&&(ex&&o.locale!=="ko"&&(Ui||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Ui&&(Fe=Xv()):(ua=fe,qf="value"in ua?ua.value:ua.textContent,Ui=!0)),pt=Vu(Z,Xe),0<pt.length&&(Xe=new Zv(Xe,n,null,o,fe),we.push({event:Xe,listeners:pt}),Fe?Xe.data=Fe:(Fe=sx(o),Fe!==null&&(Xe.data=Fe)))),(Fe=JE?e2(n,o):t2(n,o))&&(Xe=Vu(Z,"onBeforeInput"),0<Xe.length&&(pt=new Zv("onBeforeInput","beforeinput",null,o,fe),we.push({event:pt,listeners:Xe}),pt.data=Fe)),Y2(we,n,Z,o,fe)}kb(we,i)})}function Ho(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Vu(n,i){for(var o=i+"Capture",u=[];n!==null;){var g=n,y=g.stateNode;g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=ao(n,o),g!=null&&u.unshift(Ho(n,g,y)),g=ao(n,i),g!=null&&u.push(Ho(n,g,y))),n=n.return}return u}function ol(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Ob(n,i,o,u,g){for(var y=i._reactName,S=[];o!==null&&o!==u;){var A=o,I=A.alternate,Z=A.stateNode;if(A=A.tag,I!==null&&I===u)break;A!==5&&A!==26&&A!==27||Z===null||(I=Z,g?(Z=ao(o,y),Z!=null&&S.unshift(Ho(o,Z,I))):g||(Z=ao(o,y),Z!=null&&S.push(Ho(o,Z,I)))),o=o.return}S.length!==0&&n.push({event:i,listeners:S})}var K2=/\r\n?/g,Q2=/\u0000|\uFFFD/g;function Pb(n){return(typeof n=="string"?n:""+n).replace(K2,`
`).replace(Q2,"")}function Lb(n,i){return i=Pb(i),Pb(n)===i}function Yu(){}function Jt(n,i,o,u,g,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Li(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Li(n,""+u);break;case"className":eu(n,"class",u);break;case"tabIndex":eu(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":eu(n,o,u);break;case"style":Yv(n,u,y);break;case"data":if(i!=="object"){eu(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ru(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&Jt(n,i,"name",g.name,g,null),Jt(n,i,"formEncType",g.formEncType,g,null),Jt(n,i,"formMethod",g.formMethod,g,null),Jt(n,i,"formTarget",g.formTarget,g,null)):(Jt(n,i,"encType",g.encType,g,null),Jt(n,i,"method",g.method,g,null),Jt(n,i,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ru(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Yu);break;case"onScroll":u!=null&&Ct("scroll",n);break;case"onScrollEnd":u!=null&&Ct("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=ru(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Ct("beforetoggle",n),Ct("toggle",n),Jc(n,"popover",u);break;case"xlinkActuate":Ps(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ps(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ps(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ps(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ps(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ps(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ps(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ps(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ps(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Jc(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=EE.get(o)||o,Jc(n,o,u))}}function jm(n,i,o,u,g,y){switch(o){case"style":Yv(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Li(n,u):(typeof u=="number"||typeof u=="bigint")&&Li(n,""+u);break;case"onScroll":u!=null&&Ct("scroll",n);break;case"onScrollEnd":u!=null&&Ct("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Yu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Iv.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),i=o.slice(2,g?o.length-7:void 0),y=n[Hn]||null,y=y!=null?y[o]:null,typeof y=="function"&&n.removeEventListener(i,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,g);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Jc(n,o,u)}}}function Yn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",n),Ct("load",n);var u=!1,g=!1,y;for(y in o)if(o.hasOwnProperty(y)){var S=o[y];if(S!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Jt(n,i,y,S,o,null)}}g&&Jt(n,i,"srcSet",o.srcSet,o,null),u&&Jt(n,i,"src",o.src,o,null);return;case"input":Ct("invalid",n);var A=y=S=g=null,I=null,Z=null;for(u in o)if(o.hasOwnProperty(u)){var fe=o[u];if(fe!=null)switch(u){case"name":g=fe;break;case"type":S=fe;break;case"checked":I=fe;break;case"defaultChecked":Z=fe;break;case"value":y=fe;break;case"defaultValue":A=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(a(137,i));break;default:Jt(n,i,u,fe,o,null)}}Hv(n,y,A,I,Z,S,g,!1),tu(n);return;case"select":Ct("invalid",n),u=S=y=null;for(g in o)if(o.hasOwnProperty(g)&&(A=o[g],A!=null))switch(g){case"value":y=A;break;case"defaultValue":S=A;break;case"multiple":u=A;default:Jt(n,i,g,A,o,null)}i=y,o=S,n.multiple=!!u,i!=null?Pi(n,!!u,i,!1):o!=null&&Pi(n,!!u,o,!0);return;case"textarea":Ct("invalid",n),y=g=u=null;for(S in o)if(o.hasOwnProperty(S)&&(A=o[S],A!=null))switch(S){case"value":u=A;break;case"defaultValue":g=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:Jt(n,i,S,A,o,null)}Fv(n,u,g,y),tu(n);return;case"option":for(I in o)if(o.hasOwnProperty(I)&&(u=o[I],u!=null))switch(I){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Jt(n,i,I,u,o,null)}return;case"dialog":Ct("cancel",n),Ct("close",n);break;case"iframe":case"object":Ct("load",n);break;case"video":case"audio":for(u=0;u<Bo.length;u++)Ct(Bo[u],n);break;case"image":Ct("error",n),Ct("load",n);break;case"details":Ct("toggle",n);break;case"embed":case"source":case"link":Ct("error",n),Ct("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(u=o[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Jt(n,i,Z,u,o,null)}return;default:if(zf(i)){for(fe in o)o.hasOwnProperty(fe)&&(u=o[fe],u!==void 0&&jm(n,i,fe,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&Jt(n,i,A,u,o,null))}function Z2(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,S=null,A=null,I=null,Z=null,fe=null;for(de in o){var we=o[de];if(o.hasOwnProperty(de)&&we!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":I=we;default:u.hasOwnProperty(de)||Jt(n,i,de,null,u,we)}}for(var le in u){var de=u[le];if(we=o[le],u.hasOwnProperty(le)&&(de!=null||we!=null))switch(le){case"type":y=de;break;case"name":g=de;break;case"checked":Z=de;break;case"defaultChecked":fe=de;break;case"value":S=de;break;case"defaultValue":A=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(a(137,i));break;default:de!==we&&Jt(n,i,le,de,u,we)}}Lf(n,S,A,I,Z,fe,y,g);return;case"select":de=S=A=le=null;for(y in o)if(I=o[y],o.hasOwnProperty(y)&&I!=null)switch(y){case"value":break;case"multiple":de=I;default:u.hasOwnProperty(y)||Jt(n,i,y,null,u,I)}for(g in u)if(y=u[g],I=o[g],u.hasOwnProperty(g)&&(y!=null||I!=null))switch(g){case"value":le=y;break;case"defaultValue":A=y;break;case"multiple":S=y;default:y!==I&&Jt(n,i,g,y,u,I)}i=A,o=S,u=de,le!=null?Pi(n,!!o,le,!1):!!u!=!!o&&(i!=null?Pi(n,!!o,i,!0):Pi(n,!!o,o?[]:"",!1));return;case"textarea":de=le=null;for(A in o)if(g=o[A],o.hasOwnProperty(A)&&g!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Jt(n,i,A,null,u,g)}for(S in u)if(g=u[S],y=o[S],u.hasOwnProperty(S)&&(g!=null||y!=null))switch(S){case"value":le=g;break;case"defaultValue":de=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(a(91));break;default:g!==y&&Jt(n,i,S,g,u,y)}qv(n,le,de);return;case"option":for(var He in o)if(le=o[He],o.hasOwnProperty(He)&&le!=null&&!u.hasOwnProperty(He))switch(He){case"selected":n.selected=!1;break;default:Jt(n,i,He,null,u,le)}for(I in u)if(le=u[I],de=o[I],u.hasOwnProperty(I)&&le!==de&&(le!=null||de!=null))switch(I){case"selected":n.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:Jt(n,i,I,le,u,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in o)le=o[at],o.hasOwnProperty(at)&&le!=null&&!u.hasOwnProperty(at)&&Jt(n,i,at,null,u,le);for(Z in u)if(le=u[Z],de=o[Z],u.hasOwnProperty(Z)&&le!==de&&(le!=null||de!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(137,i));break;default:Jt(n,i,Z,le,u,de)}return;default:if(zf(i)){for(var xn in o)le=o[xn],o.hasOwnProperty(xn)&&le!==void 0&&!u.hasOwnProperty(xn)&&jm(n,i,xn,void 0,u,le);for(fe in u)le=u[fe],de=o[fe],!u.hasOwnProperty(fe)||le===de||le===void 0&&de===void 0||jm(n,i,fe,le,u,de);return}}for(var ee in o)le=o[ee],o.hasOwnProperty(ee)&&le!=null&&!u.hasOwnProperty(ee)&&Jt(n,i,ee,null,u,le);for(we in u)le=u[we],de=o[we],!u.hasOwnProperty(we)||le===de||le==null&&de==null||Jt(n,i,we,le,u,de)}var _m=null,Nm=null;function Gu(n){return n.nodeType===9?n:n.ownerDocument}function Ib(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zb(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Sm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Em=null;function J2(){var n=window.event;return n&&n.type==="popstate"?n===Em?!1:(Em=n,!0):(Em=null,!1)}var Ub=typeof setTimeout=="function"?setTimeout:void 0,eC=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,tC=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(n){return $b.resolve(null).then(n).catch(nC)}:Ub;function nC(n){setTimeout(function(){throw n})}function Cm(n,i){var o=i,u=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(u===0){n.removeChild(g),Ko(i);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=g}while(o);Ko(i)}function Rm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Rm(o),dr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function rC(n,i,o,u){for(;n.nodeType===1;){var g=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[qn])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==g.rel||n.getAttribute("href")!==(g.href==null?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=es(n.nextSibling),n===null)break}return null}function sC(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=es(n.nextSibling),n===null))return null;return n}function es(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}function Bb(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function Hb(n,i,o){switch(i=Gu(o),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}var Vr=new Map,qb=new Set;function Wu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var Ks=D.d;D.d={f:aC,r:iC,D:lC,C:oC,L:cC,m:uC,X:fC,S:dC,M:hC};function aC(){var n=Ks.f(),i=$u();return n||i}function iC(n){var i=Ot(n);i!==null&&i.tag===5&&i.type==="form"?gy(i):Ks.r(n)}var cl=typeof document>"u"?null:document;function Fb(n,i,o){var u=cl;if(u&&typeof i=="string"&&i){var g=Pr(i);g='link[rel="'+n+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),qb.has(g)||(qb.add(g),n={rel:n,crossOrigin:o,href:i},u.querySelector(g)===null&&(i=u.createElement("link"),Yn(i,"link",n),bn(i),u.head.appendChild(i)))}}function lC(n){Ks.D(n),Fb("dns-prefetch",n,null)}function oC(n,i){Ks.C(n,i),Fb("preconnect",n,i)}function cC(n,i,o){Ks.L(n,i,o);var u=cl;if(u&&n&&i){var g='link[rel="preload"][as="'+Pr(i)+'"]';i==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Pr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Pr(o.imageSizes)+'"]')):g+='[href="'+Pr(n)+'"]';var y=g;switch(i){case"style":y=ul(n);break;case"script":y=dl(n)}Vr.has(y)||(n=W({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Vr.set(y,n),u.querySelector(g)!==null||i==="style"&&u.querySelector(qo(y))||i==="script"&&u.querySelector(Fo(y))||(i=u.createElement("link"),Yn(i,"link",n),bn(i),u.head.appendChild(i)))}}function uC(n,i){Ks.m(n,i);var o=cl;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Pr(u)+'"][href="'+Pr(n)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=dl(n)}if(!Vr.has(y)&&(n=W({rel:"modulepreload",href:n},i),Vr.set(y,n),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Fo(y)))return}u=o.createElement("link"),Yn(u,"link",n),bn(u),o.head.appendChild(u)}}}function dC(n,i,o){Ks.S(n,i,o);var u=cl;if(u&&n){var g=Ds(u).hoistableStyles,y=ul(n);i=i||"default";var S=g.get(y);if(!S){var A={loading:0,preload:null};if(S=u.querySelector(qo(y)))A.loading=5;else{n=W({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Vr.get(y))&&Tm(n,o);var I=S=u.createElement("link");bn(I),Yn(I,"link",n),I._p=new Promise(function(Z,fe){I.onload=Z,I.onerror=fe}),I.addEventListener("load",function(){A.loading|=1}),I.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Xu(S,i,u)}S={type:"stylesheet",instance:S,count:1,state:A},g.set(y,S)}}}function fC(n,i){Ks.X(n,i);var o=cl;if(o&&n){var u=Ds(o).hoistableScripts,g=dl(n),y=u.get(g);y||(y=o.querySelector(Fo(g)),y||(n=W({src:n,async:!0},i),(i=Vr.get(g))&&Mm(n,i),y=o.createElement("script"),bn(y),Yn(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function hC(n,i){Ks.M(n,i);var o=cl;if(o&&n){var u=Ds(o).hoistableScripts,g=dl(n),y=u.get(g);y||(y=o.querySelector(Fo(g)),y||(n=W({src:n,async:!0,type:"module"},i),(i=Vr.get(g))&&Mm(n,i),y=o.createElement("script"),bn(y),Yn(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Vb(n,i,o,u){var g=(g=lt.current)?Wu(g):null;if(!g)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=ul(o.href),o=Ds(g).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=ul(o.href);var y=Ds(g).hoistableStyles,S=y.get(n);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,S),(y=g.querySelector(qo(n)))&&!y._p&&(S.instance=y,S.state.loading=5),Vr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Vr.set(n,o),y||mC(g,n,o,S.state))),i&&u===null)throw Error(a(528,""));return S}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=dl(o),o=Ds(g).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function ul(n){return'href="'+Pr(n)+'"'}function qo(n){return'link[rel="stylesheet"]['+n+"]"}function Yb(n){return W({},n,{"data-precedence":n.precedence,precedence:null})}function mC(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Yn(i,"link",o),bn(i),n.head.appendChild(i))}function dl(n){return'[src="'+Pr(n)+'"]'}function Fo(n){return"script[async]"+n}function Gb(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Pr(o.href)+'"]');if(u)return i.instance=u,bn(u),u;var g=W({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),bn(u),Yn(u,"style",g),Xu(u,o.precedence,n),i.instance=u;case"stylesheet":g=ul(o.href);var y=n.querySelector(qo(g));if(y)return i.state.loading|=4,i.instance=y,bn(y),y;u=Yb(o),(g=Vr.get(g))&&Tm(u,g),y=(n.ownerDocument||n).createElement("link"),bn(y);var S=y;return S._p=new Promise(function(A,I){S.onload=A,S.onerror=I}),Yn(y,"link",u),i.state.loading|=4,Xu(y,o.precedence,n),i.instance=y;case"script":return y=dl(o.src),(g=n.querySelector(Fo(y)))?(i.instance=g,bn(g),g):(u=o,(g=Vr.get(y))&&(u=W({},o),Mm(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),bn(g),Yn(g,"link",u),n.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Xu(u,o.precedence,n));return i.instance}function Xu(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,S=0;S<u.length;S++){var A=u[S];if(A.dataset.precedence===i)y=A;else if(y!==g)break}y?y.parentNode.insertBefore(n,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Tm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Mm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Ku=null;function Wb(n,i,o){if(Ku===null){var u=new Map,g=Ku=new Map;g.set(o,u)}else g=Ku,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),g=0;g<o.length;g++){var y=o[g];if(!(y[qn]||y[pn]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(i)||"";S=n+S;var A=u.get(S);A?A.push(y):u.set(S,[y])}}return u}function Xb(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function pC(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Kb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Vo=null;function gC(){}function vC(n,i,o){if(Vo===null)throw Error(a(475));var u=Vo;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=ul(o.href),y=n.querySelector(qo(g));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Qu.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=y,bn(y);return}y=n.ownerDocument||n,o=Yb(o),(g=Vr.get(g))&&Tm(o,g),y=y.createElement("link"),bn(y);var S=y;S._p=new Promise(function(A,I){S.onload=A,S.onerror=I}),Yn(y,"link",o),i.instance=y}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Qu.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function xC(){if(Vo===null)throw Error(a(475));var n=Vo;return n.stylesheets&&n.count===0&&Am(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&Am(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Qu(){if(this.count--,this.count===0){if(this.stylesheets)Am(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Zu=null;function Am(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Zu=new Map,i.forEach(yC,n),Zu=null,Qu.call(n))}function yC(n,i){if(!(i.state.loading&4)){var o=Zu.get(n);if(o)var u=o.get(null);else{o=new Map,Zu.set(n,o);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var S=g[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),u=S)}u&&o.set(null,u)}g=i.instance,S=g.getAttribute("data-precedence"),y=o.get(S)||u,y===u&&o.set(null,g),o.set(S,g),this.count++,u=Qu.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),i.state.loading|=4}}var Yo={$$typeof:w,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function bC(n,i,o,u,g,y,S,A){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=It(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=It(0),this.hiddenUpdates=It(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Qb(n,i,o,u,g,y,S,A,I,Z,fe,we){return n=new bC(n,i,o,S,A,I,Z,we),i=1,y===!0&&(i|=24),y=qr(3,null,null,i),n.current=y,y.stateNode=n,i=ch(),i.refCount++,n.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},qh(y),n}function Zb(n){return n?(n=qi,n):qi}function Jb(n,i,o,u,g,y){g=Zb(g),u.context===null?u.context=g:u.pendingContext=g,u=xa(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=ya(n,u,i),o!==null&&(ar(o,n,i),To(o,n,i))}function e0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function km(n,i){e0(n,i),(n=n.alternate)&&e0(n,i)}function t0(n){if(n.tag===13){var i=da(n,67108864);i!==null&&ar(i,n,67108864),km(n,67108864)}}var Ju=!0;function wC(n,i,o,u){var g=G.T;G.T=null;var y=D.p;try{D.p=2,Dm(n,i,o,u)}finally{D.p=y,G.T=g}}function jC(n,i,o,u){var g=G.T;G.T=null;var y=D.p;try{D.p=8,Dm(n,i,o,u)}finally{D.p=y,G.T=g}}function Dm(n,i,o,u){if(Ju){var g=Om(u);if(g===null)wm(n,i,u,ed,o),r0(n,u);else if(NC(g,n,i,o,u))u.stopPropagation();else if(r0(n,u),i&4&&-1<_C.indexOf(n)){for(;g!==null;){var y=Ot(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=ct(y.pendingLanes);if(S!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var I=1<<31-Ft(S);A.entanglements[1]|=I,S&=~I}xs(y),(hn&6)===0&&(Iu=Mt()+500,$o(0))}}break;case 13:A=da(y,2),A!==null&&ar(A,y,2),$u(),km(y,2)}if(y=Om(u),y===null&&wm(n,i,u,ed,o),y===g)break;g=y}g!==null&&u.stopPropagation()}else wm(n,i,u,null,o)}}function Om(n){return n=$f(n),Pm(n)}var ed=null;function Pm(n){if(ed=null,n=Dn(n),n!==null){var i=U(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=J(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return ed=n,null}function n0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qt()){case Be:return 2;case st:return 8;case nn:case Mn:return 32;case Sn:return 268435456;default:return 32}default:return 32}}var Lm=!1,Ea=null,Ca=null,Ra=null,Go=new Map,Wo=new Map,Ta=[],_C="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r0(n,i){switch(n){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":Go.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(i.pointerId)}}function Xo(n,i,o,u,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},i!==null&&(i=Ot(i),i!==null&&t0(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),n)}function NC(n,i,o,u,g){switch(i){case"focusin":return Ea=Xo(Ea,n,i,o,u,g),!0;case"dragenter":return Ca=Xo(Ca,n,i,o,u,g),!0;case"mouseover":return Ra=Xo(Ra,n,i,o,u,g),!0;case"pointerover":var y=g.pointerId;return Go.set(y,Xo(Go.get(y)||null,n,i,o,u,g)),!0;case"gotpointercapture":return y=g.pointerId,Wo.set(y,Xo(Wo.get(y)||null,n,i,o,u,g)),!0}return!1}function s0(n){var i=Dn(n.target);if(i!==null){var o=U(i);if(o!==null){if(i=o.tag,i===13){if(i=J(o),i!==null){n.blockedOn=i,kn(n.priority,function(){if(o.tag===13){var u=Er(),g=da(o,u);g!==null&&ar(g,o,u),km(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function td(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Om(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Uf=u,o.target.dispatchEvent(u),Uf=null}else return i=Ot(o),i!==null&&t0(i),n.blockedOn=o,!1;i.shift()}return!0}function a0(n,i,o){td(n)&&o.delete(i)}function SC(){Lm=!1,Ea!==null&&td(Ea)&&(Ea=null),Ca!==null&&td(Ca)&&(Ca=null),Ra!==null&&td(Ra)&&(Ra=null),Go.forEach(a0),Wo.forEach(a0)}function nd(n,i){n.blockedOn===i&&(n.blockedOn=null,Lm||(Lm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,SC)))}var rd=null;function i0(n){rd!==n&&(rd=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){rd===n&&(rd=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],g=n[i+2];if(typeof u!="function"){if(Pm(u||o)===null)continue;break}var y=Ot(o);y!==null&&(n.splice(i,3),i-=3,Sh(y,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function Ko(n){function i(I){return nd(I,n)}Ea!==null&&nd(Ea,n),Ca!==null&&nd(Ca,n),Ra!==null&&nd(Ra,n),Go.forEach(i),Wo.forEach(i);for(var o=0;o<Ta.length;o++){var u=Ta[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ta.length&&(o=Ta[0],o.blockedOn===null);)s0(o),o.blockedOn===null&&Ta.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],y=o[u+1],S=g[Hn]||null;if(typeof y=="function")S||i0(o);else if(S){var A=null;if(y&&y.hasAttribute("formAction")){if(g=y,S=y[Hn]||null)A=S.formAction;else if(Pm(g)!==null)continue}else A=S.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),i0(o)}}}function Im(n){this._internalRoot=n}sd.prototype.render=Im.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=Er();Jb(o,u,n,i,null,null)},sd.prototype.unmount=Im.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;n.tag===0&&il(),Jb(n.current,2,null,n,null,null),$u(),i[he]=null}};function sd(n){this._internalRoot=n}sd.prototype.unstable_scheduleHydration=function(n){if(n){var i=An();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Ta.length&&i!==0&&i<Ta[o].priority;o++);Ta.splice(o,0,n),o===0&&s0(n)}};var l0=t.version;if(l0!=="19.0.0")throw Error(a(527,l0,"19.0.0"));D.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=P(i),n=n!==null?F(n):null,n=n===null?null:n.stateNode,n};var EC={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:G,findFiberByHostInstance:Dn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{Te=ad.inject(EC),$e=ad}catch{}}return Zo.createRoot=function(n,i){if(!l(n))throw Error(a(299));var o=!1,u="",g=Ny,y=Sy,S=Ey,A=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=Qb(n,1,!1,null,null,o,u,g,y,S,A,null),n[he]=i.current,bm(n.nodeType===8?n.parentNode:n),new Im(i)},Zo.hydrateRoot=function(n,i,o){if(!l(n))throw Error(a(299));var u=!1,g="",y=Ny,S=Sy,A=Ey,I=null,Z=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(I=o.unstable_transitionCallbacks),o.formState!==void 0&&(Z=o.formState)),i=Qb(n,1,!0,i,o??null,u,g,y,S,A,I,Z),i.context=Zb(null),o=i.current,u=Er(),g=xa(u),g.callback=null,ya(o,g,u),i.current.lanes=u,mt(i,u),xs(i),n[he]=i.current,bm(n),new sd(i)},Zo.version="19.0.0",Zo}var v0;function zC(){if(v0)return $m.exports;v0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),$m.exports=IC(),$m.exports}var UC=zC();const $C=Xd(UC);var Jo={},x0;function BC(){if(x0)return Jo;x0=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.parse=d,Jo.serialize=p;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,c=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function d(b,w){const j=new c,N=b.length;if(N<2)return j;const _=(w==null?void 0:w.decode)||v;let C=0;do{const E=b.indexOf("=",C);if(E===-1)break;const R=b.indexOf(";",C),M=R===-1?N:R;if(E>M){C=b.lastIndexOf(";",E-1)+1;continue}const T=f(b,C,E),L=h(b,E,T),H=b.slice(T,L);if(j[H]===void 0){let q=f(b,E+1,M),G=h(b,M,q);const W=_(b.slice(q,G));j[H]=W}C=M+1}while(C<N);return j}function f(b,w,j){do{const N=b.charCodeAt(w);if(N!==32&&N!==9)return w}while(++w<j);return j}function h(b,w,j){for(;w>j;){const N=b.charCodeAt(--w);if(N!==32&&N!==9)return w+1}return j}function p(b,w,j){const N=(j==null?void 0:j.encode)||encodeURIComponent;if(!e.test(b))throw new TypeError(`argument name is invalid: ${b}`);const _=N(w);if(!t.test(_))throw new TypeError(`argument val is invalid: ${w}`);let C=b+"="+_;if(!j)return C;if(j.maxAge!==void 0){if(!Number.isInteger(j.maxAge))throw new TypeError(`option maxAge is invalid: ${j.maxAge}`);C+="; Max-Age="+j.maxAge}if(j.domain){if(!r.test(j.domain))throw new TypeError(`option domain is invalid: ${j.domain}`);C+="; Domain="+j.domain}if(j.path){if(!a.test(j.path))throw new TypeError(`option path is invalid: ${j.path}`);C+="; Path="+j.path}if(j.expires){if(!x(j.expires)||!Number.isFinite(j.expires.valueOf()))throw new TypeError(`option expires is invalid: ${j.expires}`);C+="; Expires="+j.expires.toUTCString()}if(j.httpOnly&&(C+="; HttpOnly"),j.secure&&(C+="; Secure"),j.partitioned&&(C+="; Partitioned"),j.priority)switch(typeof j.priority=="string"?j.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${j.priority}`)}if(j.sameSite)switch(typeof j.sameSite=="string"?j.sameSite.toLowerCase():j.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${j.sameSite}`)}return C}function v(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function x(b){return l.call(b)==="[object Date]"}return Jo}BC();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var y0="popstate";function HC(e={}){function t(a,l){let{pathname:c,search:d,hash:f}=a.location;return Cp("",{pathname:c,search:d,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(a,l){return typeof l=="string"?l:pc(l)}return FC(t,r,null,e)}function un(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function rs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function qC(){return Math.random().toString(36).substring(2,10)}function b0(e,t){return{usr:e.state,key:e.key,idx:t}}function Cp(e,t,r=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Vl(t):t,state:r,key:t&&t.key||a||qC()}}function pc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function FC(e,t,r,a={}){let{window:l=document.defaultView,v5Compat:c=!1}=a,d=l.history,f="POP",h=null,p=v();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function v(){return(d.state||{idx:null}).idx}function x(){f="POP";let _=v(),C=_==null?null:_-p;p=_,h&&h({action:f,location:N.location,delta:C})}function b(_,C){f="PUSH";let E=Cp(N.location,_,C);p=v()+1;let R=b0(E,p),M=N.createHref(E);try{d.pushState(R,"",M)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;l.location.assign(M)}c&&h&&h({action:f,location:N.location,delta:1})}function w(_,C){f="REPLACE";let E=Cp(N.location,_,C);p=v();let R=b0(E,p),M=N.createHref(E);d.replaceState(R,"",M),c&&h&&h({action:f,location:N.location,delta:0})}function j(_){let C=l.location.origin!=="null"?l.location.origin:l.location.href,E=typeof _=="string"?_:pc(_);return E=E.replace(/ $/,"%20"),un(C,`No window.location.(origin|href) available to create URL for href: ${E}`),new URL(E,C)}let N={get action(){return f},get location(){return e(l,d)},listen(_){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(y0,x),h=_,()=>{l.removeEventListener(y0,x),h=null}},createHref(_){return t(l,_)},createURL:j,encodeLocation(_){let C=j(_);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:b,replace:w,go(_){return d.go(_)}};return N}function oj(e,t,r="/"){return VC(e,t,r,!1)}function VC(e,t,r,a){let l=typeof t=="string"?Vl(t):t,c=ta(l.pathname||"/",r);if(c==null)return null;let d=cj(e);YC(d);let f=null;for(let h=0;f==null&&h<d.length;++h){let p=rR(c);f=tR(d[h],p,a)}return f}function cj(e,t=[],r=[],a=""){let l=(c,d,f)=>{let h={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};h.relativePath.startsWith("/")&&(un(h.relativePath.startsWith(a),`Absolute route path "${h.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(a.length));let p=Js([a,h.relativePath]),v=r.concat(h);c.children&&c.children.length>0&&(un(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),cj(c.children,t,v,p)),!(c.path==null&&!c.index)&&t.push({path:p,score:JC(p,c.index),routesMeta:v})};return e.forEach((c,d)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))l(c,d);else for(let h of uj(c.path))l(c,d,h)}),t}function uj(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,l=r.endsWith("?"),c=r.replace(/\?$/,"");if(a.length===0)return l?[c,""]:[c];let d=uj(a.join("/")),f=[];return f.push(...d.map(h=>h===""?c:[c,h].join("/"))),l&&f.push(...d),f.map(h=>e.startsWith("/")&&h===""?"/":h)}function YC(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:eR(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var GC=/^:[\w-]+$/,WC=3,XC=2,KC=1,QC=10,ZC=-2,w0=e=>e==="*";function JC(e,t){let r=e.split("/"),a=r.length;return r.some(w0)&&(a+=ZC),t&&(a+=XC),r.filter(l=>!w0(l)).reduce((l,c)=>l+(GC.test(c)?WC:c===""?KC:QC),a)}function eR(e,t){return e.length===t.length&&e.slice(0,-1).every((a,l)=>a===t[l])?e[e.length-1]-t[t.length-1]:0}function tR(e,t,r=!1){let{routesMeta:a}=e,l={},c="/",d=[];for(let f=0;f<a.length;++f){let h=a[f],p=f===a.length-1,v=c==="/"?t:t.slice(c.length)||"/",x=Ad({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},v),b=h.route;if(!x&&p&&r&&!a[a.length-1].route.index&&(x=Ad({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},v)),!x)return null;Object.assign(l,x.params),d.push({params:l,pathname:Js([c,x.pathname]),pathnameBase:lR(Js([c,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(c=Js([c,x.pathnameBase]))}return d}function Ad(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=nR(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let c=l[0],d=c.replace(/(.)\/+$/,"$1"),f=l.slice(1);return{params:a.reduce((p,{paramName:v,isOptional:x},b)=>{if(v==="*"){let j=f[b]||"";d=c.slice(0,c.length-j.length).replace(/(.)\/+$/,"$1")}const w=f[b];return x&&!w?p[v]=void 0:p[v]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:d,pattern:e}}function nR(e,t=!1,r=!0){rs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,h)=>(a.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),a]}function rR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return rs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ta(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function sR(e,t="/"){let{pathname:r,search:a="",hash:l=""}=typeof e=="string"?Vl(e):e;return{pathname:r?r.startsWith("/")?r:aR(r,t):t,search:oR(a),hash:cR(l)}}function aR(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function Fm(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iR(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function cg(e){let t=iR(e);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function ug(e,t,r,a=!1){let l;typeof e=="string"?l=Vl(e):(l={...e},un(!l.pathname||!l.pathname.includes("?"),Fm("?","pathname","search",l)),un(!l.pathname||!l.pathname.includes("#"),Fm("#","pathname","hash",l)),un(!l.search||!l.search.includes("#"),Fm("#","search","hash",l)));let c=e===""||l.pathname==="",d=c?"/":l.pathname,f;if(d==null)f=r;else{let x=t.length-1;if(!a&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),x-=1;l.pathname=b.join("/")}f=x>=0?t[x]:"/"}let h=sR(l,f),p=d&&d!=="/"&&d.endsWith("/"),v=(c||d===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(p||v)&&(h.pathname+="/"),h}var Js=e=>e.join("/").replace(/\/\/+/g,"/"),lR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function uR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var dj=["POST","PUT","PATCH","DELETE"];new Set(dj);var dR=["GET",...dj];new Set(dR);var Yl=m.createContext(null);Yl.displayName="DataRouter";var Kd=m.createContext(null);Kd.displayName="DataRouterState";var fj=m.createContext({isTransitioning:!1});fj.displayName="ViewTransition";var fR=m.createContext(new Map);fR.displayName="Fetchers";var hR=m.createContext(null);hR.displayName="Await";var fs=m.createContext(null);fs.displayName="Navigation";var Rc=m.createContext(null);Rc.displayName="Location";var Kr=m.createContext({outlet:null,matches:[],isDataRoute:!1});Kr.displayName="Route";var dg=m.createContext(null);dg.displayName="RouteError";function mR(e,{relative:t}={}){un(Gl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=m.useContext(fs),{hash:l,pathname:c,search:d}=Tc(e,{relative:t}),f=c;return r!=="/"&&(f=c==="/"?r:Js([r,c])),a.createHref({pathname:f,search:d,hash:l})}function Gl(){return m.useContext(Rc)!=null}function sa(){return un(Gl(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(Rc).location}var hj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mj(e){m.useContext(fs).static||m.useLayoutEffect(e)}function or(){let{isDataRoute:e}=m.useContext(Kr);return e?TR():pR()}function pR(){un(Gl(),"useNavigate() may be used only in the context of a <Router> component.");let e=m.useContext(Yl),{basename:t,navigator:r}=m.useContext(fs),{matches:a}=m.useContext(Kr),{pathname:l}=sa(),c=JSON.stringify(cg(a)),d=m.useRef(!1);return mj(()=>{d.current=!0}),m.useCallback((h,p={})=>{if(rs(d.current,hj),!d.current)return;if(typeof h=="number"){r.go(h);return}let v=ug(h,JSON.parse(c),l,p.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:Js([t,v.pathname])),(p.replace?r.replace:r.push)(v,p.state,p)},[t,r,c,l,e])}var gR=m.createContext(null);function vR(e){let t=m.useContext(Kr).outlet;return t&&m.createElement(gR.Provider,{value:e},t)}function yr(){let{matches:e}=m.useContext(Kr),t=e[e.length-1];return t?t.params:{}}function Tc(e,{relative:t}={}){let{matches:r}=m.useContext(Kr),{pathname:a}=sa(),l=JSON.stringify(cg(r));return m.useMemo(()=>ug(e,JSON.parse(l),a,t==="path"),[e,l,a,t])}function xR(e,t){return pj(e,t)}function pj(e,t,r,a){var E;un(Gl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l,static:c}=m.useContext(fs),{matches:d}=m.useContext(Kr),f=d[d.length-1],h=f?f.params:{},p=f?f.pathname:"/",v=f?f.pathnameBase:"/",x=f&&f.route;{let R=x&&x.path||"";gj(p,!x||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let b=sa(),w;if(t){let R=typeof t=="string"?Vl(t):t;un(v==="/"||((E=R.pathname)==null?void 0:E.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${R.pathname}" was given in the \`location\` prop.`),w=R}else w=b;let j=w.pathname||"/",N=j;if(v!=="/"){let R=v.replace(/^\//,"").split("/");N="/"+j.replace(/^\//,"").split("/").slice(R.length).join("/")}let _=!c&&r&&r.matches&&r.matches.length>0?r.matches:oj(e,{pathname:N});rs(x||_!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),rs(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=_R(_&&_.map(R=>Object.assign({},R,{params:Object.assign({},h,R.params),pathname:Js([v,l.encodeLocation?l.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?v:Js([v,l.encodeLocation?l.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),d,r,a);return t&&C?m.createElement(Rc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},C):C}function yR(){let e=RR(),t=uR(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=m.createElement(m.Fragment,null,m.createElement("p",null,"💿 Hey developer 👋"),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:c},"ErrorBoundary")," or"," ",m.createElement("code",{style:c},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:l},r):null,d)}var bR=m.createElement(yR,null),wR=class extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?m.createElement(Kr.Provider,{value:this.props.routeContext},m.createElement(dg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jR({routeContext:e,match:t,children:r}){let a=m.useContext(Yl);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),m.createElement(Kr.Provider,{value:e},r)}function _R(e,t=[],r=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,c=r==null?void 0:r.errors;if(c!=null){let h=l.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);un(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let d=!1,f=-1;if(r)for(let h=0;h<l.length;h++){let p=l[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:v,errors:x}=r,b=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||b){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,p,v)=>{let x,b=!1,w=null,j=null;r&&(x=c&&p.route.id?c[p.route.id]:void 0,w=p.route.errorElement||bR,d&&(f<0&&v===0?(gj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,j=null):f===v&&(b=!0,j=p.route.hydrateFallbackElement||null)));let N=t.concat(l.slice(0,v+1)),_=()=>{let C;return x?C=w:b?C=j:p.route.Component?C=m.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,m.createElement(jR,{match:p,routeContext:{outlet:h,matches:N,isDataRoute:r!=null},children:C})};return r&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?m.createElement(wR,{location:r.location,revalidation:r.revalidation,component:w,error:x,children:_(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):_()},null)}function fg(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NR(e){let t=m.useContext(Yl);return un(t,fg(e)),t}function SR(e){let t=m.useContext(Kd);return un(t,fg(e)),t}function ER(e){let t=m.useContext(Kr);return un(t,fg(e)),t}function hg(e){let t=ER(e),r=t.matches[t.matches.length-1];return un(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function CR(){return hg("useRouteId")}function RR(){var a;let e=m.useContext(dg),t=SR("useRouteError"),r=hg("useRouteError");return e!==void 0?e:(a=t.errors)==null?void 0:a[r]}function TR(){let{router:e}=NR("useNavigate"),t=hg("useNavigate"),r=m.useRef(!1);return mj(()=>{r.current=!0}),m.useCallback(async(l,c={})=>{rs(r.current,hj),r.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...c}))},[e,t])}var j0={};function gj(e,t,r){!t&&!j0[e]&&(j0[e]=!0,rs(!1,r))}m.memo(MR);function MR({routes:e,future:t,state:r}){return pj(e,void 0,r,t)}function vj({to:e,replace:t,state:r,relative:a}){un(Gl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=m.useContext(fs);rs(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=m.useContext(Kr),{pathname:d}=sa(),f=or(),h=ug(e,cg(c),d,a==="path"),p=JSON.stringify(h);return m.useEffect(()=>{f(JSON.parse(p),{replace:t,state:r,relative:a})},[f,p,a,t,r]),null}function xj(e){return vR(e.context)}function Pt(e){un(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function AR({basename:e="/",children:t=null,location:r,navigationType:a="POP",navigator:l,static:c=!1}){un(!Gl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),f=m.useMemo(()=>({basename:d,navigator:l,static:c,future:{}}),[d,l,c]);typeof r=="string"&&(r=Vl(r));let{pathname:h="/",search:p="",hash:v="",state:x=null,key:b="default"}=r,w=m.useMemo(()=>{let j=ta(h,d);return j==null?null:{location:{pathname:j,search:p,hash:v,state:x,key:b},navigationType:a}},[d,h,p,v,x,b,a]);return rs(w!=null,`<Router basename="${d}"> is not able to match the URL "${h}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:m.createElement(fs.Provider,{value:f},m.createElement(Rc.Provider,{children:t,value:w}))}function kR({children:e,location:t}){return xR(Rp(e),t)}function Rp(e,t=[]){let r=[];return m.Children.forEach(e,(a,l)=>{if(!m.isValidElement(a))return;let c=[...t,l];if(a.type===m.Fragment){r.push.apply(r,Rp(a.props.children,c));return}un(a.type===Pt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),un(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Rp(a.props.children,c)),r.push(d)}),r}var _d="get",Nd="application/x-www-form-urlencoded";function Qd(e){return e!=null&&typeof e.tagName=="string"}function DR(e){return Qd(e)&&e.tagName.toLowerCase()==="button"}function OR(e){return Qd(e)&&e.tagName.toLowerCase()==="form"}function PR(e){return Qd(e)&&e.tagName.toLowerCase()==="input"}function LR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function IR(e,t){return e.button===0&&(!t||t==="_self")&&!LR(e)}var id=null;function zR(){if(id===null)try{new FormData(document.createElement("form"),0),id=!1}catch{id=!0}return id}var UR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vm(e){return e!=null&&!UR.has(e)?(rs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nd}"`),null):e}function $R(e,t){let r,a,l,c,d;if(OR(e)){let f=e.getAttribute("action");a=f?ta(f,t):null,r=e.getAttribute("method")||_d,l=Vm(e.getAttribute("enctype"))||Nd,c=new FormData(e)}else if(DR(e)||PR(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||f.getAttribute("action");if(a=h?ta(h,t):null,r=e.getAttribute("formmethod")||f.getAttribute("method")||_d,l=Vm(e.getAttribute("formenctype"))||Vm(f.getAttribute("enctype"))||Nd,c=new FormData(f,e),!zR()){let{name:p,type:v,value:x}=e;if(v==="image"){let b=p?`${p}.`:"";c.append(`${b}x`,"0"),c.append(`${b}y`,"0")}else p&&c.append(p,x)}}else{if(Qd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=_d,a=null,l=Nd,d=e}return c&&l==="text/plain"&&(d=c,c=void 0),{action:a,method:r.toLowerCase(),encType:l,formData:c,body:d}}function mg(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function BR(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HR(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function qR(e,t,r){let a=await Promise.all(e.map(async l=>{let c=t.routes[l.route.id];if(c){let d=await BR(c,r);return d.links?d.links():[]}return[]}));return GR(a.flat(1).filter(HR).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function _0(e,t,r,a,l,c){let d=(h,p)=>r[p]?h.route.id!==r[p].route.id:!0,f=(h,p)=>{var v;return r[p].pathname!==h.pathname||((v=r[p].route.path)==null?void 0:v.endsWith("*"))&&r[p].params["*"]!==h.params["*"]};return c==="assets"?t.filter((h,p)=>d(h,p)||f(h,p)):c==="data"?t.filter((h,p)=>{var x;let v=a.routes[h.route.id];if(!v||!v.hasLoader)return!1;if(d(h,p)||f(h,p))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((x=r[0])==null?void 0:x.params)||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function FR(e,t,{includeHydrateFallback:r}={}){return VR(e.map(a=>{let l=t.routes[a.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function VR(e){return[...new Set(e)]}function YR(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}function GR(e,t){let r=new Set;return new Set(t),e.reduce((a,l)=>{let c=JSON.stringify(YR(l));return r.has(c)||(r.add(c),a.push({key:c,link:l})),a},[])}function WR(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&ta(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function yj(){let e=m.useContext(Yl);return mg(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function XR(){let e=m.useContext(Kd);return mg(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var pg=m.createContext(void 0);pg.displayName="FrameworkContext";function bj(){let e=m.useContext(pg);return mg(e,"You must render this element inside a <HydratedRouter> element"),e}function KR(e,t){let r=m.useContext(pg),[a,l]=m.useState(!1),[c,d]=m.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:p,onMouseLeave:v,onTouchStart:x}=t,b=m.useRef(null);m.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let N=C=>{C.forEach(E=>{d(E.isIntersecting)})},_=new IntersectionObserver(N,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[e]),m.useEffect(()=>{if(a){let N=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(N)}}},[a]);let w=()=>{l(!0)},j=()=>{l(!1),d(!1)};return r?e!=="intent"?[c,b,{}]:[c,b,{onFocus:ec(f,w),onBlur:ec(h,j),onMouseEnter:ec(p,w),onMouseLeave:ec(v,j),onTouchStart:ec(x,w)}]:[!1,b,{}]}function ec(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function QR({page:e,...t}){let{router:r}=yj(),a=m.useMemo(()=>oj(r.routes,e,r.basename),[r.routes,e,r.basename]);return a?m.createElement(JR,{page:e,matches:a,...t}):null}function ZR(e){let{manifest:t,routeModules:r}=bj(),[a,l]=m.useState([]);return m.useEffect(()=>{let c=!1;return qR(e,t,r).then(d=>{c||l(d)}),()=>{c=!0}},[e,t,r]),a}function JR({page:e,matches:t,...r}){let a=sa(),{manifest:l,routeModules:c}=bj(),{basename:d}=yj(),{loaderData:f,matches:h}=XR(),p=m.useMemo(()=>_0(e,t,h,l,a,"data"),[e,t,h,l,a]),v=m.useMemo(()=>_0(e,t,h,l,a,"assets"),[e,t,h,l,a]),x=m.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let j=new Set,N=!1;if(t.forEach(C=>{var R;let E=l.routes[C.route.id];!E||!E.hasLoader||(!p.some(M=>M.route.id===C.route.id)&&C.route.id in f&&((R=c[C.route.id])!=null&&R.shouldRevalidate)||E.hasClientLoader?N=!0:j.add(C.route.id))}),j.size===0)return[];let _=WR(e,d);return N&&j.size>0&&_.searchParams.set("_routes",t.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[_.pathname+_.search]},[d,f,a,l,p,t,e,c]),b=m.useMemo(()=>FR(v,l),[v,l]),w=ZR(v);return m.createElement(m.Fragment,null,x.map(j=>m.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),b.map(j=>m.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),w.map(({key:j,link:N})=>m.createElement("link",{key:j,...N})))}function eT(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var wj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wj&&(window.__reactRouterVersion="7.4.0")}catch{}function tT({basename:e,children:t,window:r}){let a=m.useRef();a.current==null&&(a.current=HC({window:r,v5Compat:!0}));let l=a.current,[c,d]=m.useState({action:l.action,location:l.location}),f=m.useCallback(h=>{m.startTransition(()=>d(h))},[d]);return m.useLayoutEffect(()=>l.listen(f),[l,f]),m.createElement(AR,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l})}var jj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,it=m.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:l,reloadDocument:c,replace:d,state:f,target:h,to:p,preventScrollReset:v,viewTransition:x,...b},w){let{basename:j}=m.useContext(fs),N=typeof p=="string"&&jj.test(p),_,C=!1;if(typeof p=="string"&&N&&(_=p,wj))try{let G=new URL(window.location.href),W=p.startsWith("//")?new URL(G.protocol+p):new URL(p),ce=ta(W.pathname,j);W.origin===G.origin&&ce!=null?p=ce+W.search+W.hash:C=!0}catch{rs(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=mR(p,{relative:l}),[R,M,T]=KR(a,b),L=sT(p,{replace:d,state:f,target:h,preventScrollReset:v,relative:l,viewTransition:x});function H(G){t&&t(G),G.defaultPrevented||L(G)}let q=m.createElement("a",{...b,...T,href:_||E,onClick:C||c?t:H,ref:eT(w,M),target:h,"data-discover":!N&&r==="render"?"true":void 0});return R&&!N?m.createElement(m.Fragment,null,q,m.createElement(QR,{page:E})):q});it.displayName="Link";var _j=m.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:l=!1,style:c,to:d,viewTransition:f,children:h,...p},v){let x=Tc(d,{relative:p.relative}),b=sa(),w=m.useContext(Kd),{navigator:j,basename:N}=m.useContext(fs),_=w!=null&&cT(x)&&f===!0,C=j.encodeLocation?j.encodeLocation(x).pathname:x.pathname,E=b.pathname,R=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(E=E.toLowerCase(),R=R?R.toLowerCase():null,C=C.toLowerCase()),R&&N&&(R=ta(R,N)||R);const M=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let T=E===C||!l&&E.startsWith(C)&&E.charAt(M)==="/",L=R!=null&&(R===C||!l&&R.startsWith(C)&&R.charAt(C.length)==="/"),H={isActive:T,isPending:L,isTransitioning:_},q=T?t:void 0,G;typeof a=="function"?G=a(H):G=[a,T?"active":null,L?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let W=typeof c=="function"?c(H):c;return m.createElement(it,{...p,"aria-current":q,className:G,ref:v,style:W,to:d,viewTransition:f},typeof h=="function"?h(H):h)});_j.displayName="NavLink";var nT=m.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:l,state:c,method:d=_d,action:f,onSubmit:h,relative:p,preventScrollReset:v,viewTransition:x,...b},w)=>{let j=lT(),N=oT(f,{relative:p}),_=d.toLowerCase()==="get"?"get":"post",C=typeof f=="string"&&jj.test(f),E=R=>{if(h&&h(R),R.defaultPrevented)return;R.preventDefault();let M=R.nativeEvent.submitter,T=(M==null?void 0:M.getAttribute("formmethod"))||d;j(M||R.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:l,state:c,relative:p,preventScrollReset:v,viewTransition:x})};return m.createElement("form",{ref:w,method:_,action:N,onSubmit:a?h:E,...b,"data-discover":!C&&e==="render"?"true":void 0})});nT.displayName="Form";function rT(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nj(e){let t=m.useContext(Yl);return un(t,rT(e)),t}function sT(e,{target:t,replace:r,state:a,preventScrollReset:l,relative:c,viewTransition:d}={}){let f=or(),h=sa(),p=Tc(e,{relative:c});return m.useCallback(v=>{if(IR(v,t)){v.preventDefault();let x=r!==void 0?r:pc(h)===pc(p);f(e,{replace:x,state:a,preventScrollReset:l,relative:c,viewTransition:d})}},[h,f,p,r,a,t,e,l,c,d])}var aT=0,iT=()=>`__${String(++aT)}__`;function lT(){let{router:e}=Nj("useSubmit"),{basename:t}=m.useContext(fs),r=CR();return m.useCallback(async(a,l={})=>{let{action:c,method:d,encType:f,formData:h,body:p}=$R(a,t);if(l.navigate===!1){let v=l.fetcherKey||iT();await e.fetch(v,r,l.action||c,{preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||d,formEncType:l.encType||f,flushSync:l.flushSync})}else await e.navigate(l.action||c,{preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||d,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,r])}function oT(e,{relative:t}={}){let{basename:r}=m.useContext(fs),a=m.useContext(Kr);un(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),c={...Tc(e||".",{relative:t})},d=sa();if(e==null){c.search=d.search;let f=new URLSearchParams(c.search),h=f.getAll("index");if(h.some(v=>v==="")){f.delete("index"),h.filter(x=>x).forEach(x=>f.append("index",x));let v=f.toString();c.search=v?`?${v}`:""}}return(!e||e===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:Js([r,c.pathname])),pc(c)}function cT(e,t={}){let r=m.useContext(fj);un(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Nj("useViewTransitionState"),l=Tc(e,{relative:t.relative});if(!r.isTransitioning)return!1;let c=ta(r.currentLocation.pathname,a)||r.currentLocation.pathname,d=ta(r.nextLocation.pathname,a)||r.nextLocation.pathname;return Ad(l.pathname,d)!=null||Ad(l.pathname,c)!=null}new TextEncoder;var Ns=lj();const Sj=Xd(Ns),uT="modulepreload",dT=function(e){return"/"+e},N0={},kl=function(t,r,a){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));l=Promise.allSettled(r.map(h=>{if(h=dT(h),h in N0)return;N0[h]=!0;const p=h.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":uT,p||(x.as="script"),x.crossOrigin="",x.href=h,f&&x.setAttribute("nonce",f),document.head.appendChild(x),p)return new Promise((b,w)=>{x.addEventListener("load",b),x.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return l.then(d=>{for(const f of d||[])f.status==="rejected"&&c(f.reason);return t().catch(c)})},fT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>kl(async()=>{const{default:a}=await Promise.resolve().then(()=>Wl);return{default:a}},[]).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)};class gg extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class hT extends gg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class mT extends gg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class pT extends gg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Tp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Tp||(Tp={}));var gT=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class vT{constructor(t,{headers:r={},customFetch:a,region:l=Tp.Any}={}){this.url=t,this.headers=r,this.region=l,this.fetch=fT(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var a;return gT(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:d}=r;let f={},{region:h}=r;h||(h=this.region),h&&h!=="any"&&(f["x-region"]=h);let p;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",p=d):typeof d=="string"?(f["Content-Type"]="text/plain",p=d):typeof FormData<"u"&&d instanceof FormData?p=d:(f["Content-Type"]="application/json",p=JSON.stringify(d)));const v=yield this.fetch(`${this.url}/${t}`,{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:p}).catch(j=>{throw new hT(j)}),x=v.headers.get("x-relay-error");if(x&&x==="true")throw new mT(v);if(!v.ok)throw new pT(v);let b=((a=v.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield v.json():b==="application/octet-stream"?w=yield v.blob():b==="text/event-stream"?w=v:b==="multipart/form-data"?w=yield v.formData():w=yield v.text(),{data:w,error:null}}catch(l){return{data:null,error:l}}})}}var In={},fl={},hl={},ml={},pl={},gl={},xT=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Dl=xT();const yT=Dl.fetch,Ej=Dl.fetch.bind(Dl),Cj=Dl.Headers,bT=Dl.Request,wT=Dl.Response,Wl=Object.freeze(Object.defineProperty({__proto__:null,Headers:Cj,Request:bT,Response:wT,default:Ej,fetch:yT},Symbol.toStringTag,{value:"Module"})),jT=TC(Wl);var ld={},S0;function Rj(){if(S0)return ld;S0=1,Object.defineProperty(ld,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ld.default=e,ld}var E0;function Tj(){if(E0)return gl;E0=1;var e=gl&&gl.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(gl,"__esModule",{value:!0});const t=e(jT),r=e(Rj());class a{constructor(c){this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=c.headers,this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=c.shouldThrowOnError,this.signal=c.signal,this.isMaybeSingle=c.isMaybeSingle,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,d){return this.headers=Object.assign({},this.headers),this.headers[c]=d,this}then(c,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const f=this.fetch;let h=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var v,x,b;let w=null,j=null,N=null,_=p.status,C=p.statusText;if(p.ok){if(this.method!=="HEAD"){const T=await p.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?j=T:j=JSON.parse(T))}const R=(v=this.headers.Prefer)===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),M=(x=p.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");R&&M&&M.length>1&&(N=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(w={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,N=null,_=406,C="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const R=await p.text();try{w=JSON.parse(R),Array.isArray(w)&&p.status===404&&(j=[],w=null,_=200,C="OK")}catch{p.status===404&&R===""?(_=204,C="No Content"):w={message:R}}if(w&&this.isMaybeSingle&&(!((b=w==null?void 0:w.details)===null||b===void 0)&&b.includes("0 rows"))&&(w=null,_=200,C="OK"),w&&this.shouldThrowOnError)throw new r.default(w)}return{error:w,data:j,count:N,status:_,statusText:C}});return this.shouldThrowOnError||(h=h.catch(p=>{var v,x,b;return{error:{message:`${(v=p==null?void 0:p.name)!==null&&v!==void 0?v:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(x=p==null?void 0:p.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(b=p==null?void 0:p.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),h.then(c,d)}returns(){return this}overrideTypes(){return this}}return gl.default=a,gl}var C0;function Mj(){if(C0)return pl;C0=1;var e=pl&&pl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(pl,"__esModule",{value:!0});const t=e(Tj());class r extends t.default{select(l){let c=!1;const d=(l??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",d),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(l,{ascending:c=!0,nullsFirst:d,foreignTable:f,referencedTable:h=f}={}){const p=h?`${h}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${l}.${c?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:d=c}={}){const f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${l}`),this}range(l,c,{foreignTable:d,referencedTable:f=d}={}){const h=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(h,`${l}`),this.url.searchParams.set(p,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:l=!1,verbose:c=!1,settings:d=!1,buffers:f=!1,wal:h=!1,format:p="text"}={}){var v;const x=[l?"analyze":null,c?"verbose":null,d?"settings":null,f?"buffers":null,h?"wal":null].filter(Boolean).join("|"),b=(v=this.headers.Accept)!==null&&v!==void 0?v:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${p}; for="${b}"; options=${x};`,p==="json"?this:this}rollback(){var l;return((l=this.headers.Prefer)!==null&&l!==void 0?l:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return pl.default=r,pl}var R0;function vg(){if(R0)return ml;R0=1;var e=ml&&ml.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ml,"__esModule",{value:!0});const t=e(Mj());class r extends t.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const d=Array.from(new Set(c)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:d,type:f}={}){let h="";f==="plain"?h="pl":f==="phrase"?h="ph":f==="websearch"&&(h="w");const p=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${h}fts${p}.${c}`),this}match(l){return Object.entries(l).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(l,c,d){return this.url.searchParams.append(l,`not.${c}.${d}`),this}or(l,{foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${l})`),this}filter(l,c,d){return this.url.searchParams.append(l,`${c}.${d}`),this}}return ml.default=r,ml}var T0;function Aj(){if(T0)return hl;T0=1;var e=hl&&hl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(hl,"__esModule",{value:!0});const t=e(vg());class r{constructor(l,{headers:c={},schema:d,fetch:f}){this.url=l,this.headers=c,this.schema=d,this.fetch=f}select(l,{head:c=!1,count:d}={}){const f=c?"HEAD":"GET";let h=!1;const p=(l??"*").split("").map(v=>/\s/.test(v)&&!h?"":(v==='"'&&(h=!h),v)).join("");return this.url.searchParams.set("select",p),d&&(this.headers.Prefer=`count=${d}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(l,{count:c,defaultToNull:d=!0}={}){const f="POST",h=[];if(this.headers.Prefer&&h.push(this.headers.Prefer),c&&h.push(`count=${c}`),d||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(l)){const p=l.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(p.length>0){const v=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}upsert(l,{onConflict:c,ignoreDuplicates:d=!1,count:f,defaultToNull:h=!0}={}){const p="POST",v=[`resolution=${d?"ignore":"merge"}-duplicates`];if(c!==void 0&&this.url.searchParams.set("on_conflict",c),this.headers.Prefer&&v.push(this.headers.Prefer),f&&v.push(`count=${f}`),h||v.push("missing=default"),this.headers.Prefer=v.join(","),Array.isArray(l)){const x=l.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(x.length>0){const b=[...new Set(x)].map(w=>`"${w}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}update(l,{count:c}={}){const d="PATCH",f=[];return this.headers.Prefer&&f.push(this.headers.Prefer),c&&f.push(`count=${c}`),this.headers.Prefer=f.join(","),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}delete({count:l}={}){const c="DELETE",d=[];return l&&d.push(`count=${l}`),this.headers.Prefer&&d.unshift(this.headers.Prefer),this.headers.Prefer=d.join(","),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return hl.default=r,hl}var tc={},nc={},M0;function _T(){return M0||(M0=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.version=void 0,nc.version="0.0.0-automated"),nc}var A0;function NT(){if(A0)return tc;A0=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.DEFAULT_HEADERS=void 0;const e=_T();return tc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},tc}var k0;function ST(){if(k0)return fl;k0=1;var e=fl&&fl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(fl,"__esModule",{value:!0});const t=e(Aj()),r=e(vg()),a=NT();class l{constructor(d,{headers:f={},schema:h,fetch:p}={}){this.url=d,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),f),this.schemaName=h,this.fetch=p}from(d){const f=new URL(`${this.url}/${d}`);return new t.default(f,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new l(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:h=!1,get:p=!1,count:v}={}){let x;const b=new URL(`${this.url}/rpc/${d}`);let w;h||p?(x=h?"HEAD":"GET",Object.entries(f).filter(([N,_])=>_!==void 0).map(([N,_])=>[N,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([N,_])=>{b.searchParams.append(N,_)})):(x="POST",w=f);const j=Object.assign({},this.headers);return v&&(j.Prefer=`count=${v}`),new r.default({method:x,url:b,headers:j,schema:this.schemaName,body:w,fetch:this.fetch,allowEmpty:!1})}}return fl.default=l,fl}var D0;function ET(){if(D0)return In;D0=1;var e=In&&In.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(In,"__esModule",{value:!0}),In.PostgrestError=In.PostgrestBuilder=In.PostgrestTransformBuilder=In.PostgrestFilterBuilder=In.PostgrestQueryBuilder=In.PostgrestClient=void 0;const t=e(ST());In.PostgrestClient=t.default;const r=e(Aj());In.PostgrestQueryBuilder=r.default;const a=e(vg());In.PostgrestFilterBuilder=a.default;const l=e(Mj());In.PostgrestTransformBuilder=l.default;const c=e(Tj());In.PostgrestBuilder=c.default;const d=e(Rj());return In.PostgrestError=d.default,In.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:d.default},In}var CT=ET();const RT=Xd(CT),{PostgrestClient:TT,PostgrestQueryBuilder:BB,PostgrestFilterBuilder:HB,PostgrestTransformBuilder:qB,PostgrestBuilder:FB,PostgrestError:VB}=RT,MT="2.11.2",AT={"X-Client-Info":`realtime-js/${MT}`},kT="1.0.0",kj=1e4,DT=1e3;var El;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(El||(El={}));var Cr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Cr||(Cr={}));var ns;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ns||(ns={}));var Mp;(function(e){e.websocket="websocket"})(Mp||(Mp={}));var Si;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Si||(Si={}));class OT{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,r,a)}_decodeBroadcast(t,r,a){const l=r.getUint8(1),c=r.getUint8(2);let d=this.HEADER_LENGTH+2;const f=a.decode(t.slice(d,d+l));d=d+l;const h=a.decode(t.slice(d,d+c));d=d+c;const p=JSON.parse(a.decode(t.slice(d,t.byteLength)));return{ref:null,topic:f,event:h,payload:p}}}class Dj{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var an;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(an||(an={}));const O0=(e,t,r={})=>{var a;const l=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((c,d)=>(c[d]=PT(d,e,t,l),c),{})},PT=(e,t,r,a)=>{const l=t.find(f=>f.name===e),c=l==null?void 0:l.type,d=r[e];return c&&!a.includes(c)?Oj(c,d):Ap(d)},Oj=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return UT(t,r)}switch(e){case an.bool:return LT(t);case an.float4:case an.float8:case an.int2:case an.int4:case an.int8:case an.numeric:case an.oid:return IT(t);case an.json:case an.jsonb:return zT(t);case an.timestamp:return $T(t);case an.abstime:case an.date:case an.daterange:case an.int4range:case an.int8range:case an.money:case an.reltime:case an.text:case an.time:case an.timestamptz:case an.timetz:case an.tsrange:case an.tstzrange:return Ap(t);default:return Ap(t)}},Ap=e=>e,LT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},IT=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},zT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},UT=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let c;const d=e.slice(1,r);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(f=>Oj(t,f))}return e},$T=e=>typeof e=="string"?e.replace(" ","T"):e,Pj=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Ym{constructor(t,r,a={},l=kj){this.channel=t,this.event=r,this.payload=a,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var P0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(P0||(P0={}));class lc{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},l=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lc.syncState(this.state,l,c,d),this.pendingDiffs.forEach(h=>{this.state=lc.syncDiff(this.state,h,c,d)}),this.pendingDiffs=[],f()}),this.channel._on(a.diff,{},l=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=lc.syncDiff(this.state,l,c,d),f())}),this.onJoin((l,c,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:d})}),this.onLeave((l,c,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,l){const c=this.cloneDeep(t),d=this.transformState(r),f={},h={};return this.map(c,(p,v)=>{d[p]||(h[p]=v)}),this.map(d,(p,v)=>{const x=c[p];if(x){const b=v.map(_=>_.presence_ref),w=x.map(_=>_.presence_ref),j=v.filter(_=>w.indexOf(_.presence_ref)<0),N=x.filter(_=>b.indexOf(_.presence_ref)<0);j.length>0&&(f[p]=j),N.length>0&&(h[p]=N)}else f[p]=v}),this.syncDiff(c,{joins:f,leaves:h},a,l)}static syncDiff(t,r,a,l){const{joins:c,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),l||(l=()=>{}),this.map(c,(f,h)=>{var p;const v=(p=t[f])!==null&&p!==void 0?p:[];if(t[f]=this.cloneDeep(h),v.length>0){const x=t[f].map(w=>w.presence_ref),b=v.filter(w=>x.indexOf(w.presence_ref)<0);t[f].unshift(...b)}a(f,v,h)}),this.map(d,(f,h)=>{let p=t[f];if(!p)return;const v=h.map(x=>x.presence_ref);p=p.filter(x=>v.indexOf(x.presence_ref)<0),t[f]=p,l(f,p,h),p.length===0&&delete t[f]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const l=t[a];return"metas"in l?r[a]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[a]=l,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var L0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(L0||(L0={}));var I0;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(I0||(I0={}));var Zs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Zs||(Zs={}));class xg{constructor(t,r={config:{}},a){this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=Cr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ym(this,ns.join,this.params,this.timeout),this.rejoinTimer=new Dj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Cr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Cr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Cr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Cr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ns.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new lc(this),this.broadcastEndpointURL=Pj(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var a,l;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:c,presence:d,private:f}}=this.params;this._onError(v=>t==null?void 0:t(Zs.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(Zs.CLOSED));const h={},p={broadcast:c,presence:d,postgres_changes:(l=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(v=>v.filter))!==null&&l!==void 0?l:[],private:f};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var x;if(this.socket.setAuth(),v===void 0){t==null||t(Zs.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,w=(x=b==null?void 0:b.length)!==null&&x!==void 0?x:0,j=[];for(let N=0;N<w;N++){const _=b[N],{filter:{event:C,schema:E,table:R,filter:M}}=_,T=v&&v[N];if(T&&T.event===C&&T.schema===E&&T.table===R&&T.filter===M)j.push(Object.assign(Object.assign({},_),{id:T.id}));else{this.unsubscribe(),t==null||t(Zs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(Zs.SUBSCRIBED);return}}).receive("error",v=>{t==null||t(Zs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Zs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this._on(t,r,a)}async send(t,r={}){var a,l;if(!this._canPush()&&t.type==="broadcast"){const{event:c,payload:d}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((l=p.body)===null||l===void 0?void 0:l.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,f,h;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||h===void 0)&&h.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("error",()=>c("error")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Cr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ns.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(a=>{const l=new Ym(this,ns.leave,{},t);l.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),l.send(),this._canPush()||l.trigger("ok",{})})}async _fetchWithTimeout(t,r,a){const l=new AbortController,c=setTimeout(()=>l.abort(),a),d=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(c),d}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Ym(this,t,r,a);return this._canPush()?l.send():(l.startTimeout(),this.pushBuffer.push(l)),l}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var l,c;const d=t.toLocaleLowerCase(),{close:f,error:h,leave:p,join:v}=ns;if(a&&[f,h,p,v].indexOf(d)>=0&&a!==this._joinRef())return;let b=this._onMessage(d,r,a);if(r&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(w=>{var j,N,_;return((j=w.filter)===null||j===void 0?void 0:j.event)==="*"||((_=(N=w.filter)===null||N===void 0?void 0:N.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===d}).map(w=>w.callback(b,a)):(c=this.bindings[d])===null||c===void 0||c.filter(w=>{var j,N,_,C,E,R;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in w){const M=w.id,T=(j=w.filter)===null||j===void 0?void 0:j.event;return M&&((N=r.ids)===null||N===void 0?void 0:N.includes(M))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const M=(E=(C=w==null?void 0:w.filter)===null||C===void 0?void 0:C.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return M==="*"||M===((R=r==null?void 0:r.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===d}).map(w=>{if(typeof b=="object"&&"ids"in b){const j=b.data,{schema:N,table:_,commit_timestamp:C,type:E,errors:R}=j;b=Object.assign(Object.assign({},{schema:N,table:_,commit_timestamp:C,eventType:E,new:{},old:{},errors:R}),this._getPayloadRecords(j))}w.callback(b,a)})}_isClosed(){return this.state===Cr.closed}_isJoined(){return this.state===Cr.joined}_isJoining(){return this.state===Cr.joining}_isLeaving(){return this.state===Cr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const l=t.toLocaleLowerCase(),c={type:l,filter:r,callback:a};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&xg.isEqual(l.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ns.close,{},t)}_onError(t){this._on(ns.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Cr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=O0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=O0(t.columns,t.old_record)),r}}const BT=()=>{},HT=typeof WebSocket<"u",qT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class FT{constructor(t,r){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=AT,this.params={},this.timeout=kj,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=BT,this.conn=null,this.sendBuffer=[],this.serializer=new OT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=c=>{let d;return c?d=c:typeof fetch>"u"?d=(...f)=>kl(async()=>{const{default:h}=await Promise.resolve().then(()=>Wl);return{default:h}},void 0).then(({default:h})=>h(...f)):d=fetch,(...f)=>d(...f)},this.endPoint=`${t}/${Mp.websocket}`,this.httpEndpoint=Pj(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const l=(a=r==null?void 0:r.params)===null||a===void 0?void 0:a.apikey;if(l&&(this.accessTokenValue=l,this.apiKey=l),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:c=>[1e3,2e3,5e3,1e4][c-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(c,d)=>d(JSON.stringify(c)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Dj(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(HT){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new VT(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),kl(async()=>{const{default:t}=await import("./browser-Byq0HznP.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kT}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case El.connecting:return Si.Connecting;case El.open:return Si.Open;case El.closing:return Si.Closing;default:return Si.Closed}}isConnected(){return this.connectionState()===Si.Open}channel(t,r={config:{}}){const a=new xg(`realtime:${t}`,r,this);return this.channels.push(a),a}push(t){const{topic:r,event:a,payload:l,ref:c}=t,d=()=>{this.encode(t,f=>{var h;(h=this.conn)===null||h===void 0||h.send(f)})};this.log("push",`${r} ${a} (${c})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let a=null;try{a=JSON.parse(atob(r.split(".")[1]))}catch{}if(a&&a.exp&&!(Math.floor(Date.now()/1e3)-a.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`);this.accessTokenValue=r,this.channels.forEach(l=>{r&&l.updateJoinPayload({access_token:r}),l.joinedOnce&&l._isJoined()&&l._push(ns.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(DT,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:a,event:l,payload:c,ref:d}=r;d&&d===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${c.status||""} ${a} ${l} ${d&&"("+d+")"||""}`,c),this.channels.filter(f=>f._isMember(a)).forEach(f=>f._trigger(l,c,d)),this.stateChangeCallbacks.message.forEach(f=>f(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ns.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${t}${a}${l}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([qT],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}}class VT{constructor(t,r,a){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=El.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=a.close}}class yg extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Un(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class YT extends yg{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class kp extends yg{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var GT=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const Lj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>kl(async()=>{const{default:a}=await Promise.resolve().then(()=>Wl);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},WT=()=>GT(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield kl(()=>Promise.resolve().then(()=>Wl),void 0)).Response:Response}),Dp=e=>{if(Array.isArray(e))return e.map(r=>Dp(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,a])=>{const l=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));t[l]=Dp(a)}),t};var Mi=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const Gm=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XT=(e,t,r)=>Mi(void 0,void 0,void 0,function*(){const a=yield WT();e instanceof a&&!(r!=null&&r.noResolveJson)?e.json().then(l=>{t(new YT(Gm(l),e.status||500))}).catch(l=>{t(new kp(Gm(l),l))}):t(new kp(Gm(e),e))}),KT=(e,t,r,a)=>{const l={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a&&(l.body=JSON.stringify(a)),Object.assign(Object.assign({},l),r))};function Mc(e,t,r,a,l,c){return Mi(this,void 0,void 0,function*(){return new Promise((d,f)=>{e(r,KT(t,a,l,c)).then(h=>{if(!h.ok)throw h;return a!=null&&a.noResolveJson?h:h.json()}).then(h=>d(h)).catch(h=>XT(h,f,a))})})}function kd(e,t,r,a){return Mi(this,void 0,void 0,function*(){return Mc(e,"GET",t,r,a)})}function La(e,t,r,a,l){return Mi(this,void 0,void 0,function*(){return Mc(e,"POST",t,a,l,r)})}function QT(e,t,r,a,l){return Mi(this,void 0,void 0,function*(){return Mc(e,"PUT",t,a,l,r)})}function ZT(e,t,r,a){return Mi(this,void 0,void 0,function*(){return Mc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function Ij(e,t,r,a,l){return Mi(this,void 0,void 0,function*(){return Mc(e,"DELETE",t,a,l,r)})}var mr=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const JT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},z0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class eM{constructor(t,r={},a,l){this.url=t,this.headers=r,this.bucketId=a,this.fetch=Lj(l)}uploadOrUpdate(t,r,a,l){return mr(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},z0),l);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const h=d.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),h&&c.append("metadata",this.encodeMetadata(h)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl),h&&c.append("metadata",this.encodeMetadata(h))):(c=a,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,h&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),l!=null&&l.headers&&(f=Object.assign(Object.assign({},f),l.headers));const p=this._removeEmptyFolders(r),v=this._getFinalPath(p),x=yield this.fetch(`${this.url}/object/${v}`,Object.assign({method:t,body:c,headers:f},d!=null&&d.duplex?{duplex:d.duplex}:{})),b=yield x.json();return x.ok?{data:{path:p,id:b.Id,fullPath:b.Key},error:null}:{data:null,error:b}}catch(c){if(Un(c))return{data:null,error:c};throw c}})}upload(t,r,a){return mr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,l){return mr(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),f=new URL(this.url+`/object/upload/sign/${d}`);f.searchParams.set("token",r);try{let h;const p=Object.assign({upsert:z0.upsert},l),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&a instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",a)):typeof FormData<"u"&&a instanceof FormData?(h=a,h.append("cacheControl",p.cacheControl)):(h=a,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const x=yield this.fetch(f.toString(),{method:"PUT",body:h,headers:v}),b=yield x.json();return x.ok?{data:{path:c,fullPath:b.Key},error:null}:{data:null,error:b}}catch(h){if(Un(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,r){return mr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const l=Object.assign({},this.headers);r!=null&&r.upsert&&(l["x-upsert"]="true");const c=yield La(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:l}),d=new URL(this.url+c.url),f=d.searchParams.get("token");if(!f)throw new yg("No token returned by API");return{data:{signedUrl:d.toString(),path:t,token:f},error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}update(t,r,a){return mr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return mr(this,void 0,void 0,function*(){try{return{data:yield La(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(Un(l))return{data:null,error:l};throw l}})}copy(t,r,a){return mr(this,void 0,void 0,function*(){try{return{data:{path:(yield La(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(Un(l))return{data:null,error:l};throw l}})}createSignedUrl(t,r,a){return mr(this,void 0,void 0,function*(){try{let l=this._getFinalPath(t),c=yield La(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:r},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const d=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(l){if(Un(l))return{data:null,error:l};throw l}})}createSignedUrls(t,r,a){return mr(this,void 0,void 0,function*(){try{const l=yield La(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),c=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:l.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${c}`):null})),error:null}}catch(l){if(Un(l))return{data:null,error:l};throw l}})}download(t,r){return mr(this,void 0,void 0,function*(){const l=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),d=c?`?${c}`:"";try{const f=this._getFinalPath(t);return{data:yield(yield kd(this.fetch,`${this.url}/${l}/${f}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(Un(f))return{data:null,error:f};throw f}})}info(t){return mr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield kd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Dp(a),error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}exists(t){return mr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield ZT(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(Un(a)&&a instanceof kp){const l=a.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),l=[],c=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&l.push(c);const f=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});h!==""&&l.push(h);let p=l.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${a}${p}`)}}}remove(t){return mr(this,void 0,void 0,function*(){try{return{data:yield Ij(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Un(r))return{data:null,error:r};throw r}})}list(t,r,a){return mr(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},JT),r),{prefix:t||""});return{data:yield La(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},a),error:null}}catch(l){if(Un(l))return{data:null,error:l};throw l}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const tM="2.7.1",nM={"X-Client-Info":`storage-js/${tM}`};var vl=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class rM{constructor(t,r={},a){this.url=t,this.headers=Object.assign(Object.assign({},nM),r),this.fetch=Lj(a)}listBuckets(){return vl(this,void 0,void 0,function*(){try{return{data:yield kd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Un(t))return{data:null,error:t};throw t}})}getBucket(t){return vl(this,void 0,void 0,function*(){try{return{data:yield kd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Un(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return vl(this,void 0,void 0,function*(){try{return{data:yield La(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return vl(this,void 0,void 0,function*(){try{return{data:yield QT(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}emptyBucket(t){return vl(this,void 0,void 0,function*(){try{return{data:yield La(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Un(r))return{data:null,error:r};throw r}})}deleteBucket(t){return vl(this,void 0,void 0,function*(){try{return{data:yield Ij(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Un(r))return{data:null,error:r};throw r}})}}class sM extends rM{constructor(t,r={},a){super(t,r,a)}from(t){return new eM(this.url,this.headers,t,this.fetch)}}const aM="2.49.3";let sc="";typeof Deno<"u"?sc="deno":typeof document<"u"?sc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sc="react-native":sc="node";const iM={"X-Client-Info":`supabase-js-${sc}/${aM}`},lM={headers:iM},oM={schema:"public"},cM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uM={};var dM=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};const fM=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ej:t=fetch,(...r)=>t(...r)},hM=()=>typeof Headers>"u"?Cj:Headers,mM=(e,t,r)=>{const a=fM(r),l=hM();return(c,d)=>dM(void 0,void 0,void 0,function*(){var f;const h=(f=yield t())!==null&&f!==void 0?f:e;let p=new l(d==null?void 0:d.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),a(c,Object.assign(Object.assign({},d),{headers:p}))})};var pM=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};function gM(e){return e.replace(/\/$/,"")}function vM(e,t){const{db:r,auth:a,realtime:l,global:c}=e,{db:d,auth:f,realtime:h,global:p}=t,v={db:Object.assign(Object.assign({},d),r),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},h),l),global:Object.assign(Object.assign({},p),c),accessToken:()=>pM(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}const zj="2.69.1",Sl=30*1e3,Op=3,Wm=Op*Sl,xM="http://localhost:9999",yM="supabase.auth.token",bM={"X-Client-Info":`gotrue-js/${zj}`},Pp="X-Supabase-Api-Version",Uj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jM=6e5;class bg extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function dt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class _M extends bg{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function NM(e){return dt(e)&&e.name==="AuthApiError"}class $j extends bg{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Va extends bg{constructor(t,r,a,l){super(t,a,l),this.name=r,this.status=a}}class Da extends Va{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function SM(e){return dt(e)&&e.name==="AuthSessionMissingError"}class Xm extends Va{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class od extends Va{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class cd extends Va{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function EM(e){return dt(e)&&e.name==="AuthImplicitGrantRedirectError"}class U0 extends Va{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lp extends Va{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Km(e){return dt(e)&&e.name==="AuthRetryableFetchError"}class $0 extends Va{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class oc extends Va{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const B0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),H0=` 	
\r=`.split(""),CM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<H0.length;t+=1)e[H0[t].charCodeAt(0)]=-2;for(let t=0;t<B0.length;t+=1)e[B0[t].charCodeAt(0)]=t;return e})();function Bj(e,t,r){const a=CM[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function q0(e){const t=[],r=d=>{t.push(String.fromCodePoint(d))},a={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=d=>{MM(d,a,r)};for(let d=0;d<e.length;d+=1)Bj(e.charCodeAt(d),l,c);return t.join("")}function RM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function TM(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const l=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}RM(a,t)}}function MM(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function AM(e){const t=[],r={queue:0,queuedBits:0},a=l=>{t.push(l)};for(let l=0;l<e.length;l+=1)Bj(e.charCodeAt(l),r,a);return new Uint8Array(t)}function kM(e){const t=[];return TM(e,r=>t.push(r)),new Uint8Array(t)}function DM(e){return Math.round(Date.now()/1e3)+e}function OM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const bs=()=>typeof window<"u"&&typeof document<"u",bi={tested:!1,writable:!1},cc=()=>{if(!bs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bi.tested)return bi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),bi.tested=!0,bi.writable=!0}catch{bi.tested=!0,bi.writable=!1}return bi.writable};function PM(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,c)=>{t[c]=l})}catch{}return r.searchParams.forEach((a,l)=>{t[l]=a}),t}const Hj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>kl(async()=>{const{default:a}=await Promise.resolve().then(()=>Wl);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},LM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",qj=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ud=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},dd=async(e,t)=>{await e.removeItem(t)};class Zd{constructor(){this.promise=new Zd.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Zd.promiseConstructor=Promise;function Qm(e){const t=e.split(".");if(t.length!==3)throw new oc("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!wM.test(t[a]))throw new oc("JWT not in base64url format");return{header:JSON.parse(q0(t[0])),payload:JSON.parse(q0(t[1])),signature:AM(t[2]),raw:{header:t[0],payload:t[1]}}}async function IM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function zM(e,t){return new Promise((a,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await e(c);if(!t(c,null,d)){a(d);return}}catch(d){if(!t(c,d)){l(d);return}}})()})}function UM(e){return("0"+e.toString(16)).substr(-2)}function $M(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let l="";for(let c=0;c<56;c++)l+=r.charAt(Math.floor(Math.random()*a));return l}return crypto.getRandomValues(t),Array.from(t,UM).join("")}async function BM(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(a);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function HM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await BM(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xl(e,t,r=!1){const a=$M();let l=a;r&&(l+="/PASSWORD_RECOVERY"),await qj(e,`${t}-code-verifier`,l);const c=await HM(a);return[c,a===c?"plain":"s256"]}const qM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function FM(e){const t=e.headers.get(Pp);if(!t||!t.match(qM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function VM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function YM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var GM=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const _i=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),WM=[502,503,504];async function F0(e){var t;if(!LM(e))throw new Lp(_i(e),0);if(WM.includes(e.status))throw new Lp(_i(e),e.status);let r;try{r=await e.json()}catch(c){throw new $j(_i(c),c)}let a;const l=FM(e);if(l&&l.getTime()>=Uj["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new $0(_i(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Da}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new $0(_i(r),e.status,r.weak_password.reasons);throw new _M(_i(r),e.status||500,a)}const XM=(e,t,r,a)=>{const l={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),l.body=JSON.stringify(a),Object.assign(Object.assign({},l),r))};async function Nt(e,t,r,a){var l;const c=Object.assign({},a==null?void 0:a.headers);c[Pp]||(c[Pp]=Uj["2024-01-01"].name),a!=null&&a.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const d=(l=a==null?void 0:a.query)!==null&&l!==void 0?l:{};a!=null&&a.redirectTo&&(d.redirect_to=a.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",h=await KM(e,t,r+f,{headers:c,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(h):{data:Object.assign({},h),error:null}}async function KM(e,t,r,a,l,c){const d=XM(t,a,l,c);let f;try{f=await e(r,Object.assign({},d))}catch(h){throw console.error(h),new Lp(_i(h),0)}if(f.ok||await F0(f),a!=null&&a.noResolveJson)return f;try{return await f.json()}catch(h){await F0(h)}}function Oa(e){var t;let r=null;eA(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=DM(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:a},error:null}}function V0(e){const t=Oa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function za(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function QM(e){return{data:e,error:null}}function ZM(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:l,verification_type:c}=e,d=GM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:r,hashed_token:a,redirect_to:l,verification_type:c},h=Object.assign({},d);return{data:{properties:f,user:h},error:null}}function JM(e){return e}function eA(e){return e.access_token&&e.refresh_token&&e.expires_in}var tA=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};class nA{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=Hj(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await Nt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await Nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:za})}catch(a){if(dt(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=tA(t,["options"]),l=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(l.new_email=a==null?void 0:a.newEmail,delete l.newEmail),await Nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:ZM,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(dt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Nt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:za})}catch(r){if(dt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,l,c,d,f,h;try{const p={nextPage:null,lastPage:0,total:0},v=await Nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(c=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:JM});if(v.error)throw v.error;const x=await v.json(),b=(d=v.headers.get("x-total-count"))!==null&&d!==void 0?d:0,w=(h=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(j=>{const N=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);p[`${_}Page`]=N}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(dt(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){try{return await Nt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:za})}catch(r){if(dt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await Nt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:za})}catch(a){if(dt(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){try{return await Nt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:za})}catch(a){if(dt(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){try{const{data:r,error:a}=await Nt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:a}}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await Nt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}}}const rA={getItem:e=>cc()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{cc()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{cc()&&globalThis.localStorage.removeItem(e)}};function Y0(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function sA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const yl={debug:!!(globalThis&&cc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Fj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class aA extends Fj{}async function iA(e,t,r){yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),yl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async l=>{if(l){yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,l.name);try{return await r()}finally{yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,l.name)}}else{if(t===0)throw yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new aA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(yl.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}sA();const lA={url:xM,storageKey:yM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function G0(e,t,r){return await r()}class gc{constructor(t){var r,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=gc.nextInstanceID,gc.nextInstanceID+=1,this.instanceID>0&&bs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},lA),t);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new nA({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Hj(l.fetch),this.lock=l.lock||G0,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:bs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=iA:this.lock=G0,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?l.storage?this.storage=l.storage:cc()?this.storage=rA:(this.memoryStorage={},this.storage=Y0(this.memoryStorage)):(this.memoryStorage={},this.storage=Y0(this.memoryStorage)),bs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${zj}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=PM(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),bs()&&this.detectSessionInUrl&&a!=="none"){const{data:l,error:c}=await this._getSessionFromURL(r,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),EM(c)){const h=(t=c.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:f}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return dt(r)?{error:r}:{error:new $j("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,l;try{const c=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(l=t==null?void 0:t.options)===null||l===void 0?void 0:l.captchaToken}},xform:Oa}),{data:d,error:f}=c;if(f||!d)return{data:{user:null,session:null},error:f};const h=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(dt(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(t){var r,a,l;try{let c;if("email"in t){const{email:v,password:x,options:b}=t;let w=null,j=null;this.flowType==="pkce"&&([w,j]=await xl(this.storage,this.storageKey)),c=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:v,password:x,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:w,code_challenge_method:j},xform:Oa})}else if("phone"in t){const{phone:v,password:x,options:b}=t;c=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:x,data:(a=b==null?void 0:b.data)!==null&&a!==void 0?a:{},channel:(l=b==null?void 0:b.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Oa})}else throw new od("You must provide either an email or phone number and a password");const{data:d,error:f}=c;if(f||!d)return{data:{user:null,session:null},error:f};const h=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(dt(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(t){try{let r;if("email"in t){const{email:c,password:d,options:f}=t;r=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:V0})}else if("phone"in t){const{phone:c,password:d,options:f}=t;r=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:V0})}else throw new od("You must provide either an email or phone number and a password");const{data:a,error:l}=r;return l?{data:{user:null,session:null},error:l}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Xm}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:l})}catch(r){if(dt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,a,l,c;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await ud(this.storage,`${this.storageKey}-code-verifier`),[a,l]=(r??"").split("/");try{const{data:c,error:d}=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Oa});if(await dd(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new Xm}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:d})}catch(c){if(dt(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(t){try{const{options:r,provider:a,token:l,access_token:c,nonce:d}=t,f=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:l,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Oa}),{data:h,error:p}=f;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Xm}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(r){if(dt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,a,l,c,d;try{if("email"in t){const{email:f,options:h}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await xl(this.storage,this.storageKey));const{error:x}=await Nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in t){const{phone:f,options:h}=t,{data:p,error:v}=await Nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(l=h==null?void 0:h.data)!==null&&l!==void 0?l:{},create_user:(c=h==null?void 0:h.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(d=h==null?void 0:h.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v}}throw new od("You must provide either an email or phone number.")}catch(f){if(dt(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(t){var r,a;try{let l,c;"options"in t&&(l=(r=t.options)===null||r===void 0?void 0:r.redirectTo,c=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:d,error:f}=await Nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:Oa});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const h=d.session,p=d.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(l){if(dt(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(t){var r,a,l;try{let c=null,d=null;return this.flowType==="pkce"&&([c,d]=await xl(this.storage,this.storageKey)),await Nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((l=t==null?void 0:t.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:QM})}catch(c){if(dt(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new Da;const{error:l}=await Nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:l}})}catch(t){if(dt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:l,options:c}=t,{error:d}=await Nt(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in t){const{phone:a,type:l,options:c}=t,{data:d,error:f}=await Nt(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new od("You must provide either an email or phone number and a type")}catch(r){if(dt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ud(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Wm:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.storage.isServer){let d=this.suppressGetSessionWarning;t=new Proxy(t,{get:(h,p,v)=>(!d&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,v))})}return{data:{session:t},error:null}}const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:za}):await this._useSession(async r=>{var a,l,c;const{data:d,error:f}=r;if(f)throw f;return!(!((a=d.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Da}:await Nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:za})})}catch(r){if(dt(r))return SM(r)&&(await this._removeSession(),await dd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new Da;const d=l.session;let f=null,h=null;this.flowType==="pkce"&&t.email!=null&&([f,h]=await xl(this.storage,this.storageKey));const{data:p,error:v}=await Nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:h}),jwt:d.access_token,xform:za});if(v)throw v;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(a){if(dt(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Da;const r=Date.now()/1e3;let a=r,l=!0,c=null;const{payload:d}=Qm(t.access_token);if(d.exp&&(a=d.exp,l=a<=r),l){const{session:f,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:h}=await this._getUser(t.access_token);if(h)throw h;c={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(dt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:d,error:f}=r;if(f)throw f;t=(a=d.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new Da;const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(dt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!bs())throw new cd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new cd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new U0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new U0("No code detected.");const{data:E,error:R}=await this._exchangeCodeForSession(t.code);if(R)throw R;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:l,access_token:c,refresh_token:d,expires_in:f,expires_at:h,token_type:p}=t;if(!c||!f||!d||!p)throw new cd("No session defined in URL");const v=Math.round(Date.now()/1e3),x=parseInt(f);let b=v+x;h&&(b=parseInt(h));const w=b-v;w*1e3<=Sl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${x}s`);const j=b-x;v-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,b,v):v-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,b,v);const{data:N,error:_}=await this._getUser(c);if(_)throw _;const C={provider_token:a,provider_refresh_token:l,access_token:c,expires_in:x,expires_at:b,refresh_token:d,token_type:p,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:t.type},error:null}}catch(a){if(dt(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ud(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:l,error:c}=r;if(c)return{error:c};const d=(a=l.session)===null||a===void 0?void 0:a.access_token;if(d){const{error:f}=await this.admin.signOut(d,t);if(f&&!(NM(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return t!=="others"&&(await this._removeSession(),await dd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=OM(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,l;try{const{data:{session:c},error:d}=r;if(d)throw d;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,r={}){let a=null,l=null;this.flowType==="pkce"&&([a,l]=await xl(this.storage,this.storageKey,!0));try{return await Nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(dt(c))return{data:null,error:c};throw c}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:a,error:l}=await this._useSession(async c=>{var d,f,h,p,v;const{data:x,error:b}=c;if(b)throw b;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Nt(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(l)throw l;return bs()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(dt(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,l;const{data:c,error:d}=r;if(d)throw d;return await Nt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await zM(async l=>(l>0&&await IM(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await Nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Oa})),(l,c)=>{const d=200*Math.pow(2,l);return c&&Km(c)&&Date.now()+d-a<Sl})}catch(a){if(this._debug(r,"error",a),dt(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),bs()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await ud(this.storage,this.storageKey);if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Wm;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${Wm}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Km(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new Da;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Zd;const{data:c,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!c.session)throw new Da;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={session:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(l,"error",c),dt(c)){const d={session:null,error:c};return Km(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(t,r,a=!0){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,r)}catch(h){c.push(h)}});if(await Promise.all(d),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await qj(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await dd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&bs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Sl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((a.expires_at*1e3-t)/Sl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Sl}ms, refresh threshold is ${Op} ticks`),l<=Op&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Fj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const l=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&l.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&l.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,d]=await xl(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(f.toString())}if(a!=null&&a.queryParams){const c=new URLSearchParams(a.queryParams);l.push(c.toString())}return a!=null&&a.skipBrowserRedirect&&l.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${l.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:l,error:c}=r;return c?{data:null,error:c}:await Nt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=l==null?void 0:l.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,l;const{data:c,error:d}=r;if(d)return{data:null,error:d};const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:h,error:p}=await Nt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(a=c==null?void 0:c.session)===null||a===void 0?void 0:a.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&(!((l=h==null?void 0:h.totp)===null||l===void 0)&&l.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:l,error:c}=r;if(c)return{data:null,error:c};const{data:d,error:f}=await Nt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=l==null?void 0:l.session)===null||a===void 0?void 0:a.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(r){if(dt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:l,error:c}=r;return c?{data:null,error:c}:await Nt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=l==null?void 0:l.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(dt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=(t==null?void 0:t.factors)||[],l=a.filter(d=>d.factor_type==="totp"&&d.status==="verified"),c=a.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:a,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,a;const{data:{session:l},error:c}=t;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Qm(l.access_token);let f=null;d.aal&&(f=d.aal);let h=f;((a=(r=l.user.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(h="aal2");const v=d.amr||[];return{data:{currentLevel:f,nextLevel:h,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(d=>d.kid===t);if(a||(a=this.jwks.keys.find(d=>d.kid===t),a&&this.jwks_cached_at+jM>Date.now()))return a;const{data:l,error:c}=await Nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;if(!l.keys||l.keys.length===0)throw new oc("JWKS is empty");if(this.jwks=l,this.jwks_cached_at=Date.now(),a=l.keys.find(d=>d.kid===t),!a)throw new oc("No matching signing key found in JWKS");return a}async getClaims(t,r={keys:[]}){try{let a=t;if(!a){const{data:w,error:j}=await this.getSession();if(j||!w.session)return{data:null,error:j};a=w.session.access_token}const{header:l,payload:c,signature:d,raw:{header:f,payload:h}}=Qm(a);if(VM(c.exp),!l.kid||l.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:w}=await this.getUser(a);if(w)throw w;return{data:{claims:c,header:l,signature:d},error:null}}const p=YM(l.alg),v=await this.fetchJwk(l.kid,r),x=await crypto.subtle.importKey("jwk",v,p,!0,["verify"]);if(!await crypto.subtle.verify(p,x,d,kM(`${f}.${h}`)))throw new oc("Invalid JWT signature");return{data:{claims:c,header:l,signature:d},error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}}}gc.nextInstanceID=0;const oA=gc;class cA extends oA{constructor(t){super(t)}}var uA=function(e,t,r,a){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function f(v){try{p(a.next(v))}catch(x){d(x)}}function h(v){try{p(a.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):l(v.value).then(f,h)}p((a=a.apply(e,t||[])).next())})};class dA{constructor(t,r,a){var l,c,d;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const f=gM(t);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:oM,realtime:uM,auth:Object.assign(Object.assign({},cM),{storageKey:h}),global:lM},v=vM(a??{},p);this.storageKey=(l=v.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=v.global.headers)!==null&&c!==void 0?c:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(x,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=v.auth)!==null&&d!==void 0?d:{},this.headers,v.global.fetch),this.fetch=mM(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new TT(`${f}/rest/v1`,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),v.accessToken||this._listenForAuthEvents()}get functions(){return new vT(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new sM(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},a={}){return this.rest.rpc(t,r,a)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return uA(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:l,storageKey:c,flowType:d,lock:f,debug:h},p,v){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cA({url:this.authUrl,headers:Object.assign(Object.assign({},x),p),storageKey:c,autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:l,flowType:d,lock:f,debug:h,fetch:v,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new FT(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,r,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fA=(e,t,r)=>new dA(e,t,r),hA="http://127.0.0.1:54321",mA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0",ne=fA(hA,mA),Vj=m.createContext({session:null,user:null,loading:!0}),pA=({children:e})=>{const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(!0);m.useEffect(()=>{ne.auth.getSession().then(({data:{session:h}})=>{r(h),l((h==null?void 0:h.user)??null),d(!1);const{data:{subscription:p}}=ne.auth.onAuthStateChange((v,x)=>{console.log("Auth state changed:",v,x),r(x),l((x==null?void 0:x.user)??null)});return()=>{p==null||p.unsubscribe()}}).catch(h=>{console.error("Error getting initial session:",h),d(!1)})},[]);const f={session:t,user:a,loading:c};return s.jsx(Vj.Provider,{value:f,children:e})},wg=()=>{const e=m.useContext(Vj);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};function gA(e,t){const r=m.createContext(t),a=c=>{const{children:d,...f}=c,h=m.useMemo(()=>f,Object.values(f));return s.jsx(r.Provider,{value:h,children:d})};a.displayName=e+"Provider";function l(c){const d=m.useContext(r);if(d)return d;if(t!==void 0)return t;throw new Error(`\`${c}\` must be used within \`${e}\``)}return[a,l]}function cr(e,t=[]){let r=[];function a(c,d){const f=m.createContext(d),h=r.length;r=[...r,d];const p=x=>{var C;const{scope:b,children:w,...j}=x,N=((C=b==null?void 0:b[e])==null?void 0:C[h])||f,_=m.useMemo(()=>j,Object.values(j));return s.jsx(N.Provider,{value:_,children:w})};p.displayName=c+"Provider";function v(x,b){var N;const w=((N=b==null?void 0:b[e])==null?void 0:N[h])||f,j=m.useContext(w);if(j)return j;if(d!==void 0)return d;throw new Error(`\`${x}\` must be used within \`${c}\``)}return[p,v]}const l=()=>{const c=r.map(d=>m.createContext(d));return function(f){const h=(f==null?void 0:f[e])||c;return m.useMemo(()=>({[`__scope${e}`]:{...f,[e]:h}}),[f,h])}};return l.scopeName=e,[a,vA(l,...t)]}function vA(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const a=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(c){const d=a.reduce((f,{useScope:h,scopeName:p})=>{const x=h(c)[`__scope${p}`];return{...f,...x}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return r.scopeName=t.scopeName,r}function Mr(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...r)=>{var a;return(a=t.current)==null?void 0:a.call(t,...r)},[])}var Wn=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{};function W0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Jd(...e){return t=>{let r=!1;const a=e.map(l=>{const c=W0(l,t);return!r&&typeof c=="function"&&(r=!0),c});if(r)return()=>{for(let l=0;l<a.length;l++){const c=a[l];typeof c=="function"?c():W0(e[l],null)}}}}function St(...e){return m.useCallback(Jd(...e),e)}var Rs=m.forwardRef((e,t)=>{const{children:r,...a}=e,l=m.Children.toArray(r),c=l.find(xA);if(c){const d=c.props.children,f=l.map(h=>h===c?m.Children.count(d)>1?m.Children.only(null):m.isValidElement(d)?d.props.children:null:h);return s.jsx(Ip,{...a,ref:t,children:m.isValidElement(d)?m.cloneElement(d,void 0,f):null})}return s.jsx(Ip,{...a,ref:t,children:r})});Rs.displayName="Slot";var Ip=m.forwardRef((e,t)=>{const{children:r,...a}=e;if(m.isValidElement(r)){const l=bA(r),c=yA(a,r.props);return r.type!==m.Fragment&&(c.ref=t?Jd(t,l):l),m.cloneElement(r,c)}return m.Children.count(r)>1?m.Children.only(null):null});Ip.displayName="SlotClone";var jg=({children:e})=>s.jsx(s.Fragment,{children:e});function xA(e){return m.isValidElement(e)&&e.type===jg}function yA(e,t){const r={...t};for(const a in t){const l=e[a],c=t[a];/^on[A-Z]/.test(a)?l&&c?r[a]=(...f)=>{c(...f),l(...f)}:l&&(r[a]=l):a==="style"?r[a]={...l,...c}:a==="className"&&(r[a]=[l,c].filter(Boolean).join(" "))}return{...e,...r}}function bA(e){var a,l;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(l=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:l.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var wA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ze=wA.reduce((e,t)=>{const r=m.forwardRef((a,l)=>{const{asChild:c,...d}=a,f=c?Rs:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(f,{...d,ref:l})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Yj(e,t){e&&Ns.flushSync(()=>e.dispatchEvent(t))}var _g="Avatar",[jA,YB]=cr(_g),[_A,Gj]=jA(_g),Wj=m.forwardRef((e,t)=>{const{__scopeAvatar:r,...a}=e,[l,c]=m.useState("idle");return s.jsx(_A,{scope:r,imageLoadingStatus:l,onImageLoadingStatusChange:c,children:s.jsx(Ze.span,{...a,ref:t})})});Wj.displayName=_g;var Xj="AvatarImage",Kj=m.forwardRef((e,t)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:l=()=>{},...c}=e,d=Gj(Xj,r),f=NA(a,c.referrerPolicy),h=Mr(p=>{l(p),d.onImageLoadingStatusChange(p)});return Wn(()=>{f!=="idle"&&h(f)},[f,h]),f==="loaded"?s.jsx(Ze.img,{...c,ref:t,src:a}):null});Kj.displayName=Xj;var Qj="AvatarFallback",Zj=m.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:a,...l}=e,c=Gj(Qj,r),[d,f]=m.useState(a===void 0);return m.useEffect(()=>{if(a!==void 0){const h=window.setTimeout(()=>f(!0),a);return()=>window.clearTimeout(h)}},[a]),d&&c.imageLoadingStatus!=="loaded"?s.jsx(Ze.span,{...l,ref:t}):null});Zj.displayName=Qj;function NA(e,t){const[r,a]=m.useState("idle");return Wn(()=>{if(!e){a("error");return}let l=!0;const c=new window.Image,d=f=>()=>{l&&a(f)};return a("loading"),c.onload=d("loaded"),c.onerror=d("error"),c.src=e,t&&(c.referrerPolicy=t),()=>{l=!1}},[e,t]),r}var SA=Wj,EA=Kj,CA=Zj;function Jj(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=Jj(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function e1(){for(var e,t,r=0,a="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=Jj(e))&&(a&&(a+=" "),a+=t);return a}const Ng="-",RA=e=>{const t=MA(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:d=>{const f=d.split(Ng);return f[0]===""&&f.length!==1&&f.shift(),t1(f,t)||TA(d)},getConflictingClassGroupIds:(d,f)=>{const h=r[d]||[];return f&&a[d]?[...h,...a[d]]:h}}},t1=(e,t)=>{var d;if(e.length===0)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),l=a?t1(e.slice(1),a):void 0;if(l)return l;if(t.validators.length===0)return;const c=e.join(Ng);return(d=t.validators.find(({validator:f})=>f(c)))==null?void 0:d.classGroupId},X0=/^\[(.+)\]$/,TA=e=>{if(X0.test(e)){const t=X0.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},MA=e=>{const{theme:t,classGroups:r}=e,a={nextPart:new Map,validators:[]};for(const l in r)zp(r[l],a,l,t);return a},zp=(e,t,r,a)=>{e.forEach(l=>{if(typeof l=="string"){const c=l===""?t:K0(t,l);c.classGroupId=r;return}if(typeof l=="function"){if(AA(l)){zp(l(a),t,r,a);return}t.validators.push({validator:l,classGroupId:r});return}Object.entries(l).forEach(([c,d])=>{zp(d,K0(t,c),r,a)})})},K0=(e,t)=>{let r=e;return t.split(Ng).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},AA=e=>e.isThemeGetter,kA=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,a=new Map;const l=(c,d)=>{r.set(c,d),t++,t>e&&(t=0,a=r,r=new Map)};return{get(c){let d=r.get(c);if(d!==void 0)return d;if((d=a.get(c))!==void 0)return l(c,d),d},set(c,d){r.has(c)?r.set(c,d):l(c,d)}}},Up="!",$p=":",DA=$p.length,OA=e=>{const{prefix:t,experimentalParseClassName:r}=e;let a=l=>{const c=[];let d=0,f=0,h=0,p;for(let j=0;j<l.length;j++){let N=l[j];if(d===0&&f===0){if(N===$p){c.push(l.slice(h,j)),h=j+DA;continue}if(N==="/"){p=j;continue}}N==="["?d++:N==="]"?d--:N==="("?f++:N===")"&&f--}const v=c.length===0?l:l.substring(h),x=PA(v),b=x!==v,w=p&&p>h?p-h:void 0;return{modifiers:c,hasImportantModifier:b,baseClassName:x,maybePostfixModifierPosition:w}};if(t){const l=t+$p,c=a;a=d=>d.startsWith(l)?c(d.substring(l.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:d,maybePostfixModifierPosition:void 0}}if(r){const l=a;a=c=>r({className:c,parseClassName:l})}return a},PA=e=>e.endsWith(Up)?e.substring(0,e.length-1):e.startsWith(Up)?e.substring(1):e,LA=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const l=[];let c=[];return a.forEach(d=>{d[0]==="["||t[d]?(l.push(...c.sort(),d),c=[]):c.push(d)}),l.push(...c.sort()),l}},IA=e=>({cache:kA(e.cacheSize),parseClassName:OA(e),sortModifiers:LA(e),...RA(e)}),zA=/\s+/,UA=(e,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:l,sortModifiers:c}=t,d=[],f=e.trim().split(zA);let h="";for(let p=f.length-1;p>=0;p-=1){const v=f[p],{isExternal:x,modifiers:b,hasImportantModifier:w,baseClassName:j,maybePostfixModifierPosition:N}=r(v);if(x){h=v+(h.length>0?" "+h:h);continue}let _=!!N,C=a(_?j.substring(0,N):j);if(!C){if(!_){h=v+(h.length>0?" "+h:h);continue}if(C=a(j),!C){h=v+(h.length>0?" "+h:h);continue}_=!1}const E=c(b).join(":"),R=w?E+Up:E,M=R+C;if(d.includes(M))continue;d.push(M);const T=l(C,_);for(let L=0;L<T.length;++L){const H=T[L];d.push(R+H)}h=v+(h.length>0?" "+h:h)}return h};function $A(){let e=0,t,r,a="";for(;e<arguments.length;)(t=arguments[e++])&&(r=n1(t))&&(a&&(a+=" "),a+=r);return a}const n1=e=>{if(typeof e=="string")return e;let t,r="";for(let a=0;a<e.length;a++)e[a]&&(t=n1(e[a]))&&(r&&(r+=" "),r+=t);return r};function BA(e,...t){let r,a,l,c=d;function d(h){const p=t.reduce((v,x)=>x(v),e());return r=IA(p),a=r.cache.get,l=r.cache.set,c=f,f(h)}function f(h){const p=a(h);if(p)return p;const v=UA(h,r);return l(h,v),v}return function(){return c($A.apply(null,arguments))}}const zn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},r1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,s1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,HA=/^\d+\/\d+$/,qA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,FA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,VA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,YA=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,GA=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bl=e=>HA.test(e),_t=e=>!!e&&!Number.isNaN(Number(e)),wi=e=>!!e&&Number.isInteger(Number(e)),Q0=e=>e.endsWith("%")&&_t(e.slice(0,-1)),Aa=e=>qA.test(e),WA=()=>!0,XA=e=>FA.test(e)&&!VA.test(e),Sg=()=>!1,KA=e=>YA.test(e),QA=e=>GA.test(e),ZA=e=>!ze(e)&&!Ue(e),JA=e=>Xl(e,l1,Sg),ze=e=>r1.test(e),ji=e=>Xl(e,o1,XA),Zm=e=>Xl(e,uk,_t),ek=e=>Xl(e,a1,Sg),tk=e=>Xl(e,i1,QA),nk=e=>Xl(e,Sg,KA),Ue=e=>s1.test(e),fd=e=>Kl(e,o1),rk=e=>Kl(e,dk),sk=e=>Kl(e,a1),ak=e=>Kl(e,l1),ik=e=>Kl(e,i1),lk=e=>Kl(e,fk,!0),Xl=(e,t,r)=>{const a=r1.exec(e);return a?a[1]?t(a[1]):r(a[2]):!1},Kl=(e,t,r=!1)=>{const a=s1.exec(e);return a?a[1]?t(a[1]):r:!1},a1=e=>e==="position",ok=new Set(["image","url"]),i1=e=>ok.has(e),ck=new Set(["length","size","percentage"]),l1=e=>ck.has(e),o1=e=>e==="length",uk=e=>e==="number",dk=e=>e==="family-name",fk=e=>e==="shadow",hk=()=>{const e=zn("color"),t=zn("font"),r=zn("text"),a=zn("font-weight"),l=zn("tracking"),c=zn("leading"),d=zn("breakpoint"),f=zn("container"),h=zn("spacing"),p=zn("radius"),v=zn("shadow"),x=zn("inset-shadow"),b=zn("drop-shadow"),w=zn("blur"),j=zn("perspective"),N=zn("aspect"),_=zn("ease"),C=zn("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto","contain","none"],L=()=>[Ue,ze,h],H=()=>[bl,"full","auto",...L()],q=()=>[wi,"none","subgrid",Ue,ze],G=()=>["auto",{span:["full",wi,Ue,ze]},Ue,ze],W=()=>[wi,"auto",Ue,ze],ce=()=>["auto","min","max","fr",Ue,ze],se=()=>["start","end","center","between","around","evenly","stretch","baseline"],B=()=>["start","end","center","stretch"],ie=()=>["auto",...L()],oe=()=>[bl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...L()],O=()=>[e,Ue,ze],V=()=>[Q0,ji],U=()=>["","none","full",p,Ue,ze],J=()=>["",_t,fd,ji],k=()=>["solid","dashed","dotted","double"],P=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["","none",w,Ue,ze],X=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ue,ze],D=()=>["none",_t,Ue,ze],z=()=>["none",_t,Ue,ze],$=()=>[_t,Ue,ze],K=()=>[bl,"full",...L()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Aa],breakpoint:[Aa],color:[WA],container:[Aa],"drop-shadow":[Aa],ease:["in","out","in-out"],font:[ZA],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Aa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Aa],shadow:[Aa],spacing:["px",_t],text:[Aa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",bl,ze,Ue,N]}],container:["container"],columns:[{columns:[_t,ze,Ue,f]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...R(),ze,Ue]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:H()}],"inset-x":[{"inset-x":H()}],"inset-y":[{"inset-y":H()}],start:[{start:H()}],end:[{end:H()}],top:[{top:H()}],right:[{right:H()}],bottom:[{bottom:H()}],left:[{left:H()}],visibility:["visible","invisible","collapse"],z:[{z:[wi,"auto",Ue,ze]}],basis:[{basis:[bl,"full","auto",f,...L()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[_t,bl,"auto","initial","none",ze]}],grow:[{grow:["",_t,Ue,ze]}],shrink:[{shrink:["",_t,Ue,ze]}],order:[{order:[wi,"first","last","none",Ue,ze]}],"grid-cols":[{"grid-cols":q()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":q()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ce()}],"auto-rows":[{"auto-rows":ce()}],gap:[{gap:L()}],"gap-x":[{"gap-x":L()}],"gap-y":[{"gap-y":L()}],"justify-content":[{justify:[...se(),"normal"]}],"justify-items":[{"justify-items":[...B(),"normal"]}],"justify-self":[{"justify-self":["auto",...B()]}],"align-content":[{content:["normal",...se()]}],"align-items":[{items:[...B(),"baseline"]}],"align-self":[{self:["auto",...B(),"baseline"]}],"place-content":[{"place-content":se()}],"place-items":[{"place-items":[...B(),"baseline"]}],"place-self":[{"place-self":["auto",...B()]}],p:[{p:L()}],px:[{px:L()}],py:[{py:L()}],ps:[{ps:L()}],pe:[{pe:L()}],pt:[{pt:L()}],pr:[{pr:L()}],pb:[{pb:L()}],pl:[{pl:L()}],m:[{m:ie()}],mx:[{mx:ie()}],my:[{my:ie()}],ms:[{ms:ie()}],me:[{me:ie()}],mt:[{mt:ie()}],mr:[{mr:ie()}],mb:[{mb:ie()}],ml:[{ml:ie()}],"space-x":[{"space-x":L()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":L()}],"space-y-reverse":["space-y-reverse"],size:[{size:oe()}],w:[{w:[f,"screen",...oe()]}],"min-w":[{"min-w":[f,"screen","none",...oe()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[d]},...oe()]}],h:[{h:["screen",...oe()]}],"min-h":[{"min-h":["screen","none",...oe()]}],"max-h":[{"max-h":["screen",...oe()]}],"font-size":[{text:["base",r,fd,ji]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Ue,Zm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Q0,ze]}],"font-family":[{font:[rk,ze,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,Ue,ze]}],"line-clamp":[{"line-clamp":[_t,"none",Ue,Zm]}],leading:[{leading:[c,...L()]}],"list-image":[{"list-image":["none",Ue,ze]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ue,ze]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...k(),"wavy"]}],"text-decoration-thickness":[{decoration:[_t,"from-font","auto",Ue,ji]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[_t,"auto",Ue,ze]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue,ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue,ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...R(),sk,ek]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",ak,JA]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wi,Ue,ze],radial:["",Ue,ze],conic:[wi,Ue,ze]},ik,tk]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:U()}],"rounded-s":[{"rounded-s":U()}],"rounded-e":[{"rounded-e":U()}],"rounded-t":[{"rounded-t":U()}],"rounded-r":[{"rounded-r":U()}],"rounded-b":[{"rounded-b":U()}],"rounded-l":[{"rounded-l":U()}],"rounded-ss":[{"rounded-ss":U()}],"rounded-se":[{"rounded-se":U()}],"rounded-ee":[{"rounded-ee":U()}],"rounded-es":[{"rounded-es":U()}],"rounded-tl":[{"rounded-tl":U()}],"rounded-tr":[{"rounded-tr":U()}],"rounded-br":[{"rounded-br":U()}],"rounded-bl":[{"rounded-bl":U()}],"border-w":[{border:J()}],"border-w-x":[{"border-x":J()}],"border-w-y":[{"border-y":J()}],"border-w-s":[{"border-s":J()}],"border-w-e":[{"border-e":J()}],"border-w-t":[{"border-t":J()}],"border-w-r":[{"border-r":J()}],"border-w-b":[{"border-b":J()}],"border-w-l":[{"border-l":J()}],"divide-x":[{"divide-x":J()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":J()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...k(),"hidden","none"]}],"divide-style":[{divide:[...k(),"hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[...k(),"none","hidden"]}],"outline-offset":[{"outline-offset":[_t,Ue,ze]}],"outline-w":[{outline:["",_t,fd,ji]}],"outline-color":[{outline:[e]}],shadow:[{shadow:["","none",v,lk,nk]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",Ue,ze,x]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[_t,ji]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":J()}],"inset-ring-color":[{"inset-ring":O()}],opacity:[{opacity:[_t,Ue,ze]}],"mix-blend":[{"mix-blend":[...P(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":P()}],filter:[{filter:["","none",Ue,ze]}],blur:[{blur:F()}],brightness:[{brightness:[_t,Ue,ze]}],contrast:[{contrast:[_t,Ue,ze]}],"drop-shadow":[{"drop-shadow":["","none",b,Ue,ze]}],grayscale:[{grayscale:["",_t,Ue,ze]}],"hue-rotate":[{"hue-rotate":[_t,Ue,ze]}],invert:[{invert:["",_t,Ue,ze]}],saturate:[{saturate:[_t,Ue,ze]}],sepia:[{sepia:["",_t,Ue,ze]}],"backdrop-filter":[{"backdrop-filter":["","none",Ue,ze]}],"backdrop-blur":[{"backdrop-blur":F()}],"backdrop-brightness":[{"backdrop-brightness":[_t,Ue,ze]}],"backdrop-contrast":[{"backdrop-contrast":[_t,Ue,ze]}],"backdrop-grayscale":[{"backdrop-grayscale":["",_t,Ue,ze]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_t,Ue,ze]}],"backdrop-invert":[{"backdrop-invert":["",_t,Ue,ze]}],"backdrop-opacity":[{"backdrop-opacity":[_t,Ue,ze]}],"backdrop-saturate":[{"backdrop-saturate":[_t,Ue,ze]}],"backdrop-sepia":[{"backdrop-sepia":["",_t,Ue,ze]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":L()}],"border-spacing-x":[{"border-spacing-x":L()}],"border-spacing-y":[{"border-spacing-y":L()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ue,ze]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[_t,"initial",Ue,ze]}],ease:[{ease:["linear","initial",_,Ue,ze]}],delay:[{delay:[_t,Ue,ze]}],animate:[{animate:["none",C,Ue,ze]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,Ue,ze]}],"perspective-origin":[{"perspective-origin":X()}],rotate:[{rotate:D()}],"rotate-x":[{"rotate-x":D()}],"rotate-y":[{"rotate-y":D()}],"rotate-z":[{"rotate-z":D()}],scale:[{scale:z()}],"scale-x":[{"scale-x":z()}],"scale-y":[{"scale-y":z()}],"scale-z":[{"scale-z":z()}],"scale-3d":["scale-3d"],skew:[{skew:$()}],"skew-x":[{"skew-x":$()}],"skew-y":[{"skew-y":$()}],transform:[{transform:[Ue,ze,"","none","gpu","cpu"]}],"transform-origin":[{origin:X()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:K()}],"translate-x":[{"translate-x":K()}],"translate-y":[{"translate-y":K()}],"translate-z":[{"translate-z":K()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue,ze]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue,ze]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[_t,fd,ji,Zm]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},mk=BA(hk);function Ce(...e){return mk(e1(e))}function Ac({className:e,...t}){return s.jsx(SA,{"data-slot":"avatar",className:Ce("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function ef({className:e,...t}){return s.jsx(EA,{"data-slot":"avatar-image",className:Ce("aspect-square size-full",e),...t})}function kc({className:e,...t}){return s.jsx(CA,{"data-slot":"avatar-fallback",className:Ce("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}const Z0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,J0=e1,Eg=(e,t)=>r=>{var a;if((t==null?void 0:t.variants)==null)return J0(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:l,defaultVariants:c}=t,d=Object.keys(l).map(p=>{const v=r==null?void 0:r[p],x=c==null?void 0:c[p];if(v===null)return null;const b=Z0(v)||Z0(x);return l[p][b]}),f=r&&Object.entries(r).reduce((p,v)=>{let[x,b]=v;return b===void 0||(p[x]=b),p},{}),h=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((p,v)=>{let{class:x,className:b,...w}=v;return Object.entries(w).every(j=>{let[N,_]=j;return Array.isArray(_)?_.includes({...c,...f}[N]):{...c,...f}[N]===_})?[...p,x,b]:p},[]);return J0(e,d,h,r==null?void 0:r.class,r==null?void 0:r.className)},Ol=Eg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function te({className:e,variant:t,size:r,asChild:a=!1,...l}){const c=a?Rs:"button";return s.jsx(c,{"data-slot":"button",className:Ce(Ol({variant:t,size:r,className:e})),...l})}function Ae(e,t,{checkForDefaultPrevented:r=!0}={}){return function(l){if(e==null||e(l),r===!1||!l.defaultPrevented)return t==null?void 0:t(l)}}function $a({prop:e,defaultProp:t,onChange:r=()=>{}}){const[a,l]=pk({defaultProp:t,onChange:r}),c=e!==void 0,d=c?e:a,f=Mr(r),h=m.useCallback(p=>{if(c){const x=typeof p=="function"?p(e):p;x!==e&&f(x)}else l(p)},[c,e,l,f]);return[d,h]}function pk({defaultProp:e,onChange:t}){const r=m.useState(e),[a]=r,l=m.useRef(a),c=Mr(t);return m.useEffect(()=>{l.current!==a&&(c(a),l.current=a)},[a,l,c]),r}function Cg(e){const t=e+"CollectionProvider",[r,a]=cr(t),[l,c]=r(t,{collectionRef:{current:null},itemMap:new Map}),d=w=>{const{scope:j,children:N}=w,_=be.useRef(null),C=be.useRef(new Map).current;return s.jsx(l,{scope:j,itemMap:C,collectionRef:_,children:N})};d.displayName=t;const f=e+"CollectionSlot",h=be.forwardRef((w,j)=>{const{scope:N,children:_}=w,C=c(f,N),E=St(j,C.collectionRef);return s.jsx(Rs,{ref:E,children:_})});h.displayName=f;const p=e+"CollectionItemSlot",v="data-radix-collection-item",x=be.forwardRef((w,j)=>{const{scope:N,children:_,...C}=w,E=be.useRef(null),R=St(j,E),M=c(p,N);return be.useEffect(()=>(M.itemMap.set(E,{ref:E,...C}),()=>void M.itemMap.delete(E))),s.jsx(Rs,{[v]:"",ref:R,children:_})});x.displayName=p;function b(w){const j=c(e+"CollectionConsumer",w);return be.useCallback(()=>{const _=j.collectionRef.current;if(!_)return[];const C=Array.from(_.querySelectorAll(`[${v}]`));return Array.from(j.itemMap.values()).sort((M,T)=>C.indexOf(M.ref.current)-C.indexOf(T.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:d,Slot:h,ItemSlot:x},b,a]}var gk=m.createContext(void 0);function tf(e){const t=m.useContext(gk);return e||t||"ltr"}function vk(e,t=globalThis==null?void 0:globalThis.document){const r=Mr(e);m.useEffect(()=>{const a=l=>{l.key==="Escape"&&r(l)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[r,t])}var xk="DismissableLayer",Bp="dismissableLayer.update",yk="dismissableLayer.pointerDownOutside",bk="dismissableLayer.focusOutside",ew,c1=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ql=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,onDismiss:f,...h}=e,p=m.useContext(c1),[v,x]=m.useState(null),b=(v==null?void 0:v.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=m.useState({}),j=St(t,H=>x(H)),N=Array.from(p.layers),[_]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),C=N.indexOf(_),E=v?N.indexOf(v):-1,R=p.layersWithOutsidePointerEventsDisabled.size>0,M=E>=C,T=_k(H=>{const q=H.target,G=[...p.branches].some(W=>W.contains(q));!M||G||(l==null||l(H),d==null||d(H),H.defaultPrevented||f==null||f())},b),L=Nk(H=>{const q=H.target;[...p.branches].some(W=>W.contains(q))||(c==null||c(H),d==null||d(H),H.defaultPrevented||f==null||f())},b);return vk(H=>{E===p.layers.size-1&&(a==null||a(H),!H.defaultPrevented&&f&&(H.preventDefault(),f()))},b),m.useEffect(()=>{if(v)return r&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(ew=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(v)),p.layers.add(v),tw(),()=>{r&&p.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=ew)}},[v,b,r,p]),m.useEffect(()=>()=>{v&&(p.layers.delete(v),p.layersWithOutsidePointerEventsDisabled.delete(v),tw())},[v,p]),m.useEffect(()=>{const H=()=>w({});return document.addEventListener(Bp,H),()=>document.removeEventListener(Bp,H)},[]),s.jsx(Ze.div,{...h,ref:j,style:{pointerEvents:R?M?"auto":"none":void 0,...e.style},onFocusCapture:Ae(e.onFocusCapture,L.onFocusCapture),onBlurCapture:Ae(e.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Ae(e.onPointerDownCapture,T.onPointerDownCapture)})});Ql.displayName=xk;var wk="DismissableLayerBranch",jk=m.forwardRef((e,t)=>{const r=m.useContext(c1),a=m.useRef(null),l=St(t,a);return m.useEffect(()=>{const c=a.current;if(c)return r.branches.add(c),()=>{r.branches.delete(c)}},[r.branches]),s.jsx(Ze.div,{...e,ref:l})});jk.displayName=wk;function _k(e,t=globalThis==null?void 0:globalThis.document){const r=Mr(e),a=m.useRef(!1),l=m.useRef(()=>{});return m.useEffect(()=>{const c=f=>{if(f.target&&!a.current){let h=function(){u1(yk,r,p,{discrete:!0})};const p={originalEvent:f};f.pointerType==="touch"?(t.removeEventListener("click",l.current),l.current=h,t.addEventListener("click",l.current,{once:!0})):h()}else t.removeEventListener("click",l.current);a.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",c),t.removeEventListener("click",l.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function Nk(e,t=globalThis==null?void 0:globalThis.document){const r=Mr(e),a=m.useRef(!1);return m.useEffect(()=>{const l=c=>{c.target&&!a.current&&u1(bk,r,{originalEvent:c},{discrete:!1})};return t.addEventListener("focusin",l),()=>t.removeEventListener("focusin",l)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function tw(){const e=new CustomEvent(Bp);document.dispatchEvent(e)}function u1(e,t,r,{discrete:a}){const l=r.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&l.addEventListener(e,t,{once:!0}),a?Yj(l,c):l.dispatchEvent(c)}var Jm=0;function nf(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??nw()),document.body.insertAdjacentElement("beforeend",e[1]??nw()),Jm++,()=>{Jm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Jm--}},[])}function nw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ep="focusScope.autoFocusOnMount",tp="focusScope.autoFocusOnUnmount",rw={bubbles:!1,cancelable:!0},Sk="FocusScope",Dc=m.forwardRef((e,t)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:l,onUnmountAutoFocus:c,...d}=e,[f,h]=m.useState(null),p=Mr(l),v=Mr(c),x=m.useRef(null),b=St(t,N=>h(N)),w=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(a){let N=function(R){if(w.paused||!f)return;const M=R.target;f.contains(M)?x.current=M:Pa(x.current,{select:!0})},_=function(R){if(w.paused||!f)return;const M=R.relatedTarget;M!==null&&(f.contains(M)||Pa(x.current,{select:!0}))},C=function(R){if(document.activeElement===document.body)for(const T of R)T.removedNodes.length>0&&Pa(f)};document.addEventListener("focusin",N),document.addEventListener("focusout",_);const E=new MutationObserver(C);return f&&E.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",N),document.removeEventListener("focusout",_),E.disconnect()}}},[a,f,w.paused]),m.useEffect(()=>{if(f){aw.add(w);const N=document.activeElement;if(!f.contains(N)){const C=new CustomEvent(ep,rw);f.addEventListener(ep,p),f.dispatchEvent(C),C.defaultPrevented||(Ek(Ak(d1(f)),{select:!0}),document.activeElement===N&&Pa(f))}return()=>{f.removeEventListener(ep,p),setTimeout(()=>{const C=new CustomEvent(tp,rw);f.addEventListener(tp,v),f.dispatchEvent(C),C.defaultPrevented||Pa(N??document.body,{select:!0}),f.removeEventListener(tp,v),aw.remove(w)},0)}}},[f,p,v,w]);const j=m.useCallback(N=>{if(!r&&!a||w.paused)return;const _=N.key==="Tab"&&!N.altKey&&!N.ctrlKey&&!N.metaKey,C=document.activeElement;if(_&&C){const E=N.currentTarget,[R,M]=Ck(E);R&&M?!N.shiftKey&&C===M?(N.preventDefault(),r&&Pa(R,{select:!0})):N.shiftKey&&C===R&&(N.preventDefault(),r&&Pa(M,{select:!0})):C===E&&N.preventDefault()}},[r,a,w.paused]);return s.jsx(Ze.div,{tabIndex:-1,...d,ref:b,onKeyDown:j})});Dc.displayName=Sk;function Ek(e,{select:t=!1}={}){const r=document.activeElement;for(const a of e)if(Pa(a,{select:t}),document.activeElement!==r)return}function Ck(e){const t=d1(e),r=sw(t,e),a=sw(t.reverse(),e);return[r,a]}function d1(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const l=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||l?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function sw(e,t){for(const r of e)if(!Rk(r,{upTo:t}))return r}function Rk(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Tk(e){return e instanceof HTMLInputElement&&"select"in e}function Pa(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Tk(e)&&t&&e.select()}}var aw=Mk();function Mk(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=iw(e,t),e.unshift(t)},remove(t){var r;e=iw(e,t),(r=e[0])==null||r.resume()}}}function iw(e,t){const r=[...e],a=r.indexOf(t);return a!==-1&&r.splice(a,1),r}function Ak(e){return e.filter(t=>t.tagName!=="A")}var kk=DC.useId||(()=>{}),Dk=0;function Es(e){const[t,r]=m.useState(kk());return Wn(()=>{r(a=>a??String(Dk++))},[e]),e||(t?`radix-${t}`:"")}const Ok=["top","right","bottom","left"],Ba=Math.min,Rr=Math.max,Dd=Math.round,hd=Math.floor,Cs=e=>({x:e,y:e}),Pk={left:"right",right:"left",bottom:"top",top:"bottom"},Lk={start:"end",end:"start"};function Hp(e,t,r){return Rr(e,Ba(t,r))}function na(e,t){return typeof e=="function"?e(t):e}function ra(e){return e.split("-")[0]}function Zl(e){return e.split("-")[1]}function Rg(e){return e==="x"?"y":"x"}function Tg(e){return e==="y"?"height":"width"}function Ha(e){return["top","bottom"].includes(ra(e))?"y":"x"}function Mg(e){return Rg(Ha(e))}function Ik(e,t,r){r===void 0&&(r=!1);const a=Zl(e),l=Mg(e),c=Tg(l);let d=l==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(d=Od(d)),[d,Od(d)]}function zk(e){const t=Od(e);return[qp(e),t,qp(t)]}function qp(e){return e.replace(/start|end/g,t=>Lk[t])}function Uk(e,t,r){const a=["left","right"],l=["right","left"],c=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return r?t?l:a:t?a:l;case"left":case"right":return t?c:d;default:return[]}}function $k(e,t,r,a){const l=Zl(e);let c=Uk(ra(e),r==="start",a);return l&&(c=c.map(d=>d+"-"+l),t&&(c=c.concat(c.map(qp)))),c}function Od(e){return e.replace(/left|right|bottom|top/g,t=>Pk[t])}function Bk(e){return{top:0,right:0,bottom:0,left:0,...e}}function f1(e){return typeof e!="number"?Bk(e):{top:e,right:e,bottom:e,left:e}}function Pd(e){const{x:t,y:r,width:a,height:l}=e;return{width:a,height:l,top:r,left:t,right:t+a,bottom:r+l,x:t,y:r}}function lw(e,t,r){let{reference:a,floating:l}=e;const c=Ha(t),d=Mg(t),f=Tg(d),h=ra(t),p=c==="y",v=a.x+a.width/2-l.width/2,x=a.y+a.height/2-l.height/2,b=a[f]/2-l[f]/2;let w;switch(h){case"top":w={x:v,y:a.y-l.height};break;case"bottom":w={x:v,y:a.y+a.height};break;case"right":w={x:a.x+a.width,y:x};break;case"left":w={x:a.x-l.width,y:x};break;default:w={x:a.x,y:a.y}}switch(Zl(t)){case"start":w[d]-=b*(r&&p?-1:1);break;case"end":w[d]+=b*(r&&p?-1:1);break}return w}const Hk=async(e,t,r)=>{const{placement:a="bottom",strategy:l="absolute",middleware:c=[],platform:d}=r,f=c.filter(Boolean),h=await(d.isRTL==null?void 0:d.isRTL(t));let p=await d.getElementRects({reference:e,floating:t,strategy:l}),{x:v,y:x}=lw(p,a,h),b=a,w={},j=0;for(let N=0;N<f.length;N++){const{name:_,fn:C}=f[N],{x:E,y:R,data:M,reset:T}=await C({x:v,y:x,initialPlacement:a,placement:b,strategy:l,middlewareData:w,rects:p,platform:d,elements:{reference:e,floating:t}});v=E??v,x=R??x,w={...w,[_]:{...w[_],...M}},T&&j<=50&&(j++,typeof T=="object"&&(T.placement&&(b=T.placement),T.rects&&(p=T.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:l}):T.rects),{x:v,y:x}=lw(p,b,h)),N=-1)}return{x:v,y:x,placement:b,strategy:l,middlewareData:w}};async function vc(e,t){var r;t===void 0&&(t={});const{x:a,y:l,platform:c,rects:d,elements:f,strategy:h}=e,{boundary:p="clippingAncestors",rootBoundary:v="viewport",elementContext:x="floating",altBoundary:b=!1,padding:w=0}=na(t,e),j=f1(w),_=f[b?x==="floating"?"reference":"floating":x],C=Pd(await c.getClippingRect({element:(r=await(c.isElement==null?void 0:c.isElement(_)))==null||r?_:_.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:p,rootBoundary:v,strategy:h})),E=x==="floating"?{x:a,y:l,width:d.floating.width,height:d.floating.height}:d.reference,R=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),M=await(c.isElement==null?void 0:c.isElement(R))?await(c.getScale==null?void 0:c.getScale(R))||{x:1,y:1}:{x:1,y:1},T=Pd(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:E,offsetParent:R,strategy:h}):E);return{top:(C.top-T.top+j.top)/M.y,bottom:(T.bottom-C.bottom+j.bottom)/M.y,left:(C.left-T.left+j.left)/M.x,right:(T.right-C.right+j.right)/M.x}}const qk=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:a,placement:l,rects:c,platform:d,elements:f,middlewareData:h}=t,{element:p,padding:v=0}=na(e,t)||{};if(p==null)return{};const x=f1(v),b={x:r,y:a},w=Mg(l),j=Tg(w),N=await d.getDimensions(p),_=w==="y",C=_?"top":"left",E=_?"bottom":"right",R=_?"clientHeight":"clientWidth",M=c.reference[j]+c.reference[w]-b[w]-c.floating[j],T=b[w]-c.reference[w],L=await(d.getOffsetParent==null?void 0:d.getOffsetParent(p));let H=L?L[R]:0;(!H||!await(d.isElement==null?void 0:d.isElement(L)))&&(H=f.floating[R]||c.floating[j]);const q=M/2-T/2,G=H/2-N[j]/2-1,W=Ba(x[C],G),ce=Ba(x[E],G),se=W,B=H-N[j]-ce,ie=H/2-N[j]/2+q,oe=Hp(se,ie,B),O=!h.arrow&&Zl(l)!=null&&ie!==oe&&c.reference[j]/2-(ie<se?W:ce)-N[j]/2<0,V=O?ie<se?ie-se:ie-B:0;return{[w]:b[w]+V,data:{[w]:oe,centerOffset:ie-oe-V,...O&&{alignmentOffset:V}},reset:O}}}),Fk=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,a;const{placement:l,middlewareData:c,rects:d,initialPlacement:f,platform:h,elements:p}=t,{mainAxis:v=!0,crossAxis:x=!0,fallbackPlacements:b,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:N=!0,..._}=na(e,t);if((r=c.arrow)!=null&&r.alignmentOffset)return{};const C=ra(l),E=Ha(f),R=ra(f)===f,M=await(h.isRTL==null?void 0:h.isRTL(p.floating)),T=b||(R||!N?[Od(f)]:zk(f)),L=j!=="none";!b&&L&&T.push(...$k(f,N,j,M));const H=[f,...T],q=await vc(t,_),G=[];let W=((a=c.flip)==null?void 0:a.overflows)||[];if(v&&G.push(q[C]),x){const ie=Ik(l,d,M);G.push(q[ie[0]],q[ie[1]])}if(W=[...W,{placement:l,overflows:G}],!G.every(ie=>ie<=0)){var ce,se;const ie=(((ce=c.flip)==null?void 0:ce.index)||0)+1,oe=H[ie];if(oe)return{data:{index:ie,overflows:W},reset:{placement:oe}};let O=(se=W.filter(V=>V.overflows[0]<=0).sort((V,U)=>V.overflows[1]-U.overflows[1])[0])==null?void 0:se.placement;if(!O)switch(w){case"bestFit":{var B;const V=(B=W.filter(U=>{if(L){const J=Ha(U.placement);return J===E||J==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(J=>J>0).reduce((J,k)=>J+k,0)]).sort((U,J)=>U[1]-J[1])[0])==null?void 0:B[0];V&&(O=V);break}case"initialPlacement":O=f;break}if(l!==O)return{reset:{placement:O}}}return{}}}};function ow(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function cw(e){return Ok.some(t=>e[t]>=0)}const Vk=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:a="referenceHidden",...l}=na(e,t);switch(a){case"referenceHidden":{const c=await vc(t,{...l,elementContext:"reference"}),d=ow(c,r.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:cw(d)}}}case"escaped":{const c=await vc(t,{...l,altBoundary:!0}),d=ow(c,r.floating);return{data:{escapedOffsets:d,escaped:cw(d)}}}default:return{}}}}};async function Yk(e,t){const{placement:r,platform:a,elements:l}=e,c=await(a.isRTL==null?void 0:a.isRTL(l.floating)),d=ra(r),f=Zl(r),h=Ha(r)==="y",p=["left","top"].includes(d)?-1:1,v=c&&h?-1:1,x=na(t,e);let{mainAxis:b,crossAxis:w,alignmentAxis:j}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return f&&typeof j=="number"&&(w=f==="end"?j*-1:j),h?{x:w*v,y:b*p}:{x:b*p,y:w*v}}const Gk=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,a;const{x:l,y:c,placement:d,middlewareData:f}=t,h=await Yk(t,e);return d===((r=f.offset)==null?void 0:r.placement)&&(a=f.arrow)!=null&&a.alignmentOffset?{}:{x:l+h.x,y:c+h.y,data:{...h,placement:d}}}}},Wk=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:a,placement:l}=t,{mainAxis:c=!0,crossAxis:d=!1,limiter:f={fn:_=>{let{x:C,y:E}=_;return{x:C,y:E}}},...h}=na(e,t),p={x:r,y:a},v=await vc(t,h),x=Ha(ra(l)),b=Rg(x);let w=p[b],j=p[x];if(c){const _=b==="y"?"top":"left",C=b==="y"?"bottom":"right",E=w+v[_],R=w-v[C];w=Hp(E,w,R)}if(d){const _=x==="y"?"top":"left",C=x==="y"?"bottom":"right",E=j+v[_],R=j-v[C];j=Hp(E,j,R)}const N=f.fn({...t,[b]:w,[x]:j});return{...N,data:{x:N.x-r,y:N.y-a,enabled:{[b]:c,[x]:d}}}}}},Xk=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:a,placement:l,rects:c,middlewareData:d}=t,{offset:f=0,mainAxis:h=!0,crossAxis:p=!0}=na(e,t),v={x:r,y:a},x=Ha(l),b=Rg(x);let w=v[b],j=v[x];const N=na(f,t),_=typeof N=="number"?{mainAxis:N,crossAxis:0}:{mainAxis:0,crossAxis:0,...N};if(h){const R=b==="y"?"height":"width",M=c.reference[b]-c.floating[R]+_.mainAxis,T=c.reference[b]+c.reference[R]-_.mainAxis;w<M?w=M:w>T&&(w=T)}if(p){var C,E;const R=b==="y"?"width":"height",M=["top","left"].includes(ra(l)),T=c.reference[x]-c.floating[R]+(M&&((C=d.offset)==null?void 0:C[x])||0)+(M?0:_.crossAxis),L=c.reference[x]+c.reference[R]+(M?0:((E=d.offset)==null?void 0:E[x])||0)-(M?_.crossAxis:0);j<T?j=T:j>L&&(j=L)}return{[b]:w,[x]:j}}}},Kk=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,a;const{placement:l,rects:c,platform:d,elements:f}=t,{apply:h=()=>{},...p}=na(e,t),v=await vc(t,p),x=ra(l),b=Zl(l),w=Ha(l)==="y",{width:j,height:N}=c.floating;let _,C;x==="top"||x==="bottom"?(_=x,C=b===(await(d.isRTL==null?void 0:d.isRTL(f.floating))?"start":"end")?"left":"right"):(C=x,_=b==="end"?"top":"bottom");const E=N-v.top-v.bottom,R=j-v.left-v.right,M=Ba(N-v[_],E),T=Ba(j-v[C],R),L=!t.middlewareData.shift;let H=M,q=T;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(q=R),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(H=E),L&&!b){const W=Rr(v.left,0),ce=Rr(v.right,0),se=Rr(v.top,0),B=Rr(v.bottom,0);w?q=j-2*(W!==0||ce!==0?W+ce:Rr(v.left,v.right)):H=N-2*(se!==0||B!==0?se+B:Rr(v.top,v.bottom))}await h({...t,availableWidth:q,availableHeight:H});const G=await d.getDimensions(f.floating);return j!==G.width||N!==G.height?{reset:{rects:!0}}:{}}}};function rf(){return typeof window<"u"}function Jl(e){return h1(e)?(e.nodeName||"").toLowerCase():"#document"}function Tr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ks(e){var t;return(t=(h1(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function h1(e){return rf()?e instanceof Node||e instanceof Tr(e).Node:!1}function ss(e){return rf()?e instanceof Element||e instanceof Tr(e).Element:!1}function Ts(e){return rf()?e instanceof HTMLElement||e instanceof Tr(e).HTMLElement:!1}function uw(e){return!rf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Tr(e).ShadowRoot}function Oc(e){const{overflow:t,overflowX:r,overflowY:a,display:l}=as(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!["inline","contents"].includes(l)}function Qk(e){return["table","td","th"].includes(Jl(e))}function sf(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ag(e){const t=kg(),r=ss(e)?as(e):e;return["transform","translate","scale","rotate","perspective"].some(a=>r[a]?r[a]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(r.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(r.contain||"").includes(a))}function Zk(e){let t=qa(e);for(;Ts(t)&&!Pl(t);){if(Ag(t))return t;if(sf(t))return null;t=qa(t)}return null}function kg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Pl(e){return["html","body","#document"].includes(Jl(e))}function as(e){return Tr(e).getComputedStyle(e)}function af(e){return ss(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qa(e){if(Jl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||uw(e)&&e.host||ks(e);return uw(t)?t.host:t}function m1(e){const t=qa(e);return Pl(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ts(t)&&Oc(t)?t:m1(t)}function xc(e,t,r){var a;t===void 0&&(t=[]),r===void 0&&(r=!0);const l=m1(e),c=l===((a=e.ownerDocument)==null?void 0:a.body),d=Tr(l);if(c){const f=Fp(d);return t.concat(d,d.visualViewport||[],Oc(l)?l:[],f&&r?xc(f):[])}return t.concat(l,xc(l,[],r))}function Fp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function p1(e){const t=as(e);let r=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const l=Ts(e),c=l?e.offsetWidth:r,d=l?e.offsetHeight:a,f=Dd(r)!==c||Dd(a)!==d;return f&&(r=c,a=d),{width:r,height:a,$:f}}function Dg(e){return ss(e)?e:e.contextElement}function Cl(e){const t=Dg(e);if(!Ts(t))return Cs(1);const r=t.getBoundingClientRect(),{width:a,height:l,$:c}=p1(t);let d=(c?Dd(r.width):r.width)/a,f=(c?Dd(r.height):r.height)/l;return(!d||!Number.isFinite(d))&&(d=1),(!f||!Number.isFinite(f))&&(f=1),{x:d,y:f}}const Jk=Cs(0);function g1(e){const t=Tr(e);return!kg()||!t.visualViewport?Jk:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function e4(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Tr(e)?!1:t}function Ei(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=!1);const l=e.getBoundingClientRect(),c=Dg(e);let d=Cs(1);t&&(a?ss(a)&&(d=Cl(a)):d=Cl(e));const f=e4(c,r,a)?g1(c):Cs(0);let h=(l.left+f.x)/d.x,p=(l.top+f.y)/d.y,v=l.width/d.x,x=l.height/d.y;if(c){const b=Tr(c),w=a&&ss(a)?Tr(a):a;let j=b,N=Fp(j);for(;N&&a&&w!==j;){const _=Cl(N),C=N.getBoundingClientRect(),E=as(N),R=C.left+(N.clientLeft+parseFloat(E.paddingLeft))*_.x,M=C.top+(N.clientTop+parseFloat(E.paddingTop))*_.y;h*=_.x,p*=_.y,v*=_.x,x*=_.y,h+=R,p+=M,j=Tr(N),N=Fp(j)}}return Pd({width:v,height:x,x:h,y:p})}function Og(e,t){const r=af(e).scrollLeft;return t?t.left+r:Ei(ks(e)).left+r}function v1(e,t,r){r===void 0&&(r=!1);const a=e.getBoundingClientRect(),l=a.left+t.scrollLeft-(r?0:Og(e,a)),c=a.top+t.scrollTop;return{x:l,y:c}}function t4(e){let{elements:t,rect:r,offsetParent:a,strategy:l}=e;const c=l==="fixed",d=ks(a),f=t?sf(t.floating):!1;if(a===d||f&&c)return r;let h={scrollLeft:0,scrollTop:0},p=Cs(1);const v=Cs(0),x=Ts(a);if((x||!x&&!c)&&((Jl(a)!=="body"||Oc(d))&&(h=af(a)),Ts(a))){const w=Ei(a);p=Cl(a),v.x=w.x+a.clientLeft,v.y=w.y+a.clientTop}const b=d&&!x&&!c?v1(d,h,!0):Cs(0);return{width:r.width*p.x,height:r.height*p.y,x:r.x*p.x-h.scrollLeft*p.x+v.x+b.x,y:r.y*p.y-h.scrollTop*p.y+v.y+b.y}}function n4(e){return Array.from(e.getClientRects())}function r4(e){const t=ks(e),r=af(e),a=e.ownerDocument.body,l=Rr(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),c=Rr(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let d=-r.scrollLeft+Og(e);const f=-r.scrollTop;return as(a).direction==="rtl"&&(d+=Rr(t.clientWidth,a.clientWidth)-l),{width:l,height:c,x:d,y:f}}function s4(e,t){const r=Tr(e),a=ks(e),l=r.visualViewport;let c=a.clientWidth,d=a.clientHeight,f=0,h=0;if(l){c=l.width,d=l.height;const p=kg();(!p||p&&t==="fixed")&&(f=l.offsetLeft,h=l.offsetTop)}return{width:c,height:d,x:f,y:h}}function a4(e,t){const r=Ei(e,!0,t==="fixed"),a=r.top+e.clientTop,l=r.left+e.clientLeft,c=Ts(e)?Cl(e):Cs(1),d=e.clientWidth*c.x,f=e.clientHeight*c.y,h=l*c.x,p=a*c.y;return{width:d,height:f,x:h,y:p}}function dw(e,t,r){let a;if(t==="viewport")a=s4(e,r);else if(t==="document")a=r4(ks(e));else if(ss(t))a=a4(t,r);else{const l=g1(e);a={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return Pd(a)}function x1(e,t){const r=qa(e);return r===t||!ss(r)||Pl(r)?!1:as(r).position==="fixed"||x1(r,t)}function i4(e,t){const r=t.get(e);if(r)return r;let a=xc(e,[],!1).filter(f=>ss(f)&&Jl(f)!=="body"),l=null;const c=as(e).position==="fixed";let d=c?qa(e):e;for(;ss(d)&&!Pl(d);){const f=as(d),h=Ag(d);!h&&f.position==="fixed"&&(l=null),(c?!h&&!l:!h&&f.position==="static"&&!!l&&["absolute","fixed"].includes(l.position)||Oc(d)&&!h&&x1(e,d))?a=a.filter(v=>v!==d):l=f,d=qa(d)}return t.set(e,a),a}function l4(e){let{element:t,boundary:r,rootBoundary:a,strategy:l}=e;const d=[...r==="clippingAncestors"?sf(t)?[]:i4(t,this._c):[].concat(r),a],f=d[0],h=d.reduce((p,v)=>{const x=dw(t,v,l);return p.top=Rr(x.top,p.top),p.right=Ba(x.right,p.right),p.bottom=Ba(x.bottom,p.bottom),p.left=Rr(x.left,p.left),p},dw(t,f,l));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function o4(e){const{width:t,height:r}=p1(e);return{width:t,height:r}}function c4(e,t,r){const a=Ts(t),l=ks(t),c=r==="fixed",d=Ei(e,!0,c,t);let f={scrollLeft:0,scrollTop:0};const h=Cs(0);if(a||!a&&!c)if((Jl(t)!=="body"||Oc(l))&&(f=af(t)),a){const b=Ei(t,!0,c,t);h.x=b.x+t.clientLeft,h.y=b.y+t.clientTop}else l&&(h.x=Og(l));const p=l&&!a&&!c?v1(l,f):Cs(0),v=d.left+f.scrollLeft-h.x-p.x,x=d.top+f.scrollTop-h.y-p.y;return{x:v,y:x,width:d.width,height:d.height}}function np(e){return as(e).position==="static"}function fw(e,t){if(!Ts(e)||as(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return ks(e)===r&&(r=r.ownerDocument.body),r}function y1(e,t){const r=Tr(e);if(sf(e))return r;if(!Ts(e)){let l=qa(e);for(;l&&!Pl(l);){if(ss(l)&&!np(l))return l;l=qa(l)}return r}let a=fw(e,t);for(;a&&Qk(a)&&np(a);)a=fw(a,t);return a&&Pl(a)&&np(a)&&!Ag(a)?r:a||Zk(e)||r}const u4=async function(e){const t=this.getOffsetParent||y1,r=this.getDimensions,a=await r(e.floating);return{reference:c4(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function d4(e){return as(e).direction==="rtl"}const f4={convertOffsetParentRelativeRectToViewportRelativeRect:t4,getDocumentElement:ks,getClippingRect:l4,getOffsetParent:y1,getElementRects:u4,getClientRects:n4,getDimensions:o4,getScale:Cl,isElement:ss,isRTL:d4};function b1(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function h4(e,t){let r=null,a;const l=ks(e);function c(){var f;clearTimeout(a),(f=r)==null||f.disconnect(),r=null}function d(f,h){f===void 0&&(f=!1),h===void 0&&(h=1),c();const p=e.getBoundingClientRect(),{left:v,top:x,width:b,height:w}=p;if(f||t(),!b||!w)return;const j=hd(x),N=hd(l.clientWidth-(v+b)),_=hd(l.clientHeight-(x+w)),C=hd(v),R={rootMargin:-j+"px "+-N+"px "+-_+"px "+-C+"px",threshold:Rr(0,Ba(1,h))||1};let M=!0;function T(L){const H=L[0].intersectionRatio;if(H!==h){if(!M)return d();H?d(!1,H):a=setTimeout(()=>{d(!1,1e-7)},1e3)}H===1&&!b1(p,e.getBoundingClientRect())&&d(),M=!1}try{r=new IntersectionObserver(T,{...R,root:l.ownerDocument})}catch{r=new IntersectionObserver(T,R)}r.observe(e)}return d(!0),c}function m4(e,t,r,a){a===void 0&&(a={});const{ancestorScroll:l=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:h=!1}=a,p=Dg(e),v=l||c?[...p?xc(p):[],...xc(t)]:[];v.forEach(C=>{l&&C.addEventListener("scroll",r,{passive:!0}),c&&C.addEventListener("resize",r)});const x=p&&f?h4(p,r):null;let b=-1,w=null;d&&(w=new ResizeObserver(C=>{let[E]=C;E&&E.target===p&&w&&(w.unobserve(t),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var R;(R=w)==null||R.observe(t)})),r()}),p&&!h&&w.observe(p),w.observe(t));let j,N=h?Ei(e):null;h&&_();function _(){const C=Ei(e);N&&!b1(N,C)&&r(),N=C,j=requestAnimationFrame(_)}return r(),()=>{var C;v.forEach(E=>{l&&E.removeEventListener("scroll",r),c&&E.removeEventListener("resize",r)}),x==null||x(),(C=w)==null||C.disconnect(),w=null,h&&cancelAnimationFrame(j)}}const p4=Gk,g4=Wk,v4=Fk,x4=Kk,y4=Vk,hw=qk,b4=Xk,w4=(e,t,r)=>{const a=new Map,l={platform:f4,...r},c={...l.platform,_c:a};return Hk(e,t,{...l,platform:c})};var Sd=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Ld(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,a,l;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(a=r;a--!==0;)if(!Ld(e[a],t[a]))return!1;return!0}if(l=Object.keys(e),r=l.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!{}.hasOwnProperty.call(t,l[a]))return!1;for(a=r;a--!==0;){const c=l[a];if(!(c==="_owner"&&e.$$typeof)&&!Ld(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function w1(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function mw(e,t){const r=w1(e);return Math.round(t*r)/r}function rp(e){const t=m.useRef(e);return Sd(()=>{t.current=e}),t}function j4(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:l,elements:{reference:c,floating:d}={},transform:f=!0,whileElementsMounted:h,open:p}=e,[v,x]=m.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[b,w]=m.useState(a);Ld(b,a)||w(a);const[j,N]=m.useState(null),[_,C]=m.useState(null),E=m.useCallback(U=>{U!==L.current&&(L.current=U,N(U))},[]),R=m.useCallback(U=>{U!==H.current&&(H.current=U,C(U))},[]),M=c||j,T=d||_,L=m.useRef(null),H=m.useRef(null),q=m.useRef(v),G=h!=null,W=rp(h),ce=rp(l),se=rp(p),B=m.useCallback(()=>{if(!L.current||!H.current)return;const U={placement:t,strategy:r,middleware:b};ce.current&&(U.platform=ce.current),w4(L.current,H.current,U).then(J=>{const k={...J,isPositioned:se.current!==!1};ie.current&&!Ld(q.current,k)&&(q.current=k,Ns.flushSync(()=>{x(k)}))})},[b,t,r,ce,se]);Sd(()=>{p===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,x(U=>({...U,isPositioned:!1})))},[p]);const ie=m.useRef(!1);Sd(()=>(ie.current=!0,()=>{ie.current=!1}),[]),Sd(()=>{if(M&&(L.current=M),T&&(H.current=T),M&&T){if(W.current)return W.current(M,T,B);B()}},[M,T,B,W,G]);const oe=m.useMemo(()=>({reference:L,floating:H,setReference:E,setFloating:R}),[E,R]),O=m.useMemo(()=>({reference:M,floating:T}),[M,T]),V=m.useMemo(()=>{const U={position:r,left:0,top:0};if(!O.floating)return U;const J=mw(O.floating,v.x),k=mw(O.floating,v.y);return f?{...U,transform:"translate("+J+"px, "+k+"px)",...w1(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:J,top:k}},[r,f,O.floating,v.x,v.y]);return m.useMemo(()=>({...v,update:B,refs:oe,elements:O,floatingStyles:V}),[v,B,oe,O,V])}const _4=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:a,padding:l}=typeof e=="function"?e(r):e;return a&&t(a)?a.current!=null?hw({element:a.current,padding:l}).fn(r):{}:a?hw({element:a,padding:l}).fn(r):{}}}},N4=(e,t)=>({...p4(e),options:[e,t]}),S4=(e,t)=>({...g4(e),options:[e,t]}),E4=(e,t)=>({...b4(e),options:[e,t]}),C4=(e,t)=>({...v4(e),options:[e,t]}),R4=(e,t)=>({...x4(e),options:[e,t]}),T4=(e,t)=>({...y4(e),options:[e,t]}),M4=(e,t)=>({..._4(e),options:[e,t]});var A4="Arrow",j1=m.forwardRef((e,t)=>{const{children:r,width:a=10,height:l=5,...c}=e;return s.jsx(Ze.svg,{...c,ref:t,width:a,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});j1.displayName=A4;var k4=j1;function Pg(e){const[t,r]=m.useState(void 0);return Wn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const c=l[0];let d,f;if("borderBoxSize"in c){const h=c.borderBoxSize,p=Array.isArray(h)?h[0]:h;d=p.inlineSize,f=p.blockSize}else d=e.offsetWidth,f=e.offsetHeight;r({width:d,height:f})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else r(void 0)},[e]),t}var Lg="Popper",[_1,Ya]=cr(Lg),[D4,N1]=_1(Lg),S1=e=>{const{__scopePopper:t,children:r}=e,[a,l]=m.useState(null);return s.jsx(D4,{scope:t,anchor:a,onAnchorChange:l,children:r})};S1.displayName=Lg;var E1="PopperAnchor",C1=m.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:a,...l}=e,c=N1(E1,r),d=m.useRef(null),f=St(t,d);return m.useEffect(()=>{c.onAnchorChange((a==null?void 0:a.current)||d.current)}),a?null:s.jsx(Ze.div,{...l,ref:f})});C1.displayName=E1;var Ig="PopperContent",[O4,P4]=_1(Ig),R1=m.forwardRef((e,t)=>{var K,re,pe,ue,_e,Re;const{__scopePopper:r,side:a="bottom",sideOffset:l=0,align:c="center",alignOffset:d=0,arrowPadding:f=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:v=0,sticky:x="partial",hideWhenDetached:b=!1,updatePositionStrategy:w="optimized",onPlaced:j,...N}=e,_=N1(Ig,r),[C,E]=m.useState(null),R=St(t,lt=>E(lt)),[M,T]=m.useState(null),L=Pg(M),H=(L==null?void 0:L.width)??0,q=(L==null?void 0:L.height)??0,G=a+(c!=="center"?"-"+c:""),W=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},ce=Array.isArray(p)?p:[p],se=ce.length>0,B={padding:W,boundary:ce.filter(I4),altBoundary:se},{refs:ie,floatingStyles:oe,placement:O,isPositioned:V,middlewareData:U}=j4({strategy:"fixed",placement:G,whileElementsMounted:(...lt)=>m4(...lt,{animationFrame:w==="always"}),elements:{reference:_.anchor},middleware:[N4({mainAxis:l+q,alignmentAxis:d}),h&&S4({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?E4():void 0,...B}),h&&C4({...B}),R4({...B,apply:({elements:lt,rects:rt,availableWidth:ge,availableHeight:me})=>{const{width:De,height:ye}=rt.reference,je=lt.floating.style;je.setProperty("--radix-popper-available-width",`${ge}px`),je.setProperty("--radix-popper-available-height",`${me}px`),je.setProperty("--radix-popper-anchor-width",`${De}px`),je.setProperty("--radix-popper-anchor-height",`${ye}px`)}}),M&&M4({element:M,padding:f}),z4({arrowWidth:H,arrowHeight:q}),b&&T4({strategy:"referenceHidden",...B})]}),[J,k]=A1(O),P=Mr(j);Wn(()=>{V&&(P==null||P())},[V,P]);const F=(K=U.arrow)==null?void 0:K.x,X=(re=U.arrow)==null?void 0:re.y,D=((pe=U.arrow)==null?void 0:pe.centerOffset)!==0,[z,$]=m.useState();return Wn(()=>{C&&$(window.getComputedStyle(C).zIndex)},[C]),s.jsx("div",{ref:ie.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:V?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:z,"--radix-popper-transform-origin":[(ue=U.transformOrigin)==null?void 0:ue.x,(_e=U.transformOrigin)==null?void 0:_e.y].join(" "),...((Re=U.hide)==null?void 0:Re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(O4,{scope:r,placedSide:J,onArrowChange:T,arrowX:F,arrowY:X,shouldHideArrow:D,children:s.jsx(Ze.div,{"data-side":J,"data-align":k,...N,ref:R,style:{...N.style,animation:V?void 0:"none"}})})})});R1.displayName=Ig;var T1="PopperArrow",L4={top:"bottom",right:"left",bottom:"top",left:"right"},M1=m.forwardRef(function(t,r){const{__scopePopper:a,...l}=t,c=P4(T1,a),d=L4[c.placedSide];return s.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:s.jsx(k4,{...l,ref:r,style:{...l.style,display:"block"}})})});M1.displayName=T1;function I4(e){return e!==null}var z4=e=>({name:"transformOrigin",options:e,fn(t){var _,C,E;const{placement:r,rects:a,middlewareData:l}=t,d=((_=l.arrow)==null?void 0:_.centerOffset)!==0,f=d?0:e.arrowWidth,h=d?0:e.arrowHeight,[p,v]=A1(r),x={start:"0%",center:"50%",end:"100%"}[v],b=(((C=l.arrow)==null?void 0:C.x)??0)+f/2,w=(((E=l.arrow)==null?void 0:E.y)??0)+h/2;let j="",N="";return p==="bottom"?(j=d?x:`${b}px`,N=`${-h}px`):p==="top"?(j=d?x:`${b}px`,N=`${a.floating.height+h}px`):p==="right"?(j=`${-h}px`,N=d?x:`${w}px`):p==="left"&&(j=`${a.floating.width+h}px`,N=d?x:`${w}px`),{data:{x:j,y:N}}}});function A1(e){const[t,r="center"]=e.split("-");return[t,r]}var zg=S1,Pc=C1,lf=R1,of=M1,U4="Portal",Lc=m.forwardRef((e,t)=>{var f;const{container:r,...a}=e,[l,c]=m.useState(!1);Wn(()=>c(!0),[]);const d=r||l&&((f=globalThis==null?void 0:globalThis.document)==null?void 0:f.body);return d?Sj.createPortal(s.jsx(Ze.div,{...a,ref:t}),d):null});Lc.displayName=U4;function $4(e,t){return m.useReducer((r,a)=>t[r][a]??r,e)}var Dr=e=>{const{present:t,children:r}=e,a=B4(t),l=typeof r=="function"?r({present:a.isPresent}):m.Children.only(r),c=St(a.ref,H4(l));return typeof r=="function"||a.isPresent?m.cloneElement(l,{ref:c}):null};Dr.displayName="Presence";function B4(e){const[t,r]=m.useState(),a=m.useRef({}),l=m.useRef(e),c=m.useRef("none"),d=e?"mounted":"unmounted",[f,h]=$4(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const p=md(a.current);c.current=f==="mounted"?p:"none"},[f]),Wn(()=>{const p=a.current,v=l.current;if(v!==e){const b=c.current,w=md(p);e?h("MOUNT"):w==="none"||(p==null?void 0:p.display)==="none"?h("UNMOUNT"):h(v&&b!==w?"ANIMATION_OUT":"UNMOUNT"),l.current=e}},[e,h]),Wn(()=>{if(t){let p;const v=t.ownerDocument.defaultView??window,x=w=>{const N=md(a.current).includes(w.animationName);if(w.target===t&&N&&(h("ANIMATION_END"),!l.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",p=v.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},b=w=>{w.target===t&&(c.current=md(a.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",x),t.addEventListener("animationend",x),()=>{v.clearTimeout(p),t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",x),t.removeEventListener("animationend",x)}}else h("ANIMATION_END")},[t,h]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:m.useCallback(p=>{p&&(a.current=getComputedStyle(p)),r(p)},[])}}function md(e){return(e==null?void 0:e.animationName)||"none"}function H4(e){var a,l;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(l=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:l.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var sp="rovingFocusGroup.onEntryFocus",q4={bubbles:!1,cancelable:!0},cf="RovingFocusGroup",[Vp,k1,F4]=Cg(cf),[V4,uf]=cr(cf,[F4]),[Y4,G4]=V4(cf),D1=m.forwardRef((e,t)=>s.jsx(Vp.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Vp.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(W4,{...e,ref:t})})}));D1.displayName=cf;var W4=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:l=!1,dir:c,currentTabStopId:d,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:v=!1,...x}=e,b=m.useRef(null),w=St(t,b),j=tf(c),[N=null,_]=$a({prop:d,defaultProp:f,onChange:h}),[C,E]=m.useState(!1),R=Mr(p),M=k1(r),T=m.useRef(!1),[L,H]=m.useState(0);return m.useEffect(()=>{const q=b.current;if(q)return q.addEventListener(sp,R),()=>q.removeEventListener(sp,R)},[R]),s.jsx(Y4,{scope:r,orientation:a,dir:j,loop:l,currentTabStopId:N,onItemFocus:m.useCallback(q=>_(q),[_]),onItemShiftTab:m.useCallback(()=>E(!0),[]),onFocusableItemAdd:m.useCallback(()=>H(q=>q+1),[]),onFocusableItemRemove:m.useCallback(()=>H(q=>q-1),[]),children:s.jsx(Ze.div,{tabIndex:C||L===0?-1:0,"data-orientation":a,...x,ref:w,style:{outline:"none",...e.style},onMouseDown:Ae(e.onMouseDown,()=>{T.current=!0}),onFocus:Ae(e.onFocus,q=>{const G=!T.current;if(q.target===q.currentTarget&&G&&!C){const W=new CustomEvent(sp,q4);if(q.currentTarget.dispatchEvent(W),!W.defaultPrevented){const ce=M().filter(O=>O.focusable),se=ce.find(O=>O.active),B=ce.find(O=>O.id===N),oe=[se,B,...ce].filter(Boolean).map(O=>O.ref.current);L1(oe,v)}}T.current=!1}),onBlur:Ae(e.onBlur,()=>E(!1))})})}),O1="RovingFocusGroupItem",P1=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:l=!1,tabStopId:c,...d}=e,f=Es(),h=c||f,p=G4(O1,r),v=p.currentTabStopId===h,x=k1(r),{onFocusableItemAdd:b,onFocusableItemRemove:w}=p;return m.useEffect(()=>{if(a)return b(),()=>w()},[a,b,w]),s.jsx(Vp.ItemSlot,{scope:r,id:h,focusable:a,active:l,children:s.jsx(Ze.span,{tabIndex:v?0:-1,"data-orientation":p.orientation,...d,ref:t,onMouseDown:Ae(e.onMouseDown,j=>{a?p.onItemFocus(h):j.preventDefault()}),onFocus:Ae(e.onFocus,()=>p.onItemFocus(h)),onKeyDown:Ae(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){p.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const N=Q4(j,p.orientation,p.dir);if(N!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let C=x().filter(E=>E.focusable).map(E=>E.ref.current);if(N==="last")C.reverse();else if(N==="prev"||N==="next"){N==="prev"&&C.reverse();const E=C.indexOf(j.currentTarget);C=p.loop?Z4(C,E+1):C.slice(E+1)}setTimeout(()=>L1(C))}})})})});P1.displayName=O1;var X4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function K4(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Q4(e,t,r){const a=K4(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return X4[a]}function L1(e,t=!1){const r=document.activeElement;for(const a of e)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}function Z4(e,t){return e.map((r,a)=>e[(t+a)%e.length])}var I1=D1,z1=P1,J4=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},wl=new WeakMap,pd=new WeakMap,gd={},ap=0,U1=function(e){return e&&(e.host||U1(e.parentNode))},eD=function(e,t){return t.map(function(r){if(e.contains(r))return r;var a=U1(r);return a&&e.contains(a)?a:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},tD=function(e,t,r,a){var l=eD(t,Array.isArray(e)?e:[e]);gd[r]||(gd[r]=new WeakMap);var c=gd[r],d=[],f=new Set,h=new Set(l),p=function(x){!x||f.has(x)||(f.add(x),p(x.parentNode))};l.forEach(p);var v=function(x){!x||h.has(x)||Array.prototype.forEach.call(x.children,function(b){if(f.has(b))v(b);else try{var w=b.getAttribute(a),j=w!==null&&w!=="false",N=(wl.get(b)||0)+1,_=(c.get(b)||0)+1;wl.set(b,N),c.set(b,_),d.push(b),N===1&&j&&pd.set(b,!0),_===1&&b.setAttribute(r,"true"),j||b.setAttribute(a,"true")}catch(C){console.error("aria-hidden: cannot operate on ",b,C)}})};return v(t),f.clear(),ap++,function(){d.forEach(function(x){var b=wl.get(x)-1,w=c.get(x)-1;wl.set(x,b),c.set(x,w),b||(pd.has(x)||x.removeAttribute(a),pd.delete(x)),w||x.removeAttribute(r)}),ap--,ap||(wl=new WeakMap,wl=new WeakMap,pd=new WeakMap,gd={})}},df=function(e,t,r){r===void 0&&(r="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),l=J4(e);return l?(a.push.apply(a,Array.from(l.querySelectorAll("[aria-live]"))),tD(a,l,r,"aria-hidden")):function(){return null}},ws=function(){return ws=Object.assign||function(t){for(var r,a=1,l=arguments.length;a<l;a++){r=arguments[a];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])}return t},ws.apply(this,arguments)};function $1(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r}function nD(e,t,r){if(r||arguments.length===2)for(var a=0,l=t.length,c;a<l;a++)(c||!(a in t))&&(c||(c=Array.prototype.slice.call(t,0,a)),c[a]=t[a]);return e.concat(c||Array.prototype.slice.call(t))}var Ed="right-scroll-bar-position",Cd="width-before-scroll-bar",rD="with-scroll-bars-hidden",sD="--removed-body-scroll-bar-size";function ip(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function aD(e,t){var r=m.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(a){var l=r.value;l!==a&&(r.value=a,r.callback(a,l))}}}})[0];return r.callback=t,r.facade}var iD=typeof window<"u"?m.useLayoutEffect:m.useEffect,pw=new WeakMap;function lD(e,t){var r=aD(null,function(a){return e.forEach(function(l){return ip(l,a)})});return iD(function(){var a=pw.get(r);if(a){var l=new Set(a),c=new Set(e),d=r.current;l.forEach(function(f){c.has(f)||ip(f,null)}),c.forEach(function(f){l.has(f)||ip(f,d)})}pw.set(r,e)},[e]),r}function oD(e){return e}function cD(e,t){t===void 0&&(t=oD);var r=[],a=!1,l={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(c){var d=t(c,a);return r.push(d),function(){r=r.filter(function(f){return f!==d})}},assignSyncMedium:function(c){for(a=!0;r.length;){var d=r;r=[],d.forEach(c)}r={push:function(f){return c(f)},filter:function(){return r}}},assignMedium:function(c){a=!0;var d=[];if(r.length){var f=r;r=[],f.forEach(c),d=r}var h=function(){var v=d;d=[],v.forEach(c)},p=function(){return Promise.resolve().then(h)};p(),r={push:function(v){d.push(v),p()},filter:function(v){return d=d.filter(v),r}}}};return l}function uD(e){e===void 0&&(e={});var t=cD(null);return t.options=ws({async:!0,ssr:!1},e),t}var B1=function(e){var t=e.sideCar,r=$1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return m.createElement(a,ws({},r))};B1.isSideCarExport=!0;function dD(e,t){return e.useMedium(t),B1}var H1=uD(),lp=function(){},ff=m.forwardRef(function(e,t){var r=m.useRef(null),a=m.useState({onScrollCapture:lp,onWheelCapture:lp,onTouchMoveCapture:lp}),l=a[0],c=a[1],d=e.forwardProps,f=e.children,h=e.className,p=e.removeScrollBar,v=e.enabled,x=e.shards,b=e.sideCar,w=e.noIsolation,j=e.inert,N=e.allowPinchZoom,_=e.as,C=_===void 0?"div":_,E=e.gapMode,R=$1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=b,T=lD([r,t]),L=ws(ws({},R),l);return m.createElement(m.Fragment,null,v&&m.createElement(M,{sideCar:H1,removeScrollBar:p,shards:x,noIsolation:w,inert:j,setCallbacks:c,allowPinchZoom:!!N,lockRef:r,gapMode:E}),d?m.cloneElement(m.Children.only(f),ws(ws({},L),{ref:T})):m.createElement(C,ws({},L,{className:h,ref:T}),f))});ff.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ff.classNames={fullWidth:Cd,zeroRight:Ed};var fD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function hD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=fD();return t&&e.setAttribute("nonce",t),e}function mD(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function pD(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var gD=function(){var e=0,t=null;return{add:function(r){e==0&&(t=hD())&&(mD(t,r),pD(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},vD=function(){var e=gD();return function(t,r){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},q1=function(){var e=vD(),t=function(r){var a=r.styles,l=r.dynamic;return e(a,l),null};return t},xD={left:0,top:0,right:0,gap:0},op=function(e){return parseInt(e||"",10)||0},yD=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],a=t[e==="padding"?"paddingTop":"marginTop"],l=t[e==="padding"?"paddingRight":"marginRight"];return[op(r),op(a),op(l)]},bD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return xD;var t=yD(e),r=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-r+t[2]-t[0])}},wD=q1(),Rl="data-scroll-locked",jD=function(e,t,r,a){var l=e.left,c=e.top,d=e.right,f=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(rD,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(f,"px ").concat(a,`;
  }
  body[`).concat(Rl,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),r==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(a,`;
    `),r==="padding"&&"padding-right: ".concat(f,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ed,` {
    right: `).concat(f,"px ").concat(a,`;
  }
  
  .`).concat(Cd,` {
    margin-right: `).concat(f,"px ").concat(a,`;
  }
  
  .`).concat(Ed," .").concat(Ed,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Cd," .").concat(Cd,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(Rl,`] {
    `).concat(sD,": ").concat(f,`px;
  }
`)},gw=function(){var e=parseInt(document.body.getAttribute(Rl)||"0",10);return isFinite(e)?e:0},_D=function(){m.useEffect(function(){return document.body.setAttribute(Rl,(gw()+1).toString()),function(){var e=gw()-1;e<=0?document.body.removeAttribute(Rl):document.body.setAttribute(Rl,e.toString())}},[])},ND=function(e){var t=e.noRelative,r=e.noImportant,a=e.gapMode,l=a===void 0?"margin":a;_D();var c=m.useMemo(function(){return bD(l)},[l]);return m.createElement(wD,{styles:jD(c,!t,l,r?"":"!important")})},Yp=!1;if(typeof window<"u")try{var vd=Object.defineProperty({},"passive",{get:function(){return Yp=!0,!0}});window.addEventListener("test",vd,vd),window.removeEventListener("test",vd,vd)}catch{Yp=!1}var jl=Yp?{passive:!1}:!1,SD=function(e){return e.tagName==="TEXTAREA"},F1=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!SD(e)&&r[t]==="visible")},ED=function(e){return F1(e,"overflowY")},CD=function(e){return F1(e,"overflowX")},vw=function(e,t){var r=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var l=V1(e,a);if(l){var c=Y1(e,a),d=c[1],f=c[2];if(d>f)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},RD=function(e){var t=e.scrollTop,r=e.scrollHeight,a=e.clientHeight;return[t,r,a]},TD=function(e){var t=e.scrollLeft,r=e.scrollWidth,a=e.clientWidth;return[t,r,a]},V1=function(e,t){return e==="v"?ED(t):CD(t)},Y1=function(e,t){return e==="v"?RD(t):TD(t)},MD=function(e,t){return e==="h"&&t==="rtl"?-1:1},AD=function(e,t,r,a,l){var c=MD(e,window.getComputedStyle(t).direction),d=c*a,f=r.target,h=t.contains(f),p=!1,v=d>0,x=0,b=0;do{var w=Y1(e,f),j=w[0],N=w[1],_=w[2],C=N-_-c*j;(j||C)&&V1(e,f)&&(x+=C,b+=j),f instanceof ShadowRoot?f=f.host:f=f.parentNode}while(!h&&f!==document.body||h&&(t.contains(f)||t===f));return(v&&Math.abs(x)<1||!v&&Math.abs(b)<1)&&(p=!0),p},xd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},xw=function(e){return[e.deltaX,e.deltaY]},yw=function(e){return e&&"current"in e?e.current:e},kD=function(e,t){return e[0]===t[0]&&e[1]===t[1]},DD=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},OD=0,_l=[];function PD(e){var t=m.useRef([]),r=m.useRef([0,0]),a=m.useRef(),l=m.useState(OD++)[0],c=m.useState(q1)[0],d=m.useRef(e);m.useEffect(function(){d.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(l));var N=nD([e.lockRef.current],(e.shards||[]).map(yw),!0).filter(Boolean);return N.forEach(function(_){return _.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),N.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(l))})}}},[e.inert,e.lockRef.current,e.shards]);var f=m.useCallback(function(N,_){if("touches"in N&&N.touches.length===2||N.type==="wheel"&&N.ctrlKey)return!d.current.allowPinchZoom;var C=xd(N),E=r.current,R="deltaX"in N?N.deltaX:E[0]-C[0],M="deltaY"in N?N.deltaY:E[1]-C[1],T,L=N.target,H=Math.abs(R)>Math.abs(M)?"h":"v";if("touches"in N&&H==="h"&&L.type==="range")return!1;var q=vw(H,L);if(!q)return!0;if(q?T=H:(T=H==="v"?"h":"v",q=vw(H,L)),!q)return!1;if(!a.current&&"changedTouches"in N&&(R||M)&&(a.current=T),!T)return!0;var G=a.current||T;return AD(G,_,N,G==="h"?R:M)},[]),h=m.useCallback(function(N){var _=N;if(!(!_l.length||_l[_l.length-1]!==c)){var C="deltaY"in _?xw(_):xd(_),E=t.current.filter(function(T){return T.name===_.type&&(T.target===_.target||_.target===T.shadowParent)&&kD(T.delta,C)})[0];if(E&&E.should){_.cancelable&&_.preventDefault();return}if(!E){var R=(d.current.shards||[]).map(yw).filter(Boolean).filter(function(T){return T.contains(_.target)}),M=R.length>0?f(_,R[0]):!d.current.noIsolation;M&&_.cancelable&&_.preventDefault()}}},[]),p=m.useCallback(function(N,_,C,E){var R={name:N,delta:_,target:C,should:E,shadowParent:LD(C)};t.current.push(R),setTimeout(function(){t.current=t.current.filter(function(M){return M!==R})},1)},[]),v=m.useCallback(function(N){r.current=xd(N),a.current=void 0},[]),x=m.useCallback(function(N){p(N.type,xw(N),N.target,f(N,e.lockRef.current))},[]),b=m.useCallback(function(N){p(N.type,xd(N),N.target,f(N,e.lockRef.current))},[]);m.useEffect(function(){return _l.push(c),e.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:b}),document.addEventListener("wheel",h,jl),document.addEventListener("touchmove",h,jl),document.addEventListener("touchstart",v,jl),function(){_l=_l.filter(function(N){return N!==c}),document.removeEventListener("wheel",h,jl),document.removeEventListener("touchmove",h,jl),document.removeEventListener("touchstart",v,jl)}},[]);var w=e.removeScrollBar,j=e.inert;return m.createElement(m.Fragment,null,j?m.createElement(c,{styles:DD(l)}):null,w?m.createElement(ND,{gapMode:e.gapMode}):null)}function LD(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ID=dD(H1,PD);var Ic=m.forwardRef(function(e,t){return m.createElement(ff,ws({},e,{ref:t,sideCar:ID}))});Ic.classNames=ff.classNames;var Gp=["Enter"," "],zD=["ArrowDown","PageUp","Home"],G1=["ArrowUp","PageDown","End"],UD=[...zD,...G1],$D={ltr:[...Gp,"ArrowRight"],rtl:[...Gp,"ArrowLeft"]},BD={ltr:["ArrowLeft"],rtl:["ArrowRight"]},zc="Menu",[yc,HD,qD]=Cg(zc),[Ai,W1]=cr(zc,[qD,Ya,uf]),hf=Ya(),X1=uf(),[FD,ki]=Ai(zc),[VD,Uc]=Ai(zc),K1=e=>{const{__scopeMenu:t,open:r=!1,children:a,dir:l,onOpenChange:c,modal:d=!0}=e,f=hf(t),[h,p]=m.useState(null),v=m.useRef(!1),x=Mr(c),b=tf(l);return m.useEffect(()=>{const w=()=>{v.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>v.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),s.jsx(zg,{...f,children:s.jsx(FD,{scope:t,open:r,onOpenChange:x,content:h,onContentChange:p,children:s.jsx(VD,{scope:t,onClose:m.useCallback(()=>x(!1),[x]),isUsingKeyboardRef:v,dir:b,modal:d,children:a})})})};K1.displayName=zc;var YD="MenuAnchor",Ug=m.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e,l=hf(r);return s.jsx(Pc,{...l,...a,ref:t})});Ug.displayName=YD;var $g="MenuPortal",[GD,Q1]=Ai($g,{forceMount:void 0}),Z1=e=>{const{__scopeMenu:t,forceMount:r,children:a,container:l}=e,c=ki($g,t);return s.jsx(GD,{scope:t,forceMount:r,children:s.jsx(Dr,{present:r||c.open,children:s.jsx(Lc,{asChild:!0,container:l,children:a})})})};Z1.displayName=$g;var Gr="MenuContent",[WD,Bg]=Ai(Gr),J1=m.forwardRef((e,t)=>{const r=Q1(Gr,e.__scopeMenu),{forceMount:a=r.forceMount,...l}=e,c=ki(Gr,e.__scopeMenu),d=Uc(Gr,e.__scopeMenu);return s.jsx(yc.Provider,{scope:e.__scopeMenu,children:s.jsx(Dr,{present:a||c.open,children:s.jsx(yc.Slot,{scope:e.__scopeMenu,children:d.modal?s.jsx(XD,{...l,ref:t}):s.jsx(KD,{...l,ref:t})})})})}),XD=m.forwardRef((e,t)=>{const r=ki(Gr,e.__scopeMenu),a=m.useRef(null),l=St(t,a);return m.useEffect(()=>{const c=a.current;if(c)return df(c)},[]),s.jsx(Hg,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ae(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),KD=m.forwardRef((e,t)=>{const r=ki(Gr,e.__scopeMenu);return s.jsx(Hg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Hg=m.forwardRef((e,t)=>{const{__scopeMenu:r,loop:a=!1,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:d,disableOutsidePointerEvents:f,onEntryFocus:h,onEscapeKeyDown:p,onPointerDownOutside:v,onFocusOutside:x,onInteractOutside:b,onDismiss:w,disableOutsideScroll:j,...N}=e,_=ki(Gr,r),C=Uc(Gr,r),E=hf(r),R=X1(r),M=HD(r),[T,L]=m.useState(null),H=m.useRef(null),q=St(t,H,_.onContentChange),G=m.useRef(0),W=m.useRef(""),ce=m.useRef(0),se=m.useRef(null),B=m.useRef("right"),ie=m.useRef(0),oe=j?Ic:m.Fragment,O=j?{as:Rs,allowPinchZoom:!0}:void 0,V=J=>{var K,re;const k=W.current+J,P=M().filter(pe=>!pe.disabled),F=document.activeElement,X=(K=P.find(pe=>pe.ref.current===F))==null?void 0:K.textValue,D=P.map(pe=>pe.textValue),z=oO(D,k,X),$=(re=P.find(pe=>pe.textValue===z))==null?void 0:re.ref.current;(function pe(ue){W.current=ue,window.clearTimeout(G.current),ue!==""&&(G.current=window.setTimeout(()=>pe(""),1e3))})(k),$&&setTimeout(()=>$.focus())};m.useEffect(()=>()=>window.clearTimeout(G.current),[]),nf();const U=m.useCallback(J=>{var P,F;return B.current===((P=se.current)==null?void 0:P.side)&&uO(J,(F=se.current)==null?void 0:F.area)},[]);return s.jsx(WD,{scope:r,searchRef:W,onItemEnter:m.useCallback(J=>{U(J)&&J.preventDefault()},[U]),onItemLeave:m.useCallback(J=>{var k;U(J)||((k=H.current)==null||k.focus(),L(null))},[U]),onTriggerLeave:m.useCallback(J=>{U(J)&&J.preventDefault()},[U]),pointerGraceTimerRef:ce,onPointerGraceIntentChange:m.useCallback(J=>{se.current=J},[]),children:s.jsx(oe,{...O,children:s.jsx(Dc,{asChild:!0,trapped:l,onMountAutoFocus:Ae(c,J=>{var k;J.preventDefault(),(k=H.current)==null||k.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:s.jsx(Ql,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:p,onPointerDownOutside:v,onFocusOutside:x,onInteractOutside:b,onDismiss:w,children:s.jsx(I1,{asChild:!0,...R,dir:C.dir,orientation:"vertical",loop:a,currentTabStopId:T,onCurrentTabStopIdChange:L,onEntryFocus:Ae(h,J=>{C.isUsingKeyboardRef.current||J.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(lf,{role:"menu","aria-orientation":"vertical","data-state":p_(_.open),"data-radix-menu-content":"",dir:C.dir,...E,...N,ref:q,style:{outline:"none",...N.style},onKeyDown:Ae(N.onKeyDown,J=>{const P=J.target.closest("[data-radix-menu-content]")===J.currentTarget,F=J.ctrlKey||J.altKey||J.metaKey,X=J.key.length===1;P&&(J.key==="Tab"&&J.preventDefault(),!F&&X&&V(J.key));const D=H.current;if(J.target!==D||!UD.includes(J.key))return;J.preventDefault();const $=M().filter(K=>!K.disabled).map(K=>K.ref.current);G1.includes(J.key)&&$.reverse(),iO($)}),onBlur:Ae(e.onBlur,J=>{J.currentTarget.contains(J.target)||(window.clearTimeout(G.current),W.current="")}),onPointerMove:Ae(e.onPointerMove,bc(J=>{const k=J.target,P=ie.current!==J.clientX;if(J.currentTarget.contains(k)&&P){const F=J.clientX>ie.current?"right":"left";B.current=F,ie.current=J.clientX}}))})})})})})})});J1.displayName=Gr;var QD="MenuGroup",qg=m.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e;return s.jsx(Ze.div,{role:"group",...a,ref:t})});qg.displayName=QD;var ZD="MenuLabel",e_=m.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e;return s.jsx(Ze.div,{...a,ref:t})});e_.displayName=ZD;var Id="MenuItem",bw="menu.itemSelect",mf=m.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:a,...l}=e,c=m.useRef(null),d=Uc(Id,e.__scopeMenu),f=Bg(Id,e.__scopeMenu),h=St(t,c),p=m.useRef(!1),v=()=>{const x=c.current;if(!r&&x){const b=new CustomEvent(bw,{bubbles:!0,cancelable:!0});x.addEventListener(bw,w=>a==null?void 0:a(w),{once:!0}),Yj(x,b),b.defaultPrevented?p.current=!1:d.onClose()}};return s.jsx(t_,{...l,ref:h,disabled:r,onClick:Ae(e.onClick,v),onPointerDown:x=>{var b;(b=e.onPointerDown)==null||b.call(e,x),p.current=!0},onPointerUp:Ae(e.onPointerUp,x=>{var b;p.current||(b=x.currentTarget)==null||b.click()}),onKeyDown:Ae(e.onKeyDown,x=>{const b=f.searchRef.current!=="";r||b&&x.key===" "||Gp.includes(x.key)&&(x.currentTarget.click(),x.preventDefault())})})});mf.displayName=Id;var t_=m.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:a=!1,textValue:l,...c}=e,d=Bg(Id,r),f=X1(r),h=m.useRef(null),p=St(t,h),[v,x]=m.useState(!1),[b,w]=m.useState("");return m.useEffect(()=>{const j=h.current;j&&w((j.textContent??"").trim())},[c.children]),s.jsx(yc.ItemSlot,{scope:r,disabled:a,textValue:l??b,children:s.jsx(z1,{asChild:!0,...f,focusable:!a,children:s.jsx(Ze.div,{role:"menuitem","data-highlighted":v?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...c,ref:p,onPointerMove:Ae(e.onPointerMove,bc(j=>{a?d.onItemLeave(j):(d.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ae(e.onPointerLeave,bc(j=>d.onItemLeave(j))),onFocus:Ae(e.onFocus,()=>x(!0)),onBlur:Ae(e.onBlur,()=>x(!1))})})})}),JD="MenuCheckboxItem",n_=m.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:a,...l}=e;return s.jsx(l_,{scope:e.__scopeMenu,checked:r,children:s.jsx(mf,{role:"menuitemcheckbox","aria-checked":zd(r)?"mixed":r,...l,ref:t,"data-state":Vg(r),onSelect:Ae(l.onSelect,()=>a==null?void 0:a(zd(r)?!0:!r),{checkForDefaultPrevented:!1})})})});n_.displayName=JD;var r_="MenuRadioGroup",[eO,tO]=Ai(r_,{value:void 0,onValueChange:()=>{}}),s_=m.forwardRef((e,t)=>{const{value:r,onValueChange:a,...l}=e,c=Mr(a);return s.jsx(eO,{scope:e.__scopeMenu,value:r,onValueChange:c,children:s.jsx(qg,{...l,ref:t})})});s_.displayName=r_;var a_="MenuRadioItem",i_=m.forwardRef((e,t)=>{const{value:r,...a}=e,l=tO(a_,e.__scopeMenu),c=r===l.value;return s.jsx(l_,{scope:e.__scopeMenu,checked:c,children:s.jsx(mf,{role:"menuitemradio","aria-checked":c,...a,ref:t,"data-state":Vg(c),onSelect:Ae(a.onSelect,()=>{var d;return(d=l.onValueChange)==null?void 0:d.call(l,r)},{checkForDefaultPrevented:!1})})})});i_.displayName=a_;var Fg="MenuItemIndicator",[l_,nO]=Ai(Fg,{checked:!1}),o_=m.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:a,...l}=e,c=nO(Fg,r);return s.jsx(Dr,{present:a||zd(c.checked)||c.checked===!0,children:s.jsx(Ze.span,{...l,ref:t,"data-state":Vg(c.checked)})})});o_.displayName=Fg;var rO="MenuSeparator",c_=m.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e;return s.jsx(Ze.div,{role:"separator","aria-orientation":"horizontal",...a,ref:t})});c_.displayName=rO;var sO="MenuArrow",u_=m.forwardRef((e,t)=>{const{__scopeMenu:r,...a}=e,l=hf(r);return s.jsx(of,{...l,...a,ref:t})});u_.displayName=sO;var aO="MenuSub",[GB,d_]=Ai(aO),ac="MenuSubTrigger",f_=m.forwardRef((e,t)=>{const r=ki(ac,e.__scopeMenu),a=Uc(ac,e.__scopeMenu),l=d_(ac,e.__scopeMenu),c=Bg(ac,e.__scopeMenu),d=m.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:h}=c,p={__scopeMenu:e.__scopeMenu},v=m.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return m.useEffect(()=>v,[v]),m.useEffect(()=>{const x=f.current;return()=>{window.clearTimeout(x),h(null)}},[f,h]),s.jsx(Ug,{asChild:!0,...p,children:s.jsx(t_,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":l.contentId,"data-state":p_(r.open),...e,ref:Jd(t,l.onTriggerChange),onClick:x=>{var b;(b=e.onClick)==null||b.call(e,x),!(e.disabled||x.defaultPrevented)&&(x.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ae(e.onPointerMove,bc(x=>{c.onItemEnter(x),!x.defaultPrevented&&!e.disabled&&!r.open&&!d.current&&(c.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{r.onOpenChange(!0),v()},100))})),onPointerLeave:Ae(e.onPointerLeave,bc(x=>{var w,j;v();const b=(w=r.content)==null?void 0:w.getBoundingClientRect();if(b){const N=(j=r.content)==null?void 0:j.dataset.side,_=N==="right",C=_?-5:5,E=b[_?"left":"right"],R=b[_?"right":"left"];c.onPointerGraceIntentChange({area:[{x:x.clientX+C,y:x.clientY},{x:E,y:b.top},{x:R,y:b.top},{x:R,y:b.bottom},{x:E,y:b.bottom}],side:N}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(x),x.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:Ae(e.onKeyDown,x=>{var w;const b=c.searchRef.current!=="";e.disabled||b&&x.key===" "||$D[a.dir].includes(x.key)&&(r.onOpenChange(!0),(w=r.content)==null||w.focus(),x.preventDefault())})})})});f_.displayName=ac;var h_="MenuSubContent",m_=m.forwardRef((e,t)=>{const r=Q1(Gr,e.__scopeMenu),{forceMount:a=r.forceMount,...l}=e,c=ki(Gr,e.__scopeMenu),d=Uc(Gr,e.__scopeMenu),f=d_(h_,e.__scopeMenu),h=m.useRef(null),p=St(t,h);return s.jsx(yc.Provider,{scope:e.__scopeMenu,children:s.jsx(Dr,{present:a||c.open,children:s.jsx(yc.Slot,{scope:e.__scopeMenu,children:s.jsx(Hg,{id:f.contentId,"aria-labelledby":f.triggerId,...l,ref:p,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:v=>{var x;d.isUsingKeyboardRef.current&&((x=h.current)==null||x.focus()),v.preventDefault()},onCloseAutoFocus:v=>v.preventDefault(),onFocusOutside:Ae(e.onFocusOutside,v=>{v.target!==f.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:Ae(e.onEscapeKeyDown,v=>{d.onClose(),v.preventDefault()}),onKeyDown:Ae(e.onKeyDown,v=>{var w;const x=v.currentTarget.contains(v.target),b=BD[d.dir].includes(v.key);x&&b&&(c.onOpenChange(!1),(w=f.trigger)==null||w.focus(),v.preventDefault())})})})})})});m_.displayName=h_;function p_(e){return e?"open":"closed"}function zd(e){return e==="indeterminate"}function Vg(e){return zd(e)?"indeterminate":e?"checked":"unchecked"}function iO(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function lO(e,t){return e.map((r,a)=>e[(t+a)%e.length])}function oO(e,t,r){const l=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,c=r?e.indexOf(r):-1;let d=lO(e,Math.max(c,0));l.length===1&&(d=d.filter(p=>p!==r));const h=d.find(p=>p.toLowerCase().startsWith(l.toLowerCase()));return h!==r?h:void 0}function cO(e,t){const{x:r,y:a}=e;let l=!1;for(let c=0,d=t.length-1;c<t.length;d=c++){const f=t[c].x,h=t[c].y,p=t[d].x,v=t[d].y;h>a!=v>a&&r<(p-f)*(a-h)/(v-h)+f&&(l=!l)}return l}function uO(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return cO(r,t)}function bc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var dO=K1,fO=Ug,hO=Z1,mO=J1,pO=qg,gO=e_,vO=mf,xO=n_,yO=s_,bO=i_,wO=o_,jO=c_,_O=u_,NO=f_,SO=m_,Yg="DropdownMenu",[EO,WB]=cr(Yg,[W1]),ur=W1(),[CO,g_]=EO(Yg),v_=e=>{const{__scopeDropdownMenu:t,children:r,dir:a,open:l,defaultOpen:c,onOpenChange:d,modal:f=!0}=e,h=ur(t),p=m.useRef(null),[v=!1,x]=$a({prop:l,defaultProp:c,onChange:d});return s.jsx(CO,{scope:t,triggerId:Es(),triggerRef:p,contentId:Es(),open:v,onOpenChange:x,onOpenToggle:m.useCallback(()=>x(b=>!b),[x]),modal:f,children:s.jsx(dO,{...h,open:v,onOpenChange:x,dir:a,modal:f,children:r})})};v_.displayName=Yg;var x_="DropdownMenuTrigger",y_=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:a=!1,...l}=e,c=g_(x_,r),d=ur(r);return s.jsx(fO,{asChild:!0,...d,children:s.jsx(Ze.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...l,ref:Jd(t,c.triggerRef),onPointerDown:Ae(e.onPointerDown,f=>{!a&&f.button===0&&f.ctrlKey===!1&&(c.onOpenToggle(),c.open||f.preventDefault())}),onKeyDown:Ae(e.onKeyDown,f=>{a||(["Enter"," "].includes(f.key)&&c.onOpenToggle(),f.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())})})})});y_.displayName=x_;var RO="DropdownMenuPortal",b_=e=>{const{__scopeDropdownMenu:t,...r}=e,a=ur(t);return s.jsx(hO,{...a,...r})};b_.displayName=RO;var w_="DropdownMenuContent",j_=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=g_(w_,r),c=ur(r),d=m.useRef(!1);return s.jsx(mO,{id:l.contentId,"aria-labelledby":l.triggerId,...c,...a,ref:t,onCloseAutoFocus:Ae(e.onCloseAutoFocus,f=>{var h;d.current||(h=l.triggerRef.current)==null||h.focus(),d.current=!1,f.preventDefault()}),onInteractOutside:Ae(e.onInteractOutside,f=>{const h=f.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0,v=h.button===2||p;(!l.modal||v)&&(d.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});j_.displayName=w_;var TO="DropdownMenuGroup",MO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=ur(r);return s.jsx(pO,{...l,...a,ref:t})});MO.displayName=TO;var AO="DropdownMenuLabel",__=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=ur(r);return s.jsx(gO,{...l,...a,ref:t})});__.displayName=AO;var kO="DropdownMenuItem",N_=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=ur(r);return s.jsx(vO,{...l,...a,ref:t})});N_.displayName=kO;var DO="DropdownMenuCheckboxItem",OO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=ur(r);return s.jsx(xO,{...l,...a,ref:t})});OO.displayName=DO;var PO="DropdownMenuRadioGroup",LO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=ur(r);return s.jsx(yO,{...l,...a,ref:t})});LO.displayName=PO;var IO="DropdownMenuRadioItem",zO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=ur(r);return s.jsx(bO,{...l,...a,ref:t})});zO.displayName=IO;var UO="DropdownMenuItemIndicator",$O=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=ur(r);return s.jsx(wO,{...l,...a,ref:t})});$O.displayName=UO;var BO="DropdownMenuSeparator",S_=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=ur(r);return s.jsx(jO,{...l,...a,ref:t})});S_.displayName=BO;var HO="DropdownMenuArrow",qO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=ur(r);return s.jsx(_O,{...l,...a,ref:t})});qO.displayName=HO;var FO="DropdownMenuSubTrigger",VO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=ur(r);return s.jsx(NO,{...l,...a,ref:t})});VO.displayName=FO;var YO="DropdownMenuSubContent",GO=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...a}=e,l=ur(r);return s.jsx(SO,{...l,...a,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});GO.displayName=YO;var WO=v_,XO=y_,KO=b_,QO=j_,ZO=__,JO=N_,eP=S_;/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nP=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),ww=e=>{const t=nP(e);return t.charAt(0).toUpperCase()+t.slice(1)},E_=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:l="",children:c,iconNode:d,...f},h)=>m.createElement("svg",{ref:h,...rP,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:E_("lucide",l),...f},[...d.map(([p,v])=>m.createElement(p,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=(e,t)=>{const r=m.forwardRef(({className:a,...l},c)=>m.createElement(sP,{ref:c,iconNode:t,className:E_(`lucide-${tP(ww(e))}`,`lucide-${e}`,a),...l}));return r.displayName=ww(e),r};/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],iP=nt("arrow-down-to-line",aP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Nn=nt("arrow-left",lP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],C_=nt("banknote",oP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Kt=nt("calendar-days",cP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],R_=nt("calendar",uP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Gg=nt("check",dP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],T_=nt("chevron-down",fP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],M_=nt("chevron-left",hP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],A_=nt("chevron-right",mP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],gP=nt("chevron-up",pP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$t=nt("circle-alert",vP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Di=nt("circle-check-big",xP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Fa=nt("circle-plus",yP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wP=nt("circle",bP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ud=nt("clipboard-list",jP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]],pf=nt("database-zap",_P);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],SP=nt("download",NP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],is=nt("file-text",EP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Wg=nt("flask-conical",CP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],TP=nt("grip-vertical",RP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],Ar=nt("hourglass",MP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],gf=nt("image",AP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],We=nt("info",kP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],uc=nt("layers",DP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],PP=nt("layout-template",OP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Ga=nt("list-checks",LP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yt=nt("loader-circle",IP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],UP=nt("log-out",zP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],BP=nt("menu",$P);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],k_=nt("pencil",HP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],lr=nt("phone",qP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Rd=nt("plus",FP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],vf=nt("printer",VP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ll=nt("save",YP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],$c=nt("search",GP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],XP=nt("settings",WP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Xr=nt("square-pen",KP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Zn=nt("stethoscope",QP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Bc=nt("trash-2",ZP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],dc=nt("trash",JP);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],t3=nt("upload",e3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],D_=nt("user-plus",n3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Gt=nt("user",r3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],O_=nt("users",s3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],i3=nt("workflow",a3);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xf=nt("x",l3);function o3({...e}){return s.jsx(WO,{"data-slot":"dropdown-menu",...e})}function c3({...e}){return s.jsx(XO,{"data-slot":"dropdown-menu-trigger",...e})}function u3({className:e,sideOffset:t=4,...r}){return s.jsx(KO,{children:s.jsx(QO,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Ce("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...r})})}function d3({className:e,inset:t,variant:r="default",...a}){return s.jsx(JO,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":r,className:Ce("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function f3({className:e,inset:t,...r}){return s.jsx(ZO,{"data-slot":"dropdown-menu-label","data-inset":t,className:Ce("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...r})}function h3({className:e,...t}){return s.jsx(eP,{"data-slot":"dropdown-menu-separator",className:Ce("bg-border -mx-1 my-1 h-px",e),...t})}var Xg="Dialog",[P_,L_]=cr(Xg),[m3,hs]=P_(Xg),I_=e=>{const{__scopeDialog:t,children:r,open:a,defaultOpen:l,onOpenChange:c,modal:d=!0}=e,f=m.useRef(null),h=m.useRef(null),[p=!1,v]=$a({prop:a,defaultProp:l,onChange:c});return s.jsx(m3,{scope:t,triggerRef:f,contentRef:h,contentId:Es(),titleId:Es(),descriptionId:Es(),open:p,onOpenChange:v,onOpenToggle:m.useCallback(()=>v(x=>!x),[v]),modal:d,children:r})};I_.displayName=Xg;var z_="DialogTrigger",U_=m.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,l=hs(z_,r),c=St(t,l.triggerRef);return s.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":Zg(l.open),...a,ref:c,onClick:Ae(e.onClick,l.onOpenToggle)})});U_.displayName=z_;var Kg="DialogPortal",[p3,$_]=P_(Kg,{forceMount:void 0}),B_=e=>{const{__scopeDialog:t,forceMount:r,children:a,container:l}=e,c=hs(Kg,t);return s.jsx(p3,{scope:t,forceMount:r,children:m.Children.map(a,d=>s.jsx(Dr,{present:r||c.open,children:s.jsx(Lc,{asChild:!0,container:l,children:d})}))})};B_.displayName=Kg;var $d="DialogOverlay",H_=m.forwardRef((e,t)=>{const r=$_($d,e.__scopeDialog),{forceMount:a=r.forceMount,...l}=e,c=hs($d,e.__scopeDialog);return c.modal?s.jsx(Dr,{present:a||c.open,children:s.jsx(g3,{...l,ref:t})}):null});H_.displayName=$d;var g3=m.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,l=hs($d,r);return s.jsx(Ic,{as:Rs,allowPinchZoom:!0,shards:[l.contentRef],children:s.jsx(Ze.div,{"data-state":Zg(l.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),Ci="DialogContent",q_=m.forwardRef((e,t)=>{const r=$_(Ci,e.__scopeDialog),{forceMount:a=r.forceMount,...l}=e,c=hs(Ci,e.__scopeDialog);return s.jsx(Dr,{present:a||c.open,children:c.modal?s.jsx(v3,{...l,ref:t}):s.jsx(x3,{...l,ref:t})})});q_.displayName=Ci;var v3=m.forwardRef((e,t)=>{const r=hs(Ci,e.__scopeDialog),a=m.useRef(null),l=St(t,r.contentRef,a);return m.useEffect(()=>{const c=a.current;if(c)return df(c)},[]),s.jsx(F_,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ae(e.onCloseAutoFocus,c=>{var d;c.preventDefault(),(d=r.triggerRef.current)==null||d.focus()}),onPointerDownOutside:Ae(e.onPointerDownOutside,c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0;(d.button===2||f)&&c.preventDefault()}),onFocusOutside:Ae(e.onFocusOutside,c=>c.preventDefault())})}),x3=m.forwardRef((e,t)=>{const r=hs(Ci,e.__scopeDialog),a=m.useRef(!1),l=m.useRef(!1);return s.jsx(F_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var d,f;(d=e.onCloseAutoFocus)==null||d.call(e,c),c.defaultPrevented||(a.current||(f=r.triggerRef.current)==null||f.focus(),c.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:c=>{var h,p;(h=e.onInteractOutside)==null||h.call(e,c),c.defaultPrevented||(a.current=!0,c.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const d=c.target;((p=r.triggerRef.current)==null?void 0:p.contains(d))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&l.current&&c.preventDefault()}})}),F_=m.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:c,...d}=e,f=hs(Ci,r),h=m.useRef(null),p=St(t,h);return nf(),s.jsxs(s.Fragment,{children:[s.jsx(Dc,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:c,children:s.jsx(Ql,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":Zg(f.open),...d,ref:p,onDismiss:()=>f.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(b3,{titleId:f.titleId}),s.jsx(j3,{contentRef:h,descriptionId:f.descriptionId})]})]})}),Qg="DialogTitle",V_=m.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,l=hs(Qg,r);return s.jsx(Ze.h2,{id:l.titleId,...a,ref:t})});V_.displayName=Qg;var Y_="DialogDescription",G_=m.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,l=hs(Y_,r);return s.jsx(Ze.p,{id:l.descriptionId,...a,ref:t})});G_.displayName=Y_;var W_="DialogClose",X_=m.forwardRef((e,t)=>{const{__scopeDialog:r,...a}=e,l=hs(W_,r);return s.jsx(Ze.button,{type:"button",...a,ref:t,onClick:Ae(e.onClick,()=>l.onOpenChange(!1))})});X_.displayName=W_;function Zg(e){return e?"open":"closed"}var K_="DialogTitleWarning",[y3,Q_]=gA(K_,{contentName:Ci,titleName:Qg,docsSlug:"dialog"}),b3=({titleId:e})=>{const t=Q_(K_),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},w3="DialogDescriptionWarning",j3=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Q_(w3).contentName}}.`;return m.useEffect(()=>{var c;const l=(c=e.current)==null?void 0:c.getAttribute("aria-describedby");t&&l&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},Jg=I_,Z_=U_,ev=B_,tv=H_,nv=q_,J_=V_,eN=G_,Hc=X_;function _3({...e}){return s.jsx(Jg,{"data-slot":"sheet",...e})}function N3({...e}){return s.jsx(Z_,{"data-slot":"sheet-trigger",...e})}function S3({...e}){return s.jsx(ev,{"data-slot":"sheet-portal",...e})}function E3({className:e,...t}){return s.jsx(tv,{"data-slot":"sheet-overlay",className:Ce("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function C3({className:e,children:t,side:r="right",...a}){return s.jsxs(S3,{children:[s.jsx(E3,{}),s.jsxs(nv,{"data-slot":"sheet-content",className:Ce("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",r==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",r==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",r==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",r==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...a,children:[t,s.jsxs(Hc,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[s.jsx(xf,{className:"size-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}var R3="VisuallyHidden",rv=m.forwardRef((e,t)=>s.jsx(Ze.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));rv.displayName=R3;var T3=rv,[yf,XB]=cr("Tooltip",[Ya]),sv=Ya(),tN="TooltipProvider",M3=700,jw="tooltip.open",[A3,nN]=yf(tN),rN=e=>{const{__scopeTooltip:t,delayDuration:r=M3,skipDelayDuration:a=300,disableHoverableContent:l=!1,children:c}=e,[d,f]=m.useState(!0),h=m.useRef(!1),p=m.useRef(0);return m.useEffect(()=>{const v=p.current;return()=>window.clearTimeout(v)},[]),s.jsx(A3,{scope:t,isOpenDelayed:d,delayDuration:r,onOpen:m.useCallback(()=>{window.clearTimeout(p.current),f(!1)},[]),onClose:m.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>f(!0),a)},[a]),isPointerInTransitRef:h,onPointerInTransitChange:m.useCallback(v=>{h.current=v},[]),disableHoverableContent:l,children:c})};rN.displayName=tN;var sN="Tooltip",[KB,bf]=yf(sN),Wp="TooltipTrigger",k3=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...a}=e,l=bf(Wp,r),c=nN(Wp,r),d=sv(r),f=m.useRef(null),h=St(t,f,l.onTriggerChange),p=m.useRef(!1),v=m.useRef(!1),x=m.useCallback(()=>p.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),s.jsx(Pc,{asChild:!0,...d,children:s.jsx(Ze.button,{"aria-describedby":l.open?l.contentId:void 0,"data-state":l.stateAttribute,...a,ref:h,onPointerMove:Ae(e.onPointerMove,b=>{b.pointerType!=="touch"&&!v.current&&!c.isPointerInTransitRef.current&&(l.onTriggerEnter(),v.current=!0)}),onPointerLeave:Ae(e.onPointerLeave,()=>{l.onTriggerLeave(),v.current=!1}),onPointerDown:Ae(e.onPointerDown,()=>{p.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:Ae(e.onFocus,()=>{p.current||l.onOpen()}),onBlur:Ae(e.onBlur,l.onClose),onClick:Ae(e.onClick,l.onClose)})})});k3.displayName=Wp;var D3="TooltipPortal",[QB,O3]=yf(D3,{forceMount:void 0}),Il="TooltipContent",P3=m.forwardRef((e,t)=>{const r=O3(Il,e.__scopeTooltip),{forceMount:a=r.forceMount,side:l="top",...c}=e,d=bf(Il,e.__scopeTooltip);return s.jsx(Dr,{present:a||d.open,children:d.disableHoverableContent?s.jsx(aN,{side:l,...c,ref:t}):s.jsx(L3,{side:l,...c,ref:t})})}),L3=m.forwardRef((e,t)=>{const r=bf(Il,e.__scopeTooltip),a=nN(Il,e.__scopeTooltip),l=m.useRef(null),c=St(t,l),[d,f]=m.useState(null),{trigger:h,onClose:p}=r,v=l.current,{onPointerInTransitChange:x}=a,b=m.useCallback(()=>{f(null),x(!1)},[x]),w=m.useCallback((j,N)=>{const _=j.currentTarget,C={x:j.clientX,y:j.clientY},E=$3(C,_.getBoundingClientRect()),R=B3(C,E),M=H3(N.getBoundingClientRect()),T=F3([...R,...M]);f(T),x(!0)},[x]);return m.useEffect(()=>()=>b(),[b]),m.useEffect(()=>{if(h&&v){const j=_=>w(_,v),N=_=>w(_,h);return h.addEventListener("pointerleave",j),v.addEventListener("pointerleave",N),()=>{h.removeEventListener("pointerleave",j),v.removeEventListener("pointerleave",N)}}},[h,v,w,b]),m.useEffect(()=>{if(d){const j=N=>{const _=N.target,C={x:N.clientX,y:N.clientY},E=(h==null?void 0:h.contains(_))||(v==null?void 0:v.contains(_)),R=!q3(C,d);E?b():R&&(b(),p())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[h,v,d,p,b]),s.jsx(aN,{...e,ref:c})}),[I3,z3]=yf(sN,{isInside:!1}),aN=m.forwardRef((e,t)=>{const{__scopeTooltip:r,children:a,"aria-label":l,onEscapeKeyDown:c,onPointerDownOutside:d,...f}=e,h=bf(Il,r),p=sv(r),{onClose:v}=h;return m.useEffect(()=>(document.addEventListener(jw,v),()=>document.removeEventListener(jw,v)),[v]),m.useEffect(()=>{if(h.trigger){const x=b=>{const w=b.target;w!=null&&w.contains(h.trigger)&&v()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[h.trigger,v]),s.jsx(Ql,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:x=>x.preventDefault(),onDismiss:v,children:s.jsxs(lf,{"data-state":h.stateAttribute,...p,...f,ref:t,style:{...f.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(jg,{children:a}),s.jsx(I3,{scope:r,isInside:!0,children:s.jsx(T3,{id:h.contentId,role:"tooltip",children:l||a})})]})})});P3.displayName=Il;var iN="TooltipArrow",U3=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...a}=e,l=sv(r);return z3(iN,r).isInside?null:s.jsx(of,{...l,...a,ref:t})});U3.displayName=iN;function $3(e,t){const r=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),l=Math.abs(t.right-e.x),c=Math.abs(t.left-e.x);switch(Math.min(r,a,l,c)){case c:return"left";case l:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function B3(e,t,r=5){const a=[];switch(t){case"top":a.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":a.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":a.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":a.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return a}function H3(e){const{top:t,right:r,bottom:a,left:l}=e;return[{x:l,y:t},{x:r,y:t},{x:r,y:a},{x:l,y:a}]}function q3(e,t){const{x:r,y:a}=e;let l=!1;for(let c=0,d=t.length-1;c<t.length;d=c++){const f=t[c].x,h=t[c].y,p=t[d].x,v=t[d].y;h>a!=v>a&&r<(p-f)*(a-h)/(v-h)+f&&(l=!l)}return l}function F3(e){const t=e.slice();return t.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),V3(t)}function V3(e){if(e.length<=1)return e.slice();const t=[];for(let a=0;a<e.length;a++){const l=e[a];for(;t.length>=2;){const c=t[t.length-1],d=t[t.length-2];if((c.x-d.x)*(l.y-d.y)>=(c.y-d.y)*(l.x-d.x))t.pop();else break}t.push(l)}t.pop();const r=[];for(let a=e.length-1;a>=0;a--){const l=e[a];for(;r.length>=2;){const c=r[r.length-1],d=r[r.length-2];if((c.x-d.x)*(l.y-d.y)>=(c.y-d.y)*(l.x-d.x))r.pop();else break}r.push(l)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Y3=rN;function G3({delayDuration:e=0,...t}){return s.jsx(Y3,{"data-slot":"tooltip-provider",delayDuration:e,...t})}const W3=()=>{const{user:e}=wg(),t=async()=>{const{error:c}=await ne.auth.signOut();c&&console.error("Erreur de déconnexion:",c)},r=c=>c?c.substring(0,2).toUpperCase():"??",a=[{to:"/patients",label:"Patients",icon:O_},{to:"/doctors",label:"Médecins",icon:Zn},{to:"/test-types",label:"Types de Tests",icon:Ud},{to:"/categories",label:"Catégories",icon:uc},{to:"/ristournes",label:"Ristournes",icon:C_},{to:"/settings/print-header",label:"En-tête Impression",icon:is},{to:"/skip-range-management",label:"Parametres Validations",icon:XP},{to:"/ecb-models",label:"Modèles ECB",icon:uc},{to:"/atbs",label:"Gestion ATBs",icon:uc}],l=s.jsx("nav",{className:"flex flex-col gap-2 px-2 sm:px-4 py-4",children:a.map(c=>s.jsxs(_j,{to:c.to,className:({isActive:d})=>`flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors ${d?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,children:[s.jsx(c.icon,{className:"h-5 w-5"}),s.jsx("span",{children:c.label})]},c.label))});return s.jsxs("div",{className:"flex h-screen w-full bg-muted/40",children:[s.jsxs("aside",{className:"hidden sm:flex flex-col w-64 border-r bg-background",children:[s.jsxs("div",{className:"flex items-center gap-2 h-16 border-b px-6",children:[s.jsx(Wg,{className:"h-6 w-6 text-primary"}),s.jsx("span",{className:"font-semibold tracking-tight",children:"LRMS"})]}),l]}),s.jsxs("div",{className:"flex flex-1 flex-col",children:[s.jsxs("header",{className:"sticky top-0 z-10 flex h-16 items-center justify-between border-b bg-background px-4 sm:px-6",children:[s.jsx("div",{className:"sm:hidden",children:s.jsxs(_3,{children:[s.jsx(N3,{asChild:!0,children:s.jsxs(te,{variant:"outline",size:"icon",children:[s.jsx(BP,{className:"h-5 w-5"}),s.jsx("span",{className:"sr-only",children:"Ouvrir le menu"})]})}),s.jsxs(C3,{side:"left",className:"w-64 p-0 pt-10",children:[" ",l]})]})}),s.jsx("div",{className:"flex-1"}),s.jsxs(o3,{children:[s.jsx(c3,{asChild:!0,children:s.jsx(te,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:s.jsx(Ac,{className:"h-9 w-9",children:s.jsx(kc,{children:r(e==null?void 0:e.email)})})})}),s.jsxs(u3,{className:"w-56",align:"end",forceMount:!0,children:[s.jsx(f3,{className:"font-normal",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:"Connecté en tant que"}),s.jsx("p",{className:"text-xs leading-none text-muted-foreground truncate",children:(e==null?void 0:e.email)||"Utilisateur"})]})}),s.jsx(h3,{}),s.jsxs(d3,{onClick:t,className:"text-destructive focus:text-destructive focus:bg-destructive/10 cursor-pointer",children:[s.jsx(UP,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Se déconnecter"})]})]})]})]}),s.jsx(G3,{children:s.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-4 sm:p-6 bg-white",children:s.jsx(xj,{})})})]})]})},X3=()=>{const{session:e,loading:t}=wg(),r=sa();return t?s.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-200",children:[s.jsx(Yt,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-2 text-muted-foreground",children:"Chargement de l'application..."})]}):e?s.jsx(xj,{}):s.jsx(vj,{to:"/login",state:{from:r},replace:!0})};function Ve({className:e,type:t,...r}){return s.jsx("input",{type:t,"data-slot":"input",className:Ce("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}var K3="Label",lN=m.forwardRef((e,t)=>s.jsx(Ze.label,{...e,ref:t,onMouseDown:r=>{var l;r.target.closest("button, input, select, textarea")||((l=e.onMouseDown)==null||l.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));lN.displayName=K3;var Q3=lN;function Le({className:e,...t}){return s.jsx(Q3,{"data-slot":"label",className:Ce("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function Se({className:e,...t}){return s.jsx("div",{"data-slot":"card",className:Ce("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function Me({className:e,...t}){return s.jsx("div",{"data-slot":"card-header",className:Ce("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function yt({className:e,...t}){return s.jsx("div",{"data-slot":"card-title",className:Ce("leading-none font-semibold",e),...t})}function gr({className:e,...t}){return s.jsx("div",{"data-slot":"card-description",className:Ce("text-muted-foreground text-sm",e),...t})}function Ee({className:e,...t}){return s.jsx("div",{"data-slot":"card-content",className:Ce("px-6",e),...t})}function ls({className:e,...t}){return s.jsx("div",{"data-slot":"card-footer",className:Ce("flex items-center px-6 [.border-t]:pt-6",e),...t})}const Z3=Eg("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Bt({className:e,variant:t,...r}){return s.jsx("div",{"data-slot":"alert",role:"alert",className:Ce(Z3({variant:t}),e),...r})}function Ht({className:e,...t}){return s.jsx("div",{"data-slot":"alert-title",className:Ce("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function qt({className:e,...t}){return s.jsx("div",{"data-slot":"alert-description",className:Ce("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}const J3=()=>{const[e,t]=m.useState(""),[r,a]=m.useState(""),[l,c]=m.useState(!1),[d,f]=m.useState(null),{session:h,loading:p}=wg(),v=async x=>{x.preventDefault(),c(!0),f(null);try{const{error:b}=await ne.auth.signInWithPassword({email:e,password:r});if(b)throw b}catch(b){console.error("Login error:",b),f(b instanceof Error&&b.message==="Invalid login credentials"?"Identifiants invalides. Veuillez vérifier votre email et mot de passe.":"Échec de la connexion. Une erreur est survenue.")}finally{c(!1)}};return p?s.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-200",children:[s.jsx(Yt,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-2 text-muted-foreground",children:"Chargement..."})]}):h?s.jsx(vj,{to:"/patients",replace:!0}):s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-100 via-gray-50 to-blue-100 p-4",children:s.jsxs(Se,{className:"w-full max-w-md shadow-xl border-t-4 border-primary rounded-lg overflow-hidden",children:[s.jsxs(Me,{className:"text-center p-6 bg-muted/30",children:[s.jsxs("div",{className:"mx-auto mb-4",children:[s.jsx(Wg,{className:"h-12 w-12 text-primary"})," "]}),s.jsx(yt,{className:"text-2xl font-bold tracking-tight",children:"Connexion LRMS "}),s.jsxs(gr,{className:"text-muted-foreground",children:["Accédez à votre espace laboratoire sécurisé."," "]})]}),s.jsxs("form",{onSubmit:v,children:[s.jsxs(Ee,{className:"p-6 space-y-6",children:[" ",d&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsx(qt,{children:d})]}),s.jsxs("div",{className:"space-y-2",children:[" ",s.jsx(Le,{htmlFor:"email",className:"font-semibold",children:"Adresse e-mail"}),s.jsx(Ve,{id:"email",type:"email",placeholder:"votreadresse@email.com",required:!0,value:e,onChange:x=>t(x.target.value),disabled:l,className:"h-10"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Le,{htmlFor:"password",className:"font-semibold",children:"Mot de passe"}),s.jsx(Ve,{id:"password",type:"password",placeholder:"Votre mot de passe",required:!0,value:r,onChange:x=>a(x.target.value),disabled:l,className:"h-10"})]})]}),s.jsx(ls,{className:"p-6 bg-muted/30",children:s.jsx(te,{type:"submit",className:"w-full h-11 text-base font-semibold",disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx(Yt,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion en cours..."]}):"Se connecter"})})]})]})})};function aa({className:e,...t}){return s.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:s.jsx("table",{"data-slot":"table",className:Ce("w-full caption-bottom text-sm",e),...t})})}function ia({className:e,...t}){return s.jsx("thead",{"data-slot":"table-header",className:Ce("[&_tr]:border-b",e),...t})}function la({className:e,...t}){return s.jsx("tbody",{"data-slot":"table-body",className:Ce("[&_tr:last-child]:border-0",e),...t})}function Xt({className:e,...t}){return s.jsx("tr",{"data-slot":"table-row",className:Ce("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function ht({className:e,...t}){return s.jsx("th",{"data-slot":"table-head",className:Ce("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Ke({className:e,...t}){return s.jsx("td",{"data-slot":"table-cell",className:Ce("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Y({className:e,...t}){return s.jsx("div",{"data-slot":"skeleton",className:Ce("bg-accent animate-pulse rounded-md",e),...t})}function qc(e,t){const[r,a]=m.useState(e);return m.useEffect(()=>{const l=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(l)}},[e,t]),r}var oN="AlertDialog",[e5,ZB]=cr(oN,[L_]),oa=L_(),cN=e=>{const{__scopeAlertDialog:t,...r}=e,a=oa(t);return s.jsx(Jg,{...a,...r,modal:!0})};cN.displayName=oN;var t5="AlertDialogTrigger",uN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,l=oa(r);return s.jsx(Z_,{...l,...a,ref:t})});uN.displayName=t5;var n5="AlertDialogPortal",dN=e=>{const{__scopeAlertDialog:t,...r}=e,a=oa(t);return s.jsx(ev,{...a,...r})};dN.displayName=n5;var r5="AlertDialogOverlay",fN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,l=oa(r);return s.jsx(tv,{...l,...a,ref:t})});fN.displayName=r5;var Tl="AlertDialogContent",[s5,a5]=e5(Tl),hN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:a,...l}=e,c=oa(r),d=m.useRef(null),f=St(t,d),h=m.useRef(null);return s.jsx(y3,{contentName:Tl,titleName:mN,docsSlug:"alert-dialog",children:s.jsx(s5,{scope:r,cancelRef:h,children:s.jsxs(nv,{role:"alertdialog",...c,...l,ref:f,onOpenAutoFocus:Ae(l.onOpenAutoFocus,p=>{var v;p.preventDefault(),(v=h.current)==null||v.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[s.jsx(jg,{children:a}),s.jsx(l5,{contentRef:d})]})})})});hN.displayName=Tl;var mN="AlertDialogTitle",pN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,l=oa(r);return s.jsx(J_,{...l,...a,ref:t})});pN.displayName=mN;var gN="AlertDialogDescription",vN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,l=oa(r);return s.jsx(eN,{...l,...a,ref:t})});vN.displayName=gN;var i5="AlertDialogAction",xN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,l=oa(r);return s.jsx(Hc,{...l,...a,ref:t})});xN.displayName=i5;var yN="AlertDialogCancel",bN=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...a}=e,{cancelRef:l}=a5(yN,r),c=oa(r),d=St(t,l);return s.jsx(Hc,{...c,...a,ref:d})});bN.displayName=yN;var l5=({contentRef:e})=>{const t=`\`${Tl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Tl}\` by passing a \`${gN}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Tl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var a;document.getElementById((a=e.current)==null?void 0:a.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},o5=cN,c5=uN,u5=dN,d5=fN,f5=hN,h5=xN,m5=bN,p5=pN,g5=vN;function wc({...e}){return s.jsx(o5,{"data-slot":"alert-dialog",...e})}function wf({...e}){return s.jsx(c5,{"data-slot":"alert-dialog-trigger",...e})}function v5({...e}){return s.jsx(u5,{"data-slot":"alert-dialog-portal",...e})}function x5({className:e,...t}){return s.jsx(d5,{"data-slot":"alert-dialog-overlay",className:Ce("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function jf({className:e,...t}){return s.jsxs(v5,{children:[s.jsx(x5,{}),s.jsx(f5,{"data-slot":"alert-dialog-content",className:Ce("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function _f({className:e,...t}){return s.jsx("div",{"data-slot":"alert-dialog-header",className:Ce("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Nf({className:e,...t}){return s.jsx("div",{"data-slot":"alert-dialog-footer",className:Ce("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Sf({className:e,...t}){return s.jsx(p5,{"data-slot":"alert-dialog-title",className:Ce("text-lg font-semibold",e),...t})}function Ef({className:e,...t}){return s.jsx(g5,{"data-slot":"alert-dialog-description",className:Ce("text-muted-foreground text-sm",e),...t})}function av({className:e,...t}){return s.jsx(h5,{className:Ce(Ol(),e),...t})}function Cf({className:e,...t}){return s.jsx(m5,{className:Ce(Ol({variant:"outline"}),e),...t})}const cp=10,_w=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(!0),[l,c]=m.useState(null),[d,f]=m.useState(""),[h,p]=m.useState(1),[v,x]=m.useState(0),[b,w]=m.useState(null),[j,N]=m.useState(!1),[_,C]=m.useState([]),[E,R]=m.useState(""),M=qc(d,300),T=Math.ceil(v/cp);m.useEffect(()=>{(async()=>{const{data:ce,error:se}=await ne.from("doctor").select("id, full_name").order("full_name",{ascending:!0});se||C(ce||[])})()},[]);const L=m.useCallback(async()=>{a(!0),c(null);try{const W=(h-1)*cp,ce=W+cp-1;let se=ne.from("patient").select("*",{count:"exact"});if(M){const O=`%${M}%`;se=se.or(`full_name.ilike.${O},patient_unique_id.ilike.${O}`)}if(E){const{data:O,error:V}=await ne.from("patient_result").select("patient_id").eq("doctor_id",E);if(V)throw console.error("Supabase error while fetching patient_result:",V),V;const U=(O||[]).map(J=>J.patient_id);if(U.length===0){t([]),x(0),a(!1);return}se=se.in("id",U)}se=se.order("created_at",{ascending:!1}).range(W,ce);const{data:B,error:ie,count:oe}=await se;if(ie)throw console.error("Supabase error while fetching patients:",ie),ie;t(B||[]),x(oe??0)}catch(W){console.error("Erreur lors de la récupération des patients:",W),c(W instanceof Error?W.message:"Une erreur est survenue lors du chargement des patients."),t([]),x(0)}finally{a(!1)}},[h,M,E]);m.useEffect(()=>{L()},[L]),m.useEffect(()=>{p(1)},[M,E]);const H=()=>{p(W=>Math.max(W-1,1))},q=()=>{p(W=>Math.min(W+1,T))},G=async()=>{if(b){N(!0),c(null);try{const{error:W}=await ne.from("patient").delete().eq("id",b.id);if(W)throw W;t(ce=>ce.filter(se=>se.id!==b.id)),x(ce=>ce-1),w(null)}catch(W){c((W instanceof Error?W.message:"")||"Erreur lors de la suppression du patient.")}finally{N(!1)}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(O_,{className:"h-6 w-6"}),"Gestion des Patients"]}),s.jsx(it,{to:"/patients/new",children:s.jsxs(te,{children:[s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Ajouter un Patient"]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx($c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ve,{type:"search",placeholder:"Rechercher par nom ou ID unique...",value:d,onChange:W=>f(W.target.value),className:"pl-10 w-full md:w-1/3"})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[s.jsx(Le,{htmlFor:"doctor-filter",children:"Filtrer par médecin :"}),s.jsxs("select",{id:"doctor-filter",value:E,onChange:W=>R(W.target.value),className:"border rounded px-2 py-1 text-sm",children:[s.jsx("option",{value:"",children:"Tous les médecins"}),_.map(W=>s.jsx("option",{value:W.id,children:W.full_name},W.id))]})]}),r&&s.jsxs("div",{className:"space-y-2 pt-4",children:[s.jsx(Y,{className:"h-12 w-full"}),s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"})]}),!r&&l&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur de Chargement"}),s.jsx(qt,{children:l})]}),!r&&!l&&s.jsxs("div",{className:"space-y-4",children:[" ",s.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Xt,{children:[s.jsx(ht,{className:"w-[150px]",children:"ID Unique"}),s.jsx(ht,{children:"Nom Complet"}),s.jsx(ht,{children:"Date de Naissance"}),s.jsx(ht,{className:"hidden md:table-cell",children:"Genre"}),s.jsx(ht,{className:"hidden lg:table-cell",children:"Téléphone"}),s.jsx(ht,{className:"text-right",children:"Actions"})]})}),s.jsx(la,{children:e.length>0?e.map(W=>s.jsxs(Xt,{children:[s.jsx(Ke,{className:"font-medium",children:W.patient_unique_id}),s.jsx(Ke,{children:W.full_name}),s.jsx(Ke,{children:W.date_of_birth?new Date(W.date_of_birth).toLocaleDateString("fr-FR"):"N/A"}),s.jsx(Ke,{className:"hidden md:table-cell",children:W.gender||"N/A"}),s.jsx(Ke,{className:"hidden lg:table-cell",children:W.phone||"N/A"}),s.jsxs(Ke,{className:"text-right",children:[s.jsx(it,{to:`/patients/${W.id}`,children:s.jsx(te,{variant:"outline",size:"sm",children:"Voir Détails"})}),s.jsxs(wc,{children:[s.jsx(wf,{asChild:!0,children:s.jsxs(te,{variant:"destructive",size:"sm",className:"ml-2",title:"Supprimer le patient",onClick:()=>w(W),disabled:r,children:[s.jsx(Bc,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Supprimer"})]})}),s.jsxs(jf,{children:[s.jsxs(_f,{children:[s.jsx(Sf,{children:"Supprimer ce patient ?"}),s.jsx(Ef,{children:"Cette action est irréversible. Voulez-vous vraiment supprimer ce patient ?"})]}),s.jsxs(Nf,{children:[s.jsx(Cf,{onClick:()=>w(null),disabled:j,children:"Annuler"}),s.jsx(av,{onClick:G,disabled:j,className:"bg-destructive text-destructive-foreground",children:"Supprimer"})]})]})]})]})]},W.id)):s.jsx(Xt,{children:s.jsx(Ke,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:d?"Aucun patient ne correspond à votre recherche.":s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[s.jsx(pf,{className:"h-8 w-8 text-muted-foreground/50"}),"Aucun patient trouvé. Commencez par en ajouter un."]})})})})]})}),T>1&&s.jsxs("div",{className:"flex items-center justify-between space-x-2 pt-2",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",h," sur ",T," (",v," ",v===1?"résultat":"résultats",")"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(te,{variant:"outline",size:"sm",onClick:H,disabled:h<=1,children:[s.jsx(M_,{className:"h-4 w-4 mr-1 sm:mr-2"})," ",s.jsx("span",{className:"hidden sm:inline",children:"Précédent"})," "]}),s.jsxs(te,{variant:"outline",size:"sm",onClick:q,disabled:h>=T,children:[s.jsx("span",{className:"hidden sm:inline",children:"Suivant"})," ",s.jsx(A_,{className:"h-4 w-4 ml-1 sm:ml-2"})," "]})]})]})]})]})},y5=Eg("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function os({className:e,variant:t,asChild:r=!1,...a}){const l=r?Rs:"span";return s.jsx(l,{"data-slot":"badge",className:Ce(y5({variant:t}),e),...a})}function Lt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function kr(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ir(e,t){const r=Lt(e);return isNaN(t)?kr(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function cs(e,t){const r=Lt(e);if(isNaN(t))return kr(e,NaN);if(!t)return r;const a=r.getDate(),l=kr(e,r.getTime());l.setMonth(r.getMonth()+t+1,0);const c=l.getDate();return a>=c?l:(r.setFullYear(l.getFullYear(),l.getMonth(),a),r)}const iv=6048e5,b5=864e5,wN=6e4,jN=36e5;let w5={};function Fc(){return w5}function Ms(e,t){var f,h,p,v;const r=Fc(),a=(t==null?void 0:t.weekStartsOn)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??r.weekStartsOn??((v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,l=Lt(e),c=l.getDay(),d=(c<a?7:0)+c-a;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function Ri(e){return Ms(e,{weekStartsOn:1})}function _N(e){const t=Lt(e),r=t.getFullYear(),a=kr(e,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const l=Ri(a),c=kr(e,0);c.setFullYear(r,0,4),c.setHours(0,0,0,0);const d=Ri(c);return t.getTime()>=l.getTime()?r+1:t.getTime()>=d.getTime()?r:r-1}function zl(e){const t=Lt(e);return t.setHours(0,0,0,0),t}function Bd(e){const t=Lt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Ss(e,t){const r=zl(e),a=zl(t),l=+r-Bd(r),c=+a-Bd(a);return Math.round((l-c)/b5)}function j5(e){const t=_N(e),r=kr(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ri(r)}function Xp(e,t){const r=t*7;return ir(e,r)}function _5(e,t){return cs(e,t*12)}function N5(e){let t;return e.forEach(function(r){const a=Lt(r);(t===void 0||t<a||isNaN(Number(a)))&&(t=a)}),t||new Date(NaN)}function S5(e){let t;return e.forEach(r=>{const a=Lt(r);(!t||t>a||isNaN(+a))&&(t=a)}),t||new Date(NaN)}function vr(e,t){const r=zl(e),a=zl(t);return+r==+a}function lv(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function E5(e){if(!lv(e)&&typeof e!="number")return!1;const t=Lt(e);return!isNaN(Number(t))}function jc(e,t){const r=Lt(e),a=Lt(t),l=r.getFullYear()-a.getFullYear(),c=r.getMonth()-a.getMonth();return l*12+c}function C5(e,t,r){const a=Ms(e,r),l=Ms(t,r),c=+a-Bd(a),d=+l-Bd(l);return Math.round((c-d)/iv)}function ov(e){const t=Lt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function xr(e){const t=Lt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function NN(e){const t=Lt(e),r=kr(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function cv(e,t){var f,h,p,v;const r=Fc(),a=(t==null?void 0:t.weekStartsOn)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??r.weekStartsOn??((v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,l=Lt(e),c=l.getDay(),d=(c<a?-7:0)+6-(c-a);return l.setDate(l.getDate()+d),l.setHours(23,59,59,999),l}function SN(e){return cv(e,{weekStartsOn:1})}const R5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},T5=(e,t,r)=>{let a;const l=R5[e];return typeof l=="string"?a=l:t===1?a=l.one:a=l.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function Ml(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const M5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},A5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},k5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},D5={date:Ml({formats:M5,defaultWidth:"full"}),time:Ml({formats:A5,defaultWidth:"full"}),dateTime:Ml({formats:k5,defaultWidth:"full"})},O5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},P5=(e,t,r,a)=>O5[e];function js(e){return(t,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let l;if(a==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,f=r!=null&&r.width?String(r.width):d;l=e.formattingValues[f]||e.formattingValues[d]}else{const d=e.defaultWidth,f=r!=null&&r.width?String(r.width):e.defaultWidth;l=e.values[f]||e.values[d]}const c=e.argumentCallback?e.argumentCallback(t):t;return l[c]}}const L5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},I5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},z5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},U5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},B5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},H5=(e,t)=>{const r=Number(e),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},q5={ordinalNumber:H5,era:js({values:L5,defaultWidth:"wide"}),quarter:js({values:I5,defaultWidth:"wide",argumentCallback:e=>e-1}),month:js({values:z5,defaultWidth:"wide"}),day:js({values:U5,defaultWidth:"wide"}),dayPeriod:js({values:$5,defaultWidth:"wide",formattingValues:B5,defaultFormattingWidth:"wide"})};function _s(e){return(t,r={})=>{const a=r.width,l=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],c=t.match(l);if(!c)return null;const d=c[0],f=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(f)?V5(f,x=>x.test(d)):F5(f,x=>x.test(d));let p;p=e.valueCallback?e.valueCallback(h):h,p=r.valueCallback?r.valueCallback(p):p;const v=t.slice(d.length);return{value:p,rest:v}}}function F5(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function V5(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function EN(e){return(t,r={})=>{const a=t.match(e.matchPattern);if(!a)return null;const l=a[0],c=t.match(e.parsePattern);if(!c)return null;let d=e.valueCallback?e.valueCallback(c[0]):c[0];d=r.valueCallback?r.valueCallback(d):d;const f=t.slice(l.length);return{value:d,rest:f}}}const Y5=/^(\d+)(th|st|nd|rd)?/i,G5=/\d+/i,W5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},X5={any:[/^b/i,/^(a|c)/i]},K5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Q5={any:[/1/i,/2/i,/3/i,/4/i]},Z5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},J5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sL={ordinalNumber:EN({matchPattern:Y5,parsePattern:G5,valueCallback:e=>parseInt(e,10)}),era:_s({matchPatterns:W5,defaultMatchWidth:"wide",parsePatterns:X5,defaultParseWidth:"any"}),quarter:_s({matchPatterns:K5,defaultMatchWidth:"wide",parsePatterns:Q5,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_s({matchPatterns:Z5,defaultMatchWidth:"wide",parsePatterns:J5,defaultParseWidth:"any"}),day:_s({matchPatterns:eL,defaultMatchWidth:"wide",parsePatterns:tL,defaultParseWidth:"any"}),dayPeriod:_s({matchPatterns:nL,defaultMatchWidth:"any",parsePatterns:rL,defaultParseWidth:"any"})},CN={code:"en-US",formatDistance:T5,formatLong:D5,formatRelative:P5,localize:q5,match:sL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function aL(e){const t=Lt(e);return Ss(t,NN(t))+1}function RN(e){const t=Lt(e),r=+Ri(t)-+j5(t);return Math.round(r/iv)+1}function TN(e,t){var v,x,b,w;const r=Lt(e),a=r.getFullYear(),l=Fc(),c=(t==null?void 0:t.firstWeekContainsDate)??((x=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??l.firstWeekContainsDate??((w=(b=l.locale)==null?void 0:b.options)==null?void 0:w.firstWeekContainsDate)??1,d=kr(e,0);d.setFullYear(a+1,0,c),d.setHours(0,0,0,0);const f=Ms(d,t),h=kr(e,0);h.setFullYear(a,0,c),h.setHours(0,0,0,0);const p=Ms(h,t);return r.getTime()>=f.getTime()?a+1:r.getTime()>=p.getTime()?a:a-1}function iL(e,t){var f,h,p,v;const r=Fc(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,l=TN(e,t),c=kr(e,0);return c.setFullYear(l,0,a),c.setHours(0,0,0,0),Ms(c,t)}function MN(e,t){const r=Lt(e),a=+Ms(r,t)-+iL(r,t);return Math.round(a/iv)+1}function Wt(e,t){const r=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return r+a}const ka={y(e,t){const r=e.getFullYear(),a=r>0?r:1-r;return Wt(t==="yy"?a%100:a,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Wt(r+1,2)},d(e,t){return Wt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Wt(e.getHours()%12||12,t.length)},H(e,t){return Wt(e.getHours(),t.length)},m(e,t){return Wt(e.getMinutes(),t.length)},s(e,t){return Wt(e.getSeconds(),t.length)},S(e,t){const r=t.length,a=e.getMilliseconds(),l=Math.trunc(a*Math.pow(10,r-3));return Wt(l,t.length)}},Nl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Nw={G:function(e,t,r){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const a=e.getFullYear(),l=a>0?a:1-a;return r.ordinalNumber(l,{unit:"year"})}return ka.y(e,t)},Y:function(e,t,r,a){const l=TN(e,a),c=l>0?l:1-l;if(t==="YY"){const d=c%100;return Wt(d,2)}return t==="Yo"?r.ordinalNumber(c,{unit:"year"}):Wt(c,t.length)},R:function(e,t){const r=_N(e);return Wt(r,t.length)},u:function(e,t){const r=e.getFullYear();return Wt(r,t.length)},Q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return Wt(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return Wt(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){const a=e.getMonth();switch(t){case"M":case"MM":return ka.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return Wt(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,r,a){const l=MN(e,a);return t==="wo"?r.ordinalNumber(l,{unit:"week"}):Wt(l,t.length)},I:function(e,t,r){const a=RN(e);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):Wt(a,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ka.d(e,t)},D:function(e,t,r){const a=aL(e);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):Wt(a,t.length)},E:function(e,t,r){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){const l=e.getDay(),c=(l-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(c);case"ee":return Wt(c,2);case"eo":return r.ordinalNumber(c,{unit:"day"});case"eee":return r.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(l,{width:"short",context:"formatting"});case"eeee":default:return r.day(l,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){const l=e.getDay(),c=(l-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(c);case"cc":return Wt(c,t.length);case"co":return r.ordinalNumber(c,{unit:"day"});case"ccc":return r.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(l,{width:"narrow",context:"standalone"});case"cccccc":return r.day(l,{width:"short",context:"standalone"});case"cccc":default:return r.day(l,{width:"wide",context:"standalone"})}},i:function(e,t,r){const a=e.getDay(),l=a===0?7:a;switch(t){case"i":return String(l);case"ii":return Wt(l,t.length);case"io":return r.ordinalNumber(l,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){const l=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,t,r){const a=e.getHours();let l;switch(a===12?l=Nl.noon:a===0?l=Nl.midnight:l=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,t,r){const a=e.getHours();let l;switch(a>=17?l=Nl.evening:a>=12?l=Nl.afternoon:a>=4?l=Nl.morning:l=Nl.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return ka.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ka.H(e,t)},K:function(e,t,r){const a=e.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):Wt(a,t.length)},k:function(e,t,r){let a=e.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):Wt(a,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ka.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ka.s(e,t)},S:function(e,t){return ka.S(e,t)},X:function(e,t,r){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return Ew(a);case"XXXX":case"XX":return Ni(a);case"XXXXX":case"XXX":default:return Ni(a,":")}},x:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"x":return Ew(a);case"xxxx":case"xx":return Ni(a);case"xxxxx":case"xxx":default:return Ni(a,":")}},O:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Sw(a,":");case"OOOO":default:return"GMT"+Ni(a,":")}},z:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Sw(a,":");case"zzzz":default:return"GMT"+Ni(a,":")}},t:function(e,t,r){const a=Math.trunc(e.getTime()/1e3);return Wt(a,t.length)},T:function(e,t,r){const a=e.getTime();return Wt(a,t.length)}};function Sw(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),l=Math.trunc(a/60),c=a%60;return c===0?r+String(l):r+String(l)+t+Wt(c,2)}function Ew(e,t){return e%60===0?(e>0?"-":"+")+Wt(Math.abs(e)/60,2):Ni(e,t)}function Ni(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),l=Wt(Math.trunc(a/60),2),c=Wt(a%60,2);return r+l+t+c}const Cw=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},AN=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},lL=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],a=r[1],l=r[2];if(!l)return Cw(e,t);let c;switch(a){case"P":c=t.dateTime({width:"short"});break;case"PP":c=t.dateTime({width:"medium"});break;case"PPP":c=t.dateTime({width:"long"});break;case"PPPP":default:c=t.dateTime({width:"full"});break}return c.replace("{{date}}",Cw(a,t)).replace("{{time}}",AN(l,t))},oL={p:AN,P:lL},cL=/^D+$/,uL=/^Y+$/,dL=["D","DD","YY","YYYY"];function fL(e){return cL.test(e)}function hL(e){return uL.test(e)}function mL(e,t,r){const a=pL(e,t,r);if(console.warn(a),dL.includes(e))throw new RangeError(a)}function pL(e,t,r){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xL=/^'([^]*?)'?$/,yL=/''/g,bL=/[a-zA-Z]/;function Je(e,t,r){var v,x,b,w,j,N,_,C;const a=Fc(),l=(r==null?void 0:r.locale)??a.locale??CN,c=(r==null?void 0:r.firstWeekContainsDate)??((x=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??a.firstWeekContainsDate??((w=(b=a.locale)==null?void 0:b.options)==null?void 0:w.firstWeekContainsDate)??1,d=(r==null?void 0:r.weekStartsOn)??((N=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:N.weekStartsOn)??a.weekStartsOn??((C=(_=a.locale)==null?void 0:_.options)==null?void 0:C.weekStartsOn)??0,f=Lt(e);if(!E5(f))throw new RangeError("Invalid time value");let h=t.match(vL).map(E=>{const R=E[0];if(R==="p"||R==="P"){const M=oL[R];return M(E,l.formatLong)}return E}).join("").match(gL).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const R=E[0];if(R==="'")return{isToken:!1,value:wL(E)};if(Nw[R])return{isToken:!0,value:E};if(R.match(bL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return{isToken:!1,value:E}});l.localize.preprocessor&&(h=l.localize.preprocessor(f,h));const p={firstWeekContainsDate:c,weekStartsOn:d,locale:l};return h.map(E=>{if(!E.isToken)return E.value;const R=E.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&hL(R)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&fL(R))&&mL(R,t,String(e));const M=Nw[R[0]];return M(f,R,l.localize,p)}).join("")}function wL(e){const t=e.match(xL);return t?t[1].replace(yL,"'"):e}function jL(e){const t=Lt(e),r=t.getFullYear(),a=t.getMonth(),l=kr(e,0);return l.setFullYear(r,a+1,0),l.setHours(0,0,0,0),l.getDate()}function _L(e){return Math.trunc(+Lt(e)/1e3)}function NL(e){const t=Lt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function SL(e,t){return C5(NL(e),xr(e),t)+1}function Kp(e,t){const r=Lt(e),a=Lt(t);return r.getTime()>a.getTime()}function kN(e,t){const r=Lt(e),a=Lt(t);return+r<+a}function uv(e,t){const r=Lt(e),a=Lt(t);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}function EL(e,t){const r=Lt(e),a=Lt(t);return r.getFullYear()===a.getFullYear()}function up(e,t){return ir(e,-t)}function Dt(e,t){const a=ML(e);let l;if(a.date){const h=AL(a.date,2);l=kL(h.restDateString,h.year)}if(!l||isNaN(l.getTime()))return new Date(NaN);const c=l.getTime();let d=0,f;if(a.time&&(d=DL(a.time),isNaN(d)))return new Date(NaN);if(a.timezone){if(f=OL(a.timezone),isNaN(f))return new Date(NaN)}else{const h=new Date(c+d),p=new Date(0);return p.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),p.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),p}return new Date(c+d+f)}const yd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},CL=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,RL=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,TL=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ML(e){const t={},r=e.split(yd.dateTimeDelimiter);let a;if(r.length>2)return t;if(/:/.test(r[0])?a=r[0]:(t.date=r[0],a=r[1],yd.timeZoneDelimiter.test(t.date)&&(t.date=e.split(yd.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){const l=yd.timezone.exec(a);l?(t.time=a.replace(l[1],""),t.timezone=l[1]):t.time=a}return t}function AL(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(r);if(!a)return{year:NaN,restDateString:""};const l=a[1]?parseInt(a[1]):null,c=a[2]?parseInt(a[2]):null;return{year:c===null?l:c*100,restDateString:e.slice((a[1]||a[2]).length)}}function kL(e,t){if(t===null)return new Date(NaN);const r=e.match(CL);if(!r)return new Date(NaN);const a=!!r[4],l=rc(r[1]),c=rc(r[2])-1,d=rc(r[3]),f=rc(r[4]),h=rc(r[5])-1;if(a)return UL(t,f,h)?PL(t,f,h):new Date(NaN);{const p=new Date(0);return!IL(t,c,d)||!zL(t,l)?new Date(NaN):(p.setUTCFullYear(t,c,Math.max(l,d)),p)}}function rc(e){return e?parseInt(e):1}function DL(e){const t=e.match(RL);if(!t)return NaN;const r=dp(t[1]),a=dp(t[2]),l=dp(t[3]);return $L(r,a,l)?r*jN+a*wN+l*1e3:NaN}function dp(e){return e&&parseFloat(e.replace(",","."))||0}function OL(e){if(e==="Z")return 0;const t=e.match(TL);if(!t)return 0;const r=t[1]==="+"?-1:1,a=parseInt(t[2]),l=t[3]&&parseInt(t[3])||0;return BL(a,l)?r*(a*jN+l*wN):NaN}function PL(e,t,r){const a=new Date(0);a.setUTCFullYear(e,0,4);const l=a.getUTCDay()||7,c=(t-1)*7+r+1-l;return a.setUTCDate(a.getUTCDate()+c),a}const LL=[31,null,31,30,31,30,31,31,30,31,30,31];function DN(e){return e%400===0||e%4===0&&e%100!==0}function IL(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(LL[t]||(DN(e)?29:28))}function zL(e,t){return t>=1&&t<=(DN(e)?366:365)}function UL(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function $L(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function BL(e,t){return t>=0&&t<=59}function fp(e,t){const r=Lt(e),a=r.getFullYear(),l=r.getDate(),c=kr(e,0);c.setFullYear(a,t,15),c.setHours(0,0,0,0);const d=jL(c);return r.setMonth(t,Math.min(l,d)),r}function Rw(e,t){const r=Lt(e);return isNaN(+r)?kr(e,NaN):(r.setFullYear(t),r)}const HL={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},qL=(e,t,r)=>{let a;const l=HL[e];return typeof l=="string"?a=l:t===1?a=l.one:a=l.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+a:"il y a "+a:a},FL={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},VL={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},YL={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GL={date:Ml({formats:FL,defaultWidth:"full"}),time:Ml({formats:VL,defaultWidth:"full"}),dateTime:Ml({formats:YL,defaultWidth:"full"})},WL={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},XL=(e,t,r,a)=>WL[e],KL={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},QL={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},ZL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},JL={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},e6={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},t6=(e,t)=>{const r=Number(e),a=t==null?void 0:t.unit;if(r===0)return"0";const l=["year","week","hour","minute","second"];let c;return r===1?c=a&&l.includes(a)?"ère":"er":c="ème",r+c},n6=["MMM","MMMM"],r6={preprocessor:(e,t)=>e.getDate()===1||!t.some(a=>a.isToken&&n6.includes(a.value))?t:t.map(a=>a.isToken&&a.value==="do"?{isToken:!0,value:"d"}:a),ordinalNumber:t6,era:js({values:KL,defaultWidth:"wide"}),quarter:js({values:QL,defaultWidth:"wide",argumentCallback:e=>e-1}),month:js({values:ZL,defaultWidth:"wide"}),day:js({values:JL,defaultWidth:"wide"}),dayPeriod:js({values:e6,defaultWidth:"wide"})},s6=/^(\d+)(ième|ère|ème|er|e)?/i,a6=/\d+/i,i6={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},l6={any:[/^av/i,/^ap/i]},o6={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},c6={any:[/1/i,/2/i,/3/i,/4/i]},u6={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},d6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},f6={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},h6={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},m6={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},p6={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},g6={ordinalNumber:EN({matchPattern:s6,parsePattern:a6,valueCallback:e=>parseInt(e)}),era:_s({matchPatterns:i6,defaultMatchWidth:"wide",parsePatterns:l6,defaultParseWidth:"any"}),quarter:_s({matchPatterns:o6,defaultMatchWidth:"wide",parsePatterns:c6,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_s({matchPatterns:u6,defaultMatchWidth:"wide",parsePatterns:d6,defaultParseWidth:"any"}),day:_s({matchPatterns:f6,defaultMatchWidth:"wide",parsePatterns:h6,defaultParseWidth:"any"}),dayPeriod:_s({matchPatterns:m6,defaultMatchWidth:"any",parsePatterns:p6,defaultParseWidth:"any"})},Tt={code:"fr",formatDistance:qL,formatLong:GL,formatRelative:XL,localize:r6,match:g6,options:{weekStartsOn:1,firstWeekContainsDate:4}},v6=e=>{switch(e==null?void 0:e.toLowerCase()){case"completed":return"default";case"in progress":return"secondary";case"pending":return"outline";default:return"secondary"}},x6=()=>{const{patientId:e}=yr(),t=or(),[r,a]=m.useState(null),[l,c]=m.useState([]),[d,f]=m.useState(!0),[h,p]=m.useState(!0),[v,x]=m.useState(null),b=m.useCallback(async()=>{if(e){f(!0);try{const{data:_,error:C}=await ne.from("patient").select("*").eq("id",e).single();if(C)throw C;if(!_)throw new Error("Patient non trouvé.");a(_)}catch(_){console.error("Erreur chargement détails patient:",_),x(C=>C||(_ instanceof Error?_.message:"Erreur inconnue")||"Impossible de charger les détails du patient.")}finally{f(!1)}}},[e]),w=m.useCallback(async()=>{if(e){p(!0);try{const{data:_,error:C}=await ne.from("patient_result").select(`
          id,
          result_date,
          status,
          doctor:doctor_id ( full_name )
        `).eq("patient_id",e).order("result_date",{ascending:!1});if(C)throw C;c(_||[])}catch(_){console.error("Erreur chargement résultats patient:",_),x(C=>C||(_ instanceof Error?_.message:"Erreur inconnue")||"Impossible de charger les résultats du patient.")}finally{p(!1)}}},[e]);m.useEffect(()=>{x(null),(async()=>{a(null),c([]),f(!0),p(!0),await Promise.all([b(),w()])})()},[b,w]);const j=d||h,N=(_,C,E)=>{const R=_;return s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(R,{className:"h-5 w-5 text-muted-foreground mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:C}),s.jsx("p",{className:"text-base",children:E||s.jsx("span",{className:"text-muted-foreground italic",children:"Non spécifié"})})]})]})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[s.jsx("div",{children:s.jsx(it,{to:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour à la liste"]})})}),!j&&r&&!v&&s.jsx(it,{to:`/patients/${e}/edit`,children:s.jsxs(te,{variant:"secondary",children:[s.jsx(Xr,{className:"mr-2 h-4 w-4"}),"Modifier le Patient"]})})]}),d&&s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-6 w-3/5"}),s.jsx(Y,{className:"h-4 w-4/5"})]}),s.jsxs(Ee,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"})]})]}),v&&!j&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsxs(qt,{children:[v," ",s.jsx(te,{variant:"link",onClick:()=>{b(),w()},className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),!d&&r&&!v&&s.jsxs(Se,{className:"overflow-hidden",children:[s.jsxs(Me,{className:"bg-muted/30",children:[s.jsxs(yt,{className:"text-xl font-semibold flex items-center gap-2",children:[s.jsx(Gt,{className:"h-5 w-5"}),"Informations du Patient"]}),s.jsx(gr,{children:"Détails démographiques."})]}),s.jsxs(Ee,{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[N(Gt,"Nom Complet",r.full_name),N(We,"ID Unique",r.patient_unique_id),N(Kt,"Date de Naissance",r.date_of_birth?Je(Dt(r.date_of_birth),"PPP",{locale:Tt}):null),N(We,"Genre",r.gender),N(lr,"Téléphone",r.phone)]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold tracking-tight flex items-center gap-2",children:[s.jsx(Ga,{className:"h-6 w-6"}),"Historique des Résultats"]}),!j&&r&&!v&&s.jsxs(te,{onClick:()=>t(`/patients/${e}/results/new`),children:[" ",s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Ajouter un Résultat"]})]}),h&&s.jsxs("div",{className:"border rounded-lg overflow-hidden bg-background",children:[s.jsx(Y,{className:"h-12 w-full"})," ",s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"})]}),!h&&!v&&s.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Xt,{children:[s.jsx(ht,{className:"w-[180px]",children:"Date du Résultat"}),s.jsx(ht,{children:"Médecin Prescripteur"}),s.jsx(ht,{className:"w-[130px]",children:"Statut"}),s.jsx(ht,{className:"text-right w-[150px]",children:"Actions"})]})}),s.jsx(la,{children:l.length>0?l.map(_=>{var C,E,R;return s.jsxs(Xt,{children:[s.jsx(Ke,{children:_.result_date?Je(Dt(_.result_date),"PPP 'à' HH:mm",{locale:Tt}):"N/A"}),s.jsx(Ke,{children:((C=_.doctor)==null?void 0:C.full_name)||s.jsx("span",{className:"italic text-muted-foreground",children:"Inconnu"})}),s.jsx(Ke,{children:s.jsx(os,{variant:v6(_.status),children:((E=_.status)==null?void 0:E.charAt(0).toUpperCase())+((R=_.status)==null?void 0:R.slice(1))||"N/A"})}),s.jsx(Ke,{className:"text-right",children:s.jsxs(it,{to:`/results/${_.id}`,children:[" ",s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(is,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"})," ",s.jsx("span",{className:"hidden sm:inline",children:"Voir Résultat"})," ",s.jsx("span",{className:"sm:hidden",children:"Voir"})," "]})]})})]},_.id)}):s.jsx(Xt,{children:s.jsx(Ke,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"Aucun résultat trouvé pour ce patient."})})})]})})]})]})},y6=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(!0),[l,c]=m.useState(null),[d,f]=m.useState(""),[h,p]=m.useState(null),[v,x]=m.useState(!1),b=qc(d,300),w=m.useCallback(async()=>{a(!0),c(null);try{const{data:_,error:C}=await ne.from("doctor").select("*").order("full_name",{ascending:!0});if(C)throw C;t(_||[])}catch(_){console.error("Erreur lors de la récupération des médecins:",_),c((_ instanceof Error?_.message:"")||"Une erreur est survenue lors du chargement des médecins."),t([])}finally{a(!1)}},[]);m.useEffect(()=>{w()},[w]);const j=m.useMemo(()=>{if(!b)return e;const _=b.toLowerCase();return e.filter(C=>C.full_name.toLowerCase().includes(_)||C.hospital&&C.hospital.toLowerCase().includes(_))},[e,b]),N=async()=>{if(h){x(!0),c(null);try{const{error:_}=await ne.from("doctor").delete().eq("id",h.id);if(_)throw _;t(C=>C.filter(E=>E.id!==h.id)),p(null)}catch(_){c((_ instanceof Error?_.message:"")||"Erreur lors de la suppression du médecin.")}finally{x(!1)}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(Zn,{className:"h-6 w-6"}),"Gestion des Médecins"]}),s.jsx(it,{to:"/doctors/new",children:s.jsxs(te,{children:[s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Ajouter un Médecin"]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx($c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ve,{type:"search",placeholder:"Rechercher par nom ou hôpital...",value:d,onChange:_=>f(_.target.value),className:"pl-10 w-full md:w-1/3 h-10",disabled:r})]}),r&&s.jsxs("div",{className:"border rounded-lg",children:[s.jsx(Y,{className:"h-12 w-full rounded-t-lg"}),s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"})]})]}),!r&&l&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur de Chargement"}),s.jsxs(qt,{children:[l," ",s.jsx(te,{variant:"link",onClick:w,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),!r&&!l&&s.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Xt,{children:[s.jsx(ht,{children:"Nom Complet"}),s.jsx(ht,{className:"w-[200px]",children:"Téléphone"}),s.jsx(ht,{className:"w-[300px]",children:"Hôpital / Clinique"}),s.jsx(ht,{className:"text-right w-[150px]",children:"Actions"})]})}),s.jsx(la,{children:j.length>0?j.map(_=>s.jsxs(Xt,{children:[s.jsx(Ke,{className:"font-medium",children:_.full_name}),s.jsx(Ke,{children:_.phone||s.jsx("span",{className:"italic text-muted-foreground",children:"N/A"})}),s.jsx(Ke,{children:_.hospital||s.jsx("span",{className:"italic text-muted-foreground",children:"N/A"})}),s.jsxs(Ke,{className:"text-right",children:[s.jsx(it,{to:`/doctors/${_.id}/edit`,children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Xr,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Modifier"}),s.jsx("span",{className:"sm:hidden",children:"Éditer"})]})}),s.jsxs(wc,{children:[s.jsx(wf,{asChild:!0,children:s.jsxs(te,{variant:"destructive",size:"sm",className:"ml-2",title:"Supprimer le médecin",onClick:()=>p(_),disabled:r,children:[s.jsx(Bc,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Supprimer"})]})}),s.jsxs(jf,{children:[s.jsxs(_f,{children:[s.jsx(Sf,{children:"Supprimer ce médecin ?"}),s.jsx(Ef,{children:"Cette action est irréversible. Voulez-vous vraiment supprimer ce médecin ?"})]}),s.jsxs(Nf,{children:[s.jsx(Cf,{onClick:()=>p(null),disabled:v,children:"Annuler"}),s.jsx(av,{onClick:N,disabled:v,className:"bg-destructive text-destructive-foreground",children:"Supprimer"})]})]})]})]})]},_.id)):s.jsx(Xt,{children:s.jsx(Ke,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:d?"Aucun médecin ne correspond à votre recherche.":s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[s.jsx(pf,{className:"h-8 w-8 text-muted-foreground/50"}),"Aucun médecin trouvé. Commencez par en ajouter un."]})})})})]})})]})},b6=()=>s.jsx("div",{children:"404 - Page Not Found"});var dv="Popover",[ON,JB]=cr(dv,[Ya]),Vc=Ya(),[w6,Wa]=ON(dv),PN=e=>{const{__scopePopover:t,children:r,open:a,defaultOpen:l,onOpenChange:c,modal:d=!1}=e,f=Vc(t),h=m.useRef(null),[p,v]=m.useState(!1),[x=!1,b]=$a({prop:a,defaultProp:l,onChange:c});return s.jsx(zg,{...f,children:s.jsx(w6,{scope:t,contentId:Es(),triggerRef:h,open:x,onOpenChange:b,onOpenToggle:m.useCallback(()=>b(w=>!w),[b]),hasCustomAnchor:p,onCustomAnchorAdd:m.useCallback(()=>v(!0),[]),onCustomAnchorRemove:m.useCallback(()=>v(!1),[]),modal:d,children:r})})};PN.displayName=dv;var LN="PopoverAnchor",j6=m.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,l=Wa(LN,r),c=Vc(r),{onCustomAnchorAdd:d,onCustomAnchorRemove:f}=l;return m.useEffect(()=>(d(),()=>f()),[d,f]),s.jsx(Pc,{...c,...a,ref:t})});j6.displayName=LN;var IN="PopoverTrigger",zN=m.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,l=Wa(IN,r),c=Vc(r),d=St(t,l.triggerRef),f=s.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":qN(l.open),...a,ref:d,onClick:Ae(e.onClick,l.onOpenToggle)});return l.hasCustomAnchor?f:s.jsx(Pc,{asChild:!0,...c,children:f})});zN.displayName=IN;var fv="PopoverPortal",[_6,N6]=ON(fv,{forceMount:void 0}),UN=e=>{const{__scopePopover:t,forceMount:r,children:a,container:l}=e,c=Wa(fv,t);return s.jsx(_6,{scope:t,forceMount:r,children:s.jsx(Dr,{present:r||c.open,children:s.jsx(Lc,{asChild:!0,container:l,children:a})})})};UN.displayName=fv;var Ul="PopoverContent",$N=m.forwardRef((e,t)=>{const r=N6(Ul,e.__scopePopover),{forceMount:a=r.forceMount,...l}=e,c=Wa(Ul,e.__scopePopover);return s.jsx(Dr,{present:a||c.open,children:c.modal?s.jsx(S6,{...l,ref:t}):s.jsx(E6,{...l,ref:t})})});$N.displayName=Ul;var S6=m.forwardRef((e,t)=>{const r=Wa(Ul,e.__scopePopover),a=m.useRef(null),l=St(t,a),c=m.useRef(!1);return m.useEffect(()=>{const d=a.current;if(d)return df(d)},[]),s.jsx(Ic,{as:Rs,allowPinchZoom:!0,children:s.jsx(BN,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ae(e.onCloseAutoFocus,d=>{var f;d.preventDefault(),c.current||(f=r.triggerRef.current)==null||f.focus()}),onPointerDownOutside:Ae(e.onPointerDownOutside,d=>{const f=d.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,p=f.button===2||h;c.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:Ae(e.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})})})}),E6=m.forwardRef((e,t)=>{const r=Wa(Ul,e.__scopePopover),a=m.useRef(!1),l=m.useRef(!1);return s.jsx(BN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var d,f;(d=e.onCloseAutoFocus)==null||d.call(e,c),c.defaultPrevented||(a.current||(f=r.triggerRef.current)==null||f.focus(),c.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:c=>{var h,p;(h=e.onInteractOutside)==null||h.call(e,c),c.defaultPrevented||(a.current=!0,c.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const d=c.target;((p=r.triggerRef.current)==null?void 0:p.contains(d))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&l.current&&c.preventDefault()}})}),BN=m.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:c,disableOutsidePointerEvents:d,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:v,...x}=e,b=Wa(Ul,r),w=Vc(r);return nf(),s.jsx(Dc,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:c,children:s.jsx(Ql,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:v,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onDismiss:()=>b.onOpenChange(!1),children:s.jsx(lf,{"data-state":qN(b.open),role:"dialog",id:b.contentId,...w,...x,ref:t,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),HN="PopoverClose",C6=m.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,l=Wa(HN,r);return s.jsx(Ze.button,{type:"button",...a,ref:t,onClick:Ae(e.onClick,()=>l.onOpenChange(!1))})});C6.displayName=HN;var R6="PopoverArrow",T6=m.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,l=Vc(r);return s.jsx(of,{...l,...a,ref:t})});T6.displayName=R6;function qN(e){return e?"open":"closed"}var M6=PN,A6=zN,k6=UN,D6=$N;function FN({...e}){return s.jsx(M6,{"data-slot":"popover",...e})}function VN({...e}){return s.jsx(A6,{"data-slot":"popover-trigger",...e})}function YN({className:e,align:t="center",sideOffset:r=4,...a}){return s.jsx(k6,{children:s.jsx(D6,{"data-slot":"popover-content",align:t,sideOffset:r,className:Ce("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...a})})}var Qe=function(){return Qe=Object.assign||function(t){for(var r,a=1,l=arguments.length;a<l;a++){r=arguments[a];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])}return t},Qe.apply(this,arguments)};function O6(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r}function GN(e,t,r){for(var a=0,l=t.length,c;a<l;a++)(c||!(a in t))&&(c||(c=Array.prototype.slice.call(t,0,a)),c[a]=t[a]);return e.concat(c||Array.prototype.slice.call(t))}function Yc(e){return e.mode==="multiple"}function Gc(e){return e.mode==="range"}function Rf(e){return e.mode==="single"}var P6={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function L6(e,t){return Je(e,"LLLL y",t)}function I6(e,t){return Je(e,"d",t)}function z6(e,t){return Je(e,"LLLL",t)}function U6(e){return"".concat(e)}function $6(e,t){return Je(e,"cccccc",t)}function B6(e,t){return Je(e,"yyyy",t)}var H6=Object.freeze({__proto__:null,formatCaption:L6,formatDay:I6,formatMonthCaption:z6,formatWeekNumber:U6,formatWeekdayName:$6,formatYearCaption:B6}),q6=function(e,t,r){return Je(e,"do MMMM (EEEE)",r)},F6=function(){return"Month: "},V6=function(){return"Go to next month"},Y6=function(){return"Go to previous month"},G6=function(e,t){return Je(e,"cccc",t)},W6=function(e){return"Week n. ".concat(e)},X6=function(){return"Year: "},K6=Object.freeze({__proto__:null,labelDay:q6,labelMonthDropdown:F6,labelNext:V6,labelPrevious:Y6,labelWeekNumber:W6,labelWeekday:G6,labelYearDropdown:X6});function Q6(){var e="buttons",t=P6,r=CN,a={},l={},c=1,d={},f=new Date;return{captionLayout:e,classNames:t,formatters:H6,labels:K6,locale:r,modifiersClassNames:a,modifiers:l,numberOfMonths:c,styles:d,today:f,mode:"default"}}function Z6(e){var t=e.fromYear,r=e.toYear,a=e.fromMonth,l=e.toMonth,c=e.fromDate,d=e.toDate;return a?c=xr(a):t&&(c=new Date(t,0,1)),l?d=ov(l):r&&(d=new Date(r,11,31)),{fromDate:c?zl(c):void 0,toDate:d?zl(d):void 0}}var WN=m.createContext(void 0);function J6(e){var t,r=e.initialProps,a=Q6(),l=Z6(r),c=l.fromDate,d=l.toDate,f=(t=r.captionLayout)!==null&&t!==void 0?t:a.captionLayout;f!=="buttons"&&(!c||!d)&&(f="buttons");var h;(Rf(r)||Yc(r)||Gc(r))&&(h=r.onSelect);var p=Qe(Qe(Qe({},a),r),{captionLayout:f,classNames:Qe(Qe({},a.classNames),r.classNames),components:Qe({},r.components),formatters:Qe(Qe({},a.formatters),r.formatters),fromDate:c,labels:Qe(Qe({},a.labels),r.labels),mode:r.mode||a.mode,modifiers:Qe(Qe({},a.modifiers),r.modifiers),modifiersClassNames:Qe(Qe({},a.modifiersClassNames),r.modifiersClassNames),onSelect:h,styles:Qe(Qe({},a.styles),r.styles),toDate:d});return s.jsx(WN.Provider,{value:p,children:e.children})}function ln(){var e=m.useContext(WN);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function XN(e){var t=ln(),r=t.locale,a=t.classNames,l=t.styles,c=t.formatters.formatCaption;return s.jsx("div",{className:a.caption_label,style:l.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:c(e.displayMonth,{locale:r})})}function e8(e){return s.jsx("svg",Qe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function KN(e){var t,r,a=e.onChange,l=e.value,c=e.children,d=e.caption,f=e.className,h=e.style,p=ln(),v=(r=(t=p.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:e8;return s.jsxs("div",{className:f,style:h,children:[s.jsx("span",{className:p.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:p.classNames.dropdown,style:p.styles.dropdown,value:l,onChange:a,children:c}),s.jsxs("div",{className:p.classNames.caption_label,style:p.styles.caption_label,"aria-hidden":"true",children:[d,s.jsx(v,{className:p.classNames.dropdown_icon,style:p.styles.dropdown_icon})]})]})}function t8(e){var t,r=ln(),a=r.fromDate,l=r.toDate,c=r.styles,d=r.locale,f=r.formatters.formatMonthCaption,h=r.classNames,p=r.components,v=r.labels.labelMonthDropdown;if(!a)return s.jsx(s.Fragment,{});if(!l)return s.jsx(s.Fragment,{});var x=[];if(EL(a,l))for(var b=xr(a),w=a.getMonth();w<=l.getMonth();w++)x.push(fp(b,w));else for(var b=xr(new Date),w=0;w<=11;w++)x.push(fp(b,w));var j=function(_){var C=Number(_.target.value),E=fp(xr(e.displayMonth),C);e.onChange(E)},N=(t=p==null?void 0:p.Dropdown)!==null&&t!==void 0?t:KN;return s.jsx(N,{name:"months","aria-label":v(),className:h.dropdown_month,style:c.dropdown_month,onChange:j,value:e.displayMonth.getMonth(),caption:f(e.displayMonth,{locale:d}),children:x.map(function(_){return s.jsx("option",{value:_.getMonth(),children:f(_,{locale:d})},_.getMonth())})})}function n8(e){var t,r=e.displayMonth,a=ln(),l=a.fromDate,c=a.toDate,d=a.locale,f=a.styles,h=a.classNames,p=a.components,v=a.formatters.formatYearCaption,x=a.labels.labelYearDropdown,b=[];if(!l)return s.jsx(s.Fragment,{});if(!c)return s.jsx(s.Fragment,{});for(var w=l.getFullYear(),j=c.getFullYear(),N=w;N<=j;N++)b.push(Rw(NN(new Date),N));var _=function(E){var R=Rw(xr(r),Number(E.target.value));e.onChange(R)},C=(t=p==null?void 0:p.Dropdown)!==null&&t!==void 0?t:KN;return s.jsx(C,{name:"years","aria-label":x(),className:h.dropdown_year,style:f.dropdown_year,onChange:_,value:r.getFullYear(),caption:v(r,{locale:d}),children:b.map(function(E){return s.jsx("option",{value:E.getFullYear(),children:v(E,{locale:d})},E.getFullYear())})})}function r8(e,t){var r=m.useState(e),a=r[0],l=r[1],c=t===void 0?a:t;return[c,l]}function s8(e){var t=e.month,r=e.defaultMonth,a=e.today,l=t||r||a||new Date,c=e.toDate,d=e.fromDate,f=e.numberOfMonths,h=f===void 0?1:f;if(c&&jc(c,l)<0){var p=-1*(h-1);l=cs(c,p)}return d&&jc(l,d)<0&&(l=d),xr(l)}function a8(){var e=ln(),t=s8(e),r=r8(t,e.month),a=r[0],l=r[1],c=function(d){var f;if(!e.disableNavigation){var h=xr(d);l(h),(f=e.onMonthChange)===null||f===void 0||f.call(e,h)}};return[a,c]}function i8(e,t){for(var r=t.reverseMonths,a=t.numberOfMonths,l=xr(e),c=xr(cs(l,a)),d=jc(c,l),f=[],h=0;h<d;h++){var p=cs(l,h);f.push(p)}return r&&(f=f.reverse()),f}function l8(e,t){if(!t.disableNavigation){var r=t.toDate,a=t.pagedNavigation,l=t.numberOfMonths,c=l===void 0?1:l,d=a?c:1,f=xr(e);if(!r)return cs(f,d);var h=jc(r,e);if(!(h<c))return cs(f,d)}}function o8(e,t){if(!t.disableNavigation){var r=t.fromDate,a=t.pagedNavigation,l=t.numberOfMonths,c=l===void 0?1:l,d=a?c:1,f=xr(e);if(!r)return cs(f,-d);var h=jc(f,r);if(!(h<=0))return cs(f,-d)}}var QN=m.createContext(void 0);function c8(e){var t=ln(),r=a8(),a=r[0],l=r[1],c=i8(a,t),d=l8(a,t),f=o8(a,t),h=function(x){return c.some(function(b){return uv(x,b)})},p=function(x,b){h(x)||(b&&kN(x,b)?l(cs(x,1+t.numberOfMonths*-1)):l(x))},v={currentMonth:a,displayMonths:c,goToMonth:l,goToDate:p,previousMonth:f,nextMonth:d,isDateDisplayed:h};return s.jsx(QN.Provider,{value:v,children:e.children})}function Wc(){var e=m.useContext(QN);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Tw(e){var t,r=ln(),a=r.classNames,l=r.styles,c=r.components,d=Wc().goToMonth,f=function(v){d(cs(v,e.displayIndex?-e.displayIndex:0))},h=(t=c==null?void 0:c.CaptionLabel)!==null&&t!==void 0?t:XN,p=s.jsx(h,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:a.caption_dropdowns,style:l.caption_dropdowns,children:[s.jsx("div",{className:a.vhidden,children:p}),s.jsx(t8,{onChange:f,displayMonth:e.displayMonth}),s.jsx(n8,{onChange:f,displayMonth:e.displayMonth})]})}function u8(e){return s.jsx("svg",Qe({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function d8(e){return s.jsx("svg",Qe({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Hd=m.forwardRef(function(e,t){var r=ln(),a=r.classNames,l=r.styles,c=[a.button_reset,a.button];e.className&&c.push(e.className);var d=c.join(" "),f=Qe(Qe({},l.button_reset),l.button);return e.style&&Object.assign(f,e.style),s.jsx("button",Qe({},e,{ref:t,type:"button",className:d,style:f}))});function f8(e){var t,r,a=ln(),l=a.dir,c=a.locale,d=a.classNames,f=a.styles,h=a.labels,p=h.labelPrevious,v=h.labelNext,x=a.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var b=p(e.previousMonth,{locale:c}),w=[d.nav_button,d.nav_button_previous].join(" "),j=v(e.nextMonth,{locale:c}),N=[d.nav_button,d.nav_button_next].join(" "),_=(t=x==null?void 0:x.IconRight)!==null&&t!==void 0?t:d8,C=(r=x==null?void 0:x.IconLeft)!==null&&r!==void 0?r:u8;return s.jsxs("div",{className:d.nav,style:f.nav,children:[!e.hidePrevious&&s.jsx(Hd,{name:"previous-month","aria-label":b,className:w,style:f.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:l==="rtl"?s.jsx(_,{className:d.nav_icon,style:f.nav_icon}):s.jsx(C,{className:d.nav_icon,style:f.nav_icon})}),!e.hideNext&&s.jsx(Hd,{name:"next-month","aria-label":j,className:N,style:f.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:l==="rtl"?s.jsx(C,{className:d.nav_icon,style:f.nav_icon}):s.jsx(_,{className:d.nav_icon,style:f.nav_icon})})]})}function Mw(e){var t=ln().numberOfMonths,r=Wc(),a=r.previousMonth,l=r.nextMonth,c=r.goToMonth,d=r.displayMonths,f=d.findIndex(function(j){return uv(e.displayMonth,j)}),h=f===0,p=f===d.length-1,v=t>1&&(h||!p),x=t>1&&(p||!h),b=function(){a&&c(a)},w=function(){l&&c(l)};return s.jsx(f8,{displayMonth:e.displayMonth,hideNext:v,hidePrevious:x,nextMonth:l,previousMonth:a,onPreviousClick:b,onNextClick:w})}function h8(e){var t,r=ln(),a=r.classNames,l=r.disableNavigation,c=r.styles,d=r.captionLayout,f=r.components,h=(t=f==null?void 0:f.CaptionLabel)!==null&&t!==void 0?t:XN,p;return l?p=s.jsx(h,{id:e.id,displayMonth:e.displayMonth}):d==="dropdown"?p=s.jsx(Tw,{displayMonth:e.displayMonth,id:e.id}):d==="dropdown-buttons"?p=s.jsxs(s.Fragment,{children:[s.jsx(Tw,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(Mw,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):p=s.jsxs(s.Fragment,{children:[s.jsx(h,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(Mw,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:a.caption,style:c.caption,children:p})}function m8(e){var t=ln(),r=t.footer,a=t.styles,l=t.classNames.tfoot;return r?s.jsx("tfoot",{className:l,style:a.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function p8(e,t,r){for(var a=r?Ri(new Date):Ms(new Date,{locale:e,weekStartsOn:t}),l=[],c=0;c<7;c++){var d=ir(a,c);l.push(d)}return l}function g8(){var e=ln(),t=e.classNames,r=e.styles,a=e.showWeekNumber,l=e.locale,c=e.weekStartsOn,d=e.ISOWeek,f=e.formatters.formatWeekdayName,h=e.labels.labelWeekday,p=p8(l,c,d);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[a&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),p.map(function(v,x){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":h(v,{locale:l}),children:f(v,{locale:l})},x)})]})}function v8(){var e,t=ln(),r=t.classNames,a=t.styles,l=t.components,c=(e=l==null?void 0:l.HeadRow)!==null&&e!==void 0?e:g8;return s.jsx("thead",{style:a.head,className:r.head,children:s.jsx(c,{})})}function x8(e){var t=ln(),r=t.locale,a=t.formatters.formatDay;return s.jsx(s.Fragment,{children:a(e.date,{locale:r})})}var hv=m.createContext(void 0);function y8(e){if(!Yc(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(hv.Provider,{value:t,children:e.children})}return s.jsx(b8,{initialProps:e.initialProps,children:e.children})}function b8(e){var t=e.initialProps,r=e.children,a=t.selected,l=t.min,c=t.max,d=function(p,v,x){var b,w;(b=t.onDayClick)===null||b===void 0||b.call(t,p,v,x);var j=!!(v.selected&&l&&(a==null?void 0:a.length)===l);if(!j){var N=!!(!v.selected&&c&&(a==null?void 0:a.length)===c);if(!N){var _=a?GN([],a):[];if(v.selected){var C=_.findIndex(function(E){return vr(p,E)});_.splice(C,1)}else _.push(p);(w=t.onSelect)===null||w===void 0||w.call(t,_,p,v,x)}}},f={disabled:[]};a&&f.disabled.push(function(p){var v=c&&a.length>c-1,x=a.some(function(b){return vr(b,p)});return!!(v&&!x)});var h={selected:a,onDayClick:d,modifiers:f};return s.jsx(hv.Provider,{value:h,children:r})}function mv(){var e=m.useContext(hv);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function w8(e,t){var r=t||{},a=r.from,l=r.to;return a&&l?vr(l,e)&&vr(a,e)?void 0:vr(l,e)?{from:l,to:void 0}:vr(a,e)?void 0:Kp(a,e)?{from:e,to:l}:{from:a,to:e}:l?Kp(e,l)?{from:l,to:e}:{from:e,to:l}:a?kN(e,a)?{from:e,to:a}:{from:a,to:e}:{from:e,to:void 0}}var pv=m.createContext(void 0);function j8(e){if(!Gc(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(pv.Provider,{value:t,children:e.children})}return s.jsx(_8,{initialProps:e.initialProps,children:e.children})}function _8(e){var t=e.initialProps,r=e.children,a=t.selected,l=a||{},c=l.from,d=l.to,f=t.min,h=t.max,p=function(w,j,N){var _,C;(_=t.onDayClick)===null||_===void 0||_.call(t,w,j,N);var E=w8(w,a);(C=t.onSelect)===null||C===void 0||C.call(t,E,w,j,N)},v={range_start:[],range_end:[],range_middle:[],disabled:[]};if(c?(v.range_start=[c],d?(v.range_end=[d],vr(c,d)||(v.range_middle=[{after:c,before:d}])):v.range_end=[c]):d&&(v.range_start=[d],v.range_end=[d]),f&&(c&&!d&&v.disabled.push({after:up(c,f-1),before:ir(c,f-1)}),c&&d&&v.disabled.push({after:c,before:ir(c,f-1)}),!c&&d&&v.disabled.push({after:up(d,f-1),before:ir(d,f-1)})),h){if(c&&!d&&(v.disabled.push({before:ir(c,-h+1)}),v.disabled.push({after:ir(c,h-1)})),c&&d){var x=Ss(d,c)+1,b=h-x;v.disabled.push({before:up(c,b)}),v.disabled.push({after:ir(d,b)})}!c&&d&&(v.disabled.push({before:ir(d,-h+1)}),v.disabled.push({after:ir(d,h-1)}))}return s.jsx(pv.Provider,{value:{selected:a,onDayClick:p,modifiers:v},children:r})}function gv(){var e=m.useContext(pv);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Td(e){return Array.isArray(e)?GN([],e):e!==void 0?[e]:[]}function N8(e){var t={};return Object.entries(e).forEach(function(r){var a=r[0],l=r[1];t[a]=Td(l)}),t}var us;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(us||(us={}));var S8=us.Selected,Qs=us.Disabled,E8=us.Hidden,C8=us.Today,hp=us.RangeEnd,mp=us.RangeMiddle,pp=us.RangeStart,R8=us.Outside;function T8(e,t,r){var a,l=(a={},a[S8]=Td(e.selected),a[Qs]=Td(e.disabled),a[E8]=Td(e.hidden),a[C8]=[e.today],a[hp]=[],a[mp]=[],a[pp]=[],a[R8]=[],a);return e.fromDate&&l[Qs].push({before:e.fromDate}),e.toDate&&l[Qs].push({after:e.toDate}),Yc(e)?l[Qs]=l[Qs].concat(t.modifiers[Qs]):Gc(e)&&(l[Qs]=l[Qs].concat(r.modifiers[Qs]),l[pp]=r.modifiers[pp],l[mp]=r.modifiers[mp],l[hp]=r.modifiers[hp]),l}var ZN=m.createContext(void 0);function M8(e){var t=ln(),r=mv(),a=gv(),l=T8(t,r,a),c=N8(t.modifiers),d=Qe(Qe({},l),c);return s.jsx(ZN.Provider,{value:d,children:e.children})}function JN(){var e=m.useContext(ZN);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function A8(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function k8(e){return!!(e&&typeof e=="object"&&"from"in e)}function D8(e){return!!(e&&typeof e=="object"&&"after"in e)}function O8(e){return!!(e&&typeof e=="object"&&"before"in e)}function P8(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function L8(e,t){var r,a=t.from,l=t.to;if(a&&l){var c=Ss(l,a)<0;c&&(r=[l,a],a=r[0],l=r[1]);var d=Ss(e,a)>=0&&Ss(l,e)>=0;return d}return l?vr(l,e):a?vr(a,e):!1}function I8(e){return lv(e)}function z8(e){return Array.isArray(e)&&e.every(lv)}function U8(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(I8(r))return vr(e,r);if(z8(r))return r.includes(e);if(k8(r))return L8(e,r);if(P8(r))return r.dayOfWeek.includes(e.getDay());if(A8(r)){var a=Ss(r.before,e),l=Ss(r.after,e),c=a>0,d=l<0,f=Kp(r.before,r.after);return f?d&&c:c||d}return D8(r)?Ss(e,r.after)>0:O8(r)?Ss(r.before,e)>0:typeof r=="function"?r(e):!1})}function vv(e,t,r){var a=Object.keys(t).reduce(function(c,d){var f=t[d];return U8(e,f)&&c.push(d),c},[]),l={};return a.forEach(function(c){return l[c]=!0}),r&&!uv(e,r)&&(l.outside=!0),l}function $8(e,t){for(var r=xr(e[0]),a=ov(e[e.length-1]),l,c,d=r;d<=a;){var f=vv(d,t),h=!f.disabled&&!f.hidden;if(!h){d=ir(d,1);continue}if(f.selected)return d;f.today&&!c&&(c=d),l||(l=d),d=ir(d,1)}return c||l}var B8=365;function eS(e,t){var r=t.moveBy,a=t.direction,l=t.context,c=t.modifiers,d=t.retry,f=d===void 0?{count:0,lastFocused:e}:d,h=l.weekStartsOn,p=l.fromDate,v=l.toDate,x=l.locale,b={day:ir,week:Xp,month:cs,year:_5,startOfWeek:function(_){return l.ISOWeek?Ri(_):Ms(_,{locale:x,weekStartsOn:h})},endOfWeek:function(_){return l.ISOWeek?SN(_):cv(_,{locale:x,weekStartsOn:h})}},w=b[r](e,a==="after"?1:-1);a==="before"&&p?w=N5([p,w]):a==="after"&&v&&(w=S5([v,w]));var j=!0;if(c){var N=vv(w,c);j=!N.disabled&&!N.hidden}return j?w:f.count>B8?f.lastFocused:eS(w,{moveBy:r,direction:a,context:l,modifiers:c,retry:Qe(Qe({},f),{count:f.count+1})})}var tS=m.createContext(void 0);function H8(e){var t=Wc(),r=JN(),a=m.useState(),l=a[0],c=a[1],d=m.useState(),f=d[0],h=d[1],p=$8(t.displayMonths,r),v=l??(f&&t.isDateDisplayed(f))?f:p,x=function(){h(l),c(void 0)},b=function(_){c(_)},w=ln(),j=function(_,C){if(l){var E=eS(l,{moveBy:_,direction:C,context:w,modifiers:r});vr(l,E)||(t.goToDate(E,l),b(E))}},N={focusedDay:l,focusTarget:v,blur:x,focus:b,focusDayAfter:function(){return j("day","after")},focusDayBefore:function(){return j("day","before")},focusWeekAfter:function(){return j("week","after")},focusWeekBefore:function(){return j("week","before")},focusMonthBefore:function(){return j("month","before")},focusMonthAfter:function(){return j("month","after")},focusYearBefore:function(){return j("year","before")},focusYearAfter:function(){return j("year","after")},focusStartOfWeek:function(){return j("startOfWeek","before")},focusEndOfWeek:function(){return j("endOfWeek","after")}};return s.jsx(tS.Provider,{value:N,children:e.children})}function xv(){var e=m.useContext(tS);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function q8(e,t){var r=JN(),a=vv(e,r,t);return a}var yv=m.createContext(void 0);function F8(e){if(!Rf(e.initialProps)){var t={selected:void 0};return s.jsx(yv.Provider,{value:t,children:e.children})}return s.jsx(V8,{initialProps:e.initialProps,children:e.children})}function V8(e){var t=e.initialProps,r=e.children,a=function(c,d,f){var h,p,v;if((h=t.onDayClick)===null||h===void 0||h.call(t,c,d,f),d.selected&&!t.required){(p=t.onSelect)===null||p===void 0||p.call(t,void 0,c,d,f);return}(v=t.onSelect)===null||v===void 0||v.call(t,c,c,d,f)},l={selected:t.selected,onDayClick:a};return s.jsx(yv.Provider,{value:l,children:r})}function nS(){var e=m.useContext(yv);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Y8(e,t){var r=ln(),a=nS(),l=mv(),c=gv(),d=xv(),f=d.focusDayAfter,h=d.focusDayBefore,p=d.focusWeekAfter,v=d.focusWeekBefore,x=d.blur,b=d.focus,w=d.focusMonthBefore,j=d.focusMonthAfter,N=d.focusYearBefore,_=d.focusYearAfter,C=d.focusStartOfWeek,E=d.focusEndOfWeek,R=function(V){var U,J,k,P;Rf(r)?(U=a.onDayClick)===null||U===void 0||U.call(a,e,t,V):Yc(r)?(J=l.onDayClick)===null||J===void 0||J.call(l,e,t,V):Gc(r)?(k=c.onDayClick)===null||k===void 0||k.call(c,e,t,V):(P=r.onDayClick)===null||P===void 0||P.call(r,e,t,V)},M=function(V){var U;b(e),(U=r.onDayFocus)===null||U===void 0||U.call(r,e,t,V)},T=function(V){var U;x(),(U=r.onDayBlur)===null||U===void 0||U.call(r,e,t,V)},L=function(V){var U;(U=r.onDayMouseEnter)===null||U===void 0||U.call(r,e,t,V)},H=function(V){var U;(U=r.onDayMouseLeave)===null||U===void 0||U.call(r,e,t,V)},q=function(V){var U;(U=r.onDayPointerEnter)===null||U===void 0||U.call(r,e,t,V)},G=function(V){var U;(U=r.onDayPointerLeave)===null||U===void 0||U.call(r,e,t,V)},W=function(V){var U;(U=r.onDayTouchCancel)===null||U===void 0||U.call(r,e,t,V)},ce=function(V){var U;(U=r.onDayTouchEnd)===null||U===void 0||U.call(r,e,t,V)},se=function(V){var U;(U=r.onDayTouchMove)===null||U===void 0||U.call(r,e,t,V)},B=function(V){var U;(U=r.onDayTouchStart)===null||U===void 0||U.call(r,e,t,V)},ie=function(V){var U;(U=r.onDayKeyUp)===null||U===void 0||U.call(r,e,t,V)},oe=function(V){var U;switch(V.key){case"ArrowLeft":V.preventDefault(),V.stopPropagation(),r.dir==="rtl"?f():h();break;case"ArrowRight":V.preventDefault(),V.stopPropagation(),r.dir==="rtl"?h():f();break;case"ArrowDown":V.preventDefault(),V.stopPropagation(),p();break;case"ArrowUp":V.preventDefault(),V.stopPropagation(),v();break;case"PageUp":V.preventDefault(),V.stopPropagation(),V.shiftKey?N():w();break;case"PageDown":V.preventDefault(),V.stopPropagation(),V.shiftKey?_():j();break;case"Home":V.preventDefault(),V.stopPropagation(),C();break;case"End":V.preventDefault(),V.stopPropagation(),E();break}(U=r.onDayKeyDown)===null||U===void 0||U.call(r,e,t,V)},O={onClick:R,onFocus:M,onBlur:T,onKeyDown:oe,onKeyUp:ie,onMouseEnter:L,onMouseLeave:H,onPointerEnter:q,onPointerLeave:G,onTouchCancel:W,onTouchEnd:ce,onTouchMove:se,onTouchStart:B};return O}function G8(){var e=ln(),t=nS(),r=mv(),a=gv(),l=Rf(e)?t.selected:Yc(e)?r.selected:Gc(e)?a.selected:void 0;return l}function W8(e){return Object.values(us).includes(e)}function X8(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(a){var l=e.modifiersClassNames[a];if(l)r.push(l);else if(W8(a)){var c=e.classNames["day_".concat(a)];c&&r.push(c)}}),r}function K8(e,t){var r=Qe({},e.styles.day);return Object.keys(t).forEach(function(a){var l;r=Qe(Qe({},r),(l=e.modifiersStyles)===null||l===void 0?void 0:l[a])}),r}function Q8(e,t,r){var a,l,c,d=ln(),f=xv(),h=q8(e,t),p=Y8(e,h),v=G8(),x=!!(d.onDayClick||d.mode!=="default");m.useEffect(function(){var L;h.outside||f.focusedDay&&x&&vr(f.focusedDay,e)&&((L=r.current)===null||L===void 0||L.focus())},[f.focusedDay,e,r,x,h.outside]);var b=X8(d,h).join(" "),w=K8(d,h),j=!!(h.outside&&!d.showOutsideDays||h.hidden),N=(c=(l=d.components)===null||l===void 0?void 0:l.DayContent)!==null&&c!==void 0?c:x8,_=s.jsx(N,{date:e,displayMonth:t,activeModifiers:h}),C={style:w,className:b,children:_,role:"gridcell"},E=f.focusTarget&&vr(f.focusTarget,e)&&!h.outside,R=f.focusedDay&&vr(f.focusedDay,e),M=Qe(Qe(Qe({},C),(a={disabled:h.disabled,role:"gridcell"},a["aria-selected"]=h.selected,a.tabIndex=R||E?0:-1,a)),p),T={isButton:x,isHidden:j,activeModifiers:h,selectedDays:v,buttonProps:M,divProps:C};return T}function Z8(e){var t=m.useRef(null),r=Q8(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(Hd,Qe({name:"day",ref:t},r.buttonProps)):s.jsx("div",Qe({},r.divProps))}function J8(e){var t=e.number,r=e.dates,a=ln(),l=a.onWeekNumberClick,c=a.styles,d=a.classNames,f=a.locale,h=a.labels.labelWeekNumber,p=a.formatters.formatWeekNumber,v=p(Number(t),{locale:f});if(!l)return s.jsx("span",{className:d.weeknumber,style:c.weeknumber,children:v});var x=h(Number(t),{locale:f}),b=function(w){l(t,r,w)};return s.jsx(Hd,{name:"week-number","aria-label":x,className:d.weeknumber,style:c.weeknumber,onClick:b,children:v})}function eI(e){var t,r,a=ln(),l=a.styles,c=a.classNames,d=a.showWeekNumber,f=a.components,h=(t=f==null?void 0:f.Day)!==null&&t!==void 0?t:Z8,p=(r=f==null?void 0:f.WeekNumber)!==null&&r!==void 0?r:J8,v;return d&&(v=s.jsx("td",{className:c.cell,style:l.cell,children:s.jsx(p,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:c.row,style:l.row,children:[v,e.dates.map(function(x){return s.jsx("td",{className:c.cell,style:l.cell,role:"presentation",children:s.jsx(h,{displayMonth:e.displayMonth,date:x})},_L(x))})]})}function Aw(e,t,r){for(var a=r!=null&&r.ISOWeek?SN(t):cv(t,r),l=r!=null&&r.ISOWeek?Ri(e):Ms(e,r),c=Ss(a,l),d=[],f=0;f<=c;f++)d.push(ir(l,f));var h=d.reduce(function(p,v){var x=r!=null&&r.ISOWeek?RN(v):MN(v,r),b=p.find(function(w){return w.weekNumber===x});return b?(b.dates.push(v),p):(p.push({weekNumber:x,dates:[v]}),p)},[]);return h}function tI(e,t){var r=Aw(xr(e),ov(e),t);if(t!=null&&t.useFixedWeeks){var a=SL(e,t);if(a<6){var l=r[r.length-1],c=l.dates[l.dates.length-1],d=Xp(c,6-a),f=Aw(Xp(c,1),d,t);r.push.apply(r,f)}}return r}function nI(e){var t,r,a,l=ln(),c=l.locale,d=l.classNames,f=l.styles,h=l.hideHead,p=l.fixedWeeks,v=l.components,x=l.weekStartsOn,b=l.firstWeekContainsDate,w=l.ISOWeek,j=tI(e.displayMonth,{useFixedWeeks:!!p,ISOWeek:w,locale:c,weekStartsOn:x,firstWeekContainsDate:b}),N=(t=v==null?void 0:v.Head)!==null&&t!==void 0?t:v8,_=(r=v==null?void 0:v.Row)!==null&&r!==void 0?r:eI,C=(a=v==null?void 0:v.Footer)!==null&&a!==void 0?a:m8;return s.jsxs("table",{id:e.id,className:d.table,style:f.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!h&&s.jsx(N,{}),s.jsx("tbody",{className:d.tbody,style:f.tbody,children:j.map(function(E){return s.jsx(_,{displayMonth:e.displayMonth,dates:E.dates,weekNumber:E.weekNumber},E.weekNumber)})}),s.jsx(C,{displayMonth:e.displayMonth})]})}function rI(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var sI=rI()?m.useLayoutEffect:m.useEffect,gp=!1,aI=0;function kw(){return"react-day-picker-".concat(++aI)}function iI(e){var t,r=e??(gp?kw():null),a=m.useState(r),l=a[0],c=a[1];return sI(function(){l===null&&c(kw())},[]),m.useEffect(function(){gp===!1&&(gp=!0)},[]),(t=e??l)!==null&&t!==void 0?t:void 0}function lI(e){var t,r,a=ln(),l=a.dir,c=a.classNames,d=a.styles,f=a.components,h=Wc().displayMonths,p=iI(a.id?"".concat(a.id,"-").concat(e.displayIndex):void 0),v=a.id?"".concat(a.id,"-grid-").concat(e.displayIndex):void 0,x=[c.month],b=d.month,w=e.displayIndex===0,j=e.displayIndex===h.length-1,N=!w&&!j;l==="rtl"&&(t=[w,j],j=t[0],w=t[1]),w&&(x.push(c.caption_start),b=Qe(Qe({},b),d.caption_start)),j&&(x.push(c.caption_end),b=Qe(Qe({},b),d.caption_end)),N&&(x.push(c.caption_between),b=Qe(Qe({},b),d.caption_between));var _=(r=f==null?void 0:f.Caption)!==null&&r!==void 0?r:h8;return s.jsxs("div",{className:x.join(" "),style:b,children:[s.jsx(_,{id:p,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(nI,{id:v,"aria-labelledby":p,displayMonth:e.displayMonth})]},e.displayIndex)}function oI(e){var t=ln(),r=t.classNames,a=t.styles;return s.jsx("div",{className:r.months,style:a.months,children:e.children})}function cI(e){var t,r,a=e.initialProps,l=ln(),c=xv(),d=Wc(),f=m.useState(!1),h=f[0],p=f[1];m.useEffect(function(){l.initialFocus&&c.focusTarget&&(h||(c.focus(c.focusTarget),p(!0)))},[l.initialFocus,h,c.focus,c.focusTarget,c]);var v=[l.classNames.root,l.className];l.numberOfMonths>1&&v.push(l.classNames.multiple_months),l.showWeekNumber&&v.push(l.classNames.with_weeknumber);var x=Qe(Qe({},l.styles.root),l.style),b=Object.keys(a).filter(function(j){return j.startsWith("data-")}).reduce(function(j,N){var _;return Qe(Qe({},j),(_={},_[N]=a[N],_))},{}),w=(r=(t=a.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:oI;return s.jsx("div",Qe({className:v.join(" "),style:x,dir:l.dir,id:l.id,nonce:a.nonce,title:a.title,lang:a.lang},b,{children:s.jsx(w,{children:d.displayMonths.map(function(j,N){return s.jsx(lI,{displayIndex:N,displayMonth:j},N)})})}))}function uI(e){var t=e.children,r=O6(e,["children"]);return s.jsx(J6,{initialProps:r,children:s.jsx(c8,{children:s.jsx(F8,{initialProps:r,children:s.jsx(y8,{initialProps:r,children:s.jsx(j8,{initialProps:r,children:s.jsx(M8,{children:s.jsx(H8,{children:t})})})})})})})}function dI(e){return s.jsx(uI,Qe({},e,{children:s.jsx(cI,{initialProps:e})}))}function rS({className:e,classNames:t,showOutsideDays:r=!0,...a}){return s.jsx(dI,{showOutsideDays:r,className:Ce("p-3",e),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:Ce(Ol({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Ce("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md",a.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Ce(Ol({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:l,...c})=>s.jsx(M_,{className:Ce("size-4",l),...c}),IconRight:({className:l,...c})=>s.jsx(A_,{className:Ce("size-4",l),...c})},...a})}function Dw(e,[t,r]){return Math.min(r,Math.max(t,e))}function bv(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var fI=[" ","Enter","ArrowUp","ArrowDown"],hI=[" ","Enter"],Xc="Select",[Tf,Mf,mI]=Cg(Xc),[eo,eH]=cr(Xc,[mI,Ya]),Af=Ya(),[pI,Xa]=eo(Xc),[gI,vI]=eo(Xc),sS=e=>{const{__scopeSelect:t,children:r,open:a,defaultOpen:l,onOpenChange:c,value:d,defaultValue:f,onValueChange:h,dir:p,name:v,autoComplete:x,disabled:b,required:w,form:j}=e,N=Af(t),[_,C]=m.useState(null),[E,R]=m.useState(null),[M,T]=m.useState(!1),L=tf(p),[H=!1,q]=$a({prop:a,defaultProp:l,onChange:c}),[G,W]=$a({prop:d,defaultProp:f,onChange:h}),ce=m.useRef(null),se=_?j||!!_.closest("form"):!0,[B,ie]=m.useState(new Set),oe=Array.from(B).map(O=>O.props.value).join(";");return s.jsx(zg,{...N,children:s.jsxs(pI,{required:w,scope:t,trigger:_,onTriggerChange:C,valueNode:E,onValueNodeChange:R,valueNodeHasChildren:M,onValueNodeHasChildrenChange:T,contentId:Es(),value:G,onValueChange:W,open:H,onOpenChange:q,dir:L,triggerPointerDownPosRef:ce,disabled:b,children:[s.jsx(Tf.Provider,{scope:t,children:s.jsx(gI,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback(O=>{ie(V=>new Set(V).add(O))},[]),onNativeOptionRemove:m.useCallback(O=>{ie(V=>{const U=new Set(V);return U.delete(O),U})},[]),children:r})}),se?s.jsxs(CS,{"aria-hidden":!0,required:w,tabIndex:-1,name:v,autoComplete:x,value:G,onChange:O=>W(O.target.value),disabled:b,form:j,children:[G===void 0?s.jsx("option",{value:""}):null,Array.from(B)]},oe):null]})})};sS.displayName=Xc;var aS="SelectTrigger",iS=m.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:a=!1,...l}=e,c=Af(r),d=Xa(aS,r),f=d.disabled||a,h=St(t,d.onTriggerChange),p=Mf(r),v=m.useRef("touch"),[x,b,w]=RS(N=>{const _=p().filter(R=>!R.disabled),C=_.find(R=>R.value===d.value),E=TS(_,N,C);E!==void 0&&d.onValueChange(E.value)}),j=N=>{f||(d.onOpenChange(!0),w()),N&&(d.triggerPointerDownPosRef.current={x:Math.round(N.pageX),y:Math.round(N.pageY)})};return s.jsx(Pc,{asChild:!0,...c,children:s.jsx(Ze.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:f,"data-disabled":f?"":void 0,"data-placeholder":ES(d.value)?"":void 0,...l,ref:h,onClick:Ae(l.onClick,N=>{N.currentTarget.focus(),v.current!=="mouse"&&j(N)}),onPointerDown:Ae(l.onPointerDown,N=>{v.current=N.pointerType;const _=N.target;_.hasPointerCapture(N.pointerId)&&_.releasePointerCapture(N.pointerId),N.button===0&&N.ctrlKey===!1&&N.pointerType==="mouse"&&(j(N),N.preventDefault())}),onKeyDown:Ae(l.onKeyDown,N=>{const _=x.current!=="";!(N.ctrlKey||N.altKey||N.metaKey)&&N.key.length===1&&b(N.key),!(_&&N.key===" ")&&fI.includes(N.key)&&(j(),N.preventDefault())})})})});iS.displayName=aS;var lS="SelectValue",oS=m.forwardRef((e,t)=>{const{__scopeSelect:r,className:a,style:l,children:c,placeholder:d="",...f}=e,h=Xa(lS,r),{onValueNodeHasChildrenChange:p}=h,v=c!==void 0,x=St(t,h.onValueNodeChange);return Wn(()=>{p(v)},[p,v]),s.jsx(Ze.span,{...f,ref:x,style:{pointerEvents:"none"},children:ES(h.value)?s.jsx(s.Fragment,{children:d}):c})});oS.displayName=lS;var xI="SelectIcon",cS=m.forwardRef((e,t)=>{const{__scopeSelect:r,children:a,...l}=e;return s.jsx(Ze.span,{"aria-hidden":!0,...l,ref:t,children:a||"▼"})});cS.displayName=xI;var yI="SelectPortal",uS=e=>s.jsx(Lc,{asChild:!0,...e});uS.displayName=yI;var Ti="SelectContent",dS=m.forwardRef((e,t)=>{const r=Xa(Ti,e.__scopeSelect),[a,l]=m.useState();if(Wn(()=>{l(new DocumentFragment)},[]),!r.open){const c=a;return c?Ns.createPortal(s.jsx(fS,{scope:e.__scopeSelect,children:s.jsx(Tf.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),c):null}return s.jsx(hS,{...e,ref:t})});dS.displayName=Ti;var ts=10,[fS,Ka]=eo(Ti),bI="SelectContentImpl",hS=m.forwardRef((e,t)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,side:f,sideOffset:h,align:p,alignOffset:v,arrowPadding:x,collisionBoundary:b,collisionPadding:w,sticky:j,hideWhenDetached:N,avoidCollisions:_,...C}=e,E=Xa(Ti,r),[R,M]=m.useState(null),[T,L]=m.useState(null),H=St(t,K=>M(K)),[q,G]=m.useState(null),[W,ce]=m.useState(null),se=Mf(r),[B,ie]=m.useState(!1),oe=m.useRef(!1);m.useEffect(()=>{if(R)return df(R)},[R]),nf();const O=m.useCallback(K=>{const[re,...pe]=se().map(Re=>Re.ref.current),[ue]=pe.slice(-1),_e=document.activeElement;for(const Re of K)if(Re===_e||(Re==null||Re.scrollIntoView({block:"nearest"}),Re===re&&T&&(T.scrollTop=0),Re===ue&&T&&(T.scrollTop=T.scrollHeight),Re==null||Re.focus(),document.activeElement!==_e))return},[se,T]),V=m.useCallback(()=>O([q,R]),[O,q,R]);m.useEffect(()=>{B&&V()},[B,V]);const{onOpenChange:U,triggerPointerDownPosRef:J}=E;m.useEffect(()=>{if(R){let K={x:0,y:0};const re=ue=>{var _e,Re;K={x:Math.abs(Math.round(ue.pageX)-(((_e=J.current)==null?void 0:_e.x)??0)),y:Math.abs(Math.round(ue.pageY)-(((Re=J.current)==null?void 0:Re.y)??0))}},pe=ue=>{K.x<=10&&K.y<=10?ue.preventDefault():R.contains(ue.target)||U(!1),document.removeEventListener("pointermove",re),J.current=null};return J.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",pe,{capture:!0})}}},[R,U,J]),m.useEffect(()=>{const K=()=>U(!1);return window.addEventListener("blur",K),window.addEventListener("resize",K),()=>{window.removeEventListener("blur",K),window.removeEventListener("resize",K)}},[U]);const[k,P]=RS(K=>{const re=se().filter(_e=>!_e.disabled),pe=re.find(_e=>_e.ref.current===document.activeElement),ue=TS(re,K,pe);ue&&setTimeout(()=>ue.ref.current.focus())}),F=m.useCallback((K,re,pe)=>{const ue=!oe.current&&!pe;(E.value!==void 0&&E.value===re||ue)&&(G(K),ue&&(oe.current=!0))},[E.value]),X=m.useCallback(()=>R==null?void 0:R.focus(),[R]),D=m.useCallback((K,re,pe)=>{const ue=!oe.current&&!pe;(E.value!==void 0&&E.value===re||ue)&&ce(K)},[E.value]),z=a==="popper"?Qp:mS,$=z===Qp?{side:f,sideOffset:h,align:p,alignOffset:v,arrowPadding:x,collisionBoundary:b,collisionPadding:w,sticky:j,hideWhenDetached:N,avoidCollisions:_}:{};return s.jsx(fS,{scope:r,content:R,viewport:T,onViewportChange:L,itemRefCallback:F,selectedItem:q,onItemLeave:X,itemTextRefCallback:D,focusSelectedItem:V,selectedItemText:W,position:a,isPositioned:B,searchRef:k,children:s.jsx(Ic,{as:Rs,allowPinchZoom:!0,children:s.jsx(Dc,{asChild:!0,trapped:E.open,onMountAutoFocus:K=>{K.preventDefault()},onUnmountAutoFocus:Ae(l,K=>{var re;(re=E.trigger)==null||re.focus({preventScroll:!0}),K.preventDefault()}),children:s.jsx(Ql,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:K=>K.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:s.jsx(z,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:K=>K.preventDefault(),...C,...$,onPlaced:()=>ie(!0),ref:H,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Ae(C.onKeyDown,K=>{const re=K.ctrlKey||K.altKey||K.metaKey;if(K.key==="Tab"&&K.preventDefault(),!re&&K.key.length===1&&P(K.key),["ArrowUp","ArrowDown","Home","End"].includes(K.key)){let ue=se().filter(_e=>!_e.disabled).map(_e=>_e.ref.current);if(["ArrowUp","End"].includes(K.key)&&(ue=ue.slice().reverse()),["ArrowUp","ArrowDown"].includes(K.key)){const _e=K.target,Re=ue.indexOf(_e);ue=ue.slice(Re+1)}setTimeout(()=>O(ue)),K.preventDefault()}})})})})})})});hS.displayName=bI;var wI="SelectItemAlignedPosition",mS=m.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:a,...l}=e,c=Xa(Ti,r),d=Ka(Ti,r),[f,h]=m.useState(null),[p,v]=m.useState(null),x=St(t,H=>v(H)),b=Mf(r),w=m.useRef(!1),j=m.useRef(!0),{viewport:N,selectedItem:_,selectedItemText:C,focusSelectedItem:E}=d,R=m.useCallback(()=>{if(c.trigger&&c.valueNode&&f&&p&&N&&_&&C){const H=c.trigger.getBoundingClientRect(),q=p.getBoundingClientRect(),G=c.valueNode.getBoundingClientRect(),W=C.getBoundingClientRect();if(c.dir!=="rtl"){const _e=W.left-q.left,Re=G.left-_e,lt=H.left-Re,rt=H.width+lt,ge=Math.max(rt,q.width),me=window.innerWidth-ts,De=Dw(Re,[ts,Math.max(ts,me-ge)]);f.style.minWidth=rt+"px",f.style.left=De+"px"}else{const _e=q.right-W.right,Re=window.innerWidth-G.right-_e,lt=window.innerWidth-H.right-Re,rt=H.width+lt,ge=Math.max(rt,q.width),me=window.innerWidth-ts,De=Dw(Re,[ts,Math.max(ts,me-ge)]);f.style.minWidth=rt+"px",f.style.right=De+"px"}const ce=b(),se=window.innerHeight-ts*2,B=N.scrollHeight,ie=window.getComputedStyle(p),oe=parseInt(ie.borderTopWidth,10),O=parseInt(ie.paddingTop,10),V=parseInt(ie.borderBottomWidth,10),U=parseInt(ie.paddingBottom,10),J=oe+O+B+U+V,k=Math.min(_.offsetHeight*5,J),P=window.getComputedStyle(N),F=parseInt(P.paddingTop,10),X=parseInt(P.paddingBottom,10),D=H.top+H.height/2-ts,z=se-D,$=_.offsetHeight/2,K=_.offsetTop+$,re=oe+O+K,pe=J-re;if(re<=D){const _e=ce.length>0&&_===ce[ce.length-1].ref.current;f.style.bottom="0px";const Re=p.clientHeight-N.offsetTop-N.offsetHeight,lt=Math.max(z,$+(_e?X:0)+Re+V),rt=re+lt;f.style.height=rt+"px"}else{const _e=ce.length>0&&_===ce[0].ref.current;f.style.top="0px";const lt=Math.max(D,oe+N.offsetTop+(_e?F:0)+$)+pe;f.style.height=lt+"px",N.scrollTop=re-D+N.offsetTop}f.style.margin=`${ts}px 0`,f.style.minHeight=k+"px",f.style.maxHeight=se+"px",a==null||a(),requestAnimationFrame(()=>w.current=!0)}},[b,c.trigger,c.valueNode,f,p,N,_,C,c.dir,a]);Wn(()=>R(),[R]);const[M,T]=m.useState();Wn(()=>{p&&T(window.getComputedStyle(p).zIndex)},[p]);const L=m.useCallback(H=>{H&&j.current===!0&&(R(),E==null||E(),j.current=!1)},[R,E]);return s.jsx(_I,{scope:r,contentWrapper:f,shouldExpandOnScrollRef:w,onScrollButtonChange:L,children:s.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:s.jsx(Ze.div,{...l,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});mS.displayName=wI;var jI="SelectPopperPosition",Qp=m.forwardRef((e,t)=>{const{__scopeSelect:r,align:a="start",collisionPadding:l=ts,...c}=e,d=Af(r);return s.jsx(lf,{...d,...c,ref:t,align:a,collisionPadding:l,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Qp.displayName=jI;var[_I,wv]=eo(Ti,{}),Zp="SelectViewport",pS=m.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:a,...l}=e,c=Ka(Zp,r),d=wv(Zp,r),f=St(t,c.onViewportChange),h=m.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(Tf.Slot,{scope:r,children:s.jsx(Ze.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:f,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:Ae(l.onScroll,p=>{const v=p.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:b}=d;if(b!=null&&b.current&&x){const w=Math.abs(h.current-v.scrollTop);if(w>0){const j=window.innerHeight-ts*2,N=parseFloat(x.style.minHeight),_=parseFloat(x.style.height),C=Math.max(N,_);if(C<j){const E=C+w,R=Math.min(j,E),M=E-R;x.style.height=R+"px",x.style.bottom==="0px"&&(v.scrollTop=M>0?M:0,x.style.justifyContent="flex-end")}}}h.current=v.scrollTop})})})]})});pS.displayName=Zp;var gS="SelectGroup",[NI,SI]=eo(gS),EI=m.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,l=Es();return s.jsx(NI,{scope:r,id:l,children:s.jsx(Ze.div,{role:"group","aria-labelledby":l,...a,ref:t})})});EI.displayName=gS;var vS="SelectLabel",CI=m.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,l=SI(vS,r);return s.jsx(Ze.div,{id:l.id,...a,ref:t})});CI.displayName=vS;var qd="SelectItem",[RI,xS]=eo(qd),yS=m.forwardRef((e,t)=>{const{__scopeSelect:r,value:a,disabled:l=!1,textValue:c,...d}=e,f=Xa(qd,r),h=Ka(qd,r),p=f.value===a,[v,x]=m.useState(c??""),[b,w]=m.useState(!1),j=St(t,E=>{var R;return(R=h.itemRefCallback)==null?void 0:R.call(h,E,a,l)}),N=Es(),_=m.useRef("touch"),C=()=>{l||(f.onValueChange(a),f.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(RI,{scope:r,value:a,disabled:l,textId:N,isSelected:p,onItemTextChange:m.useCallback(E=>{x(R=>R||((E==null?void 0:E.textContent)??"").trim())},[]),children:s.jsx(Tf.ItemSlot,{scope:r,value:a,disabled:l,textValue:v,children:s.jsx(Ze.div,{role:"option","aria-labelledby":N,"data-highlighted":b?"":void 0,"aria-selected":p&&b,"data-state":p?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...d,ref:j,onFocus:Ae(d.onFocus,()=>w(!0)),onBlur:Ae(d.onBlur,()=>w(!1)),onClick:Ae(d.onClick,()=>{_.current!=="mouse"&&C()}),onPointerUp:Ae(d.onPointerUp,()=>{_.current==="mouse"&&C()}),onPointerDown:Ae(d.onPointerDown,E=>{_.current=E.pointerType}),onPointerMove:Ae(d.onPointerMove,E=>{var R;_.current=E.pointerType,l?(R=h.onItemLeave)==null||R.call(h):_.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ae(d.onPointerLeave,E=>{var R;E.currentTarget===document.activeElement&&((R=h.onItemLeave)==null||R.call(h))}),onKeyDown:Ae(d.onKeyDown,E=>{var M;((M=h.searchRef)==null?void 0:M.current)!==""&&E.key===" "||(hI.includes(E.key)&&C(),E.key===" "&&E.preventDefault())})})})})});yS.displayName=qd;var ic="SelectItemText",bS=m.forwardRef((e,t)=>{const{__scopeSelect:r,className:a,style:l,...c}=e,d=Xa(ic,r),f=Ka(ic,r),h=xS(ic,r),p=vI(ic,r),[v,x]=m.useState(null),b=St(t,C=>x(C),h.onItemTextChange,C=>{var E;return(E=f.itemTextRefCallback)==null?void 0:E.call(f,C,h.value,h.disabled)}),w=v==null?void 0:v.textContent,j=m.useMemo(()=>s.jsx("option",{value:h.value,disabled:h.disabled,children:w},h.value),[h.disabled,h.value,w]),{onNativeOptionAdd:N,onNativeOptionRemove:_}=p;return Wn(()=>(N(j),()=>_(j)),[N,_,j]),s.jsxs(s.Fragment,{children:[s.jsx(Ze.span,{id:h.textId,...c,ref:b}),h.isSelected&&d.valueNode&&!d.valueNodeHasChildren?Ns.createPortal(c.children,d.valueNode):null]})});bS.displayName=ic;var wS="SelectItemIndicator",jS=m.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e;return xS(wS,r).isSelected?s.jsx(Ze.span,{"aria-hidden":!0,...a,ref:t}):null});jS.displayName=wS;var Jp="SelectScrollUpButton",_S=m.forwardRef((e,t)=>{const r=Ka(Jp,e.__scopeSelect),a=wv(Jp,e.__scopeSelect),[l,c]=m.useState(!1),d=St(t,a.onScrollButtonChange);return Wn(()=>{if(r.viewport&&r.isPositioned){let f=function(){const p=h.scrollTop>0;c(p)};const h=r.viewport;return f(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[r.viewport,r.isPositioned]),l?s.jsx(SS,{...e,ref:d,onAutoScroll:()=>{const{viewport:f,selectedItem:h}=r;f&&h&&(f.scrollTop=f.scrollTop-h.offsetHeight)}}):null});_S.displayName=Jp;var eg="SelectScrollDownButton",NS=m.forwardRef((e,t)=>{const r=Ka(eg,e.__scopeSelect),a=wv(eg,e.__scopeSelect),[l,c]=m.useState(!1),d=St(t,a.onScrollButtonChange);return Wn(()=>{if(r.viewport&&r.isPositioned){let f=function(){const p=h.scrollHeight-h.clientHeight,v=Math.ceil(h.scrollTop)<p;c(v)};const h=r.viewport;return f(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[r.viewport,r.isPositioned]),l?s.jsx(SS,{...e,ref:d,onAutoScroll:()=>{const{viewport:f,selectedItem:h}=r;f&&h&&(f.scrollTop=f.scrollTop+h.offsetHeight)}}):null});NS.displayName=eg;var SS=m.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:a,...l}=e,c=Ka("SelectScrollButton",r),d=m.useRef(null),f=Mf(r),h=m.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return m.useEffect(()=>()=>h(),[h]),Wn(()=>{var v;const p=f().find(x=>x.ref.current===document.activeElement);(v=p==null?void 0:p.ref.current)==null||v.scrollIntoView({block:"nearest"})},[f]),s.jsx(Ze.div,{"aria-hidden":!0,...l,ref:t,style:{flexShrink:0,...l.style},onPointerDown:Ae(l.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(a,50))}),onPointerMove:Ae(l.onPointerMove,()=>{var p;(p=c.onItemLeave)==null||p.call(c),d.current===null&&(d.current=window.setInterval(a,50))}),onPointerLeave:Ae(l.onPointerLeave,()=>{h()})})}),TI="SelectSeparator",MI=m.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e;return s.jsx(Ze.div,{"aria-hidden":!0,...a,ref:t})});MI.displayName=TI;var tg="SelectArrow",AI=m.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,l=Af(r),c=Xa(tg,r),d=Ka(tg,r);return c.open&&d.position==="popper"?s.jsx(of,{...l,...a,ref:t}):null});AI.displayName=tg;function ES(e){return e===""||e===void 0}var CS=m.forwardRef((e,t)=>{const{value:r,...a}=e,l=m.useRef(null),c=St(t,l),d=bv(r);return m.useEffect(()=>{const f=l.current,h=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(h,"value").set;if(d!==r&&v){const x=new Event("change",{bubbles:!0});v.call(f,r),f.dispatchEvent(x)}},[d,r]),s.jsx(rv,{asChild:!0,children:s.jsx("select",{...a,ref:c,defaultValue:r})})});CS.displayName="BubbleSelect";function RS(e){const t=Mr(e),r=m.useRef(""),a=m.useRef(0),l=m.useCallback(d=>{const f=r.current+d;t(f),function h(p){r.current=p,window.clearTimeout(a.current),p!==""&&(a.current=window.setTimeout(()=>h(""),1e3))}(f)},[t]),c=m.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,l,c]}function TS(e,t,r){const l=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,c=r?e.indexOf(r):-1;let d=kI(e,Math.max(c,0));l.length===1&&(d=d.filter(p=>p!==r));const h=d.find(p=>p.textValue.toLowerCase().startsWith(l.toLowerCase()));return h!==r?h:void 0}function kI(e,t){return e.map((r,a)=>e[(t+a)%e.length])}var DI=sS,OI=iS,PI=oS,LI=cS,II=uS,zI=dS,UI=pS,$I=yS,BI=bS,HI=jS,qI=_S,FI=NS;function Jn({...e}){return s.jsx(DI,{"data-slot":"select",...e})}function er({...e}){return s.jsx(PI,{"data-slot":"select-value",...e})}function tr({className:e,size:t="default",children:r,...a}){return s.jsxs(OI,{"data-slot":"select-trigger","data-size":t,className:Ce("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a,children:[r,s.jsx(LI,{asChild:!0,children:s.jsx(T_,{className:"size-4 opacity-50"})})]})}function nr({className:e,children:t,position:r="popper",...a}){return s.jsx(II,{children:s.jsxs(zI,{"data-slot":"select-content",className:Ce("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[s.jsx(VI,{}),s.jsx(UI,{className:Ce("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),s.jsx(YI,{})]})})}function bt({className:e,children:t,...r}){return s.jsxs($I,{"data-slot":"select-item",className:Ce("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...r,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(HI,{children:s.jsx(Gg,{className:"size-4"})})}),s.jsx(BI,{children:t})]})}function VI({className:e,...t}){return s.jsx(qI,{"data-slot":"select-scroll-up-button",className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(gP,{className:"size-4"})})}function YI({className:e,...t}){return s.jsx(FI,{"data-slot":"select-scroll-down-button",className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(T_,{className:"size-4"})})}const Ow=()=>{const e=or(),{patientId:t}=yr(),r=!!t,[a,l]=m.useState({}),[c,d]=m.useState(!1),[f,h]=m.useState(r),[p,v]=m.useState(null),[x,b]=m.useState(!1),w=m.useCallback(async()=>{if(!r||!t){h(!1);return}h(!0),v(null);try{const{data:E,error:R}=await ne.from("patient").select("*").eq("id",t).single();if(R)throw R;E?l({patient_unique_id:E.patient_unique_id||"",full_name:E.full_name||"",date_of_birth:E.date_of_birth?Je(Dt(E.date_of_birth),"yyyy-MM-dd"):void 0,gender:E.gender||void 0,phone:E.phone||""}):v("Patient non trouvé.")}catch(E){console.error("Erreur lors de la récupération du patient:",E),v((E instanceof Error?E.message:null)||"Impossible de charger les données du patient.")}finally{h(!1)}},[r,t]);m.useEffect(()=>{w()},[w]);const j=E=>{const{name:R,value:M}=E.target;l(T=>({...T,[R]:M}))},N=(E,R)=>{l(M=>({...M,[E]:R===""?void 0:R}))},_=E=>{l(R=>({...R,date_of_birth:E?Je(E,"yyyy-MM-dd"):void 0})),b(!1)},C=async E=>{var R;if(E.preventDefault(),v(null),!a.patient_unique_id||!a.full_name){v("L'ID Unique et le Nom Complet sont requis.");return}d(!0);try{const M={patient_unique_id:a.patient_unique_id.trim(),full_name:a.full_name.trim(),date_of_birth:a.date_of_birth||null,gender:a.gender||null,phone:((R=a.phone)==null?void 0:R.trim())||null};let T=null;if(r){const{error:L}=await ne.from("patient").update(M).eq("id",t);T=L}else{const{error:L}=await ne.from("patient").insert(M);T=L}if(T)if(T.code==="23505")v("Cet ID Unique de patient existe déjà. Veuillez en utiliser un autre.");else throw T;else e("/patients")}catch(M){console.error(`Erreur lors de ${r?"la mise à jour":"la création"} du patient:`,M),v((M instanceof Error?M.message:null)||`Une erreur est survenue lors de ${r?"la mise à jour":"l'enregistrement"}.`)}finally{d(!1)}};return f?s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsx(Y,{className:"h-8 w-32"})," ",s.jsxs(Se,{className:"shadow-md",children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-6 w-3/4"}),s.jsx(Y,{className:"h-4 w-full"})]}),s.jsxs(Ee,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-10 w-full"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-10 w-full"})]})]})]}),s.jsxs(ls,{className:"border-t px-6 py-4",children:[s.jsx(Y,{className:"h-10 w-32"}),s.jsx(Y,{className:"h-10 w-24 ml-auto"})]})]})]}):s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("div",{className:"mb-4",children:s.jsx(it,{to:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour à la liste"]})})}),s.jsxs(Se,{className:"shadow-md",children:[s.jsxs(Me,{children:[s.jsxs(yt,{className:"text-xl font-semibold flex items-center gap-2",children:[r?s.jsx(Xr,{className:"h-5 w-5"}):s.jsx(D_,{className:"h-5 w-5"}),r?"Modifier le Patient":"Ajouter un Nouveau Patient"]}),s.jsx(gr,{children:r?"Mettez à jour les informations du patient ci-dessous.":"Remplissez les informations ci-dessous pour enregistrer un nouveau patient."})]}),s.jsxs("form",{onSubmit:C,children:[s.jsxs(Ee,{className:"space-y-6",children:[p&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsx(qt,{children:p})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Le,{htmlFor:"patient_unique_id",className:"font-semibold",children:["ID Unique Patient ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ve,{id:"patient_unique_id",name:"patient_unique_id",placeholder:"Ex: PID-00051",required:!0,value:a.patient_unique_id||"",onChange:j,disabled:c||r,className:Ce(r&&"bg-muted/50 cursor-not-allowed")}),r&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"L'ID Unique ne peut pas être modifié."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Le,{htmlFor:"full_name",className:"font-semibold",children:["Nom Complet ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ve,{id:"full_name",name:"full_name",placeholder:"Ex: Jean Dupont",required:!0,value:a.full_name||"",onChange:j,disabled:c})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Le,{htmlFor:"date_of_birth",className:"font-semibold",children:"Date de Naissance"}),s.jsxs(FN,{open:x,onOpenChange:b,children:[s.jsx(VN,{asChild:!0,children:s.jsxs(te,{variant:"outline",className:Ce("w-full justify-start text-left font-normal h-10",!a.date_of_birth&&"text-muted-foreground"),disabled:c,children:[s.jsx(R_,{className:"mr-2 h-4 w-4"}),a.date_of_birth?Je(Dt(a.date_of_birth),"PPP",{locale:Tt}):s.jsx("span",{children:"Choisir une date"})]})}),s.jsx(YN,{className:"w-auto p-0",align:"start",children:s.jsx(rS,{mode:"single",selected:a.date_of_birth?Dt(a.date_of_birth):void 0,onSelect:_,initialFocus:!0,locale:Tt,captionLayout:"dropdown-buttons",fromYear:1900,toYear:new Date().getFullYear(),disabled:E=>E>new Date||E<new Date("1900-01-01")})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Le,{htmlFor:"gender",className:"font-semibold",children:"Genre"}),s.jsxs(Jn,{name:"gender",value:a.gender||"",onValueChange:E=>N("gender",E),disabled:c,children:[s.jsx(tr,{id:"gender",className:"h-10",children:s.jsx(er,{placeholder:"Sélectionner..."})}),s.jsxs(nr,{children:[s.jsx(bt,{value:"Masculin",children:"Masculin"}),s.jsx(bt,{value:"Féminin",children:"Féminin"}),s.jsx(bt,{value:"Autre",children:"Autre"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Le,{htmlFor:"phone",className:"font-semibold",children:"Téléphone"}),s.jsx(Ve,{id:"phone",name:"phone",type:"tel",placeholder:"Ex: +33 6 12 34 56 78",value:a.phone||"",onChange:j,disabled:c})]})]})]}),s.jsxs(ls,{className:"border-t px-6 py-4 flex justify-between",children:[s.jsx(te,{type:"submit",disabled:c,children:c?s.jsxs(s.Fragment,{children:[s.jsx(Yt,{className:"mr-2 h-4 w-4 animate-spin"}),r?"Mise à jour...":"Enregistrement..."]}):r?"Mettre à jour le Patient":"Enregistrer le Patient"}),s.jsx(it,{to:"/patients",children:s.jsx(te,{type:"button",variant:"outline",disabled:c,children:"Annuler"})})]})]})]})]})};var jv="Checkbox",[GI,tH]=cr(jv),[WI,XI]=GI(jv),MS=m.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:a,checked:l,defaultChecked:c,required:d,disabled:f,value:h="on",onCheckedChange:p,form:v,...x}=e,[b,w]=m.useState(null),j=St(t,M=>w(M)),N=m.useRef(!1),_=b?v||!!b.closest("form"):!0,[C=!1,E]=$a({prop:l,defaultProp:c,onChange:p}),R=m.useRef(C);return m.useEffect(()=>{const M=b==null?void 0:b.form;if(M){const T=()=>E(R.current);return M.addEventListener("reset",T),()=>M.removeEventListener("reset",T)}},[b,E]),s.jsxs(WI,{scope:r,state:C,disabled:f,children:[s.jsx(Ze.button,{type:"button",role:"checkbox","aria-checked":Ua(C)?"mixed":C,"aria-required":d,"data-state":DS(C),"data-disabled":f?"":void 0,disabled:f,value:h,...x,ref:j,onKeyDown:Ae(e.onKeyDown,M=>{M.key==="Enter"&&M.preventDefault()}),onClick:Ae(e.onClick,M=>{E(T=>Ua(T)?!0:!T),_&&(N.current=M.isPropagationStopped(),N.current||M.stopPropagation())})}),_&&s.jsx(KI,{control:b,bubbles:!N.current,name:a,value:h,checked:C,required:d,disabled:f,form:v,style:{transform:"translateX(-100%)"},defaultChecked:Ua(c)?!1:c})]})});MS.displayName=jv;var AS="CheckboxIndicator",kS=m.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:a,...l}=e,c=XI(AS,r);return s.jsx(Dr,{present:a||Ua(c.state)||c.state===!0,children:s.jsx(Ze.span,{"data-state":DS(c.state),"data-disabled":c.disabled?"":void 0,...l,ref:t,style:{pointerEvents:"none",...e.style}})})});kS.displayName=AS;var KI=e=>{const{control:t,checked:r,bubbles:a=!0,defaultChecked:l,...c}=e,d=m.useRef(null),f=bv(r),h=Pg(t);m.useEffect(()=>{const v=d.current,x=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(x,"checked").set;if(f!==r&&w){const j=new Event("click",{bubbles:a});v.indeterminate=Ua(r),w.call(v,Ua(r)?!1:r),v.dispatchEvent(j)}},[f,r,a]);const p=m.useRef(Ua(r)?!1:r);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l??p.current,...c,tabIndex:-1,ref:d,style:{...e.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ua(e){return e==="indeterminate"}function DS(e){return Ua(e)?"indeterminate":e?"checked":"unchecked"}var QI=MS,ZI=kS;function ea({className:e,...t}){return s.jsx(QI,{"data-slot":"checkbox",className:Ce("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(ZI,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:s.jsx(Gg,{className:"size-3.5"})})})}var JI="Separator",Pw="horizontal",ez=["horizontal","vertical"],OS=m.forwardRef((e,t)=>{const{decorative:r,orientation:a=Pw,...l}=e,c=tz(a)?a:Pw,f=r?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return s.jsx(Ze.div,{"data-orientation":c,...f,...l,ref:t})});OS.displayName=JI;function tz(e){return ez.includes(e)}var nz=OS;function Wr({className:e,orientation:t="horizontal",decorative:r=!0,...a}){return s.jsx(nz,{"data-slot":"separator-root",decorative:r,orientation:t,className:Ce("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...a})}const rr=({data:e,isPreview:t})=>{const{labName:r,addressLine1:a,addressLine2:l,cityPostalCode:c,phone:d,email:f,website:h}=e;return s.jsx("div",{className:`flex flex-col items-center text-center gap-2  ${t?"p-4 border rounded-md bg-white min-h-[100px]":" "}`,children:s.jsx("div",{className:" template-heading-shadow w-full py-4 flex items-center justify-center flex-col border-slate-600 border-[1px] shadow-lg mb-2 rounded-[50%] ",children:s.jsxs("div",{className:"text-xs space-y-0.5",children:[s.jsx("p",{className:"font-bold text-sm",children:r||"[Nom Laboratoire]"}),s.jsx("p",{children:a||"[Adresse Ligne 1]"}),l&&s.jsx("p",{children:l}),c&&s.jsx("p",{children:c}),s.jsxs("p",{children:[d&&s.jsxs("span",{children:["Tél : ",d]}),d&&f&&s.jsx("span",{children:" | "}),f&&s.jsxs("span",{children:["Email : ",f]})]}),h&&s.jsx("p",{children:h})]})})})},Qa=({data:e,isPreview:t})=>{const{logoUrl:r,labName:a,addressLine1:l,addressLine2:c,cityPostalCode:d,phone:f,email:h,website:p}=e;return s.jsxs("div",{className:`flex flex-col items-center text-center gap-2 ${t?"p-4 border rounded-md bg-white min-h-[100px]":""}`,children:[s.jsx("div",{className:"mb-2",children:s.jsxs(Ac,{className:"h-16 w-16 rounded-md border",children:[s.jsx(ef,{src:r||void 0,alt:"Logo",className:"object-contain"}),s.jsx(kc,{className:"rounded-md bg-muted",children:s.jsx(gf,{className:"h-8 w-8 text-muted-foreground"})})]})}),s.jsxs("div",{className:"text-xs space-y-0.5",children:[s.jsx("p",{className:"font-bold text-sm",children:a||"[Nom Laboratoire]"}),s.jsx("p",{children:l||"[Adresse Ligne 1]"}),c&&s.jsx("p",{children:c}),d&&s.jsx("p",{children:d}),s.jsxs("p",{children:[f&&s.jsxs("span",{children:["Tél : ",f]}),f&&h&&s.jsx("span",{children:" | "}),h&&s.jsxs("span",{children:["Email : ",h]})]}),p&&s.jsx("p",{children:p})]})]})},Za=({data:e,isPreview:t})=>{const{logoUrl:r,labName:a,addressLine1:l,addressLine2:c,cityPostalCode:d,phone:f,email:h,website:p}=e;return s.jsx("div",{className:`flex flex-col items-center text-center gap-2  ${t?"p-4 border rounded-md bg-white min-h-[100px]":" "}`,children:s.jsxs("div",{className:" w-full py-2 flex items-center flex-col border-slate-600 border-[1px] shadow-lg mb-2 rounded-md ",children:[s.jsx("div",{className:"mb-2",children:s.jsxs(Ac,{className:"h-16 w-16 rounded-md border",children:[s.jsx(ef,{src:r||void 0,alt:"Logo",className:"object-contain"}),s.jsx(kc,{className:"rounded-md bg-muted",children:s.jsx(gf,{className:"h-8 w-8 text-muted-foreground"})})]})}),s.jsxs("div",{className:"text-xs space-y-0.5",children:[s.jsx("p",{className:"font-bold text-sm",children:a||"[Nom Laboratoire]"}),s.jsx("p",{children:l||"[Adresse Ligne 1]"}),c&&s.jsx("p",{children:c}),d&&s.jsx("p",{children:d}),s.jsxs("p",{children:[f&&s.jsxs("span",{children:["Tél : ",f]}),f&&h&&s.jsx("span",{children:" | "}),h&&s.jsxs("span",{children:["Email : ",h]})]}),p&&s.jsx("p",{children:p})]})]})})},Ja=({data:e,isPreview:t})=>{const{logoUrl:r,labName:a,addressLine1:l,addressLine2:c,cityPostalCode:d,phone:f,email:h,website:p}=e;return s.jsx("div",{className:`flex flex-col items-center text-center gap-2  ${t?"p-4 border rounded-md bg-white min-h-[100px]":" "}`,children:s.jsxs("div",{className:" template-heading-shadow w-full py-4 flex items-center justify-center flex-col border-slate-600 border-[1px] shadow-lg mb-2 rounded-[50%] ",children:[s.jsx("div",{className:"mb-2",children:s.jsxs(Ac,{className:"h-16 w-16 rounded-md border",children:[s.jsx(ef,{src:r||void 0,alt:"Logo",className:"object-contain"}),s.jsx(kc,{className:"rounded-md bg-muted",children:s.jsx(gf,{className:"h-8 w-8 text-muted-foreground"})})]})}),s.jsxs("div",{className:"text-xs space-y-0.5",children:[s.jsx("p",{className:"font-bold text-sm",children:a||"[Nom Laboratoire]"}),s.jsx("p",{children:l||"[Adresse Ligne 1]"}),c&&s.jsx("p",{children:c}),d&&s.jsx("p",{children:d}),s.jsxs("p",{children:[f&&s.jsxs("span",{children:["Tél : ",f]}),f&&h&&s.jsx("span",{children:" | "}),h&&s.jsxs("span",{children:["Email : ",h]})]}),p&&s.jsx("p",{children:p})]})]})})};function vp(e,t){const r=t.trim();try{if(r.startsWith("<")&&!r.startsWith("<=")){const l=parseFloat(r.substring(1).trim().replace(",","."));if(!isNaN(l))return e<l?"in-range":"out-of-range"}else if(r.startsWith(">")&&!r.startsWith(">=")){const l=parseFloat(r.substring(1).trim().replace(",","."));if(!isNaN(l))return e>l?"in-range":"out-of-range"}else if(r.startsWith("<=")||r.startsWith("≤")){const l=parseFloat(r.substring(2).trim().replace(",","."));if(!isNaN(l))return e<=l?"in-range":"out-of-range"}else if(r.startsWith(">=")||r.startsWith("≥")){const l=parseFloat(r.substring(2).trim().replace(",","."));if(!isNaN(l))return e>=l?"in-range":"out-of-range"}else if(r.includes("-")){const l=r.split("-").map(c=>parseFloat(c.trim().replace(",",".")));if(l.length===2&&!isNaN(l[0])&&!isNaN(l[1])){const c=Math.min(l[0],l[1]),d=Math.max(l[0],l[1]);return e>=c&&e<=d?"in-range":"out-of-range"}}const a=parseFloat(r.replace(",","."));if(!isNaN(a))return"indeterminate"}catch(a){console.error("Error parsing single range line:",t,a)}return"indeterminate"}function Lw(e,t,r,a,l){if(l.includes(r)||l.includes(a))return"in-range";if(e==null||t===null||t===void 0||t.trim()==="")return"indeterminate";if(t.trim()==="-"){switch(e.trim().toLocaleLowerCase()){case"0 negatif":case"0 négatif":case"negatif":case"négatif":case"neant":case"néant":case"0":return"in-range";case"positif":return"out-of-range"}if(!isNaN(parseFloat(e)))return"out-of-range"}const c=parseFloat(e.replace(",",".")),d=t.trim(),f=e.trim().toLowerCase(),h=!isNaN(c);if(d.includes("Homme")||d.includes("HOMME")||d.match(/^(<|>|<=|>=)\s*\d+\s*(y|a|ans?)/i))return"indeterminate";const v=d.match(/^([a-zA-Z\s][a-zA-Z\s\d]*):\s*(.*)$/),x=d.includes(":")&&d.includes(";");if(v&&!x)return"indeterminate";if(d.toLowerCase().includes("negatif:")&&d.toLowerCase().includes("positif:")&&d.includes(";")){const w=d.split(";").map(_=>_.trim()).filter(_=>_.length>0);let j=null,N=null;for(const _ of w){const C=_.match(/^(.+?):\s*(.*)$/);if(C){const E=C[1].trim().toLowerCase(),R=C[2].trim();E==="negatif"?j=R:E==="positif"&&(N=R)}else return"indeterminate"}return!j||!N?(console.warn("NEGATIF/POSITIF format detected, but couldn't extract both range segments."),"indeterminate"):f==="negatif"?"in-range":f==="positif"?"out-of-range":h?vp(c,j)==="in-range"?"in-range":vp(c,N)==="in-range"?"out-of-range":"indeterminate":"indeterminate"}if(!h)return isNaN(parseFloat(d.charAt(0)))&&!["<",">","-"].some(w=>d.includes(w))?f===d.toLowerCase()?"in-range":"out-of-range":"indeterminate";try{return vp(c,d)}catch(w){return console.error("Error parsing simple range string:",d,w),"indeterminate"}}function rz(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.useMemo(()=>a=>{t.forEach(l=>l(a))},t)}const kf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function to(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function _v(e){return"nodeType"in e}function br(e){var t,r;return e?to(e)?e:_v(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Nv(e){const{Document:t}=br(e);return e instanceof t}function Kc(e){return to(e)?!1:e instanceof br(e).HTMLElement}function PS(e){return e instanceof br(e).SVGElement}function no(e){return e?to(e)?e.document:_v(e)?Nv(e)?e:Kc(e)||PS(e)?e.ownerDocument:document:document:document}const As=kf?m.useLayoutEffect:m.useEffect;function Sv(e){const t=m.useRef(e);return As(()=>{t.current=e}),m.useCallback(function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t.current==null?void 0:t.current(...a)},[])}function sz(){const e=m.useRef(null),t=m.useCallback((a,l)=>{e.current=setInterval(a,l)},[]),r=m.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function _c(e,t){t===void 0&&(t=[e]);const r=m.useRef(e);return As(()=>{r.current!==e&&(r.current=e)},t),r}function Qc(e,t){const r=m.useRef();return m.useMemo(()=>{const a=e(r.current);return r.current=a,a},[...t])}function Fd(e){const t=Sv(e),r=m.useRef(null),a=m.useCallback(l=>{l!==r.current&&(t==null||t(l,r.current)),r.current=l},[]);return[r,a]}function ng(e){const t=m.useRef();return m.useEffect(()=>{t.current=e},[e]),t.current}let xp={};function Zc(e,t){return m.useMemo(()=>{if(t)return t;const r=xp[e]==null?0:xp[e]+1;return xp[e]=r,e+"-"+r},[e,t])}function LS(e){return function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return a.reduce((c,d)=>{const f=Object.entries(d);for(const[h,p]of f){const v=c[h];v!=null&&(c[h]=v+e*p)}return c},{...t})}}const Al=LS(1),Nc=LS(-1);function az(e){return"clientX"in e&&"clientY"in e}function Ev(e){if(!e)return!1;const{KeyboardEvent:t}=br(e.target);return t&&e instanceof t}function iz(e){if(!e)return!1;const{TouchEvent:t}=br(e.target);return t&&e instanceof t}function rg(e){if(iz(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return az(e)?{x:e.clientX,y:e.clientY}:null}const Sc=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Sc.Translate.toString(e),Sc.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),Iw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function lz(e){return e.matches(Iw)?e:e.querySelector(Iw)}const oz={display:"none"};function cz(e){let{id:t,value:r}=e;return be.createElement("div",{id:t,style:oz},r)}function uz(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return be.createElement("div",{id:t,style:l,role:"status","aria-live":a,"aria-atomic":!0},r)}function dz(){const[e,t]=m.useState("");return{announce:m.useCallback(a=>{a!=null&&t(a)},[]),announcement:e}}const IS=m.createContext(null);function fz(e){const t=m.useContext(IS);m.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function hz(){const[e]=m.useState(()=>new Set),t=m.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[m.useCallback(a=>{let{type:l,event:c}=a;e.forEach(d=>{var f;return(f=d[l])==null?void 0:f.call(d,c)})},[e]),t]}const mz={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},pz={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function gz(e){let{announcements:t=pz,container:r,hiddenTextDescribedById:a,screenReaderInstructions:l=mz}=e;const{announce:c,announcement:d}=dz(),f=Zc("DndLiveRegion"),[h,p]=m.useState(!1);if(m.useEffect(()=>{p(!0)},[]),fz(m.useMemo(()=>({onDragStart(x){let{active:b}=x;c(t.onDragStart({active:b}))},onDragMove(x){let{active:b,over:w}=x;t.onDragMove&&c(t.onDragMove({active:b,over:w}))},onDragOver(x){let{active:b,over:w}=x;c(t.onDragOver({active:b,over:w}))},onDragEnd(x){let{active:b,over:w}=x;c(t.onDragEnd({active:b,over:w}))},onDragCancel(x){let{active:b,over:w}=x;c(t.onDragCancel({active:b,over:w}))}}),[c,t])),!h)return null;const v=be.createElement(be.Fragment,null,be.createElement(cz,{id:a,value:l.draggable}),be.createElement(uz,{id:f,announcement:d}));return r?Ns.createPortal(v,r):v}var Tn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Tn||(Tn={}));function Vd(){}function zw(e,t){return m.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function vz(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.useMemo(()=>[...t].filter(a=>a!=null),[...t])}const ds=Object.freeze({x:0,y:0});function zS(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function US(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function xz(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function Uw(e){let{left:t,top:r,height:a,width:l}=e;return[{x:t,y:r},{x:t+l,y:r},{x:t,y:r+a},{x:t+l,y:r+a}]}function $S(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function $w(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const yz=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const l=$w(t,t.left,t.top),c=[];for(const d of a){const{id:f}=d,h=r.get(f);if(h){const p=zS($w(h),l);c.push({id:f,data:{droppableContainer:d,value:p}})}}return c.sort(US)},bz=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const l=Uw(t),c=[];for(const d of a){const{id:f}=d,h=r.get(f);if(h){const p=Uw(h),v=l.reduce((b,w,j)=>b+zS(p[j],w),0),x=Number((v/4).toFixed(4));c.push({id:f,data:{droppableContainer:d,value:x}})}}return c.sort(US)};function wz(e,t){const r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),c=Math.min(t.top+t.height,e.top+e.height),d=l-a,f=c-r;if(a<l&&r<c){const h=t.width*t.height,p=e.width*e.height,v=d*f,x=v/(h+p-v);return Number(x.toFixed(4))}return 0}const jz=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const l=[];for(const c of a){const{id:d}=c,f=r.get(d);if(f){const h=wz(f,t);h>0&&l.push({id:d,data:{droppableContainer:c,value:h}})}}return l.sort(xz)};function _z(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function BS(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ds}function Nz(e){return function(r){for(var a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];return l.reduce((d,f)=>({...d,top:d.top+e*f.y,bottom:d.bottom+e*f.y,left:d.left+e*f.x,right:d.right+e*f.x}),{...r})}}const Sz=Nz(1);function Ez(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Cz(e,t,r){const a=Ez(t);if(!a)return e;const{scaleX:l,scaleY:c,x:d,y:f}=a,h=e.left-d-(1-l)*parseFloat(r),p=e.top-f-(1-c)*parseFloat(r.slice(r.indexOf(" ")+1)),v=l?e.width/l:e.width,x=c?e.height/c:e.height;return{width:v,height:x,top:p,right:h+v,bottom:p+x,left:h}}const Rz={ignoreTransform:!1};function ro(e,t){t===void 0&&(t=Rz);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:v}=br(e).getComputedStyle(e);p&&(r=Cz(r,p,v))}const{top:a,left:l,width:c,height:d,bottom:f,right:h}=r;return{top:a,left:l,width:c,height:d,bottom:f,right:h}}function Bw(e){return ro(e,{ignoreTransform:!0})}function Tz(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function Mz(e,t){return t===void 0&&(t=br(e).getComputedStyle(e)),t.position==="fixed"}function Az(e,t){t===void 0&&(t=br(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const c=t[l];return typeof c=="string"?r.test(c):!1})}function Df(e,t){const r=[];function a(l){if(t!=null&&r.length>=t||!l)return r;if(Nv(l)&&l.scrollingElement!=null&&!r.includes(l.scrollingElement))return r.push(l.scrollingElement),r;if(!Kc(l)||PS(l)||r.includes(l))return r;const c=br(e).getComputedStyle(l);return l!==e&&Az(l,c)&&r.push(l),Mz(l,c)?r:a(l.parentNode)}return e?a(e):r}function HS(e){const[t]=Df(e,1);return t??null}function yp(e){return!kf||!e?null:to(e)?e:_v(e)?Nv(e)||e===no(e).scrollingElement?window:Kc(e)?e:null:null}function qS(e){return to(e)?e.scrollX:e.scrollLeft}function FS(e){return to(e)?e.scrollY:e.scrollTop}function sg(e){return{x:qS(e),y:FS(e)}}var $n;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})($n||($n={}));function VS(e){return!kf||!e?!1:e===document.scrollingElement}function YS(e){const t={x:0,y:0},r=VS(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},l=e.scrollTop<=t.y,c=e.scrollLeft<=t.x,d=e.scrollTop>=a.y,f=e.scrollLeft>=a.x;return{isTop:l,isLeft:c,isBottom:d,isRight:f,maxScroll:a,minScroll:t}}const kz={x:.2,y:.2};function Dz(e,t,r,a,l){let{top:c,left:d,right:f,bottom:h}=r;a===void 0&&(a=10),l===void 0&&(l=kz);const{isTop:p,isBottom:v,isLeft:x,isRight:b}=YS(e),w={x:0,y:0},j={x:0,y:0},N={height:t.height*l.y,width:t.width*l.x};return!p&&c<=t.top+N.height?(w.y=$n.Backward,j.y=a*Math.abs((t.top+N.height-c)/N.height)):!v&&h>=t.bottom-N.height&&(w.y=$n.Forward,j.y=a*Math.abs((t.bottom-N.height-h)/N.height)),!b&&f>=t.right-N.width?(w.x=$n.Forward,j.x=a*Math.abs((t.right-N.width-f)/N.width)):!x&&d<=t.left+N.width&&(w.x=$n.Backward,j.x=a*Math.abs((t.left+N.width-d)/N.width)),{direction:w,speed:j}}function Oz(e){if(e===document.scrollingElement){const{innerWidth:c,innerHeight:d}=window;return{top:0,left:0,right:c,bottom:d,width:c,height:d}}const{top:t,left:r,right:a,bottom:l}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:l,width:e.clientWidth,height:e.clientHeight}}function GS(e){return e.reduce((t,r)=>Al(t,sg(r)),ds)}function Pz(e){return e.reduce((t,r)=>t+qS(r),0)}function Lz(e){return e.reduce((t,r)=>t+FS(r),0)}function Iz(e,t){if(t===void 0&&(t=ro),!e)return;const{top:r,left:a,bottom:l,right:c}=t(e);HS(e)&&(l<=0||c<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const zz=[["x",["left","right"],Pz],["y",["top","bottom"],Lz]];class Cv{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=Df(r),l=GS(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[c,d,f]of zz)for(const h of d)Object.defineProperty(this,h,{get:()=>{const p=f(a),v=l[c]-p;return this.rect[h]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class fc{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...r)})},this.target=t}add(t,r,a){var l;(l=this.target)==null||l.addEventListener(t,r,a),this.listeners.push([t,r,a])}}function Uz(e){const{EventTarget:t}=br(e);return e instanceof t?e:no(e)}function bp(e,t){const r=Math.abs(e.x),a=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t?a>t.y:!1}var Yr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Yr||(Yr={}));function Hw(e){e.preventDefault()}function $z(e){e.stopPropagation()}var Rt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Rt||(Rt={}));const WS={start:[Rt.Space,Rt.Enter],cancel:[Rt.Esc],end:[Rt.Space,Rt.Enter,Rt.Tab]},Bz=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Rt.Right:return{...r,x:r.x+25};case Rt.Left:return{...r,x:r.x-25};case Rt.Down:return{...r,y:r.y+25};case Rt.Up:return{...r,y:r.y-25}}};class Rv{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new fc(no(r)),this.windowListeners=new fc(br(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Yr.Resize,this.handleCancel),this.windowListeners.add(Yr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Yr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,a=t.node.current;a&&Iz(a),r(ds)}handleKeyDown(t){if(Ev(t)){const{active:r,context:a,options:l}=this.props,{keyboardCodes:c=WS,coordinateGetter:d=Bz,scrollBehavior:f="smooth"}=l,{code:h}=t;if(c.end.includes(h)){this.handleEnd(t);return}if(c.cancel.includes(h)){this.handleCancel(t);return}const{collisionRect:p}=a.current,v=p?{x:p.left,y:p.top}:ds;this.referenceCoordinates||(this.referenceCoordinates=v);const x=d(t,{active:r,context:a.current,currentCoordinates:v});if(x){const b=Nc(x,v),w={x:0,y:0},{scrollableAncestors:j}=a.current;for(const N of j){const _=t.code,{isTop:C,isRight:E,isLeft:R,isBottom:M,maxScroll:T,minScroll:L}=YS(N),H=Oz(N),q={x:Math.min(_===Rt.Right?H.right-H.width/2:H.right,Math.max(_===Rt.Right?H.left:H.left+H.width/2,x.x)),y:Math.min(_===Rt.Down?H.bottom-H.height/2:H.bottom,Math.max(_===Rt.Down?H.top:H.top+H.height/2,x.y))},G=_===Rt.Right&&!E||_===Rt.Left&&!R,W=_===Rt.Down&&!M||_===Rt.Up&&!C;if(G&&q.x!==x.x){const ce=N.scrollLeft+b.x,se=_===Rt.Right&&ce<=T.x||_===Rt.Left&&ce>=L.x;if(se&&!b.y){N.scrollTo({left:ce,behavior:f});return}se?w.x=N.scrollLeft-ce:w.x=_===Rt.Right?N.scrollLeft-T.x:N.scrollLeft-L.x,w.x&&N.scrollBy({left:-w.x,behavior:f});break}else if(W&&q.y!==x.y){const ce=N.scrollTop+b.y,se=_===Rt.Down&&ce<=T.y||_===Rt.Up&&ce>=L.y;if(se&&!b.x){N.scrollTo({top:ce,behavior:f});return}se?w.y=N.scrollTop-ce:w.y=_===Rt.Down?N.scrollTop-T.y:N.scrollTop-L.y,w.y&&N.scrollBy({top:-w.y,behavior:f});break}}this.handleMove(t,Al(Nc(x,this.referenceCoordinates),w))}}}handleMove(t,r){const{onMove:a}=this.props;t.preventDefault(),a(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Rv.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=WS,onActivation:l}=t,{active:c}=r;const{code:d}=e.nativeEvent;if(a.start.includes(d)){const f=c.activatorNode.current;return f&&e.target!==f?!1:(e.preventDefault(),l==null||l({event:e.nativeEvent}),!0)}return!1}}];function qw(e){return!!(e&&"distance"in e)}function Fw(e){return!!(e&&"delay"in e)}class Tv{constructor(t,r,a){var l;a===void 0&&(a=Uz(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:c}=t,{target:d}=c;this.props=t,this.events=r,this.document=no(d),this.documentListeners=new fc(this.document),this.listeners=new fc(a),this.windowListeners=new fc(br(d)),this.initialCoordinates=(l=rg(c))!=null?l:ds,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Yr.Resize,this.handleCancel),this.windowListeners.add(Yr.DragStart,Hw),this.windowListeners.add(Yr.VisibilityChange,this.handleCancel),this.windowListeners.add(Yr.ContextMenu,Hw),this.documentListeners.add(Yr.Keydown,this.handleKeydown),r){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Fw(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(qw(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:a,onPending:l}=this.props;l(a,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Yr.Click,$z,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Yr.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:a,initialCoordinates:l,props:c}=this,{onMove:d,options:{activationConstraint:f}}=c;if(!l)return;const h=(r=rg(t))!=null?r:ds,p=Nc(l,h);if(!a&&f){if(qw(f)){if(f.tolerance!=null&&bp(p,f.tolerance))return this.handleCancel();if(bp(p,f.distance))return this.handleStart()}if(Fw(f)&&bp(p,f.tolerance))return this.handleCancel();this.handlePending(f,p);return}t.cancelable&&t.preventDefault(),d(h)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Rt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Hz={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Mv extends Tv{constructor(t){const{event:r}=t,a=no(r.target);super(t,Hz,a)}}Mv.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!r.isPrimary||r.button!==0?!1:(a==null||a({event:r}),!0)}}];const qz={move:{name:"mousemove"},end:{name:"mouseup"}};var ag;(function(e){e[e.RightClick=2]="RightClick"})(ag||(ag={}));class Fz extends Tv{constructor(t){super(t,qz,no(t.event.target))}}Fz.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return r.button===ag.RightClick?!1:(a==null||a({event:r}),!0)}}];const wp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Vz extends Tv{constructor(t){super(t,wp)}static setup(){return window.addEventListener(wp.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(wp.move.name,t)};function t(){}}}Vz.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;const{touches:l}=r;return l.length>1?!1:(a==null||a({event:r}),!0)}}];var hc;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(hc||(hc={}));var Yd;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Yd||(Yd={}));function Yz(e){let{acceleration:t,activator:r=hc.Pointer,canScroll:a,draggingRect:l,enabled:c,interval:d=5,order:f=Yd.TreeOrder,pointerCoordinates:h,scrollableAncestors:p,scrollableAncestorRects:v,delta:x,threshold:b}=e;const w=Wz({delta:x,disabled:!c}),[j,N]=sz(),_=m.useRef({x:0,y:0}),C=m.useRef({x:0,y:0}),E=m.useMemo(()=>{switch(r){case hc.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case hc.DraggableRect:return l}},[r,l,h]),R=m.useRef(null),M=m.useCallback(()=>{const L=R.current;if(!L)return;const H=_.current.x*C.current.x,q=_.current.y*C.current.y;L.scrollBy(H,q)},[]),T=m.useMemo(()=>f===Yd.TreeOrder?[...p].reverse():p,[f,p]);m.useEffect(()=>{if(!c||!p.length||!E){N();return}for(const L of T){if((a==null?void 0:a(L))===!1)continue;const H=p.indexOf(L),q=v[H];if(!q)continue;const{direction:G,speed:W}=Dz(L,q,E,t,b);for(const ce of["x","y"])w[ce][G[ce]]||(W[ce]=0,G[ce]=0);if(W.x>0||W.y>0){N(),R.current=L,j(M,d),_.current=W,C.current=G;return}}_.current={x:0,y:0},C.current={x:0,y:0},N()},[t,M,a,N,c,d,JSON.stringify(E),JSON.stringify(w),j,p,T,v,JSON.stringify(b)])}const Gz={x:{[$n.Backward]:!1,[$n.Forward]:!1},y:{[$n.Backward]:!1,[$n.Forward]:!1}};function Wz(e){let{delta:t,disabled:r}=e;const a=ng(t);return Qc(l=>{if(r||!a||!l)return Gz;const c={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[$n.Backward]:l.x[$n.Backward]||c.x===-1,[$n.Forward]:l.x[$n.Forward]||c.x===1},y:{[$n.Backward]:l.y[$n.Backward]||c.y===-1,[$n.Forward]:l.y[$n.Forward]||c.y===1}}},[r,t,a])}function Xz(e,t){const r=t!=null?e.get(t):void 0,a=r?r.node.current:null;return Qc(l=>{var c;return t==null?null:(c=a??l)!=null?c:null},[a,t])}function Kz(e,t){return m.useMemo(()=>e.reduce((r,a)=>{const{sensor:l}=a,c=l.activators.map(d=>({eventName:d.eventName,handler:t(d.handler,a)}));return[...r,...c]},[]),[e,t])}var Ec;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ec||(Ec={}));var ig;(function(e){e.Optimized="optimized"})(ig||(ig={}));const Vw=new Map;function Qz(e,t){let{dragging:r,dependencies:a,config:l}=t;const[c,d]=m.useState(null),{frequency:f,measure:h,strategy:p}=l,v=m.useRef(e),x=_(),b=_c(x),w=m.useCallback(function(C){C===void 0&&(C=[]),!b.current&&d(E=>E===null?C:E.concat(C.filter(R=>!E.includes(R))))},[b]),j=m.useRef(null),N=Qc(C=>{if(x&&!r)return Vw;if(!C||C===Vw||v.current!==e||c!=null){const E=new Map;for(let R of e){if(!R)continue;if(c&&c.length>0&&!c.includes(R.id)&&R.rect.current){E.set(R.id,R.rect.current);continue}const M=R.node.current,T=M?new Cv(h(M),M):null;R.rect.current=T,T&&E.set(R.id,T)}return E}return C},[e,c,r,x,h]);return m.useEffect(()=>{v.current=e},[e]),m.useEffect(()=>{x||w()},[r,x]),m.useEffect(()=>{c&&c.length>0&&d(null)},[JSON.stringify(c)]),m.useEffect(()=>{x||typeof f!="number"||j.current!==null||(j.current=setTimeout(()=>{w(),j.current=null},f))},[f,x,w,...a]),{droppableRects:N,measureDroppableContainers:w,measuringScheduled:c!=null};function _(){switch(p){case Ec.Always:return!1;case Ec.BeforeDragging:return r;default:return!r}}}function XS(e,t){return Qc(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function Zz(e,t){return XS(e,t)}function Jz(e){let{callback:t,disabled:r}=e;const a=Sv(t),l=m.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(a)},[a,r]);return m.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function Of(e){let{callback:t,disabled:r}=e;const a=Sv(t),l=m.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(a)},[r]);return m.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function eU(e){return new Cv(ro(e),e)}function Yw(e,t,r){t===void 0&&(t=eU);const[a,l]=m.useState(null);function c(){l(h=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=h??r)!=null?p:null}const v=t(e);return JSON.stringify(h)===JSON.stringify(v)?h:v})}const d=Jz({callback(h){if(e)for(const p of h){const{type:v,target:x}=p;if(v==="childList"&&x instanceof HTMLElement&&x.contains(e)){c();break}}}}),f=Of({callback:c});return As(()=>{c(),e?(f==null||f.observe(e),d==null||d.observe(document.body,{childList:!0,subtree:!0})):(f==null||f.disconnect(),d==null||d.disconnect())},[e]),a}function tU(e){const t=XS(e);return BS(e,t)}const Gw=[];function nU(e){const t=m.useRef(e),r=Qc(a=>e?a&&a!==Gw&&e&&t.current&&e.parentNode===t.current.parentNode?a:Df(e):Gw,[e]);return m.useEffect(()=>{t.current=e},[e]),r}function rU(e){const[t,r]=m.useState(null),a=m.useRef(e),l=m.useCallback(c=>{const d=yp(c.target);d&&r(f=>f?(f.set(d,sg(d)),new Map(f)):null)},[]);return m.useEffect(()=>{const c=a.current;if(e!==c){d(c);const f=e.map(h=>{const p=yp(h);return p?(p.addEventListener("scroll",l,{passive:!0}),[p,sg(p)]):null}).filter(h=>h!=null);r(f.length?new Map(f):null),a.current=e}return()=>{d(e),d(c)};function d(f){f.forEach(h=>{const p=yp(h);p==null||p.removeEventListener("scroll",l)})}},[l,e]),m.useMemo(()=>e.length?t?Array.from(t.values()).reduce((c,d)=>Al(c,d),ds):GS(e):ds,[e,t])}function Ww(e,t){t===void 0&&(t=[]);const r=m.useRef(null);return m.useEffect(()=>{r.current=null},t),m.useEffect(()=>{const a=e!==ds;a&&!r.current&&(r.current=e),!a&&r.current&&(r.current=null)},[e]),r.current?Nc(e,r.current):ds}function sU(e){m.useEffect(()=>{if(!kf)return;const t=e.map(r=>{let{sensor:a}=r;return a.setup==null?void 0:a.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function aU(e,t){return m.useMemo(()=>e.reduce((r,a)=>{let{eventName:l,handler:c}=a;return r[l]=d=>{c(d,t)},r},{}),[e,t])}function KS(e){return m.useMemo(()=>e?Tz(e):null,[e])}const Xw=[];function iU(e,t){t===void 0&&(t=ro);const[r]=e,a=KS(r?br(r):null),[l,c]=m.useState(Xw);function d(){c(()=>e.length?e.map(h=>VS(h)?a:new Cv(t(h),h)):Xw)}const f=Of({callback:d});return As(()=>{f==null||f.disconnect(),d(),e.forEach(h=>f==null?void 0:f.observe(h))},[e]),l}function lU(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Kc(t)?t:e}function oU(e){let{measure:t}=e;const[r,a]=m.useState(null),l=m.useCallback(p=>{for(const{target:v}of p)if(Kc(v)){a(x=>{const b=t(v);return x?{...x,width:b.width,height:b.height}:b});break}},[t]),c=Of({callback:l}),d=m.useCallback(p=>{const v=lU(p);c==null||c.disconnect(),v&&(c==null||c.observe(v)),a(v?t(v):null)},[t,c]),[f,h]=Fd(d);return m.useMemo(()=>({nodeRef:f,rect:r,setRef:h}),[r,f,h])}const cU=[{sensor:Mv,options:{}},{sensor:Rv,options:{}}],uU={current:{}},Md={draggable:{measure:Bw},droppable:{measure:Bw,strategy:Ec.WhileDragging,frequency:ig.Optimized},dragOverlay:{measure:ro}};class mc extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,a;return(r=(a=this.get(t))==null?void 0:a.node.current)!=null?r:void 0}}const dU={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new mc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Vd},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Md,measureDroppableContainers:Vd,windowRect:null,measuringScheduled:!1},fU={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Vd,draggableNodes:new Map,over:null,measureDroppableContainers:Vd},Pf=m.createContext(fU),QS=m.createContext(dU);function hU(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new mc}}}function mU(e,t){switch(t.type){case Tn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Tn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Tn.DragEnd:case Tn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Tn.RegisterDroppable:{const{element:r}=t,{id:a}=r,l=new mc(e.droppable.containers);return l.set(a,r),{...e,droppable:{...e.droppable,containers:l}}}case Tn.SetDroppableDisabled:{const{id:r,key:a,disabled:l}=t,c=e.droppable.containers.get(r);if(!c||a!==c.key)return e;const d=new mc(e.droppable.containers);return d.set(r,{...c,disabled:l}),{...e,droppable:{...e.droppable,containers:d}}}case Tn.UnregisterDroppable:{const{id:r,key:a}=t,l=e.droppable.containers.get(r);if(!l||a!==l.key)return e;const c=new mc(e.droppable.containers);return c.delete(r),{...e,droppable:{...e.droppable,containers:c}}}default:return e}}function pU(e){let{disabled:t}=e;const{active:r,activatorEvent:a,draggableNodes:l}=m.useContext(Pf),c=ng(a),d=ng(r==null?void 0:r.id);return m.useEffect(()=>{if(!t&&!a&&c&&d!=null){if(!Ev(c)||document.activeElement===c.target)return;const f=l.get(d);if(!f)return;const{activatorNode:h,node:p}=f;if(!h.current&&!p.current)return;requestAnimationFrame(()=>{for(const v of[h.current,p.current]){if(!v)continue;const x=lz(v);if(x){x.focus();break}}})}},[a,t,l,d,c]),null}function gU(e,t){let{transform:r,...a}=t;return e!=null&&e.length?e.reduce((l,c)=>c({transform:l,...a}),r):r}function vU(e){return m.useMemo(()=>({draggable:{...Md.draggable,...e==null?void 0:e.draggable},droppable:{...Md.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Md.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function xU(e){let{activeNode:t,measure:r,initialRect:a,config:l=!0}=e;const c=m.useRef(!1),{x:d,y:f}=typeof l=="boolean"?{x:l,y:l}:l;As(()=>{if(!d&&!f||!t){c.current=!1;return}if(c.current||!a)return;const p=t==null?void 0:t.node.current;if(!p||p.isConnected===!1)return;const v=r(p),x=BS(v,a);if(d||(x.x=0),f||(x.y=0),c.current=!0,Math.abs(x.x)>0||Math.abs(x.y)>0){const b=HS(p);b&&b.scrollBy({top:x.y,left:x.x})}},[t,d,f,a,r])}const ZS=m.createContext({...ds,scaleX:1,scaleY:1});var Ia;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ia||(Ia={}));const yU=m.memo(function(t){var r,a,l,c;let{id:d,accessibility:f,autoScroll:h=!0,children:p,sensors:v=cU,collisionDetection:x=jz,measuring:b,modifiers:w,...j}=t;const N=m.useReducer(mU,void 0,hU),[_,C]=N,[E,R]=hz(),[M,T]=m.useState(Ia.Uninitialized),L=M===Ia.Initialized,{draggable:{active:H,nodes:q,translate:G},droppable:{containers:W}}=_,ce=H!=null?q.get(H):null,se=m.useRef({initial:null,translated:null}),B=m.useMemo(()=>{var tt;return H!=null?{id:H,data:(tt=ce==null?void 0:ce.data)!=null?tt:uU,rect:se}:null},[H,ce]),ie=m.useRef(null),[oe,O]=m.useState(null),[V,U]=m.useState(null),J=_c(j,Object.values(j)),k=Zc("DndDescribedBy",d),P=m.useMemo(()=>W.getEnabled(),[W]),F=vU(b),{droppableRects:X,measureDroppableContainers:D,measuringScheduled:z}=Qz(P,{dragging:L,dependencies:[G.x,G.y],config:F.droppable}),$=Xz(q,H),K=m.useMemo(()=>V?rg(V):null,[V]),re=mn(),pe=Zz($,F.draggable.measure);xU({activeNode:H!=null?q.get(H):null,config:re.layoutShiftCompensation,initialRect:pe,measure:F.draggable.measure});const ue=Yw($,F.draggable.measure,pe),_e=Yw($?$.parentElement:null),Re=m.useRef({activatorEvent:null,active:null,activeNode:$,collisionRect:null,collisions:null,droppableRects:X,draggableNodes:q,draggingNode:null,draggingNodeRect:null,droppableContainers:W,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),lt=W.getNodeFor((r=Re.current.over)==null?void 0:r.id),rt=oU({measure:F.dragOverlay.measure}),ge=(a=rt.nodeRef.current)!=null?a:$,me=L?(l=rt.rect)!=null?l:ue:null,De=!!(rt.nodeRef.current&&rt.rect),ye=tU(De?null:ue),je=KS(ge?br(ge):null),Pe=nU(L?lt??$:null),Ye=iU(Pe),qe=gU(w,{transform:{x:G.x-ye.x,y:G.y-ye.y,scaleX:1,scaleY:1},activatorEvent:V,active:B,activeNodeRect:ue,containerNodeRect:_e,draggingNodeRect:me,over:Re.current.over,overlayNodeRect:rt.rect,scrollableAncestors:Pe,scrollableAncestorRects:Ye,windowRect:je}),gt=K?Al(K,G):null,Mt=rU(Pe),Qt=Ww(Mt),Be=Ww(Mt,[ue]),st=Al(qe,Qt),nn=me?Sz(me,qe):null,Mn=B&&nn?x({active:B,collisionRect:nn,droppableRects:X,droppableContainers:P,pointerCoordinates:gt}):null,Sn=$S(Mn,"id"),[Et,xe]=m.useState(null),Te=De?qe:Al(qe,Be),$e=_z(Te,(c=Et==null?void 0:Et.rect)!=null?c:null,ue),et=m.useRef(null),Ge=m.useCallback((tt,ct)=>{let{sensor:ke,options:vt}=ct;if(ie.current==null)return;const ot=q.get(ie.current);if(!ot)return;const jt=tt.nativeEvent,cn=new ke({active:ie.current,activeNode:ot,event:jt,options:vt,context:Re,onAbort(mt){if(!q.get(mt))return;const{onDragAbort:Vt}=J.current,en={id:mt};Vt==null||Vt(en),E({type:"onDragAbort",event:en})},onPending(mt,En,Vt,en){if(!q.get(mt))return;const{onDragPending:An}=J.current,kn={id:mt,constraint:En,initialCoordinates:Vt,offset:en};An==null||An(kn),E({type:"onDragPending",event:kn})},onStart(mt){const En=ie.current;if(En==null)return;const Vt=q.get(En);if(!Vt)return;const{onDragStart:en}=J.current,wr={activatorEvent:jt,active:{id:En,data:Vt.data,rect:se}};Ns.unstable_batchedUpdates(()=>{en==null||en(wr),T(Ia.Initializing),C({type:Tn.DragStart,initialCoordinates:mt,active:En}),E({type:"onDragStart",event:wr}),O(et.current),U(jt)})},onMove(mt){C({type:Tn.DragMove,coordinates:mt})},onEnd:It(Tn.DragEnd),onCancel:It(Tn.DragCancel)});et.current=cn;function It(mt){return async function(){const{active:Vt,collisions:en,over:wr,scrollAdjustedTranslate:An}=Re.current;let kn=null;if(Vt&&An){const{cancelDrop:Xn}=J.current;kn={activatorEvent:jt,active:Vt,collisions:en,delta:An,over:wr},mt===Tn.DragEnd&&typeof Xn=="function"&&await Promise.resolve(Xn(kn))&&(mt=Tn.DragCancel)}ie.current=null,Ns.unstable_batchedUpdates(()=>{C({type:mt}),T(Ia.Uninitialized),xe(null),O(null),U(null),et.current=null;const Xn=mt===Tn.DragEnd?"onDragEnd":"onDragCancel";if(kn){const pn=J.current[Xn];pn==null||pn(kn),E({type:Xn,event:kn})}})}}},[q]),Ft=m.useCallback((tt,ct)=>(ke,vt)=>{const ot=ke.nativeEvent,jt=q.get(vt);if(ie.current!==null||!jt||ot.dndKit||ot.defaultPrevented)return;const cn={active:jt};tt(ke,ct.options,cn)===!0&&(ot.dndKit={capturedBy:ct.sensor},ie.current=vt,Ge(ke,ct))},[q,Ge]),on=Kz(v,Ft);sU(v),As(()=>{ue&&M===Ia.Initializing&&T(Ia.Initialized)},[ue,M]),m.useEffect(()=>{const{onDragMove:tt}=J.current,{active:ct,activatorEvent:ke,collisions:vt,over:ot}=Re.current;if(!ct||!ke)return;const jt={active:ct,activatorEvent:ke,collisions:vt,delta:{x:st.x,y:st.y},over:ot};Ns.unstable_batchedUpdates(()=>{tt==null||tt(jt),E({type:"onDragMove",event:jt})})},[st.x,st.y]),m.useEffect(()=>{const{active:tt,activatorEvent:ct,collisions:ke,droppableContainers:vt,scrollAdjustedTranslate:ot}=Re.current;if(!tt||ie.current==null||!ct||!ot)return;const{onDragOver:jt}=J.current,cn=vt.get(Sn),It=cn&&cn.rect.current?{id:cn.id,rect:cn.rect.current,data:cn.data,disabled:cn.disabled}:null,mt={active:tt,activatorEvent:ct,collisions:ke,delta:{x:ot.x,y:ot.y},over:It};Ns.unstable_batchedUpdates(()=>{xe(It),jt==null||jt(mt),E({type:"onDragOver",event:mt})})},[Sn]),As(()=>{Re.current={activatorEvent:V,active:B,activeNode:$,collisionRect:nn,collisions:Mn,droppableRects:X,draggableNodes:q,draggingNode:ge,draggingNodeRect:me,droppableContainers:W,over:Et,scrollableAncestors:Pe,scrollAdjustedTranslate:st},se.current={initial:me,translated:nn}},[B,$,Mn,nn,q,ge,me,X,W,Et,Pe,st]),Yz({...re,delta:G,draggingRect:nn,pointerCoordinates:gt,scrollableAncestors:Pe,scrollableAncestorRects:Ye});const wt=m.useMemo(()=>({active:B,activeNode:$,activeNodeRect:ue,activatorEvent:V,collisions:Mn,containerNodeRect:_e,dragOverlay:rt,draggableNodes:q,droppableContainers:W,droppableRects:X,over:Et,measureDroppableContainers:D,scrollableAncestors:Pe,scrollableAncestorRects:Ye,measuringConfiguration:F,measuringScheduled:z,windowRect:je}),[B,$,ue,V,Mn,_e,rt,q,W,X,Et,D,Pe,Ye,F,z,je]),Bn=m.useMemo(()=>({activatorEvent:V,activators:on,active:B,activeNodeRect:ue,ariaDescribedById:{draggable:k},dispatch:C,draggableNodes:q,over:Et,measureDroppableContainers:D}),[V,on,B,ue,C,k,q,Et,D]);return be.createElement(IS.Provider,{value:R},be.createElement(Pf.Provider,{value:Bn},be.createElement(QS.Provider,{value:wt},be.createElement(ZS.Provider,{value:$e},p)),be.createElement(pU,{disabled:(f==null?void 0:f.restoreFocus)===!1})),be.createElement(gz,{...f,hiddenTextDescribedById:k}));function mn(){const tt=(oe==null?void 0:oe.autoScrollEnabled)===!1,ct=typeof h=="object"?h.enabled===!1:h===!1,ke=L&&!tt&&!ct;return typeof h=="object"?{...h,enabled:ke}:{enabled:ke}}}),bU=m.createContext(null),Kw="button",wU="Draggable";function jU(e){let{id:t,data:r,disabled:a=!1,attributes:l}=e;const c=Zc(wU),{activators:d,activatorEvent:f,active:h,activeNodeRect:p,ariaDescribedById:v,draggableNodes:x,over:b}=m.useContext(Pf),{role:w=Kw,roleDescription:j="draggable",tabIndex:N=0}=l??{},_=(h==null?void 0:h.id)===t,C=m.useContext(_?ZS:bU),[E,R]=Fd(),[M,T]=Fd(),L=aU(d,t),H=_c(r);As(()=>(x.set(t,{id:t,key:c,node:E,activatorNode:M,data:H}),()=>{const G=x.get(t);G&&G.key===c&&x.delete(t)}),[x,t]);const q=m.useMemo(()=>({role:w,tabIndex:N,"aria-disabled":a,"aria-pressed":_&&w===Kw?!0:void 0,"aria-roledescription":j,"aria-describedby":v.draggable}),[a,w,N,_,j,v.draggable]);return{active:h,activatorEvent:f,activeNodeRect:p,attributes:q,isDragging:_,listeners:a?void 0:L,node:E,over:b,setNodeRef:R,setActivatorNodeRef:T,transform:C}}function _U(){return m.useContext(QS)}const NU="Droppable",SU={timeout:25};function EU(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:l}=e;const c=Zc(NU),{active:d,dispatch:f,over:h,measureDroppableContainers:p}=m.useContext(Pf),v=m.useRef({disabled:r}),x=m.useRef(!1),b=m.useRef(null),w=m.useRef(null),{disabled:j,updateMeasurementsFor:N,timeout:_}={...SU,...l},C=_c(N??a),E=m.useCallback(()=>{if(!x.current){x.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{p(Array.isArray(C.current)?C.current:[C.current]),w.current=null},_)},[_]),R=Of({callback:E,disabled:j||!d}),M=m.useCallback((q,G)=>{R&&(G&&(R.unobserve(G),x.current=!1),q&&R.observe(q))},[R]),[T,L]=Fd(M),H=_c(t);return m.useEffect(()=>{!R||!T.current||(R.disconnect(),x.current=!1,R.observe(T.current))},[T,R]),m.useEffect(()=>(f({type:Tn.RegisterDroppable,element:{id:a,key:c,disabled:r,node:T,rect:b,data:H}}),()=>f({type:Tn.UnregisterDroppable,key:c,id:a})),[a]),m.useEffect(()=>{r!==v.current.disabled&&(f({type:Tn.SetDroppableDisabled,id:a,key:c,disabled:r}),v.current.disabled=r)},[a,c,r,f]),{active:d,rect:b,isOver:(h==null?void 0:h.id)===a,node:T,over:h,setNodeRef:L}}function Av(e,t,r){const a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function CU(e,t){return e.reduce((r,a,l)=>{const c=t.get(a);return c&&(r[l]=c),r},Array(e.length))}function bd(e){return e!==null&&e>=0}function RU(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function TU(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const wd={scaleX:1,scaleY:1},MU=e=>{var t;let{rects:r,activeNodeRect:a,activeIndex:l,overIndex:c,index:d}=e;const f=(t=r[l])!=null?t:a;if(!f)return null;const h=AU(r,d,l);if(d===l){const p=r[c];return p?{x:l<c?p.left+p.width-(f.left+f.width):p.left-f.left,y:0,...wd}:null}return d>l&&d<=c?{x:-f.width-h,y:0,...wd}:d<l&&d>=c?{x:f.width+h,y:0,...wd}:{x:0,y:0,...wd}};function AU(e,t,r){const a=e[t],l=e[t-1],c=e[t+1];return!a||!l&&!c?0:r<t?l?a.left-(l.left+l.width):c.left-(a.left+a.width):c?c.left-(a.left+a.width):a.left-(l.left+l.width)}const JS=e=>{let{rects:t,activeIndex:r,overIndex:a,index:l}=e;const c=Av(t,a,r),d=t[l],f=c[l];return!f||!d?null:{x:f.left-d.left,y:f.top-d.top,scaleX:f.width/d.width,scaleY:f.height/d.height}},eE="Sortable",tE=be.createContext({activeIndex:-1,containerId:eE,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:JS,disabled:{draggable:!1,droppable:!1}});function kU(e){let{children:t,id:r,items:a,strategy:l=JS,disabled:c=!1}=e;const{active:d,dragOverlay:f,droppableRects:h,over:p,measureDroppableContainers:v}=_U(),x=Zc(eE,r),b=f.rect!==null,w=m.useMemo(()=>a.map(L=>typeof L=="object"&&"id"in L?L.id:L),[a]),j=d!=null,N=d?w.indexOf(d.id):-1,_=p?w.indexOf(p.id):-1,C=m.useRef(w),E=!RU(w,C.current),R=_!==-1&&N===-1||E,M=TU(c);As(()=>{E&&j&&v(w)},[E,w,j,v]),m.useEffect(()=>{C.current=w},[w]);const T=m.useMemo(()=>({activeIndex:N,containerId:x,disabled:M,disableTransforms:R,items:w,overIndex:_,useDragOverlay:b,sortedRects:CU(w,h),strategy:l}),[N,x,M.draggable,M.droppable,R,w,_,h,b,l]);return be.createElement(tE.Provider,{value:T},t)}const DU=e=>{let{id:t,items:r,activeIndex:a,overIndex:l}=e;return Av(r,a,l).indexOf(t)},OU=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:l,items:c,newIndex:d,previousItems:f,previousContainerId:h,transition:p}=e;return!p||!a||f!==c&&l===d?!1:r?!0:d!==l&&t===h},PU={duration:200,easing:"ease"},nE="transform",LU=Sc.Transition.toString({property:nE,duration:0,easing:"linear"}),IU={roleDescription:"sortable"};function zU(e){let{disabled:t,index:r,node:a,rect:l}=e;const[c,d]=m.useState(null),f=m.useRef(r);return As(()=>{if(!t&&r!==f.current&&a.current){const h=l.current;if(h){const p=ro(a.current,{ignoreTransform:!0}),v={x:h.left-p.left,y:h.top-p.top,scaleX:h.width/p.width,scaleY:h.height/p.height};(v.x||v.y)&&d(v)}}r!==f.current&&(f.current=r)},[t,r,a,l]),m.useEffect(()=>{c&&d(null)},[c]),c}function UU(e){let{animateLayoutChanges:t=OU,attributes:r,disabled:a,data:l,getNewIndex:c=DU,id:d,strategy:f,resizeObserverConfig:h,transition:p=PU}=e;const{items:v,containerId:x,activeIndex:b,disabled:w,disableTransforms:j,sortedRects:N,overIndex:_,useDragOverlay:C,strategy:E}=m.useContext(tE),R=$U(a,w),M=v.indexOf(d),T=m.useMemo(()=>({sortable:{containerId:x,index:M,items:v},...l}),[x,l,M,v]),L=m.useMemo(()=>v.slice(v.indexOf(d)),[v,d]),{rect:H,node:q,isOver:G,setNodeRef:W}=EU({id:d,data:T,disabled:R.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...h}}),{active:ce,activatorEvent:se,activeNodeRect:B,attributes:ie,setNodeRef:oe,listeners:O,isDragging:V,over:U,setActivatorNodeRef:J,transform:k}=jU({id:d,data:T,attributes:{...IU,...r},disabled:R.draggable}),P=rz(W,oe),F=!!ce,X=F&&!j&&bd(b)&&bd(_),D=!C&&V,z=D&&X?k:null,K=X?z??(f??E)({rects:N,activeNodeRect:B,activeIndex:b,overIndex:_,index:M}):null,re=bd(b)&&bd(_)?c({id:d,items:v,activeIndex:b,overIndex:_}):M,pe=ce==null?void 0:ce.id,ue=m.useRef({activeId:pe,items:v,newIndex:re,containerId:x}),_e=v!==ue.current.items,Re=t({active:ce,containerId:x,isDragging:V,isSorting:F,id:d,index:M,items:v,newIndex:ue.current.newIndex,previousItems:ue.current.items,previousContainerId:ue.current.containerId,transition:p,wasDragging:ue.current.activeId!=null}),lt=zU({disabled:!Re,index:M,node:q,rect:H});return m.useEffect(()=>{F&&ue.current.newIndex!==re&&(ue.current.newIndex=re),x!==ue.current.containerId&&(ue.current.containerId=x),v!==ue.current.items&&(ue.current.items=v)},[F,re,x,v]),m.useEffect(()=>{if(pe===ue.current.activeId)return;if(pe!=null&&ue.current.activeId==null){ue.current.activeId=pe;return}const ge=setTimeout(()=>{ue.current.activeId=pe},50);return()=>clearTimeout(ge)},[pe]),{active:ce,activeIndex:b,attributes:ie,data:T,rect:H,index:M,newIndex:re,items:v,isOver:G,isSorting:F,isDragging:V,listeners:O,node:q,overIndex:_,over:U,setNodeRef:P,setActivatorNodeRef:J,setDroppableNodeRef:W,setDraggableNodeRef:oe,transform:lt??K,transition:rt()};function rt(){if(lt||_e&&ue.current.newIndex===M)return LU;if(!(D&&!Ev(se)||!p)&&(F||Re))return Sc.Transition.toString({...p,property:nE})}}function $U(e,t){var r,a;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(a=e==null?void 0:e.droppable)!=null?a:t.droppable}}function Gd(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const BU=[Rt.Down,Rt.Right,Rt.Up,Rt.Left],HU=(e,t)=>{let{context:{active:r,collisionRect:a,droppableRects:l,droppableContainers:c,over:d,scrollableAncestors:f}}=t;if(BU.includes(e.code)){if(e.preventDefault(),!r||!a)return;const h=[];c.getEnabled().forEach(x=>{if(!x||x!=null&&x.disabled)return;const b=l.get(x.id);if(b)switch(e.code){case Rt.Down:a.top<b.top&&h.push(x);break;case Rt.Up:a.top>b.top&&h.push(x);break;case Rt.Left:a.left>b.left&&h.push(x);break;case Rt.Right:a.left<b.left&&h.push(x);break}});const p=bz({collisionRect:a,droppableRects:l,droppableContainers:h});let v=$S(p,"id");if(v===(d==null?void 0:d.id)&&p.length>1&&(v=p[1].id),v!=null){const x=c.get(r.id),b=c.get(v),w=b?l.get(b.id):null,j=b==null?void 0:b.node.current;if(j&&w&&x&&b){const _=Df(j).some((L,H)=>f[H]!==L),C=rE(x,b),E=qU(x,b),R=_||!C?{x:0,y:0}:{x:E?a.width-w.width:0,y:E?a.height-w.height:0},M={x:w.left,y:w.top};return R.x&&R.y?M:Nc(M,R)}}}};function rE(e,t){return!Gd(e)||!Gd(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function qU(e,t){return!Gd(e)||!Gd(t)||!rE(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function FU(e){const t=new Date(e);return{day:t.getDate().toString().padStart(2,"0"),month:(t.getMonth()+1).toString().padStart(2,"0"),year:t.getFullYear().toString()}}function so({date:e}){const[t,r]=m.useState(!1),[a,l]=m.useState(FU(e)),c=m.useRef(null);let d;const f=()=>r(!0),h=w=>{const{name:j,value:N}=w.target;l(_=>({..._,[j]:N.replace(/\D/g,"")}))},p=w=>{w.key==="Enter"&&r(!1)},v=()=>{d=setTimeout(()=>r(!1),0)},x=()=>{d&&clearTimeout(d)},b=`${a.year}-${a.month}-${a.day}`;return s.jsxs("div",{className:"flex items-center justify-between  font-bold",children:[s.jsxs("p",{children:["Bamako, le"," ",t?s.jsxs("span",{ref:c,tabIndex:-1,onBlur:v,onFocus:x,children:[s.jsx("input",{type:"text",name:"day",value:a.day,onChange:h,onKeyDown:p,maxLength:2,size:2,className:"border-b border-gray-400 focus:outline-none bg-transparent w-6 text-center mx-0.5",autoFocus:!0}),"/",s.jsx("input",{type:"text",name:"month",value:a.month,onChange:h,onKeyDown:p,maxLength:2,size:2,className:"border-b border-gray-400 focus:outline-none bg-transparent w-6 text-center mx-0.5"}),"/",s.jsx("input",{type:"text",name:"year",value:a.year,onChange:h,onKeyDown:p,maxLength:4,size:4,className:"border-b border-gray-400 focus:outline-none bg-transparent w-10 text-center mx-0.5"})]}):s.jsx("span",{onClick:f,style:{cursor:"pointer"},title:"Click to edit date",children:Je(new Date(b),"dd/MM/yyyy")})]}),s.jsx("p",{children:"Le Biologiste"})]})}const VU=[{id:"template1",component:rr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],YU="template1",GU=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},WU=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},XU=()=>{const{resultId:e}=yr(),t=or(),[r,a]=m.useState(null),[l,c]=m.useState(null),[d,f]=m.useState(null),[h,p]=m.useState([]),[v,x]=m.useState(!0),[b,w]=m.useState(!1),[j,N]=m.useState(null),[_,C]=m.useState(null),[E,R]=m.useState(null),[M,T]=m.useState(!0),L=m.useRef(null),H=vz(zw(Mv),zw(Rv,{coordinateGetter:HU})),[q,G]=m.useState({}),[W,ce]=m.useState({}),[se,B]=m.useState(""),[ie,oe]=m.useState(!1),[O,V]=m.useState(!1),[U,J]=m.useState(""),[k,P]=m.useState(""),[F,X]=m.useState(!1),[D,z]=m.useState(null),[$,K]=m.useState([]);m.useEffect(()=>{(async()=>{const{data:Te,error:$e}=await ne.from("skip_range_check").select("value, type");!$e&&Te&&K(Te)})()},[]);const[re,pe]=m.useState(5),[ue,_e]=m.useState(40),[Re,lt]=m.useState(15),[rt,ge]=m.useState(10),[me,De]=m.useState(35);m.useEffect(()=>{async function xe(){const{data:Te,error:$e}=await ne.from("result_column_widths").select("*").order("updated_at",{ascending:!1}).limit(1).single();Te&&(_e(Te.param_width),lt(Te.value_width),ge(Te.unit_width),De(Te.ref_width))}xe()},[]);const[ye,je]=m.useState([]);m.useEffect(()=>{h.length>0&&je(xe=>{if(xe.length===0)return h.map($e=>$e.category.id);const Te=new Set(xe);return h.forEach($e=>Te.add($e.category.id)),Array.from(Te)})},[h]);const Pe=xe=>{je(Te=>Te.includes(xe)?Te.filter($e=>$e!==xe):[...Te,xe])},Ye=m.useMemo(()=>{var Te;const xe=(E==null?void 0:E.selected_template)||YU;return((Te=VU.find($e=>$e.id===xe))==null?void 0:Te.component)||rr},[E]),qe=m.useMemo(()=>({logoUrl:(E==null?void 0:E.logo_url)||null,labName:E==null?void 0:E.lab_name,addressLine1:E==null?void 0:E.address_line1,addressLine2:E==null?void 0:E.address_line2,cityPostalCode:E==null?void 0:E.city_postal_code,phone:E==null?void 0:E.phone,email:E==null?void 0:E.email,website:E==null?void 0:E.website}),[E]),gt=m.useCallback(async()=>{if(!e){N("ID du résultat manquant."),x(!1);return}x(!0),N(null),C(null),a(null),c(null),f(null),p([]),R(null);try{const{data:xe,error:Te}=await ne.from("patient_result").select("*").eq("id",e).single();if(Te)throw Te;if(!xe)throw new Error("Résultat non trouvé.");a(xe);const[$e,et,Ge]=await Promise.all([ne.from("patient").select("*").eq("id",xe.patient_id).single(),ne.from("doctor").select("*").eq("id",xe.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);$e.error&&console.warn("Erreur chargement patient:",$e.error.message),et.error&&console.warn("Erreur chargement médecin:",et.error.message),c($e.data),f(et.data),Ge.error&&console.warn("Erreur chargement config en-tête:",Ge.error.message),R(Ge.data),T(!1);const{data:Ft,error:on}=await ne.from("result_value").select(`
                    value,
                    test_parameter: test_parameter_id (
                        *,
                        test_type: test_type_id (
                            *,
                            category: category_id (id, name)
                        )
                    )
                `).eq("patient_result_id",e);if(on)throw on;const wt=new Map;(Ft||[]).forEach(mn=>{const tt=mn.test_parameter;if(tt&&tt.test_type&&tt.test_type.category){const ct=tt.test_type.category.id,ke=tt.test_type.category.name,vt=tt.test_type.id,ot=tt.test_type.name;wt.has(ct)||wt.set(ct,{category:{...tt.test_type.category,created_at:"",updated_at:""},testTypes:[]});const jt=wt.get(ct);let cn=jt.testTypes.find(It=>It.testType.id===vt);cn||(cn={testType:{...tt.test_type,category_id:ct,category:null},parameters:[]},jt.testTypes.push(cn)),cn.parameters.push({...tt,resultValue:mn.value,test_type:null})}else console.warn("Données de paramètre/type/catégorie manquantes pour une valeur:",mn)}),wt.forEach(mn=>{mn.testTypes.forEach(tt=>{tt.parameters.sort((ct,ke)=>ct.order!==ke.order?ct.order-ke.order:ct.name.localeCompare(ke.name))}),mn.testTypes.sort((tt,ct)=>tt.testType.name.localeCompare(ct.testType.name))});const Bn=Array.from(wt.values()).sort((mn,tt)=>mn.category.name.localeCompare(tt.category.name));p(Bn)}catch(xe){console.error("Erreur chargement détails du résultat:",xe),N(xe.message||"Une erreur est survenue lors du chargement du résultat.")}finally{x(!1)}},[e]);m.useEffect(()=>{gt()},[gt]),m.useEffect(()=>{r!=null&&r.description&&B(r.description)},[r]),m.useEffect(()=>{J((r==null?void 0:r.normal_price)!=null?String(r.normal_price):""),P((r==null?void 0:r.insurance_price)!=null?String(r.insurance_price):"")},[r]);const Mt=m.useCallback(async xe=>{if(e){oe(!0);try{const{error:Te}=await ne.from("patient_result").update({description:xe}).eq("id",e);if(Te)throw Te}catch(Te){console.error("Error saving description:",Te)}finally{oe(!1)}}},[e]);m.useEffect(()=>{const xe=setTimeout(()=>{se!==(r==null?void 0:r.description)&&Mt(se)},1e3);return()=>clearTimeout(xe)},[se,r==null?void 0:r.description,Mt]);const Qt=m.useCallback(async()=>{X(!0),z(null);try{const xe=U!==""?Number(U):null,Te=k!==""?Number(k):null;if(U!==""&&isNaN(xe)||k!==""&&isNaN(Te)){z("Les prix doivent être des nombres valides."),X(!1);return}const{error:$e,data:et}=await ne.from("patient_result").update({normal_price:xe,insurance_price:Te}).eq("id",r.id).select().single();if($e)throw $e;a(Ge=>Ge&&{...Ge,normal_price:xe,insurance_price:Te}),V(!1)}catch(xe){z(xe.message||"Erreur lors de la sauvegarde des prix.")}finally{X(!1)}},[r,U,k]),Be=async xe=>{if(!(!r||xe===r.status)){w(!0),C(null);try{const{data:Te,error:$e}=await ne.from("patient_result").update({status:xe}).eq("id",r.id).select().single();if($e)throw $e;a(Te||(et=>et?{...et,status:xe}:null))}catch(Te){console.error("Erreur mise à jour statut:",Te),C(Te.message||"Impossible de mettre à jour le statut.")}finally{w(!1)}}},st=()=>{window.print()},nn=xe=>{const{active:Te,over:$e}=xe;$e&&Te.id!==$e.id&&p(et=>{const Ge=et.findIndex(on=>on.category.id===Te.id),Ft=et.findIndex(on=>on.category.id===$e.id);return Ge===-1||Ft===-1?et:Av(et,Ge,Ft)})},Mn=(xe,Te)=>{G($e=>({...$e,[xe]:Te}))},Sn=xe=>{ce(Te=>{const $e=Te[xe],et={...Te};let Ge="indeterminate";for(const Ft of h){for(const on of Ft.testTypes){const wt=on.parameters.find(Bn=>Bn.id===xe);if(wt){Ge=Lw(wt.resultValue,wt.reference_range,Ft.category.name,on.testType.name,$.map(({value:Bn})=>Bn));break}}if(Ge!=="indeterminate")break}return $e===void 0?et[xe]="off":$e==="off"?et[xe]="on":$e==="on"?et[xe]="warn":delete et[xe],et})},Et=(xe,Te,$e,et)=>{const Ge=xe;return s.jsxs("div",{className:Ce("flex items-start space-x-3",et),children:[s.jsx(Ge,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:Te}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:$e||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})};return v||M?s.jsxs("div",{className:"space-y-6",children:[s.jsx(Y,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-20 w-full"})})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-20 w-full"})})]})]}):j?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(it,{to:r!=null&&r.patient_id?`/patients/${r.patient_id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsxs(qt,{children:[j," ",s.jsx(te,{variant:"link",onClick:gt,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):r?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(it,{to:l?`/patients/${l.id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour ",l?`à ${l.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(is,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(it,{to:`/results/${e}/edit`,children:s.jsxs(te,{variant:"secondary",size:"sm",children:[s.jsx(Xr,{className:"mr-2 h-4 w-4"})," Modifier"]})}),s.jsxs(te,{variant:"outline",size:"sm",onClick:st,disabled:v,children:[s.jsx(vf,{className:"mr-2 h-4 w-4"})," Imprimer"]}),s.jsxs(te,{variant:"outline",size:"sm",disabled:!0,children:[s.jsx(SP,{className:"mr-2 h-4 w-4"})," Télécharger"]})]})]}),s.jsxs("div",{ref:L,className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[E?s.jsx("div",{className:"mb-6 print:mb-4",children:s.jsx(Ye,{data:qe,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Bt,{variant:"default",className:"mb-6 print:hidden",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"En-tête Manquant"}),s.jsxs(qt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(it,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Wr,{className:"my-4 print:hidden"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs(Se,{className:"overflow-hidden print:shadow-none",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Et(We,"NOM PRENOM",l==null?void 0:l.full_name),Et(We,"IDENTIFIANT Unique",l==null?void 0:l.patient_unique_id),Et(Kt,"Date Naissance",l!=null&&l.date_of_birth?Je(Dt(l.date_of_birth),"P",{locale:Tt}):null),s.jsx("div",{className:"hidden print:block",children:Et(Kt,"Date Résultat",r.result_date?Je(Dt(r.result_date),"Pp",{locale:Tt}):null)})]})]}),s.jsxs(Se,{className:"overflow-hidden print:shadow-none _print:border-none",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Et(Gt,"NOM PRENOM",d==null?void 0:d.full_name),Et(lr,"Téléphone",d==null?void 0:d.phone),Et(We,"Provenance",d==null?void 0:d.hospital)]})]}),s.jsxs(Se,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Et(Kt,"Date Résultat",r.result_date?Je(Dt(r.result_date),"Pp",{locale:Tt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),O?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:U,onChange:xe=>J(xe.target.value),disabled:F}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:U,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),O?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:k,onChange:xe=>P(xe.target.value),disabled:F}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:k,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:O?s.jsxs(s.Fragment,{children:[s.jsxs(te,{size:"xs",variant:"secondary",onClick:Qt,disabled:F,children:[F?s.jsx(Yt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(te,{size:"xs",variant:"outline",onClick:()=>V(!1),disabled:F,children:"Annuler"})]}):s.jsx(te,{size:"xs",variant:"outline",onClick:()=>V(!0),children:"Modifier Prix"})}),D&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:D})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(We,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Jn,{value:r.status??"",onValueChange:xe=>Be(xe),disabled:b,children:[s.jsxs(tr,{id:"resultStatus",className:"h-9 flex-1",children:[" ",s.jsx(er,{placeholder:"Changer statut..."})," "]}),s.jsxs(nr,{children:[s.jsx(bt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i3,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(bt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(bt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Di,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),b&&s.jsx(Yt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),_&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:_}),s.jsx(os,{variant:GU(r.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:WU(r.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 hidden print:grid",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Gt,{className:"h-4 w-4"})," Patient"]}),Et(We,"NOM PRENOM",l==null?void 0:l.full_name),Et(We,"ID Unique",l==null?void 0:l.patient_unique_id),Et(Kt,"Date de Naissance",l!=null&&l.date_of_birth?Je(Dt(l.date_of_birth),"P",{locale:Tt}):null)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Zn,{className:"h-4 w-4"})," Médecin"]}),Et(Gt,"NOM PRENOM",d==null?void 0:d.full_name),Et(lr,"Téléphone",d==null?void 0:d.phone),Et(We,"Hôpital",d==null?void 0:d.hospital)]})]}),h.length>1&&s.jsxs("div",{className:"my-6 print:hidden",children:[s.jsx(Le,{className:"text-sm font-medium text-muted-foreground mb-2 block",children:"Réorganiser les Catégories (Glisser-Déposer) :"}),s.jsx(yU,{sensors:H,collisionDetection:yz,onDragEnd:nn,children:s.jsx(kU,{items:h.map(xe=>xe.category.id),strategy:MU,children:s.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(xe=>s.jsx(KU,{category:xe.category},xe.category.id))})})}),s.jsx(Wr,{className:"mt-6"})]}),s.jsxs("div",{className:"flex gap-4 mb-2 print:hidden items-end",children:[s.jsxs("div",{className:"flex flex-col text-xs",children:[s.jsx("label",{htmlFor:"paramWidth",children:"Paramètre (%)"}),s.jsx("input",{id:"paramWidth",type:"number",min:5,max:80,value:ue,onChange:xe=>_e(Number(xe.target.value)),className:"border px-2 py-1 w-16 rounded"})]}),s.jsxs("div",{className:"flex flex-col text-xs",children:[s.jsx("label",{htmlFor:"valueWidth",children:"Valeur (%)"}),s.jsx("input",{id:"valueWidth",type:"number",min:5,max:80,value:Re,onChange:xe=>lt(Number(xe.target.value)),className:"border px-2 py-1 w-16 rounded"})]}),s.jsxs("div",{className:"flex flex-col text-xs",children:[s.jsx("label",{htmlFor:"unitWidth",children:"Unité (%)"}),s.jsx("input",{id:"unitWidth",type:"number",min:5,max:80,value:rt,onChange:xe=>ge(Number(xe.target.value)),className:"border px-2 py-1 w-16 rounded"})]}),s.jsxs("div",{className:"flex flex-col text-xs",children:[s.jsx("label",{htmlFor:"refWidth",children:"Réf. (%)"}),s.jsx("input",{id:"refWidth",type:"number",min:5,max:80,value:me,onChange:xe=>De(Number(xe.target.value)),className:"border px-2 py-1 w-16 rounded"})]})]}),s.jsx("div",{className:"space-y-8 print:space-y-4",children:h.map(xe=>{const Te=q[xe.category.id]??!1,$e=ye.includes(xe.category.id);return s.jsxs("div",{className:Ce(Te&&"print-force-break-before",!$e&&"print:hidden"),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3 print:mb-2",children:[" ",s.jsxs("h2",{className:"text-xl font-bold uppercase mx-auto tracking-tight  print:text-center",children:[" ",xe.category.name]}),s.jsx(Wr,{className:"flex-1 print:hidden"}),s.jsxs("div",{className:"flex items-center space-x-2 ml-auto print:hidden pl-4",children:[s.jsx(ea,{id:`break-${xe.category.id}`,checked:Te,onCheckedChange:et=>{const Ge=et===!0;Mn(xe.category.id,Ge)},"aria-label":"Forcer saut de page avant"}),s.jsxs(Le,{htmlFor:`break-${xe.category.id}`,className:"text-xs font-medium text-muted-foreground cursor-pointer flex items-center gap-1",title:"Forcer un saut de page avant cette catégorie à l'impression",children:[s.jsx(iP,{className:"h-3.5 w-3.5"})," Saut Page Avant"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-auto print:hidden pl-4",children:[s.jsx(ea,{id:`print-${xe.category.id}`,checked:ye.includes(xe.category.id),onCheckedChange:et=>{Pe(xe.category.id)},"aria-label":"Inclure dans l'impression"}),s.jsx(Le,{htmlFor:`print-${xe.category.id}`,className:"text-xs font-medium text-muted-foreground cursor-pointer flex items-center gap-1",title:"Inclure cette catégorie dans l'impression",children:"Imprimer"})]})]}),s.jsxs(aa,{className:"print:text-xs",children:[s.jsx(ia,{className:"bg-muted/10 print:bg-gray-100",children:s.jsxs(Xt,{children:[s.jsx(ht,{style:{width:`${ue}%`},className:"pl-4 print:pl-1",children:"Paramètre"}),s.jsx(ht,{style:{width:`${Re}%`},className:"pl-2 print:pl-1",children:"Valeur"}),s.jsx(ht,{style:{width:`${rt}%`},className:"pl-2 print:pl-1",children:"Unité"}),s.jsx(ht,{style:{width:`${me}%`},className:"pr-4 print:pr-1",children:"Réf."})]})}),s.jsxs(la,{children:[xe.testTypes.length===0&&s.jsx(Xt,{children:s.jsx(Ke,{colSpan:4,className:"h-10 text-center text-xs italic text-muted-foreground",children:"(Aucun type de test dans cette catégorie)"})}),xe.testTypes.map(et=>s.jsxs(be.Fragment,{children:[et.parameters.length>1&&s.jsx(Xt,{className:"bg-muted/50 print:bg-gray-50 hover:bg-muted/60 print:break-inside-avoid",children:s.jsx(Ke,{colSpan:4,className:"py-1.5 px-4 print:px-1 font-semibold text-sm print:text-xs text-foreground",children:et.testType.name})}),et.parameters.length>0?s.jsxs(s.Fragment,{children:[et.parameters.map(Ge=>{var mn,tt;const Ft=Lw(Ge.resultValue,Ge.reference_range,xe.category.name,et.testType.name,$.map(({value:ct})=>ct)),on=W[Ge.id];let wt="",Bn="";return on==="on"?(wt="result-out-of-range",Bn="font-bold text-red-700 dark:text-red-400 print:text-red-700"):on==="off"?wt="":on==="warn"?wt="result-indeterminate-range":Ft==="out-of-range"?(wt="result-out-of-range",Bn="font-bold text-red-700 dark:text-red-400 print:text-red-700"):Ft==="indeterminate"?wt="result-indeterminate-range":wt="",s.jsxs(Xt,{className:Ce("print:even:bg-white print:break-inside-avoid  "),children:[s.jsx(Ke,{style:{width:`${ue}%`},className:"font-medium pl-6 print:pl-2",dangerouslySetInnerHTML:{__html:Ge.name}}),s.jsx(Ke,{style:{width:`${Re}%`},className:Ce("pl-2 print:pl-1 cursor-pointer hover:bg-muted/50","cursor-pointer hover:bg-black/5 dark:hover:bg-white/5",Bn,wt),onClick:()=>Sn(Ge.id),title:"Cliquer pour changer le surlignage",children:Ge.resultValue}),s.jsx(Ke,{style:{width:`${rt}%`},className:"pl-2 print:pl-1",dangerouslySetInnerHTML:{__html:Ge.unit||"-"}}),s.jsxs(Ke,{style:{width:`${me}%`},className:"text-muted-foreground pr-4 print:pr-1 !whitespace-pre-line",children:[!Ge.reference_range&&"-",Ge.reference_range==="NEGATIF"&&"-",((mn=Ge.reference_range)==null?void 0:mn.includes("style"))&&s.jsx("div",{dangerouslySetInnerHTML:{__html:Ge.reference_range}}),Ge.reference_range!=="NEGATIF"&&!((tt=Ge.reference_range)!=null&&tt.includes("style"))&&Ge.reference_range&&Ge.reference_range.split(";").map((ct,ke)=>s.jsx("div",{children:ct},ke))]})]},Ge.id)}),et.testType.description&&s.jsx(Xt,{children:s.jsx(Ke,{colSpan:4,className:"py-2 px-6 print:px-2 text-sm print:text-xs text-muted-foreground",children:s.jsx("div",{dangerouslySetInnerHTML:{__html:et.testType.description}})})})]}):s.jsx(s.Fragment,{})]},et.testType.id)),xe.testTypes.length>0&&xe.testTypes.every(et=>et.parameters.length===0)&&s.jsx(Xt,{children:s.jsx(Ke,{colSpan:4,className:"h-10 text-center text-xs italic text-muted-foreground",children:"(Aucun paramètre défini pour les tests de cette catégorie)"})})]})]})]},xe.category.id)})}),s.jsxs(Se,{className:"mt-8 print:hidden",children:[s.jsx(Me,{className:"pb-2",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(is,{className:"h-4 w-4"}),"Description du résultat"]})}),s.jsx(Ee,{children:s.jsxs("div",{className:"relative",children:[s.jsx("textarea",{value:se,onChange:xe=>B(xe.target.value),className:"w-full min-h-[100px] p-2 border rounded-md resize-y",placeholder:"Entrez une description pour ce résultat..."}),ie&&s.jsx("div",{className:"absolute right-2 top-2",children:s.jsx(Yt,{className:"h-4 w-4 animate-spin text-muted-foreground"})})]})})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-2 print:hidden",children:[s.jsx("label",{htmlFor:"marginTopControl",className:"text-xs",children:"Décalage vertical (mt):"}),s.jsx("input",{id:"marginTopControl",type:"number",min:0,max:20,value:re,onChange:xe=>pe(Number(xe.target.value)),className:"border px-2 py-1 text-xs w-16 rounded"})]}),s.jsxs("div",{className:"text-sm text-black print:block print:mt-4",style:{marginTop:`${re*.25}rem`},children:[s.jsx("div",{className:"font-bold",children:se.split(`
`).map((xe,Te)=>s.jsx("div",{children:xe},Te))}),s.jsx("div",{className:"mt-4",children:s.jsx(so,{date:r.result_date})}),s.jsxs("div",{className:"mt-[200px] flex flex-wrap flex-row items-center space-x-2 print:hidden",children:[s.jsx("div",{className:"",children:s.jsx(te,{onClick:()=>t(`/protidogramme/${e}`),children:"Protidogramme"})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(te,{onClick:()=>t(`/atb/${e}`),children:"ATB"})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(te,{onClick:()=>t(`/ecb/${e}`),children:"ECB"})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(te,{onClick:()=>t(`/vhb/${e}`),children:"VHB"})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(te,{onClick:()=>t(`/vih/${e}`),children:"VIH"})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(te,{onClick:()=>t(`/anapath/${e}`),children:"Anapath"})})]})]})]})," "]}):s.jsx("div",{children:"Résultat non trouvé."})},KU=({category:e})=>{const{attributes:t,listeners:r,setNodeRef:a,transform:l,transition:c,isDragging:d}=UU({id:e.id}),f={transform:Sc.Transform.toString(l),transition:c,opacity:d?.7:1,zIndex:d?10:void 0};return s.jsx("div",{ref:a,style:f,...t,children:s.jsxs(te,{variant:"secondary",size:"sm",className:"cursor-grab touch-none flex items-center gap-1.5",children:[s.jsx("span",{...r,"aria-label":`Réorganiser ${e.name}`,children:s.jsx(TP,{className:"h-4 w-4 text-muted-foreground"})}),e.name]})})},Qw=()=>{const{patientId:e,resultId:t}=yr(),r=or(),a=!!t,[l,c]=m.useState(null),[d,f]=m.useState(!1),[h,p]=m.useState(""),[v,x]=m.useState(e||null),[b,w]=m.useState([]),[j,N]=m.useState([]),[_,C]=m.useState([]),[E,R]=m.useState(void 0),[M,T]=m.useState(void 0),[L,H]=m.useState(new Date),[q,G]=m.useState(new Map),[W,ce]=m.useState(""),[se,B]=m.useState(!0),[ie,oe]=m.useState(!1),[O,V]=m.useState(null),[U,J]=m.useState(!1),[k,P]=m.useState([]),[F,X]=m.useState(""),[D,z]=m.useState(""),$=qc(W,250),K=m.useCallback(async()=>{if(t){B(!0),V(null);try{const[ge,me,De,ye]=await Promise.all([ne.from("patient_result").select("*").eq("id",t).single(),ne.from("result_value").select("id, value, test_parameter_id, test_parameter:test_parameter_id(test_type_id, test_type:test_type_id(id, name))").eq("patient_result_id",t),ne.from("doctor").select("id, full_name").order("full_name"),ne.from("test_type").select("id, name, category_id").order("name")]);if(ge.error)throw ge.error;if(!ge.data)throw new Error("Résultat non trouvé.");const je=ge.data;if(c(ge.data.patient),T(ge.data.doctor_id),H(ge.data.result_date?new Date(ge.data.result_date):void 0),x(ge.data.patient_id),P(me.data||[]),X(ge.data.normal_price??""),z(ge.data.insurance_price??""),f(!!ge.data.isFree),p(ge.data.notes??""),De.error)throw De.error;if(ye.error)throw ye.error;if(w(De.data||[]),N(ye.data||[]),me.error)throw me.error;const Pe=me.data||[],Ye=new Map,qe=[...new Set(Pe.map(Qt=>{var Be,st;return(st=(Be=Qt.test_parameter)==null?void 0:Be.test_type)==null?void 0:st.id}).filter(Boolean))],{data:gt,error:Mt}=await ne.from("test_parameter").select("*, test_type:test_type_id(id, name), order").in("test_type_id",qe);if(Mt)throw Mt;qe.forEach(Qt=>{var Mn,Sn,Et;const Be=Pe.find(xe=>{var Te,$e;return(($e=(Te=xe.test_parameter)==null?void 0:Te.test_type)==null?void 0:$e.id)===Qt}),st=((Sn=(Mn=Be==null?void 0:Be.test_parameter)==null?void 0:Mn.test_type)==null?void 0:Sn.name)||"Type Inconnu",nn=(gt||[]).filter(xe=>xe.test_type_id===Qt);Ye.set(Qt,{id:Qt,name:st,category_id:((Et=nn[0])==null?void 0:Et.test_type_id)||"",created_at:"",updated_at:"",parameters:nn.map(xe=>{const Te=Pe.find($e=>$e.test_parameter_id===xe.id);return{...xe,resultValue:(Te==null?void 0:Te.value)||"",isVisible:!0,originalValueId:(Te==null?void 0:Te.id)||null}}),loadingParams:!1,errorLoadingParams:!1})}),G(Ye)}catch(ge){console.error("Erreur chargement données pour modification:",ge),V(ge.message||"Impossible de charger les données pour la modification.")}finally{B(!1)}}},[t]),re=m.useCallback(async()=>{if(e){B(!0),V(null);try{const[ge,me,De]=await Promise.all([ne.from("patient").select("*").eq("id",e).single(),ne.from("doctor").select("id, full_name").order("full_name"),ne.from("test_type").select("id, name, category_id").order("name")]);if(ge.error)throw ge.error;if(!ge.data)throw new Error("Patient non trouvé pour la création.");if(me.error)throw me.error;if(De.error)throw De.error;c(ge.data),x(e),w(me.data||[]),N(De.data||[]),X(""),z("")}catch(ge){console.error("Erreur chargement données pour création:",ge),V(ge.message||"Impossible de charger les informations nécessaires.")}finally{B(!1)}}},[e]);m.useEffect(()=>{(async()=>{const{data:me,error:De}=await ne.from("category").select("id, name").order("name");if(De){V("Erreur lors du chargement des catégories");return}C(me||[])})()},[]),m.useEffect(()=>{a?K():re()},[a,K,re]);const pe=m.useMemo(()=>{if(E)return j.filter(ge=>ge.category_id===E);{if(!$)return j;const ge=$.toLowerCase();return j.filter(me=>me.name.toLowerCase().includes(ge))}},[j,$,E]),ue=m.useCallback(async(ge,me)=>{const De=j.find(ye=>ye.id===me);if(De)if(ge===!0){G(ye=>{const je=new Map(ye),Pe=je.get(me),Ye={...Pe||De,parameters:(Pe==null?void 0:Pe.parameters)||[],loadingParams:!0,errorLoadingParams:!1};return je.set(me,Ye),je});try{const{data:ye,error:je}=await ne.from("test_parameter").select("*, test_type:test_type_id(id, name), order").eq("test_type_id",me).order("order");if(je)throw je;G(Pe=>{const Ye=new Map(Pe),qe=Ye.get(me);if(qe){const gt=new Map(qe.parameters.map(Be=>[Be.id,Be])),Mt=(ye||[]).map(Be=>{const st=gt.get(Be.id);return{...Be,resultValue:(st==null?void 0:st.resultValue)||"",isVisible:(st==null?void 0:st.isVisible)!==!1,originalValueId:(st==null?void 0:st.originalValueId)||null}}),Qt={...qe,parameters:Mt,loadingParams:!1,errorLoadingParams:!1};return Ye.set(me,Qt),Ye}return Pe})}catch(ye){console.error(`Erreur chargement paramètres pour ${De.name}:`,ye),G(je=>{const Pe=new Map(je),Ye=Pe.get(me);if(Ye){const qe={...Ye,loadingParams:!1,errorLoadingParams:!0};return Pe.set(me,qe),Pe}return je}),V(je=>je?`${je}
Impossible de charger les paramètres pour ${De.name}.`:`Impossible de charger les paramètres pour ${De.name}.`)}}else G(ye=>{const je=new Map(ye);return je.delete(me),je})},[j]),_e=(ge,me,De)=>{G(ye=>{const je=new Map(ye),Pe=je.get(ge);if(Pe){const Ye=Pe.parameters.map(gt=>gt.id===me?{...gt,resultValue:De}:gt),qe={...Pe,parameters:Ye};return je.set(ge,qe),je}return ye})},Re=(ge,me)=>{G(De=>{const ye=new Map(De),je=ye.get(ge);if(je){const Pe=je.parameters.map(qe=>qe.id===me?{...qe,isVisible:!1}:qe),Ye={...je,parameters:Pe};return ye.set(ge,Ye),ye}return De})},lt=async ge=>{if(ge.preventDefault(),V(null),!v){V("Erreur: ID du patient non défini.");return}if(!M){V("Veuillez sélectionner un médecin prescripteur.");return}if(!L){V("Veuillez sélectionner la date du résultat.");return}if(q.size===0&&!a){V("Veuillez sélectionner au moins un type de test.");return}if(F!==""&&isNaN(Number(F))){V("Le prix normal doit être un nombre valide.");return}if(D!==""&&isNaN(Number(D))){V("Le prix assurance doit être un nombre valide.");return}oe(!0);try{const me={patient_id:v,doctor_id:M,result_date:Je(L,"yyyy-MM-dd'T'HH:mm:ssXXX")};F!==""&&(me.normal_price=Number(F)),D!==""&&(me.insurance_price=Number(D)),me.isFree=d,me.notes=h;const{data:De,error:ye}=await(a?ne.from("patient_result").update(me).eq("id",t).select().single():ne.from("patient_result").insert(me).select().single());if(ye)throw ye;const je=De==null?void 0:De.id;if(!je)throw new Error("Erreur lors de l'enregistrement de l'en-tête du résultat (ID manquant).");const Pe=new Map,Ye=new Set;q.forEach(Be=>{Be.parameters.forEach(st=>{st.isVisible!==!1&&(Ye.add(st.id),st.resultValue!==void 0&&st.resultValue.trim()!==""&&Pe.set(st.id,{value:st.resultValue.trim(),test_parameter_id:st.id}))})});const qe=new Map(k.map(Be=>[Be.test_parameter_id,Be])),gt=[],Mt=[],Qt=[];if(k.forEach(Be=>{(!Ye.has(Be.test_parameter_id)||!Pe.has(Be.test_parameter_id))&&gt.push(Be.id)}),Pe.forEach((Be,st)=>{const nn=qe.get(st);nn!=null&&nn.id?Mt.push({id:nn.id,patient_result_id:je,test_parameter_id:Be.test_parameter_id,value:Be.value}):Qt.push({patient_result_id:je,test_parameter_id:Be.test_parameter_id,value:Be.value})}),gt.length>0){const{error:Be}=await ne.from("result_value").delete().in("id",gt);if(Be)throw Be}for(const Be of Mt){const{error:st}=await ne.from("result_value").update({value:Be.value,test_parameter_id:Be.test_parameter_id,patient_result_id:Be.patient_result_id}).eq("id",Be.id);if(st)throw st}if(Qt.length>0){const{error:Be}=await ne.from("result_value").insert(Qt);if(Be)throw Be}r(a?`/results/${je}`:`/patients/${v}`)}catch(me){console.error(`Erreur lors de ${a?"la mise à jour":"la création"} du résultat:`,me),V((me==null?void 0:me.message)||`Une erreur est survenue lors de ${a?"la mise à jour":"l'enregistrement"}.`)}finally{oe(!1)}};if(se)return s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsx(Y,{className:"h-8 w-32"}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/2"})}),s.jsxs(Ee,{className:"space-y-6",children:[s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-20 w-full"})]}),s.jsx(ls,{children:s.jsx(Y,{className:"h-10 w-32"})})]})]});const rt=a?`/results/${t}`:`/patients/${v}`;return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"mb-4",children:s.jsx(it,{to:rt,children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),a?"Retour au Résultat":"Retour au Patient"]})})}),s.jsxs(Se,{className:"shadow-md",children:[s.jsxs(Me,{children:[s.jsxs(yt,{className:"text-xl font-semibold flex items-center gap-2",children:[a?s.jsx(Xr,{className:"h-5 w-5 text-primary"}):s.jsx(Wg,{className:"h-5 w-5 text-primary"}),a?"Modifier le Résultat":"Ajouter un Nouveau Résultat"]}),l&&s.jsxs(gr,{children:["Pour le patient :"," ",s.jsx("span",{className:"font-medium",children:l.full_name})," (ID:"," ",l.patient_unique_id,")"]})]}),s.jsxs("form",{onSubmit:lt,children:[s.jsxs(Ee,{className:"space-y-6",children:[O&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsx(qt,{className:"whitespace-pre-line",children:O})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Le,{htmlFor:"doctor",className:"font-semibold",children:["Médecin Prescripteur"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(Jn,{name:"doctor",value:M,onValueChange:ge=>T(ge),required:!0,disabled:ie||b.length===0,children:[s.jsx(tr,{id:"doctor",className:"h-10",children:s.jsx(er,{placeholder:b.length===0?"Aucun médecin...":"Sélectionner..."})}),s.jsx(nr,{children:b.length>0?b.map(ge=>s.jsx(bt,{value:ge.id,children:ge.full_name},ge.id)):s.jsx(bt,{value:"no-doctors",disabled:!0,children:"Aucun médecin disponible"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Le,{htmlFor:"resultDate",className:"font-semibold",children:["Date du Résultat ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(FN,{open:U,onOpenChange:J,children:[s.jsx(VN,{asChild:!0,children:s.jsxs(te,{variant:"outline",className:Ce("w-full justify-start text-left font-normal h-10",!L&&"text-muted-foreground"),disabled:ie,children:[s.jsx(R_,{className:"mr-2 h-4 w-4"}),L?Je(L,"PPP",{locale:Tt}):s.jsx("span",{children:"Choisir une date"})]})}),s.jsx(YN,{className:"w-auto p-0",children:s.jsx(rS,{mode:"single",selected:L,onSelect:ge=>{H(ge||new Date),J(!1)},initialFocus:!0,locale:Tt,disabled:ge=>ge>new Date})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Le,{htmlFor:"normal_price",className:"font-semibold",children:"Prix Normal"}),s.jsx(Ve,{id:"normal_price",name:"normal_price",type:"number",min:"0",step:"0.01",placeholder:"Prix normal du test (ex: 1000)",value:F,onChange:ge=>X(ge.target.value),disabled:ie})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Le,{htmlFor:"insurance_price",className:"font-semibold",children:"Prix Assurance"}),s.jsx(Ve,{id:"insurance_price",name:"insurance_price",type:"number",min:"0",step:"0.01",placeholder:"Prix avec assurance (ex: 800)",value:D,onChange:ge=>z(ge.target.value),disabled:ie})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx(ea,{id:"isFree",checked:d,onCheckedChange:ge=>f(!!ge),disabled:ie}),s.jsx(Le,{htmlFor:"isFree",className:"font-semibold",children:"Gratuit"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx(Le,{htmlFor:"notes",className:"font-semibold",children:"Notes"}),s.jsx("textarea",{id:"notes",value:h,onChange:ge=>p(ge.target.value),rows:3,className:"w-full border rounded-md p-2 mt-1 focus:outline-none focus:ring focus:border-blue-300",placeholder:"Ajouter des notes ou des commentaires...",disabled:ie})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsx(Le,{htmlFor:"category-filter",children:"Catégorie"}),s.jsxs(Jn,{value:E??"all",onValueChange:ge=>R(ge==="all"?void 0:ge),children:[s.jsx(tr,{id:"category-filter",children:s.jsx(er,{placeholder:"Filtrer par catégorie"})}),s.jsxs(nr,{children:[s.jsx(bt,{value:"all",children:"Toutes les catégories"}),_.map(ge=>s.jsx(bt,{value:ge.id,children:ge.name},ge.id))]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Le,{className:"font-semibold text-base",children:"Types de Tests Inclus"}),s.jsxs("div",{className:"relative",children:[s.jsx($c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ve,{type:"search",placeholder:"Rechercher et ajouter un type de test...",value:W,onChange:ge=>ce(ge.target.value),className:"pl-10 w-full md:w-1/2 h-9",disabled:j.length===0})]}),j.length>0?s.jsx("div",{className:"grid grid-cols-2 _sm:grid-cols-3 _md:grid-cols-4 gap-x-4 gap-y-3 rounded-md border p-4 max-h-80 overflow-y-auto",children:pe.length>0?pe.map(ge=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ea,{id:`test-type-${ge.id}`,checked:q.has(ge.id),onCheckedChange:me=>ue(me,ge.id),disabled:ie}),s.jsx("label",{htmlFor:`test-type-${ge.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:ge.name})]},ge.id)):s.jsx("p",{className:"col-span-full text-sm text-muted-foreground text-center py-4",children:"Aucun type de test ne correspond."})}):s.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Aucun type de test configuré."})]}),q.size>0&&s.jsx(Wr,{}),Array.from(q.values()).map(ge=>s.jsxs("div",{className:"space-y-4 py-4 border-b last:border-b-0",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center justify-between gap-2",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Gg,{className:"h-5 w-5 text-green-600"}),ge.name]}),s.jsx(te,{type:"button",variant:"ghost",size:"sm",className:"h-7 text-xs text-destructive hover:bg-destructive/10",onClick:()=>ue(!1,ge.id),disabled:ie,children:"Retirer ce Test"})]}),ge.loadingParams?s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 pl-7",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Y,{className:"h-5 w-20"}),s.jsx(Y,{className:"h-9 w-full"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Y,{className:"h-5 w-20"}),s.jsx(Y,{className:"h-9 w-full"})]})]}):ge.errorLoadingParams?s.jsxs(Bt,{variant:"destructive",className:"ml-7",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur Paramètres"}),s.jsx(qt,{children:"Impossible de charger les paramètres pour ce test."})]}):ge.parameters.length>0?s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-3 pl-7",children:[ge.parameters.filter(me=>me.isVisible!==!1).sort((me,De)=>(me.order??0)-(De.order??0)).map(me=>s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs(Le,{htmlFor:`param-${me.id}`,className:"text-sm font-medium flex items-center gap-1",children:[s.jsx("span",{dangerouslySetInnerHTML:{__html:me.name}}),me.unit&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",me.unit,")"]})]}),s.jsx(te,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:()=>Re(ge.id,me.id),disabled:ie,"aria-label":`Retirer ${me.name}`,children:s.jsx(xf,{className:"h-4 w-4"})})]}),s.jsx(Ve,{id:`param-${me.id}`,name:`param-${me.id}`,value:me.resultValue||"",onChange:De=>_e(ge.id,me.id,De.target.value),placeholder:`Valeur ${me.reference_range?`(Réf: ${me.reference_range})`:""}`,disabled:ie,className:"h-9"}),me.description&&s.jsx("p",{className:"text-xs text-muted-foreground pt-1",children:me.description})]},me.id)),ge.parameters.every(me=>me.isVisible===!1)&&s.jsx("p",{className:"col-span-full text-sm text-muted-foreground italic",children:"Tous les paramètres pour ce test sont masqués."})]}):s.jsx("p",{className:"text-sm text-muted-foreground italic pl-7",children:"Aucun paramètre défini pour ce type de test."})]},ge.id))]}),s.jsxs(ls,{className:"border-t px-6 py-4 flex justify-between",children:[s.jsx(te,{type:"submit",disabled:ie||se,children:ie?s.jsxs(s.Fragment,{children:[s.jsx(Yt,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Mise à jour...":"Enregistrement..."]}):a?"Mettre à jour le Résultat":"Enregistrer le Résultat"}),s.jsx(it,{to:rt,children:s.jsx(te,{type:"button",variant:"outline",disabled:ie,children:"Annuler"})})]})]})]})]})};function $l({...e}){return s.jsx(Jg,{"data-slot":"dialog",...e})}function QU({...e}){return s.jsx(ev,{"data-slot":"dialog-portal",...e})}function sE({...e}){return s.jsx(Hc,{"data-slot":"dialog-close",...e})}function ZU({className:e,...t}){return s.jsx(tv,{"data-slot":"dialog-overlay",className:Ce("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Bl({className:e,children:t,...r}){return s.jsxs(QU,{"data-slot":"dialog-portal",children:[s.jsx(ZU,{}),s.jsxs(nv,{"data-slot":"dialog-content",className:Ce("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[t,s.jsxs(Hc,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[s.jsx(xf,{}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Hl({className:e,...t}){return s.jsx("div",{"data-slot":"dialog-header",className:Ce("flex flex-col gap-2 text-center sm:text-left",e),...t})}function ql({className:e,...t}){return s.jsx("div",{"data-slot":"dialog-footer",className:Ce("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Fl({className:e,...t}){return s.jsx(J_,{"data-slot":"dialog-title",className:Ce("text-lg leading-none font-semibold",e),...t})}function aE({className:e,...t}){return s.jsx(eN,{"data-slot":"dialog-description",className:Ce("text-muted-foreground text-sm",e),...t})}const JU=()=>{const[e,t]=m.useState([]),[r,a]=m.useState([]),[l,c]=m.useState(!0),[d,f]=m.useState(null),[h,p]=m.useState(""),[v,x]=m.useState("all"),[b,w]=m.useState(!1),[j,N]=m.useState(null),_=qc(h,300),C=m.useCallback(async()=>{c(!0),f(null);try{const[M,T]=await Promise.all([ne.from("test_type").select(`
            id,
            name,
            created_at,
            updated_at,
            category:category_id (id, name)
          `).order("name",{ascending:!0}),ne.from("category").select("*").order("name",{ascending:!0})]);if(M.error)throw M.error;if(t(M.data||[]),T.error)throw T.error;a(T.data||[])}catch(M){console.error("Erreur lors de la récupération des données:",M),f((M==null?void 0:M.message)||"Une erreur est survenue lors du chargement."),t([]),a([])}finally{c(!1)}},[]);m.useEffect(()=>{C()},[C]);const E=m.useMemo(()=>{let M=e;if(v!=="all"&&(M=M.filter(T=>{var L;return((L=T.category)==null?void 0:L.id)===v})),_){const T=_.toLowerCase();M=M.filter(L=>L.name.toLowerCase().includes(T))}return M},[e,v,_]),R=async M=>{c(!0),f(null);try{const{error:T}=await ne.from("test_type").delete().eq("id",M);if(T)throw T;C()}catch(T){f((T==null?void 0:T.message)||"Erreur lors de la suppression.")}finally{c(!1),w(!1),N(null)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(Ud,{className:"h-6 w-6"}),"Gestion des Types de Test"]}),s.jsx(it,{to:"/test-types/new",children:s.jsxs(te,{children:[s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Ajouter un Type de Test"]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 sm:flex-none sm:w-64 space-y-1.5",children:[s.jsx(Le,{htmlFor:"categoryFilter",className:"text-xs font-medium text-muted-foreground",children:"Filtrer par Catégorie"}),s.jsxs(Jn,{value:v,onValueChange:M=>x(M||"all"),disabled:l||r.length===0,children:[s.jsx(tr,{id:"categoryFilter",className:"h-10",children:s.jsx(er,{placeholder:"Toutes les catégories"})}),s.jsxs(nr,{children:[s.jsx(bt,{value:"all",children:"Toutes les catégories"}),r.map(M=>s.jsx(bt,{value:M.id,children:M.name},M.id))]})]})]}),s.jsxs("div",{className:"flex-1 space-y-1.5",children:[s.jsx(Le,{htmlFor:"testTypeSearch",className:"text-xs font-medium text-muted-foreground",children:"Rechercher par Nom"}),s.jsxs("div",{className:"relative",children:[s.jsx($c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ve,{id:"testTypeSearch",type:"search",placeholder:"Nom du type de test...",value:h,onChange:M=>p(M.target.value),className:"pl-10 h-10 w-full",disabled:l})]})]})]}),l&&s.jsxs("div",{className:"border rounded-lg",children:[s.jsx(Y,{className:"h-12 w-full rounded-t-lg"})," ",s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"})]})]}),!l&&d&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur de Chargement"}),s.jsxs(qt,{children:[d," ",s.jsx(te,{variant:"link",onClick:C,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),!l&&!d&&s.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Xt,{children:[s.jsx(ht,{children:"Nom du Type de Test"}),s.jsx(ht,{className:"w-[250px]",children:"Catégorie"}),s.jsx(ht,{className:"text-right w-[150px]",children:"Actions"})]})}),s.jsx(la,{children:E.length>0?E.map(M=>s.jsxs(Xt,{children:[s.jsx(Ke,{className:"font-medium",children:M.name}),s.jsx(Ke,{children:s.jsx("div",{className:"flex items-center gap-2",children:M.category?s.jsxs(s.Fragment,{children:[s.jsx(uc,{className:"h-4 w-4 text-muted-foreground"}),M.category.name]}):s.jsx("span",{className:"italic text-muted-foreground",children:"N/A"})})}),s.jsxs(Ke,{className:"text-right",children:[s.jsx(it,{to:`/test-types/${M.id}/edit`,children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Xr,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Modifier"}),s.jsx("span",{className:"sm:hidden",children:"Éditer"})]})}),s.jsxs(te,{variant:"destructive",size:"sm",className:"ml-2",title:"Supprimer",onClick:()=>{N(M.id),w(!0)},children:[s.jsx(dc,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Supprimer"}),s.jsx("span",{className:"sm:hidden",children:"Del"})]})]})]},M.id)):s.jsx(Xt,{children:s.jsx(Ke,{colSpan:3,className:"h-24 text-center text-muted-foreground",children:h||v!=="all"?"Aucun type de test ne correspond à vos filtres.":s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[s.jsx(pf,{className:"h-8 w-8 text-muted-foreground/50"}),"Aucun type de test défini."]})})})})]})}),s.jsx($l,{open:b,onOpenChange:w,children:s.jsxs(Bl,{children:[s.jsxs(Hl,{children:[s.jsx(Fl,{children:"Confirmer la suppression"}),s.jsx(aE,{children:"Êtes-vous sûr de vouloir supprimer ce type de test ? Cette action est irréversible."})]}),s.jsxs(ql,{children:[s.jsx(sE,{asChild:!0,children:s.jsx(te,{variant:"outline",children:"Annuler"})}),s.jsx(te,{variant:"destructive",onClick:()=>{j&&R(j)},disabled:l,children:"Supprimer"})]})]})})]})},Gn=[];for(let e=0;e<256;++e)Gn.push((e+256).toString(16).slice(1));function e$(e,t=0){return(Gn[e[t+0]]+Gn[e[t+1]]+Gn[e[t+2]]+Gn[e[t+3]]+"-"+Gn[e[t+4]]+Gn[e[t+5]]+"-"+Gn[e[t+6]]+Gn[e[t+7]]+"-"+Gn[e[t+8]]+Gn[e[t+9]]+"-"+Gn[e[t+10]]+Gn[e[t+11]]+Gn[e[t+12]]+Gn[e[t+13]]+Gn[e[t+14]]+Gn[e[t+15]]).toLowerCase()}let jp;const t$=new Uint8Array(16);function n$(){if(!jp){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jp=crypto.getRandomValues.bind(crypto)}return jp(t$)}const r$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Zw={randomUUID:r$};function Jw(e,t,r){var l;if(Zw.randomUUID&&!e)return Zw.randomUUID();e=e||{};const a=e.random??((l=e.rng)==null?void 0:l.call(e))??n$();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,e$(a)}function Cc({className:e,...t}){return s.jsx("textarea",{"data-slot":"textarea",className:Ce("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const ej=()=>{const{testTypeId:e}=yr(),t=or(),r=!!e,[a,l]=m.useState(""),[c,d]=m.useState(""),[f,h]=m.useState(void 0),[p,v]=m.useState([]),[x,b]=m.useState([]),[w,j]=m.useState(null),[N,_]=m.useState([]),[C,E]=m.useState(!0),[R,M]=m.useState(!1),[T,L]=m.useState(null),H=m.useCallback(async()=>{E(!0),L(null),v([]),_([]),j(null),l(""),d(""),h(void 0);try{const{data:se,error:B}=await ne.from("category").select("*").order("name");if(B)throw B;if(b(se||[]),r&&e){const{data:ie,error:oe}=await ne.from("test_type").select("*").eq("id",e).single();if(oe)throw oe;if(!ie)throw new Error("Type de test non trouvé.");const{data:O,error:V}=await ne.from("test_parameter").select("*").eq("test_type_id",e).order("name");if(V)throw V;j(ie),l(ie.name),d(ie.description||""),h(ie.category_id);const U=(O||[]).map(J=>({...J,tempId:J.id||Jw()}));v(U),_(JSON.parse(JSON.stringify(U)))}}catch(se){console.error("Erreur chargement données:",se),L(se.message||"Impossible de charger les données.")}finally{E(!1)}},[r,e]);m.useEffect(()=>{H()},[H]);const q=(se,B,ie)=>{v(oe=>oe.map(O=>O.tempId===se?{...O,[B]:B==="order"?Number(ie):ie}:O))},G=()=>{const se=p.reduce((ie,oe)=>Math.max(ie,oe.order??0),0),B={tempId:Jw(),name:"",unit:"",reference_range:"",description:"",order:se+1,id:void 0,test_type_id:void 0};v(ie=>[...ie,B])},W=se=>{v(B=>B.filter(ie=>ie.tempId!==se))},ce=async se=>{if(se.preventDefault(),L(null),!a.trim()){L("Le nom du type de test est requis.");return}if(!f){L("Veuillez sélectionner une catégorie.");return}const B=p.find(ie=>{var oe;return!((oe=ie.name)!=null&&oe.trim())});if(B){L(`Le nom est requis pour tous les paramètres (problème avec paramètre temporaire ID ${B.tempId}).`);return}M(!0);try{let ie=e;const oe={name:a.trim(),category_id:f,description:c.trim()||null};if(r){const{error:P}=await ne.from("test_type").update(oe).eq("id",ie);if(P)throw P}else{const{data:P,error:F}=await ne.from("test_type").insert(oe).select("id").single();if(F)throw F;if(!(P!=null&&P.id))throw new Error("Impossible d'obtenir l'ID du nouveau type de test.");ie=P.id}const O=new Map(p.map(P=>[P.tempId,P])),V=new Map(N.map(P=>[P.tempId,P])),U=[],J=[],k=[];if(N.forEach(P=>{!O.has(P.tempId)&&P.id&&U.push(P.id)}),p.forEach(P=>{const F=V.get(P.tempId),X={test_type_id:ie,name:P.name,unit:P.unit||null,reference_range:P.reference_range||null,description:P.description||null,order:P.order??0};if(F!=null&&F.id){const D={test_type_id:F.test_type_id||ie,name:F.name,unit:F.unit||null,reference_range:F.reference_range||null,description:F.description||null,order:F.order??0};JSON.stringify(X)!==JSON.stringify(D)&&k.push({id:F.id,...X})}else J.push(X)}),U.length>0){console.log("Deleting parameters:",U);const{error:P}=await ne.from("test_parameter").delete().in("id",U);if(P)throw new Error(`Erreur suppression paramètres: ${P.message}`)}if(J.length>0){console.log("Inserting parameters:",J);const{error:P}=await ne.from("test_parameter").insert(J);if(P)throw new Error(`Erreur insertion paramètres: ${P.message}`)}if(k.length>0){console.log("Updating parameters:",k);const{error:P}=await ne.from("test_parameter").upsert(k);if(P)throw new Error(`Erreur mise à jour paramètres: ${P.message}`)}console.log("Save successful"),t("/test-types")}catch(ie){console.error("Erreur sauvegarde type de test:",ie),L(ie.message||`Une erreur est survenue lors de ${r?"la mise à jour":"l'enregistrement"}.`)}finally{M(!1)}};return C?s.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[s.jsx(Y,{className:"h-8 w-32"})," ",s.jsxs(Se,{children:[s.jsxs(Me,{children:[" ",s.jsx(Y,{className:"h-6 w-1/2"})," ",s.jsx(Y,{className:"h-4 w-3/4"})," "]}),s.jsxs(Ee,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-10 w-full"})]}),s.jsx(Wr,{}),s.jsx(Y,{className:"h-6 w-1/3"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Y,{className:"h-20 w-full"}),s.jsx(Y,{className:"h-20 w-full"})]}),s.jsx(Y,{className:"h-9 w-36"})]}),s.jsx(ls,{children:s.jsx(Y,{className:"h-10 w-32"})})]})]}):s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("div",{className:"mb-4",children:s.jsx(it,{to:"/test-types",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour à la liste"]})})}),s.jsx("form",{onSubmit:ce,children:s.jsxs(Se,{className:"shadow-md",children:[s.jsxs(Me,{children:[s.jsxs(yt,{className:"text-xl font-semibold flex items-center gap-2",children:[r?s.jsx(Ud,{className:"h-5 w-5"}):s.jsx(Ud,{className:"h-5 w-5"}),r?"Modifier le Type de Test":"Ajouter un Type de Test"]}),s.jsx(gr,{children:"Définissez le nom, la catégorie et les paramètres pour ce type de test."})]}),s.jsxs(Ee,{className:"space-y-6",children:[T&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsx(qt,{className:"whitespace-pre-line",children:T})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Le,{htmlFor:"testTypeName",className:"font-semibold",children:["Nom du Type ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ve,{id:"testTypeName",value:a,onChange:se=>l(se.target.value),placeholder:"Ex: Numération Formule Sanguine",disabled:R,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Le,{htmlFor:"testTypeDescription",className:"font-semibold",children:"Description"}),s.jsx(Cc,{id:"testTypeDescription",value:c,onChange:se=>d(se.target.value),placeholder:"Description du type de test, instructions de préparation, etc.",disabled:R,rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Le,{htmlFor:"category",className:"font-semibold",children:["Catégorie ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(Jn,{value:f,onValueChange:se=>h(se),disabled:R||x.length===0,required:!0,children:[s.jsx(tr,{id:"category",className:"h-10",children:s.jsx(er,{placeholder:"Sélectionner une catégorie..."})}),s.jsxs(nr,{children:[x.map(se=>s.jsx(bt,{value:se.id,children:se.name},se.id)),x.length===0&&s.jsx(bt,{value:"-",disabled:!0,children:"Aucune catégorie"})]})]})]})]}),s.jsx(Wr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Paramètres Associés"}),p.length>0&&s.jsx("div",{className:"space-y-4",children:p.map((se,B)=>s.jsxs(Se,{className:"bg-muted/30 p-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[s.jsxs(Le,{htmlFor:`param-name-${se.tempId}`,className:"text-sm",children:["Nom du Paramètre"," ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ve,{id:`param-name-${se.tempId}`,value:se.name||"",onChange:ie=>q(se.tempId,"name",ie.target.value),placeholder:"Ex: Hémoglobine",disabled:R,required:!0,className:"bg-background h-9"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Le,{htmlFor:`param-unit-${se.tempId}`,className:"text-sm",children:"Unité"}),s.jsx(Ve,{id:`param-unit-${se.tempId}`,value:se.unit||"",onChange:ie=>q(se.tempId,"unit",ie.target.value),placeholder:"Ex: g/dL",disabled:R,className:"bg-background h-9"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Le,{htmlFor:`param-ref-${se.tempId}`,className:"text-sm",children:"Valeurs de Référence"}),s.jsx(Ve,{id:`param-ref-${se.tempId}`,value:se.reference_range||"",onChange:ie=>q(se.tempId,"reference_range",ie.target.value),placeholder:"Ex: 12.0 - 16.0",disabled:R,className:"bg-background h-9"})]}),s.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[s.jsx(Le,{htmlFor:`param-desc-${se.tempId}`,className:"text-sm",children:"Description (Optionnel)"}),s.jsx(Cc,{id:`param-desc-${se.tempId}`,value:se.description||"",onChange:ie=>q(se.tempId,"description",ie.target.value),placeholder:"Explication du paramètre ou des valeurs...",disabled:R,className:"bg-background",rows:2})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Le,{htmlFor:`param-order-${se.tempId}`,className:"text-sm",children:"Ordre"}),s.jsx(Ve,{id:`param-order-${se.tempId}`,value:se.order||"",onChange:ie=>q(se.tempId,"order",ie.target.value),type:"number",disabled:R,className:"bg-background h-9"})]})]}),s.jsx("div",{className:"mt-3 text-right",children:s.jsxs(te,{type:"button",variant:"destructive",size:"sm",onClick:()=>W(se.tempId),disabled:R,className:"h-8 px-2 py-1 text-xs",children:[s.jsx(Bc,{className:"h-3.5 w-3.5 mr-1"}),"Retirer Param. #",B+1]})})]},se.tempId))}),p.length===0&&s.jsx("p",{className:"text-sm text-muted-foreground italic text-center py-4",children:"Aucun paramètre défini pour ce type de test."}),s.jsxs(te,{type:"button",variant:"outline",onClick:G,disabled:R,className:"mt-4",children:[s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Ajouter un Paramètre"]})]})]}),s.jsxs(ls,{className:"border-t px-6 py-4 flex justify-between",children:[s.jsx(te,{type:"submit",disabled:R||C,children:R?s.jsxs(s.Fragment,{children:[s.jsx(Yt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ll,{className:"mr-2 h-4 w-4"}),r?"Enregistrer les Modifications":"Enregistrer le Type de Test"]})}),s.jsx(it,{to:"/test-types",children:s.jsx(te,{type:"button",variant:"outline",disabled:R,children:"Annuler"})})]})]})})]})},tj=()=>{const{doctorId:e}=yr(),t=or(),r=!!e,[a,l]=m.useState({full_name:"",phone:"",hospital:"",bio:""}),[c,d]=m.useState(r),[f,h]=m.useState(!1),[p,v]=m.useState(null),x=m.useCallback(async()=>{if(!r||!e){d(!1);return}d(!0),v(null);try{const{data:j,error:N}=await ne.from("doctor").select("*").eq("id",e).single();if(N)throw N;if(!j)throw new Error("Médecin non trouvé.");l({full_name:j.full_name||"",phone:j.phone||"",hospital:j.hospital||"",bio:j.bio||""})}catch(j){console.error("Erreur chargement médecin:",j),j instanceof Error?v(j.message||"Impossible de charger les données du médecin."):v("Une erreur inconnue est survenue.")}finally{d(!1)}},[r,e]);m.useEffect(()=>{x()},[x]);const b=j=>{const{name:N,value:_}=j.target;l(C=>({...C,[N]:_}))},w=async j=>{var N,_,C;if(j.preventDefault(),v(null),!a.full_name||!a.full_name.trim()){v("Le nom complet du médecin est requis.");return}h(!0);try{const E={full_name:a.full_name.trim(),phone:((N=a.phone)==null?void 0:N.trim())||null,hospital:((_=a.hospital)==null?void 0:_.trim())||null,bio:((C=a.bio)==null?void 0:C.trim())||null};let R=null;if(r){const{error:M}=await ne.from("doctor").update(E).eq("id",e);R=M}else{const{error:M}=await ne.from("doctor").insert(E);R=M}if(R)if(R.code==="23505")v("Un médecin avec ces informations (ex: nom) existe peut-être déjà.");else throw R;else t("/doctors")}catch(E){console.error(`Erreur ${r?"mise à jour":"création"} médecin:`,E),E instanceof Error?v(E.message||`Une erreur est survenue lors de ${r?"la mise à jour":"l'enregistrement"}.`):v(`Une erreur inconnue est survenue lors de ${r?"la mise à jour":"l'enregistrement"}.`)}finally{h(!1)}};return c?s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsx(Y,{className:"h-8 w-32"})," ",s.jsxs(Se,{children:[s.jsxs(Me,{children:[" ",s.jsx(Y,{className:"h-6 w-1/2"})," ",s.jsx(Y,{className:"h-4 w-3/4"})," "]}),s.jsxs(Ee,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-20 w-full"})]})]}),s.jsx(ls,{children:s.jsx(Y,{className:"h-10 w-32"})})]})]}):s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("div",{className:"mb-4",children:s.jsx(it,{to:"/doctors",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour à la liste"]})})}),s.jsx("form",{onSubmit:w,children:s.jsxs(Se,{className:"shadow-md",children:[s.jsxs(Me,{children:[s.jsxs(yt,{className:"text-xl font-semibold flex items-center gap-2",children:[r?s.jsx(Xr,{className:"h-5 w-5"}):s.jsx(D_,{className:"h-5 w-5"}),r?"Modifier le Médecin":"Ajouter un Nouveau Médecin"]}),s.jsx(gr,{children:r?"Mettez à jour les informations du médecin.":"Entrez les informations du nouveau médecin."})]}),s.jsxs(Ee,{className:"space-y-6",children:[p&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsx(qt,{className:"whitespace-pre-line",children:p})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Le,{htmlFor:"full_name",className:"font-semibold",children:["Nom Complet ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ve,{id:"full_name",name:"full_name",value:a.full_name||"",onChange:b,placeholder:"Ex: Dr. Alain Dupont",disabled:f,required:!0,className:"h-10"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Le,{htmlFor:"phone",className:"font-semibold",children:"Téléphone"}),s.jsx(Ve,{id:"phone",name:"phone",type:"tel",value:a.phone||"",onChange:b,placeholder:"Ex: +33 6 11 22 33 44",disabled:f,className:"h-10"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Le,{htmlFor:"hospital",className:"font-semibold",children:"Hôpital / Clinique"}),s.jsx(Ve,{id:"hospital",name:"hospital",value:a.hospital||"",onChange:b,placeholder:"Ex: Hôpital Central",disabled:f,className:"h-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Le,{htmlFor:"bio",className:"font-semibold",children:"Bio / Notes (Optionnel)"}),s.jsx(Cc,{id:"bio",name:"bio",value:a.bio||"",onChange:b,placeholder:"Spécialité, notes importantes...",disabled:f,rows:4})]})]}),s.jsxs(ls,{className:"border-t px-6 py-4 flex justify-between",children:[s.jsx(te,{type:"submit",disabled:f||c,children:f?s.jsxs(s.Fragment,{children:[s.jsx(Yt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ll,{className:"mr-2 h-4 w-4"}),r?"Enregistrer les Modifications":"Enregistrer le Médecin"]})}),s.jsx(it,{to:"/doctors",children:s.jsx(te,{type:"button",variant:"outline",disabled:f,children:"Annuler"})})]})]})})]})},s$=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(!0),[l,c]=m.useState(null),[d,f]=m.useState(null),[h,p]=m.useState(!1),[v,x]=m.useState(!1),[b,w]=m.useState(null),[j,N]=m.useState({name:""}),[_,C]=m.useState(null),E=m.useCallback(async(q=!0)=>{q&&a(!0),c(null);try{const{data:G,error:W}=await ne.from("category").select("*").order("name",{ascending:!0});if(W)throw W;t(G||[])}catch(G){console.error("Erreur chargement catégories:",G),G instanceof Error?c(G.message||"Impossible de charger les catégories."):c("Impossible de charger les catégories."),t([])}finally{q&&a(!1)}},[]);m.useEffect(()=>{E()},[E]);const R=(q=null)=>{w(q),N({name:(q==null?void 0:q.name)||""}),f(null),x(!0)},M=()=>{x(!1),setTimeout(()=>{w(null),N({name:""})},150)},T=q=>{N({name:q.target.value})},L=async q=>{if(q.preventDefault(),f(null),!j.name||!j.name.trim()){f("Le nom de la catégorie est requis.");return}p(!0);const G={name:j.name.trim()};try{let W=null;if(b){const{error:ce}=await ne.from("category").update(G).eq("id",b.id);W=ce}else{const{error:ce}=await ne.from("category").insert(G);W=ce}if(W)if(W.code==="23505")f("Ce nom de catégorie existe déjà.");else throw W;else M(),await E(!1)}catch(W){console.error("Erreur sauvegarde catégorie:",W),W instanceof Error?f(W.message||"Une erreur est survenue."):f("Une erreur est survenue.")}finally{p(!1)}},H=async()=>{if(_){p(!0),c(null);try{const{error:q}=await ne.from("category").delete().eq("id",_.id);if(q)if(q.code==="23503")c(`Impossible de supprimer la catégorie "${_.name}" car elle est utilisée par un ou plusieurs types de test.`),C(null);else throw q;else C(null),await E(!1)}catch(q){console.error("Erreur suppression catégorie:",q),q instanceof Error?c(q.message||"Une erreur est survenue lors de la suppression."):c("Une erreur est survenue lors de la suppression."),C(null)}finally{p(!1)}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(uc,{className:"h-6 w-6"}),"Gestion des Catégories"]}),s.jsxs(te,{onClick:()=>R(null),children:[s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Ajouter une Catégorie"]})]}),l&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsx(qt,{children:l})]}),r&&s.jsxs("div",{className:"border rounded-lg",children:[s.jsx(Y,{className:"h-12 w-full rounded-t-lg"})," ",s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"})]})]}),!r&&!l&&s.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Xt,{children:[s.jsx(ht,{children:"Nom de la Catégorie"}),s.jsx(ht,{className:"text-right w-[200px]",children:"Actions"})]})}),s.jsx(la,{children:e.length>0?e.map(q=>s.jsxs(Xt,{children:[s.jsx(Ke,{className:"font-medium",children:q.name}),s.jsxs(Ke,{className:"text-right space-x-2",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:()=>R(q),children:s.jsx(Xr,{className:"h-4 w-4"})}),s.jsx(wc,{children:s.jsx(wf,{asChild:!0,children:s.jsx(te,{variant:"destructive",size:"sm",onClick:G=>{G.stopPropagation(),C(q)},children:s.jsx(Bc,{className:"h-4 w-4"})})})})]})]},q.id)):s.jsx(Xt,{children:s.jsx(Ke,{colSpan:2,className:"h-24 text-center text-muted-foreground",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[s.jsx(pf,{className:"h-8 w-8 text-muted-foreground/50"}),"Aucune catégorie définie."]})})})})]})}),s.jsx($l,{open:v,onOpenChange:x,children:s.jsx(Bl,{className:"sm:max-w-[425px]",children:s.jsxs("form",{onSubmit:L,children:[s.jsxs(Hl,{children:[s.jsx(Fl,{children:b?"Modifier la Catégorie":"Ajouter une Catégorie"}),s.jsx(aE,{children:b?"Modifiez le nom de la catégorie ci-dessous.":"Entrez le nom de la nouvelle catégorie."})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[d&&s.jsxs(Bt,{variant:"destructive",className:"text-xs",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsx(qt,{children:d})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsxs(Le,{htmlFor:"category-name",className:"text-right col-span-1",children:["Nom ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Ve,{id:"category-name",name:"name",value:j.name,onChange:T,className:"col-span-3 h-9",disabled:h,required:!0,autoFocus:!0})]})]}),s.jsxs(ql,{children:[s.jsx(sE,{asChild:!0,children:s.jsx(te,{type:"button",variant:"outline",disabled:h,children:"Annuler"})}),s.jsxs(te,{type:"submit",disabled:h,children:[h&&s.jsx(Yt,{className:"mr-2 h-4 w-4 animate-spin"}),b?"Enregistrer Modifications":"Ajouter Catégorie"]})]})]})})}),s.jsx(wc,{open:!!_,onOpenChange:q=>!q&&C(null),children:s.jsxs(jf,{children:[s.jsxs(_f,{children:[s.jsx(Sf,{children:"Êtes-vous sûr(e) ?"}),s.jsxs(Ef,{children:["Cette action est irréversible. Voulez-vous vraiment supprimer la catégorie",s.jsxs("span",{className:"font-medium",children:[' "',_==null?void 0:_.name,'"']})," ?",s.jsx("br",{}),s.jsx("span",{className:"text-destructive/80 font-medium",children:"Attention :"})," ","La suppression échouera si des types de test utilisent encore cette catégorie."]})]}),s.jsxs(Nf,{children:[s.jsx(Cf,{disabled:h,onClick:()=>C(null),children:"Annuler"}),s.jsxs(te,{variant:"destructive",onClick:H,disabled:h,children:[h&&s.jsx(Yt,{className:"mr-2 h-4 w-4 animate-spin"}),"Supprimer"]})]})]})})]})};function a$(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const i$=e=>{switch(e){case"success":return c$;case"info":return d$;case"warning":return u$;case"error":return f$;default:return null}},l$=Array(12).fill(0),o$=({visible:e,className:t})=>be.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},be.createElement("div",{className:"sonner-spinner"},l$.map((r,a)=>be.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),c$=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),u$=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),d$=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),f$=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),h$=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},be.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),be.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),m$=()=>{const[e,t]=be.useState(document.hidden);return be.useEffect(()=>{const r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e};let lg=1;class p${constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:a,...l}=t,c=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:lg++,d=this.toasts.find(h=>h.id===c),f=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),d?this.toasts=this.toasts.map(h=>h.id===c?(this.publish({...h,...t,id:c,title:a}),{...h,...t,id:c,dismissible:f,title:a}):h):this.addToast({title:a,...l,dismissible:f,id:c}),c},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(a=>a({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let a;r.loading!==void 0&&(a=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const l=Promise.resolve(t instanceof Function?t():t);let c=a!==void 0,d;const f=l.then(async p=>{if(d=["resolve",p],be.isValidElement(p))c=!1,this.create({id:a,type:"default",message:p});else if(v$(p)&&!p.ok){c=!1;const x=typeof r.error=="function"?await r.error(`HTTP error! status: ${p.status}`):r.error,b=typeof r.description=="function"?await r.description(`HTTP error! status: ${p.status}`):r.description,j=typeof x=="object"&&!be.isValidElement(x)?x:{message:x};this.create({id:a,type:"error",description:b,...j})}else if(p instanceof Error){c=!1;const x=typeof r.error=="function"?await r.error(p):r.error,b=typeof r.description=="function"?await r.description(p):r.description,j=typeof x=="object"&&!be.isValidElement(x)?x:{message:x};this.create({id:a,type:"error",description:b,...j})}else if(r.success!==void 0){c=!1;const x=typeof r.success=="function"?await r.success(p):r.success,b=typeof r.description=="function"?await r.description(p):r.description,j=typeof x=="object"&&!be.isValidElement(x)?x:{message:x};this.create({id:a,type:"success",description:b,...j})}}).catch(async p=>{if(d=["reject",p],r.error!==void 0){c=!1;const v=typeof r.error=="function"?await r.error(p):r.error,x=typeof r.description=="function"?await r.description(p):r.description,w=typeof v=="object"&&!be.isValidElement(v)?v:{message:v};this.create({id:a,type:"error",description:x,...w})}}).finally(()=>{c&&(this.dismiss(a),a=void 0),r.finally==null||r.finally.call(r)}),h=()=>new Promise((p,v)=>f.then(()=>d[0]==="reject"?v(d[1]):p(d[1])).catch(v));return typeof a!="string"&&typeof a!="number"?{unwrap:h}:Object.assign(a,{unwrap:h})},this.custom=(t,r)=>{const a=(r==null?void 0:r.id)||lg++;return this.create({jsx:t(a),id:a,...r}),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const pr=new p$,g$=(e,t)=>{const r=(t==null?void 0:t.id)||lg++;return pr.addToast({title:e,...t,id:r}),r},v$=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",x$=g$,y$=()=>pr.toasts,b$=()=>pr.getActiveToasts(),_p=Object.assign(x$,{success:pr.success,info:pr.info,warning:pr.warning,error:pr.error,custom:pr.custom,message:pr.message,promise:pr.promise,dismiss:pr.dismiss,loading:pr.loading},{getHistory:y$,getToasts:b$});a$("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function jd(e){return e.label!==void 0}const w$=3,j$="24px",_$="16px",nj=4e3,N$=356,S$=14,E$=45,C$=200;function ys(...e){return e.filter(Boolean).join(" ")}function R$(e){const[t,r]=e.split("-"),a=[];return t&&a.push(t),r&&a.push(r),a}const T$=e=>{var t,r,a,l,c,d,f,h,p;const{invert:v,toast:x,unstyled:b,interacting:w,setHeights:j,visibleToasts:N,heights:_,index:C,toasts:E,expanded:R,removeToast:M,defaultRichColors:T,closeButton:L,style:H,cancelButtonStyle:q,actionButtonStyle:G,className:W="",descriptionClassName:ce="",duration:se,position:B,gap:ie,expandByDefault:oe,classNames:O,icons:V,closeButtonAriaLabel:U="Close toast"}=e,[J,k]=be.useState(null),[P,F]=be.useState(null),[X,D]=be.useState(!1),[z,$]=be.useState(!1),[K,re]=be.useState(!1),[pe,ue]=be.useState(!1),[_e,Re]=be.useState(!1),[lt,rt]=be.useState(0),[ge,me]=be.useState(0),De=be.useRef(x.duration||se||nj),ye=be.useRef(null),je=be.useRef(null),Pe=C===0,Ye=C+1<=N,qe=x.type,gt=x.dismissible!==!1,Mt=x.className||"",Qt=x.descriptionClassName||"",Be=be.useMemo(()=>_.findIndex(ke=>ke.toastId===x.id)||0,[_,x.id]),st=be.useMemo(()=>{var ke;return(ke=x.closeButton)!=null?ke:L},[x.closeButton,L]),nn=be.useMemo(()=>x.duration||se||nj,[x.duration,se]),Mn=be.useRef(0),Sn=be.useRef(0),Et=be.useRef(0),xe=be.useRef(null),[Te,$e]=B.split("-"),et=be.useMemo(()=>_.reduce((ke,vt,ot)=>ot>=Be?ke:ke+vt.height,0),[_,Be]),Ge=m$(),Ft=x.invert||v,on=qe==="loading";Sn.current=be.useMemo(()=>Be*ie+et,[Be,et]),be.useEffect(()=>{De.current=nn},[nn]),be.useEffect(()=>{D(!0)},[]),be.useEffect(()=>{const ke=je.current;if(ke){const vt=ke.getBoundingClientRect().height;return me(vt),j(ot=>[{toastId:x.id,height:vt,position:x.position},...ot]),()=>j(ot=>ot.filter(jt=>jt.toastId!==x.id))}},[j,x.id]),be.useLayoutEffect(()=>{if(!X)return;const ke=je.current,vt=ke.style.height;ke.style.height="auto";const ot=ke.getBoundingClientRect().height;ke.style.height=vt,me(ot),j(jt=>jt.find(It=>It.toastId===x.id)?jt.map(It=>It.toastId===x.id?{...It,height:ot}:It):[{toastId:x.id,height:ot,position:x.position},...jt])},[X,x.title,x.description,j,x.id]);const wt=be.useCallback(()=>{$(!0),rt(Sn.current),j(ke=>ke.filter(vt=>vt.toastId!==x.id)),setTimeout(()=>{M(x)},C$)},[x,M,j,Sn]);be.useEffect(()=>{if(x.promise&&qe==="loading"||x.duration===1/0||x.type==="loading")return;let ke;return R||w||Ge?(()=>{if(Et.current<Mn.current){const jt=new Date().getTime()-Mn.current;De.current=De.current-jt}Et.current=new Date().getTime()})():(()=>{De.current!==1/0&&(Mn.current=new Date().getTime(),ke=setTimeout(()=>{x.onAutoClose==null||x.onAutoClose.call(x,x),wt()},De.current))})(),()=>clearTimeout(ke)},[R,w,x,qe,Ge,wt]),be.useEffect(()=>{x.delete&&wt()},[wt,x.delete]);function Bn(){var ke;if(V!=null&&V.loading){var vt;return be.createElement("div",{className:ys(O==null?void 0:O.loader,x==null||(vt=x.classNames)==null?void 0:vt.loader,"sonner-loader"),"data-visible":qe==="loading"},V.loading)}return be.createElement(o$,{className:ys(O==null?void 0:O.loader,x==null||(ke=x.classNames)==null?void 0:ke.loader),visible:qe==="loading"})}const mn=x.icon||(V==null?void 0:V[qe])||i$(qe);var tt,ct;return be.createElement("li",{tabIndex:0,ref:je,className:ys(W,Mt,O==null?void 0:O.toast,x==null||(t=x.classNames)==null?void 0:t.toast,O==null?void 0:O.default,O==null?void 0:O[qe],x==null||(r=x.classNames)==null?void 0:r[qe]),"data-sonner-toast":"","data-rich-colors":(tt=x.richColors)!=null?tt:T,"data-styled":!(x.jsx||x.unstyled||b),"data-mounted":X,"data-promise":!!x.promise,"data-swiped":_e,"data-removed":z,"data-visible":Ye,"data-y-position":Te,"data-x-position":$e,"data-index":C,"data-front":Pe,"data-swiping":K,"data-dismissible":gt,"data-type":qe,"data-invert":Ft,"data-swipe-out":pe,"data-swipe-direction":P,"data-expanded":!!(R||oe&&X),style:{"--index":C,"--toasts-before":C,"--z-index":E.length-C,"--offset":`${z?lt:Sn.current}px`,"--initial-height":oe?"auto":`${ge}px`,...H,...x.style},onDragEnd:()=>{re(!1),k(null),xe.current=null},onPointerDown:ke=>{on||!gt||(ye.current=new Date,rt(Sn.current),ke.target.setPointerCapture(ke.pointerId),ke.target.tagName!=="BUTTON"&&(re(!0),xe.current={x:ke.clientX,y:ke.clientY}))},onPointerUp:()=>{var ke,vt,ot;if(pe||!gt)return;xe.current=null;const jt=Number(((ke=je.current)==null?void 0:ke.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),cn=Number(((vt=je.current)==null?void 0:vt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),It=new Date().getTime()-((ot=ye.current)==null?void 0:ot.getTime()),mt=J==="x"?jt:cn,En=Math.abs(mt)/It;if(Math.abs(mt)>=E$||En>.11){rt(Sn.current),x.onDismiss==null||x.onDismiss.call(x,x),F(J==="x"?jt>0?"right":"left":cn>0?"down":"up"),wt(),ue(!0);return}else{var Vt,en;(Vt=je.current)==null||Vt.style.setProperty("--swipe-amount-x","0px"),(en=je.current)==null||en.style.setProperty("--swipe-amount-y","0px")}Re(!1),re(!1),k(null)},onPointerMove:ke=>{var vt,ot,jt;if(!xe.current||!gt||((vt=window.getSelection())==null?void 0:vt.toString().length)>0)return;const It=ke.clientY-xe.current.y,mt=ke.clientX-xe.current.x;var En;const Vt=(En=e.swipeDirections)!=null?En:R$(B);!J&&(Math.abs(mt)>1||Math.abs(It)>1)&&k(Math.abs(mt)>Math.abs(It)?"x":"y");let en={x:0,y:0};const wr=An=>1/(1.5+Math.abs(An)/20);if(J==="y"){if(Vt.includes("top")||Vt.includes("bottom"))if(Vt.includes("top")&&It<0||Vt.includes("bottom")&&It>0)en.y=It;else{const An=It*wr(It);en.y=Math.abs(An)<Math.abs(It)?An:It}}else if(J==="x"&&(Vt.includes("left")||Vt.includes("right")))if(Vt.includes("left")&&mt<0||Vt.includes("right")&&mt>0)en.x=mt;else{const An=mt*wr(mt);en.x=Math.abs(An)<Math.abs(mt)?An:mt}(Math.abs(en.x)>0||Math.abs(en.y)>0)&&Re(!0),(ot=je.current)==null||ot.style.setProperty("--swipe-amount-x",`${en.x}px`),(jt=je.current)==null||jt.style.setProperty("--swipe-amount-y",`${en.y}px`)}},st&&!x.jsx&&qe!=="loading"?be.createElement("button",{"aria-label":U,"data-disabled":on,"data-close-button":!0,onClick:on||!gt?()=>{}:()=>{wt(),x.onDismiss==null||x.onDismiss.call(x,x)},className:ys(O==null?void 0:O.closeButton,x==null||(a=x.classNames)==null?void 0:a.closeButton)},(ct=V==null?void 0:V.close)!=null?ct:h$):null,(qe||x.icon||x.promise)&&x.icon!==null&&((V==null?void 0:V[qe])!==null||x.icon)?be.createElement("div",{"data-icon":"",className:ys(O==null?void 0:O.icon,x==null||(l=x.classNames)==null?void 0:l.icon)},x.promise||x.type==="loading"&&!x.icon?x.icon||Bn():null,x.type!=="loading"?mn:null):null,be.createElement("div",{"data-content":"",className:ys(O==null?void 0:O.content,x==null||(c=x.classNames)==null?void 0:c.content)},be.createElement("div",{"data-title":"",className:ys(O==null?void 0:O.title,x==null||(d=x.classNames)==null?void 0:d.title)},x.jsx?x.jsx:typeof x.title=="function"?x.title():x.title),x.description?be.createElement("div",{"data-description":"",className:ys(ce,Qt,O==null?void 0:O.description,x==null||(f=x.classNames)==null?void 0:f.description)},typeof x.description=="function"?x.description():x.description):null),be.isValidElement(x.cancel)?x.cancel:x.cancel&&jd(x.cancel)?be.createElement("button",{"data-button":!0,"data-cancel":!0,style:x.cancelButtonStyle||q,onClick:ke=>{jd(x.cancel)&&gt&&(x.cancel.onClick==null||x.cancel.onClick.call(x.cancel,ke),wt())},className:ys(O==null?void 0:O.cancelButton,x==null||(h=x.classNames)==null?void 0:h.cancelButton)},x.cancel.label):null,be.isValidElement(x.action)?x.action:x.action&&jd(x.action)?be.createElement("button",{"data-button":!0,"data-action":!0,style:x.actionButtonStyle||G,onClick:ke=>{jd(x.action)&&(x.action.onClick==null||x.action.onClick.call(x.action,ke),!ke.defaultPrevented&&wt())},className:ys(O==null?void 0:O.actionButton,x==null||(p=x.classNames)==null?void 0:p.actionButton)},x.action.label):null)};function rj(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function M$(e,t){const r={};return[e,t].forEach((a,l)=>{const c=l===1,d=c?"--mobile-offset":"--offset",f=c?_$:j$;function h(p){["top","right","bottom","left"].forEach(v=>{r[`${d}-${v}`]=typeof p=="number"?`${p}px`:p})}typeof a=="number"||typeof a=="string"?h(a):typeof a=="object"?["top","right","bottom","left"].forEach(p=>{a[p]===void 0?r[`${d}-${p}`]=f:r[`${d}-${p}`]=typeof a[p]=="number"?`${a[p]}px`:a[p]}):h(f)}),r}const A$=be.forwardRef(function(t,r){const{invert:a,position:l="bottom-right",hotkey:c=["altKey","KeyT"],expand:d,closeButton:f,className:h,offset:p,mobileOffset:v,theme:x="light",richColors:b,duration:w,style:j,visibleToasts:N=w$,toastOptions:_,dir:C=rj(),gap:E=S$,icons:R,containerAriaLabel:M="Notifications"}=t,[T,L]=be.useState([]),H=be.useMemo(()=>Array.from(new Set([l].concat(T.filter(P=>P.position).map(P=>P.position)))),[T,l]),[q,G]=be.useState([]),[W,ce]=be.useState(!1),[se,B]=be.useState(!1),[ie,oe]=be.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=be.useRef(null),V=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=be.useRef(null),J=be.useRef(!1),k=be.useCallback(P=>{L(F=>{var X;return(X=F.find(D=>D.id===P.id))!=null&&X.delete||pr.dismiss(P.id),F.filter(({id:D})=>D!==P.id)})},[]);return be.useEffect(()=>pr.subscribe(P=>{if(P.dismiss){requestAnimationFrame(()=>{L(F=>F.map(X=>X.id===P.id?{...X,delete:!0}:X))});return}setTimeout(()=>{Sj.flushSync(()=>{L(F=>{const X=F.findIndex(D=>D.id===P.id);return X!==-1?[...F.slice(0,X),{...F[X],...P},...F.slice(X+1)]:[P,...F]})})})}),[T]),be.useEffect(()=>{if(x!=="system"){oe(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?oe("dark"):oe("light")),typeof window>"u")return;const P=window.matchMedia("(prefers-color-scheme: dark)");try{P.addEventListener("change",({matches:F})=>{oe(F?"dark":"light")})}catch{P.addListener(({matches:X})=>{try{oe(X?"dark":"light")}catch(D){console.error(D)}})}},[x]),be.useEffect(()=>{T.length<=1&&ce(!1)},[T]),be.useEffect(()=>{const P=F=>{var X;if(c.every($=>F[$]||F.code===$)){var z;ce(!0),(z=O.current)==null||z.focus()}F.code==="Escape"&&(document.activeElement===O.current||(X=O.current)!=null&&X.contains(document.activeElement))&&ce(!1)};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[c]),be.useEffect(()=>{if(O.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,J.current=!1)}},[O.current]),be.createElement("section",{ref:r,"aria-label":`${M} ${V}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},H.map((P,F)=>{var X;const[D,z]=P.split("-");return T.length?be.createElement("ol",{key:P,dir:C==="auto"?rj():C,tabIndex:-1,ref:O,className:h,"data-sonner-toaster":!0,"data-sonner-theme":ie,"data-y-position":D,"data-lifted":W&&T.length>1&&!d,"data-x-position":z,style:{"--front-toast-height":`${((X=q[0])==null?void 0:X.height)||0}px`,"--width":`${N$}px`,"--gap":`${E}px`,...j,...M$(p,v)},onBlur:$=>{J.current&&!$.currentTarget.contains($.relatedTarget)&&(J.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:$=>{$.target instanceof HTMLElement&&$.target.dataset.dismissible==="false"||J.current||(J.current=!0,U.current=$.relatedTarget)},onMouseEnter:()=>ce(!0),onMouseMove:()=>ce(!0),onMouseLeave:()=>{se||ce(!1)},onDragEnd:()=>ce(!1),onPointerDown:$=>{$.target instanceof HTMLElement&&$.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},T.filter($=>!$.position&&F===0||$.position===P).map(($,K)=>{var re,pe;return be.createElement(T$,{key:$.id,icons:R,index:K,toast:$,defaultRichColors:b,duration:(re=_==null?void 0:_.duration)!=null?re:w,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:a,visibleToasts:N,closeButton:(pe=_==null?void 0:_.closeButton)!=null?pe:f,interacting:se,position:P,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:k,toasts:T.filter(ue=>ue.position==$.position),heights:q.filter(ue=>ue.position==$.position),setHeights:G,expandByDefault:d,gap:E,expanded:W,swipeDirections:t.swipeDirections})})):null}))});var kv="Progress",Dv=100,[k$,nH]=cr(kv),[D$,O$]=k$(kv),iE=m.forwardRef((e,t)=>{const{__scopeProgress:r,value:a=null,max:l,getValueLabel:c=P$,...d}=e;(l||l===0)&&!sj(l)&&console.error(L$(`${l}`,"Progress"));const f=sj(l)?l:Dv;a!==null&&!aj(a,f)&&console.error(I$(`${a}`,"Progress"));const h=aj(a,f)?a:null,p=Wd(h)?c(h,f):void 0;return s.jsx(D$,{scope:r,value:h,max:f,children:s.jsx(Ze.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":Wd(h)?h:void 0,"aria-valuetext":p,role:"progressbar","data-state":cE(h,f),"data-value":h??void 0,"data-max":f,...d,ref:t})})});iE.displayName=kv;var lE="ProgressIndicator",oE=m.forwardRef((e,t)=>{const{__scopeProgress:r,...a}=e,l=O$(lE,r);return s.jsx(Ze.div,{"data-state":cE(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...a,ref:t})});oE.displayName=lE;function P$(e,t){return`${Math.round(e/t*100)}%`}function cE(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Wd(e){return typeof e=="number"}function sj(e){return Wd(e)&&!isNaN(e)&&e>0}function aj(e,t){return Wd(e)&&!isNaN(e)&&e<=t&&e>=0}function L$(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Dv}\`.`}function I$(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Dv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var z$=iE,U$=oE;function $$({className:e,value:t,...r}){return s.jsx(z$,{"data-slot":"progress",className:Ce("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:s.jsx(U$,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}var Ov="Radio",[B$,uE]=cr(Ov),[H$,q$]=B$(Ov),dE=m.forwardRef((e,t)=>{const{__scopeRadio:r,name:a,checked:l=!1,required:c,disabled:d,value:f="on",onCheck:h,form:p,...v}=e,[x,b]=m.useState(null),w=St(t,_=>b(_)),j=m.useRef(!1),N=x?p||!!x.closest("form"):!0;return s.jsxs(H$,{scope:r,checked:l,disabled:d,children:[s.jsx(Ze.button,{type:"button",role:"radio","aria-checked":l,"data-state":mE(l),"data-disabled":d?"":void 0,disabled:d,value:f,...v,ref:w,onClick:Ae(e.onClick,_=>{l||h==null||h(),N&&(j.current=_.isPropagationStopped(),j.current||_.stopPropagation())})}),N&&s.jsx(F$,{control:x,bubbles:!j.current,name:a,value:f,checked:l,required:c,disabled:d,form:p,style:{transform:"translateX(-100%)"}})]})});dE.displayName=Ov;var fE="RadioIndicator",hE=m.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:a,...l}=e,c=q$(fE,r);return s.jsx(Dr,{present:a||c.checked,children:s.jsx(Ze.span,{"data-state":mE(c.checked),"data-disabled":c.disabled?"":void 0,...l,ref:t})})});hE.displayName=fE;var F$=e=>{const{control:t,checked:r,bubbles:a=!0,...l}=e,c=m.useRef(null),d=bv(r),f=Pg(t);return m.useEffect(()=>{const h=c.current,p=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(p,"checked").set;if(d!==r&&x){const b=new Event("click",{bubbles:a});x.call(h,r),h.dispatchEvent(b)}},[d,r,a]),s.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...l,tabIndex:-1,ref:c,style:{...e.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function mE(e){return e?"checked":"unchecked"}var V$=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Pv="RadioGroup",[Y$,rH]=cr(Pv,[uf,uE]),pE=uf(),gE=uE(),[G$,W$]=Y$(Pv),vE=m.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:a,defaultValue:l,value:c,required:d=!1,disabled:f=!1,orientation:h,dir:p,loop:v=!0,onValueChange:x,...b}=e,w=pE(r),j=tf(p),[N,_]=$a({prop:c,defaultProp:l,onChange:x});return s.jsx(G$,{scope:r,name:a,required:d,disabled:f,value:N,onValueChange:_,children:s.jsx(I1,{asChild:!0,...w,orientation:h,dir:j,loop:v,children:s.jsx(Ze.div,{role:"radiogroup","aria-required":d,"aria-orientation":h,"data-disabled":f?"":void 0,dir:j,...b,ref:t})})})});vE.displayName=Pv;var xE="RadioGroupItem",yE=m.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:a,...l}=e,c=W$(xE,r),d=c.disabled||a,f=pE(r),h=gE(r),p=m.useRef(null),v=St(t,p),x=c.value===l.value,b=m.useRef(!1);return m.useEffect(()=>{const w=N=>{V$.includes(N.key)&&(b.current=!0)},j=()=>b.current=!1;return document.addEventListener("keydown",w),document.addEventListener("keyup",j),()=>{document.removeEventListener("keydown",w),document.removeEventListener("keyup",j)}},[]),s.jsx(z1,{asChild:!0,...f,focusable:!d,active:x,children:s.jsx(dE,{disabled:d,required:c.required,checked:x,...h,...l,name:c.name,ref:v,onCheck:()=>c.onValueChange(l.value),onKeyDown:Ae(w=>{w.key==="Enter"&&w.preventDefault()}),onFocus:Ae(l.onFocus,()=>{var w;b.current&&((w=p.current)==null||w.click())})})})});yE.displayName=xE;var X$="RadioGroupIndicator",bE=m.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...a}=e,l=gE(r);return s.jsx(hE,{...l,...a,ref:t})});bE.displayName=X$;var K$=vE,Q$=yE,Z$=bE;function J$({className:e,...t}){return s.jsx(K$,{"data-slot":"radio-group",className:Ce("grid gap-3",e),...t})}function eB({className:e,...t}){return s.jsx(Q$,{"data-slot":"radio-group-item",className:Ce("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(Z$,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:s.jsx(wP,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}const tB={logoUrl:null,labName:"Laboratoire XYZ",addressLine1:"123 Rue Principale",cityPostalCode:"75001 Paris",phone:"01 23 45 67 89"},nB=({templates:e,selectedTemplateId:t,onSelectTemplate:r,disabled:a=!1})=>s.jsx(J$,{value:t,onValueChange:r,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",disabled:a,children:e.map(l=>s.jsxs(Le,{htmlFor:l.id,className:Ce("border-2 rounded-lg p-4 flex flex-col items-center gap-4 cursor-pointer transition-colors hover:border-primary/80",t===l.id&&"border-primary ring-2 ring-primary ring-offset-2",a&&"cursor-not-allowed opacity-50"),children:[s.jsx(eB,{value:l.id,id:l.id,className:"sr-only"}),s.jsx("span",{className:"font-medium text-sm text-center",children:l.name}),s.jsxs(Se,{className:"w-full scale-75 origin-top border-dashed",children:[" ",s.jsx(Ee,{className:"p-2",children:s.jsx(l.component,{data:tB,isPreview:!0})})]})]},l.id))}),rB="public",sB="header-logo",Np=[{id:"template1",name:"Classique (Sans Logo)",component:rr},{id:"template2",name:"Centré (Logo au Dessus)",component:Qa},{id:"template3",name:"Centré (encercle)",component:Za},{id:"template4",name:"Centré (encercle en %)",component:Ja}],Sp="template1",aB=()=>{var oe;const[e,t]=m.useState(null),[r,a]=m.useState({}),[l,c]=m.useState(null),[d,f]=m.useState(Sp),[h,p]=m.useState(null),[v,x]=m.useState(null),[b,w]=m.useState(!1),[j,N]=m.useState(null),[_,C]=m.useState(null),[E,R]=m.useState(!0),[M,T]=m.useState(!1),[L,H]=m.useState(null),q=m.useCallback(async()=>{R(!0),H(null);try{const{data:O,error:V}=await ne.from("print_header_config").select("*").limit(1).maybeSingle();if(V)throw V;O?(t(O.id),a({lab_name:O.lab_name,address_line1:O.address_line1,address_line2:O.address_line2,city_postal_code:O.city_postal_code,phone:O.phone,email:O.email,website:O.website}),c(O.logo_url),f(O.selected_template||Sp)):(t(null),a({}),c(null),f(Sp))}catch(O){console.error("Erreur chargement configuration:",O),H(O instanceof Error?O.message:"Impossible de charger la configuration de l'en-tête.")}finally{R(!1)}},[]);m.useEffect(()=>{q()},[q]);const G=O=>{const{name:V,value:U}=O.target;a(J=>({...J,[V]:U}))},W=O=>{var U;const V=(U=O.target.files)==null?void 0:U[0];if(h&&(URL.revokeObjectURL(h),p(null)),V){x(V),C(null);const J=URL.createObjectURL(V);p(J)}else x(null)};m.useEffect(()=>()=>{h&&URL.revokeObjectURL(h)},[h]);const ce=async()=>{var O;if(!v)return l;w(!0),C(null),N(0);try{const V=((O=v.name.split(".").pop())==null?void 0:O.toLowerCase())||"png",U=`${rB}/${sB}.${V}`,{error:J}=await ne.storage.from("logos").upload(U,v,{cacheControl:"3600",upsert:!0});if(J)throw J;const{data:k}=ne.storage.from("logos").getPublicUrl(U);if(!(k!=null&&k.publicUrl))throw new Error("Impossible d'obtenir l'URL publique du logo.");const P=`${k.publicUrl}?t=${new Date().getTime()}`;return c(P),x(null),h&&(URL.revokeObjectURL(h),p(null)),P}catch(V){console.error("Erreur upload logo:",V);const U=V instanceof Error?V.message:"Échec de l'upload du logo.";return C(U),_p.error("Erreur Upload Logo",{description:U}),l}finally{w(!1),N(null)}},se=async O=>{var V,U,J,k,P,F,X;O.preventDefault(),H(null),C(null),T(!0);try{let D=l;if(v&&(D=await ce(),!D||_)){H(_||"L'upload du logo a échoué. Veuillez réessayer."),T(!1);return}const z={lab_name:((V=r.lab_name)==null?void 0:V.trim())||null,address_line1:((U=r.address_line1)==null?void 0:U.trim())||null,address_line2:((J=r.address_line2)==null?void 0:J.trim())||null,city_postal_code:((k=r.city_postal_code)==null?void 0:k.trim())||null,phone:((P=r.phone)==null?void 0:P.trim())||null,email:((F=r.email)==null?void 0:F.trim())||null,website:((X=r.website)==null?void 0:X.trim())||null,logo_url:D,selected_template:d};let $=null,K=null;if(e){const{data:re,error:pe}=await ne.from("print_header_config").update(z).eq("id",e).select().single();$=pe,K=re}else{const{data:re,error:pe}=await ne.from("print_header_config").insert(z).select().single();$=pe,K=re,K!=null&&K.id&&t(K.id)}if($)throw $;_p.success("Configuration Enregistrée",{description:"L'en-tête d'impression a été mis à jour avec succès.",duration:3e3})}catch(D){console.error("Erreur sauvegarde configuration:",D);const z=D instanceof Error?D.message:"Une erreur est survenue lors de l'enregistrement.";H(z),_p.error("Erreur Sauvegarde",{description:z})}finally{T(!1)}},B=m.useMemo(()=>{var O;return((O=Np.find(V=>V.id===d))==null?void 0:O.component)||rr},[d]),ie=m.useMemo(()=>({logoUrl:h||l,labName:r.lab_name,addressLine1:r.address_line1,addressLine2:r.address_line2,cityPostalCode:r.city_postal_code,phone:r.phone,email:r.email,website:r.website}),[r,l,h]);return E?s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsx(Y,{className:"h-8 w-3/4 mb-4"}),s.jsx(Y,{className:"h-32 w-full"})," ",s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/2"})}),s.jsxs(Ee,{className:"space-y-4",children:[s.jsx(Y,{className:"h-9 w-full"}),s.jsx(Y,{className:"h-9 w-full"}),s.jsx(Y,{className:"h-9 w-full"})]})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/2"})}),s.jsxs(Ee,{className:"space-y-4",children:[s.jsx(Y,{className:"h-16 w-32 mx-auto"}),s.jsx(Y,{className:"h-9 w-full"})]})]})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/2"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-24 w-full"})})]}),s.jsx(Y,{className:"h-10 w-36 ml-auto"})," "]}):s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(is,{className:"h-6 w-6"}),"Configuration En-tête Impression/PDF"]}),L&&!M&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsxs(qt,{children:[L," ",s.jsx(te,{variant:"link",onClick:q,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),s.jsxs("form",{onSubmit:se,className:"space-y-6",children:[s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsxs(yt,{className:"flex items-center gap-2",children:[s.jsx(PP,{className:"h-5 w-5"})," Modèle d'En-tête"]}),s.jsx(gr,{children:"Choisissez la disposition de l'en-tête pour vos rapports."})]}),s.jsx(Ee,{children:s.jsx(nB,{templates:Np,selectedTemplateId:d,onSelectTemplate:f,disabled:M||b})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(yt,{children:"Informations du Laboratoire"}),s.jsx(gr,{children:"Ces informations apparaîtront dans l'en-tête choisi."})]}),s.jsxs(Ee,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Le,{htmlFor:"lab_name",children:"Nom du Laboratoire"}),s.jsx(Ve,{id:"lab_name",name:"lab_name",value:r.lab_name||"",onChange:G,disabled:M})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Le,{htmlFor:"address_line1",children:"Adresse Ligne 1"}),s.jsx(Ve,{id:"address_line1",name:"address_line1",value:r.address_line1||"",onChange:G,disabled:M})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Le,{htmlFor:"address_line2",children:"Adresse Ligne 2"}),s.jsx(Ve,{id:"address_line2",name:"address_line2",value:r.address_line2||"",onChange:G,disabled:M})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Le,{htmlFor:"city_postal_code",children:"Ville & Code Postal"}),s.jsx(Ve,{id:"city_postal_code",name:"city_postal_code",value:r.city_postal_code||"",onChange:G,disabled:M})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Le,{htmlFor:"phone",children:"Téléphone"}),s.jsx(Ve,{id:"phone",name:"phone",type:"tel",value:r.phone||"",onChange:G,disabled:M})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Le,{htmlFor:"email",children:"E-mail"}),s.jsx(Ve,{id:"email",name:"email",type:"email",value:r.email||"",onChange:G,disabled:M})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(Le,{htmlFor:"website",children:"Site Web"}),s.jsx(Ve,{id:"website",name:"website",type:"url",value:r.website||"",onChange:G,disabled:M})]})]})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(yt,{children:"Logo du Laboratoire"})}),s.jsxs(Ee,{className:"space-y-4",children:[s.jsx(Le,{children:"Aperçu Actuel / Nouveau"}),s.jsxs(Ac,{className:"h-20 w-20 rounded-md border",children:[s.jsx(ef,{src:h||l||void 0,alt:"Logo",className:"object-contain"}),s.jsx(kc,{className:"rounded-md text-muted-foreground",children:s.jsx(gf,{})})]}),s.jsxs(Le,{htmlFor:"logo-upload",className:Ce(Ol({variant:"outline"}),"cursor-pointer w-full",b||M&&"cursor-not-allowed opacity-50"),children:[" ",s.jsx(t3,{className:"mr-2 h-4 w-4"})," ",v?"Changer le logo...":"Choisir un logo..."," "]}),s.jsx(Ve,{id:"logo-upload",type:"file",accept:"image/png, image/jpeg, image/gif, image/svg+xml",onChange:W,className:"hidden",disabled:b||M}),v&&!b&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Fichier : ",v.name]}),b&&s.jsx($$,{value:j,className:"w-full h-2"}),_&&!b&&s.jsxs(Bt,{variant:"destructive",className:"text-xs",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur Upload Précédente"}),s.jsx(qt,{children:_})]})]})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsxs(yt,{children:["Aperçu de l'En-tête (Modèle:"," ",((oe=Np.find(O=>O.id===d))==null?void 0:oe.name)||d,")"]}),s.jsx(gr,{children:"Ceci est une prévisualisation basée sur le modèle sélectionné et les informations saisies."})]}),s.jsx(Ee,{children:s.jsx(B,{data:ie,isPreview:!0})})]}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsxs(te,{type:"submit",disabled:M||b,children:[M?s.jsx(Yt,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(Ll,{className:"mr-2 h-4 w-4"}),"Enregistrer la Configuration"]})})]})]})},iB={pending:"default",approved:"warning",paid:"success"},lB={pending:"En attente",approved:"Approuvé",paid:"Payé"},Ep=10,oB=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(!0),[l,c]=m.useState(null),[d,f]=m.useState(""),[h,p]=m.useState(1),[v,x]=m.useState(0),b=qc(d,300),[w,j]=m.useState(null),[N,_]=m.useState(!1),[C,E]=m.useState(null),[R,M]=m.useState(()=>!sessionStorage.getItem("ristourne_access_granted")),[T,L]=m.useState(""),[H,q]=m.useState(null),[G,W]=m.useState(null),[ce,se]=m.useState(!0);m.useEffect(()=>{(async()=>{se(!0);const{data:X,error:D}=await ne.from("settings").select("ristourne_access_code").limit(1).single();!D&&X&&X.ristourne_access_code?W(X.ristourne_access_code):W(null),se(!1)})()},[]);const B=F=>{F.preventDefault(),T===G?(M(!1),L(""),q(null),sessionStorage.setItem("ristourne_access_granted","1")):q("Code incorrect. Veuillez réessayer.")},ie=async()=>{a(!0),c(null);try{const{count:F}=await ne.from("ristourne").select("id",{count:"exact",head:!0});x(F||0);const X=(h-1)*Ep,D=X+Ep-1,{data:z,error:$}=await ne.from("ristourne").select(`
          *,
          doctor:doctor_id (
            id,
            full_name,
            hospital
          )
        `).order("created_date",{ascending:!1}).range(X,D);if($)throw $;t(z||[])}catch(F){console.error("Erreur lors de la récupération des ristournes:",F),c((F instanceof Error?F.message:"")||"Une erreur est survenue lors du chargement des ristournes."),t([])}finally{a(!1)}};m.useEffect(()=>{ie()},[h]);const oe=m.useMemo(()=>{let F=e;if(b){const X=b.toLowerCase();F=e.filter(D=>{var z,$;return((z=D.doctor)==null?void 0:z.full_name.toLowerCase().includes(X))||(($=D.doctor)==null?void 0:$.hospital)&&D.doctor.hospital.toLowerCase().includes(X)})}return F.slice().sort((X,D)=>new Date(D.created_date).getTime()-new Date(X.created_date).getTime())},[e,b]),O=Math.ceil(v/Ep),V=h>1,U=h<O,J=F=>new Date(F).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),k=F=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(F),P=async()=>{if(w){_(!0),E(null);try{const{error:F}=await ne.from("ristourne").delete().eq("id",w.id);if(F)throw F;j(null),ie()}catch(F){E(F.message||"Erreur lors de la suppression")}finally{_(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsx($l,{open:R,children:s.jsxs(Bl,{className:"max-w-[350px]",children:[s.jsx(Hl,{children:s.jsx(Fl,{children:"Code d'accès requis"})}),s.jsxs("form",{onSubmit:B,className:"space-y-4",children:[s.jsx(Ve,{type:"password",placeholder:"Entrer le code d'accès",value:T,onChange:F=>L(F.target.value),disabled:ce,autoFocus:!0}),H&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsx(qt,{children:H})]}),s.jsx(ql,{children:s.jsx(te,{type:"submit",disabled:ce||!T,children:ce?"Chargement...":"Valider"})})]})]})}),!R&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(C_,{className:"h-6 w-6"}),"Gestion des Ristournes"]}),s.jsx(it,{to:"/ristournes/new",children:s.jsxs(te,{children:[s.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Nouvelle Ristourne"]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx($c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ve,{type:"search",placeholder:"Rechercher par médecin ou hôpital...",value:d,onChange:F=>f(F.target.value),className:"pl-10 w-full md:w-1/3 h-10",disabled:r})]}),r&&s.jsxs("div",{className:"border rounded-lg",children:[s.jsx(Y,{className:"h-12 w-full rounded-t-lg"}),s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"})]})]}),!r&&l&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur de Chargement"}),s.jsxs(qt,{children:[l," ",s.jsx(te,{variant:"link",onClick:ie,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]}),!r&&!l&&s.jsxs("div",{className:"border rounded-lg overflow-hidden bg-background",children:[s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Xt,{children:[s.jsx(ht,{children:"Date"}),s.jsx(ht,{children:"Médecin"}),s.jsx(ht,{children:"Hôpital"}),s.jsx(ht,{children:"Montant Total"}),s.jsx(ht,{children:"Statut"}),s.jsx(ht,{className:"text-right",children:"Actions"})]})}),s.jsx(la,{children:oe.length>0?oe.map(F=>{var X,D;return s.jsxs(Xt,{children:[s.jsx(Ke,{children:J(F.created_date)}),s.jsx(Ke,{className:"font-medium",children:(X=F.doctor)==null?void 0:X.full_name}),s.jsx(Ke,{children:((D=F.doctor)==null?void 0:D.hospital)||s.jsx("span",{className:"italic text-muted-foreground",children:"N/A"})}),s.jsx(Ke,{children:k(F.total_fee)}),s.jsx(Ke,{children:s.jsx(os,{variant:iB[F.status],children:lB[F.status]})}),s.jsxs(Ke,{className:"text-right",children:[s.jsx(it,{to:`/ristournes/${F.id}`,children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Xr,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Modifier"}),s.jsx("span",{className:"sm:hidden",children:"Éditer"})]})}),s.jsxs(te,{variant:"destructive",size:"sm",className:"ml-2",onClick:()=>j(F),disabled:N,children:[s.jsx(Bc,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Supprimer"}),s.jsx("span",{className:"sm:hidden",children:"Del"})]})]})]},F.id)}):s.jsx(Xt,{children:s.jsx(Ke,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:d?"Aucune ristourne ne correspond à votre recherche.":s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[s.jsx("p",{children:"Aucune ristourne n'a été créée."}),s.jsx(it,{to:"/ristournes/new",children:s.jsxs(te,{variant:"link",className:"gap-2",children:[s.jsx(Fa,{className:"h-4 w-4"}),"Créer une ristourne"]})})]})})})})]}),s.jsxs("div",{className:"flex justify-between items-center py-3 px-2 border-t bg-muted text-xs",children:[s.jsxs("div",{children:["Page ",h," sur ",O]}),s.jsxs("div",{className:"space-x-2",children:[s.jsx(te,{size:"sm",variant:"outline",onClick:()=>p(h-1),disabled:!V,children:"Précédent"}),s.jsx(te,{size:"sm",variant:"outline",onClick:()=>p(h+1),disabled:!U,children:"Suivant"})]}),s.jsxs("div",{children:[v," résultats"]})]})]}),s.jsx($l,{open:!!w,onOpenChange:()=>j(null),children:s.jsxs(Bl,{children:[s.jsx(Hl,{children:s.jsx(Fl,{children:"Confirmer la suppression"})}),s.jsxs("div",{children:["Voulez-vous vraiment supprimer cette ristourne ? Cette action est irréversible.",C&&s.jsxs(Bt,{variant:"destructive",className:"mt-2",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsx(qt,{children:C})]})]}),s.jsxs(ql,{children:[s.jsx(te,{variant:"outline",onClick:()=>j(null),disabled:N,children:"Annuler"}),s.jsx(te,{variant:"destructive",onClick:P,loading:N,children:"Supprimer"})]})]})})]})]})},ij=()=>{const e=or(),{ristourneId:t}=yr(),r=!!t,[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(40),[p,v]=m.useState(100),[x,b]=m.useState(!1),[w,j]=m.useState([]),[N,_]=m.useState(""),[C,E]=m.useState(0),[R,M]=m.useState("pending"),[T,L]=m.useState([]),[H,q]=m.useState(!0),[G,W]=m.useState(!1),[ce,se]=m.useState(null),B=[{value:"pending",label:"En attente"},{value:"paid",label:"Payé"}];m.useEffect(()=>{(async()=>{try{const{data:$,error:K}=await ne.from("doctor").select("*");if(K){se("Erreur lors du chargement des médecins"),console.error("Error fetching doctors:",K);return}if(L($||[]),r&&t){const{data:re,error:pe}=await ne.from("ristourne").select(`
              *,
              doctor:doctor_id(*),
              ristourne_patient_result(
                *,
                patient_result:patient_result_id(
                  *,
                  patient:patient_id(*)
                )
              )
            `).eq("id",t).single();if(pe){se("Erreur lors du chargement de la ristourne"),console.error("Error fetching ristourne:",pe);return}if(re){l(re.doctor),_(re.notes||""),E(re.total_fee),M(re.status);const ue=re.ristourne_patient_result.map(_e=>({..._e.patient_result,calculatedFee:_e.fee_amount,isSelected:!0,isSelectedInitial:!0,patient:_e.patient_result.patient}));if(j(ue),re.doctor){const{data:_e}=await ne.from("doctor_fee_config").select("*").eq("doctor_id",re.doctor.id).order("effective_date",{ascending:!1}).limit(1).single();_e&&(d(_e),h(_e.normal_price_percentage),v(_e.insurance_price_percentage),await U(re.doctor.id,_e,ue))}}}}catch($){console.error("Error:",$),se("Une erreur est survenue lors du chargement des données")}finally{q(!1)}})()},[r,t]);const ie=(z,$)=>{const K=z.normal_price?z.normal_price*$.normal_price_percentage/100:0,re=z.insurance_price?z.insurance_price*$.insurance_price_percentage/100:0;return Math.round(K+re)},oe=m.useCallback((z,$)=>{if(!$)return z;const K=z.map(pe=>({...pe,calculatedFee:ie(pe,$)})),re=K.filter(pe=>pe.isSelected).reduce((pe,ue)=>pe+ue.calculatedFee,0);return E(re),K},[]),O=(z,$)=>{j(K=>{const re=K.map(pe=>pe.id===z?{...pe,isSelected:$}:pe);if(c){const pe=re.filter(ue=>ue.isSelected).reduce((ue,_e)=>ue+_e.calculatedFee,0);E(pe)}return re})},V=async()=>{if(a){b(!0);try{const z={doctor_id:a.id,normal_price_percentage:f,insurance_price_percentage:p,effective_date:new Date().toISOString()},{data:$,error:K}=await ne.from("doctor_fee_config").insert(z).select().single();if(K)throw K;d($),j(re=>oe(re,$)),await U(a.id,$,w.filter(re=>re.isSelected))}catch(z){console.error("Error saving fee config:",z),se(z.message||"Une erreur est survenue lors de la sauvegarde de la configuration")}finally{b(!1)}}},U=async(z,$,K)=>{let re=[];K&&K.length>0&&(re=K.map(me=>me.id));let pe=[];if(r&&t){const{data:me,error:De}=await ne.from("ristourne_patient_result").select("patient_result_id, ristourne(status, id)");!De&&Array.isArray(me)&&(pe=me.filter(ye=>ye.ristourne&&["paid","pending"].includes(ye.ristourne.status)&&ye.ristourne.id!==t).map(ye=>ye.patient_result_id))}else{const{data:me,error:De}=await ne.from("ristourne_patient_result").select("patient_result_id, ristourne(status)");!De&&Array.isArray(me)&&(pe=me.filter(ye=>ye.ristourne&&["paid","pending"].includes(ye.ristourne.status)).map(ye=>ye.patient_result_id))}let ue=ne.from("patient_result").select("*, patient:patient_id(*)");if(ue=ue.eq("isFree",!1),re.length>0?(ue=ue.or(`paid_status.eq.unpaid,or(paid_status.eq.paid,id.in.(${re.join(",")}))`),ue=ue.eq("doctor_id",z)):ue=ue.eq("doctor_id",z).eq("paid_status","unpaid"),pe.length>0){const me=pe.filter(De=>!re.includes(De));me.length>0&&(ue=ue.not("id","in",`(${me.join(",")})`))}const{data:_e,error:Re}=await ue;if(Re){se("Erreur lors du chargement des résultats"),console.error("Error fetching patient results:",Re);return}const lt=new Map((K==null?void 0:K.map(me=>[me.id,me]))||[]),rt=(_e||[]).map(me=>{const De=lt.get(me.id);return{...me,calculatedFee:(De==null?void 0:De.calculatedFee)||ie(me,$),isSelected:!!De}});j(rt);const ge=rt.filter(me=>me.isSelected).reduce((me,De)=>me+De.calculatedFee,0);E(ge)};m.useEffect(()=>{a?(async $=>{const{data:K,error:re}=await ne.from("doctor_fee_config").select("*").eq("doctor_id",$).order("effective_date",{ascending:!1}).limit(1).single();if(re&&re.code!=="PGRST116"){se("Erreur lors du chargement de la configuration des frais"),console.error("Error fetching doctor fee config:",re);return}K?(d(K),h(K.normal_price_percentage),v(K.insurance_price_percentage),await U($,K,w)):(d(null),h(40),v(100),j([]))})(a.id):(d(null),j([]),E(0))},[a]);const J=z=>{const $=T.find(K=>K.id===z);l($||null)},k=z=>{M(z)},P=async z=>{if(z.preventDefault(),!a){se("Veuillez sélectionner un médecin");return}const $=w.filter(K=>K.isSelected);W(!0),se(null);try{if(r){const ue=w.filter(_e=>_e.isSelectedInitial).map(_e=>_e.id).filter(_e=>!$.some(Re=>Re.id===_e));ue.length>0&&await ne.from("patient_result").update({paid_status:"unpaid"}).in("id",ue)}const{data:K,error:re}=await ne.rpc("handle_ristourne_upsert",{p_ristourne_id:t||null,p_doctor_id:a.id,p_notes:N,p_total_fee:C,p_status:R,p_patient_results:$.map(pe=>({patient_result_id:pe.id,fee_amount:pe.calculatedFee}))});if(re)throw re;e("/ristournes",{state:{message:`Ristourne ${r?"modifiée":"créée"} avec succès.`}})}catch(K){console.error("Error saving ristourne:",K),se(K.message||"Une erreur est survenue lors de la sauvegarde")}finally{W(!1)}};m.useEffect(()=>{r&&w.length>0&&j(z=>z.map($=>({...$,isSelectedInitial:$.isSelectedInitial??$.isSelected})))},[r,w.length]);const F=w.length>0&&w.every(z=>z.isSelected),X=w.some(z=>z.isSelected),D=z=>{if(j($=>$.map(K=>({...K,isSelected:z}))),c){const $=w.map(K=>({...K,isSelected:z})).filter(K=>K.isSelected).reduce((K,re)=>K+re.calculatedFee,0);E($)}};return H?s.jsxs("div",{className:"container mx-auto p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Y,{className:"h-10 w-10"}),s.jsx(Y,{className:"h-10 w-40"})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-8 w-3/4"}),s.jsx(Y,{className:"h-4 w-1/2"})]}),s.jsxs(Ee,{className:"space-y-4",children:[s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-10 w-full"}),s.jsx(Y,{className:"h-32 w-full"})]})]})]}):s.jsxs("div",{className:"ristourne-print-root container mx-auto p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsx(te,{variant:"outline",size:"icon",onClick:()=>e("/ristournes"),children:s.jsx(Nn,{className:"h-4 w-4"})}),s.jsxs("h1",{className:"text-2xl font-bold",children:[r?"Modifier":"Nouvelle"," Ristourne"]}),s.jsx(te,{variant:"default",className:"ml-auto",onClick:()=>window.print(),children:"Imprimer"})]}),ce&&s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsx(qt,{children:ce})]}),s.jsxs("div",{className:"ristourne-print-summary  hidden print:block",children:[s.jsxs("h1",{children:["Ristourne: ",(a==null?void 0:a.full_name)||"-"]}),s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Patient"}),s.jsx("th",{children:"Date"}),s.jsx("th",{children:"Prix"}),s.jsx("th",{children:"Prix AMO"}),s.jsx("th",{children:"Montant"})]})}),s.jsx("tbody",{children:w.filter(z=>z.isSelected&&z.paid_status==="paid").length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,children:"Aucun résultat payé sélectionné"})}):w.filter(z=>z.isSelected&&z.paid_status==="paid").map(z=>{var $,K;return s.jsxs("tr",{children:[s.jsx("td",{children:z.patient.full_name}),s.jsx("td",{children:z.result_date?Je(new Date(z.result_date),"dd/MM/yyyy"):""}),s.jsxs("td",{children:[($=z.normal_price)==null?void 0:$.toLocaleString()," "]}),s.jsxs("td",{children:[(K=z.insurance_price)==null?void 0:K.toLocaleString()," "]}),s.jsxs("td",{children:[z.calculatedFee.toLocaleString()," "]})]},z.id)})})]}),s.jsx("div",{className:"flex items-center justify-end",children:s.jsxs(os,{variant:"secondary",className:"text-lg px-4 py-2",children:["Total: ",C.toLocaleString()," FCFA"]})})]}),s.jsxs("form",{className:"ristourne-print-area print:hidden",onSubmit:P,children:[s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(yt,{children:"Sélection du Médecin"}),s.jsx(gr,{children:"Sélectionnez le médecin pour lequel vous souhaitez créer une ristourne"})]}),s.jsx(Ee,{children:s.jsxs(Jn,{value:a==null?void 0:a.id,onValueChange:J,disabled:G,children:[s.jsx(tr,{children:s.jsx(er,{placeholder:"Sélectionner un médecin..."})}),s.jsx(nr,{children:T.map(z=>s.jsx(bt,{value:z.id,children:z.full_name},z.id))})]})})]}),a&&s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(yt,{children:"Configuration des Frais"}),s.jsx(gr,{children:c?"Modifier la configuration des frais du médecin":"Créer une nouvelle configuration des frais pour le médecin"})]}),s.jsx(Ee,{children:s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Le,{htmlFor:"normalPrice",children:"Pourcentage Prix Normal"}),s.jsx(Ve,{id:"normalPrice",type:"number",min:"0",max:"100",value:f,onChange:z=>h(Number(z.target.value))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Le,{htmlFor:"insurancePrice",children:"Pourcentage Prix Assurance"}),s.jsx(Ve,{id:"insurancePrice",type:"number",min:"0",max:"100",value:p,onChange:z=>v(Number(z.target.value))})]})]})}),s.jsx(ls,{children:s.jsxs(te,{type:"button",onClick:V,disabled:x,children:[x&&s.jsx(Yt,{className:"mr-2 h-4 w-4 animate-spin"}),s.jsx(Ll,{className:"mr-2 h-4 w-4"}),c?"Mettre à jour":"Enregistrer"]})})]}),a&&c&&s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(yt,{children:"Sélection des Résultats"}),s.jsx(gr,{children:"Sélectionnez les résultats à inclure dans la ristourne"})]}),s.jsxs(Ee,{children:[s.jsx("div",{className:"rounded-md border",children:s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Xt,{children:[s.jsx(ht,{className:"w-12",children:s.jsx(ea,{checked:F,indeterminate:X&&!F,onCheckedChange:z=>D(!!z),disabled:G||w.length===0,"aria-label":"Tout sélectionner"})}),s.jsx(ht,{children:"Patient"}),s.jsx(ht,{children:"Date"}),s.jsx(ht,{children:"Prix Normal"}),s.jsx(ht,{children:"Prix Assurance"}),s.jsx(ht,{className:"text-right",children:"Frais Calculés"})]})}),s.jsx(la,{children:w.length===0?s.jsx(Xt,{children:s.jsx(Ke,{colSpan:6,className:"text-center text-muted-foreground",children:"Aucun résultat non payé trouvé pour ce médecin"})}):w.map(z=>{var $,K;return s.jsxs(Xt,{children:[s.jsx(Ke,{children:s.jsx(ea,{checked:z.isSelected,onCheckedChange:re=>O(z.id,re),disabled:G})}),s.jsx(Ke,{children:z.patient.full_name}),s.jsx(Ke,{children:z.result_date?Je(new Date(z.result_date),"dd/MM/yyyy"):""}),s.jsxs(Ke,{children:[($=z.normal_price)==null?void 0:$.toLocaleString()," FCFA"]}),s.jsxs(Ke,{children:[(K=z.insurance_price)==null?void 0:K.toLocaleString()," FCFA"]}),s.jsxs(Ke,{className:"text-right font-medium",children:[z.calculatedFee.toLocaleString()," FCFA"]})]},z.id)})})]})}),s.jsx("div",{className:"mt-4 flex justify-end items-center gap-2 print:block",children:s.jsxs(os,{variant:"secondary",className:"text-lg px-4 py-2",children:["Total: ",C.toLocaleString()," FCFA"]})})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(yt,{children:"Statut"}),s.jsx(gr,{children:"Sélectionnez le statut de la ristourne"})]}),s.jsx(Ee,{children:s.jsxs(Jn,{value:R,onValueChange:k,children:[s.jsx(tr,{children:s.jsx(er,{placeholder:"Sélectionner un statut"})}),s.jsx(nr,{children:B.map(z=>s.jsx(bt,{value:z.value,children:z.label},z.value))})]})})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(yt,{children:"Notes"}),s.jsx(gr,{children:"Ajoutez des notes ou commentaires optionnels"})]}),s.jsx(Ee,{children:s.jsx(Cc,{value:N,onChange:z=>_(z.target.value),placeholder:"Notes ou commentaires...",disabled:G})})]}),s.jsx(Se,{children:s.jsxs(ls,{className:"flex justify-end space-x-4",children:[s.jsx(te,{type:"button",variant:"outline",onClick:()=>e("/ristournes"),disabled:G,children:"Annuler"}),s.jsxs(te,{type:"submit",disabled:G||!c,children:[G&&s.jsx(Yt,{className:"mr-2 h-4 w-4 animate-spin"}),s.jsx(Ll,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})]})})]})]})},cB=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(""),[l,c]=m.useState("category"),[d,f]=m.useState(!1),[h,p]=m.useState(null),[v,x]=m.useState(null),b=async()=>{f(!0),p(null);const{data:N,error:_}=await ne.from("skip_range_check").select("id, value, type").order("type").order("value");!_&&N?t(N):p("Erreur lors du chargement des valeurs."),f(!1)};m.useEffect(()=>{b()},[]);const w=async N=>{if(N.preventDefault(),!r.trim())return;f(!0),p(null);const{error:_}=await ne.from("skip_range_check").insert({value:r.trim(),type:l});_?p("Erreur lors de l'ajout."):(a(""),b()),f(!1)},j=async N=>{f(!0),p(null);const{error:_}=await ne.from("skip_range_check").delete().eq("id",N);_?p("Erreur lors de la suppression."):b(),f(!1)};return s.jsx("div",{className:"max-w-xl mx-auto mt-10",children:s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(yt,{children:"Gestion des valeurs à ignorer pour le contrôle des plages"})}),s.jsxs(Ee,{children:[s.jsxs("form",{onSubmit:w,className:"flex gap-2 mb-6",children:[s.jsx(Ve,{placeholder:"Nom de la catégorie ou du test type",value:r,onChange:N=>a(N.target.value),disabled:d,required:!0}),s.jsxs(Jn,{value:l,onValueChange:N=>c(N),children:[s.jsx(tr,{className:"w-32",children:s.jsx(er,{})}),s.jsxs(nr,{children:[s.jsx(bt,{value:"category",children:"Catégorie"}),s.jsx(bt,{value:"test_type",children:"Test Type"})]})]}),s.jsx(te,{type:"submit",disabled:d,children:"Ajouter"})]}),h&&s.jsx("div",{className:"text-red-500 mb-2",children:h}),d?s.jsx("div",{children:"Chargement…"}):s.jsx("ul",{className:"space-y-2",children:e.map(({id:N,value:_,type:C})=>s.jsxs("li",{className:"flex items-center justify-between border-b pb-2",children:[s.jsxs("span",{children:[s.jsxs("span",{className:"font-semibold",children:[C==="category"?"Catégorie":"Test Type",":"]})," ",_]}),s.jsxs(wc,{children:[s.jsx(wf,{asChild:!0,children:s.jsx(te,{variant:"destructive",size:"sm",disabled:d,onClick:()=>x(N),children:"Supprimer"})}),s.jsxs(jf,{children:[s.jsxs(_f,{children:[s.jsx(Sf,{children:"Confirmer la suppression"}),s.jsx(Ef,{children:"Voulez-vous vraiment supprimer cette valeur à ignorer ? Cette action est irréversible."})]}),s.jsxs(Nf,{children:[s.jsx(Cf,{asChild:!0,children:s.jsx(te,{variant:"outline",onClick:()=>x(null),children:"Annuler"})}),s.jsx(av,{asChild:!0,children:s.jsx(te,{variant:"destructive",onClick:async()=>{await j(N),x(null)},children:"Supprimer"})})]})]})]})]},N))})]})]})})},uB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},dB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},fB=()=>{const{resultId:e}=yr();or();const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(null),[p,v]=m.useState(!0),[x,b]=m.useState(!1),[w,j]=m.useState(null),[N,_]=m.useState(null),[C,E]=m.useState(""),[R,M]=m.useState(!1),[T,L]=m.useState(""),[H,q]=m.useState(""),[G,W]=m.useState(!1),[ce,se]=m.useState(null),B=[{id:"template1",component:rr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],ie="template1",[oe,O]=m.useState(null),[V,U]=m.useState(!0),J=async()=>{if(!e){j("ID du résultat manquant."),v(!1);return}v(!0),j(null),_(null),r(null),l(null),d(null),h(null),U(!0),O(null);try{const{data:$,error:K}=await ne.from("patient_result").select("*").eq("id",e).single();if(K)throw K;if(!$)throw new Error("Résultat non trouvé.");r($);const[re,pe,ue,_e]=await Promise.all([ne.from("patient").select("*").eq("id",$.patient_id).single(),ne.from("doctor").select("*").eq("id",$.doctor_id).single(),ne.from("protidogramme").select("*").eq("result_id",e).maybeSingle(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);re.error&&console.warn("Erreur chargement patient:",re.error.message),pe.error&&console.warn("Erreur chargement médecin:",pe.error.message),l(re.data),d(pe.data),h(ue.data||null),O(_e.data),U(!1)}catch($){console.error("Erreur chargement détails du résultat:",$),j($.message||"Une erreur est survenue lors du chargement du résultat.")}finally{v(!1)}};m.useEffect(()=>{J()},[e]),m.useEffect(()=>{L((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),q((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const k=m.useCallback(async $=>{if(e)try{const{error:K}=await ne.from("patient_result").update({description:$}).eq("id",e);if(K)throw K}catch(K){console.error("Error saving description:",K)}},[e]);m.useEffect(()=>{const $=setTimeout(()=>{C!==(t==null?void 0:t.description)&&k(C)},1e3);return()=>clearTimeout($)},[C,t==null?void 0:t.description,k]);const P=m.useCallback(async()=>{W(!0),se(null);try{const $=T!==""?Number(T):null,K=H!==""?Number(H):null;if(T!==""&&isNaN($)||H!==""&&isNaN(K)){se("Les prix doivent être des nombres valides."),W(!1);return}const{error:re,data:pe}=await ne.from("patient_result").update({normal_price:$,insurance_price:K}).eq("id",t.id).select().single();if(re)throw re;r(ue=>ue&&{...ue,normal_price:$,insurance_price:K}),M(!1)}catch($){se($.message||"Erreur lors de la sauvegarde des prix.")}finally{W(!1)}},[t,T,H]),F=async $=>{if(!(!t||$===t.status)){b(!0),_(null);try{const{data:K,error:re}=await ne.from("patient_result").update({status:$}).eq("id",t.id).select().single();if(re)throw re;r(K||(pe=>pe?{...pe,status:$}:null))}catch(K){console.error("Erreur mise à jour statut:",K),_(K.message||"Impossible de mettre à jour le statut.")}finally{b(!1)}}},X=($,K,re,pe)=>{const ue=$;return s.jsxs("div",{className:Ce("flex items-start space-x-3",pe),children:[s.jsx(ue,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:K}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:re||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},D=m.useMemo(()=>{var K;const $=(oe==null?void 0:oe.selected_template)||ie;return((K=B.find(re=>re.id===$))==null?void 0:K.component)||rr},[oe]),z=m.useMemo(()=>({logoUrl:(oe==null?void 0:oe.logo_url)||null,labName:oe==null?void 0:oe.lab_name,addressLine1:oe==null?void 0:oe.address_line1,addressLine2:oe==null?void 0:oe.address_line2,cityPostalCode:oe==null?void 0:oe.city_postal_code,phone:oe==null?void 0:oe.phone,email:oe==null?void 0:oe.email,website:oe==null?void 0:oe.website}),[oe]);return p?s.jsxs("div",{className:"space-y-6",children:[s.jsx(Y,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-20 w-full"})})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-20 w-full"})})]})]}):w?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(it,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsxs(qt,{children:[w," ",s.jsx(te,{variant:"link",onClick:J,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(it,{to:a?`/patients/${a.id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(is,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),s.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[oe?s.jsx("div",{className:"mb-2 print:mb-0",children:s.jsx(D,{data:z,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Bt,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"En-tête Manquant"}),s.jsxs(qt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(it,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Wr,{className:"my-2 print:my-0 print:border-none"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs(Se,{className:"overflow-hidden print:shadow-none",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[X(We,"NOM PRENOM",a==null?void 0:a.full_name),X(We,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),X(Kt,"Date Naissance",a!=null&&a.date_of_birth?Je(Dt(a.date_of_birth),"P",{locale:Tt}):null),s.jsx("div",{className:"hidden print:block",children:X(Kt,"Date Résultat",t.result_date?Je(Dt(t.result_date),"Pp",{locale:Tt}):null)})]})]}),s.jsxs(Se,{className:"overflow-hidden print:shadow-none _print:border-none",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[X(Gt,"NOM PRENOM",c==null?void 0:c.full_name),X(lr,"Téléphone",c==null?void 0:c.phone),X(We,"Provenance",c==null?void 0:c.hospital)]})]}),s.jsxs(Se,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[X(Kt,"Date Résultat",t.result_date?Je(Dt(t.result_date),"Pp",{locale:Tt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),R?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:$=>L($.target.value),disabled:G}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),R?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:H,onChange:$=>q($.target.value),disabled:G}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:H,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:R?s.jsxs(s.Fragment,{children:[s.jsxs(te,{size:"xs",variant:"secondary",onClick:P,disabled:G,children:[G?s.jsx(Yt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(te,{size:"xs",variant:"outline",onClick:()=>M(!1),disabled:G,children:"Annuler"})]}):s.jsx(te,{size:"xs",variant:"outline",onClick:()=>M(!0),children:"Modifier Prix"})}),ce&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:ce})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(We,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Jn,{value:t.status??"",onValueChange:$=>F($),disabled:x,children:[s.jsxs(tr,{id:"resultStatus",className:"h-9 flex-1",children:[" ",s.jsx(er,{placeholder:"Changer statut..."})," "]}),s.jsxs(nr,{children:[s.jsx(bt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(bt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(bt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Di,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),x&&s.jsx(Yt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),N&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:N}),s.jsx(os,{variant:uB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:dB(t.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]}),X(We,"NOM PRENOM",a==null?void 0:a.full_name),X(We,"ID Unique",a==null?void 0:a.patient_unique_id),X(Kt,"Date de Naissance",a!=null&&a.date_of_birth?Je(Dt(a.date_of_birth),"P",{locale:Tt}):null)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Zn,{className:"h-4 w-4"})," Médecin"]}),X(Gt,"NOM PRENOM",c==null?void 0:c.full_name),X(lr,"Téléphone",c==null?void 0:c.phone),X(We,"Hôpital",c==null?void 0:c.hospital)]})]}),s.jsxs(Se,{className:"shadow print:shadow-none print:border-none",children:[s.jsx(Me,{className:"flex-row items-center gap-2 print:hidden",children:s.jsx(yt,{className:"flex-1 text-lg",children:"Protidogramme"})}),s.jsx(Ee,{children:s.jsx(hB,{})})]})]})," "]}):s.jsx("div",{children:"Résultat non trouvé."})},hB=()=>{const{resultId:e}=yr(),[t,r]=m.useState(null),[a,l]=m.useState(!0),[c,d]=m.useState(null),[f,h]=m.useState(!1),[p,v]=m.useState(""),[x,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(!1),[C,E]=m.useState(null),R=m.useRef(null);m.useEffect(()=>{e&&(l(!0),d(null),ne.from("protidogramme").select("*").eq("result_id",e).single().then(({data:q,error:G})=>{G&&G.code!=="PGRST116"&&d("Erreur de chargement"),r(q),v((q==null?void 0:q.description)||""),j(q!=null&&q.image?M(q.image):null),l(!1)}))},[e,f]);function M(q){return ne.storage.from("images").getPublicUrl(q).data.publicUrl}function T(q){var W;const G=((W=q.target.files)==null?void 0:W[0])||null;b(G),j(G?URL.createObjectURL(G):null)}async function L(q){if(q.preventDefault(),!e)return;_(!0),E(null);let G=(t==null?void 0:t.image)||null;try{if(x){const ce=x.name.split(".").pop(),se=`protidogramme/${e}_${Date.now()}.${ce}`,{error:B}=await ne.storage.from("images").upload(se,x,{upsert:!0});if(B){E("Erreur lors de l'upload de l'image"),_(!1),console.error(B);return}G=se}const{error:W}=await ne.from("protidogramme").upsert({result_id:e,image:G,description:p,updated_at:new Date().toISOString()},{onConflict:"result_id"});if(W){E("Erreur lors de la sauvegarde"),_(!1),console.error(W);return}h(!1),b(null)}catch(W){E("Erreur inattendue lors de la sauvegarde"),console.error(W)}finally{_(!1)}}function H(){window.print()}return a?s.jsxs("div",{className:"max-w-xl mx-auto py-10",children:[s.jsx(Y,{className:"h-40 w-full mb-4"}),s.jsx(Y,{className:"h-6 w-1/2"})]}):s.jsxs("div",{className:"max-w-xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 print:hidden",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Protidogramme"}),s.jsx("div",{className:"flex gap-2",children:!f&&s.jsxs(te,{variant:"outline",size:"sm",onClick:H,children:[s.jsx(vf,{className:"w-4 h-4 mr-1"})," Imprimer"]})})]}),s.jsxs(Se,{className:"shadow print:shadow-none print:border-none",children:[s.jsxs(Me,{className:"flex-row items-center gap-2 print:hidden",children:[s.jsx(yt,{className:"flex-1 text-lg",children:f?t?"Modifier":"Ajouter":"Aperçu"}),!f&&s.jsxs(te,{size:"sm",variant:"secondary",onClick:()=>h(!0),children:[s.jsx(Xr,{className:"w-4 h-4 mr-1"})," Modifier"]})]}),s.jsx(Ee,{children:f?s.jsxs("form",{className:"space-y-4",onSubmit:L,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block mb-1 font-medium",children:"Image"}),w&&s.jsx("img",{src:w,alt:"Aperçu",className:"max-h-60 rounded  mb-2"}),s.jsx(Ve,{type:"file",accept:"image/*",onChange:T,ref:R}),C&&s.jsx("div",{className:"text-red-500 text-sm mt-1",children:C})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block mb-1 font-medium",children:"Description"}),s.jsx(Cc,{value:p,onChange:q=>v(q.target.value),rows:4,required:!0,className:"resize-vertical"})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx(te,{type:"submit",disabled:N,children:N?s.jsxs(s.Fragment,{children:[s.jsx(Yt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ll,{className:"mr-2 h-4 w-4"}),"Sauvegarder"]})}),s.jsxs(te,{type:"button",variant:"outline",onClick:()=>{h(!1),E(null),b(null),j(t!=null&&t.image?M(t.image):null),v((t==null?void 0:t.description)||"")},children:[s.jsx(xf,{className:"w-4 h-4 mr-1"})," Annuler"]})]})]}):s.jsxs("div",{className:"print:block",children:[(t==null?void 0:t.image)&&s.jsx("img",{src:M(t.image),alt:"Protidogramme",className:"max-h-96 mb-4 rounded border mx-auto print:max-h-[450px]",style:{maxWidth:"100%"}}),s.jsx("div",{className:"prose prose-sm print:prose print:max-w-full print:break-words",children:t!=null&&t.description?s.jsxs("div",{children:[" ",t.description.split(`
`).map(q=>s.jsxs("div",{children:[" ",q," "]},q))," "]}):s.jsx("span",{className:"text-muted-foreground",children:"Aucune description"})}),s.jsx("div",{className:"mt-4",children:s.jsx(so,{date:new Date().toISOString()||""})})]})})]})]})},mB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},pB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},gB=()=>{const{resultId:e}=yr();or();const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(!0),[p,v]=m.useState(!1),[x,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(""),[C,E]=m.useState(!1),[R,M]=m.useState(""),[T,L]=m.useState(""),[H,q]=m.useState(!1),[G,W]=m.useState(null),ce=[{id:"template1",component:rr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],se="template1",[B,ie]=m.useState(null),[oe,O]=m.useState(!0),[V,U]=m.useState(null),[J,k]=m.useState(!0);m.useEffect(()=>{(async()=>{if(k(!0),!e)return;const{data:je,error:Pe}=await ne.from("atbs_result").select("id, nature_prelevement, souche").eq("result_id",e).single();je&&U(je.id),k(!1)})()},[e]);const P=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),r(null),l(null),d(null),O(!0),ie(null);try{const{data:ye,error:je}=await ne.from("patient_result").select("*").eq("id",e).single();if(je)throw je;if(!ye)throw new Error("Résultat non trouvé.");r(ye);const[Pe,Ye,qe]=await Promise.all([ne.from("patient").select("*").eq("id",ye.patient_id).single(),ne.from("doctor").select("*").eq("id",ye.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);Pe.error&&console.warn("Erreur chargement patient:",Pe.error.message),Ye.error&&console.warn("Erreur chargement médecin:",Ye.error.message),l(Pe.data),d(Ye.data),ie(qe.data),O(!1)}catch(ye){console.error("Erreur chargement détails du résultat:",ye),b(ye.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{P()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),L((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const F=m.useCallback(async ye=>{if(e)try{const{error:je}=await ne.from("patient_result").update({description:ye}).eq("id",e);if(je)throw je}catch(je){console.error("Error saving description:",je)}},[e]);m.useEffect(()=>{const ye=setTimeout(()=>{N!==(t==null?void 0:t.description)&&F(N)},1e3);return()=>clearTimeout(ye)},[N,t==null?void 0:t.description,F]);const X=m.useCallback(async()=>{q(!0),W(null);try{const ye=R!==""?Number(R):null,je=T!==""?Number(T):null;if(R!==""&&isNaN(ye)||T!==""&&isNaN(je)){W("Les prix doivent être des nombres valides."),q(!1);return}const{error:Pe,data:Ye}=await ne.from("patient_result").update({normal_price:ye,insurance_price:je}).eq("id",t.id).select().single();if(Pe)throw Pe;r(qe=>qe&&{...qe,normal_price:ye,insurance_price:je}),E(!1)}catch(ye){W(ye.message||"Erreur lors de la sauvegarde des prix.")}finally{q(!1)}},[t,R,T]),D=async ye=>{if(!(!t||ye===t.status)){v(!0),j(null);try{const{data:je,error:Pe}=await ne.from("patient_result").update({status:ye}).eq("id",t.id).select().single();if(Pe)throw Pe;r(je||(Ye=>Ye?{...Ye,status:ye}:null))}catch(je){console.error("Erreur mise à jour statut:",je),j(je.message||"Impossible de mettre à jour le statut.")}finally{v(!1)}}},[z,$]=m.useState([]),[K,re]=m.useState(!1);m.useEffect(()=>{e&&(re(!0),ne.from("atbs_result").select("*").eq("result_id",e).then(({data:ye})=>{$(ye||[]),re(!1)}))},[e]);const[pe,ue]=m.useState([]),_e=ye=>{ue(je=>je.includes(ye)?je.filter(Pe=>Pe!==ye):[...je,ye])},Re=(ye,je,Pe,Ye)=>{const qe=ye;return s.jsxs("div",{className:Ce("flex items-start space-x-3",Ye),children:[s.jsx(qe,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:je}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:Pe||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},lt=m.useMemo(()=>{var je;const ye=(B==null?void 0:B.selected_template)||se;return((je=ce.find(Pe=>Pe.id===ye))==null?void 0:je.component)||rr},[B]),rt=m.useMemo(()=>({logoUrl:(B==null?void 0:B.logo_url)||null,labName:B==null?void 0:B.lab_name,addressLine1:B==null?void 0:B.address_line1,addressLine2:B==null?void 0:B.address_line2,cityPostalCode:B==null?void 0:B.city_postal_code,phone:B==null?void 0:B.phone,email:B==null?void 0:B.email,website:B==null?void 0:B.website}),[B]),[ge,me]=m.useState(!1),De=async()=>{if(e){me(!0);try{const{data:ye,error:je}=await ne.from("atbs_result").insert({result_id:e}).select("id");if(je||!ye||!ye[0])throw je;const Pe=ye[0].id,{data:Ye,error:qe}=await ne.from("atbs").select("id");if(qe||!Ye)throw qe;const gt=Ye.map(Mt=>({atbs_result_id:Pe,atb_id:Mt.id}));gt.length>0&&await ne.from("atbs_result_atb").insert(gt),window.location.reload()}catch{me(!1)}}};return m.useEffect(()=>!e||f?void 0:((async()=>{const{data:je,error:Pe}=await ne.from("atbs_result").select("id").eq("result_id",e);if(Pe){console.error("Erreur lors de la vérification d'atbs_result:",Pe);return}if(je&&je.length>0)return;const{data:Ye,error:qe}=await ne.from("atbs_result").insert({result_id:e}).select("id").single();if(qe||!Ye){console.error("Erreur lors de la création d'atbs_result:",qe);return}const{data:gt,error:Mt}=await ne.from("atbs").select("id");if(Mt||!gt){console.error("Erreur lors de la récupération des ATBs:",Mt);return}const Qt=gt.map(Be=>({atbs_result_id:Ye.id,atb_id:Be.id}));if(Qt.length>0){const{error:Be}=await ne.from("atbs_result_atb").insert(Qt);Be&&console.error("Erreur lors de la création des atbs_result_atb:",Be)}})(),()=>{}),[e,f]),f?s.jsxs("div",{className:"space-y-6",children:[s.jsx(Y,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-20 w-full"})})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-20 w-full"})})]})]}):x?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(it,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsxs(qt,{children:[x," ",s.jsx(te,{variant:"link",onClick:P,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(it,{to:a?`/patients/${a.id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(is,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]}),s.jsxs("div",{className:"flex justify-end",children:[s.jsx(te,{variant:"default",onClick:()=>window.print(),children:"Imprimer"}),s.jsx(te,{variant:"secondary",onClick:De,disabled:ge,children:ge?"Création...":"Créer un nouvel ATB Résultat"})]})]}),s.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[B?s.jsx("div",{className:"mb-2 print:mb-0",children:s.jsx(lt,{data:rt,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Bt,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"En-tête Manquant"}),s.jsxs(qt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(it,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Wr,{className:"my-2 print:my-0 print:border-none print:hidden"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs(Se,{className:"overflow-hidden print:shadow-none",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Re(We,"NOM PRENOM",a==null?void 0:a.full_name),Re(We,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),Re(Kt,"Date Naissance",a!=null&&a.date_of_birth?Je(Dt(a.date_of_birth),"P",{locale:Tt}):null),s.jsx("div",{className:"hidden print:block",children:Re(Kt,"Date Résultat",t.result_date?Je(Dt(t.result_date),"Pp",{locale:Tt}):null)})]})]}),s.jsxs(Se,{className:"overflow-hidden print:shadow-none _print:border-none",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Re(Gt,"NOM PRENOM",c==null?void 0:c.full_name),Re(lr,"Téléphone",c==null?void 0:c.phone),Re(We,"Provenance",c==null?void 0:c.hospital)]})]}),s.jsxs(Se,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[Re(Kt,"Date Résultat",t.result_date?Je(Dt(t.result_date),"Pp",{locale:Tt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),C?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:R,onChange:ye=>M(ye.target.value),disabled:H}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:R,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),C?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:ye=>L(ye.target.value),disabled:H}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:C?s.jsxs(s.Fragment,{children:[s.jsxs(te,{size:"xs",variant:"secondary",onClick:X,disabled:H,children:[H?s.jsx(Yt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(te,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:H,children:"Annuler"})]}):s.jsx(te,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),G&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:G})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(We,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Jn,{value:t.status??"",onValueChange:ye=>D(ye),disabled:p,children:[s.jsxs(tr,{id:"resultStatus",className:"h-9 flex-1",children:[s.jsx(er,{placeholder:"Changer statut..."})," "]}),s.jsxs(nr,{children:[s.jsx(bt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(bt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(bt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Di,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&s.jsx(Yt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),s.jsx(os,{variant:mB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:pB(t.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden ",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]}),Re(We,"NOM PRENOM",a==null?void 0:a.full_name),Re(We,"ID Unique",a==null?void 0:a.patient_unique_id),Re(Kt,"Date de Naissance",a!=null&&a.date_of_birth?Je(Dt(a.date_of_birth),"P",{locale:Tt}):null)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Zn,{className:"h-4 w-4"})," Médecin"]}),Re(Gt,"NOM PRENOM",c==null?void 0:c.full_name),Re(lr,"Téléphone",c==null?void 0:c.phone),Re(We,"Hôpital",c==null?void 0:c.hospital)]})]}),s.jsxs("div",{className:"flex flex-col items-center gap-2 mt-2",children:[s.jsx(Ve,{className:"text-2xl font-bold text-center w-auto",value:N||"ANTIBIOGRAMME",onChange:ye=>_(ye.target.value),style:{maxWidth:400}}),s.jsx("div",{className:"w-full mt-0",children:K?s.jsx("div",{className:"text-center",children:"Chargement des antibiogrammes..."}):z.length===0?s.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[s.jsx("div",{className:"text-center text-muted-foreground",children:"Aucun antibiogramme trouvé."}),s.jsx(te,{onClick:()=>window.location.reload(),className:"mx-auto",children:"Creer"})]}):s.jsx("div",{className:"flex flex-col gap-8 mt-0",children:z.map(ye=>s.jsxs("div",{className:pe.length>0&&!pe.includes(ye.id)?"print:hidden":"",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 print:hidden",children:[s.jsx("input",{type:"checkbox",checked:pe.length===0||pe.includes(ye.id),onChange:()=>_e(ye.id),id:`print-checkbox-${ye.id}`}),s.jsx("label",{htmlFor:`print-checkbox-${ye.id}`,className:"text-sm",children:"Inclure pour impression"})]}),s.jsx(vB,{resultId:ye.id})]},ye.id))})})]})," ",s.jsx("style",{children:`
        @media print {
          .report-content table {
            font-size: 16px;
            width: 100%;
          }
          .report-content th, .report-content td {
            padding: 4px 4px !important;
            font-size: 16px;
          }
          .report-content {
            padding: 2px !important;
            margin: 0 !important;
          }
          .report-content table {
            border-collapse: collapse;
          }
          .report-content th, .report-content td {
            border: 1px solid #ccc;
          }
        }
      `})]})]}):s.jsx("div",{children:"Résultat non trouvé."})},vB=({resultId:e})=>{const[t,r]=m.useState([]),[a,l]=m.useState(null),[c,d]=m.useState([]),[f,h]=m.useState({}),[p,v]=m.useState(!0),[x,b]=m.useState(!1),[w,j]=m.useState(null),[N,_]=m.useState(""),[C,E]=m.useState("");m.useEffect(()=>{(async()=>{if(v(!0),!e)return;const{data:L}=await ne.from("atbs_result").select("*").eq("id",e);if(!L||L.length===0){v(!1);return}const H=L[0].id;l(H),_(L[0].nature_prelement),E(L[0].souche);const{data:q}=await ne.from("atbs").select("id, name");r(q||[]);const{data:G}=await ne.from("atbs_result_atb").select("id, atb_id, sensible, intermediaire, resistant").eq("atbs_result_id",H);d(G||[]);const W={};(G||[]).forEach(ce=>{W[ce.atb_id]={S:!!ce.sensible,I:!!ce.intermediaire,R:!!ce.resistant}}),h(W),v(!1)})()},[e]);const R=(T,L)=>{h(H=>{var q;return{...H,[T]:{...H[T],[L]:!((q=H[T])!=null&&q[L])}}})},M=async()=>{var T,L,H;if(a){b(!0),j(null);try{for(const q of t){const G=c.find(W=>W.atb_id===q.id);G&&await ne.from("atbs_result_atb").update({sensible:((T=f[q.id])==null?void 0:T.S)||!1,intermediaire:((L=f[q.id])==null?void 0:L.I)||!1,resistant:((H=f[q.id])==null?void 0:H.R)||!1}).eq("id",G.id)}await ne.from("atbs_result").update({nature_prelement:N,souche:C}).eq("id",a),j("success")}catch{j("error")}b(!1)}};return p?s.jsx("div",{className:"text-center",children:"Chargement du tableau..."}):a?s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("div",{className:"flex gap-4 w-full justify-center",children:[s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx(Le,{htmlFor:"nature_prelevement",className:"text-lg font-bold print:-mb-2",children:"Nature du prélèvement"}),s.jsx(Ve,{id:"nature_prelevement",value:N,onChange:T=>_(T.target.value),style:{minWidth:220},className:"print:border-none print:bg-transparent"})]}),s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx(Le,{htmlFor:"souche",className:"text-lg font-bold print:-mb-2",children:"Souche étudiée"}),s.jsx(Ve,{id:"souche",value:C,onChange:T=>E(T.target.value),style:{minWidth:180},className:"print:border-none print:bg-transparent"})]})]}),s.jsxs(aa,{children:[s.jsx(ia,{children:s.jsxs(Xt,{children:[s.jsx(ht,{className:"text-left",children:"Dénomination"}),s.jsx(ht,{className:"text-center",children:"S"}),s.jsx(ht,{className:"text-center",children:"I"}),s.jsx(ht,{className:"text-center",children:"R"})]})}),s.jsx(la,{children:t.map((T,L)=>{var H,q,G;return s.jsxs(Xt,{className:L%2===0?"bg-muted/50":"",children:[s.jsx(Ke,{children:T.name}),s.jsx(Ke,{className:"text-center",children:s.jsx(ea,{checked:!!((H=f[T.id])!=null&&H.S),onCheckedChange:()=>R(T.id,"S")})}),s.jsx(Ke,{className:"text-center",children:s.jsx(ea,{checked:!!((q=f[T.id])!=null&&q.I),onCheckedChange:()=>R(T.id,"I")})}),s.jsx(Ke,{className:"text-center",children:s.jsx(ea,{checked:!!((G=f[T.id])!=null&&G.R),onCheckedChange:()=>R(T.id,"R")})})]},T.id)})})]}),s.jsx("div",{className:"mt-2 text-sm  font-semibold text-center",children:"S = sensible   |   I = intermédiaire   |   R = résistant"}),s.jsxs("div",{className:"flex flex-col items-center mt-4 print:hidden",children:[s.jsx(te,{disabled:x,onClick:M,children:x?"Enregistrement...":"Enregistrer les modifications"}),w==="success"&&s.jsx("span",{className:"text-green-600 mt-2 print:hidden",children:"Modifications enregistrées !"}),w==="error"&&s.jsx("span",{className:"text-red-600 mt-2 print:hidden",children:"Erreur lors de l'enregistrement."})]}),s.jsx("div",{className:"mt-4",children:s.jsx(so,{date:new Date().toISOString()||""})})]}):s.jsx("div",{className:"text-center text-muted-foreground",children:"Aucun antibiogramme trouvé."})},xB=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(!1),[l,c]=m.useState(""),[d,f]=m.useState(null),[h,p]=m.useState(""),[v,x]=m.useState(null),[b,w]=m.useState(null),j=async()=>{a(!0);const{data:R,error:M}=await ne.from("atbs").select("*").order("name");M?x(M.message):t(R||[]),a(!1)};m.useEffect(()=>{j()},[]);const N=async()=>{if(!l.trim())return;a(!0);const{error:R}=await ne.from("atbs").insert({name:l.trim()});R&&x(R.message),c(""),j(),a(!1)},_=R=>{f(R.id),p(R.name),x(null)},C=async R=>{if(!h.trim())return;a(!0);const{error:M}=await ne.from("atbs").update({name:h.trim()}).eq("id",R);M&&x(M.message),f(null),p(""),j(),a(!1)},E=async R=>{a(!0);const{error:M}=await ne.from("atbs").delete().eq("id",R);M&&x(M.message),j(),a(!1),w(null)};return s.jsxs("div",{className:"max-w-xl mx-auto mt-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Gestion des ATBs"}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx(Ve,{value:l,onChange:R=>c(R.target.value),placeholder:"Nom de l'ATB",disabled:r,onKeyDown:R=>{R.key==="Enter"&&N()}}),s.jsxs(te,{onClick:N,disabled:r||!l.trim(),children:[s.jsx(Rd,{className:"w-4 h-4 mr-1"})," Ajouter"]})]}),v&&s.jsx("div",{className:"text-red-500 mb-2",children:v}),s.jsxs("table",{className:"min-w-full border",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-2 border",children:"Nom"}),s.jsx("th",{className:"text-left p-2 border",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(R=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-2 border",children:d===R.id?s.jsx(Ve,{value:h,onChange:M=>p(M.target.value),onKeyDown:M=>{M.key==="Enter"&&C(R.id),M.key==="Escape"&&f(null)},autoFocus:!0}):R.name}),s.jsx("td",{className:"p-2 border",children:d===R.id?s.jsx(te,{size:"sm",onClick:()=>C(R.id),disabled:r||!h.trim(),children:"Enregistrer"}):s.jsxs(s.Fragment,{children:[s.jsx(te,{size:"icon",variant:"ghost",onClick:()=>_(R),children:s.jsx(k_,{className:"w-4 h-4"})}),s.jsx(te,{size:"icon",variant:"destructive",onClick:()=>w(R.id),disabled:r,children:s.jsx(dc,{className:"w-4 h-4"})})]})})]},R.id))})]}),s.jsx($l,{open:!!b,onOpenChange:R=>!R&&w(null),children:s.jsxs(Bl,{children:[s.jsx(Hl,{children:s.jsx(Fl,{children:"Confirmer la suppression"})}),s.jsx("div",{children:"Êtes-vous sûr de vouloir supprimer cet ATB ?"}),s.jsxs(ql,{children:[s.jsx(te,{variant:"destructive",onClick:()=>b&&E(b),disabled:r,children:"Supprimer"}),s.jsx(te,{variant:"ghost",onClick:()=>w(null),disabled:r,children:"Annuler"})]})]})})]})},yB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},bB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},wB=()=>{var Hn;const{resultId:e}=yr();or();const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(!0),[p,v]=m.useState(!1),[x,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(""),[C,E]=m.useState(!1),[R,M]=m.useState(""),[T,L]=m.useState(""),[H,q]=m.useState(!1),[G,W]=m.useState(null),[ce,se]=m.useState([]),[B,ie]=m.useState(!0),[oe,O]=m.useState(""),[V,U]=m.useState(!1),[J,k]=m.useState(null);m.useEffect(()=>{(async()=>{ie(!0);const{data:Ne,error:Oe}=await ne.from("ecb_model").select("id, name, description, structure");Oe||se(Ne||[]),ie(!1)})()},[]);const P=[{id:"template1",component:rr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],F="template1",[X,D]=m.useState(null),[z,$]=m.useState(!0),K=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),r(null),l(null),d(null),$(!0),D(null);try{const{data:he,error:Ne}=await ne.from("patient_result").select("*").eq("id",e).single();if(Ne)throw Ne;if(!he)throw new Error("Résultat non trouvé.");r(he);const[Oe,At,dn]=await Promise.all([ne.from("patient").select("*").eq("id",he.patient_id).single(),ne.from("doctor").select("*").eq("id",he.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);Oe.error&&console.warn("Erreur chargement patient:",Oe.error.message),At.error&&console.warn("Erreur chargement médecin:",At.error.message),l(Oe.data),d(At.data),D(dn.data),$(!1)}catch(he){console.error("Erreur chargement détails du résultat:",he),b(he.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{K()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),L((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const re=m.useCallback(async he=>{if(e)try{const{error:Ne}=await ne.from("patient_result").update({description:he}).eq("id",e);if(Ne)throw Ne}catch(Ne){console.error("Error saving description:",Ne)}},[e]);m.useEffect(()=>{const he=setTimeout(()=>{N!==(t==null?void 0:t.description)&&re(N)},1e3);return()=>clearTimeout(he)},[N,t==null?void 0:t.description,re]);const pe=m.useCallback(async()=>{q(!0),W(null);try{const he=R!==""?Number(R):null,Ne=T!==""?Number(T):null;if(R!==""&&isNaN(he)||T!==""&&isNaN(Ne)){W("Les prix doivent être des nombres valides."),q(!1);return}const{error:Oe,data:At}=await ne.from("patient_result").update({normal_price:he,insurance_price:Ne}).eq("id",t.id).select().single();if(Oe)throw Oe;r(dn=>dn&&{...dn,normal_price:he,insurance_price:Ne}),E(!1)}catch(he){W(he.message||"Erreur lors de la sauvegarde des prix.")}finally{q(!1)}},[t,R,T]),ue=async he=>{if(!(!t||he===t.status)){v(!0),j(null);try{const{data:Ne,error:Oe}=await ne.from("patient_result").update({status:he}).eq("id",t.id).select().single();if(Oe)throw Oe;r(Ne||(At=>At?{...At,status:he}:null))}catch(Ne){console.error("Erreur mise à jour statut:",Ne),j(Ne.message||"Impossible de mettre à jour le statut.")}finally{v(!1)}}},_e=(he,Ne,Oe,At)=>{const dn=he;return s.jsxs("div",{className:Ce("flex items-start space-x-3",At),children:[s.jsx(dn,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:Ne}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:Oe||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},Re=m.useMemo(()=>{var Ne;const he=(X==null?void 0:X.selected_template)||F;return((Ne=P.find(Oe=>Oe.id===he))==null?void 0:Ne.component)||rr},[X]),lt=m.useMemo(()=>({logoUrl:(X==null?void 0:X.logo_url)||null,labName:X==null?void 0:X.lab_name,addressLine1:X==null?void 0:X.address_line1,addressLine2:X==null?void 0:X.address_line2,cityPostalCode:X==null?void 0:X.city_postal_code,phone:X==null?void 0:X.phone,email:X==null?void 0:X.email,website:X==null?void 0:X.website}),[X]),[rt,ge]=m.useState([]),[me,De]=m.useState({}),[ye,je]=m.useState({}),[Pe,Ye]=m.useState(!0),[qe,gt]=m.useState(null),[Mt,Qt]=m.useState({}),[Be,st]=m.useState(null),[nn,Mn]=m.useState(null),[Sn,Et]=m.useState(null),[xe,Te]=m.useState(""),[$e,et]=m.useState(null),Ge=(he,Ne)=>{Et(he),Te(Ne)},Ft=()=>{Et(null),Te("")},on=async he=>{et(he),await ne.from("ecb").update({title:xe}).eq("id",he),et(null),Et(null),Te(""),await wt()},wt=m.useCallback(async()=>{if(!e)return;Ye(!0);const{data:he,error:Ne}=await ne.from("ecb").select("*").eq("result_id",e).order("created_at",{ascending:!0});if(Ne){Ye(!1);return}ge(he||[]);const Oe=(he||[]).map(Ot=>Ot.id),{data:At}=await ne.from("ecb_section").select("*").in("ecb_id",Oe.length?Oe:["00000000-0000-0000-0000-000000000000"]).order("position",{ascending:!0}),dn={};(At||[]).forEach(Ot=>{dn[Ot.ecb_id]||(dn[Ot.ecb_id]=[]),dn[Ot.ecb_id].push(Ot)}),De(dn);const qn=(At||[]).map(Ot=>Ot.id),{data:dr}=await ne.from("ecb_value").select("*").in("section_id",qn.length?qn:["00000000-0000-0000-0000-000000000000"]).order("position",{ascending:!0}),Dn={};(dr||[]).forEach(Ot=>{Dn[Ot.section_id]||(Dn[Ot.section_id]=[]),Dn[Ot.section_id].push(Ot)}),je(Dn),Ye(!1)},[e]);m.useEffect(()=>{wt()},[wt,V]);const Bn=he=>{gt(he);let Ne={};(me[he]||[]).forEach(Oe=>{(ye[Oe.id]||[]).forEach(At=>{Ne[At.id]=At.value??""})}),Qt(Ne)},mn=()=>{gt(null),Qt({})},tt=(he,Ne)=>{Qt(Oe=>({...Oe,[he]:Ne}))},ct=async he=>{st(he);const Ne=Object.entries(Mt).map(([Oe,At])=>ne.from("ecb_value").update({value:At}).eq("id",Oe));await Promise.all(Ne),st(null),gt(null),Qt({}),await wt()},ke=he=>{Mn(he),setTimeout(()=>window.print(),100)};function vt(){if(typeof window<"u")try{const he=window.localStorage.getItem("ecb_bold_toggles");return he?JSON.parse(he):{}}catch{return{}}return{}}const[ot,jt]=m.useState(vt);m.useEffect(()=>{window.localStorage.setItem("ecb_bold_toggles",JSON.stringify(ot))},[ot]);const cn=he=>{jt(Ne=>{var Oe;return{...Ne,[he]:{...Ne[he],labelBold:!((Oe=Ne[he])!=null&&Oe.labelBold)}}})},It=he=>{jt(Ne=>{var Oe;return{...Ne,[he]:{...Ne[he],valueBold:!((Oe=Ne[he])!=null&&Oe.valueBold)}}})};function mt(he){if(typeof window<"u")try{const Ne=window.localStorage.getItem("ecb_section_bold_toggles"),Oe=Ne?JSON.parse(Ne):{};for(const At of he)At in Oe||(Oe[At]=!0);return Oe}catch{return Object.fromEntries(he.map(Ne=>[Ne,!0]))}return Object.fromEntries(he.map(Ne=>[Ne,!0]))}const En=Object.values(me||{}).flat().map(he=>he.id),[Vt,en]=m.useState(()=>mt(En));m.useEffect(()=>{window.localStorage.setItem("ecb_section_bold_toggles",JSON.stringify(Vt))},[Vt]),m.useEffect(()=>{en(he=>{let Ne=!1;const Oe={...he};for(const At of En)At in Oe||(Oe[At]=!0,Ne=!0);return Ne?Oe:he})},[En.length]);const wr=he=>{en(Ne=>({...Ne,[he]:!Ne[he]}))};function An(){if(typeof window<"u")try{const he=window.localStorage.getItem("ecb_abnormal_cells");return he?JSON.parse(he):{}}catch{return{}}return{}}const[kn,Xn]=m.useState(An);m.useEffect(()=>{window.localStorage.setItem("ecb_abnormal_cells",JSON.stringify(kn))},[kn]);const pn=he=>{Xn(Ne=>({...Ne,[he]:!Ne[he]}))};return f?s.jsxs("div",{className:"space-y-6",children:[s.jsx(Y,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsxs("div",{className:"pb-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsxs("div",{className:"pb-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsxs("div",{className:"pb-2",children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]})]}),s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsx("div",{className:"pb-2",children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx("div",{children:s.jsx(Y,{className:"h-20 w-full"})})]}),s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsx("div",{className:"pb-2",children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx("div",{children:s.jsx(Y,{className:"h-20 w-full"})})]})]}):x?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(it,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsxs(qt,{children:[x," ",s.jsx(te,{variant:"link",onClick:K,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(it,{to:a?`/patients/${a.id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(is,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),s.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[X?s.jsx("div",{className:"mb-2 print:mb-0",children:s.jsx(Re,{data:lt,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Bt,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"En-tête Manquant"}),s.jsxs(qt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(it,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Wr,{className:"my-2 print:my-0 print:border-none"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs("div",{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[_e(We,"NOM PRENOM",a==null?void 0:a.full_name),_e(We,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),_e(Kt,"Date Naissance",a!=null&&a.date_of_birth?Je(Dt(a.date_of_birth),"P",{locale:Tt}):null),s.jsx("div",{className:"hidden print:block",children:_e(Kt,"Date Résultat",t.result_date?Je(Dt(t.result_date),"Pp",{locale:Tt}):null)})]})]}),s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4",children:[s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs("div",{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[_e(Gt,"NOM PRENOM",c==null?void 0:c.full_name),_e(lr,"Téléphone",c==null?void 0:c.phone),_e(We,"Provenance",c==null?void 0:c.hospital)]})]}),s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4 print:hidden",children:[s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs("div",{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[_e(Kt,"Date Résultat",t.result_date?Je(Dt(t.result_date),"Pp",{locale:Tt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),C?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:R,onChange:he=>M(he.target.value),disabled:H}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:R,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),C?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:he=>L(he.target.value),disabled:H}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:C?s.jsxs(s.Fragment,{children:[s.jsxs(te,{size:"xs",variant:"secondary",onClick:pe,disabled:H,children:[H?s.jsx(Yt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(te,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:H,children:"Annuler"})]}):s.jsx(te,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),G&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:G})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(We,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Jn,{value:t.status??"",onValueChange:he=>ue(he),disabled:p,children:[s.jsxs(tr,{id:"resultStatus",className:"h-9 flex-1",children:[" ",s.jsx(er,{placeholder:"Changer statut..."})," "]}),s.jsxs(nr,{children:[s.jsx(bt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(bt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(bt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Di,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&s.jsx(Yt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),s.jsx(os,{variant:yB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:bB(t.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]}),_e(We,"NOM PRENOM",a==null?void 0:a.full_name),_e(We,"ID Unique",a==null?void 0:a.patient_unique_id),_e(Kt,"Date de Naissance",a!=null&&a.date_of_birth?Je(Dt(a.date_of_birth),"P",{locale:Tt}):null)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Zn,{className:"h-4 w-4"})," Médecin"]}),_e(Gt,"NOM PRENOM",c==null?void 0:c.full_name),_e(lr,"Téléphone",c==null?void 0:c.phone),_e(We,"Hôpital",c==null?void 0:c.hospital)]})]}),s.jsxs("div",{className:"page-content",children:[s.jsxs("div",{className:"overflow-hidden rounded-lg border border-muted bg-background p-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx("div",{className:"font-semibold",children:"Créer un nouvel ECB"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Le,{htmlFor:"ecb-model-select",children:"Sélectionner un modèle"}),s.jsxs(Jn,{value:oe,onValueChange:O,disabled:B||V,children:[s.jsx(tr,{id:"ecb-model-select",className:"w-full",children:s.jsx(er,{placeholder:B?"Chargement...":"Choisir un modèle"})}),s.jsx(nr,{children:ce.map(he=>s.jsx(bt,{value:he.id,children:he.name},he.id))})]}),oe&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:(Hn=ce.find(he=>he.id===oe))==null?void 0:Hn.description})]}),s.jsxs(te,{onClick:async()=>{var he;U(!0),k(null);try{if(!oe||!e)throw new Error("Sélectionner un modèle.");const Ne=ce.find(Ot=>Ot.id===oe);if(!Ne)throw new Error("Modèle non trouvé.");const{data:Oe,error:At}=await ne.from("ecb").insert({result_id:e,model_id:Ne.id,title:Ne.name,created_by:((he=(await ne.auth.getUser()).data.user)==null?void 0:he.id)||null}).select().single();if(At)throw At;const dn=Ne.structure;let qn=[],dr=[],Dn=0;for(const Ot of dn){const ca=crypto.randomUUID();qn.push({id:ca,ecb_id:Oe.id,section_title:Ot.title,position:Dn});let Ds=0;for(const bn of Ot.labels)dr.push({section_id:ca,label:bn,value:null,position:Ds}),Ds++;Dn++}if(qn.length){const{error:Ot}=await ne.from("ecb_section").insert(qn);if(Ot)throw Ot}if(dr.length){const{error:Ot}=await ne.from("ecb_value").insert(dr);if(Ot)throw Ot}await wt(),O("")}catch(Ne){k(Ne.message||"Erreur lors de la création de l''ECB.")}finally{U(!1)}},disabled:!oe||V,className:"min-w-[120px]",children:[V?s.jsx(Yt,{className:"h-4 w-4 animate-spin mr-2"}):null,"Créer"]})]}),J&&s.jsx("div",{className:"text-xs text-destructive mt-2",children:J})]})]}),Pe?s.jsx(Y,{className:"h-12 w-full"}):rt.length===0?s.jsx("div",{className:"text-muted-foreground text-sm",children:"Aucun ECB trouvé pour ce résultat."}):s.jsx("div",{className:"space-y-6 print:space-y-0",children:rt.map(he=>s.jsxs("div",{className:"relative  p-4",children:[s.jsxs("div",{className:"print:hidden flex flex-row items-center justify-between border-b pb-2 mb-2 print:mb-0",children:[s.jsxs("div",{className:"print:hidden",children:[s.jsx("div",{className:"font-semibold text-base flex items-center gap-2",children:Sn===he.id?s.jsxs(s.Fragment,{children:[s.jsx(Ve,{value:xe,onChange:Ne=>Te(Ne.target.value),onKeyDown:Ne=>{Ne.key==="Enter"&&on(he.id),Ne.key==="Escape"&&Ft()},disabled:$e===he.id,className:"text-base w-48",autoFocus:!0}),s.jsx(te,{size:"xs",variant:"outline",onClick:()=>on(he.id),disabled:$e===he.id,children:$e===he.id?s.jsx(Yt,{className:"h-3 w-3 animate-spin"}):"Enregistrer"}),s.jsx(te,{size:"xs",variant:"ghost",onClick:Ft,disabled:$e===he.id,children:"Annuler"})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:he.title}),s.jsx(te,{size:"xs",variant:"ghost",onClick:()=>Ge(he.id,he.title),className:"ml-1",children:s.jsx(Xr,{className:"h-3 w-3"})})]})}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Créé le ",Je(Dt(he.created_at),"Pp",{locale:Tt})]})]}),s.jsx("div",{className:"flex gap-2 print:hidden",children:qe===he.id?s.jsxs(s.Fragment,{children:[s.jsxs(te,{size:"sm",variant:"outline",onClick:()=>ct(he.id),disabled:Be===he.id,children:[Be===he.id?s.jsx(Yt,{className:"h-4 w-4 animate-spin mr-2"}):null,"Enregistrer toutes les modifications"]}),s.jsx(te,{size:"sm",variant:"ghost",onClick:mn,disabled:Be===he.id,children:"Annuler"})]}):s.jsxs(s.Fragment,{children:[s.jsxs(te,{size:"sm",variant:"outline",onClick:()=>Bn(he.id),children:[s.jsx(Xr,{className:"h-4 w-4 mr-1"})," Modifier"]}),s.jsxs(te,{size:"sm",variant:"outline",onClick:()=>ke(he.id),children:[s.jsx(vf,{className:"h-4 w-4 mr-1"})," Imprimer"]})]})})]}),s.jsx("div",{className:"print:hidden",children:(me[he.id]||[]).map(Ne=>s.jsxs("div",{className:"mb-4 print:mb-0",children:[s.jsxs("div",{className:"font-semibold mb-2 text-lg flex items-center gap-1",children:[Ne.section_title,s.jsx(te,{size:"icon",variant:Vt[Ne.id]?"default":"ghost",className:"h-5 w-5 p-0",title:Vt[Ne.id]?"Définir en normal":"Mettre en gras",onClick:()=>wr(Ne.id),type:"button",tabIndex:-1,children:s.jsx("b",{children:"B"})})]}),s.jsx("div",{className:"grid grid-cols-1  gap-2",children:(ye[Ne.id]||[]).map(Oe=>{var At,dn,qn,dr,Dn;return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Le,{className:"w-40 text-md font-medium flex items-center gap-1",children:[Oe.label,s.jsx(te,{size:"icon",variant:(At=ot[Oe.id])!=null&&At.labelBold?"default":"ghost",className:"h-5 w-5 p-0",title:(dn=ot[Oe.id])!=null&&dn.labelBold?"Définir en normal":"Mettre en gras",onClick:()=>cn(Oe.id),type:"button",tabIndex:-1,children:s.jsx("b",{children:"B"})})]}),qe===he.id?s.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[s.jsx(Ve,{value:Mt[Oe.id]??"",onChange:Ot=>tt(Oe.id,Ot.target.value),disabled:Be===he.id,className:"text-xs flex-1"}),s.jsx(te,{size:"icon",variant:(qn=ot[Oe.id])!=null&&qn.valueBold?"default":"ghost",className:"h-5 w-5 p-0",title:(dr=ot[Oe.id])!=null&&dr.valueBold?"Définir en normal":"Mettre en gras",onClick:()=>It(Oe.id),type:"button",tabIndex:-1,children:s.jsx("b",{children:"B"})}),s.jsx(te,{size:"icon",variant:kn[Oe.id]?"destructive":"ghost",className:"h-5 w-5 p-0",title:kn[Oe.id]?"Cellule anormale":"Marquer comme anormale",onClick:()=>pn(Oe.id),type:"button",tabIndex:-1,children:s.jsx("span",{style:{fontWeight:"bold"},children:"!"})})]}):s.jsx("span",{className:`text-xs flex-1 ${(Dn=ot[Oe.id])!=null&&Dn.valueBold?"font-bold":""} ${kn[Oe.id]?"bg-gray-200 font-bold":""}`,children:Oe.value??s.jsx("span",{className:"italic text-muted-foreground",children:"(vide)"})})]},Oe.id)})})]},Ne.id))}),nn===he.id&&s.jsxs("div",{className:"hidden print:block bg-white p-4 print:p-0",children:[s.jsx("div",{className:"font-semibold text-lg text-center mb-1",children:he.title}),s.jsx("table",{className:"w-full border-collapse print-ecb-table",children:s.jsx("tbody",{children:(me[he.id]||[]).map(Ne=>s.jsxs(be.Fragment,{children:[s.jsx("tr",{children:s.jsx("td",{colSpan:2,className:`text-xs mb-1 py-2 print-ecb-section-title ${Vt[Ne.id]?"font-bold":"font-normal"}`,children:Ne.section_title})}),(ye[Ne.id]||[]).map(Oe=>{var At,dn;return s.jsxs("tr",{children:[s.jsx("td",{className:`align-top pr-4 pb-1 text-xs print-ecb-label ${(At=ot[Oe.id])!=null&&At.labelBold?"font-bold":"font-normal"}`,style:{width:"35%"},children:Oe.label}),s.jsx("td",{className:`align-top pb-1 text-xs print-ecb-value ${(dn=ot[Oe.id])!=null&&dn.valueBold?"font-bold":"font-normal"} ${kn[Oe.id]?"print-ecb-abnormal-cell":""}`,children:Oe.value?s.jsx("div",{className:"flex items-center justify-between",children:Oe.value.split(";").map((qn,dr)=>s.jsx("div",{children:qn},dr))}):s.jsx("span",{className:"italic text-muted-foreground",children:"(vide)"})})]},Oe.id)})]},Ne.id))})}),s.jsx("div",{className:"mt-4",children:s.jsx(so,{date:new Date().toISOString()})}),s.jsx("style",{jsx:!0,global:!0,children:`
                        @media print {
                          .print-ecb-table {
                            width: 100%;
                            border-collapse: collapse;
                            font-size: 13.5px;
                          }
                          .print-ecb-label {
                            text-align: left;
                            padding-right: 16px;
                            vertical-align: top;
                            width: 35%;
                            font-size: 13.5px;
                          }
                          .print-ecb-section-title {
                            background: #f6f6f6;
                            font-size: 14px;
                            font-weight: bold;
                            padding-top: 12px;
                            padding-bottom: 6px;
                            text-align: left;
                            border-bottom: 1px solid #e5e5e5;
                          }
                          .print-ecb-value {
                            text-align: left;
                            vertical-align: top;
                            word-break: break-word;
                            font-size: 13.5px;
                          }
                          .print-ecb-abnormal-cell {
                            background: #e5e5e5 !important;
                            font-weight: bold !important;
                          }
                          .print-ecb-table td {
                            padding-top: 3px;
                            padding-bottom: 3px;
                          }
                        }
                      `})]})]},he.id))})]})]})," "]}):s.jsx("div",{children:"Résultat non trouvé."})},jB=()=>{const[e,t]=m.useState([]),[r,a]=m.useState(!1),[l,c]=m.useState(null),[d,f]=m.useState(""),[h,p]=m.useState(""),[v,x]=m.useState(""),[b,w]=m.useState(""),[j,N]=m.useState(!1),[_,C]=m.useState(null),[E,R]=m.useState([]),[M,T]=m.useState(null),[L,H]=m.useState(null),q=async()=>{a(!0);const{data:F,error:X}=await ne.from("ecb_model").select("id, name, description, structure, created_at").order("created_at");X||t(F||[]),a(!1)};m.useEffect(()=>{q()},[]);const G=F=>{c(F.id),f(F.name),p(F.description||"")},W=async F=>{N(!0),await ne.from("ecb_model").update({name:d,description:h}).eq("id",F),c(null),f(""),p(""),N(!1),q()},ce=async F=>{N(!0),await ne.from("ecb_model").delete().eq("id",F),q(),N(!1),H(null)},se=async()=>{v.trim()&&(N(!0),await ne.from("ecb_model").insert({name:v.trim(),description:b.trim(),structure:JSON.stringify([])}),x(""),w(""),N(!1),q())},B=F=>{C(F),R(Array.isArray(F.structure)?F.structure:[]),T(null)},ie=()=>{C(null),R([]),T(null)},oe=async()=>{if(_){for(const F of E){if(!F.title.trim()){T("Titre de section requis");return}if(!Array.isArray(F.labels)||F.labels.some(X=>!X.trim())){T("Chaque section doit avoir des labels non vides");return}}N(!0),await ne.from("ecb_model").update({structure:E}).eq("id",_.id),N(!1),ie(),q()}},O=()=>R([...E,{title:"Nouvelle section",labels:["Label 1"]}]),V=F=>R(E.filter((X,D)=>D!==F)),U=(F,X)=>R(E.map((D,z)=>z===F?{...D,title:X}:D)),J=F=>R(E.map((X,D)=>D===F?{...X,labels:[...X.labels,"Nouveau label"]}:X)),k=(F,X,D)=>R(E.map((z,$)=>$===F?{...z,labels:z.labels.map((K,re)=>re===X?D:K)}:z)),P=(F,X)=>R(E.map((D,z)=>z===F?{...D,labels:D.labels.filter(($,K)=>K!==X)}:D));return s.jsxs("div",{className:"w-full mx-auto p-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Gestion des Modèles ECB"}),s.jsxs("div",{className:"mb-6 flex gap-2",children:[s.jsx(Ve,{value:v,onChange:F=>x(F.target.value),placeholder:"Nouveau modèle",className:"flex-1"}),s.jsx(Ve,{value:b,onChange:F=>w(F.target.value),placeholder:"Description (optionnelle)",className:"flex-1"}),s.jsxs(te,{onClick:se,disabled:j||!v.trim(),children:[s.jsx(Rd,{className:"w-4 h-4 mr-1"})," Ajouter"]})]}),s.jsx("div",{className:"bg-white rounded shadow p-4",children:r?s.jsx("div",{children:"Chargement..."}):s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-2",children:"Nom du modèle"}),s.jsx("th",{className:"text-left py-2",children:"Description"}),s.jsx("th",{className:"text-left py-2",children:"Structure"}),s.jsx("th",{className:"w-48"})]})}),s.jsx("tbody",{children:e.map(F=>s.jsxs(be.Fragment,{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-2",children:l===F.id?s.jsx(Ve,{value:d,onChange:X=>f(X.target.value),className:"inline-block w-auto",onKeyDown:X=>{X.key==="Enter"&&W(F.id),X.key==="Escape"&&c(null)},autoFocus:!0}):s.jsx("span",{children:F.name})}),s.jsx("td",{className:"py-2",children:l===F.id?s.jsx(Ve,{value:h,onChange:X=>p(X.target.value),className:"inline-block w-auto",onKeyDown:X=>{X.key==="Enter"&&W(F.id),X.key==="Escape"&&c(null)}}):s.jsx("span",{children:F.description})}),s.jsx("td",{className:"py-2",children:s.jsx(te,{size:"sm",variant:"outline",onClick:()=>B(F),children:"Éditer Structure"})}),s.jsx("td",{children:l===F.id?s.jsx(te,{size:"sm",onClick:()=>W(F.id),disabled:j||!d.trim(),children:"Enregistrer"}):s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{size:"icon",variant:"ghost",onClick:()=>G(F),children:s.jsx(k_,{className:"w-4 h-4"})}),s.jsx(te,{size:"icon",variant:"destructive",onClick:()=>H(F.id),children:s.jsx(dc,{className:"w-4 h-4"})})]})})]}),_&&_.id===F.id&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,children:s.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2 border rounded p-4 bg-muted",children:[s.jsx("div",{className:"mb-2 font-semibold text-lg",children:"Éditer la structure du modèle"}),E.map((X,D)=>s.jsxs("div",{className:"border rounded p-3 mb-2",children:[s.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[s.jsx(Ve,{value:X.title,onChange:z=>U(D,z.target.value),placeholder:"Titre de section",className:"flex-1"}),s.jsx(te,{size:"icon",variant:"destructive",onClick:()=>V(D),children:s.jsx(dc,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"ml-4 space-y-1",children:[X.labels.map((z,$)=>s.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[s.jsx(Ve,{value:z,onChange:K=>k(D,$,K.target.value),placeholder:"Label",className:"flex-1"}),s.jsx(te,{size:"icon",variant:"destructive",onClick:()=>P(D,$),children:s.jsx(dc,{className:"w-4 h-4"})})]},$)),s.jsxs(te,{size:"sm",variant:"outline",onClick:()=>J(D),children:[s.jsx(Rd,{className:"w-4 h-4 mr-1"})," Ajouter Label"]})]})]},D)),s.jsxs(te,{size:"sm",variant:"secondary",onClick:O,children:[s.jsx(Rd,{className:"w-4 h-4 mr-1"})," Ajouter Section"]}),M&&s.jsx("div",{className:"text-red-500 text-sm",children:M}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx(te,{onClick:oe,disabled:j,children:"Enregistrer la structure"}),s.jsx(te,{variant:"ghost",onClick:ie,children:"Annuler"})]})]})})})]},F.id))})]})}),s.jsx($l,{open:!!L,onOpenChange:F=>!F&&H(null),children:s.jsxs(Bl,{children:[s.jsx(Hl,{children:s.jsx(Fl,{children:"Confirmer la suppression"})}),s.jsx("div",{children:"Êtes-vous sûr de vouloir supprimer ce modèle ECB ?"}),s.jsxs(ql,{children:[s.jsx(te,{variant:"destructive",onClick:()=>L&&ce(L),disabled:j,children:"Supprimer"}),s.jsx(te,{variant:"ghost",onClick:()=>H(null),disabled:j,children:"Annuler"})]})]})})]})},_B=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},NB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},SB=()=>{const{resultId:e}=yr();or();const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(!0),[p,v]=m.useState(!1),[x,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(""),[C,E]=m.useState(!1),[R,M]=m.useState(""),[T,L]=m.useState(""),[H,q]=m.useState(!1),[G,W]=m.useState(null),ce=[{id:"template1",component:rr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],se="template1",[B,ie]=m.useState(null),[oe,O]=m.useState(!0),V=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),r(null),l(null),d(null),O(!0),ie(null);try{const{data:D,error:z}=await ne.from("patient_result").select("*").eq("id",e).single();if(z)throw z;if(!D)throw new Error("Résultat non trouvé.");r(D);const[$,K,re]=await Promise.all([ne.from("patient").select("*").eq("id",D.patient_id).single(),ne.from("doctor").select("*").eq("id",D.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);$.error&&console.warn("Erreur chargement patient:",$.error.message),K.error&&console.warn("Erreur chargement médecin:",K.error.message),l($.data),d(K.data),ie(re.data),O(!1)}catch(D){console.error("Erreur chargement détails du résultat:",D),b(D.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{V()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),L((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const U=m.useCallback(async D=>{if(e)try{const{error:z}=await ne.from("patient_result").update({description:D}).eq("id",e);if(z)throw z}catch(z){console.error("Error saving description:",z)}},[e]);m.useEffect(()=>{const D=setTimeout(()=>{N!==(t==null?void 0:t.description)&&U(N)},1e3);return()=>clearTimeout(D)},[N,t==null?void 0:t.description,U]);const J=m.useCallback(async()=>{q(!0),W(null);try{const D=R!==""?Number(R):null,z=T!==""?Number(T):null;if(R!==""&&isNaN(D)||T!==""&&isNaN(z)){W("Les prix doivent être des nombres valides."),q(!1);return}const{error:$,data:K}=await ne.from("patient_result").update({normal_price:D,insurance_price:z}).eq("id",t.id).select().single();if($)throw $;r(re=>re&&{...re,normal_price:D,insurance_price:z}),E(!1)}catch(D){W(D.message||"Erreur lors de la sauvegarde des prix.")}finally{q(!1)}},[t,R,T]),k=async D=>{if(!(!t||D===t.status)){v(!0),j(null);try{const{data:z,error:$}=await ne.from("patient_result").update({status:D}).eq("id",t.id).select().single();if($)throw $;r(z||(K=>K?{...K,status:D}:null))}catch(z){console.error("Erreur mise à jour statut:",z),j(z.message||"Impossible de mettre à jour le statut.")}finally{v(!1)}}},P=(D,z,$,K)=>{const re=D;return s.jsxs("div",{className:Ce("flex items-start space-x-3",K),children:[s.jsx(re,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:z}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:$||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},F=m.useMemo(()=>{var z;const D=(B==null?void 0:B.selected_template)||se;return((z=ce.find($=>$.id===D))==null?void 0:z.component)||rr},[B]),X=m.useMemo(()=>({logoUrl:(B==null?void 0:B.logo_url)||null,labName:B==null?void 0:B.lab_name,addressLine1:B==null?void 0:B.address_line1,addressLine2:B==null?void 0:B.address_line2,cityPostalCode:B==null?void 0:B.city_postal_code,phone:B==null?void 0:B.phone,email:B==null?void 0:B.email,website:B==null?void 0:B.website}),[B]);return f?s.jsxs("div",{className:"space-y-6",children:[s.jsx(Y,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-20 w-full"})})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-20 w-full"})})]})]}):x?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(it,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsxs(qt,{children:[x," ",s.jsx(te,{variant:"link",onClick:V,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(it,{to:a?`/patients/${a.id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(is,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),s.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[B?s.jsx("div",{className:"mb-2 print:mb-0",children:s.jsx(F,{data:X,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Bt,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"En-tête Manquant"}),s.jsxs(qt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(it,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Wr,{className:"my-2 print:my-0 print:border-none"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs(Se,{className:"overflow-hidden print:shadow-none",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(We,"NOM PRENOM",a==null?void 0:a.full_name),P(We,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),P(Kt,"Date Naissance",a!=null&&a.date_of_birth?Je(Dt(a.date_of_birth),"P",{locale:Tt}):null),s.jsx("div",{className:"hidden print:block",children:P(Kt,"Date Résultat",t.result_date?Je(Dt(t.result_date),"Pp",{locale:Tt}):null)})]})]}),s.jsxs(Se,{className:"overflow-hidden print:shadow-none _print:border-none",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(Gt,"NOM PRENOM",c==null?void 0:c.full_name),P(lr,"Téléphone",c==null?void 0:c.phone),P(We,"Provenance",c==null?void 0:c.hospital)]})]}),s.jsxs(Se,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(Kt,"Date Résultat",t.result_date?Je(Dt(t.result_date),"Pp",{locale:Tt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),C?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:R,onChange:D=>M(D.target.value),disabled:H}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:R,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),C?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:D=>L(D.target.value),disabled:H}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:C?s.jsxs(s.Fragment,{children:[s.jsxs(te,{size:"xs",variant:"secondary",onClick:J,disabled:H,children:[H?s.jsx(Yt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(te,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:H,children:"Annuler"})]}):s.jsx(te,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),G&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:G})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(We,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Jn,{value:t.status??"",onValueChange:D=>k(D),disabled:p,children:[s.jsxs(tr,{id:"resultStatus",className:"h-9 flex-1",children:[" ",s.jsx(er,{placeholder:"Changer statut..."})," "]}),s.jsxs(nr,{children:[s.jsx(bt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(bt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(bt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Di,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&s.jsx(Yt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),s.jsx(os,{variant:_B(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:NB(t.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]}),P(We,"NOM PRENOM",a==null?void 0:a.full_name),P(We,"ID Unique",a==null?void 0:a.patient_unique_id),P(Kt,"Date de Naissance",a!=null&&a.date_of_birth?Je(Dt(a.date_of_birth),"P",{locale:Tt}):null)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Zn,{className:"h-4 w-4"})," Médecin"]}),P(Gt,"NOM PRENOM",c==null?void 0:c.full_name),P(lr,"Téléphone",c==null?void 0:c.phone),P(We,"Hôpital",c==null?void 0:c.hospital)]})]}),s.jsx(EB,{resultId:e})]})," "]}):s.jsx("div",{children:"Résultat non trouvé."})},EB=({resultId:e})=>{var _,C,E,R;const[t,r]=m.useState(null),[a,l]=m.useState(!0),[c,d]=m.useState(null),f="Pas de virus détecté ou 366 copies/ml; 1.82 log",[h,p]=m.useState((t==null?void 0:t.value)??f),[v,x]=m.useState(!1),[b,w]=m.useState(!1);m.useEffect(()=>{(async()=>{l(!0),d(null);try{const{data:T,error:L}=await ne.from("vhb").select("*").eq("result_id",e).maybeSingle();if(L)throw L;r(T),p((T==null?void 0:T.value)||f)}catch(T){d(T.message||"Erreur lors du chargement du VHB.")}finally{l(!1)}})()},[e]);const j=async()=>{w(!0),d(null);try{const{data:M,error:T}=await ne.from("vhb").insert({result_id:e,value:h}).select().single();if(T)throw T;r(M),x(!1)}catch(M){d(M.message||"Erreur lors de la création du VHB.")}finally{w(!1)}},N=async()=>{if(t){w(!0),d(null);try{const{data:M,error:T}=await ne.from("vhb").update({value:h}).eq("id",t.id).select().single();if(T)throw T;r(M),x(!1)}catch(M){d(M.message||"Erreur lors de la mise à jour du VHB.")}finally{w(!1)}}};return a?s.jsx("div",{children:"Chargement du VHB..."}):c?s.jsx("div",{className:"text-destructive",children:c}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"print:hidden flex justify-end",children:s.jsx(te,{onClick:()=>window.print(),variant:"outline",size:"sm",children:"Imprimer"})}),s.jsx("div",{className:"print:hidden",children:t?s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-lg font-semibold",children:"VHB"}),v?s.jsxs(s.Fragment,{children:[s.jsx(Ve,{value:h,onChange:M=>p(M.target.value),disabled:b,placeholder:"Pas de virus détecté ou 366 copies/ml; 1.82 log"}),s.jsx("p",{className:"text-muted-foreground text-lg",children:"(Pas de virus détecté ou 366 copies/ml; 1.82 log)"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx(te,{onClick:N,disabled:b||!h,children:b?"Sauvegarde...":"Sauvegarder"}),s.jsx(te,{variant:"outline",onClick:()=>{x(!1),p(t.value)},disabled:b,children:"Annuler"})]})]}):s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"font-mono text-lg",children:t.value}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>x(!0),children:"Modifier"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Créer VHB"}),s.jsx(Ve,{value:h,onChange:M=>p(M.target.value),placeholder:"Pas de virus détecté ou 366 copies/ml; 1.82 log",disabled:b}),s.jsx("p",{className:"text-muted-foreground text-lg",children:"(Pas de virus détecté ou 366 copies/ml; 1.82 log)"}),s.jsx(te,{onClick:j,disabled:b||!h,className:"mt-2",children:b?"Création...":"Créer"})]})}),s.jsx("h2",{className:" text-3xl text-center mb-4 print:pt-4 font-bold uppercase mx-auto tracking-tight print:block  print:text-center",children:"VIROLOGIE"}),t!=null&&t.value&&(t.value.includes("Pas de virus")||t.value.includes("virus"))?s.jsxs("div",{className:" print:block mt-8 text-black text-lg",children:[s.jsxs("div",{className:"flex flex-row justify-between mb-4",children:[s.jsx("span",{className:"font-bold underline",children:"EXAMENS"}),s.jsx("span",{className:"font-bold underline",children:"RESULTATS"})]}),s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"font-bold text-xl underline",children:"CHARGE VIRALE HEPATITE B"})}),s.jsxs("div",{className:"flex flex-row justify-between items-start mt-8",children:[s.jsxs("div",{className:"flex flex-col items-start gap-2 text-lg",style:{minWidth:"340px"},children:[s.jsx("span",{className:"font-semibold",children:"Charge virale  VHB"}),s.jsx("span",{className:"text-xs mt-1 whitespace-nowrap",children:"(Abbott m2000rt et m2000sp Technique PCR en temps réel)"})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2 text-lg text-right",style:{minWidth:"340px"},children:[s.jsx("span",{className:"font-bold text-2xl",children:((_=t.value.match(/([\d,.]+\s*copies\/ml)/i))==null?void 0:_[1])||t.value}),s.jsx("span",{className:"text-xs mt-1",children:"( Pour 0.5 ml d'échantillon )"}),s.jsx("span",{className:"font-bold text-2xl mt-8",children:((C=t.value.split(";")[1])==null?void 0:C.trim())||""})]})]})]}):t!=null&&t.value?s.jsxs("div",{className:" mt-8 text-black text-lg positive format",children:[s.jsxs("div",{className:"flex flex-row justify-between mb-2",children:[s.jsx("span",{className:"font-bold underline text-xl",children:"EXAMENS"}),s.jsx("span",{className:"font-bold underline text-xl",children:"RESULTATS"})]}),s.jsx("div",{className:"w-full mb-6",children:s.jsx("div",{className:"font-bold text-2xl underline",children:"CHARGE VIRALE HEPATITE B"})}),s.jsxs("div",{className:"flex flex-row justify-between items-start mt-8",children:[s.jsxs("div",{className:"flex flex-col items-start gap-2 text-lg",style:{minWidth:"340px"},children:[s.jsx("span",{className:"font-semibold text-xl",children:"Charge virale  VHB"}),s.jsx("span",{className:"text-xs mt-1 whitespace-nowrap",children:"(Abbott m2000rt et m2000sp Technique PCR en temps réel)"}),s.jsx("span",{className:"font-semibold mt-13 text-2xl",children:"Soit"})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2 text-lg text-right",style:{minWidth:"340px"},children:[s.jsx("span",{className:"font-bold text-2xl",children:((E=t.value.match(/([\d,.]+\s*copies\/ml)/i))==null?void 0:E[1])||t.value}),s.jsx("span",{className:"text-xs mt-1",children:"(limite de détection <35 pour 0.5 ml)"}),s.jsx("span",{className:"text-xs",children:"(d'échantillon, 1 UI= 3.41 copie/ml)"}),s.jsx("span",{className:"font-bold text-2xl mt-5",children:((R=t.value.split(";")[1])==null?void 0:R.trim())||""})]})]})]}):null,s.jsx("div",{className:" mt-20",children:s.jsx(so,{date:new Date().toISOString()})})]})},CB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},RB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},TB=()=>{const{resultId:e}=yr();or();const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(!0),[p,v]=m.useState(!1),[x,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(""),[C,E]=m.useState(!1),[R,M]=m.useState(""),[T,L]=m.useState(""),[H,q]=m.useState(!1),[G,W]=m.useState(null),ce=[{id:"template1",component:rr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],se="template1",[B,ie]=m.useState(null),[oe,O]=m.useState(!0),V=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),r(null),l(null),d(null),O(!0),ie(null);try{const{data:D,error:z}=await ne.from("patient_result").select("*").eq("id",e).single();if(z)throw z;if(!D)throw new Error("Résultat non trouvé.");r(D);const[$,K,re]=await Promise.all([ne.from("patient").select("*").eq("id",D.patient_id).single(),ne.from("doctor").select("*").eq("id",D.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);$.error&&console.warn("Erreur chargement patient:",$.error.message),K.error&&console.warn("Erreur chargement médecin:",K.error.message),l($.data),d(K.data),ie(re.data),O(!1)}catch(D){console.error("Erreur chargement détails du résultat:",D),b(D.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{V()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),L((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const U=m.useCallback(async D=>{if(e)try{const{error:z}=await ne.from("patient_result").update({description:D}).eq("id",e);if(z)throw z}catch(z){console.error("Error saving description:",z)}},[e]);m.useEffect(()=>{const D=setTimeout(()=>{N!==(t==null?void 0:t.description)&&U(N)},1e3);return()=>clearTimeout(D)},[N,t==null?void 0:t.description,U]);const J=m.useCallback(async()=>{q(!0),W(null);try{const D=R!==""?Number(R):null,z=T!==""?Number(T):null;if(R!==""&&isNaN(D)||T!==""&&isNaN(z)){W("Les prix doivent être des nombres valides."),q(!1);return}const{error:$,data:K}=await ne.from("patient_result").update({normal_price:D,insurance_price:z}).eq("id",t.id).select().single();if($)throw $;r(re=>re&&{...re,normal_price:D,insurance_price:z}),E(!1)}catch(D){W(D.message||"Erreur lors de la sauvegarde des prix.")}finally{q(!1)}},[t,R,T]),k=async D=>{if(!(!t||D===t.status)){v(!0),j(null);try{const{data:z,error:$}=await ne.from("patient_result").update({status:D}).eq("id",t.id).select().single();if($)throw $;r(z||(K=>K?{...K,status:D}:null))}catch(z){console.error("Erreur mise à jour statut:",z),j(z.message||"Impossible de mettre à jour le statut.")}finally{v(!1)}}},P=(D,z,$,K)=>{const re=D;return s.jsxs("div",{className:Ce("flex items-start space-x-3",K),children:[s.jsx(re,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:z}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:$||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},F=m.useMemo(()=>{var z;const D=(B==null?void 0:B.selected_template)||se;return((z=ce.find($=>$.id===D))==null?void 0:z.component)||rr},[B]),X=m.useMemo(()=>({logoUrl:(B==null?void 0:B.logo_url)||null,labName:B==null?void 0:B.lab_name,addressLine1:B==null?void 0:B.address_line1,addressLine2:B==null?void 0:B.address_line2,cityPostalCode:B==null?void 0:B.city_postal_code,phone:B==null?void 0:B.phone,email:B==null?void 0:B.email,website:B==null?void 0:B.website}),[B]);return f?s.jsxs("div",{className:"space-y-6",children:[s.jsx(Y,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-20 w-full"})})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-20 w-full"})})]})]}):x?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(it,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsxs(qt,{children:[x," ",s.jsx(te,{variant:"link",onClick:V,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(it,{to:a?`/patients/${a.id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(is,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),s.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[B?s.jsx("div",{className:"mb-2 print:mb-0",children:s.jsx(F,{data:X,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Bt,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"En-tête Manquant"}),s.jsxs(qt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(it,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Wr,{className:"my-2 print:my-0 print:border-none"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs(Se,{className:"overflow-hidden print:shadow-none",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(We,"NOM PRENOM",a==null?void 0:a.full_name),P(We,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),P(Kt,"Date Naissance",a!=null&&a.date_of_birth?Je(Dt(a.date_of_birth),"P",{locale:Tt}):null),s.jsx("div",{className:"hidden print:block",children:P(Kt,"Date Résultat",t.result_date?Je(Dt(t.result_date),"Pp",{locale:Tt}):null)})]})]}),s.jsxs(Se,{className:"overflow-hidden print:shadow-none _print:border-none",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(Gt,"NOM PRENOM",c==null?void 0:c.full_name),P(lr,"Téléphone",c==null?void 0:c.phone),P(We,"Provenance",c==null?void 0:c.hospital)]})]}),s.jsxs(Se,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(Kt,"Date Résultat",t.result_date?Je(Dt(t.result_date),"Pp",{locale:Tt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),C?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:R,onChange:D=>M(D.target.value),disabled:H}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:R,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),C?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:D=>L(D.target.value),disabled:H}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:C?s.jsxs(s.Fragment,{children:[s.jsxs(te,{size:"xs",variant:"secondary",onClick:J,disabled:H,children:[H?s.jsx(Yt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(te,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:H,children:"Annuler"})]}):s.jsx(te,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),G&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:G})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(We,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Jn,{value:t.status??"",onValueChange:D=>k(D),disabled:p,children:[s.jsxs(tr,{id:"resultStatus",className:"h-9 flex-1",children:[" ",s.jsx(er,{placeholder:"Changer statut..."})," "]}),s.jsxs(nr,{children:[s.jsx(bt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(bt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(bt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Di,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&s.jsx(Yt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),s.jsx(os,{variant:CB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:RB(t.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]}),P(We,"NOM PRENOM",a==null?void 0:a.full_name),P(We,"ID Unique",a==null?void 0:a.patient_unique_id),P(Kt,"Date de Naissance",a!=null&&a.date_of_birth?Je(Dt(a.date_of_birth),"P",{locale:Tt}):null)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Zn,{className:"h-4 w-4"})," Médecin"]}),P(Gt,"NOM PRENOM",c==null?void 0:c.full_name),P(lr,"Téléphone",c==null?void 0:c.phone),P(We,"Hôpital",c==null?void 0:c.hospital)]})]}),s.jsx(MB,{resultId:e})]})," "]}):s.jsx("div",{children:"Résultat non trouvé."})},MB=({resultId:e})=>{const[t,r]=m.useState(null),[a,l]=m.useState(!0),[c,d]=m.useState(null),[f,h]=m.useState((t==null?void 0:t.value)??"1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté"),[p,v]=m.useState(!1),[x,b]=m.useState(!1);m.useEffect(()=>{(async()=>{l(!0),d(null);try{const{data:_,error:C}=await ne.from("vih").select("*").eq("result_id",e).maybeSingle();if(C)throw C;r(_),h((_==null?void 0:_.value)||"1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté")}catch(_){d(_.message||"Erreur lors du chargement du VIH.")}finally{l(!1)}})()},[e]);const w=async()=>{b(!0),d(null);try{const{data:N,error:_}=await ne.from("vih").insert({result_id:e,value:f}).select().single();if(_)throw _;r(N),v(!1)}catch(N){d(N.message||"Erreur lors de la création du VIH.")}finally{b(!1)}},j=async()=>{if(t){b(!0),d(null);try{const{data:N,error:_}=await ne.from("vih").update({value:f}).eq("id",t.id).select().single();if(_)throw _;r(N),v(!1)}catch(N){d(N.message||"Erreur lors de la mise à jour du VIH.")}finally{b(!1)}}};return a?s.jsx("div",{children:"Chargement du VIH..."}):c?s.jsx("div",{className:"text-destructive",children:c}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"print:hidden flex justify-end",children:s.jsx(te,{onClick:()=>window.print(),variant:"outline",size:"sm",children:"Imprimer"})}),s.jsx("div",{className:"print:hidden",children:t?s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-lg font-semibold",children:"VIH"}),p?s.jsxs(s.Fragment,{children:[s.jsx(Ve,{value:f,onChange:N=>h(N.target.value),disabled:x,placeholder:"ex: 1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté"}),s.jsx("p",{className:"text-muted-foreground text-lg",children:"(ex: 1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté)"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx(te,{onClick:j,disabled:x||!f,children:x?"Sauvegarde...":"Sauvegarder"}),s.jsx(te,{variant:"outline",onClick:()=>{v(!1),h(t.value)},disabled:x,children:"Annuler"})]})]}):s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"font-mono text-lg",children:t.value}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>v(!0),children:"Modifier"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Créer VIH"}),s.jsx(Ve,{value:f,onChange:N=>h(N.target.value),placeholder:"ex: 1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté",disabled:x}),s.jsx("p",{className:"text-muted-foreground text-lg",children:"(ex: 1 350 000 copies/ml; 6.13 log10 ou Pas de virus détecté)"}),s.jsx(te,{onClick:w,disabled:x||!f,className:"mt-2",children:x?"Création...":"Créer"})]})}),s.jsx("h2",{className:" text-3xl text-center mb-4 print:pt-4 font-bold uppercase mx-auto tracking-tight print:block  print:text-center",children:"VIROLOGIE"}),t!=null&&t.value?s.jsxs("div",{className:"print:block mt-8 text-black text-lg",children:[s.jsxs("div",{className:"flex flex-row justify-between mb-4",children:[s.jsx("span",{className:"font-bold underline",children:"EXAMENS"}),s.jsx("span",{className:"font-bold underline",children:"RESULTATS"})]}),s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"font-bold text-xl underline",children:"CHARGE VIRALE VIH"})}),s.jsxs("div",{className:"flex flex-row justify-between items-start mt-8",children:[s.jsxs("div",{className:"flex flex-col items-start gap-2 text-lg",style:{minWidth:"340px"},children:[s.jsx("span",{className:"font-semibold",children:"Charge virale  VIH"}),s.jsx("span",{className:"text-xs mt-1 whitespace-nowrap",children:"(Abbott m2000rt et m2000sp Technique PCR en temps réel)"}),!t.value.includes("virus")&&s.jsx("span",{className:"font-semibold mt-20",children:"Soit"})]}),s.jsx("div",{className:"flex flex-col items-end gap-2 text-lg text-right",style:{minWidth:"340px"},children:(()=>{if(/pas de virus détecté/i.test(t.value))return s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-bold text-2xl",children:"Pas de virus détecté"}),s.jsx("span",{className:"text-xs mt-1",children:"(pour 1 ml d'échantillon)"})]});const N=t.value.match(/([\d\s]+copies\/ml)/i),_=t.value.match(/;\s*([\d.]+)\s*log10/i);return s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-bold text-2xl",children:N?N[1].trim():t.value}),s.jsx("span",{className:"text-xs font-normal",children:" (limite de détection <40 pour 0.6 ml)"}),s.jsx("span",{className:"text-xs mt-1",children:"(d'échantillon, 1 copie /ml = 0.58* 1UI/ml)"}),s.jsxs("div",{className:"flex flex-row justify-between w-full mt-8 ",children:[s.jsx("span",{}),s.jsxs("span",{className:"font-bold text-2xl",children:[_?_[1]:""," log",s.jsx("sub",{children:"10"})]})]})]})})()})]})]}):null,s.jsx("div",{className:" mt-20",children:s.jsx(so,{date:new Date().toISOString()})})]})},AB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"default";case"en cours":return"secondary";case"attente":return"outline";default:return"secondary"}},kB=e=>{switch(e==null?void 0:e.toLowerCase()){case"fini":return"Fini";case"en cours":return"En cours";case"attente":return"En attente";default:return e||"Inconnu"}},DB=()=>{const{resultId:e}=yr();or();const[t,r]=m.useState(null),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(!0),[p,v]=m.useState(!1),[x,b]=m.useState(null),[w,j]=m.useState(null),[N,_]=m.useState(""),[C,E]=m.useState(!1),[R,M]=m.useState(""),[T,L]=m.useState(""),[H,q]=m.useState(!1),[G,W]=m.useState(null),ce=[{id:"template1",component:rr},{id:"template2",component:Qa},{id:"template3",component:Za},{id:"template4",component:Ja}],se="template1",[B,ie]=m.useState(null),[oe,O]=m.useState(!0),V=async()=>{if(!e){b("ID du résultat manquant."),h(!1);return}h(!0),b(null),j(null),r(null),l(null),d(null),O(!0),ie(null);try{const{data:D,error:z}=await ne.from("patient_result").select("*").eq("id",e).single();if(z)throw z;if(!D)throw new Error("Résultat non trouvé.");r(D);const[$,K,re]=await Promise.all([ne.from("patient").select("*").eq("id",D.patient_id).single(),ne.from("doctor").select("*").eq("id",D.doctor_id).single(),ne.from("print_header_config").select("*").limit(1).maybeSingle()]);$.error&&console.warn("Erreur chargement patient:",$.error.message),K.error&&console.warn("Erreur chargement médecin:",K.error.message),l($.data),d(K.data),ie(re.data),O(!1)}catch(D){console.error("Erreur chargement détails du résultat:",D),b(D.message||"Une erreur est survenue lors du chargement du résultat.")}finally{h(!1)}};m.useEffect(()=>{V()},[e]),m.useEffect(()=>{M((t==null?void 0:t.normal_price)!=null?String(t.normal_price):""),L((t==null?void 0:t.insurance_price)!=null?String(t.insurance_price):"")},[t]);const U=m.useCallback(async D=>{if(e)try{const{error:z}=await ne.from("patient_result").update({description:D}).eq("id",e);if(z)throw z}catch(z){console.error("Error saving description:",z)}},[e]);m.useEffect(()=>{const D=setTimeout(()=>{N!==(t==null?void 0:t.description)&&U(N)},1e3);return()=>clearTimeout(D)},[N,t==null?void 0:t.description,U]);const J=m.useCallback(async()=>{q(!0),W(null);try{const D=R!==""?Number(R):null,z=T!==""?Number(T):null;if(R!==""&&isNaN(D)||T!==""&&isNaN(z)){W("Les prix doivent être des nombres valides."),q(!1);return}const{error:$,data:K}=await ne.from("patient_result").update({normal_price:D,insurance_price:z}).eq("id",t.id).select().single();if($)throw $;r(re=>re&&{...re,normal_price:D,insurance_price:z}),E(!1)}catch(D){W(D.message||"Erreur lors de la sauvegarde des prix.")}finally{q(!1)}},[t,R,T]),k=async D=>{if(!(!t||D===t.status)){v(!0),j(null);try{const{data:z,error:$}=await ne.from("patient_result").update({status:D}).eq("id",t.id).select().single();if($)throw $;r(z||(K=>K?{...K,status:D}:null))}catch(z){console.error("Erreur mise à jour statut:",z),j(z.message||"Impossible de mettre à jour le statut.")}finally{v(!1)}}},P=(D,z,$,K)=>{const re=D;return s.jsxs("div",{className:Ce("flex items-start space-x-3",K),children:[s.jsx(re,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:z}),s.jsx("p",{className:"text-sm font-bold print:text-xs",children:$||s.jsx("span",{className:"text-muted-foreground italic font-normal",children:"Non spécifié"})})]})]})},F=m.useMemo(()=>{var z;const D=(B==null?void 0:B.selected_template)||se;return((z=ce.find($=>$.id===D))==null?void 0:z.component)||rr},[B]),X=m.useMemo(()=>({logoUrl:(B==null?void 0:B.logo_url)||null,labName:B==null?void 0:B.lab_name,addressLine1:B==null?void 0:B.address_line1,addressLine2:B==null?void 0:B.address_line2,cityPostalCode:B==null?void 0:B.city_postal_code,phone:B==null?void 0:B.phone,email:B==null?void 0:B.email,website:B==null?void 0:B.website}),[B]);return f?s.jsxs("div",{className:"space-y-6",children:[s.jsx(Y,{className:"h-8 w-32"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]}),s.jsxs(Se,{children:[s.jsxs(Me,{children:[s.jsx(Y,{className:"h-5 w-24"}),s.jsx(Y,{className:"h-4 w-32 mt-1"})]}),s.jsxs(Ee,{className:"space-y-3",children:[s.jsx(Y,{className:"h-8 w-full"}),s.jsx(Y,{className:"h-8 w-full"})]})]})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-20 w-full"})})]}),s.jsxs(Se,{children:[s.jsx(Me,{children:s.jsx(Y,{className:"h-6 w-1/3"})}),s.jsx(Ee,{children:s.jsx(Y,{className:"h-20 w-full"})})]})]}):x?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(it,{to:t!=null&&t.patient_id?`/patients/${t.patient_id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour"]})})}),s.jsxs(Bt,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"Erreur"}),s.jsxs(qt,{children:[x," ",s.jsx(te,{variant:"link",onClick:V,className:"p-0 h-auto text-destructive-foreground underline",children:"Réessayer"})]})]})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 print:hidden",children:[s.jsx("div",{children:s.jsx(it,{to:a?`/patients/${a.id}`:"/patients",children:s.jsxs(te,{variant:"outline",size:"sm",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Retour ",a?`à ${a.full_name}`:"à la liste"]})})}),s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2 order-first sm:order-none",children:[s.jsx(is,{className:"h-6 w-6 text-primary"}),"Détails du Résultat"]})]}),s.jsxs("div",{className:"report-content bg-white  p-4 sm:p-6 border border-transparent print:border-none print:p-0 print:shadow-none",children:[B?s.jsx("div",{className:"mb-2 print:mb-0",children:s.jsx(F,{data:X,isPreview:!1,reportTitle:"RAPPORT DE RÉSULTATS"})}):s.jsxs(Bt,{variant:"default",className:"mb-2 print:mb-0 print:hidden",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx(Ht,{children:"En-tête Manquant"}),s.jsxs(qt,{children:["La configuration de l'en-tête d'impression n'a pas été trouvée."," ",s.jsx(it,{to:"/settings/print-header",className:"underline",children:"Configurer maintenant"}),"."]})]}),s.jsx(Wr,{className:"my-2 print:my-0 print:border-none"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6 print:mb-4 print:grid-cols-2 print:hidden",children:[s.jsxs(Se,{className:"overflow-hidden print:shadow-none",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(We,"NOM PRENOM",a==null?void 0:a.full_name),P(We,"IDENTIFIANT Unique",a==null?void 0:a.patient_unique_id),P(Kt,"Date Naissance",a!=null&&a.date_of_birth?Je(Dt(a.date_of_birth),"P",{locale:Tt}):null),s.jsx("div",{className:"hidden print:block",children:P(Kt,"Date Résultat",t.result_date?Je(Dt(t.result_date),"Pp",{locale:Tt}):null)})]})]}),s.jsxs(Se,{className:"overflow-hidden print:shadow-none _print:border-none",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Médecin"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(Gt,"NOM PRENOM",c==null?void 0:c.full_name),P(lr,"Téléphone",c==null?void 0:c.phone),P(We,"Provenance",c==null?void 0:c.hospital)]})]}),s.jsxs(Se,{className:"overflow-hidden print:shadow-none _print:border-none  print:hidden",children:[s.jsx(Me,{className:"pb-2 print:pb-1",children:s.jsxs(yt,{className:"text-sm font-semibold flex items-center gap-2 print:text-xs",children:[s.jsx(Ga,{className:"h-4 w-4"}),"Résultat Info"]})}),s.jsxs(Ee,{className:"space-y-1 pt-1 print:space-y-0.5 print:pt-0.5",children:[P(Kt,"Date Résultat",t.result_date?Je(Dt(t.result_date),"Pp",{locale:Tt}):null),s.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"normal_price",className:"text-xs font-medium",children:"Prix Normal"}),C?s.jsx("input",{id:"normal_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:R,onChange:D=>M(D.target.value),disabled:H}):s.jsx("input",{id:"normal_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:R,disabled:!0,readOnly:!0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{htmlFor:"insurance_price",className:"text-xs font-medium",children:"Prix Assurance"}),C?s.jsx("input",{id:"insurance_price",type:"number",min:"0",step:"0.01",className:"border rounded px-2 py-1 text-xs w-28",value:T,onChange:D=>L(D.target.value),disabled:H}):s.jsx("input",{id:"insurance_price",type:"text",className:"border-none bg-transparent text-xs w-28",value:T,disabled:!0,readOnly:!0})]}),s.jsx("div",{className:"flex gap-2 mt-1",children:C?s.jsxs(s.Fragment,{children:[s.jsxs(te,{size:"xs",variant:"secondary",onClick:J,disabled:H,children:[H?s.jsx(Yt,{className:"h-3 w-3 animate-spin mr-1"}):null,"Sauvegarder"]}),s.jsx(te,{size:"xs",variant:"outline",onClick:()=>E(!1),disabled:H,children:"Annuler"})]}):s.jsx(te,{size:"xs",variant:"outline",onClick:()=>E(!0),children:"Modifier Prix"})}),G&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:G})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(We,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0 print:h-4 print:w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Statut"}),s.jsxs("div",{className:"flex items-center gap-2 print:hidden",children:[s.jsxs(Jn,{value:t.status??"",onValueChange:D=>k(D),disabled:p,children:[s.jsxs(tr,{id:"resultStatus",className:"h-9 flex-1",children:[" ",s.jsx(er,{placeholder:"Changer statut..."})," "]}),s.jsxs(nr,{children:[s.jsx(bt,{value:"attente",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"})," ","En attente"]})}),s.jsx(bt,{value:"en cours",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4 text-blue-600"})," En cours"]})}),s.jsx(bt,{value:"fini",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Di,{className:"h-4 w-4 text-green-600"})," ","Fini"]})})]})]}),p&&s.jsx(Yt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),w&&s.jsx("p",{className:"text-xs text-destructive mt-1 print:hidden",children:w}),s.jsx(os,{variant:AB(t.status),className:"hidden text-sm font-medium print:inline-flex print:text-xs print:font-normal print:border print:shadow-none",children:kB(t.status)})]})]})]})]})]}),s.jsxs("div",{className:"grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6  print:grid-cols-2 hidden print:grid ",children:[s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600 print:shadow-lg bg-white/90 p-3 print:border  print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Gt,{className:"h-4 w-4"}),"Patient"]}),P(We,"NOM PRENOM",a==null?void 0:a.full_name),P(We,"ID Unique",a==null?void 0:a.patient_unique_id),P(Kt,"Date de Naissance",a!=null&&a.date_of_birth?Je(Dt(a.date_of_birth),"P",{locale:Tt}):null)]}),s.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-600  bg-white/90 p-3 print:border print:shadow-lg print:bg-white print:rounded-md print:p-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold mb-1",children:[s.jsx(Zn,{className:"h-4 w-4"})," Médecin"]}),P(Gt,"NOM PRENOM",c==null?void 0:c.full_name),P(lr,"Téléphone",c==null?void 0:c.phone),P(We,"Hôpital",c==null?void 0:c.hospital)]})]}),s.jsx(OB,{resultId:e})]})]}):s.jsx("div",{children:"Résultat non trouvé."})};function OB({resultId:e}){const[t,r]=m.useState(!0),[a,l]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(!1),[p,v]=m.useState(null),[x,b]=m.useState({diagnostic_clinique:"",biopsie_chirurgicale:"",fixateur_utilise:"",etude_macroscopique:"",etude_histologique:"",conclusion:"",bottom_text:""}),[w,j]=m.useState({cityDate:`BAMAKO, LE ${Je(new Date,"dd/MM/yyyy")}`,doctor:"Dr, Bourama COULIBALY"});m.useEffect(()=>{const E=localStorage.getItem("anapath_city_date"),R=localStorage.getItem("anapath_doctor");j({cityDate:E||"BAMAKO, LE 4/06/2024",doctor:R||"Dr, Bourama COULIBALY"})},[]),m.useEffect(()=>{localStorage.setItem("anapath_city_date",w.cityDate),localStorage.setItem("anapath_doctor",w.doctor)},[w]);const N=E=>{const{name:R,value:M}=E.target;j(T=>({...T,[R]:M}))};m.useEffect(()=>{async function E(){r(!0),l(null);const{data:R,error:M}=await ne.from("anapath").select("*").eq("result_id",e).maybeSingle();if(M){l("Erreur lors du chargement: "+M.message),r(!1);return}if(R){d(R),b({diagnostic_clinique:R.diagnostic_clinique||"",biopsie_chirurgicale:R.biopsie_chirurgicale||"",fixateur_utilise:R.fixateur_utilise||"",etude_macroscopique:R.etude_macroscopique||"",etude_histologique:R.etude_histologique||"",conclusion:R.conclusion||"",bottom_text:R.bottom_text||""}),r(!1);return}const{data:T,error:L}=await ne.from("anapath").insert([{result_id:e}]).select().maybeSingle();if(L)if(L.code==="23505"||L.message&&L.message.includes("duplicate key value")){const{data:H,error:q}=await ne.from("anapath").select("*").eq("result_id",e).maybeSingle();q?l("Erreur lors du chargement après duplication: "+q.message):H?(d(H),b({diagnostic_clinique:H.diagnostic_clinique||"",biopsie_chirurgicale:H.biopsie_chirurgicale||"",fixateur_utilise:H.fixateur_utilise||"",etude_macroscopique:H.etude_macroscopique||"",etude_histologique:H.etude_histologique||"",conclusion:H.conclusion||"",bottom_text:H.bottom_text||""})):l("Erreur inattendue lors de la récupération après duplication.")}else l("Erreur lors de la création: "+L.message);else d(T),b({diagnostic_clinique:T.diagnostic_clinique||"",biopsie_chirurgicale:T.biopsie_chirurgicale||"",fixateur_utilise:T.fixateur_utilise||"",etude_macroscopique:T.etude_macroscopique||"",etude_histologique:T.etude_histologique||"",conclusion:T.conclusion||"",bottom_text:T.bottom_text||""});r(!1)}e&&E()},[e]);const _=E=>{const{name:R,value:M}=E.target;b(T=>({...T,[R]:M}))},C=async()=>{if(!c)return;h(!0),v(null);const{error:E}=await ne.from("anapath").update(x).eq("id",c.id);h(!1),v(E?"Erreur lors de la sauvegarde: "+E.message:"Modifications enregistrées !")};return t?s.jsx("div",{children:"Chargement..."}):a?s.jsx("div",{className:"text-red-500",children:a}):c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-end mb-4 print:hidden",children:s.jsxs(te,{onClick:()=>window.print(),variant:"outline",children:[s.jsx(vf,{className:"mr-2 h-4 w-4"})," Imprimer"]})}),s.jsxs("div",{className:"w-full mx-auto bg-white p-8 rounded shadow print:bg-white print:shadow-none print:p-0 print:max-w-full print:text-black print:font-serif print:leading-relaxed print:text-[16pt] print:rounded-none",style:{minHeight:"29.7cm",minWidth:"21cm"},children:[s.jsx("h1",{className:"text-2xl font-bold text-center mb-6 uppercase print:text-[20pt] print:mb-8 print:font-bold",children:"EXAMEN ANATOMO-PATHOLOGIQUE"}),s.jsxs("div",{className:"mb-4 print:mb-6",children:[s.jsx("h2",{className:"font-bold mb-2 print:mb-1 print:text-[17pt] uppercase",children:"Résumé de l’Observation Clinique :"}),s.jsxs("div",{className:"ml-4 space-y-2 print:ml-0 print:space-y-1",children:[s.jsxs("div",{children:["Diagnostic Clinique :",s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.diagnostic_clinique}),s.jsx("input",{name:"diagnostic_clinique",value:x.diagnostic_clinique,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Diagnostic Clinique",disabled:f})]})]}),s.jsxs("div",{children:["Biopsie Chirurgicale :",s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.biopsie_chirurgicale}),s.jsx("input",{name:"biopsie_chirurgicale",value:x.biopsie_chirurgicale,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Biopsie Chirurgicale",disabled:f})]})]}),s.jsxs("div",{children:["Fixateur Utilisé :",s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.fixateur_utilise}),s.jsx("input",{name:"fixateur_utilise",value:x.fixateur_utilise,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Fixateur Utilisé",disabled:f})]})]})]})]}),s.jsxs("div",{className:"mb-4 print:mb-6",children:[s.jsx("h2",{className:"font-bold mb-2 uppercase print:mb-1 print:text-[17pt]",children:"COMPTE –RENDU HISTOPATHOLOGIQUE :"}),s.jsxs("div",{className:"ml-4 space-y-2 print:ml-0 print:space-y-1",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold print:text-[16pt]",children:"I. Etude Macroscopique :"}),s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.etude_macroscopique}),s.jsx("textarea",{name:"etude_macroscopique",value:x.etude_macroscopique,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Etude Macroscopique",rows:2,disabled:f})]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold print:text-[16pt]",children:"2-Etude Histologique :"}),s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.etude_histologique}),s.jsx("textarea",{name:"etude_histologique",value:x.etude_histologique,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Etude Histologique",rows:2,disabled:f})]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold underline print:text-[16pt]",children:"3-Conclusion :"}),s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.conclusion}),s.jsx("textarea",{name:"conclusion",value:x.conclusion,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"Conclusion",rows:2,disabled:f})]})]}),s.jsx("div",{children:s.jsxs("span",{className:"print:inline print:ml-1",children:[s.jsx("span",{className:"hidden print:inline print:text-[16pt]",children:x.bottom_text}),s.jsx("textarea",{name:"bottom_text",value:x.bottom_text,onChange:_,className:"border-b border-gray-300 focus:outline-none w-full print:hidden bg-transparent",placeholder:"OLGA/OLGIM...",rows:1,disabled:f})]})})]})]}),s.jsxs("div",{className:"mt-8 flex flex-col items-end print:mt-12 print:items-end",children:[s.jsxs("span",{className:"print:text-[15pt]",children:[s.jsx("span",{className:"hidden print:inline",children:w.cityDate}),s.jsx("input",{name:"cityDate",value:w.cityDate,onChange:N,className:"border-b border-gray-300 focus:outline-none bg-transparent w-auto text-right print:hidden"})]}),s.jsxs("span",{className:"print:text-[15pt]",children:[s.jsx("span",{className:"hidden print:inline",children:w.doctor}),s.jsx("input",{name:"doctor",value:w.doctor,onChange:N,className:"border-b border-gray-300 focus:outline-none bg-transparent w-auto text-right print:hidden"})]})]}),s.jsxs("div",{className:"mt-6 flex items-center gap-4 print:hidden",children:[s.jsx(te,{onClick:C,disabled:f,variant:"default",children:f?"Enregistrement...":"Enregistrer"}),p&&s.jsx("span",{className:p.startsWith("Erreur")?"text-red-500":"text-green-600",children:p})]})]}),s.jsx("div",{className:"print:block hidden page-break-after"})]}):s.jsx("div",{children:"Entrée Anapath non trouvée."})}function PB(){return s.jsx(s.Fragment,{children:s.jsxs(kR,{children:[s.jsx(Pt,{path:"/login",element:s.jsx(J3,{})}),s.jsx(Pt,{element:s.jsx(X3,{}),children:s.jsxs(Pt,{element:s.jsx(W3,{}),children:[s.jsx(Pt,{index:!0,element:s.jsx(_w,{})}),s.jsx(Pt,{path:"/patients",element:s.jsx(_w,{})}),s.jsx(Pt,{path:"/patients/new",element:s.jsx(Ow,{})})," ",s.jsx(Pt,{path:"/patients/:patientId",element:s.jsx(x6,{})}),s.jsx(Pt,{path:"/patients/:patientId/edit",element:s.jsx(Ow,{})})," ",s.jsx(Pt,{path:"/patients/:patientId/results/new",element:s.jsx(Qw,{})}),s.jsx(Pt,{path:"/results/:resultId",element:s.jsx(XU,{})}),s.jsx(Pt,{path:"/results/:resultId/edit",element:s.jsx(Qw,{})}),s.jsx(Pt,{path:"/doctors",element:s.jsx(y6,{})}),s.jsx(Pt,{path:"/doctors/new",element:s.jsx(tj,{})})," ",s.jsx(Pt,{path:"/doctors/:doctorId/edit",element:s.jsx(tj,{})})," ",s.jsx(Pt,{path:"/test-types",element:s.jsx(JU,{})}),s.jsx(Pt,{path:"/test-types/new",element:s.jsx(ej,{})}),s.jsx(Pt,{path:"/test-types/:testTypeId/edit",element:s.jsx(ej,{})}),s.jsx(Pt,{path:"/categories",element:s.jsx(s$,{})})," ",s.jsx(Pt,{path:"/ristournes",element:s.jsx(oB,{})}),s.jsx(Pt,{path:"/ristournes/new",element:s.jsx(ij,{})}),s.jsx(Pt,{path:"/ristournes/:ristourneId",element:s.jsx(ij,{})}),s.jsx(Pt,{path:"/settings/print-header",element:s.jsx(aB,{})}),s.jsx(Pt,{path:"/protidogramme/:resultId",element:s.jsx(fB,{})}),s.jsx(Pt,{path:"/skip-range-management",element:s.jsx(cB,{})}),s.jsx(Pt,{path:"/atbs",element:s.jsx(xB,{})}),s.jsx(Pt,{path:"/atb/:resultId",element:s.jsx(gB,{})}),s.jsx(Pt,{path:"/ecb/:resultId",element:s.jsx(wB,{})}),s.jsx(Pt,{path:"/ecb-models",element:s.jsx(jB,{})}),s.jsx(Pt,{path:"/vhb/:resultId",element:s.jsx(SB,{})}),s.jsx(Pt,{path:"/vih/:resultId",element:s.jsx(TB,{})}),s.jsx(Pt,{path:"/anapath/:resultId",element:s.jsx(DB,{})})]})}),s.jsx(Pt,{path:"*",element:s.jsx(b6,{})})]})})}var LB=(e,t,r,a,l,c,d,f)=>{let h=document.documentElement,p=["light","dark"];function v(w){(Array.isArray(e)?e:[e]).forEach(j=>{let N=j==="class",_=N&&c?l.map(C=>c[C]||C):l;N?(h.classList.remove(..._),h.classList.add(c&&c[w]?c[w]:w)):h.setAttribute(j,w)}),x(w)}function x(w){f&&p.includes(w)&&(h.style.colorScheme=w)}function b(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(a)v(a);else try{let w=localStorage.getItem(t)||r,j=d&&w==="system"?b():w;v(j)}catch{}},IB=m.createContext(void 0),zB={setTheme:e=>{},themes:[]},UB=()=>{var e;return(e=m.useContext(IB))!=null?e:zB};m.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:a,enableColorScheme:l,defaultTheme:c,value:d,themes:f,nonce:h,scriptProps:p})=>{let v=JSON.stringify([r,t,c,e,f,d,a,l]).slice(1,-1);return m.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(${LB.toString()})(${v})`}})});const $B=({...e})=>{const{theme:t="system"}=UB();return s.jsx(A$,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};$C.createRoot(document.getElementById("root")).render(s.jsx(be.StrictMode,{children:s.jsx(tT,{children:s.jsxs(pA,{children:[s.jsx($B,{richColors:!0,position:"top-right"})," ",s.jsx(PB,{})]})})}));export{Xd as g};
